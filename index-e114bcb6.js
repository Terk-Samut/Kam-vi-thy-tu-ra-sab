var x1=Object.defineProperty;var w1=(n,_,x)=>_ in n?x1(n,_,{enumerable:!0,configurable:!0,writable:!0,value:x}):n[_]=x;var $t=(n,_,x)=>(w1(n,typeof _!="symbol"?_+"":_,x),x),rl=(n,_,x)=>{if(!_.has(n))throw TypeError("Cannot "+x)};var il=(n,_,x)=>(rl(n,_,"read from private field"),x?x.call(n):_.get(n)),al=(n,_,x)=>{if(_.has(n))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(n):_.set(n,x)},ol=(n,_,x,E)=>(rl(n,_,"write to private field"),E?E.call(n,x):_.set(n,x),x);function _mergeNamespaces(n,_){for(var x=0;x<_.length;x++){const E=_[x];if(typeof E!="string"&&!Array.isArray(E)){for(const S in E)if(S!=="default"&&!(S in n)){const C=Object.getOwnPropertyDescriptor(E,S);C&&Object.defineProperty(n,S,C.get?C:{enumerable:!0,get:()=>E[S]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))E(S);new MutationObserver(S=>{for(const C of S)if(C.type==="childList")for(const T of C.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&E(T)}).observe(document,{childList:!0,subtree:!0});function x(S){const C={};return S.integrity&&(C.integrity=S.integrity),S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?C.credentials="include":S.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function E(S){if(S.ep)return;S.ep=!0;const C=x(S);fetch(S.href,C)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var _=n.default;if(typeof _=="function"){var x=function E(){return this instanceof E?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};x.prototype=_.prototype}else x={};return Object.defineProperty(x,"__esModule",{value:!0}),Object.keys(n).forEach(function(E){var S=Object.getOwnPropertyDescriptor(n,E);Object.defineProperty(x,E,S.get?S:{enumerable:!0,get:function(){return n[E]}})}),x}var browser$g={exports:{}},process$1=browser$g.exports={},cachedSetTimeout$1,cachedClearTimeout$1;function defaultSetTimout$1(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout$1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout$1=setTimeout:cachedSetTimeout$1=defaultSetTimout$1}catch{cachedSetTimeout$1=defaultSetTimout$1}try{typeof clearTimeout=="function"?cachedClearTimeout$1=clearTimeout:cachedClearTimeout$1=defaultClearTimeout$1}catch{cachedClearTimeout$1=defaultClearTimeout$1}})();function runTimeout$1(n){if(cachedSetTimeout$1===setTimeout)return setTimeout(n,0);if((cachedSetTimeout$1===defaultSetTimout$1||!cachedSetTimeout$1)&&setTimeout)return cachedSetTimeout$1=setTimeout,setTimeout(n,0);try{return cachedSetTimeout$1(n,0)}catch{try{return cachedSetTimeout$1.call(null,n,0)}catch{return cachedSetTimeout$1.call(this,n,0)}}}function runClearTimeout$1(n){if(cachedClearTimeout$1===clearTimeout)return clearTimeout(n);if((cachedClearTimeout$1===defaultClearTimeout$1||!cachedClearTimeout$1)&&clearTimeout)return cachedClearTimeout$1=clearTimeout,clearTimeout(n);try{return cachedClearTimeout$1(n)}catch{try{return cachedClearTimeout$1.call(null,n)}catch{return cachedClearTimeout$1.call(this,n)}}}var queue$2=[],draining$1=!1,currentQueue$1,queueIndex$1=-1;function cleanUpNextTick$1(){!draining$1||!currentQueue$1||(draining$1=!1,currentQueue$1.length?queue$2=currentQueue$1.concat(queue$2):queueIndex$1=-1,queue$2.length&&drainQueue$1())}function drainQueue$1(){if(!draining$1){var n=runTimeout$1(cleanUpNextTick$1);draining$1=!0;for(var _=queue$2.length;_;){for(currentQueue$1=queue$2,queue$2=[];++queueIndex$1<_;)currentQueue$1&&currentQueue$1[queueIndex$1].run();queueIndex$1=-1,_=queue$2.length}currentQueue$1=null,draining$1=!1,runClearTimeout$1(n)}}process$1.nextTick=function(n){var _=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)_[x-1]=arguments[x];queue$2.push(new Item$1(n,_)),queue$2.length===1&&!draining$1&&runTimeout$1(drainQueue$1)};function Item$1(n,_){this.fun=n,this.array=_}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop$9(){}process$1.on=noop$9;process$1.addListener=noop$9;process$1.once=noop$9;process$1.off=noop$9;process$1.removeListener=noop$9;process$1.removeAllListeners=noop$9;process$1.emit=noop$9;process$1.prependListener=noop$9;process$1.prependOnceListener=noop$9;process$1.listeners=function(n){return[]};process$1.binding=function(n){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(n){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var browserExports$1=browser$g.exports;const process$2=getDefaultExportFromCjs(browserExports$1);var buffer$3={},base64Js={};base64Js.byteLength=byteLength$2;base64Js.toByteArray=toByteArray$1;base64Js.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$a.length;i$1<len;++i$1)lookup$2[i$1]=code$a[i$1],revLookup$1[code$a.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens(n){var _=n.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=n.indexOf("=");x===-1&&(x=_);var E=x===_?0:4-x%4;return[x,E]}function byteLength$2(n){var _=getLens(n),x=_[0],E=_[1];return(x+E)*3/4-E}function _byteLength(n,_,x){return(_+x)*3/4-x}function toByteArray$1(n){var _,x=getLens(n),E=x[0],S=x[1],C=new Arr$1(_byteLength(n,E,S)),T=0,A=S>0?E-4:E,B;for(B=0;B<A;B+=4)_=revLookup$1[n.charCodeAt(B)]<<18|revLookup$1[n.charCodeAt(B+1)]<<12|revLookup$1[n.charCodeAt(B+2)]<<6|revLookup$1[n.charCodeAt(B+3)],C[T++]=_>>16&255,C[T++]=_>>8&255,C[T++]=_&255;return S===2&&(_=revLookup$1[n.charCodeAt(B)]<<2|revLookup$1[n.charCodeAt(B+1)]>>4,C[T++]=_&255),S===1&&(_=revLookup$1[n.charCodeAt(B)]<<10|revLookup$1[n.charCodeAt(B+1)]<<4|revLookup$1[n.charCodeAt(B+2)]>>2,C[T++]=_>>8&255,C[T++]=_&255),C}function tripletToBase64$1(n){return lookup$2[n>>18&63]+lookup$2[n>>12&63]+lookup$2[n>>6&63]+lookup$2[n&63]}function encodeChunk$1(n,_,x){for(var E,S=[],C=_;C<x;C+=3)E=(n[C]<<16&16711680)+(n[C+1]<<8&65280)+(n[C+2]&255),S.push(tripletToBase64$1(E));return S.join("")}function fromByteArray$1(n){for(var _,x=n.length,E=x%3,S=[],C=16383,T=0,A=x-E;T<A;T+=C)S.push(encodeChunk$1(n,T,T+C>A?A:T+C));return E===1?(_=n[x-1],S.push(lookup$2[_>>2]+lookup$2[_<<4&63]+"==")):E===2&&(_=(n[x-2]<<8)+n[x-1],S.push(lookup$2[_>>10]+lookup$2[_>>4&63]+lookup$2[_<<2&63]+"=")),S.join("")}var ieee754$2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$2.read=function(n,_,x,E,S){var C,T,A=S*8-E-1,B=(1<<A)-1,I=B>>1,M=-7,O=x?S-1:0,D=x?-1:1,L=n[_+O];for(O+=D,C=L&(1<<-M)-1,L>>=-M,M+=A;M>0;C=C*256+n[_+O],O+=D,M-=8);for(T=C&(1<<-M)-1,C>>=-M,M+=E;M>0;T=T*256+n[_+O],O+=D,M-=8);if(C===0)C=1-I;else{if(C===B)return T?NaN:(L?-1:1)*(1/0);T=T+Math.pow(2,E),C=C-I}return(L?-1:1)*T*Math.pow(2,C-E)};ieee754$2.write=function(n,_,x,E,S,C){var T,A,B,I=C*8-S-1,M=(1<<I)-1,O=M>>1,D=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=E?0:C-1,V=E?1:-1,U=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(A=isNaN(_)?1:0,T=M):(T=Math.floor(Math.log(_)/Math.LN2),_*(B=Math.pow(2,-T))<1&&(T--,B*=2),T+O>=1?_+=D/B:_+=D*Math.pow(2,1-O),_*B>=2&&(T++,B/=2),T+O>=M?(A=0,T=M):T+O>=1?(A=(_*B-1)*Math.pow(2,S),T=T+O):(A=_*Math.pow(2,O-1)*Math.pow(2,S),T=0));S>=8;n[x+L]=A&255,L+=V,A/=256,S-=8);for(T=T<<S|A,I+=S;I>0;n[x+L]=T&255,L+=V,T/=256,I-=8);n[x+L-V]|=U*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const _=base64Js,x=ieee754$2,E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=A,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const S=2147483647;n.kMaxLength=S,A.TYPED_ARRAY_SUPPORT=C(),!A.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{const Re=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(Re,be),Re.foo()===42}catch{return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}});function T(Re){if(Re>S)throw new RangeError('The value "'+Re+'" is invalid for option "size"');const be=new Uint8Array(Re);return Object.setPrototypeOf(be,A.prototype),be}function A(Re,be,Ae){if(typeof Re=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Re)}return B(Re,be,Ae)}A.poolSize=8192;function B(Re,be,Ae){if(typeof Re=="string")return D(Re,be);if(ArrayBuffer.isView(Re))return V(Re);if(Re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re);if(Ke(Re,ArrayBuffer)||Re&&Ke(Re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ke(Re,SharedArrayBuffer)||Re&&Ke(Re.buffer,SharedArrayBuffer)))return U(Re,be,Ae);if(typeof Re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=Re.valueOf&&Re.valueOf();if(Le!=null&&Le!==Re)return A.from(Le,be,Ae);const Xe=q(Re);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Re[Symbol.toPrimitive]=="function")return A.from(Re[Symbol.toPrimitive]("string"),be,Ae);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Re)}A.from=function(Re,be,Ae){return B(Re,be,Ae)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array);function I(Re){if(typeof Re!="number")throw new TypeError('"size" argument must be of type number');if(Re<0)throw new RangeError('The value "'+Re+'" is invalid for option "size"')}function M(Re,be,Ae){return I(Re),Re<=0?T(Re):be!==void 0?typeof Ae=="string"?T(Re).fill(be,Ae):T(Re).fill(be):T(Re)}A.alloc=function(Re,be,Ae){return M(Re,be,Ae)};function O(Re){return I(Re),T(Re<0?0:H(Re)|0)}A.allocUnsafe=function(Re){return O(Re)},A.allocUnsafeSlow=function(Re){return O(Re)};function D(Re,be){if((typeof be!="string"||be==="")&&(be="utf8"),!A.isEncoding(be))throw new TypeError("Unknown encoding: "+be);const Ae=Q(Re,be)|0;let Le=T(Ae);const Xe=Le.write(Re,be);return Xe!==Ae&&(Le=Le.slice(0,Xe)),Le}function L(Re){const be=Re.length<0?0:H(Re.length)|0,Ae=T(be);for(let Le=0;Le<be;Le+=1)Ae[Le]=Re[Le]&255;return Ae}function V(Re){if(Ke(Re,Uint8Array)){const be=new Uint8Array(Re);return U(be.buffer,be.byteOffset,be.byteLength)}return L(Re)}function U(Re,be,Ae){if(be<0||Re.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(Re.byteLength<be+(Ae||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return be===void 0&&Ae===void 0?Le=new Uint8Array(Re):Ae===void 0?Le=new Uint8Array(Re,be):Le=new Uint8Array(Re,be,Ae),Object.setPrototypeOf(Le,A.prototype),Le}function q(Re){if(A.isBuffer(Re)){const be=H(Re.length)|0,Ae=T(be);return Ae.length===0||Re.copy(Ae,0,0,be),Ae}if(Re.length!==void 0)return typeof Re.length!="number"||Ge(Re.length)?T(0):L(Re);if(Re.type==="Buffer"&&Array.isArray(Re.data))return L(Re.data)}function H(Re){if(Re>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Re|0}function W(Re){return+Re!=Re&&(Re=0),A.alloc(+Re)}A.isBuffer=function(be){return be!=null&&be._isBuffer===!0&&be!==A.prototype},A.compare=function(be,Ae){if(Ke(be,Uint8Array)&&(be=A.from(be,be.offset,be.byteLength)),Ke(Ae,Uint8Array)&&(Ae=A.from(Ae,Ae.offset,Ae.byteLength)),!A.isBuffer(be)||!A.isBuffer(Ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(be===Ae)return 0;let Le=be.length,Xe=Ae.length;for(let Qe=0,et=Math.min(Le,Xe);Qe<et;++Qe)if(be[Qe]!==Ae[Qe]){Le=be[Qe],Xe=Ae[Qe];break}return Le<Xe?-1:Xe<Le?1:0},A.isEncoding=function(be){switch(String(be).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(be,Ae){if(!Array.isArray(be))throw new TypeError('"list" argument must be an Array of Buffers');if(be.length===0)return A.alloc(0);let Le;if(Ae===void 0)for(Ae=0,Le=0;Le<be.length;++Le)Ae+=be[Le].length;const Xe=A.allocUnsafe(Ae);let Qe=0;for(Le=0;Le<be.length;++Le){let et=be[Le];if(Ke(et,Uint8Array))Qe+et.length>Xe.length?(A.isBuffer(et)||(et=A.from(et)),et.copy(Xe,Qe)):Uint8Array.prototype.set.call(Xe,et,Qe);else if(A.isBuffer(et))et.copy(Xe,Qe);else throw new TypeError('"list" argument must be an Array of Buffers');Qe+=et.length}return Xe};function Q(Re,be){if(A.isBuffer(Re))return Re.length;if(ArrayBuffer.isView(Re)||Ke(Re,ArrayBuffer))return Re.byteLength;if(typeof Re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Re);const Ae=Re.length,Le=arguments.length>2&&arguments[2]===!0;if(!Le&&Ae===0)return 0;let Xe=!1;for(;;)switch(be){case"ascii":case"latin1":case"binary":return Ae;case"utf8":case"utf-8":return Me(Re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ae*2;case"hex":return Ae>>>1;case"base64":return He(Re).length;default:if(Xe)return Le?-1:Me(Re).length;be=(""+be).toLowerCase(),Xe=!0}}A.byteLength=Q;function re(Re,be,Ae){let Le=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((Ae===void 0||Ae>this.length)&&(Ae=this.length),Ae<=0)||(Ae>>>=0,be>>>=0,Ae<=be))return"";for(Re||(Re="utf8");;)switch(Re){case"hex":return oe(this,be,Ae);case"utf8":case"utf-8":return F(this,be,Ae);case"ascii":return te(this,be,Ae);case"latin1":case"binary":return se(this,be,Ae);case"base64":return X(this,be,Ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,be,Ae);default:if(Le)throw new TypeError("Unknown encoding: "+Re);Re=(Re+"").toLowerCase(),Le=!0}}A.prototype._isBuffer=!0;function ce(Re,be,Ae){const Le=Re[be];Re[be]=Re[Ae],Re[Ae]=Le}A.prototype.swap16=function(){const be=this.length;if(be%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ae=0;Ae<be;Ae+=2)ce(this,Ae,Ae+1);return this},A.prototype.swap32=function(){const be=this.length;if(be%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ae=0;Ae<be;Ae+=4)ce(this,Ae,Ae+3),ce(this,Ae+1,Ae+2);return this},A.prototype.swap64=function(){const be=this.length;if(be%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ae=0;Ae<be;Ae+=8)ce(this,Ae,Ae+7),ce(this,Ae+1,Ae+6),ce(this,Ae+2,Ae+5),ce(this,Ae+3,Ae+4);return this},A.prototype.toString=function(){const be=this.length;return be===0?"":arguments.length===0?F(this,0,be):re.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(be){if(!A.isBuffer(be))throw new TypeError("Argument must be a Buffer");return this===be?!0:A.compare(this,be)===0},A.prototype.inspect=function(){let be="";const Ae=n.INSPECT_MAX_BYTES;return be=this.toString("hex",0,Ae).replace(/(.{2})/g,"$1 ").trim(),this.length>Ae&&(be+=" ... "),"<Buffer "+be+">"},E&&(A.prototype[E]=A.prototype.inspect),A.prototype.compare=function(be,Ae,Le,Xe,Qe){if(Ke(be,Uint8Array)&&(be=A.from(be,be.offset,be.byteLength)),!A.isBuffer(be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof be);if(Ae===void 0&&(Ae=0),Le===void 0&&(Le=be?be.length:0),Xe===void 0&&(Xe=0),Qe===void 0&&(Qe=this.length),Ae<0||Le>be.length||Xe<0||Qe>this.length)throw new RangeError("out of range index");if(Xe>=Qe&&Ae>=Le)return 0;if(Xe>=Qe)return-1;if(Ae>=Le)return 1;if(Ae>>>=0,Le>>>=0,Xe>>>=0,Qe>>>=0,this===be)return 0;let et=Qe-Xe,St=Le-Ae;const mt=Math.min(et,St),dt=this.slice(Xe,Qe),jt=be.slice(Ae,Le);for(let Ct=0;Ct<mt;++Ct)if(dt[Ct]!==jt[Ct]){et=dt[Ct],St=jt[Ct];break}return et<St?-1:St<et?1:0};function ne(Re,be,Ae,Le,Xe){if(Re.length===0)return-1;if(typeof Ae=="string"?(Le=Ae,Ae=0):Ae>2147483647?Ae=2147483647:Ae<-2147483648&&(Ae=-2147483648),Ae=+Ae,Ge(Ae)&&(Ae=Xe?0:Re.length-1),Ae<0&&(Ae=Re.length+Ae),Ae>=Re.length){if(Xe)return-1;Ae=Re.length-1}else if(Ae<0)if(Xe)Ae=0;else return-1;if(typeof be=="string"&&(be=A.from(be,Le)),A.isBuffer(be))return be.length===0?-1:Y(Re,be,Ae,Le,Xe);if(typeof be=="number")return be=be&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Re,be,Ae):Uint8Array.prototype.lastIndexOf.call(Re,be,Ae):Y(Re,[be],Ae,Le,Xe);throw new TypeError("val must be string, number or Buffer")}function Y(Re,be,Ae,Le,Xe){let Qe=1,et=Re.length,St=be.length;if(Le!==void 0&&(Le=String(Le).toLowerCase(),Le==="ucs2"||Le==="ucs-2"||Le==="utf16le"||Le==="utf-16le")){if(Re.length<2||be.length<2)return-1;Qe=2,et/=2,St/=2,Ae/=2}function mt(jt,Ct){return Qe===1?jt[Ct]:jt.readUInt16BE(Ct*Qe)}let dt;if(Xe){let jt=-1;for(dt=Ae;dt<et;dt++)if(mt(Re,dt)===mt(be,jt===-1?0:dt-jt)){if(jt===-1&&(jt=dt),dt-jt+1===St)return jt*Qe}else jt!==-1&&(dt-=dt-jt),jt=-1}else for(Ae+St>et&&(Ae=et-St),dt=Ae;dt>=0;dt--){let jt=!0;for(let Ct=0;Ct<St;Ct++)if(mt(Re,dt+Ct)!==mt(be,Ct)){jt=!1;break}if(jt)return dt}return-1}A.prototype.includes=function(be,Ae,Le){return this.indexOf(be,Ae,Le)!==-1},A.prototype.indexOf=function(be,Ae,Le){return ne(this,be,Ae,Le,!0)},A.prototype.lastIndexOf=function(be,Ae,Le){return ne(this,be,Ae,Le,!1)};function fe(Re,be,Ae,Le){Ae=Number(Ae)||0;const Xe=Re.length-Ae;Le?(Le=Number(Le),Le>Xe&&(Le=Xe)):Le=Xe;const Qe=be.length;Le>Qe/2&&(Le=Qe/2);let et;for(et=0;et<Le;++et){const St=parseInt(be.substr(et*2,2),16);if(Ge(St))return et;Re[Ae+et]=St}return et}function ge(Re,be,Ae,Le){return We(Me(be,Re.length-Ae),Re,Ae,Le)}function $e(Re,be,Ae,Le){return We(Ne(be),Re,Ae,Le)}function _e(Re,be,Ae,Le){return We(He(be),Re,Ae,Le)}function ae(Re,be,Ae,Le){return We(Pe(be,Re.length-Ae),Re,Ae,Le)}A.prototype.write=function(be,Ae,Le,Xe){if(Ae===void 0)Xe="utf8",Le=this.length,Ae=0;else if(Le===void 0&&typeof Ae=="string")Xe=Ae,Le=this.length,Ae=0;else if(isFinite(Ae))Ae=Ae>>>0,isFinite(Le)?(Le=Le>>>0,Xe===void 0&&(Xe="utf8")):(Xe=Le,Le=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Qe=this.length-Ae;if((Le===void 0||Le>Qe)&&(Le=Qe),be.length>0&&(Le<0||Ae<0)||Ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");let et=!1;for(;;)switch(Xe){case"hex":return fe(this,be,Ae,Le);case"utf8":case"utf-8":return ge(this,be,Ae,Le);case"ascii":case"latin1":case"binary":return $e(this,be,Ae,Le);case"base64":return _e(this,be,Ae,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,be,Ae,Le);default:if(et)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),et=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function X(Re,be,Ae){return be===0&&Ae===Re.length?_.fromByteArray(Re):_.fromByteArray(Re.slice(be,Ae))}function F(Re,be,Ae){Ae=Math.min(Re.length,Ae);const Le=[];let Xe=be;for(;Xe<Ae;){const Qe=Re[Xe];let et=null,St=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Xe+St<=Ae){let mt,dt,jt,Ct;switch(St){case 1:Qe<128&&(et=Qe);break;case 2:mt=Re[Xe+1],(mt&192)===128&&(Ct=(Qe&31)<<6|mt&63,Ct>127&&(et=Ct));break;case 3:mt=Re[Xe+1],dt=Re[Xe+2],(mt&192)===128&&(dt&192)===128&&(Ct=(Qe&15)<<12|(mt&63)<<6|dt&63,Ct>2047&&(Ct<55296||Ct>57343)&&(et=Ct));break;case 4:mt=Re[Xe+1],dt=Re[Xe+2],jt=Re[Xe+3],(mt&192)===128&&(dt&192)===128&&(jt&192)===128&&(Ct=(Qe&15)<<18|(mt&63)<<12|(dt&63)<<6|jt&63,Ct>65535&&Ct<1114112&&(et=Ct))}}et===null?(et=65533,St=1):et>65535&&(et-=65536,Le.push(et>>>10&1023|55296),et=56320|et&1023),Le.push(et),Xe+=St}return J(Le)}const z=4096;function J(Re){const be=Re.length;if(be<=z)return String.fromCharCode.apply(String,Re);let Ae="",Le=0;for(;Le<be;)Ae+=String.fromCharCode.apply(String,Re.slice(Le,Le+=z));return Ae}function te(Re,be,Ae){let Le="";Ae=Math.min(Re.length,Ae);for(let Xe=be;Xe<Ae;++Xe)Le+=String.fromCharCode(Re[Xe]&127);return Le}function se(Re,be,Ae){let Le="";Ae=Math.min(Re.length,Ae);for(let Xe=be;Xe<Ae;++Xe)Le+=String.fromCharCode(Re[Xe]);return Le}function oe(Re,be,Ae){const Le=Re.length;(!be||be<0)&&(be=0),(!Ae||Ae<0||Ae>Le)&&(Ae=Le);let Xe="";for(let Qe=be;Qe<Ae;++Qe)Xe+=nt[Re[Qe]];return Xe}function ie(Re,be,Ae){const Le=Re.slice(be,Ae);let Xe="";for(let Qe=0;Qe<Le.length-1;Qe+=2)Xe+=String.fromCharCode(Le[Qe]+Le[Qe+1]*256);return Xe}A.prototype.slice=function(be,Ae){const Le=this.length;be=~~be,Ae=Ae===void 0?Le:~~Ae,be<0?(be+=Le,be<0&&(be=0)):be>Le&&(be=Le),Ae<0?(Ae+=Le,Ae<0&&(Ae=0)):Ae>Le&&(Ae=Le),Ae<be&&(Ae=be);const Xe=this.subarray(be,Ae);return Object.setPrototypeOf(Xe,A.prototype),Xe};function G(Re,be,Ae){if(Re%1!==0||Re<0)throw new RangeError("offset is not uint");if(Re+be>Ae)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(be,Ae,Le){be=be>>>0,Ae=Ae>>>0,Le||G(be,Ae,this.length);let Xe=this[be],Qe=1,et=0;for(;++et<Ae&&(Qe*=256);)Xe+=this[be+et]*Qe;return Xe},A.prototype.readUintBE=A.prototype.readUIntBE=function(be,Ae,Le){be=be>>>0,Ae=Ae>>>0,Le||G(be,Ae,this.length);let Xe=this[be+--Ae],Qe=1;for(;Ae>0&&(Qe*=256);)Xe+=this[be+--Ae]*Qe;return Xe},A.prototype.readUint8=A.prototype.readUInt8=function(be,Ae){return be=be>>>0,Ae||G(be,1,this.length),this[be]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(be,Ae){return be=be>>>0,Ae||G(be,2,this.length),this[be]|this[be+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(be,Ae){return be=be>>>0,Ae||G(be,2,this.length),this[be]<<8|this[be+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+this[be+3]*16777216},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),this[be]*16777216+(this[be+1]<<16|this[be+2]<<8|this[be+3])},A.prototype.readBigUInt64LE=ot(function(be){be=be>>>0,Be(be,"offset");const Ae=this[be],Le=this[be+7];(Ae===void 0||Le===void 0)&&me(be,this.length-8);const Xe=Ae+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24,Qe=this[++be]+this[++be]*2**8+this[++be]*2**16+Le*2**24;return BigInt(Xe)+(BigInt(Qe)<<BigInt(32))}),A.prototype.readBigUInt64BE=ot(function(be){be=be>>>0,Be(be,"offset");const Ae=this[be],Le=this[be+7];(Ae===void 0||Le===void 0)&&me(be,this.length-8);const Xe=Ae*2**24+this[++be]*2**16+this[++be]*2**8+this[++be],Qe=this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Le;return(BigInt(Xe)<<BigInt(32))+BigInt(Qe)}),A.prototype.readIntLE=function(be,Ae,Le){be=be>>>0,Ae=Ae>>>0,Le||G(be,Ae,this.length);let Xe=this[be],Qe=1,et=0;for(;++et<Ae&&(Qe*=256);)Xe+=this[be+et]*Qe;return Qe*=128,Xe>=Qe&&(Xe-=Math.pow(2,8*Ae)),Xe},A.prototype.readIntBE=function(be,Ae,Le){be=be>>>0,Ae=Ae>>>0,Le||G(be,Ae,this.length);let Xe=Ae,Qe=1,et=this[be+--Xe];for(;Xe>0&&(Qe*=256);)et+=this[be+--Xe]*Qe;return Qe*=128,et>=Qe&&(et-=Math.pow(2,8*Ae)),et},A.prototype.readInt8=function(be,Ae){return be=be>>>0,Ae||G(be,1,this.length),this[be]&128?(255-this[be]+1)*-1:this[be]},A.prototype.readInt16LE=function(be,Ae){be=be>>>0,Ae||G(be,2,this.length);const Le=this[be]|this[be+1]<<8;return Le&32768?Le|4294901760:Le},A.prototype.readInt16BE=function(be,Ae){be=be>>>0,Ae||G(be,2,this.length);const Le=this[be+1]|this[be]<<8;return Le&32768?Le|4294901760:Le},A.prototype.readInt32LE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},A.prototype.readInt32BE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},A.prototype.readBigInt64LE=ot(function(be){be=be>>>0,Be(be,"offset");const Ae=this[be],Le=this[be+7];(Ae===void 0||Le===void 0)&&me(be,this.length-8);const Xe=this[be+4]+this[be+5]*2**8+this[be+6]*2**16+(Le<<24);return(BigInt(Xe)<<BigInt(32))+BigInt(Ae+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24)}),A.prototype.readBigInt64BE=ot(function(be){be=be>>>0,Be(be,"offset");const Ae=this[be],Le=this[be+7];(Ae===void 0||Le===void 0)&&me(be,this.length-8);const Xe=(Ae<<24)+this[++be]*2**16+this[++be]*2**8+this[++be];return(BigInt(Xe)<<BigInt(32))+BigInt(this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Le)}),A.prototype.readFloatLE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),x.read(this,be,!0,23,4)},A.prototype.readFloatBE=function(be,Ae){return be=be>>>0,Ae||G(be,4,this.length),x.read(this,be,!1,23,4)},A.prototype.readDoubleLE=function(be,Ae){return be=be>>>0,Ae||G(be,8,this.length),x.read(this,be,!0,52,8)},A.prototype.readDoubleBE=function(be,Ae){return be=be>>>0,Ae||G(be,8,this.length),x.read(this,be,!1,52,8)};function j(Re,be,Ae,Le,Xe,Qe){if(!A.isBuffer(Re))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>Xe||be<Qe)throw new RangeError('"value" argument is out of bounds');if(Ae+Le>Re.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(be,Ae,Le,Xe){if(be=+be,Ae=Ae>>>0,Le=Le>>>0,!Xe){const St=Math.pow(2,8*Le)-1;j(this,be,Ae,Le,St,0)}let Qe=1,et=0;for(this[Ae]=be&255;++et<Le&&(Qe*=256);)this[Ae+et]=be/Qe&255;return Ae+Le},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(be,Ae,Le,Xe){if(be=+be,Ae=Ae>>>0,Le=Le>>>0,!Xe){const St=Math.pow(2,8*Le)-1;j(this,be,Ae,Le,St,0)}let Qe=Le-1,et=1;for(this[Ae+Qe]=be&255;--Qe>=0&&(et*=256);)this[Ae+Qe]=be/et&255;return Ae+Le},A.prototype.writeUint8=A.prototype.writeUInt8=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,1,255,0),this[Ae]=be&255,Ae+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,2,65535,0),this[Ae]=be&255,this[Ae+1]=be>>>8,Ae+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,2,65535,0),this[Ae]=be>>>8,this[Ae+1]=be&255,Ae+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,4,4294967295,0),this[Ae+3]=be>>>24,this[Ae+2]=be>>>16,this[Ae+1]=be>>>8,this[Ae]=be&255,Ae+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,4,4294967295,0),this[Ae]=be>>>24,this[Ae+1]=be>>>16,this[Ae+2]=be>>>8,this[Ae+3]=be&255,Ae+4};function ee(Re,be,Ae,Le,Xe){ve(be,Le,Xe,Re,Ae,7);let Qe=Number(be&BigInt(4294967295));Re[Ae++]=Qe,Qe=Qe>>8,Re[Ae++]=Qe,Qe=Qe>>8,Re[Ae++]=Qe,Qe=Qe>>8,Re[Ae++]=Qe;let et=Number(be>>BigInt(32)&BigInt(4294967295));return Re[Ae++]=et,et=et>>8,Re[Ae++]=et,et=et>>8,Re[Ae++]=et,et=et>>8,Re[Ae++]=et,Ae}function pe(Re,be,Ae,Le,Xe){ve(be,Le,Xe,Re,Ae,7);let Qe=Number(be&BigInt(4294967295));Re[Ae+7]=Qe,Qe=Qe>>8,Re[Ae+6]=Qe,Qe=Qe>>8,Re[Ae+5]=Qe,Qe=Qe>>8,Re[Ae+4]=Qe;let et=Number(be>>BigInt(32)&BigInt(4294967295));return Re[Ae+3]=et,et=et>>8,Re[Ae+2]=et,et=et>>8,Re[Ae+1]=et,et=et>>8,Re[Ae]=et,Ae+8}A.prototype.writeBigUInt64LE=ot(function(be,Ae=0){return ee(this,be,Ae,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=ot(function(be,Ae=0){return pe(this,be,Ae,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(be,Ae,Le,Xe){if(be=+be,Ae=Ae>>>0,!Xe){const mt=Math.pow(2,8*Le-1);j(this,be,Ae,Le,mt-1,-mt)}let Qe=0,et=1,St=0;for(this[Ae]=be&255;++Qe<Le&&(et*=256);)be<0&&St===0&&this[Ae+Qe-1]!==0&&(St=1),this[Ae+Qe]=(be/et>>0)-St&255;return Ae+Le},A.prototype.writeIntBE=function(be,Ae,Le,Xe){if(be=+be,Ae=Ae>>>0,!Xe){const mt=Math.pow(2,8*Le-1);j(this,be,Ae,Le,mt-1,-mt)}let Qe=Le-1,et=1,St=0;for(this[Ae+Qe]=be&255;--Qe>=0&&(et*=256);)be<0&&St===0&&this[Ae+Qe+1]!==0&&(St=1),this[Ae+Qe]=(be/et>>0)-St&255;return Ae+Le},A.prototype.writeInt8=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,1,127,-128),be<0&&(be=255+be+1),this[Ae]=be&255,Ae+1},A.prototype.writeInt16LE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,2,32767,-32768),this[Ae]=be&255,this[Ae+1]=be>>>8,Ae+2},A.prototype.writeInt16BE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,2,32767,-32768),this[Ae]=be>>>8,this[Ae+1]=be&255,Ae+2},A.prototype.writeInt32LE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,4,2147483647,-2147483648),this[Ae]=be&255,this[Ae+1]=be>>>8,this[Ae+2]=be>>>16,this[Ae+3]=be>>>24,Ae+4},A.prototype.writeInt32BE=function(be,Ae,Le){return be=+be,Ae=Ae>>>0,Le||j(this,be,Ae,4,2147483647,-2147483648),be<0&&(be=4294967295+be+1),this[Ae]=be>>>24,this[Ae+1]=be>>>16,this[Ae+2]=be>>>8,this[Ae+3]=be&255,Ae+4},A.prototype.writeBigInt64LE=ot(function(be,Ae=0){return ee(this,be,Ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=ot(function(be,Ae=0){return pe(this,be,Ae,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(Re,be,Ae,Le,Xe,Qe){if(Ae+Le>Re.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("Index out of range")}function Se(Re,be,Ae,Le,Xe){return be=+be,Ae=Ae>>>0,Xe||he(Re,be,Ae,4),x.write(Re,be,Ae,Le,23,4),Ae+4}A.prototype.writeFloatLE=function(be,Ae,Le){return Se(this,be,Ae,!0,Le)},A.prototype.writeFloatBE=function(be,Ae,Le){return Se(this,be,Ae,!1,Le)};function we(Re,be,Ae,Le,Xe){return be=+be,Ae=Ae>>>0,Xe||he(Re,be,Ae,8),x.write(Re,be,Ae,Le,52,8),Ae+8}A.prototype.writeDoubleLE=function(be,Ae,Le){return we(this,be,Ae,!0,Le)},A.prototype.writeDoubleBE=function(be,Ae,Le){return we(this,be,Ae,!1,Le)},A.prototype.copy=function(be,Ae,Le,Xe){if(!A.isBuffer(be))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!Xe&&Xe!==0&&(Xe=this.length),Ae>=be.length&&(Ae=be.length),Ae||(Ae=0),Xe>0&&Xe<Le&&(Xe=Le),Xe===Le||be.length===0||this.length===0)return 0;if(Ae<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),be.length-Ae<Xe-Le&&(Xe=be.length-Ae+Le);const Qe=Xe-Le;return this===be&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ae,Le,Xe):Uint8Array.prototype.set.call(be,this.subarray(Le,Xe),Ae),Qe},A.prototype.fill=function(be,Ae,Le,Xe){if(typeof be=="string"){if(typeof Ae=="string"?(Xe=Ae,Ae=0,Le=this.length):typeof Le=="string"&&(Xe=Le,Le=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!A.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(be.length===1){const et=be.charCodeAt(0);(Xe==="utf8"&&et<128||Xe==="latin1")&&(be=et)}}else typeof be=="number"?be=be&255:typeof be=="boolean"&&(be=Number(be));if(Ae<0||this.length<Ae||this.length<Le)throw new RangeError("Out of range index");if(Le<=Ae)return this;Ae=Ae>>>0,Le=Le===void 0?this.length:Le>>>0,be||(be=0);let Qe;if(typeof be=="number")for(Qe=Ae;Qe<Le;++Qe)this[Qe]=be;else{const et=A.isBuffer(be)?be:A.from(be,Xe),St=et.length;if(St===0)throw new TypeError('The value "'+be+'" is invalid for argument "value"');for(Qe=0;Qe<Le-Ae;++Qe)this[Qe+Ae]=et[Qe%St]}return this};const xe={};function Ee(Re,be,Ae){xe[Re]=class extends Ae{constructor(){super(),Object.defineProperty(this,"message",{value:be.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Re}]`,this.stack,delete this.name}get code(){return Re}set code(Xe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Xe,writable:!0})}toString(){return`${this.name} [${Re}]: ${this.message}`}}}Ee("ERR_BUFFER_OUT_OF_BOUNDS",function(Re){return Re?`${Re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ee("ERR_INVALID_ARG_TYPE",function(Re,be){return`The "${Re}" argument must be of type number. Received type ${typeof be}`},TypeError),Ee("ERR_OUT_OF_RANGE",function(Re,be,Ae){let Le=`The value of "${Re}" is out of range.`,Xe=Ae;return Number.isInteger(Ae)&&Math.abs(Ae)>2**32?Xe=ye(String(Ae)):typeof Ae=="bigint"&&(Xe=String(Ae),(Ae>BigInt(2)**BigInt(32)||Ae<-(BigInt(2)**BigInt(32)))&&(Xe=ye(Xe)),Xe+="n"),Le+=` It must be ${be}. Received ${Xe}`,Le},RangeError);function ye(Re){let be="",Ae=Re.length;const Le=Re[0]==="-"?1:0;for(;Ae>=Le+4;Ae-=3)be=`_${Re.slice(Ae-3,Ae)}${be}`;return`${Re.slice(0,Ae)}${be}`}function Ce(Re,be,Ae){Be(be,"offset"),(Re[be]===void 0||Re[be+Ae]===void 0)&&me(be,Re.length-(Ae+1))}function ve(Re,be,Ae,Le,Xe,Qe){if(Re>Ae||Re<be){const et=typeof be=="bigint"?"n":"";let St;throw Qe>3?be===0||be===BigInt(0)?St=`>= 0${et} and < 2${et} ** ${(Qe+1)*8}${et}`:St=`>= -(2${et} ** ${(Qe+1)*8-1}${et}) and < 2 ** ${(Qe+1)*8-1}${et}`:St=`>= ${be}${et} and <= ${Ae}${et}`,new xe.ERR_OUT_OF_RANGE("value",St,Re)}Ce(Le,Xe,Qe)}function Be(Re,be){if(typeof Re!="number")throw new xe.ERR_INVALID_ARG_TYPE(be,"number",Re)}function me(Re,be,Ae){throw Math.floor(Re)!==Re?(Be(Re,Ae),new xe.ERR_OUT_OF_RANGE(Ae||"offset","an integer",Re)):be<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(Ae||"offset",`>= ${Ae?1:0} and <= ${be}`,Re)}const Ie=/[^+/0-9A-Za-z-_]/g;function Ve(Re){if(Re=Re.split("=")[0],Re=Re.trim().replace(Ie,""),Re.length<2)return"";for(;Re.length%4!==0;)Re=Re+"=";return Re}function Me(Re,be){be=be||1/0;let Ae;const Le=Re.length;let Xe=null;const Qe=[];for(let et=0;et<Le;++et){if(Ae=Re.charCodeAt(et),Ae>55295&&Ae<57344){if(!Xe){if(Ae>56319){(be-=3)>-1&&Qe.push(239,191,189);continue}else if(et+1===Le){(be-=3)>-1&&Qe.push(239,191,189);continue}Xe=Ae;continue}if(Ae<56320){(be-=3)>-1&&Qe.push(239,191,189),Xe=Ae;continue}Ae=(Xe-55296<<10|Ae-56320)+65536}else Xe&&(be-=3)>-1&&Qe.push(239,191,189);if(Xe=null,Ae<128){if((be-=1)<0)break;Qe.push(Ae)}else if(Ae<2048){if((be-=2)<0)break;Qe.push(Ae>>6|192,Ae&63|128)}else if(Ae<65536){if((be-=3)<0)break;Qe.push(Ae>>12|224,Ae>>6&63|128,Ae&63|128)}else if(Ae<1114112){if((be-=4)<0)break;Qe.push(Ae>>18|240,Ae>>12&63|128,Ae>>6&63|128,Ae&63|128)}else throw new Error("Invalid code point")}return Qe}function Ne(Re){const be=[];for(let Ae=0;Ae<Re.length;++Ae)be.push(Re.charCodeAt(Ae)&255);return be}function Pe(Re,be){let Ae,Le,Xe;const Qe=[];for(let et=0;et<Re.length&&!((be-=2)<0);++et)Ae=Re.charCodeAt(et),Le=Ae>>8,Xe=Ae%256,Qe.push(Xe),Qe.push(Le);return Qe}function He(Re){return _.toByteArray(Ve(Re))}function We(Re,be,Ae,Le){let Xe;for(Xe=0;Xe<Le&&!(Xe+Ae>=be.length||Xe>=Re.length);++Xe)be[Xe+Ae]=Re[Xe];return Xe}function Ke(Re,be){return Re instanceof be||Re!=null&&Re.constructor!=null&&Re.constructor.name!=null&&Re.constructor.name===be.name}function Ge(Re){return Re!==Re}const nt=function(){const Re="0123456789abcdef",be=new Array(256);for(let Ae=0;Ae<16;++Ae){const Le=Ae*16;for(let Xe=0;Xe<16;++Xe)be[Le+Xe]=Re[Ae]+Re[Xe]}return be}();function ot(Re){return typeof BigInt>"u"?Ze:Re}function Ze(){throw new Error("BigInt not supported")}})(buffer$3);window.Buffer=buffer$3.Buffer;window.process=process$2;const global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function makeMap(n,_){const x=Object.create(null),E=n.split(",");for(let S=0;S<E.length;S++)x[E[S]]=!0;return _?S=>!!x[S.toLowerCase()]:S=>!!x[S]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE$1=/^on[^a-z]/,isOn$1=n=>onRE$1.test(n),isModelListener=n=>n.startsWith("onUpdate:"),extend$1=Object.assign,remove=(n,_)=>{const x=n.indexOf(_);x>-1&&n.splice(x,1)},hasOwnProperty$5=Object.prototype.hasOwnProperty,hasOwn$3=(n,_)=>hasOwnProperty$5.call(n,_),isArray$9=Array.isArray,isMap$4=n=>toTypeString$2(n)==="[object Map]",isSet$4=n=>toTypeString$2(n)==="[object Set]",isFunction$4=n=>typeof n=="function",isString$6=n=>typeof n=="string",isSymbol$3=n=>typeof n=="symbol",isObject$5=n=>n!==null&&typeof n=="object",isPromise=n=>isObject$5(n)&&isFunction$4(n.then)&&isFunction$4(n.catch),objectToString$2=Object.prototype.toString,toTypeString$2=n=>objectToString$2.call(n),toRawType=n=>toTypeString$2(n).slice(8,-1),isPlainObject$3=n=>toTypeString$2(n)==="[object Object]",isIntegerKey=n=>isString$6(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const _=Object.create(null);return x=>_[x]||(_[x]=n(x))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(_,x)=>x?x.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize$1(n)}`:""),hasChanged=(n,_)=>!Object.is(n,_),invokeArrayFns=(n,_)=>{for(let x=0;x<n.length;x++)n[x](_)},def$t=(n,_,x)=>{Object.defineProperty(n,_,{configurable:!0,enumerable:!1,value:x})},looseToNumber=n=>{const _=parseFloat(n);return isNaN(_)?n:_},toNumber=n=>{const _=isString$6(n)?Number(n):NaN;return isNaN(_)?n:_};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function normalizeStyle(n){if(isArray$9(n)){const _={};for(let x=0;x<n.length;x++){const E=n[x],S=isString$6(E)?parseStringStyle(E):normalizeStyle(E);if(S)for(const C in S)_[C]=S[C]}return _}else{if(isString$6(n))return n;if(isObject$5(n))return n}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const _={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(x=>{if(x){const E=x.split(propertyDelimiterRE);E.length>1&&(_[E[0].trim()]=E[1].trim())}}),_}function normalizeClass(n){let _="";if(isString$6(n))_=n;else if(isArray$9(n))for(let x=0;x<n.length;x++){const E=normalizeClass(n[x]);E&&(_+=E+" ")}else if(isObject$5(n))for(const x in n)n[x]&&(_+=x+" ");return _.trim()}function normalizeProps(n){if(!n)return null;let{class:_,style:x}=n;return _&&!isString$6(_)&&(n.class=normalizeClass(_)),x&&(n.style=normalizeStyle(x)),n}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}const toDisplayString$1=n=>isString$6(n)?n:n==null?"":isArray$9(n)||isObject$5(n)&&(n.toString===objectToString$2||!isFunction$4(n.toString))?JSON.stringify(n,replacer,2):String(n),replacer=(n,_)=>_&&_.__v_isRef?replacer(n,_.value):isMap$4(_)?{[`Map(${_.size})`]:[..._.entries()].reduce((x,[E,S])=>(x[`${E} =>`]=S,x),{})}:isSet$4(_)?{[`Set(${_.size})`]:[..._.values()]}:isObject$5(_)&&!isArray$9(_)&&!isPlainObject$3(_)?String(_):_;let activeEffectScope;class EffectScope{constructor(_=!1){this.detached=_,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!_&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(_){if(this._active){const x=activeEffectScope;try{return activeEffectScope=this,_()}finally{activeEffectScope=x}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(_){if(this._active){let x,E;for(x=0,E=this.effects.length;x<E;x++)this.effects[x].stop();for(x=0,E=this.cleanups.length;x<E;x++)this.cleanups[x]();if(this.scopes)for(x=0,E=this.scopes.length;x<E;x++)this.scopes[x].stop(!0);if(!this.detached&&this.parent&&!_){const S=this.parent.scopes.pop();S&&S!==this&&(this.parent.scopes[this.index]=S,S.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(n){return new EffectScope(n)}function recordEffectScope(n,_=activeEffectScope){_&&_.active&&_.effects.push(n)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(n){activeEffectScope&&activeEffectScope.cleanups.push(n)}const createDep=n=>{const _=new Set(n);return _.w=0,_.n=0,_},wasTracked=n=>(n.w&trackOpBit)>0,newTracked=n=>(n.n&trackOpBit)>0,initDepMarkers=({deps:n})=>{if(n.length)for(let _=0;_<n.length;_++)n[_].w|=trackOpBit},finalizeDepMarkers=n=>{const{deps:_}=n;if(_.length){let x=0;for(let E=0;E<_.length;E++){const S=_[E];wasTracked(S)&&!newTracked(S)?S.delete(n):_[x++]=S,S.w&=~trackOpBit,S.n&=~trackOpBit}_.length=x}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(_,x=null,E){this.fn=_,this.scheduler=x,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,E)}run(){if(!this.active)return this.fn();let _=activeEffect,x=shouldTrack;for(;_;){if(_===this)return;_=_.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=x,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(n){const{deps:_}=n;if(_.length){for(let x=0;x<_.length;x++)_[x].delete(n);_.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function track(n,_,x){if(shouldTrack&&activeEffect){let E=targetMap.get(n);E||targetMap.set(n,E=new Map);let S=E.get(x);S||E.set(x,S=createDep()),trackEffects(S)}}function trackEffects(n,_){let x=!1;effectTrackDepth<=maxMarkerBits?newTracked(n)||(n.n|=trackOpBit,x=!wasTracked(n)):x=!n.has(activeEffect),x&&(n.add(activeEffect),activeEffect.deps.push(n))}function trigger(n,_,x,E,S,C){const T=targetMap.get(n);if(!T)return;let A=[];if(_==="clear")A=[...T.values()];else if(x==="length"&&isArray$9(n)){const B=Number(E);T.forEach((I,M)=>{(M==="length"||M>=B)&&A.push(I)})}else switch(x!==void 0&&A.push(T.get(x)),_){case"add":isArray$9(n)?isIntegerKey(x)&&A.push(T.get("length")):(A.push(T.get(ITERATE_KEY)),isMap$4(n)&&A.push(T.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$9(n)||(A.push(T.get(ITERATE_KEY)),isMap$4(n)&&A.push(T.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$4(n)&&A.push(T.get(ITERATE_KEY));break}if(A.length===1)A[0]&&triggerEffects(A[0]);else{const B=[];for(const I of A)I&&B.push(...I);triggerEffects(createDep(B))}}function triggerEffects(n,_){const x=isArray$9(n)?n:[...n];for(const E of x)E.computed&&triggerEffect(E);for(const E of x)E.computed||triggerEffect(E)}function triggerEffect(n,_){(n!==activeEffect||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function getDepFromReactive(n,_){var x;return(x=targetMap.get(n))==null?void 0:x.get(_)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol$3)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(_=>{n[_]=function(...x){const E=toRaw(this);for(let C=0,T=this.length;C<T;C++)track(E,"get",C+"");const S=E[_](...x);return S===-1||S===!1?E[_](...x.map(toRaw)):S}}),["push","pop","shift","unshift","splice"].forEach(_=>{n[_]=function(...x){pauseTracking();const E=toRaw(this)[_].apply(this,x);return resetTracking(),E}}),n}function hasOwnProperty$4(n){const _=toRaw(this);return track(_,"has",n),_.hasOwnProperty(n)}function createGetter(n=!1,_=!1){return function(E,S,C){if(S==="__v_isReactive")return!n;if(S==="__v_isReadonly")return n;if(S==="__v_isShallow")return _;if(S==="__v_raw"&&C===(n?_?shallowReadonlyMap:readonlyMap:_?shallowReactiveMap:reactiveMap).get(E))return E;const T=isArray$9(E);if(!n){if(T&&hasOwn$3(arrayInstrumentations,S))return Reflect.get(arrayInstrumentations,S,C);if(S==="hasOwnProperty")return hasOwnProperty$4}const A=Reflect.get(E,S,C);return(isSymbol$3(S)?builtInSymbols.has(S):isNonTrackableKeys(S))||(n||track(E,"get",S),_)?A:isRef(A)?T&&isIntegerKey(S)?A:A.value:isObject$5(A)?n?readonly$3(A):reactive(A):A}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(n=!1){return function(x,E,S,C){let T=x[E];if(isReadonly(T)&&isRef(T)&&!isRef(S))return!1;if(!n&&(!isShallow(S)&&!isReadonly(S)&&(T=toRaw(T),S=toRaw(S)),!isArray$9(x)&&isRef(T)&&!isRef(S)))return T.value=S,!0;const A=isArray$9(x)&&isIntegerKey(E)?Number(E)<x.length:hasOwn$3(x,E),B=Reflect.set(x,E,S,C);return x===toRaw(C)&&(A?hasChanged(S,T)&&trigger(x,"set",E,S):trigger(x,"add",E,S)),B}}function deleteProperty(n,_){const x=hasOwn$3(n,_);n[_];const E=Reflect.deleteProperty(n,_);return E&&x&&trigger(n,"delete",_,void 0),E}function has$1$1(n,_){const x=Reflect.has(n,_);return(!isSymbol$3(_)||!builtInSymbols.has(_))&&track(n,"has",_),x}function ownKeys(n){return track(n,"iterate",isArray$9(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1$1,ownKeys},readonlyHandlers={get:readonlyGet,set(n,_){return!0},deleteProperty(n,_){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=n=>n,getProto$3=n=>Reflect.getPrototypeOf(n);function get$4(n,_,x=!1,E=!1){n=n.__v_raw;const S=toRaw(n),C=toRaw(_);x||(_!==C&&track(S,"get",_),track(S,"get",C));const{has:T}=getProto$3(S),A=E?toShallow:x?toReadonly:toReactive;if(T.call(S,_))return A(n.get(_));if(T.call(S,C))return A(n.get(C));n!==S&&n.get(_)}function has$4(n,_=!1){const x=this.__v_raw,E=toRaw(x),S=toRaw(n);return _||(n!==S&&track(E,"has",n),track(E,"has",S)),n===S?x.has(n):x.has(n)||x.has(S)}function size(n,_=!1){return n=n.__v_raw,!_&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$1(n){n=toRaw(n);const _=toRaw(this);return getProto$3(_).has.call(_,n)||(_.add(n),trigger(_,"add",n,n)),this}function set$2(n,_){_=toRaw(_);const x=toRaw(this),{has:E,get:S}=getProto$3(x);let C=E.call(x,n);C||(n=toRaw(n),C=E.call(x,n));const T=S.call(x,n);return x.set(n,_),C?hasChanged(_,T)&&trigger(x,"set",n,_):trigger(x,"add",n,_),this}function deleteEntry(n){const _=toRaw(this),{has:x,get:E}=getProto$3(_);let S=x.call(_,n);S||(n=toRaw(n),S=x.call(_,n)),E&&E.call(_,n);const C=_.delete(n);return S&&trigger(_,"delete",n,void 0),C}function clear$2(){const n=toRaw(this),_=n.size!==0,x=n.clear();return _&&trigger(n,"clear",void 0,void 0),x}function createForEach(n,_){return function(E,S){const C=this,T=C.__v_raw,A=toRaw(T),B=_?toShallow:n?toReadonly:toReactive;return!n&&track(A,"iterate",ITERATE_KEY),T.forEach((I,M)=>E.call(S,B(I),B(M),C))}}function createIterableMethod(n,_,x){return function(...E){const S=this.__v_raw,C=toRaw(S),T=isMap$4(C),A=n==="entries"||n===Symbol.iterator&&T,B=n==="keys"&&T,I=S[n](...E),M=x?toShallow:_?toReadonly:toReactive;return!_&&track(C,"iterate",B?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:O,done:D}=I.next();return D?{value:O,done:D}:{value:A?[M(O[0]),M(O[1])]:M(O),done:D}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(..._){return n==="delete"?!1:this}}function createInstrumentations(){const n={get(C){return get$4(this,C)},get size(){return size(this)},has:has$4,add:add$1,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},_={get(C){return get$4(this,C,!1,!0)},get size(){return size(this)},has:has$4,add:add$1,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},x={get(C){return get$4(this,C,!0)},get size(){return size(this,!0)},has(C){return has$4.call(this,C,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},E={get(C){return get$4(this,C,!0,!0)},get size(){return size(this,!0)},has(C){return has$4.call(this,C,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(C=>{n[C]=createIterableMethod(C,!1,!1),x[C]=createIterableMethod(C,!0,!1),_[C]=createIterableMethod(C,!1,!0),E[C]=createIterableMethod(C,!0,!0)}),[n,x,_,E]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,_){const x=_?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(E,S,C)=>S==="__v_isReactive"?!n:S==="__v_isReadonly"?n:S==="__v_raw"?E:Reflect.get(hasOwn$3(x,S)&&S in E?x:E,S,C)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$3(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,_,x,E,S){if(!isObject$5(n)||n.__v_raw&&!(_&&n.__v_isReactive))return n;const C=S.get(n);if(C)return C;const T=getTargetType(n);if(T===0)return n;const A=new Proxy(n,T===2?E:x);return S.set(n,A),A}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const _=n&&n.__v_raw;return _?toRaw(_):n}function markRaw(n){return def$t(n,"__v_skip",!0),n}const toReactive=n=>isObject$5(n)?reactive(n):n,toReadonly=n=>isObject$5(n)?readonly$3(n):n;function trackRefValue(n){shouldTrack&&activeEffect&&(n=toRaw(n),trackEffects(n.dep||(n.dep=createDep())))}function triggerRefValue(n,_){n=toRaw(n);const x=n.dep;x&&triggerEffects(x)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function ref$1(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,_){return isRef(n)?n:new RefImpl(n,_)}class RefImpl{constructor(_,x){this.__v_isShallow=x,this.dep=void 0,this.__v_isRef=!0,this._rawValue=x?_:toRaw(_),this._value=x?_:toReactive(_)}get value(){return trackRefValue(this),this._value}set value(_){const x=this.__v_isShallow||isShallow(_)||isReadonly(_);_=x?_:toRaw(_),hasChanged(_,this._rawValue)&&(this._rawValue=_,this._value=x?_:toReactive(_),triggerRefValue(this))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,_,x)=>unref(Reflect.get(n,_,x)),set:(n,_,x,E)=>{const S=n[_];return isRef(S)&&!isRef(x)?(S.value=x,!0):Reflect.set(n,_,x,E)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}function toRefs(n){const _=isArray$9(n)?new Array(n.length):{};for(const x in n)_[x]=propertyToRef(n,x);return _}class ObjectRefImpl{constructor(_,x,E){this._object=_,this._key=x,this._defaultValue=E,this.__v_isRef=!0}get value(){const _=this._object[this._key];return _===void 0?this._defaultValue:_}set value(_){this._object[this._key]=_}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(_){this._getter=_,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(n,_,x){return isRef(n)?n:isFunction$4(n)?new GetterRefImpl(n):isObject$5(n)&&arguments.length>1?propertyToRef(n,_,x):ref$1(n)}function propertyToRef(n,_,x){const E=n[_];return isRef(E)?E:new ObjectRefImpl(n,_,x)}class ComputedRefImpl{constructor(_,x,E,S){this._setter=x,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(_,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!S,this.__v_isReadonly=E}get value(){const _=toRaw(this);return trackRefValue(_),(_._dirty||!_._cacheable)&&(_._dirty=!1,_._value=_.effect.run()),_._value}set value(_){this._setter(_)}}function computed$1(n,_,x=!1){let E,S;const C=isFunction$4(n);return C?(E=n,S=NOOP):(E=n.get,S=n.set),new ComputedRefImpl(E,S,C||!S,x)}function warn$1(n,..._){}function callWithErrorHandling(n,_,x,E){let S;try{S=E?n(...E):n()}catch(C){handleError(C,_,x)}return S}function callWithAsyncErrorHandling(n,_,x,E){if(isFunction$4(n)){const C=callWithErrorHandling(n,_,x,E);return C&&isPromise(C)&&C.catch(T=>{handleError(T,_,x)}),C}const S=[];for(let C=0;C<n.length;C++)S.push(callWithAsyncErrorHandling(n[C],_,x,E));return S}function handleError(n,_,x,E=!0){const S=_?_.vnode:null;if(_){let C=_.parent;const T=_.proxy,A=x;for(;C;){const I=C.ec;if(I){for(let M=0;M<I.length;M++)if(I[M](n,T,A)===!1)return}C=C.parent}const B=_.appContext.config.errorHandler;if(B){callWithErrorHandling(B,null,10,[n,T,A]);return}}logError(n,x,S,E)}function logError(n,_,x,E=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$2(n){const _=currentFlushPromise||resolvedPromise;return n?_.then(this?n.bind(this):n):_}function findInsertionIndex(n){let _=flushIndex+1,x=queue$1.length;for(;_<x;){const E=_+x>>>1;getId(queue$1[E])<n?_=E+1:x=E}return _}function queueJob(n){(!queue$1.length||!queue$1.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&(n.id==null?queue$1.push(n):queue$1.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const _=queue$1.indexOf(n);_>flushIndex&&queue$1.splice(_,1)}function queuePostFlushCb(n){isArray$9(n)?pendingPostFlushCbs.push(...n):(!activePostFlushCbs||!activePostFlushCbs.includes(n,n.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(n),queueFlush()}function flushPreFlushCbs(n,_=isFlushing?flushIndex+1:0){for(;_<queue$1.length;_++){const x=queue$1[_];x&&x.pre&&(queue$1.splice(_,1),_--,x())}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const _=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(..._);return}for(activePostFlushCbs=_,activePostFlushCbs.sort((x,E)=>getId(x)-getId(E)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?1/0:n.id,comparator=(n,_)=>{const x=getId(n)-getId(_);if(x===0){if(n.pre&&!_.pre)return-1;if(_.pre&&!n.pre)return 1}return x};function flushJobs(n){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);const _=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const x=queue$1[flushIndex];x&&x.active!==!1&&callWithErrorHandling(x,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(n,_,...x){if(n.isUnmounted)return;const E=n.vnode.props||EMPTY_OBJ;let S=x;const C=_.startsWith("update:"),T=C&&_.slice(7);if(T&&T in E){const M=`${T==="modelValue"?"model":T}Modifiers`,{number:O,trim:D}=E[M]||EMPTY_OBJ;D&&(S=x.map(L=>isString$6(L)?L.trim():L)),O&&(S=x.map(looseToNumber))}let A,B=E[A=toHandlerKey(_)]||E[A=toHandlerKey(camelize(_))];!B&&C&&(B=E[A=toHandlerKey(hyphenate(_))]),B&&callWithAsyncErrorHandling(B,n,6,S);const I=E[A+"Once"];if(I){if(!n.emitted)n.emitted={};else if(n.emitted[A])return;n.emitted[A]=!0,callWithAsyncErrorHandling(I,n,6,S)}}function normalizeEmitsOptions(n,_,x=!1){const E=_.emitsCache,S=E.get(n);if(S!==void 0)return S;const C=n.emits;let T={},A=!1;if(!isFunction$4(n)){const B=I=>{const M=normalizeEmitsOptions(I,_,!0);M&&(A=!0,extend$1(T,M))};!x&&_.mixins.length&&_.mixins.forEach(B),n.extends&&B(n.extends),n.mixins&&n.mixins.forEach(B)}return!C&&!A?(isObject$5(n)&&E.set(n,null),null):(isArray$9(C)?C.forEach(B=>T[B]=null):extend$1(T,C),isObject$5(n)&&E.set(n,T),T)}function isEmitListener(n,_){return!n||!isOn$1(_)?!1:(_=_.slice(2).replace(/Once$/,""),hasOwn$3(n,_[0].toLowerCase()+_.slice(1))||hasOwn$3(n,hyphenate(_))||hasOwn$3(n,_))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const _=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,_}function withCtx(n,_=currentRenderingInstance,x){if(!_||n._n)return n;const E=(...S)=>{E._d&&setBlockTracking(-1);const C=setCurrentRenderingInstance(_);let T;try{T=n(...S)}finally{setCurrentRenderingInstance(C),E._d&&setBlockTracking(1)}return T};return E._n=!0,E._c=!0,E._d=!0,E}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:_,vnode:x,proxy:E,withProxy:S,props:C,propsOptions:[T],slots:A,attrs:B,emit:I,render:M,renderCache:O,data:D,setupState:L,ctx:V,inheritAttrs:U}=n;let q,H;const W=setCurrentRenderingInstance(n);try{if(x.shapeFlag&4){const re=S||E;q=normalizeVNode(M.call(re,re,O,C,L,D,V)),H=B}else{const re=_;q=normalizeVNode(re.length>1?re(C,{attrs:B,slots:A,emit:I}):re(C,null)),H=_.props?B:getFunctionalFallthrough(B)}}catch(re){blockStack.length=0,handleError(re,n,1),q=createVNode(Comment)}let Q=q;if(H&&U!==!1){const re=Object.keys(H),{shapeFlag:ce}=Q;re.length&&ce&7&&(T&&re.some(isModelListener)&&(H=filterModelListeners(H,T)),Q=cloneVNode(Q,H))}return x.dirs&&(Q=cloneVNode(Q),Q.dirs=Q.dirs?Q.dirs.concat(x.dirs):x.dirs),x.transition&&(Q.transition=x.transition),q=Q,setCurrentRenderingInstance(W),q}const getFunctionalFallthrough=n=>{let _;for(const x in n)(x==="class"||x==="style"||isOn$1(x))&&((_||(_={}))[x]=n[x]);return _},filterModelListeners=(n,_)=>{const x={};for(const E in n)(!isModelListener(E)||!(E.slice(9)in _))&&(x[E]=n[E]);return x};function shouldUpdateComponent(n,_,x){const{props:E,children:S,component:C}=n,{props:T,children:A,patchFlag:B}=_,I=C.emitsOptions;if(_.dirs||_.transition)return!0;if(x&&B>=0){if(B&1024)return!0;if(B&16)return E?hasPropsChanged(E,T,I):!!T;if(B&8){const M=_.dynamicProps;for(let O=0;O<M.length;O++){const D=M[O];if(T[D]!==E[D]&&!isEmitListener(I,D))return!0}}}else return(S||A)&&(!A||!A.$stable)?!0:E===T?!1:E?T?hasPropsChanged(E,T,I):!0:!!T;return!1}function hasPropsChanged(n,_,x){const E=Object.keys(_);if(E.length!==Object.keys(n).length)return!0;for(let S=0;S<E.length;S++){const C=E[S];if(_[C]!==n[C]&&!isEmitListener(x,C))return!0}return!1}function updateHOCHostEl({vnode:n,parent:_},x){for(;_&&_.subTree===n;)(n=_.vnode).el=x,_=_.parent}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,_){_&&_.pendingBranch?isArray$9(n)?_.effects.push(...n):_.effects.push(n):queuePostFlushCb(n)}function watchEffect(n,_){return doWatch(n,null,_)}const INITIAL_WATCHER_VALUE={};function watch(n,_,x){return doWatch(n,_,x)}function doWatch(n,_,{immediate:x,deep:E,flush:S,onTrack:C,onTrigger:T}=EMPTY_OBJ){var A;const B=getCurrentScope()===((A=currentInstance)==null?void 0:A.scope)?currentInstance:null;let I,M=!1,O=!1;if(isRef(n)?(I=()=>n.value,M=isShallow(n)):isReactive(n)?(I=()=>n,E=!0):isArray$9(n)?(O=!0,M=n.some(re=>isReactive(re)||isShallow(re)),I=()=>n.map(re=>{if(isRef(re))return re.value;if(isReactive(re))return traverse$2(re);if(isFunction$4(re))return callWithErrorHandling(re,B,2)})):isFunction$4(n)?_?I=()=>callWithErrorHandling(n,B,2):I=()=>{if(!(B&&B.isUnmounted))return D&&D(),callWithAsyncErrorHandling(n,B,3,[L])}:I=NOOP,_&&E){const re=I;I=()=>traverse$2(re())}let D,L=re=>{D=W.onStop=()=>{callWithErrorHandling(re,B,4)}},V;if(isInSSRComponentSetup)if(L=NOOP,_?x&&callWithAsyncErrorHandling(_,B,3,[I(),O?[]:void 0,L]):I(),S==="sync"){const re=useSSRContext();V=re.__watcherHandles||(re.__watcherHandles=[])}else return NOOP;let U=O?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const q=()=>{if(W.active)if(_){const re=W.run();(E||M||(O?re.some((ce,ne)=>hasChanged(ce,U[ne])):hasChanged(re,U)))&&(D&&D(),callWithAsyncErrorHandling(_,B,3,[re,U===INITIAL_WATCHER_VALUE?void 0:O&&U[0]===INITIAL_WATCHER_VALUE?[]:U,L]),U=re)}else W.run()};q.allowRecurse=!!_;let H;S==="sync"?H=q:S==="post"?H=()=>queuePostRenderEffect(q,B&&B.suspense):(q.pre=!0,B&&(q.id=B.uid),H=()=>queueJob(q));const W=new ReactiveEffect(I,H);_?x?q():U=W.run():S==="post"?queuePostRenderEffect(W.run.bind(W),B&&B.suspense):W.run();const Q=()=>{W.stop(),B&&B.scope&&remove(B.scope.effects,W)};return V&&V.push(Q),Q}function instanceWatch(n,_,x){const E=this.proxy,S=isString$6(n)?n.includes(".")?createPathGetter(E,n):()=>E[n]:n.bind(E,E);let C;isFunction$4(_)?C=_:(C=_.handler,x=_);const T=currentInstance;setCurrentInstance(this);const A=doWatch(S,C.bind(E),x);return T?setCurrentInstance(T):unsetCurrentInstance(),A}function createPathGetter(n,_){const x=_.split(".");return()=>{let E=n;for(let S=0;S<x.length&&E;S++)E=E[x[S]];return E}}function traverse$2(n,_){if(!isObject$5(n)||n.__v_skip||(_=_||new Set,_.has(n)))return n;if(_.add(n),isRef(n))traverse$2(n.value,_);else if(isArray$9(n))for(let x=0;x<n.length;x++)traverse$2(n[x],_);else if(isSet$4(n)||isMap$4(n))n.forEach(x=>{traverse$2(x,_)});else if(isPlainObject$3(n))for(const x in n)traverse$2(n[x],_);return n}function withDirectives(n,_){const x=currentRenderingInstance;if(x===null)return n;const E=getExposeProxy(x)||x.proxy,S=n.dirs||(n.dirs=[]);for(let C=0;C<_.length;C++){let[T,A,B,I=EMPTY_OBJ]=_[C];T&&(isFunction$4(T)&&(T={mounted:T,updated:T}),T.deep&&traverse$2(A),S.push({dir:T,instance:E,value:A,oldValue:void 0,arg:B,modifiers:I}))}return n}function invokeDirectiveHook(n,_,x,E){const S=n.dirs,C=_&&_.dirs;for(let T=0;T<S.length;T++){const A=S[T];C&&(A.oldValue=C[T].value);let B=A.dir[E];B&&(pauseTracking(),callWithAsyncErrorHandling(B,x,8,[n.el,A,n,_]),resetTracking())}}function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(n,{slots:_}){const x=getCurrentInstance$1(),E=useTransitionState();let S;return()=>{const C=_.default&&getTransitionRawChildren(_.default(),!0);if(!C||!C.length)return;let T=C[0];if(C.length>1){for(const U of C)if(U.type!==Comment){T=U;break}}const A=toRaw(n),{mode:B}=A;if(E.isLeaving)return emptyPlaceholder(T);const I=getKeepAliveChild(T);if(!I)return emptyPlaceholder(T);const M=resolveTransitionHooks(I,A,E,x);setTransitionHooks(I,M);const O=x.subTree,D=O&&getKeepAliveChild(O);let L=!1;const{getTransitionKey:V}=I.type;if(V){const U=V();S===void 0?S=U:U!==S&&(S=U,L=!0)}if(D&&D.type!==Comment&&(!isSameVNodeType(I,D)||L)){const U=resolveTransitionHooks(D,A,E,x);if(setTransitionHooks(D,U),B==="out-in")return E.isLeaving=!0,U.afterLeave=()=>{E.isLeaving=!1,x.update.active!==!1&&x.update()},emptyPlaceholder(T);B==="in-out"&&I.type!==Comment&&(U.delayLeave=(q,H,W)=>{const Q=getLeavingNodesForType(E,D);Q[String(D.key)]=D,q._leaveCb=()=>{H(),q._leaveCb=void 0,delete M.delayedLeave},M.delayedLeave=W})}return T}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,_){const{leavingVNodes:x}=n;let E=x.get(_.type);return E||(E=Object.create(null),x.set(_.type,E)),E}function resolveTransitionHooks(n,_,x,E){const{appear:S,mode:C,persisted:T=!1,onBeforeEnter:A,onEnter:B,onAfterEnter:I,onEnterCancelled:M,onBeforeLeave:O,onLeave:D,onAfterLeave:L,onLeaveCancelled:V,onBeforeAppear:U,onAppear:q,onAfterAppear:H,onAppearCancelled:W}=_,Q=String(n.key),re=getLeavingNodesForType(x,n),ce=(fe,ge)=>{fe&&callWithAsyncErrorHandling(fe,E,9,ge)},ne=(fe,ge)=>{const $e=ge[1];ce(fe,ge),isArray$9(fe)?fe.every(_e=>_e.length<=1)&&$e():fe.length<=1&&$e()},Y={mode:C,persisted:T,beforeEnter(fe){let ge=A;if(!x.isMounted)if(S)ge=U||A;else return;fe._leaveCb&&fe._leaveCb(!0);const $e=re[Q];$e&&isSameVNodeType(n,$e)&&$e.el._leaveCb&&$e.el._leaveCb(),ce(ge,[fe])},enter(fe){let ge=B,$e=I,_e=M;if(!x.isMounted)if(S)ge=q||B,$e=H||I,_e=W||M;else return;let ae=!1;const X=fe._enterCb=F=>{ae||(ae=!0,F?ce(_e,[fe]):ce($e,[fe]),Y.delayedLeave&&Y.delayedLeave(),fe._enterCb=void 0)};ge?ne(ge,[fe,X]):X()},leave(fe,ge){const $e=String(n.key);if(fe._enterCb&&fe._enterCb(!0),x.isUnmounting)return ge();ce(O,[fe]);let _e=!1;const ae=fe._leaveCb=X=>{_e||(_e=!0,ge(),X?ce(V,[fe]):ce(L,[fe]),fe._leaveCb=void 0,re[$e]===n&&delete re[$e])};re[$e]=n,D?ne(D,[fe,ae]):ae()},clone(fe){return resolveTransitionHooks(fe,_,x,E)}};return Y}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getKeepAliveChild(n){return isKeepAlive(n)?n.children?n.children[0]:void 0:n}function setTransitionHooks(n,_){n.shapeFlag&6&&n.component?setTransitionHooks(n.component.subTree,_):n.shapeFlag&128?(n.ssContent.transition=_.clone(n.ssContent),n.ssFallback.transition=_.clone(n.ssFallback)):n.transition=_}function getTransitionRawChildren(n,_=!1,x){let E=[],S=0;for(let C=0;C<n.length;C++){let T=n[C];const A=x==null?T.key:String(x)+String(T.key!=null?T.key:C);T.type===Fragment?(T.patchFlag&128&&S++,E=E.concat(getTransitionRawChildren(T.children,_,A))):(_||T.type!==Comment)&&E.push(A!=null?cloneVNode(T,{key:A}):T)}if(S>1)for(let C=0;C<E.length;C++)E[C].patchFlag=-2;return E}function defineComponent$1(n,_){return isFunction$4(n)?(()=>extend$1({name:n.name},_,{setup:n}))():n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,_){registerKeepAliveHook(n,"a",_)}function onDeactivated(n,_){registerKeepAliveHook(n,"da",_)}function registerKeepAliveHook(n,_,x=currentInstance){const E=n.__wdc||(n.__wdc=()=>{let S=x;for(;S;){if(S.isDeactivated)return;S=S.parent}return n()});if(injectHook(_,E,x),x){let S=x.parent;for(;S&&S.parent;)isKeepAlive(S.parent.vnode)&&injectToKeepAliveRoot(E,_,x,S),S=S.parent}}function injectToKeepAliveRoot(n,_,x,E){const S=injectHook(_,n,E,!0);onUnmounted(()=>{remove(E[_],S)},x)}function injectHook(n,_,x=currentInstance,E=!1){if(x){const S=x[n]||(x[n]=[]),C=_.__weh||(_.__weh=(...T)=>{if(x.isUnmounted)return;pauseTracking(),setCurrentInstance(x);const A=callWithAsyncErrorHandling(_,x,n,T);return unsetCurrentInstance(),resetTracking(),A});return E?S.unshift(C):S.push(C),C}}const createHook=n=>(_,x=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...E)=>_(...E),x),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,_=currentInstance){injectHook("ec",n,_)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(n,_){return resolveAsset(COMPONENTS,n,!0,_)||n}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(n){return isString$6(n)?resolveAsset(COMPONENTS,n,!1)||n:n||NULL_DYNAMIC_COMPONENT}function resolveDirective(n){return resolveAsset(DIRECTIVES,n)}function resolveAsset(n,_,x=!0,E=!1){const S=currentRenderingInstance||currentInstance;if(S){const C=S.type;if(n===COMPONENTS){const A=getComponentName(C,!1);if(A&&(A===_||A===camelize(_)||A===capitalize$1(camelize(_))))return C}const T=resolve$3(S[n]||C[n],_)||resolve$3(S.appContext[n],_);return!T&&E?C:T}}function resolve$3(n,_){return n&&(n[_]||n[camelize(_)]||n[capitalize$1(camelize(_))])}function renderList(n,_,x,E){let S;const C=x&&x[E];if(isArray$9(n)||isString$6(n)){S=new Array(n.length);for(let T=0,A=n.length;T<A;T++)S[T]=_(n[T],T,void 0,C&&C[T])}else if(typeof n=="number"){S=new Array(n);for(let T=0;T<n;T++)S[T]=_(T+1,T,void 0,C&&C[T])}else if(isObject$5(n))if(n[Symbol.iterator])S=Array.from(n,(T,A)=>_(T,A,void 0,C&&C[A]));else{const T=Object.keys(n);S=new Array(T.length);for(let A=0,B=T.length;A<B;A++){const I=T[A];S[A]=_(n[I],I,A,C&&C[A])}}else S=[];return x&&(x[E]=S),S}function renderSlot(n,_,x={},E,S){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return _!=="default"&&(x.name=_),createVNode("slot",x,E&&E());let C=n[_];C&&C._c&&(C._d=!1),openBlock();const T=C&&ensureValidVNode(C(x)),A=createBlock(Fragment,{key:x.key||T&&T.key||`_${_}`},T||(E?E():[]),T&&n._===1?64:-2);return!S&&A.scopeId&&(A.slotScopeIds=[A.scopeId+"-s"]),C&&C._c&&(C._d=!0),A}function ensureValidVNode(n){return n.some(_=>isVNode$1(_)?!(_.type===Comment||_.type===Fragment&&!ensureValidVNode(_.children)):!0)?n:null}const getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>queueJob(n.update)),$nextTick:n=>n.n||(n.n=nextTick$2.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,_)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn$3(n,_),PublicInstanceProxyHandlers={get({_:n},_){const{ctx:x,setupState:E,data:S,props:C,accessCache:T,type:A,appContext:B}=n;let I;if(_[0]!=="$"){const L=T[_];if(L!==void 0)switch(L){case 1:return E[_];case 2:return S[_];case 4:return x[_];case 3:return C[_]}else{if(hasSetupBinding(E,_))return T[_]=1,E[_];if(S!==EMPTY_OBJ&&hasOwn$3(S,_))return T[_]=2,S[_];if((I=n.propsOptions[0])&&hasOwn$3(I,_))return T[_]=3,C[_];if(x!==EMPTY_OBJ&&hasOwn$3(x,_))return T[_]=4,x[_];shouldCacheAccess&&(T[_]=0)}}const M=publicPropertiesMap[_];let O,D;if(M)return _==="$attrs"&&track(n,"get",_),M(n);if((O=A.__cssModules)&&(O=O[_]))return O;if(x!==EMPTY_OBJ&&hasOwn$3(x,_))return T[_]=4,x[_];if(D=B.config.globalProperties,hasOwn$3(D,_))return D[_]},set({_:n},_,x){const{data:E,setupState:S,ctx:C}=n;return hasSetupBinding(S,_)?(S[_]=x,!0):E!==EMPTY_OBJ&&hasOwn$3(E,_)?(E[_]=x,!0):hasOwn$3(n.props,_)||_[0]==="$"&&_.slice(1)in n?!1:(C[_]=x,!0)},has({_:{data:n,setupState:_,accessCache:x,ctx:E,appContext:S,propsOptions:C}},T){let A;return!!x[T]||n!==EMPTY_OBJ&&hasOwn$3(n,T)||hasSetupBinding(_,T)||(A=C[0])&&hasOwn$3(A,T)||hasOwn$3(E,T)||hasOwn$3(publicPropertiesMap,T)||hasOwn$3(S.config.globalProperties,T)},defineProperty(n,_,x){return x.get!=null?n._.accessCache[_]=0:hasOwn$3(x,"value")&&this.set(n,_,x.value,null),Reflect.defineProperty(n,_,x)}};function normalizePropsOrEmits(n){return isArray$9(n)?n.reduce((_,x)=>(_[x]=null,_),{}):n}let shouldCacheAccess=!0;function applyOptions(n){const _=resolveMergedOptions(n),x=n.proxy,E=n.ctx;shouldCacheAccess=!1,_.beforeCreate&&callHook$1(_.beforeCreate,n,"bc");const{data:S,computed:C,methods:T,watch:A,provide:B,inject:I,created:M,beforeMount:O,mounted:D,beforeUpdate:L,updated:V,activated:U,deactivated:q,beforeDestroy:H,beforeUnmount:W,destroyed:Q,unmounted:re,render:ce,renderTracked:ne,renderTriggered:Y,errorCaptured:fe,serverPrefetch:ge,expose:$e,inheritAttrs:_e,components:ae,directives:X,filters:F}=_;if(I&&resolveInjections(I,E,null),T)for(const te in T){const se=T[te];isFunction$4(se)&&(E[te]=se.bind(x))}if(S){const te=S.call(x,x);isObject$5(te)&&(n.data=reactive(te))}if(shouldCacheAccess=!0,C)for(const te in C){const se=C[te],oe=isFunction$4(se)?se.bind(x,x):isFunction$4(se.get)?se.get.bind(x,x):NOOP,ie=!isFunction$4(se)&&isFunction$4(se.set)?se.set.bind(x):NOOP,G=computed({get:oe,set:ie});Object.defineProperty(E,te,{enumerable:!0,configurable:!0,get:()=>G.value,set:j=>G.value=j})}if(A)for(const te in A)createWatcher(A[te],E,x,te);if(B){const te=isFunction$4(B)?B.call(x):B;Reflect.ownKeys(te).forEach(se=>{provide(se,te[se])})}M&&callHook$1(M,n,"c");function J(te,se){isArray$9(se)?se.forEach(oe=>te(oe.bind(x))):se&&te(se.bind(x))}if(J(onBeforeMount,O),J(onMounted,D),J(onBeforeUpdate,L),J(onUpdated,V),J(onActivated,U),J(onDeactivated,q),J(onErrorCaptured,fe),J(onRenderTracked,ne),J(onRenderTriggered,Y),J(onBeforeUnmount,W),J(onUnmounted,re),J(onServerPrefetch,ge),isArray$9($e))if($e.length){const te=n.exposed||(n.exposed={});$e.forEach(se=>{Object.defineProperty(te,se,{get:()=>x[se],set:oe=>x[se]=oe})})}else n.exposed||(n.exposed={});ce&&n.render===NOOP&&(n.render=ce),_e!=null&&(n.inheritAttrs=_e),ae&&(n.components=ae),X&&(n.directives=X)}function resolveInjections(n,_,x=NOOP){isArray$9(n)&&(n=normalizeInject(n));for(const E in n){const S=n[E];let C;isObject$5(S)?"default"in S?C=inject$1(S.from||E,S.default,!0):C=inject$1(S.from||E):C=inject$1(S),isRef(C)?Object.defineProperty(_,E,{enumerable:!0,configurable:!0,get:()=>C.value,set:T=>C.value=T}):_[E]=C}}function callHook$1(n,_,x){callWithAsyncErrorHandling(isArray$9(n)?n.map(E=>E.bind(_.proxy)):n.bind(_.proxy),_,x)}function createWatcher(n,_,x,E){const S=E.includes(".")?createPathGetter(x,E):()=>x[E];if(isString$6(n)){const C=_[n];isFunction$4(C)&&watch(S,C)}else if(isFunction$4(n))watch(S,n.bind(x));else if(isObject$5(n))if(isArray$9(n))n.forEach(C=>createWatcher(C,_,x,E));else{const C=isFunction$4(n.handler)?n.handler.bind(x):_[n.handler];isFunction$4(C)&&watch(S,C,n)}}function resolveMergedOptions(n){const _=n.type,{mixins:x,extends:E}=_,{mixins:S,optionsCache:C,config:{optionMergeStrategies:T}}=n.appContext,A=C.get(_);let B;return A?B=A:!S.length&&!x&&!E?B=_:(B={},S.length&&S.forEach(I=>mergeOptions$1(B,I,T,!0)),mergeOptions$1(B,_,T)),isObject$5(_)&&C.set(_,B),B}function mergeOptions$1(n,_,x,E=!1){const{mixins:S,extends:C}=_;C&&mergeOptions$1(n,C,x,!0),S&&S.forEach(T=>mergeOptions$1(n,T,x,!0));for(const T in _)if(!(E&&T==="expose")){const A=internalOptionMergeStrats[T]||x&&x[T];n[T]=A?A(n[T],_[T]):_[T]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,_){return _?n?function(){return extend$1(isFunction$4(n)?n.call(this,this):n,isFunction$4(_)?_.call(this,this):_)}:_:n}function mergeInject(n,_){return mergeObjectOptions(normalizeInject(n),normalizeInject(_))}function normalizeInject(n){if(isArray$9(n)){const _={};for(let x=0;x<n.length;x++)_[n[x]]=n[x];return _}return n}function mergeAsArray(n,_){return n?[...new Set([].concat(n,_))]:_}function mergeObjectOptions(n,_){return n?extend$1(Object.create(null),n,_):_}function mergeEmitsOrPropsOptions(n,_){return n?isArray$9(n)&&isArray$9(_)?[...new Set([...n,..._])]:extend$1(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(_??{})):_}function mergeWatchOptions(n,_){if(!n)return _;if(!_)return n;const x=extend$1(Object.create(null),n);for(const E in _)x[E]=mergeAsArray(n[E],_[E]);return x}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,_){return function(E,S=null){isFunction$4(E)||(E=extend$1({},E)),S!=null&&!isObject$5(S)&&(S=null);const C=createAppContext(),T=new Set;let A=!1;const B=C.app={_uid:uid$1++,_component:E,_props:S,_container:null,_context:C,_instance:null,version:version$m,get config(){return C.config},set config(I){},use(I,...M){return T.has(I)||(I&&isFunction$4(I.install)?(T.add(I),I.install(B,...M)):isFunction$4(I)&&(T.add(I),I(B,...M))),B},mixin(I){return C.mixins.includes(I)||C.mixins.push(I),B},component(I,M){return M?(C.components[I]=M,B):C.components[I]},directive(I,M){return M?(C.directives[I]=M,B):C.directives[I]},mount(I,M,O){if(!A){const D=createVNode(E,S);return D.appContext=C,M&&_?_(D,I):n(D,I,O),A=!0,B._container=I,I.__vue_app__=B,getExposeProxy(D.component)||D.component.proxy}},unmount(){A&&(n(null,B._container),delete B._container.__vue_app__)},provide(I,M){return C.provides[I]=M,B},runWithContext(I){currentApp=B;try{return I()}finally{currentApp=null}}};return B}}let currentApp=null;function provide(n,_){if(currentInstance){let x=currentInstance.provides;const E=currentInstance.parent&&currentInstance.parent.provides;E===x&&(x=currentInstance.provides=Object.create(E)),x[n]=_}}function inject$1(n,_,x=!1){const E=currentInstance||currentRenderingInstance;if(E||currentApp){const S=E?E.parent==null?E.vnode.appContext&&E.vnode.appContext.provides:E.parent.provides:currentApp._context.provides;if(S&&n in S)return S[n];if(arguments.length>1)return x&&isFunction$4(_)?_.call(E&&E.proxy):_}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(n,_,x,E=!1){const S={},C={};def$t(C,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,_,S,C);for(const T in n.propsOptions[0])T in S||(S[T]=void 0);x?n.props=E?S:shallowReactive(S):n.type.props?n.props=S:n.props=C,n.attrs=C}function updateProps(n,_,x,E){const{props:S,attrs:C,vnode:{patchFlag:T}}=n,A=toRaw(S),[B]=n.propsOptions;let I=!1;if((E||T>0)&&!(T&16)){if(T&8){const M=n.vnode.dynamicProps;for(let O=0;O<M.length;O++){let D=M[O];if(isEmitListener(n.emitsOptions,D))continue;const L=_[D];if(B)if(hasOwn$3(C,D))L!==C[D]&&(C[D]=L,I=!0);else{const V=camelize(D);S[V]=resolvePropValue(B,A,V,L,n,!1)}else L!==C[D]&&(C[D]=L,I=!0)}}}else{setFullProps(n,_,S,C)&&(I=!0);let M;for(const O in A)(!_||!hasOwn$3(_,O)&&((M=hyphenate(O))===O||!hasOwn$3(_,M)))&&(B?x&&(x[O]!==void 0||x[M]!==void 0)&&(S[O]=resolvePropValue(B,A,O,void 0,n,!0)):delete S[O]);if(C!==A)for(const O in C)(!_||!hasOwn$3(_,O))&&(delete C[O],I=!0)}I&&trigger(n,"set","$attrs")}function setFullProps(n,_,x,E){const[S,C]=n.propsOptions;let T=!1,A;if(_)for(let B in _){if(isReservedProp(B))continue;const I=_[B];let M;S&&hasOwn$3(S,M=camelize(B))?!C||!C.includes(M)?x[M]=I:(A||(A={}))[M]=I:isEmitListener(n.emitsOptions,B)||(!(B in E)||I!==E[B])&&(E[B]=I,T=!0)}if(C){const B=toRaw(x),I=A||EMPTY_OBJ;for(let M=0;M<C.length;M++){const O=C[M];x[O]=resolvePropValue(S,B,O,I[O],n,!hasOwn$3(I,O))}}return T}function resolvePropValue(n,_,x,E,S,C){const T=n[x];if(T!=null){const A=hasOwn$3(T,"default");if(A&&E===void 0){const B=T.default;if(T.type!==Function&&!T.skipFactory&&isFunction$4(B)){const{propsDefaults:I}=S;x in I?E=I[x]:(setCurrentInstance(S),E=I[x]=B.call(null,_),unsetCurrentInstance())}else E=B}T[0]&&(C&&!A?E=!1:T[1]&&(E===""||E===hyphenate(x))&&(E=!0))}return E}function normalizePropsOptions(n,_,x=!1){const E=_.propsCache,S=E.get(n);if(S)return S;const C=n.props,T={},A=[];let B=!1;if(!isFunction$4(n)){const M=O=>{B=!0;const[D,L]=normalizePropsOptions(O,_,!0);extend$1(T,D),L&&A.push(...L)};!x&&_.mixins.length&&_.mixins.forEach(M),n.extends&&M(n.extends),n.mixins&&n.mixins.forEach(M)}if(!C&&!B)return isObject$5(n)&&E.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$9(C))for(let M=0;M<C.length;M++){const O=camelize(C[M]);validatePropName(O)&&(T[O]=EMPTY_OBJ)}else if(C)for(const M in C){const O=camelize(M);if(validatePropName(O)){const D=C[M],L=T[O]=isArray$9(D)||isFunction$4(D)?{type:D}:extend$1({},D);if(L){const V=getTypeIndex(Boolean,L.type),U=getTypeIndex(String,L.type);L[0]=V>-1,L[1]=U<0||V<U,(V>-1||hasOwn$3(L,"default"))&&A.push(O)}}}const I=[T,A];return isObject$5(n)&&E.set(n,I),I}function validatePropName(n){return n[0]!=="$"}function getType(n){const _=n&&n.toString().match(/^\s*(function|class) (\w+)/);return _?_[2]:n===null?"null":""}function isSameType(n,_){return getType(n)===getType(_)}function getTypeIndex(n,_){return isArray$9(_)?_.findIndex(x=>isSameType(x,n)):isFunction$4(_)&&isSameType(_,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$9(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,_,x)=>{if(_._n)return _;const E=withCtx((...S)=>normalizeSlotValue(_(...S)),x);return E._c=!1,E},normalizeObjectSlots=(n,_,x)=>{const E=n._ctx;for(const S in n){if(isInternalKey(S))continue;const C=n[S];if(isFunction$4(C))_[S]=normalizeSlot$1(S,C,E);else if(C!=null){const T=normalizeSlotValue(C);_[S]=()=>T}}},normalizeVNodeSlots=(n,_)=>{const x=normalizeSlotValue(_);n.slots.default=()=>x},initSlots=(n,_)=>{if(n.vnode.shapeFlag&32){const x=_._;x?(n.slots=toRaw(_),def$t(_,"_",x)):normalizeObjectSlots(_,n.slots={})}else n.slots={},_&&normalizeVNodeSlots(n,_);def$t(n.slots,InternalObjectKey,1)},updateSlots=(n,_,x)=>{const{vnode:E,slots:S}=n;let C=!0,T=EMPTY_OBJ;if(E.shapeFlag&32){const A=_._;A?x&&A===1?C=!1:(extend$1(S,_),!x&&A===1&&delete S._):(C=!_.$stable,normalizeObjectSlots(_,S)),T=_}else _&&(normalizeVNodeSlots(n,_),T={default:1});if(C)for(const A in S)!isInternalKey(A)&&!(A in T)&&delete S[A]};function setRef(n,_,x,E,S=!1){if(isArray$9(n)){n.forEach((D,L)=>setRef(D,_&&(isArray$9(_)?_[L]:_),x,E,S));return}if(isAsyncWrapper(E)&&!S)return;const C=E.shapeFlag&4?getExposeProxy(E.component)||E.component.proxy:E.el,T=S?null:C,{i:A,r:B}=n,I=_&&_.r,M=A.refs===EMPTY_OBJ?A.refs={}:A.refs,O=A.setupState;if(I!=null&&I!==B&&(isString$6(I)?(M[I]=null,hasOwn$3(O,I)&&(O[I]=null)):isRef(I)&&(I.value=null)),isFunction$4(B))callWithErrorHandling(B,A,12,[T,M]);else{const D=isString$6(B),L=isRef(B);if(D||L){const V=()=>{if(n.f){const U=D?hasOwn$3(O,B)?O[B]:M[B]:B.value;S?isArray$9(U)&&remove(U,C):isArray$9(U)?U.includes(C)||U.push(C):D?(M[B]=[C],hasOwn$3(O,B)&&(O[B]=M[B])):(B.value=[C],n.k&&(M[n.k]=B.value))}else D?(M[B]=T,hasOwn$3(O,B)&&(O[B]=T)):L&&(B.value=T,n.k&&(M[n.k]=T))};T?(V.id=-1,queuePostRenderEffect(V,x)):V()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,_){const x=getGlobalThis$1();x.__VUE__=!0;const{insert:E,remove:S,patchProp:C,createElement:T,createText:A,createComment:B,setText:I,setElementText:M,parentNode:O,nextSibling:D,setScopeId:L=NOOP,insertStaticContent:V}=n,U=(ve,Be,me,Ie=null,Ve=null,Me=null,Ne=!1,Pe=null,He=!!Be.dynamicChildren)=>{if(ve===Be)return;ve&&!isSameVNodeType(ve,Be)&&(Ie=we(ve),j(ve,Ve,Me,!0),ve=null),Be.patchFlag===-2&&(He=!1,Be.dynamicChildren=null);const{type:We,ref:Ke,shapeFlag:Ge}=Be;switch(We){case Text:q(ve,Be,me,Ie);break;case Comment:H(ve,Be,me,Ie);break;case Static:ve==null&&W(Be,me,Ie,Ne);break;case Fragment:ae(ve,Be,me,Ie,Ve,Me,Ne,Pe,He);break;default:Ge&1?ce(ve,Be,me,Ie,Ve,Me,Ne,Pe,He):Ge&6?X(ve,Be,me,Ie,Ve,Me,Ne,Pe,He):(Ge&64||Ge&128)&&We.process(ve,Be,me,Ie,Ve,Me,Ne,Pe,He,Ee)}Ke!=null&&Ve&&setRef(Ke,ve&&ve.ref,Me,Be||ve,!Be)},q=(ve,Be,me,Ie)=>{if(ve==null)E(Be.el=A(Be.children),me,Ie);else{const Ve=Be.el=ve.el;Be.children!==ve.children&&I(Ve,Be.children)}},H=(ve,Be,me,Ie)=>{ve==null?E(Be.el=B(Be.children||""),me,Ie):Be.el=ve.el},W=(ve,Be,me,Ie)=>{[ve.el,ve.anchor]=V(ve.children,Be,me,Ie,ve.el,ve.anchor)},Q=({el:ve,anchor:Be},me,Ie)=>{let Ve;for(;ve&&ve!==Be;)Ve=D(ve),E(ve,me,Ie),ve=Ve;E(Be,me,Ie)},re=({el:ve,anchor:Be})=>{let me;for(;ve&&ve!==Be;)me=D(ve),S(ve),ve=me;S(Be)},ce=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He)=>{Ne=Ne||Be.type==="svg",ve==null?ne(Be,me,Ie,Ve,Me,Ne,Pe,He):ge(ve,Be,Ve,Me,Ne,Pe,He)},ne=(ve,Be,me,Ie,Ve,Me,Ne,Pe)=>{let He,We;const{type:Ke,props:Ge,shapeFlag:nt,transition:ot,dirs:Ze}=ve;if(He=ve.el=T(ve.type,Me,Ge&&Ge.is,Ge),nt&8?M(He,ve.children):nt&16&&fe(ve.children,He,null,Ie,Ve,Me&&Ke!=="foreignObject",Ne,Pe),Ze&&invokeDirectiveHook(ve,null,Ie,"created"),Y(He,ve,ve.scopeId,Ne,Ie),Ge){for(const be in Ge)be!=="value"&&!isReservedProp(be)&&C(He,be,null,Ge[be],Me,ve.children,Ie,Ve,Se);"value"in Ge&&C(He,"value",null,Ge.value),(We=Ge.onVnodeBeforeMount)&&invokeVNodeHook(We,Ie,ve)}Ze&&invokeDirectiveHook(ve,null,Ie,"beforeMount");const Re=(!Ve||Ve&&!Ve.pendingBranch)&&ot&&!ot.persisted;Re&&ot.beforeEnter(He),E(He,Be,me),((We=Ge&&Ge.onVnodeMounted)||Re||Ze)&&queuePostRenderEffect(()=>{We&&invokeVNodeHook(We,Ie,ve),Re&&ot.enter(He),Ze&&invokeDirectiveHook(ve,null,Ie,"mounted")},Ve)},Y=(ve,Be,me,Ie,Ve)=>{if(me&&L(ve,me),Ie)for(let Me=0;Me<Ie.length;Me++)L(ve,Ie[Me]);if(Ve){let Me=Ve.subTree;if(Be===Me){const Ne=Ve.vnode;Y(ve,Ne,Ne.scopeId,Ne.slotScopeIds,Ve.parent)}}},fe=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He=0)=>{for(let We=He;We<ve.length;We++){const Ke=ve[We]=Pe?cloneIfMounted(ve[We]):normalizeVNode(ve[We]);U(null,Ke,Be,me,Ie,Ve,Me,Ne,Pe)}},ge=(ve,Be,me,Ie,Ve,Me,Ne)=>{const Pe=Be.el=ve.el;let{patchFlag:He,dynamicChildren:We,dirs:Ke}=Be;He|=ve.patchFlag&16;const Ge=ve.props||EMPTY_OBJ,nt=Be.props||EMPTY_OBJ;let ot;me&&toggleRecurse(me,!1),(ot=nt.onVnodeBeforeUpdate)&&invokeVNodeHook(ot,me,Be,ve),Ke&&invokeDirectiveHook(Be,ve,me,"beforeUpdate"),me&&toggleRecurse(me,!0);const Ze=Ve&&Be.type!=="foreignObject";if(We?$e(ve.dynamicChildren,We,Pe,me,Ie,Ze,Me):Ne||se(ve,Be,Pe,null,me,Ie,Ze,Me,!1),He>0){if(He&16)_e(Pe,Be,Ge,nt,me,Ie,Ve);else if(He&2&&Ge.class!==nt.class&&C(Pe,"class",null,nt.class,Ve),He&4&&C(Pe,"style",Ge.style,nt.style,Ve),He&8){const Re=Be.dynamicProps;for(let be=0;be<Re.length;be++){const Ae=Re[be],Le=Ge[Ae],Xe=nt[Ae];(Xe!==Le||Ae==="value")&&C(Pe,Ae,Le,Xe,Ve,ve.children,me,Ie,Se)}}He&1&&ve.children!==Be.children&&M(Pe,Be.children)}else!Ne&&We==null&&_e(Pe,Be,Ge,nt,me,Ie,Ve);((ot=nt.onVnodeUpdated)||Ke)&&queuePostRenderEffect(()=>{ot&&invokeVNodeHook(ot,me,Be,ve),Ke&&invokeDirectiveHook(Be,ve,me,"updated")},Ie)},$e=(ve,Be,me,Ie,Ve,Me,Ne)=>{for(let Pe=0;Pe<Be.length;Pe++){const He=ve[Pe],We=Be[Pe],Ke=He.el&&(He.type===Fragment||!isSameVNodeType(He,We)||He.shapeFlag&70)?O(He.el):me;U(He,We,Ke,null,Ie,Ve,Me,Ne,!0)}},_e=(ve,Be,me,Ie,Ve,Me,Ne)=>{if(me!==Ie){if(me!==EMPTY_OBJ)for(const Pe in me)!isReservedProp(Pe)&&!(Pe in Ie)&&C(ve,Pe,me[Pe],null,Ne,Be.children,Ve,Me,Se);for(const Pe in Ie){if(isReservedProp(Pe))continue;const He=Ie[Pe],We=me[Pe];He!==We&&Pe!=="value"&&C(ve,Pe,We,He,Ne,Be.children,Ve,Me,Se)}"value"in Ie&&C(ve,"value",me.value,Ie.value)}},ae=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He)=>{const We=Be.el=ve?ve.el:A(""),Ke=Be.anchor=ve?ve.anchor:A("");let{patchFlag:Ge,dynamicChildren:nt,slotScopeIds:ot}=Be;ot&&(Pe=Pe?Pe.concat(ot):ot),ve==null?(E(We,me,Ie),E(Ke,me,Ie),fe(Be.children,me,Ke,Ve,Me,Ne,Pe,He)):Ge>0&&Ge&64&&nt&&ve.dynamicChildren?($e(ve.dynamicChildren,nt,me,Ve,Me,Ne,Pe),(Be.key!=null||Ve&&Be===Ve.subTree)&&traverseStaticChildren(ve,Be,!0)):se(ve,Be,me,Ke,Ve,Me,Ne,Pe,He)},X=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He)=>{Be.slotScopeIds=Pe,ve==null?Be.shapeFlag&512?Ve.ctx.activate(Be,me,Ie,Ne,He):F(Be,me,Ie,Ve,Me,Ne,He):z(ve,Be,He)},F=(ve,Be,me,Ie,Ve,Me,Ne)=>{const Pe=ve.component=createComponentInstance(ve,Ie,Ve);if(isKeepAlive(ve)&&(Pe.ctx.renderer=Ee),setupComponent(Pe),Pe.asyncDep){if(Ve&&Ve.registerDep(Pe,J),!ve.el){const He=Pe.subTree=createVNode(Comment);H(null,He,Be,me)}return}J(Pe,ve,Be,me,Ve,Me,Ne)},z=(ve,Be,me)=>{const Ie=Be.component=ve.component;if(shouldUpdateComponent(ve,Be,me))if(Ie.asyncDep&&!Ie.asyncResolved){te(Ie,Be,me);return}else Ie.next=Be,invalidateJob(Ie.update),Ie.update();else Be.el=ve.el,Ie.vnode=Be},J=(ve,Be,me,Ie,Ve,Me,Ne)=>{const Pe=()=>{if(ve.isMounted){let{next:Ke,bu:Ge,u:nt,parent:ot,vnode:Ze}=ve,Re=Ke,be;toggleRecurse(ve,!1),Ke?(Ke.el=Ze.el,te(ve,Ke,Ne)):Ke=Ze,Ge&&invokeArrayFns(Ge),(be=Ke.props&&Ke.props.onVnodeBeforeUpdate)&&invokeVNodeHook(be,ot,Ke,Ze),toggleRecurse(ve,!0);const Ae=renderComponentRoot(ve),Le=ve.subTree;ve.subTree=Ae,U(Le,Ae,O(Le.el),we(Le),ve,Ve,Me),Ke.el=Ae.el,Re===null&&updateHOCHostEl(ve,Ae.el),nt&&queuePostRenderEffect(nt,Ve),(be=Ke.props&&Ke.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(be,ot,Ke,Ze),Ve)}else{let Ke;const{el:Ge,props:nt}=Be,{bm:ot,m:Ze,parent:Re}=ve,be=isAsyncWrapper(Be);if(toggleRecurse(ve,!1),ot&&invokeArrayFns(ot),!be&&(Ke=nt&&nt.onVnodeBeforeMount)&&invokeVNodeHook(Ke,Re,Be),toggleRecurse(ve,!0),Ge&&Ce){const Ae=()=>{ve.subTree=renderComponentRoot(ve),Ce(Ge,ve.subTree,ve,Ve,null)};be?Be.type.__asyncLoader().then(()=>!ve.isUnmounted&&Ae()):Ae()}else{const Ae=ve.subTree=renderComponentRoot(ve);U(null,Ae,me,Ie,ve,Ve,Me),Be.el=Ae.el}if(Ze&&queuePostRenderEffect(Ze,Ve),!be&&(Ke=nt&&nt.onVnodeMounted)){const Ae=Be;queuePostRenderEffect(()=>invokeVNodeHook(Ke,Re,Ae),Ve)}(Be.shapeFlag&256||Re&&isAsyncWrapper(Re.vnode)&&Re.vnode.shapeFlag&256)&&ve.a&&queuePostRenderEffect(ve.a,Ve),ve.isMounted=!0,Be=me=Ie=null}},He=ve.effect=new ReactiveEffect(Pe,()=>queueJob(We),ve.scope),We=ve.update=()=>He.run();We.id=ve.uid,toggleRecurse(ve,!0),We()},te=(ve,Be,me)=>{Be.component=ve;const Ie=ve.vnode.props;ve.vnode=Be,ve.next=null,updateProps(ve,Be.props,Ie,me),updateSlots(ve,Be.children,me),pauseTracking(),flushPreFlushCbs(),resetTracking()},se=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He=!1)=>{const We=ve&&ve.children,Ke=ve?ve.shapeFlag:0,Ge=Be.children,{patchFlag:nt,shapeFlag:ot}=Be;if(nt>0){if(nt&128){ie(We,Ge,me,Ie,Ve,Me,Ne,Pe,He);return}else if(nt&256){oe(We,Ge,me,Ie,Ve,Me,Ne,Pe,He);return}}ot&8?(Ke&16&&Se(We,Ve,Me),Ge!==We&&M(me,Ge)):Ke&16?ot&16?ie(We,Ge,me,Ie,Ve,Me,Ne,Pe,He):Se(We,Ve,Me,!0):(Ke&8&&M(me,""),ot&16&&fe(Ge,me,Ie,Ve,Me,Ne,Pe,He))},oe=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He)=>{ve=ve||EMPTY_ARR,Be=Be||EMPTY_ARR;const We=ve.length,Ke=Be.length,Ge=Math.min(We,Ke);let nt;for(nt=0;nt<Ge;nt++){const ot=Be[nt]=He?cloneIfMounted(Be[nt]):normalizeVNode(Be[nt]);U(ve[nt],ot,me,null,Ve,Me,Ne,Pe,He)}We>Ke?Se(ve,Ve,Me,!0,!1,Ge):fe(Be,me,Ie,Ve,Me,Ne,Pe,He,Ge)},ie=(ve,Be,me,Ie,Ve,Me,Ne,Pe,He)=>{let We=0;const Ke=Be.length;let Ge=ve.length-1,nt=Ke-1;for(;We<=Ge&&We<=nt;){const ot=ve[We],Ze=Be[We]=He?cloneIfMounted(Be[We]):normalizeVNode(Be[We]);if(isSameVNodeType(ot,Ze))U(ot,Ze,me,null,Ve,Me,Ne,Pe,He);else break;We++}for(;We<=Ge&&We<=nt;){const ot=ve[Ge],Ze=Be[nt]=He?cloneIfMounted(Be[nt]):normalizeVNode(Be[nt]);if(isSameVNodeType(ot,Ze))U(ot,Ze,me,null,Ve,Me,Ne,Pe,He);else break;Ge--,nt--}if(We>Ge){if(We<=nt){const ot=nt+1,Ze=ot<Ke?Be[ot].el:Ie;for(;We<=nt;)U(null,Be[We]=He?cloneIfMounted(Be[We]):normalizeVNode(Be[We]),me,Ze,Ve,Me,Ne,Pe,He),We++}}else if(We>nt)for(;We<=Ge;)j(ve[We],Ve,Me,!0),We++;else{const ot=We,Ze=We,Re=new Map;for(We=Ze;We<=nt;We++){const mt=Be[We]=He?cloneIfMounted(Be[We]):normalizeVNode(Be[We]);mt.key!=null&&Re.set(mt.key,We)}let be,Ae=0;const Le=nt-Ze+1;let Xe=!1,Qe=0;const et=new Array(Le);for(We=0;We<Le;We++)et[We]=0;for(We=ot;We<=Ge;We++){const mt=ve[We];if(Ae>=Le){j(mt,Ve,Me,!0);continue}let dt;if(mt.key!=null)dt=Re.get(mt.key);else for(be=Ze;be<=nt;be++)if(et[be-Ze]===0&&isSameVNodeType(mt,Be[be])){dt=be;break}dt===void 0?j(mt,Ve,Me,!0):(et[dt-Ze]=We+1,dt>=Qe?Qe=dt:Xe=!0,U(mt,Be[dt],me,null,Ve,Me,Ne,Pe,He),Ae++)}const St=Xe?getSequence(et):EMPTY_ARR;for(be=St.length-1,We=Le-1;We>=0;We--){const mt=Ze+We,dt=Be[mt],jt=mt+1<Ke?Be[mt+1].el:Ie;et[We]===0?U(null,dt,me,jt,Ve,Me,Ne,Pe,He):Xe&&(be<0||We!==St[be]?G(dt,me,jt,2):be--)}}},G=(ve,Be,me,Ie,Ve=null)=>{const{el:Me,type:Ne,transition:Pe,children:He,shapeFlag:We}=ve;if(We&6){G(ve.component.subTree,Be,me,Ie);return}if(We&128){ve.suspense.move(Be,me,Ie);return}if(We&64){Ne.move(ve,Be,me,Ee);return}if(Ne===Fragment){E(Me,Be,me);for(let Ge=0;Ge<He.length;Ge++)G(He[Ge],Be,me,Ie);E(ve.anchor,Be,me);return}if(Ne===Static){Q(ve,Be,me);return}if(Ie!==2&&We&1&&Pe)if(Ie===0)Pe.beforeEnter(Me),E(Me,Be,me),queuePostRenderEffect(()=>Pe.enter(Me),Ve);else{const{leave:Ge,delayLeave:nt,afterLeave:ot}=Pe,Ze=()=>E(Me,Be,me),Re=()=>{Ge(Me,()=>{Ze(),ot&&ot()})};nt?nt(Me,Ze,Re):Re()}else E(Me,Be,me)},j=(ve,Be,me,Ie=!1,Ve=!1)=>{const{type:Me,props:Ne,ref:Pe,children:He,dynamicChildren:We,shapeFlag:Ke,patchFlag:Ge,dirs:nt}=ve;if(Pe!=null&&setRef(Pe,null,me,ve,!0),Ke&256){Be.ctx.deactivate(ve);return}const ot=Ke&1&&nt,Ze=!isAsyncWrapper(ve);let Re;if(Ze&&(Re=Ne&&Ne.onVnodeBeforeUnmount)&&invokeVNodeHook(Re,Be,ve),Ke&6)he(ve.component,me,Ie);else{if(Ke&128){ve.suspense.unmount(me,Ie);return}ot&&invokeDirectiveHook(ve,null,Be,"beforeUnmount"),Ke&64?ve.type.remove(ve,Be,me,Ve,Ee,Ie):We&&(Me!==Fragment||Ge>0&&Ge&64)?Se(We,Be,me,!1,!0):(Me===Fragment&&Ge&384||!Ve&&Ke&16)&&Se(He,Be,me),Ie&&ee(ve)}(Ze&&(Re=Ne&&Ne.onVnodeUnmounted)||ot)&&queuePostRenderEffect(()=>{Re&&invokeVNodeHook(Re,Be,ve),ot&&invokeDirectiveHook(ve,null,Be,"unmounted")},me)},ee=ve=>{const{type:Be,el:me,anchor:Ie,transition:Ve}=ve;if(Be===Fragment){pe(me,Ie);return}if(Be===Static){re(ve);return}const Me=()=>{S(me),Ve&&!Ve.persisted&&Ve.afterLeave&&Ve.afterLeave()};if(ve.shapeFlag&1&&Ve&&!Ve.persisted){const{leave:Ne,delayLeave:Pe}=Ve,He=()=>Ne(me,Me);Pe?Pe(ve.el,Me,He):He()}else Me()},pe=(ve,Be)=>{let me;for(;ve!==Be;)me=D(ve),S(ve),ve=me;S(Be)},he=(ve,Be,me)=>{const{bum:Ie,scope:Ve,update:Me,subTree:Ne,um:Pe}=ve;Ie&&invokeArrayFns(Ie),Ve.stop(),Me&&(Me.active=!1,j(Ne,ve,Be,me)),Pe&&queuePostRenderEffect(Pe,Be),queuePostRenderEffect(()=>{ve.isUnmounted=!0},Be),Be&&Be.pendingBranch&&!Be.isUnmounted&&ve.asyncDep&&!ve.asyncResolved&&ve.suspenseId===Be.pendingId&&(Be.deps--,Be.deps===0&&Be.resolve())},Se=(ve,Be,me,Ie=!1,Ve=!1,Me=0)=>{for(let Ne=Me;Ne<ve.length;Ne++)j(ve[Ne],Be,me,Ie,Ve)},we=ve=>ve.shapeFlag&6?we(ve.component.subTree):ve.shapeFlag&128?ve.suspense.next():D(ve.anchor||ve.el),xe=(ve,Be,me)=>{ve==null?Be._vnode&&j(Be._vnode,null,null,!0):U(Be._vnode||null,ve,Be,null,null,null,me),flushPreFlushCbs(),flushPostFlushCbs(),Be._vnode=ve},Ee={p:U,um:j,m:G,r:ee,mt:F,mc:fe,pc:se,pbc:$e,n:we,o:n};let ye,Ce;return _&&([ye,Ce]=_(Ee)),{render:xe,hydrate:ye,createApp:createAppAPI(xe,ye)}}function toggleRecurse({effect:n,update:_},x){n.allowRecurse=_.allowRecurse=x}function traverseStaticChildren(n,_,x=!1){const E=n.children,S=_.children;if(isArray$9(E)&&isArray$9(S))for(let C=0;C<E.length;C++){const T=E[C];let A=S[C];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=S[C]=cloneIfMounted(S[C]),A.el=T.el),x||traverseStaticChildren(T,A)),A.type===Text&&(A.el=T.el)}}function getSequence(n){const _=n.slice(),x=[0];let E,S,C,T,A;const B=n.length;for(E=0;E<B;E++){const I=n[E];if(I!==0){if(S=x[x.length-1],n[S]<I){_[E]=S,x.push(E);continue}for(C=0,T=x.length-1;C<T;)A=C+T>>1,n[x[A]]<I?C=A+1:T=A;I<n[x[C]]&&(C>0&&(_[E]=x[C-1]),x[C]=E)}}for(C=x.length,T=x[C-1];C-- >0;)x[C]=T,T=_[T];return x}const isTeleport=n=>n.__isTeleport,isTeleportDisabled=n=>n&&(n.disabled||n.disabled===""),isTargetSVG=n=>typeof SVGElement<"u"&&n instanceof SVGElement,resolveTarget=(n,_)=>{const x=n&&n.to;return isString$6(x)?_?_(x):null:x},TeleportImpl={__isTeleport:!0,process(n,_,x,E,S,C,T,A,B,I){const{mc:M,pc:O,pbc:D,o:{insert:L,querySelector:V,createText:U,createComment:q}}=I,H=isTeleportDisabled(_.props);let{shapeFlag:W,children:Q,dynamicChildren:re}=_;if(n==null){const ce=_.el=U(""),ne=_.anchor=U("");L(ce,x,E),L(ne,x,E);const Y=_.target=resolveTarget(_.props,V),fe=_.targetAnchor=U("");Y&&(L(fe,Y),T=T||isTargetSVG(Y));const ge=($e,_e)=>{W&16&&M(Q,$e,_e,S,C,T,A,B)};H?ge(x,ne):Y&&ge(Y,fe)}else{_.el=n.el;const ce=_.anchor=n.anchor,ne=_.target=n.target,Y=_.targetAnchor=n.targetAnchor,fe=isTeleportDisabled(n.props),ge=fe?x:ne,$e=fe?ce:Y;if(T=T||isTargetSVG(ne),re?(D(n.dynamicChildren,re,ge,S,C,T,A),traverseStaticChildren(n,_,!0)):B||O(n,_,ge,$e,S,C,T,A,!1),H)fe||moveTeleport(_,x,ce,I,1);else if((_.props&&_.props.to)!==(n.props&&n.props.to)){const _e=_.target=resolveTarget(_.props,V);_e&&moveTeleport(_,_e,null,I,0)}else fe&&moveTeleport(_,ne,Y,I,1)}updateCssVars(_)},remove(n,_,x,E,{um:S,o:{remove:C}},T){const{shapeFlag:A,children:B,anchor:I,targetAnchor:M,target:O,props:D}=n;if(O&&C(M),(T||!isTeleportDisabled(D))&&(C(I),A&16))for(let L=0;L<B.length;L++){const V=B[L];S(V,_,x,!0,!!V.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(n,_,x,{o:{insert:E},m:S},C=2){C===0&&E(n.targetAnchor,_,x);const{el:T,anchor:A,shapeFlag:B,children:I,props:M}=n,O=C===2;if(O&&E(T,_,x),(!O||isTeleportDisabled(M))&&B&16)for(let D=0;D<I.length;D++)S(I[D],_,x,2);O&&E(A,_,x)}function hydrateTeleport(n,_,x,E,S,C,{o:{nextSibling:T,parentNode:A,querySelector:B}},I){const M=_.target=resolveTarget(_.props,B);if(M){const O=M._lpa||M.firstChild;if(_.shapeFlag&16)if(isTeleportDisabled(_.props))_.anchor=I(T(n),_,A(n),x,E,S,C),_.targetAnchor=O;else{_.anchor=T(n);let D=O;for(;D;)if(D=T(D),D&&D.nodeType===8&&D.data==="teleport anchor"){_.targetAnchor=D,M._lpa=_.targetAnchor&&T(_.targetAnchor);break}I(O,_,M,x,E,S,C)}updateCssVars(_)}return _.anchor&&T(_.anchor)}const Teleport=TeleportImpl;function updateCssVars(n){const _=n.ctx;if(_&&_.ut){let x=n.children[0].el;for(;x!==n.targetAnchor;)x.nodeType===1&&x.setAttribute("data-v-owner",_.uid),x=x.nextSibling;_.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,_,x,E,S,C){return setupBlock(createBaseVNode(n,_,x,E,S,C,!0))}function createBlock(n,_,x,E,S){return setupBlock(createVNode(n,_,x,E,S,!0))}function isVNode$1(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,_){return n.type===_.type&&n.key===_.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:_,ref_for:x})=>(typeof n=="number"&&(n=""+n),n!=null?isString$6(n)||isRef(n)||isFunction$4(n)?{i:currentRenderingInstance,r:n,k:_,f:!!x}:n:null);function createBaseVNode(n,_=null,x=null,E=0,S=null,C=n===Fragment?0:1,T=!1,A=!1){const B={__v_isVNode:!0,__v_skip:!0,type:n,props:_,key:_&&normalizeKey(_),ref:_&&normalizeRef(_),scopeId:currentScopeId,slotScopeIds:null,children:x,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:C,patchFlag:E,dynamicProps:S,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return A?(normalizeChildren(B,x),C&128&&n.normalize(B)):x&&(B.shapeFlag|=isString$6(x)?8:16),isBlockTreeEnabled>0&&!T&&currentBlock&&(B.patchFlag>0||C&6)&&B.patchFlag!==32&&currentBlock.push(B),B}const createVNode=_createVNode;function _createVNode(n,_=null,x=null,E=0,S=null,C=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode$1(n)){const A=cloneVNode(n,_,!0);return x&&normalizeChildren(A,x),isBlockTreeEnabled>0&&!C&&currentBlock&&(A.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=A:currentBlock.push(A)),A.patchFlag|=-2,A}if(isClassComponent(n)&&(n=n.__vccOpts),_){_=guardReactiveProps(_);let{class:A,style:B}=_;A&&!isString$6(A)&&(_.class=normalizeClass(A)),isObject$5(B)&&(isProxy(B)&&!isArray$9(B)&&(B=extend$1({},B)),_.style=normalizeStyle(B))}const T=isString$6(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$5(n)?4:isFunction$4(n)?2:0;return createBaseVNode(n,_,x,E,S,T,C,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend$1({},n):n:null}function cloneVNode(n,_,x=!1){const{props:E,ref:S,patchFlag:C,children:T}=n,A=_?mergeProps(E||{},_):E;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:A,key:A&&normalizeKey(A),ref:_&&_.ref?x&&S?isArray$9(S)?S.concat(normalizeRef(_)):[S,normalizeRef(_)]:normalizeRef(_):S,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:T,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:_&&n.type!==Fragment?C===-1?16:C|16:C,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function createTextVNode(n=" ",_=0){return createVNode(Text,null,n,_)}function createCommentVNode(n="",_=!1){return _?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$9(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,_){let x=0;const{shapeFlag:E}=n;if(_==null)_=null;else if(isArray$9(_))x=16;else if(typeof _=="object")if(E&65){const S=_.default;S&&(S._c&&(S._d=!1),normalizeChildren(n,S()),S._c&&(S._d=!0));return}else{x=32;const S=_._;!S&&!(InternalObjectKey in _)?_._ctx=currentRenderingInstance:S===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?_._=1:(_._=2,n.patchFlag|=1024))}else isFunction$4(_)?(_={default:_,_ctx:currentRenderingInstance},x=32):(_=String(_),E&64?(x=16,_=[createTextVNode(_)]):x=8);n.children=_,n.shapeFlag|=x}function mergeProps(...n){const _={};for(let x=0;x<n.length;x++){const E=n[x];for(const S in E)if(S==="class")_.class!==E.class&&(_.class=normalizeClass([_.class,E.class]));else if(S==="style")_.style=normalizeStyle([_.style,E.style]);else if(isOn$1(S)){const C=_[S],T=E[S];T&&C!==T&&!(isArray$9(C)&&C.includes(T))&&(_[S]=C?[].concat(C,T):T)}else S!==""&&(_[S]=E[S])}return _}function invokeVNodeHook(n,_,x,E=null){callWithAsyncErrorHandling(n,_,7,[x,E])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,_,x){const E=n.type,S=(_?_.appContext:n.appContext)||emptyAppContext,C={uid:uid++,vnode:n,type:E,parent:_,appContext:S,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:_?_.provides:Object.create(S.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(E,S),emitsOptions:normalizeEmitsOptions(E,S),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:E.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:x,suspenseId:x?x.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return C.ctx={_:C},C.root=_?_.root:C,C.emit=emit$1.bind(null,C),n.ce&&n.ce(C),C}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push(n=>currentInstance=n),internalSetCurrentInstance=n=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(_=>_(n)):globalCurrentInstanceSetters[0](n)};const setCurrentInstance=n=>{internalSetCurrentInstance(n),n.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,_=!1){isInSSRComponentSetup=_;const{props:x,children:E}=n.vnode,S=isStatefulComponent(n);initProps(n,x,S,_),initSlots(n,E);const C=S?setupStatefulComponent(n,_):void 0;return isInSSRComponentSetup=!1,C}function setupStatefulComponent(n,_){const x=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:E}=x;if(E){const S=n.setupContext=E.length>1?createSetupContext(n):null;setCurrentInstance(n),pauseTracking();const C=callWithErrorHandling(E,n,0,[n.props,S]);if(resetTracking(),unsetCurrentInstance(),isPromise(C)){if(C.then(unsetCurrentInstance,unsetCurrentInstance),_)return C.then(T=>{handleSetupResult(n,T,_)}).catch(T=>{handleError(T,n,0)});n.asyncDep=C}else handleSetupResult(n,C,_)}else finishComponentSetup(n,_)}function handleSetupResult(n,_,x){isFunction$4(_)?n.type.__ssrInlineRender?n.ssrRender=_:n.render=_:isObject$5(_)&&(n.setupState=proxyRefs(_)),finishComponentSetup(n,x)}let compile$1;function finishComponentSetup(n,_,x){const E=n.type;if(!n.render){if(!_&&compile$1&&!E.render){const S=E.template||resolveMergedOptions(n).template;if(S){const{isCustomElement:C,compilerOptions:T}=n.appContext.config,{delimiters:A,compilerOptions:B}=E,I=extend$1(extend$1({isCustomElement:C,delimiters:A},T),B);E.render=compile$1(S,I)}}n.render=E.render||NOOP}setCurrentInstance(n),pauseTracking(),applyOptions(n),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(_,x){return track(n,"get","$attrs"),_[x]}}))}function createSetupContext(n){const _=x=>{n.exposed=x||{}};return{get attrs(){return getAttrsProxy(n)},slots:n.slots,emit:n.emit,expose:_}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(_,x){if(x in _)return _[x];if(x in publicPropertiesMap)return publicPropertiesMap[x](n)},has(_,x){return x in _||x in publicPropertiesMap}}))}function getComponentName(n,_=!0){return isFunction$4(n)?n.displayName||n.name:n.name||_&&n.__name}function isClassComponent(n){return isFunction$4(n)&&"__vccOpts"in n}const computed=(n,_)=>computed$1(n,_,isInSSRComponentSetup);function h$1(n,_,x){const E=arguments.length;return E===2?isObject$5(_)&&!isArray$9(_)?isVNode$1(_)?createVNode(n,null,[_]):createVNode(n,_):createVNode(n,null,_):(E>3?x=Array.prototype.slice.call(arguments,2):E===3&&isVNode$1(x)&&(x=[x]),createVNode(n,_,x))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject$1(ssrContextKey),version$m="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,_,x)=>{_.insertBefore(n,x||null)},remove:n=>{const _=n.parentNode;_&&_.removeChild(n)},createElement:(n,_,x,E)=>{const S=_?doc.createElementNS(svgNS,n):doc.createElement(n,x?{is:x}:void 0);return n==="select"&&E&&E.multiple!=null&&S.setAttribute("multiple",E.multiple),S},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,_)=>{n.nodeValue=_},setElementText:(n,_)=>{n.textContent=_},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,_){n.setAttribute(_,"")},insertStaticContent(n,_,x,E,S,C){const T=x?x.previousSibling:_.lastChild;if(S&&(S===C||S.nextSibling))for(;_.insertBefore(S.cloneNode(!0),x),!(S===C||!(S=S.nextSibling)););else{templateContainer.innerHTML=E?`<svg>${n}</svg>`:n;const A=templateContainer.content;if(E){const B=A.firstChild;for(;B.firstChild;)A.appendChild(B.firstChild);A.removeChild(B)}_.insertBefore(A,x)}return[T?T.nextSibling:_.firstChild,x?x.previousSibling:_.lastChild]}};function patchClass(n,_,x){const E=n._vtc;E&&(_=(_?[_,...E]:[...E]).join(" ")),_==null?n.removeAttribute("class"):x?n.setAttribute("class",_):n.className=_}function patchStyle(n,_,x){const E=n.style,S=isString$6(x);if(x&&!S){if(_&&!isString$6(_))for(const C in _)x[C]==null&&setStyle(E,C,"");for(const C in x)setStyle(E,C,x[C])}else{const C=E.display;S?_!==x&&(E.cssText=x):_&&n.removeAttribute("style"),"_vod"in n&&(E.display=C)}}const importantRE=/\s*!important$/;function setStyle(n,_,x){if(isArray$9(x))x.forEach(E=>setStyle(n,_,E));else if(x==null&&(x=""),_.startsWith("--"))n.setProperty(_,x);else{const E=autoPrefix(n,_);importantRE.test(x)?n.setProperty(hyphenate(E),x.replace(importantRE,""),"important"):n[E]=x}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,_){const x=prefixCache[_];if(x)return x;let E=camelize(_);if(E!=="filter"&&E in n)return prefixCache[_]=E;E=capitalize$1(E);for(let S=0;S<prefixes.length;S++){const C=prefixes[S]+E;if(C in n)return prefixCache[_]=C}return _}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,_,x,E,S){if(E&&_.startsWith("xlink:"))x==null?n.removeAttributeNS(xlinkNS,_.slice(6,_.length)):n.setAttributeNS(xlinkNS,_,x);else{const C=isSpecialBooleanAttr(_);x==null||C&&!includeBooleanAttr(x)?n.removeAttribute(_):n.setAttribute(_,C?"":x)}}function patchDOMProp(n,_,x,E,S,C,T){if(_==="innerHTML"||_==="textContent"){E&&T(E,S,C),n[_]=x??"";return}const A=n.tagName;if(_==="value"&&A!=="PROGRESS"&&!A.includes("-")){n._value=x;const I=A==="OPTION"?n.getAttribute("value"):n.value,M=x??"";I!==M&&(n.value=M),x==null&&n.removeAttribute(_);return}let B=!1;if(x===""||x==null){const I=typeof n[_];I==="boolean"?x=includeBooleanAttr(x):x==null&&I==="string"?(x="",B=!0):I==="number"&&(x=0,B=!0)}try{n[_]=x}catch{}B&&n.removeAttribute(_)}function addEventListener(n,_,x,E){n.addEventListener(_,x,E)}function removeEventListener(n,_,x,E){n.removeEventListener(_,x,E)}function patchEvent(n,_,x,E,S=null){const C=n._vei||(n._vei={}),T=C[_];if(E&&T)T.value=E;else{const[A,B]=parseName(_);if(E){const I=C[_]=createInvoker(E,S);addEventListener(n,A,I,B)}else T&&(removeEventListener(n,A,T,B),C[_]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let _;if(optionsModifierRE.test(n)){_={};let E;for(;E=n.match(optionsModifierRE);)n=n.slice(0,n.length-E[0].length),_[E[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),_]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,_){const x=E=>{if(!E._vts)E._vts=Date.now();else if(E._vts<=x.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(E,x.value),_,5,[E])};return x.value=n,x.attached=getNow(),x}function patchStopImmediatePropagation(n,_){if(isArray$9(_)){const x=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{x.call(n),n._stopped=!0},_.map(E=>S=>!S._stopped&&E&&E(S))}else return _}const nativeOnRE=/^on[a-z]/,patchProp=(n,_,x,E,S=!1,C,T,A,B)=>{_==="class"?patchClass(n,E,S):_==="style"?patchStyle(n,x,E):isOn$1(_)?isModelListener(_)||patchEvent(n,_,x,E,T):(_[0]==="."?(_=_.slice(1),!0):_[0]==="^"?(_=_.slice(1),!1):shouldSetAsProp(n,_,E,S))?patchDOMProp(n,_,E,C,T,A,B):(_==="true-value"?n._trueValue=E:_==="false-value"&&(n._falseValue=E),patchAttr(n,_,E,S))};function shouldSetAsProp(n,_,x,E){return E?!!(_==="innerHTML"||_==="textContent"||_ in n&&nativeOnRE.test(_)&&isFunction$4(x)):_==="spellcheck"||_==="draggable"||_==="translate"||_==="form"||_==="list"&&n.tagName==="INPUT"||_==="type"&&n.tagName==="TEXTAREA"||nativeOnRE.test(_)&&isString$6(x)?!1:_ in n}const TRANSITION="transition",ANIMATION="animation",Transition=(n,{slots:_})=>h$1(BaseTransition,resolveTransitionProps(n),_);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(n,_=[])=>{isArray$9(n)?n.forEach(x=>x(..._)):n&&n(..._)},hasExplicitCallback=n=>n?isArray$9(n)?n.some(_=>_.length>1):n.length>1:!1;function resolveTransitionProps(n){const _={};for(const ae in n)ae in DOMTransitionPropsValidators||(_[ae]=n[ae]);if(n.css===!1)return _;const{name:x="v",type:E,duration:S,enterFromClass:C=`${x}-enter-from`,enterActiveClass:T=`${x}-enter-active`,enterToClass:A=`${x}-enter-to`,appearFromClass:B=C,appearActiveClass:I=T,appearToClass:M=A,leaveFromClass:O=`${x}-leave-from`,leaveActiveClass:D=`${x}-leave-active`,leaveToClass:L=`${x}-leave-to`}=n,V=normalizeDuration(S),U=V&&V[0],q=V&&V[1],{onBeforeEnter:H,onEnter:W,onEnterCancelled:Q,onLeave:re,onLeaveCancelled:ce,onBeforeAppear:ne=H,onAppear:Y=W,onAppearCancelled:fe=Q}=_,ge=(ae,X,F)=>{removeTransitionClass(ae,X?M:A),removeTransitionClass(ae,X?I:T),F&&F()},$e=(ae,X)=>{ae._isLeaving=!1,removeTransitionClass(ae,O),removeTransitionClass(ae,L),removeTransitionClass(ae,D),X&&X()},_e=ae=>(X,F)=>{const z=ae?Y:W,J=()=>ge(X,ae,F);callHook(z,[X,J]),nextFrame(()=>{removeTransitionClass(X,ae?B:C),addTransitionClass(X,ae?M:A),hasExplicitCallback(z)||whenTransitionEnds(X,E,U,J)})};return extend$1(_,{onBeforeEnter(ae){callHook(H,[ae]),addTransitionClass(ae,C),addTransitionClass(ae,T)},onBeforeAppear(ae){callHook(ne,[ae]),addTransitionClass(ae,B),addTransitionClass(ae,I)},onEnter:_e(!1),onAppear:_e(!0),onLeave(ae,X){ae._isLeaving=!0;const F=()=>$e(ae,X);addTransitionClass(ae,O),forceReflow(),addTransitionClass(ae,D),nextFrame(()=>{ae._isLeaving&&(removeTransitionClass(ae,O),addTransitionClass(ae,L),hasExplicitCallback(re)||whenTransitionEnds(ae,E,q,F))}),callHook(re,[ae,F])},onEnterCancelled(ae){ge(ae,!1),callHook(Q,[ae])},onAppearCancelled(ae){ge(ae,!0),callHook(fe,[ae])},onLeaveCancelled(ae){$e(ae),callHook(ce,[ae])}})}function normalizeDuration(n){if(n==null)return null;if(isObject$5(n))return[NumberOf(n.enter),NumberOf(n.leave)];{const _=NumberOf(n);return[_,_]}}function NumberOf(n){return toNumber(n)}function addTransitionClass(n,_){_.split(/\s+/).forEach(x=>x&&n.classList.add(x)),(n._vtc||(n._vtc=new Set)).add(_)}function removeTransitionClass(n,_){_.split(/\s+/).forEach(E=>E&&n.classList.remove(E));const{_vtc:x}=n;x&&(x.delete(_),x.size||(n._vtc=void 0))}function nextFrame(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let endId=0;function whenTransitionEnds(n,_,x,E){const S=n._endId=++endId,C=()=>{S===n._endId&&E()};if(x)return setTimeout(C,x);const{type:T,timeout:A,propCount:B}=getTransitionInfo(n,_);if(!T)return E();const I=T+"end";let M=0;const O=()=>{n.removeEventListener(I,D),C()},D=L=>{L.target===n&&++M>=B&&O()};setTimeout(()=>{M<B&&O()},A+1),n.addEventListener(I,D)}function getTransitionInfo(n,_){const x=window.getComputedStyle(n),E=V=>(x[V]||"").split(", "),S=E(`${TRANSITION}Delay`),C=E(`${TRANSITION}Duration`),T=getTimeout(S,C),A=E(`${ANIMATION}Delay`),B=E(`${ANIMATION}Duration`),I=getTimeout(A,B);let M=null,O=0,D=0;_===TRANSITION?T>0&&(M=TRANSITION,O=T,D=C.length):_===ANIMATION?I>0&&(M=ANIMATION,O=I,D=B.length):(O=Math.max(T,I),M=O>0?T>I?TRANSITION:ANIMATION:null,D=M?M===TRANSITION?C.length:B.length:0);const L=M===TRANSITION&&/\b(transform|all)(,|$)/.test(E(`${TRANSITION}Property`).toString());return{type:M,timeout:O,propCount:D,hasTransform:L}}function getTimeout(n,_){for(;n.length<_.length;)n=n.concat(n);return Math.max(..._.map((x,E)=>toMs(x)+toMs(n[E])))}function toMs(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(n,{slots:_}){const x=getCurrentInstance$1(),E=useTransitionState();let S,C;return onUpdated(()=>{if(!S.length)return;const T=n.moveClass||`${n.name||"v"}-move`;if(!hasCSSTransform(S[0].el,x.vnode.el,T))return;S.forEach(callPendingCbs),S.forEach(recordPosition);const A=S.filter(applyTranslation);forceReflow(),A.forEach(B=>{const I=B.el,M=I.style;addTransitionClass(I,T),M.transform=M.webkitTransform=M.transitionDuration="";const O=I._moveCb=D=>{D&&D.target!==I||(!D||/transform$/.test(D.propertyName))&&(I.removeEventListener("transitionend",O),I._moveCb=null,removeTransitionClass(I,T))};I.addEventListener("transitionend",O)})}),()=>{const T=toRaw(n),A=resolveTransitionProps(T);let B=T.tag||Fragment;S=C,C=_.default?getTransitionRawChildren(_.default()):[];for(let I=0;I<C.length;I++){const M=C[I];M.key!=null&&setTransitionHooks(M,resolveTransitionHooks(M,A,E,x))}if(S)for(let I=0;I<S.length;I++){const M=S[I];setTransitionHooks(M,resolveTransitionHooks(M,A,E,x)),positionMap.set(M,M.el.getBoundingClientRect())}return createVNode(B,null,C)}}},removeMode=n=>delete n.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(n){const _=n.el;_._moveCb&&_._moveCb(),_._enterCb&&_._enterCb()}function recordPosition(n){newPositionMap.set(n,n.el.getBoundingClientRect())}function applyTranslation(n){const _=positionMap.get(n),x=newPositionMap.get(n),E=_.left-x.left,S=_.top-x.top;if(E||S){const C=n.el.style;return C.transform=C.webkitTransform=`translate(${E}px,${S}px)`,C.transitionDuration="0s",n}}function hasCSSTransform(n,_,x){const E=n.cloneNode();n._vtc&&n._vtc.forEach(T=>{T.split(/\s+/).forEach(A=>A&&E.classList.remove(A))}),x.split(/\s+/).forEach(T=>T&&E.classList.add(T)),E.style.display="none";const S=_.nodeType===1?_:_.parentNode;S.appendChild(E);const{hasTransform:C}=getTransitionInfo(E);return S.removeChild(E),C}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,_)=>systemModifiers.some(x=>n[`${x}Key`]&&!_.includes(x))},withModifiers=(n,_)=>(x,...E)=>{for(let S=0;S<_.length;S++){const C=modifierGuards[_[S]];if(C&&C(x,_))return}return n(x,...E)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(n,_)=>x=>{if(!("key"in x))return;const E=hyphenate(x.key);if(_.some(S=>S===E||keyNames[S]===E))return n(x)},vShow={beforeMount(n,{value:_},{transition:x}){n._vod=n.style.display==="none"?"":n.style.display,x&&_?x.beforeEnter(n):setDisplay(n,_)},mounted(n,{value:_},{transition:x}){x&&_&&x.enter(n)},updated(n,{value:_,oldValue:x},{transition:E}){!_!=!x&&(E?_?(E.beforeEnter(n),setDisplay(n,!0),E.enter(n)):E.leave(n,()=>{setDisplay(n,!1)}):setDisplay(n,_))},beforeUnmount(n,{value:_}){setDisplay(n,_)}};function setDisplay(n,_){n.style.display=_?n._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const _=ensureRenderer().createApp(...n),{mount:x}=_;return _.mount=E=>{const S=normalizeContainer(E);if(!S)return;const C=_._component;!isFunction$4(C)&&!C.render&&!C.template&&(C.template=S.innerHTML),S.innerHTML="";const T=x(S,!1,S instanceof SVGElement);return S instanceof Element&&(S.removeAttribute("v-cloak"),S.setAttribute("data-v-app","")),T},_};function normalizeContainer(n){return isString$6(n)?document.querySelector(n):n}/*! js-cookie v3.0.5 | MIT */function assign$5(n){for(var _=1;_<arguments.length;_++){var x=arguments[_];for(var E in x)n[E]=x[E]}return n}var defaultConverter={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$2(n,_){function x(S,C,T){if(!(typeof document>"u")){T=assign$5({},_,T),typeof T.expires=="number"&&(T.expires=new Date(Date.now()+T.expires*864e5)),T.expires&&(T.expires=T.expires.toUTCString()),S=encodeURIComponent(S).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var A="";for(var B in T)T[B]&&(A+="; "+B,T[B]!==!0&&(A+="="+T[B].split(";")[0]));return document.cookie=S+"="+n.write(C,S)+A}}function E(S){if(!(typeof document>"u"||arguments.length&&!S)){for(var C=document.cookie?document.cookie.split("; "):[],T={},A=0;A<C.length;A++){var B=C[A].split("="),I=B.slice(1).join("=");try{var M=decodeURIComponent(B[0]);if(T[M]=n.read(I,M),S===M)break}catch{}}return S?T[S]:T}}return Object.create({set:x,get:E,remove:function(S,C){x(S,"",assign$5({},C,{expires:-1}))},withAttributes:function(S){return init$2(this.converter,assign$5({},this.attributes,S))},withConverter:function(S){return init$2(assign$5({},this.converter,S),this.attributes)}},{attributes:{value:Object.freeze(_)},converter:{value:Object.freeze(n)}})}var api$3=init$2(defaultConverter,{path:"/"}),events$1={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(_,x,E){return Function.prototype.apply.call(_,x,E)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function(_){return _!==_};function EventEmitter$4(){EventEmitter$4.init.call(this)}events$1.exports=EventEmitter$4;var once_1=events$1.exports.once=once$1;EventEmitter$4.EventEmitter=EventEmitter$4;EventEmitter$4.prototype._events=void 0;EventEmitter$4.prototype._eventsCount=0;EventEmitter$4.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$4,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$4.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$4.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||NumberIsNaN(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$4.defaultMaxListeners:n._maxListeners}EventEmitter$4.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$4.prototype.emit=function(_){for(var x=[],E=1;E<arguments.length;E++)x.push(arguments[E]);var S=_==="error",C=this._events;if(C!==void 0)S=S&&C.error===void 0;else if(!S)return!1;if(S){var T;if(x.length>0&&(T=x[0]),T instanceof Error)throw T;var A=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw A.context=T,A}var B=C[_];if(B===void 0)return!1;if(typeof B=="function")ReflectApply(B,this,x);else for(var I=B.length,M=arrayClone(B,I),E=0;E<I;++E)ReflectApply(M[E],this,x);return!0};function _addListener(n,_,x,E){var S,C,T;if(checkListener(x),C=n._events,C===void 0?(C=n._events=Object.create(null),n._eventsCount=0):(C.newListener!==void 0&&(n.emit("newListener",_,x.listener?x.listener:x),C=n._events),T=C[_]),T===void 0)T=C[_]=x,++n._eventsCount;else if(typeof T=="function"?T=C[_]=E?[x,T]:[T,x]:E?T.unshift(x):T.push(x),S=_getMaxListeners(n),S>0&&T.length>S&&!T.warned){T.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=n,A.type=_,A.count=T.length,ProcessEmitWarning(A)}return n}EventEmitter$4.prototype.addListener=function(_,x){return _addListener(this,_,x,!1)};EventEmitter$4.prototype.on=EventEmitter$4.prototype.addListener;EventEmitter$4.prototype.prependListener=function(_,x){return _addListener(this,_,x,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,_,x){var E={fired:!1,wrapFn:void 0,target:n,type:_,listener:x},S=onceWrapper.bind(E);return S.listener=x,E.wrapFn=S,S}EventEmitter$4.prototype.once=function(_,x){return checkListener(x),this.on(_,_onceWrap(this,_,x)),this};EventEmitter$4.prototype.prependOnceListener=function(_,x){return checkListener(x),this.prependListener(_,_onceWrap(this,_,x)),this};EventEmitter$4.prototype.removeListener=function(_,x){var E,S,C,T,A;if(checkListener(x),S=this._events,S===void 0)return this;if(E=S[_],E===void 0)return this;if(E===x||E.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete S[_],S.removeListener&&this.emit("removeListener",_,E.listener||x));else if(typeof E!="function"){for(C=-1,T=E.length-1;T>=0;T--)if(E[T]===x||E[T].listener===x){A=E[T].listener,C=T;break}if(C<0)return this;C===0?E.shift():spliceOne(E,C),E.length===1&&(S[_]=E[0]),S.removeListener!==void 0&&this.emit("removeListener",_,A||x)}return this};EventEmitter$4.prototype.off=EventEmitter$4.prototype.removeListener;EventEmitter$4.prototype.removeAllListeners=function(_){var x,E,S;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[_]),this;if(arguments.length===0){var C=Object.keys(E),T;for(S=0;S<C.length;++S)T=C[S],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=E[_],typeof x=="function")this.removeListener(_,x);else if(x!==void 0)for(S=x.length-1;S>=0;S--)this.removeListener(_,x[S]);return this};function _listeners(n,_,x){var E=n._events;if(E===void 0)return[];var S=E[_];return S===void 0?[]:typeof S=="function"?x?[S.listener||S]:[S]:x?unwrapListeners(S):arrayClone(S,S.length)}EventEmitter$4.prototype.listeners=function(_){return _listeners(this,_,!0)};EventEmitter$4.prototype.rawListeners=function(_){return _listeners(this,_,!1)};EventEmitter$4.listenerCount=function(n,_){return typeof n.listenerCount=="function"?n.listenerCount(_):listenerCount$1.call(n,_)};EventEmitter$4.prototype.listenerCount=listenerCount$1;function listenerCount$1(n){var _=this._events;if(_!==void 0){var x=_[n];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}EventEmitter$4.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,_){for(var x=new Array(_),E=0;E<_;++E)x[E]=n[E];return x}function spliceOne(n,_){for(;_+1<n.length;_++)n[_]=n[_+1];n.pop()}function unwrapListeners(n){for(var _=new Array(n.length),x=0;x<_.length;++x)_[x]=n[x].listener||n[x];return _}function once$1(n,_){return new Promise(function(x,E){function S(T){n.removeListener(_,C),E(T)}function C(){typeof n.removeListener=="function"&&n.removeListener("error",S),x([].slice.call(arguments))}eventTargetAgnosticAddListener(n,_,C,{once:!0}),_!=="error"&&addErrorHandlerIfEventEmitter(n,S,{once:!0})})}function addErrorHandlerIfEventEmitter(n,_,x){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",_,x)}function eventTargetAgnosticAddListener(n,_,x,E){if(typeof n.on=="function")E.once?n.once(_,x):n.on(_,x);else if(typeof n.addEventListener=="function")n.addEventListener(_,function S(C){E.once&&n.removeEventListener(_,S),x(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var eventsExports=events$1.exports;const EventEmitter$5=getDefaultExportFromCjs(eventsExports);var isMergeableObject=function(_){return isNonNullObject(_)&&!isSpecial(_)};function isNonNullObject(n){return!!n&&typeof n=="object"}function isSpecial(n){var _=Object.prototype.toString.call(n);return _==="[object RegExp]"||_==="[object Date]"||isReactElement(n)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(n){return n.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(n){return Array.isArray(n)?[]:{}}function cloneUnlessOtherwiseSpecified(n,_){return _.clone!==!1&&_.isMergeableObject(n)?deepmerge(emptyTarget(n),n,_):n}function defaultArrayMerge(n,_,x){return n.concat(_).map(function(E){return cloneUnlessOtherwiseSpecified(E,x)})}function getMergeFunction(n,_){if(!_.customMerge)return deepmerge;var x=_.customMerge(n);return typeof x=="function"?x:deepmerge}function getEnumerableOwnPropertySymbols(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(_){return Object.propertyIsEnumerable.call(n,_)}):[]}function getKeys(n){return Object.keys(n).concat(getEnumerableOwnPropertySymbols(n))}function propertyIsOnObject(n,_){try{return _ in n}catch{return!1}}function propertyIsUnsafe(n,_){return propertyIsOnObject(n,_)&&!(Object.hasOwnProperty.call(n,_)&&Object.propertyIsEnumerable.call(n,_))}function mergeObject(n,_,x){var E={};return x.isMergeableObject(n)&&getKeys(n).forEach(function(S){E[S]=cloneUnlessOtherwiseSpecified(n[S],x)}),getKeys(_).forEach(function(S){propertyIsUnsafe(n,S)||(propertyIsOnObject(n,S)&&x.isMergeableObject(_[S])?E[S]=getMergeFunction(S,x)(n[S],_[S],x):E[S]=cloneUnlessOtherwiseSpecified(_[S],x))}),E}function deepmerge(n,_,x){x=x||{},x.arrayMerge=x.arrayMerge||defaultArrayMerge,x.isMergeableObject=x.isMergeableObject||isMergeableObject,x.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var E=Array.isArray(_),S=Array.isArray(n),C=E===S;return C?E?x.arrayMerge(n,_,x):mergeObject(n,_,x):cloneUnlessOtherwiseSpecified(_,x)}deepmerge.all=function(_,x){if(!Array.isArray(_))throw new Error("first argument should be an array");return _.reduce(function(E,S){return deepmerge(E,S,x)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1;const merge$1=getDefaultExportFromCjs(cjs),___=" ",__="",__="/orbitdb/zdpuAqBsFnWsRo4DRZjyvDbuHXPck4PsD99GqUqnDaVMYYdRy/df20365f-e180-400f-b97c-945542c690f4",__="",__="/orbitdb/zdpuAtyjCoieAwksiuuvaYgVQfzFYSsB4isz5LuJqiiEnVdfS/283c823e-24ad-4881-9782-99fc753e5161",={___,__,__,__,__},scriptRel="modulepreload",assetsURL=function(n){return"/Kam-vi-thy-tu-ra-sab/"+n},seen={},__vitePreload=function(_,x,E){if(!x||x.length===0)return _();const S=document.getElementsByTagName("link");return Promise.all(x.map(C=>{if(C=assetsURL(C),C in seen)return;seen[C]=!0;const T=C.endsWith(".css"),A=T?'[rel="stylesheet"]':"";if(!!E)for(let M=S.length-1;M>=0;M--){const O=S[M];if(O.href===C&&(!T||O.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${C}"]${A}`))return;const I=document.createElement("link");if(I.rel=T?"stylesheet":scriptRel,T||(I.as="script",I.crossOrigin=""),I.href=C,document.head.appendChild(I),T)return new Promise((M,O)=>{I.addEventListener("load",M),I.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${C}`)))})})).then(()=>_()).catch(C=>{const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=C,window.dispatchEvent(T),!T.defaultPrevented)throw C})};var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init$1(){inited=!0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0,x=n.length;_<x;++_)lookup$1[_]=n[_],revLookup[n.charCodeAt(_)]=_;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(n){inited||init$1();var _,x,E,S,C,T,A=n.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");C=n[A-2]==="="?2:n[A-1]==="="?1:0,T=new Arr(A*3/4-C),E=C>0?A-4:A;var B=0;for(_=0,x=0;_<E;_+=4,x+=3)S=revLookup[n.charCodeAt(_)]<<18|revLookup[n.charCodeAt(_+1)]<<12|revLookup[n.charCodeAt(_+2)]<<6|revLookup[n.charCodeAt(_+3)],T[B++]=S>>16&255,T[B++]=S>>8&255,T[B++]=S&255;return C===2?(S=revLookup[n.charCodeAt(_)]<<2|revLookup[n.charCodeAt(_+1)]>>4,T[B++]=S&255):C===1&&(S=revLookup[n.charCodeAt(_)]<<10|revLookup[n.charCodeAt(_+1)]<<4|revLookup[n.charCodeAt(_+2)]>>2,T[B++]=S>>8&255,T[B++]=S&255),T}function tripletToBase64(n){return lookup$1[n>>18&63]+lookup$1[n>>12&63]+lookup$1[n>>6&63]+lookup$1[n&63]}function encodeChunk(n,_,x){for(var E,S=[],C=_;C<x;C+=3)E=(n[C]<<16)+(n[C+1]<<8)+n[C+2],S.push(tripletToBase64(E));return S.join("")}function fromByteArray(n){inited||init$1();for(var _,x=n.length,E=x%3,S="",C=[],T=16383,A=0,B=x-E;A<B;A+=T)C.push(encodeChunk(n,A,A+T>B?B:A+T));return E===1?(_=n[x-1],S+=lookup$1[_>>2],S+=lookup$1[_<<4&63],S+="=="):E===2&&(_=(n[x-2]<<8)+n[x-1],S+=lookup$1[_>>10],S+=lookup$1[_>>4&63],S+=lookup$1[_<<2&63],S+="="),C.push(S),C.join("")}function read$9(n,_,x,E,S){var C,T,A=S*8-E-1,B=(1<<A)-1,I=B>>1,M=-7,O=x?S-1:0,D=x?-1:1,L=n[_+O];for(O+=D,C=L&(1<<-M)-1,L>>=-M,M+=A;M>0;C=C*256+n[_+O],O+=D,M-=8);for(T=C&(1<<-M)-1,C>>=-M,M+=E;M>0;T=T*256+n[_+O],O+=D,M-=8);if(C===0)C=1-I;else{if(C===B)return T?NaN:(L?-1:1)*(1/0);T=T+Math.pow(2,E),C=C-I}return(L?-1:1)*T*Math.pow(2,C-E)}function write$4(n,_,x,E,S,C){var T,A,B,I=C*8-S-1,M=(1<<I)-1,O=M>>1,D=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=E?0:C-1,V=E?1:-1,U=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(A=isNaN(_)?1:0,T=M):(T=Math.floor(Math.log(_)/Math.LN2),_*(B=Math.pow(2,-T))<1&&(T--,B*=2),T+O>=1?_+=D/B:_+=D*Math.pow(2,1-O),_*B>=2&&(T++,B/=2),T+O>=M?(A=0,T=M):T+O>=1?(A=(_*B-1)*Math.pow(2,S),T=T+O):(A=_*Math.pow(2,O-1)*Math.pow(2,S),T=0));S>=8;n[x+L]=A&255,L+=V,A/=256,S-=8);for(T=T<<S|A,I+=S;I>0;n[x+L]=T&255,L+=V,T/=256,I-=8);n[x+L-V]|=U*128}var toString$b={}.toString,isArray$8=Array.isArray||function(n){return toString$b.call(n)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer$5.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer$5.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(n,_){if(kMaxLength()<_)throw new RangeError("Invalid typed array length");return Buffer$5.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(_),n.__proto__=Buffer$5.prototype):(n===null&&(n=new Buffer$5(_)),n.length=_),n}function Buffer$5(n,_,x){if(!Buffer$5.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$5))return new Buffer$5(n,_,x);if(typeof n=="number"){if(typeof _=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe$3(this,n)}return from$a(this,n,_,x)}Buffer$5.poolSize=8192;Buffer$5._augment=function(n){return n.__proto__=Buffer$5.prototype,n};function from$a(n,_,x,E){if(typeof _=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&_ instanceof ArrayBuffer?fromArrayBuffer(n,_,x,E):typeof _=="string"?fromString$7(n,_,x):fromObject(n,_)}Buffer$5.from=function(n,_,x){return from$a(null,n,_,x)};Buffer$5.TYPED_ARRAY_SUPPORT&&(Buffer$5.prototype.__proto__=Uint8Array.prototype,Buffer$5.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$5[Symbol.species]);function assertSize(n){if(typeof n!="number")throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative')}function alloc$3(n,_,x,E){return assertSize(_),_<=0?createBuffer(n,_):x!==void 0?typeof E=="string"?createBuffer(n,_).fill(x,E):createBuffer(n,_).fill(x):createBuffer(n,_)}Buffer$5.alloc=function(n,_,x){return alloc$3(null,n,_,x)};function allocUnsafe$3(n,_){if(assertSize(_),n=createBuffer(n,_<0?0:checked(_)|0),!Buffer$5.TYPED_ARRAY_SUPPORT)for(var x=0;x<_;++x)n[x]=0;return n}Buffer$5.allocUnsafe=function(n){return allocUnsafe$3(null,n)};Buffer$5.allocUnsafeSlow=function(n){return allocUnsafe$3(null,n)};function fromString$7(n,_,x){if((typeof x!="string"||x==="")&&(x="utf8"),!Buffer$5.isEncoding(x))throw new TypeError('"encoding" must be a valid string encoding');var E=byteLength$1(_,x)|0;n=createBuffer(n,E);var S=n.write(_,x);return S!==E&&(n=n.slice(0,S)),n}function fromArrayLike(n,_){var x=_.length<0?0:checked(_.length)|0;n=createBuffer(n,x);for(var E=0;E<x;E+=1)n[E]=_[E]&255;return n}function fromArrayBuffer(n,_,x,E){if(_.byteLength,x<0||_.byteLength<x)throw new RangeError("'offset' is out of bounds");if(_.byteLength<x+(E||0))throw new RangeError("'length' is out of bounds");return x===void 0&&E===void 0?_=new Uint8Array(_):E===void 0?_=new Uint8Array(_,x):_=new Uint8Array(_,x,E),Buffer$5.TYPED_ARRAY_SUPPORT?(n=_,n.__proto__=Buffer$5.prototype):n=fromArrayLike(n,_),n}function fromObject(n,_){if(internalIsBuffer(_)){var x=checked(_.length)|0;return n=createBuffer(n,x),n.length===0||_.copy(n,0,0,x),n}if(_){if(typeof ArrayBuffer<"u"&&_.buffer instanceof ArrayBuffer||"length"in _)return typeof _.length!="number"||isnan(_.length)?createBuffer(n,0):fromArrayLike(n,_);if(_.type==="Buffer"&&isArray$8(_.data))return fromArrayLike(n,_.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(n){if(n>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return n|0}Buffer$5.isBuffer=isBuffer$7;function internalIsBuffer(n){return!!(n!=null&&n._isBuffer)}Buffer$5.compare=function(_,x){if(!internalIsBuffer(_)||!internalIsBuffer(x))throw new TypeError("Arguments must be Buffers");if(_===x)return 0;for(var E=_.length,S=x.length,C=0,T=Math.min(E,S);C<T;++C)if(_[C]!==x[C]){E=_[C],S=x[C];break}return E<S?-1:S<E?1:0};Buffer$5.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer$5.concat=function(_,x){if(!isArray$8(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return Buffer$5.alloc(0);var E;if(x===void 0)for(x=0,E=0;E<_.length;++E)x+=_[E].length;var S=Buffer$5.allocUnsafe(x),C=0;for(E=0;E<_.length;++E){var T=_[E];if(!internalIsBuffer(T))throw new TypeError('"list" argument must be an Array of Buffers');T.copy(S,C),C+=T.length}return S};function byteLength$1(n,_){if(internalIsBuffer(n))return n.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;typeof n!="string"&&(n=""+n);var x=n.length;if(x===0)return 0;for(var E=!1;;)switch(_){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":case void 0:return utf8ToBytes$2(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return base64ToBytes$1(n).length;default:if(E)return utf8ToBytes$2(n).length;_=(""+_).toLowerCase(),E=!0}}Buffer$5.byteLength=byteLength$1;function slowToString(n,_,x){var E=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,_>>>=0,x<=_))return"";for(n||(n="utf8");;)switch(n){case"hex":return hexSlice(this,_,x);case"utf8":case"utf-8":return utf8Slice$2(this,_,x);case"ascii":return asciiSlice(this,_,x);case"latin1":case"binary":return latin1Slice(this,_,x);case"base64":return base64Slice(this,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,_,x);default:if(E)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),E=!0}}Buffer$5.prototype._isBuffer=!0;function swap(n,_,x){var E=n[_];n[_]=n[x],n[x]=E}Buffer$5.prototype.swap16=function(){var _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var x=0;x<_;x+=2)swap(this,x,x+1);return this};Buffer$5.prototype.swap32=function(){var _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var x=0;x<_;x+=4)swap(this,x,x+3),swap(this,x+1,x+2);return this};Buffer$5.prototype.swap64=function(){var _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var x=0;x<_;x+=8)swap(this,x,x+7),swap(this,x+1,x+6),swap(this,x+2,x+5),swap(this,x+3,x+4);return this};Buffer$5.prototype.toString=function(){var _=this.length|0;return _===0?"":arguments.length===0?utf8Slice$2(this,0,_):slowToString.apply(this,arguments)};Buffer$5.prototype.equals=function(_){if(!internalIsBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:Buffer$5.compare(this,_)===0};Buffer$5.prototype.inspect=function(){var _="",x=INSPECT_MAX_BYTES;return this.length>0&&(_=this.toString("hex",0,x).match(/.{2}/g).join(" "),this.length>x&&(_+=" ... ")),"<Buffer "+_+">"};Buffer$5.prototype.compare=function(_,x,E,S,C){if(!internalIsBuffer(_))throw new TypeError("Argument must be a Buffer");if(x===void 0&&(x=0),E===void 0&&(E=_?_.length:0),S===void 0&&(S=0),C===void 0&&(C=this.length),x<0||E>_.length||S<0||C>this.length)throw new RangeError("out of range index");if(S>=C&&x>=E)return 0;if(S>=C)return-1;if(x>=E)return 1;if(x>>>=0,E>>>=0,S>>>=0,C>>>=0,this===_)return 0;for(var T=C-S,A=E-x,B=Math.min(T,A),I=this.slice(S,C),M=_.slice(x,E),O=0;O<B;++O)if(I[O]!==M[O]){T=I[O],A=M[O];break}return T<A?-1:A<T?1:0};function bidirectionalIndexOf(n,_,x,E,S){if(n.length===0)return-1;if(typeof x=="string"?(E=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,isNaN(x)&&(x=S?0:n.length-1),x<0&&(x=n.length+x),x>=n.length){if(S)return-1;x=n.length-1}else if(x<0)if(S)x=0;else return-1;if(typeof _=="string"&&(_=Buffer$5.from(_,E)),internalIsBuffer(_))return _.length===0?-1:arrayIndexOf(n,_,x,E,S);if(typeof _=="number")return _=_&255,Buffer$5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?S?Uint8Array.prototype.indexOf.call(n,_,x):Uint8Array.prototype.lastIndexOf.call(n,_,x):arrayIndexOf(n,[_],x,E,S);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(n,_,x,E,S){var C=1,T=n.length,A=_.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(n.length<2||_.length<2)return-1;C=2,T/=2,A/=2,x/=2}function B(L,V){return C===1?L[V]:L.readUInt16BE(V*C)}var I;if(S){var M=-1;for(I=x;I<T;I++)if(B(n,I)===B(_,M===-1?0:I-M)){if(M===-1&&(M=I),I-M+1===A)return M*C}else M!==-1&&(I-=I-M),M=-1}else for(x+A>T&&(x=T-A),I=x;I>=0;I--){for(var O=!0,D=0;D<A;D++)if(B(n,I+D)!==B(_,D)){O=!1;break}if(O)return I}return-1}Buffer$5.prototype.includes=function(_,x,E){return this.indexOf(_,x,E)!==-1};Buffer$5.prototype.indexOf=function(_,x,E){return bidirectionalIndexOf(this,_,x,E,!0)};Buffer$5.prototype.lastIndexOf=function(_,x,E){return bidirectionalIndexOf(this,_,x,E,!1)};function hexWrite(n,_,x,E){x=Number(x)||0;var S=n.length-x;E?(E=Number(E),E>S&&(E=S)):E=S;var C=_.length;if(C%2!==0)throw new TypeError("Invalid hex string");E>C/2&&(E=C/2);for(var T=0;T<E;++T){var A=parseInt(_.substr(T*2,2),16);if(isNaN(A))return T;n[x+T]=A}return T}function utf8Write(n,_,x,E){return blitBuffer(utf8ToBytes$2(_,n.length-x),n,x,E)}function asciiWrite(n,_,x,E){return blitBuffer(asciiToBytes(_),n,x,E)}function latin1Write(n,_,x,E){return asciiWrite(n,_,x,E)}function base64Write(n,_,x,E){return blitBuffer(base64ToBytes$1(_),n,x,E)}function ucs2Write(n,_,x,E){return blitBuffer(utf16leToBytes(_,n.length-x),n,x,E)}Buffer$5.prototype.write=function(_,x,E,S){if(x===void 0)S="utf8",E=this.length,x=0;else if(E===void 0&&typeof x=="string")S=x,E=this.length,x=0;else if(isFinite(x))x=x|0,isFinite(E)?(E=E|0,S===void 0&&(S="utf8")):(S=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var C=this.length-x;if((E===void 0||E>C)&&(E=C),_.length>0&&(E<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var T=!1;;)switch(S){case"hex":return hexWrite(this,_,x,E);case"utf8":case"utf-8":return utf8Write(this,_,x,E);case"ascii":return asciiWrite(this,_,x,E);case"latin1":case"binary":return latin1Write(this,_,x,E);case"base64":return base64Write(this,_,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,_,x,E);default:if(T)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),T=!0}};Buffer$5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(n,_,x){return _===0&&x===n.length?fromByteArray(n):fromByteArray(n.slice(_,x))}function utf8Slice$2(n,_,x){x=Math.min(n.length,x);for(var E=[],S=_;S<x;){var C=n[S],T=null,A=C>239?4:C>223?3:C>191?2:1;if(S+A<=x){var B,I,M,O;switch(A){case 1:C<128&&(T=C);break;case 2:B=n[S+1],(B&192)===128&&(O=(C&31)<<6|B&63,O>127&&(T=O));break;case 3:B=n[S+1],I=n[S+2],(B&192)===128&&(I&192)===128&&(O=(C&15)<<12|(B&63)<<6|I&63,O>2047&&(O<55296||O>57343)&&(T=O));break;case 4:B=n[S+1],I=n[S+2],M=n[S+3],(B&192)===128&&(I&192)===128&&(M&192)===128&&(O=(C&15)<<18|(B&63)<<12|(I&63)<<6|M&63,O>65535&&O<1114112&&(T=O))}}T===null?(T=65533,A=1):T>65535&&(T-=65536,E.push(T>>>10&1023|55296),T=56320|T&1023),E.push(T),S+=A}return decodeCodePointsArray$2(E)}var MAX_ARGUMENTS_LENGTH$2=4096;function decodeCodePointsArray$2(n){var _=n.length;if(_<=MAX_ARGUMENTS_LENGTH$2)return String.fromCharCode.apply(String,n);for(var x="",E=0;E<_;)x+=String.fromCharCode.apply(String,n.slice(E,E+=MAX_ARGUMENTS_LENGTH$2));return x}function asciiSlice(n,_,x){var E="";x=Math.min(n.length,x);for(var S=_;S<x;++S)E+=String.fromCharCode(n[S]&127);return E}function latin1Slice(n,_,x){var E="";x=Math.min(n.length,x);for(var S=_;S<x;++S)E+=String.fromCharCode(n[S]);return E}function hexSlice(n,_,x){var E=n.length;(!_||_<0)&&(_=0),(!x||x<0||x>E)&&(x=E);for(var S="",C=_;C<x;++C)S+=toHex$3(n[C]);return S}function utf16leSlice(n,_,x){for(var E=n.slice(_,x),S="",C=0;C<E.length;C+=2)S+=String.fromCharCode(E[C]+E[C+1]*256);return S}Buffer$5.prototype.slice=function(_,x){var E=this.length;_=~~_,x=x===void 0?E:~~x,_<0?(_+=E,_<0&&(_=0)):_>E&&(_=E),x<0?(x+=E,x<0&&(x=0)):x>E&&(x=E),x<_&&(x=_);var S;if(Buffer$5.TYPED_ARRAY_SUPPORT)S=this.subarray(_,x),S.__proto__=Buffer$5.prototype;else{var C=x-_;S=new Buffer$5(C,void 0);for(var T=0;T<C;++T)S[T]=this[T+_]}return S};function checkOffset(n,_,x){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+_>x)throw new RangeError("Trying to access beyond buffer length")}Buffer$5.prototype.readUIntLE=function(_,x,E){_=_|0,x=x|0,E||checkOffset(_,x,this.length);for(var S=this[_],C=1,T=0;++T<x&&(C*=256);)S+=this[_+T]*C;return S};Buffer$5.prototype.readUIntBE=function(_,x,E){_=_|0,x=x|0,E||checkOffset(_,x,this.length);for(var S=this[_+--x],C=1;x>0&&(C*=256);)S+=this[_+--x]*C;return S};Buffer$5.prototype.readUInt8=function(_,x){return x||checkOffset(_,1,this.length),this[_]};Buffer$5.prototype.readUInt16LE=function(_,x){return x||checkOffset(_,2,this.length),this[_]|this[_+1]<<8};Buffer$5.prototype.readUInt16BE=function(_,x){return x||checkOffset(_,2,this.length),this[_]<<8|this[_+1]};Buffer$5.prototype.readUInt32LE=function(_,x){return x||checkOffset(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216};Buffer$5.prototype.readUInt32BE=function(_,x){return x||checkOffset(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])};Buffer$5.prototype.readIntLE=function(_,x,E){_=_|0,x=x|0,E||checkOffset(_,x,this.length);for(var S=this[_],C=1,T=0;++T<x&&(C*=256);)S+=this[_+T]*C;return C*=128,S>=C&&(S-=Math.pow(2,8*x)),S};Buffer$5.prototype.readIntBE=function(_,x,E){_=_|0,x=x|0,E||checkOffset(_,x,this.length);for(var S=x,C=1,T=this[_+--S];S>0&&(C*=256);)T+=this[_+--S]*C;return C*=128,T>=C&&(T-=Math.pow(2,8*x)),T};Buffer$5.prototype.readInt8=function(_,x){return x||checkOffset(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]};Buffer$5.prototype.readInt16LE=function(_,x){x||checkOffset(_,2,this.length);var E=this[_]|this[_+1]<<8;return E&32768?E|4294901760:E};Buffer$5.prototype.readInt16BE=function(_,x){x||checkOffset(_,2,this.length);var E=this[_+1]|this[_]<<8;return E&32768?E|4294901760:E};Buffer$5.prototype.readInt32LE=function(_,x){return x||checkOffset(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24};Buffer$5.prototype.readInt32BE=function(_,x){return x||checkOffset(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]};Buffer$5.prototype.readFloatLE=function(_,x){return x||checkOffset(_,4,this.length),read$9(this,_,!0,23,4)};Buffer$5.prototype.readFloatBE=function(_,x){return x||checkOffset(_,4,this.length),read$9(this,_,!1,23,4)};Buffer$5.prototype.readDoubleLE=function(_,x){return x||checkOffset(_,8,this.length),read$9(this,_,!0,52,8)};Buffer$5.prototype.readDoubleBE=function(_,x){return x||checkOffset(_,8,this.length),read$9(this,_,!1,52,8)};function checkInt(n,_,x,E,S,C){if(!internalIsBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>S||_<C)throw new RangeError('"value" argument is out of bounds');if(x+E>n.length)throw new RangeError("Index out of range")}Buffer$5.prototype.writeUIntLE=function(_,x,E,S){if(_=+_,x=x|0,E=E|0,!S){var C=Math.pow(2,8*E)-1;checkInt(this,_,x,E,C,0)}var T=1,A=0;for(this[x]=_&255;++A<E&&(T*=256);)this[x+A]=_/T&255;return x+E};Buffer$5.prototype.writeUIntBE=function(_,x,E,S){if(_=+_,x=x|0,E=E|0,!S){var C=Math.pow(2,8*E)-1;checkInt(this,_,x,E,C,0)}var T=E-1,A=1;for(this[x+T]=_&255;--T>=0&&(A*=256);)this[x+T]=_/A&255;return x+E};Buffer$5.prototype.writeUInt8=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,1,255,0),Buffer$5.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),this[x]=_&255,x+1};function objectWriteUInt16(n,_,x,E){_<0&&(_=65535+_+1);for(var S=0,C=Math.min(n.length-x,2);S<C;++S)n[x+S]=(_&255<<8*(E?S:1-S))>>>(E?S:1-S)*8}Buffer$5.prototype.writeUInt16LE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_&255,this[x+1]=_>>>8):objectWriteUInt16(this,_,x,!0),x+2};Buffer$5.prototype.writeUInt16BE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_>>>8,this[x+1]=_&255):objectWriteUInt16(this,_,x,!1),x+2};function objectWriteUInt32(n,_,x,E){_<0&&(_=4294967295+_+1);for(var S=0,C=Math.min(n.length-x,4);S<C;++S)n[x+S]=_>>>(E?S:3-S)*8&255}Buffer$5.prototype.writeUInt32LE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x+3]=_>>>24,this[x+2]=_>>>16,this[x+1]=_>>>8,this[x]=_&255):objectWriteUInt32(this,_,x,!0),x+4};Buffer$5.prototype.writeUInt32BE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255):objectWriteUInt32(this,_,x,!1),x+4};Buffer$5.prototype.writeIntLE=function(_,x,E,S){if(_=+_,x=x|0,!S){var C=Math.pow(2,8*E-1);checkInt(this,_,x,E,C-1,-C)}var T=0,A=1,B=0;for(this[x]=_&255;++T<E&&(A*=256);)_<0&&B===0&&this[x+T-1]!==0&&(B=1),this[x+T]=(_/A>>0)-B&255;return x+E};Buffer$5.prototype.writeIntBE=function(_,x,E,S){if(_=+_,x=x|0,!S){var C=Math.pow(2,8*E-1);checkInt(this,_,x,E,C-1,-C)}var T=E-1,A=1,B=0;for(this[x+T]=_&255;--T>=0&&(A*=256);)_<0&&B===0&&this[x+T+1]!==0&&(B=1),this[x+T]=(_/A>>0)-B&255;return x+E};Buffer$5.prototype.writeInt8=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,1,127,-128),Buffer$5.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),_<0&&(_=255+_+1),this[x]=_&255,x+1};Buffer$5.prototype.writeInt16LE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_&255,this[x+1]=_>>>8):objectWriteUInt16(this,_,x,!0),x+2};Buffer$5.prototype.writeInt16BE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_>>>8,this[x+1]=_&255):objectWriteUInt16(this,_,x,!1),x+2};Buffer$5.prototype.writeInt32LE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,4,2147483647,-2147483648),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_&255,this[x+1]=_>>>8,this[x+2]=_>>>16,this[x+3]=_>>>24):objectWriteUInt32(this,_,x,!0),x+4};Buffer$5.prototype.writeInt32BE=function(_,x,E){return _=+_,x=x|0,E||checkInt(this,_,x,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),Buffer$5.TYPED_ARRAY_SUPPORT?(this[x]=_>>>24,this[x+1]=_>>>16,this[x+2]=_>>>8,this[x+3]=_&255):objectWriteUInt32(this,_,x,!1),x+4};function checkIEEE754(n,_,x,E,S,C){if(x+E>n.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function writeFloat(n,_,x,E,S){return S||checkIEEE754(n,_,x,4),write$4(n,_,x,E,23,4),x+4}Buffer$5.prototype.writeFloatLE=function(_,x,E){return writeFloat(this,_,x,!0,E)};Buffer$5.prototype.writeFloatBE=function(_,x,E){return writeFloat(this,_,x,!1,E)};function writeDouble(n,_,x,E,S){return S||checkIEEE754(n,_,x,8),write$4(n,_,x,E,52,8),x+8}Buffer$5.prototype.writeDoubleLE=function(_,x,E){return writeDouble(this,_,x,!0,E)};Buffer$5.prototype.writeDoubleBE=function(_,x,E){return writeDouble(this,_,x,!1,E)};Buffer$5.prototype.copy=function(_,x,E,S){if(E||(E=0),!S&&S!==0&&(S=this.length),x>=_.length&&(x=_.length),x||(x=0),S>0&&S<E&&(S=E),S===E||_.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("sourceStart out of bounds");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),_.length-x<S-E&&(S=_.length-x+E);var C=S-E,T;if(this===_&&E<x&&x<S)for(T=C-1;T>=0;--T)_[T+x]=this[T+E];else if(C<1e3||!Buffer$5.TYPED_ARRAY_SUPPORT)for(T=0;T<C;++T)_[T+x]=this[T+E];else Uint8Array.prototype.set.call(_,this.subarray(E,E+C),x);return C};Buffer$5.prototype.fill=function(_,x,E,S){if(typeof _=="string"){if(typeof x=="string"?(S=x,x=0,E=this.length):typeof E=="string"&&(S=E,E=this.length),_.length===1){var C=_.charCodeAt(0);C<256&&(_=C)}if(S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!Buffer$5.isEncoding(S))throw new TypeError("Unknown encoding: "+S)}else typeof _=="number"&&(_=_&255);if(x<0||this.length<x||this.length<E)throw new RangeError("Out of range index");if(E<=x)return this;x=x>>>0,E=E===void 0?this.length:E>>>0,_||(_=0);var T;if(typeof _=="number")for(T=x;T<E;++T)this[T]=_;else{var A=internalIsBuffer(_)?_:utf8ToBytes$2(new Buffer$5(_,S).toString()),B=A.length;for(T=0;T<E-x;++T)this[T+x]=A[T%B]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(n){if(n=stringtrim(n).replace(INVALID_BASE64_RE,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function stringtrim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function toHex$3(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes$2(n,_){_=_||1/0;for(var x,E=n.length,S=null,C=[],T=0;T<E;++T){if(x=n.charCodeAt(T),x>55295&&x<57344){if(!S){if(x>56319){(_-=3)>-1&&C.push(239,191,189);continue}else if(T+1===E){(_-=3)>-1&&C.push(239,191,189);continue}S=x;continue}if(x<56320){(_-=3)>-1&&C.push(239,191,189),S=x;continue}x=(S-55296<<10|x-56320)+65536}else S&&(_-=3)>-1&&C.push(239,191,189);if(S=null,x<128){if((_-=1)<0)break;C.push(x)}else if(x<2048){if((_-=2)<0)break;C.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;C.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;C.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return C}function asciiToBytes(n){for(var _=[],x=0;x<n.length;++x)_.push(n.charCodeAt(x)&255);return _}function utf16leToBytes(n,_){for(var x,E,S,C=[],T=0;T<n.length&&!((_-=2)<0);++T)x=n.charCodeAt(T),E=x>>8,S=x%256,C.push(S),C.push(E);return C}function base64ToBytes$1(n){return toByteArray(base64clean(n))}function blitBuffer(n,_,x,E){for(var S=0;S<E&&!(S+x>=_.length||S>=n.length);++S)_[S+x]=n[S];return S}function isnan(n){return n!==n}function isBuffer$7(n){return n!=null&&(!!n._isBuffer||isFastBuffer(n)||isSlowBuffer(n))}function isFastBuffer(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function isSlowBuffer(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&isFastBuffer(n.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(n){if(cachedSetTimeout===setTimeout)return setTimeout(n,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(n,0);try{return cachedSetTimeout(n,0)}catch{try{return cachedSetTimeout.call(null,n,0)}catch{return cachedSetTimeout.call(this,n,0)}}}function runClearTimeout(n){if(cachedClearTimeout===clearTimeout)return clearTimeout(n);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(n);try{return cachedClearTimeout(n)}catch{try{return cachedClearTimeout.call(null,n)}catch{return cachedClearTimeout.call(this,n)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var n=runTimeout(cleanUpNextTick);draining=!0;for(var _=queue.length;_;){for(currentQueue=queue,queue=[];++queueIndex<_;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,_=queue.length}currentQueue=null,draining=!1,runClearTimeout(n)}}function nextTick$1(n){var _=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)_[x-1]=arguments[x];queue.push(new Item(n,_)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(n,_){this.fun=n,this.array=_}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title$1="browser",platform$2="browser",browser$f=!0,env={},argv=[],version$l="",versions={},release$1={},config={};function noop$8(){}var on=noop$8,addListener=noop$8,once=noop$8,off=noop$8,removeListener=noop$8,removeAllListeners=noop$8,emit=noop$8;function binding(n){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(n){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(n){var _=performanceNow.call(performance$1)*.001,x=Math.floor(_),E=Math.floor(_%1*1e9);return n&&(x=x-n[0],E=E-n[1],E<0&&(x--,E+=1e9)),[x,E]}var startTime=new Date;function uptime$1(){var n=new Date,_=n-startTime;return _/1e3}var browser$1$1={nextTick:nextTick$1,title:title$1,browser:browser$f,env,argv,version:version$l,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform:platform$2,release:release$1,config,uptime:uptime$1};function commonjsRequire$1(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};(function(n,_){(function(x){n.exports=x()})(function(){return function x(E,S,C){function T(I,M){if(!S[I]){if(!E[I]){var O=typeof commonjsRequire$1=="function"&&commonjsRequire$1;if(!M&&O)return O(I,!0);if(A)return A(I,!0);var D=new Error("Cannot find module '"+I+"'");throw D.code="MODULE_NOT_FOUND",D}var L=S[I]={exports:{}};E[I][0].call(L.exports,function(V){var U=E[I][1][V];return T(U||V)},L,L.exports,x,E,S,C)}return S[I].exports}for(var A=typeof commonjsRequire$1=="function"&&commonjsRequire$1,B=0;B<C.length;B++)T(C[B]);return T}({1:[function(x,E,S){var C=x("./utils"),T=x("./support"),A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";S.encode=function(B){for(var I,M,O,D,L,V,U,q=[],H=0,W=B.length,Q=W,re=C.getTypeOf(B)!=="string";H<B.length;)Q=W-H,O=re?(I=B[H++],M=H<W?B[H++]:0,H<W?B[H++]:0):(I=B.charCodeAt(H++),M=H<W?B.charCodeAt(H++):0,H<W?B.charCodeAt(H++):0),D=I>>2,L=(3&I)<<4|M>>4,V=1<Q?(15&M)<<2|O>>6:64,U=2<Q?63&O:64,q.push(A.charAt(D)+A.charAt(L)+A.charAt(V)+A.charAt(U));return q.join("")},S.decode=function(B){var I,M,O,D,L,V,U=0,q=0,H="data:";if(B.substr(0,H.length)===H)throw new Error("Invalid base64 input, it looks like a data url.");var W,Q=3*(B=B.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(B.charAt(B.length-1)===A.charAt(64)&&Q--,B.charAt(B.length-2)===A.charAt(64)&&Q--,Q%1!=0)throw new Error("Invalid base64 input, bad content length.");for(W=T.uint8array?new Uint8Array(0|Q):new Array(0|Q);U<B.length;)I=A.indexOf(B.charAt(U++))<<2|(D=A.indexOf(B.charAt(U++)))>>4,M=(15&D)<<4|(L=A.indexOf(B.charAt(U++)))>>2,O=(3&L)<<6|(V=A.indexOf(B.charAt(U++))),W[q++]=I,L!==64&&(W[q++]=M),V!==64&&(W[q++]=O);return W}},{"./support":30,"./utils":32}],2:[function(x,E,S){var C=x("./external"),T=x("./stream/DataWorker"),A=x("./stream/Crc32Probe"),B=x("./stream/DataLengthProbe");function I(M,O,D,L,V){this.compressedSize=M,this.uncompressedSize=O,this.crc32=D,this.compression=L,this.compressedContent=V}I.prototype={getContentWorker:function(){var M=new T(C.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new B("data_length")),O=this;return M.on("end",function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),M},getCompressedWorker:function(){return new T(C.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},I.createWorkerFrom=function(M,O,D){return M.pipe(new A).pipe(new B("uncompressedSize")).pipe(O.compressWorker(D)).pipe(new B("compressedSize")).withStreamInfo("compression",O)},E.exports=I},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(x,E,S){var C=x("./stream/GenericWorker");S.STORE={magic:"\0\0",compressWorker:function(){return new C("STORE compression")},uncompressWorker:function(){return new C("STORE decompression")}},S.DEFLATE=x("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(x,E,S){var C=x("./utils"),T=function(){for(var A,B=[],I=0;I<256;I++){A=I;for(var M=0;M<8;M++)A=1&A?3988292384^A>>>1:A>>>1;B[I]=A}return B}();E.exports=function(A,B){return A!==void 0&&A.length?C.getTypeOf(A)!=="string"?function(I,M,O,D){var L=T,V=D+O;I^=-1;for(var U=D;U<V;U++)I=I>>>8^L[255&(I^M[U])];return-1^I}(0|B,A,A.length,0):function(I,M,O,D){var L=T,V=D+O;I^=-1;for(var U=D;U<V;U++)I=I>>>8^L[255&(I^M.charCodeAt(U))];return-1^I}(0|B,A,A.length,0):0}},{"./utils":32}],5:[function(x,E,S){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null},{}],6:[function(x,E,S){var C=null;C=typeof Promise<"u"?Promise:x("lie"),E.exports={Promise:C}},{lie:37}],7:[function(x,E,S){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",T=x("pako"),A=x("./utils"),B=x("./stream/GenericWorker"),I=C?"uint8array":"array";function M(O,D){B.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=D,this.meta={}}S.magic="\b\0",A.inherits(M,B),M.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(A.transformTo(I,O.data),!1)},M.prototype.flush=function(){B.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},M.prototype.cleanUp=function(){B.prototype.cleanUp.call(this),this._pako=null},M.prototype._createPako=function(){this._pako=new T[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(D){O.push({data:D,meta:O.meta})}},S.compressWorker=function(O){return new M("Deflate",O)},S.uncompressWorker=function(){return new M("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(x,E,S){function C(L,V){var U,q="";for(U=0;U<V;U++)q+=String.fromCharCode(255&L),L>>>=8;return q}function T(L,V,U,q,H,W){var Q,re,ce=L.file,ne=L.compression,Y=W!==I.utf8encode,fe=A.transformTo("string",W(ce.name)),ge=A.transformTo("string",I.utf8encode(ce.name)),$e=ce.comment,_e=A.transformTo("string",W($e)),ae=A.transformTo("string",I.utf8encode($e)),X=ge.length!==ce.name.length,F=ae.length!==$e.length,z="",J="",te="",se=ce.dir,oe=ce.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};V&&!U||(ie.crc32=L.crc32,ie.compressedSize=L.compressedSize,ie.uncompressedSize=L.uncompressedSize);var G=0;V&&(G|=8),Y||!X&&!F||(G|=2048);var j=0,ee=0;se&&(j|=16),H==="UNIX"?(ee=798,j|=function(he,Se){var we=he;return he||(we=Se?16893:33204),(65535&we)<<16}(ce.unixPermissions,se)):(ee=20,j|=function(he){return 63&(he||0)}(ce.dosPermissions)),Q=oe.getUTCHours(),Q<<=6,Q|=oe.getUTCMinutes(),Q<<=5,Q|=oe.getUTCSeconds()/2,re=oe.getUTCFullYear()-1980,re<<=4,re|=oe.getUTCMonth()+1,re<<=5,re|=oe.getUTCDate(),X&&(J=C(1,1)+C(M(fe),4)+ge,z+="up"+C(J.length,2)+J),F&&(te=C(1,1)+C(M(_e),4)+ae,z+="uc"+C(te.length,2)+te);var pe="";return pe+=`
\0`,pe+=C(G,2),pe+=ne.magic,pe+=C(Q,2),pe+=C(re,2),pe+=C(ie.crc32,4),pe+=C(ie.compressedSize,4),pe+=C(ie.uncompressedSize,4),pe+=C(fe.length,2),pe+=C(z.length,2),{fileRecord:O.LOCAL_FILE_HEADER+pe+fe+z,dirRecord:O.CENTRAL_FILE_HEADER+C(ee,2)+pe+C(_e.length,2)+"\0\0\0\0"+C(j,4)+C(q,4)+fe+z+_e}}var A=x("../utils"),B=x("../stream/GenericWorker"),I=x("../utf8"),M=x("../crc32"),O=x("../signature");function D(L,V,U,q){B.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=V,this.zipPlatform=U,this.encodeFileName=q,this.streamFiles=L,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}A.inherits(D,B),D.prototype.push=function(L){var V=L.meta.percent||0,U=this.entriesCount,q=this._sources.length;this.accumulate?this.contentBuffer.push(L):(this.bytesWritten+=L.data.length,B.prototype.push.call(this,{data:L.data,meta:{currentFile:this.currentFile,percent:U?(V+100*(U-q-1))/U:100}}))},D.prototype.openedSource=function(L){this.currentSourceOffset=this.bytesWritten,this.currentFile=L.file.name;var V=this.streamFiles&&!L.file.dir;if(V){var U=T(L,V,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},D.prototype.closedSource=function(L){this.accumulate=!1;var V=this.streamFiles&&!L.file.dir,U=T(L,V,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),V)this.push({data:function(q){return O.DATA_DESCRIPTOR+C(q.crc32,4)+C(q.compressedSize,4)+C(q.uncompressedSize,4)}(L),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},D.prototype.flush=function(){for(var L=this.bytesWritten,V=0;V<this.dirRecords.length;V++)this.push({data:this.dirRecords[V],meta:{percent:100}});var U=this.bytesWritten-L,q=function(H,W,Q,re,ce){var ne=A.transformTo("string",ce(re));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+C(H,2)+C(H,2)+C(W,4)+C(Q,4)+C(ne.length,2)+ne}(this.dirRecords.length,U,L,this.zipComment,this.encodeFileName);this.push({data:q,meta:{percent:100}})},D.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},D.prototype.registerPrevious=function(L){this._sources.push(L);var V=this;return L.on("data",function(U){V.processChunk(U)}),L.on("end",function(){V.closedSource(V.previous.streamInfo),V._sources.length?V.prepareNextSource():V.end()}),L.on("error",function(U){V.error(U)}),this},D.prototype.resume=function(){return!!B.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},D.prototype.error=function(L){var V=this._sources;if(!B.prototype.error.call(this,L))return!1;for(var U=0;U<V.length;U++)try{V[U].error(L)}catch{}return!0},D.prototype.lock=function(){B.prototype.lock.call(this);for(var L=this._sources,V=0;V<L.length;V++)L[V].lock()},E.exports=D},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(x,E,S){var C=x("../compressions"),T=x("./ZipFileWorker");S.generateWorker=function(A,B,I){var M=new T(B.streamFiles,I,B.platform,B.encodeFileName),O=0;try{A.forEach(function(D,L){O++;var V=function(W,Q){var re=W||Q,ce=C[re];if(!ce)throw new Error(re+" is not a valid compression method !");return ce}(L.options.compression,B.compression),U=L.options.compressionOptions||B.compressionOptions||{},q=L.dir,H=L.date;L._compressWorker(V,U).withStreamInfo("file",{name:D,dir:q,date:H,comment:L.comment||"",unixPermissions:L.unixPermissions,dosPermissions:L.dosPermissions}).pipe(M)}),M.entriesCount=O}catch(D){M.error(D)}return M}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(x,E,S){function C(){if(!(this instanceof C))return new C;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var T=new C;for(var A in this)typeof this[A]!="function"&&(T[A]=this[A]);return T}}(C.prototype=x("./object")).loadAsync=x("./load"),C.support=x("./support"),C.defaults=x("./defaults"),C.version="3.10.1",C.loadAsync=function(T,A){return new C().loadAsync(T,A)},C.external=x("./external"),E.exports=C},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(x,E,S){var C=x("./utils"),T=x("./external"),A=x("./utf8"),B=x("./zipEntries"),I=x("./stream/Crc32Probe"),M=x("./nodejsUtils");function O(D){return new T.Promise(function(L,V){var U=D.decompressed.getContentWorker().pipe(new I);U.on("error",function(q){V(q)}).on("end",function(){U.streamInfo.crc32!==D.decompressed.crc32?V(new Error("Corrupted zip : CRC32 mismatch")):L()}).resume()})}E.exports=function(D,L){var V=this;return L=C.extend(L||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:A.utf8decode}),M.isNode&&M.isStream(D)?T.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):C.prepareContent("the loaded zip file",D,!0,L.optimizedBinaryString,L.base64).then(function(U){var q=new B(L);return q.load(U),q}).then(function(U){var q=[T.Promise.resolve(U)],H=U.files;if(L.checkCRC32)for(var W=0;W<H.length;W++)q.push(O(H[W]));return T.Promise.all(q)}).then(function(U){for(var q=U.shift(),H=q.files,W=0;W<H.length;W++){var Q=H[W],re=Q.fileNameStr,ce=C.resolve(Q.fileNameStr);V.file(ce,Q.decompressed,{binary:!0,optimizedBinaryString:!0,date:Q.date,dir:Q.dir,comment:Q.fileCommentStr.length?Q.fileCommentStr:null,unixPermissions:Q.unixPermissions,dosPermissions:Q.dosPermissions,createFolders:L.createFolders}),Q.dir||(V.file(ce).unsafeOriginalName=re)}return q.zipComment.length&&(V.comment=q.zipComment),V})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(x,E,S){var C=x("../utils"),T=x("../stream/GenericWorker");function A(B,I){T.call(this,"Nodejs stream input adapter for "+B),this._upstreamEnded=!1,this._bindStream(I)}C.inherits(A,T),A.prototype._bindStream=function(B){var I=this;(this._stream=B).pause(),B.on("data",function(M){I.push({data:M,meta:{percent:0}})}).on("error",function(M){I.isPaused?this.generatedError=M:I.error(M)}).on("end",function(){I.isPaused?I._upstreamEnded=!0:I.end()})},A.prototype.pause=function(){return!!T.prototype.pause.call(this)&&(this._stream.pause(),!0)},A.prototype.resume=function(){return!!T.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},E.exports=A},{"../stream/GenericWorker":28,"../utils":32}],13:[function(x,E,S){var C=x("readable-stream").Readable;function T(A,B,I){C.call(this,B),this._helper=A;var M=this;A.on("data",function(O,D){M.push(O)||M._helper.pause(),I&&I(D)}).on("error",function(O){M.emit("error",O)}).on("end",function(){M.push(null)})}x("../utils").inherits(T,C),T.prototype._read=function(){this._helper.resume()},E.exports=T},{"../utils":32,"readable-stream":16}],14:[function(x,E,S){E.exports={isNode:typeof Buffer$5<"u",newBufferFrom:function(C,T){if(Buffer$5.from&&Buffer$5.from!==Uint8Array.from)return Buffer$5.from(C,T);if(typeof C=="number")throw new Error('The "data" argument must not be a number');return new Buffer$5(C,T)},allocBuffer:function(C){if(Buffer$5.alloc)return Buffer$5.alloc(C);var T=new Buffer$5(C);return T.fill(0),T},isBuffer:function(C){return Buffer$5.isBuffer(C)},isStream:function(C){return C&&typeof C.on=="function"&&typeof C.pause=="function"&&typeof C.resume=="function"}}},{}],15:[function(x,E,S){function C(ce,ne,Y){var fe,ge=A.getTypeOf(ne),$e=A.extend(Y||{},M);$e.date=$e.date||new Date,$e.compression!==null&&($e.compression=$e.compression.toUpperCase()),typeof $e.unixPermissions=="string"&&($e.unixPermissions=parseInt($e.unixPermissions,8)),$e.unixPermissions&&16384&$e.unixPermissions&&($e.dir=!0),$e.dosPermissions&&16&$e.dosPermissions&&($e.dir=!0),$e.dir&&(ce=H(ce)),$e.createFolders&&(fe=q(ce))&&W.call(this,fe,!0);var _e=ge==="string"&&$e.binary===!1&&$e.base64===!1;Y&&Y.binary!==void 0||($e.binary=!_e),(ne instanceof O&&ne.uncompressedSize===0||$e.dir||!ne||ne.length===0)&&($e.base64=!1,$e.binary=!0,ne="",$e.compression="STORE",ge="string");var ae=null;ae=ne instanceof O||ne instanceof B?ne:V.isNode&&V.isStream(ne)?new U(ce,ne):A.prepareContent(ce,ne,$e.binary,$e.optimizedBinaryString,$e.base64);var X=new D(ce,ae,$e);this.files[ce]=X}var T=x("./utf8"),A=x("./utils"),B=x("./stream/GenericWorker"),I=x("./stream/StreamHelper"),M=x("./defaults"),O=x("./compressedObject"),D=x("./zipObject"),L=x("./generate"),V=x("./nodejsUtils"),U=x("./nodejs/NodejsStreamInputAdapter"),q=function(ce){ce.slice(-1)==="/"&&(ce=ce.substring(0,ce.length-1));var ne=ce.lastIndexOf("/");return 0<ne?ce.substring(0,ne):""},H=function(ce){return ce.slice(-1)!=="/"&&(ce+="/"),ce},W=function(ce,ne){return ne=ne!==void 0?ne:M.createFolders,ce=H(ce),this.files[ce]||C.call(this,ce,null,{dir:!0,createFolders:ne}),this.files[ce]};function Q(ce){return Object.prototype.toString.call(ce)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ce){var ne,Y,fe;for(ne in this.files)fe=this.files[ne],(Y=ne.slice(this.root.length,ne.length))&&ne.slice(0,this.root.length)===this.root&&ce(Y,fe)},filter:function(ce){var ne=[];return this.forEach(function(Y,fe){ce(Y,fe)&&ne.push(fe)}),ne},file:function(ce,ne,Y){if(arguments.length!==1)return ce=this.root+ce,C.call(this,ce,ne,Y),this;if(Q(ce)){var fe=ce;return this.filter(function($e,_e){return!_e.dir&&fe.test($e)})}var ge=this.files[this.root+ce];return ge&&!ge.dir?ge:null},folder:function(ce){if(!ce)return this;if(Q(ce))return this.filter(function(ge,$e){return $e.dir&&ce.test(ge)});var ne=this.root+ce,Y=W.call(this,ne),fe=this.clone();return fe.root=Y.name,fe},remove:function(ce){ce=this.root+ce;var ne=this.files[ce];if(ne||(ce.slice(-1)!=="/"&&(ce+="/"),ne=this.files[ce]),ne&&!ne.dir)delete this.files[ce];else for(var Y=this.filter(function(ge,$e){return $e.name.slice(0,ce.length)===ce}),fe=0;fe<Y.length;fe++)delete this.files[Y[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ce){var ne,Y={};try{if((Y=A.extend(ce||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:T.utf8encode})).type=Y.type.toLowerCase(),Y.compression=Y.compression.toUpperCase(),Y.type==="binarystring"&&(Y.type="string"),!Y.type)throw new Error("No output type specified.");A.checkSupport(Y.type),Y.platform!=="darwin"&&Y.platform!=="freebsd"&&Y.platform!=="linux"&&Y.platform!=="sunos"||(Y.platform="UNIX"),Y.platform==="win32"&&(Y.platform="DOS");var fe=Y.comment||this.comment||"";ne=L.generateWorker(this,Y,fe)}catch(ge){(ne=new B("error")).error(ge)}return new I(ne,Y.type||"string",Y.mimeType)},generateAsync:function(ce,ne){return this.generateInternalStream(ce).accumulate(ne)},generateNodeStream:function(ce,ne){return(ce=ce||{}).type||(ce.type="nodebuffer"),this.generateInternalStream(ce).toNodejsStream(ne)}};E.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(x,E,S){E.exports=x("stream")},{stream:void 0}],17:[function(x,E,S){var C=x("./DataReader");function T(A){C.call(this,A);for(var B=0;B<this.data.length;B++)A[B]=255&A[B]}x("../utils").inherits(T,C),T.prototype.byteAt=function(A){return this.data[this.zero+A]},T.prototype.lastIndexOfSignature=function(A){for(var B=A.charCodeAt(0),I=A.charCodeAt(1),M=A.charCodeAt(2),O=A.charCodeAt(3),D=this.length-4;0<=D;--D)if(this.data[D]===B&&this.data[D+1]===I&&this.data[D+2]===M&&this.data[D+3]===O)return D-this.zero;return-1},T.prototype.readAndCheckSignature=function(A){var B=A.charCodeAt(0),I=A.charCodeAt(1),M=A.charCodeAt(2),O=A.charCodeAt(3),D=this.readData(4);return B===D[0]&&I===D[1]&&M===D[2]&&O===D[3]},T.prototype.readData=function(A){if(this.checkOffset(A),A===0)return[];var B=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,B},E.exports=T},{"../utils":32,"./DataReader":18}],18:[function(x,E,S){var C=x("../utils");function T(A){this.data=A,this.length=A.length,this.index=0,this.zero=0}T.prototype={checkOffset:function(A){this.checkIndex(this.index+A)},checkIndex:function(A){if(this.length<this.zero+A||A<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+A+"). Corrupted zip ?")},setIndex:function(A){this.checkIndex(A),this.index=A},skip:function(A){this.setIndex(this.index+A)},byteAt:function(){},readInt:function(A){var B,I=0;for(this.checkOffset(A),B=this.index+A-1;B>=this.index;B--)I=(I<<8)+this.byteAt(B);return this.index+=A,I},readString:function(A){return C.transformTo("string",this.readData(A))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var A=this.readInt(4);return new Date(Date.UTC(1980+(A>>25&127),(A>>21&15)-1,A>>16&31,A>>11&31,A>>5&63,(31&A)<<1))}},E.exports=T},{"../utils":32}],19:[function(x,E,S){var C=x("./Uint8ArrayReader");function T(A){C.call(this,A)}x("../utils").inherits(T,C),T.prototype.readData=function(A){this.checkOffset(A);var B=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,B},E.exports=T},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(x,E,S){var C=x("./DataReader");function T(A){C.call(this,A)}x("../utils").inherits(T,C),T.prototype.byteAt=function(A){return this.data.charCodeAt(this.zero+A)},T.prototype.lastIndexOfSignature=function(A){return this.data.lastIndexOf(A)-this.zero},T.prototype.readAndCheckSignature=function(A){return A===this.readData(4)},T.prototype.readData=function(A){this.checkOffset(A);var B=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,B},E.exports=T},{"../utils":32,"./DataReader":18}],21:[function(x,E,S){var C=x("./ArrayReader");function T(A){C.call(this,A)}x("../utils").inherits(T,C),T.prototype.readData=function(A){if(this.checkOffset(A),A===0)return new Uint8Array(0);var B=this.data.subarray(this.zero+this.index,this.zero+this.index+A);return this.index+=A,B},E.exports=T},{"../utils":32,"./ArrayReader":17}],22:[function(x,E,S){var C=x("../utils"),T=x("../support"),A=x("./ArrayReader"),B=x("./StringReader"),I=x("./NodeBufferReader"),M=x("./Uint8ArrayReader");E.exports=function(O){var D=C.getTypeOf(O);return C.checkSupport(D),D!=="string"||T.uint8array?D==="nodebuffer"?new I(O):T.uint8array?new M(C.transformTo("uint8array",O)):new A(C.transformTo("array",O)):new B(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(x,E,S){S.LOCAL_FILE_HEADER="PK",S.CENTRAL_FILE_HEADER="PK",S.CENTRAL_DIRECTORY_END="PK",S.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",S.ZIP64_CENTRAL_DIRECTORY_END="PK",S.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(x,E,S){var C=x("./GenericWorker"),T=x("../utils");function A(B){C.call(this,"ConvertWorker to "+B),this.destType=B}T.inherits(A,C),A.prototype.processChunk=function(B){this.push({data:T.transformTo(this.destType,B.data),meta:B.meta})},E.exports=A},{"../utils":32,"./GenericWorker":28}],25:[function(x,E,S){var C=x("./GenericWorker"),T=x("../crc32");function A(){C.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}x("../utils").inherits(A,C),A.prototype.processChunk=function(B){this.streamInfo.crc32=T(B.data,this.streamInfo.crc32||0),this.push(B)},E.exports=A},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(x,E,S){var C=x("../utils"),T=x("./GenericWorker");function A(B){T.call(this,"DataLengthProbe for "+B),this.propName=B,this.withStreamInfo(B,0)}C.inherits(A,T),A.prototype.processChunk=function(B){if(B){var I=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=I+B.data.length}T.prototype.processChunk.call(this,B)},E.exports=A},{"../utils":32,"./GenericWorker":28}],27:[function(x,E,S){var C=x("../utils"),T=x("./GenericWorker");function A(B){T.call(this,"DataWorker");var I=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,B.then(function(M){I.dataIsReady=!0,I.data=M,I.max=M&&M.length||0,I.type=C.getTypeOf(M),I.isPaused||I._tickAndRepeat()},function(M){I.error(M)})}C.inherits(A,T),A.prototype.cleanUp=function(){T.prototype.cleanUp.call(this),this.data=null},A.prototype.resume=function(){return!!T.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C.delay(this._tickAndRepeat,[],this)),!0)},A.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},A.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var B=null,I=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":B=this.data.substring(this.index,I);break;case"uint8array":B=this.data.subarray(this.index,I);break;case"array":case"nodebuffer":B=this.data.slice(this.index,I)}return this.index=I,this.push({data:B,meta:{percent:this.max?this.index/this.max*100:0}})},E.exports=A},{"../utils":32,"./GenericWorker":28}],28:[function(x,E,S){function C(T){this.name=T||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}C.prototype={push:function(T){this.emit("data",T)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(T){this.emit("error",T)}return!0},error:function(T){return!this.isFinished&&(this.isPaused?this.generatedError=T:(this.isFinished=!0,this.emit("error",T),this.previous&&this.previous.error(T),this.cleanUp()),!0)},on:function(T,A){return this._listeners[T].push(A),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(T,A){if(this._listeners[T])for(var B=0;B<this._listeners[T].length;B++)this._listeners[T][B].call(this,A)},pipe:function(T){return T.registerPrevious(this)},registerPrevious:function(T){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=T.streamInfo,this.mergeStreamInfo(),this.previous=T;var A=this;return T.on("data",function(B){A.processChunk(B)}),T.on("end",function(){A.end()}),T.on("error",function(B){A.error(B)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var T=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),T=!0),this.previous&&this.previous.resume(),!T},flush:function(){},processChunk:function(T){this.push(T)},withStreamInfo:function(T,A){return this.extraStreamInfo[T]=A,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var T in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,T)&&(this.streamInfo[T]=this.extraStreamInfo[T])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var T="Worker "+this.name;return this.previous?this.previous+" -> "+T:T}},E.exports=C},{}],29:[function(x,E,S){var C=x("../utils"),T=x("./ConvertWorker"),A=x("./GenericWorker"),B=x("../base64"),I=x("../support"),M=x("../external"),O=null;if(I.nodestream)try{O=x("../nodejs/NodejsStreamOutputAdapter")}catch{}function D(V,U){return new M.Promise(function(q,H){var W=[],Q=V._internalType,re=V._outputType,ce=V._mimeType;V.on("data",function(ne,Y){W.push(ne),U&&U(Y)}).on("error",function(ne){W=[],H(ne)}).on("end",function(){try{var ne=function(Y,fe,ge){switch(Y){case"blob":return C.newBlob(C.transformTo("arraybuffer",fe),ge);case"base64":return B.encode(fe);default:return C.transformTo(Y,fe)}}(re,function(Y,fe){var ge,$e=0,_e=null,ae=0;for(ge=0;ge<fe.length;ge++)ae+=fe[ge].length;switch(Y){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(_e=new Uint8Array(ae),ge=0;ge<fe.length;ge++)_e.set(fe[ge],$e),$e+=fe[ge].length;return _e;case"nodebuffer":return Buffer$5.concat(fe);default:throw new Error("concat : unsupported type '"+Y+"'")}}(Q,W),ce);q(ne)}catch(Y){H(Y)}W=[]}).resume()})}function L(V,U,q){var H=U;switch(U){case"blob":case"arraybuffer":H="uint8array";break;case"base64":H="string"}try{this._internalType=H,this._outputType=U,this._mimeType=q,C.checkSupport(H),this._worker=V.pipe(new T(H)),V.lock()}catch(W){this._worker=new A("error"),this._worker.error(W)}}L.prototype={accumulate:function(V){return D(this,V)},on:function(V,U){var q=this;return V==="data"?this._worker.on(V,function(H){U.call(q,H.data,H.meta)}):this._worker.on(V,function(){C.delay(U,arguments,q)}),this},resume:function(){return C.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(V){if(C.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},V)}},E.exports=L},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(x,E,S){if(S.base64=!0,S.array=!0,S.string=!0,S.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",S.nodebuffer=typeof Buffer$5<"u",S.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")S.blob=!1;else{var C=new ArrayBuffer(0);try{S.blob=new Blob([C],{type:"application/zip"}).size===0}catch{try{var T=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);T.append(C),S.blob=T.getBlob("application/zip").size===0}catch{S.blob=!1}}}try{S.nodestream=!!x("readable-stream").Readable}catch{S.nodestream=!1}},{"readable-stream":16}],31:[function(x,E,S){for(var C=x("./utils"),T=x("./support"),A=x("./nodejsUtils"),B=x("./stream/GenericWorker"),I=new Array(256),M=0;M<256;M++)I[M]=252<=M?6:248<=M?5:240<=M?4:224<=M?3:192<=M?2:1;I[254]=I[254]=1;function O(){B.call(this,"utf-8 decode"),this.leftOver=null}function D(){B.call(this,"utf-8 encode")}S.utf8encode=function(L){return T.nodebuffer?A.newBufferFrom(L,"utf-8"):function(V){var U,q,H,W,Q,re=V.length,ce=0;for(W=0;W<re;W++)(64512&(q=V.charCodeAt(W)))==55296&&W+1<re&&(64512&(H=V.charCodeAt(W+1)))==56320&&(q=65536+(q-55296<<10)+(H-56320),W++),ce+=q<128?1:q<2048?2:q<65536?3:4;for(U=T.uint8array?new Uint8Array(ce):new Array(ce),W=Q=0;Q<ce;W++)(64512&(q=V.charCodeAt(W)))==55296&&W+1<re&&(64512&(H=V.charCodeAt(W+1)))==56320&&(q=65536+(q-55296<<10)+(H-56320),W++),q<128?U[Q++]=q:(q<2048?U[Q++]=192|q>>>6:(q<65536?U[Q++]=224|q>>>12:(U[Q++]=240|q>>>18,U[Q++]=128|q>>>12&63),U[Q++]=128|q>>>6&63),U[Q++]=128|63&q);return U}(L)},S.utf8decode=function(L){return T.nodebuffer?C.transformTo("nodebuffer",L).toString("utf-8"):function(V){var U,q,H,W,Q=V.length,re=new Array(2*Q);for(U=q=0;U<Q;)if((H=V[U++])<128)re[q++]=H;else if(4<(W=I[H]))re[q++]=65533,U+=W-1;else{for(H&=W===2?31:W===3?15:7;1<W&&U<Q;)H=H<<6|63&V[U++],W--;1<W?re[q++]=65533:H<65536?re[q++]=H:(H-=65536,re[q++]=55296|H>>10&1023,re[q++]=56320|1023&H)}return re.length!==q&&(re.subarray?re=re.subarray(0,q):re.length=q),C.applyFromCharCode(re)}(L=C.transformTo(T.uint8array?"uint8array":"array",L))},C.inherits(O,B),O.prototype.processChunk=function(L){var V=C.transformTo(T.uint8array?"uint8array":"array",L.data);if(this.leftOver&&this.leftOver.length){if(T.uint8array){var U=V;(V=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),V.set(U,this.leftOver.length)}else V=this.leftOver.concat(V);this.leftOver=null}var q=function(W,Q){var re;for((Q=Q||W.length)>W.length&&(Q=W.length),re=Q-1;0<=re&&(192&W[re])==128;)re--;return re<0||re===0?Q:re+I[W[re]]>Q?re:Q}(V),H=V;q!==V.length&&(T.uint8array?(H=V.subarray(0,q),this.leftOver=V.subarray(q,V.length)):(H=V.slice(0,q),this.leftOver=V.slice(q,V.length))),this.push({data:S.utf8decode(H),meta:L.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:S.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},S.Utf8DecodeWorker=O,C.inherits(D,B),D.prototype.processChunk=function(L){this.push({data:S.utf8encode(L.data),meta:L.meta})},S.Utf8EncodeWorker=D},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(x,E,S){var C=x("./support"),T=x("./base64"),A=x("./nodejsUtils"),B=x("./external");function I(U){return U}function M(U,q){for(var H=0;H<U.length;++H)q[H]=255&U.charCodeAt(H);return q}x("setimmediate"),S.newBlob=function(U,q){S.checkSupport("blob");try{return new Blob([U],{type:q})}catch{try{var H=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return H.append(U),H.getBlob(q)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(U,q,H){var W=[],Q=0,re=U.length;if(re<=H)return String.fromCharCode.apply(null,U);for(;Q<re;)q==="array"||q==="nodebuffer"?W.push(String.fromCharCode.apply(null,U.slice(Q,Math.min(Q+H,re)))):W.push(String.fromCharCode.apply(null,U.subarray(Q,Math.min(Q+H,re)))),Q+=H;return W.join("")},stringifyByChar:function(U){for(var q="",H=0;H<U.length;H++)q+=String.fromCharCode(U[H]);return q},applyCanBeUsed:{uint8array:function(){try{return C.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return C.nodebuffer&&String.fromCharCode.apply(null,A.allocBuffer(1)).length===1}catch{return!1}}()}};function D(U){var q=65536,H=S.getTypeOf(U),W=!0;if(H==="uint8array"?W=O.applyCanBeUsed.uint8array:H==="nodebuffer"&&(W=O.applyCanBeUsed.nodebuffer),W)for(;1<q;)try{return O.stringifyByChunk(U,H,q)}catch{q=Math.floor(q/2)}return O.stringifyByChar(U)}function L(U,q){for(var H=0;H<U.length;H++)q[H]=U[H];return q}S.applyFromCharCode=D;var V={};V.string={string:I,array:function(U){return M(U,new Array(U.length))},arraybuffer:function(U){return V.string.uint8array(U).buffer},uint8array:function(U){return M(U,new Uint8Array(U.length))},nodebuffer:function(U){return M(U,A.allocBuffer(U.length))}},V.array={string:D,array:I,arraybuffer:function(U){return new Uint8Array(U).buffer},uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return A.newBufferFrom(U)}},V.arraybuffer={string:function(U){return D(new Uint8Array(U))},array:function(U){return L(new Uint8Array(U),new Array(U.byteLength))},arraybuffer:I,uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return A.newBufferFrom(new Uint8Array(U))}},V.uint8array={string:D,array:function(U){return L(U,new Array(U.length))},arraybuffer:function(U){return U.buffer},uint8array:I,nodebuffer:function(U){return A.newBufferFrom(U)}},V.nodebuffer={string:D,array:function(U){return L(U,new Array(U.length))},arraybuffer:function(U){return V.nodebuffer.uint8array(U).buffer},uint8array:function(U){return L(U,new Uint8Array(U.length))},nodebuffer:I},S.transformTo=function(U,q){if(q=q||"",!U)return q;S.checkSupport(U);var H=S.getTypeOf(q);return V[H][U](q)},S.resolve=function(U){for(var q=U.split("/"),H=[],W=0;W<q.length;W++){var Q=q[W];Q==="."||Q===""&&W!==0&&W!==q.length-1||(Q===".."?H.pop():H.push(Q))}return H.join("/")},S.getTypeOf=function(U){return typeof U=="string"?"string":Object.prototype.toString.call(U)==="[object Array]"?"array":C.nodebuffer&&A.isBuffer(U)?"nodebuffer":C.uint8array&&U instanceof Uint8Array?"uint8array":C.arraybuffer&&U instanceof ArrayBuffer?"arraybuffer":void 0},S.checkSupport=function(U){if(!C[U.toLowerCase()])throw new Error(U+" is not supported by this platform")},S.MAX_VALUE_16BITS=65535,S.MAX_VALUE_32BITS=-1,S.pretty=function(U){var q,H,W="";for(H=0;H<(U||"").length;H++)W+="\\x"+((q=U.charCodeAt(H))<16?"0":"")+q.toString(16).toUpperCase();return W},S.delay=function(U,q,H){setImmediate(function(){U.apply(H||null,q||[])})},S.inherits=function(U,q){function H(){}H.prototype=q.prototype,U.prototype=new H},S.extend=function(){var U,q,H={};for(U=0;U<arguments.length;U++)for(q in arguments[U])Object.prototype.hasOwnProperty.call(arguments[U],q)&&H[q]===void 0&&(H[q]=arguments[U][q]);return H},S.prepareContent=function(U,q,H,W,Q){return B.Promise.resolve(q).then(function(re){return C.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new B.Promise(function(ce,ne){var Y=new FileReader;Y.onload=function(fe){ce(fe.target.result)},Y.onerror=function(fe){ne(fe.target.error)},Y.readAsArrayBuffer(re)}):re}).then(function(re){var ce=S.getTypeOf(re);return ce?(ce==="arraybuffer"?re=S.transformTo("uint8array",re):ce==="string"&&(Q?re=T.decode(re):H&&W!==!0&&(re=function(ne){return M(ne,C.uint8array?new Uint8Array(ne.length):new Array(ne.length))}(re))),re):B.Promise.reject(new Error("Can't read the data of '"+U+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(x,E,S){var C=x("./reader/readerFor"),T=x("./utils"),A=x("./signature"),B=x("./zipEntry"),I=x("./support");function M(O){this.files=[],this.loadOptions=O}M.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var D=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+T.pretty(D)+", expected "+T.pretty(O)+")")}},isSignature:function(O,D){var L=this.reader.index;this.reader.setIndex(O);var V=this.reader.readString(4)===D;return this.reader.setIndex(L),V},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),D=I.uint8array?"uint8array":"array",L=T.transformTo(D,O);this.zipComment=this.loadOptions.decodeFileName(L)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,D,L,V=this.zip64EndOfCentralSize-44;0<V;)O=this.reader.readInt(2),D=this.reader.readInt(4),L=this.reader.readData(D),this.zip64ExtensibleData[O]={id:O,length:D,value:L}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,D;for(O=0;O<this.files.length;O++)D=this.files[O],this.reader.setIndex(D.localHeaderOffset),this.checkSignature(A.LOCAL_FILE_HEADER),D.readLocalPart(this.reader),D.handleUTF8(),D.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(A.CENTRAL_FILE_HEADER);)(O=new B({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(A.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,A.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var D=O;if(this.checkSignature(A.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===T.MAX_VALUE_16BITS||this.diskWithCentralDirStart===T.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===T.MAX_VALUE_16BITS||this.centralDirRecords===T.MAX_VALUE_16BITS||this.centralDirSize===T.MAX_VALUE_32BITS||this.centralDirOffset===T.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(A.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(A.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,A.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(A.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(A.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var L=this.centralDirOffset+this.centralDirSize;this.zip64&&(L+=20,L+=12+this.zip64EndOfCentralSize);var V=D-L;if(0<V)this.isSignature(D,A.CENTRAL_FILE_HEADER)||(this.reader.zero=V);else if(V<0)throw new Error("Corrupted zip: missing "+Math.abs(V)+" bytes.")},prepareReader:function(O){this.reader=C(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=M},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(x,E,S){var C=x("./reader/readerFor"),T=x("./utils"),A=x("./compressedObject"),B=x("./crc32"),I=x("./utf8"),M=x("./compressions"),O=x("./support");function D(L,V){this.options=L,this.loadOptions=V}D.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(L){var V,U;if(L.skip(22),this.fileNameLength=L.readInt(2),U=L.readInt(2),this.fileName=L.readData(this.fileNameLength),L.skip(U),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((V=function(q){for(var H in M)if(Object.prototype.hasOwnProperty.call(M,H)&&M[H].magic===q)return M[H];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+T.pretty(this.compressionMethod)+" unknown (inner file : "+T.transformTo("string",this.fileName)+")");this.decompressed=new A(this.compressedSize,this.uncompressedSize,this.crc32,V,L.readData(this.compressedSize))},readCentralPart:function(L){this.versionMadeBy=L.readInt(2),L.skip(2),this.bitFlag=L.readInt(2),this.compressionMethod=L.readString(2),this.date=L.readDate(),this.crc32=L.readInt(4),this.compressedSize=L.readInt(4),this.uncompressedSize=L.readInt(4);var V=L.readInt(2);if(this.extraFieldsLength=L.readInt(2),this.fileCommentLength=L.readInt(2),this.diskNumberStart=L.readInt(2),this.internalFileAttributes=L.readInt(2),this.externalFileAttributes=L.readInt(4),this.localHeaderOffset=L.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");L.skip(V),this.readExtraFields(L),this.parseZIP64ExtraField(L),this.fileComment=L.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var L=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),L==0&&(this.dosPermissions=63&this.externalFileAttributes),L==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var L=C(this.extraFields[1].value);this.uncompressedSize===T.MAX_VALUE_32BITS&&(this.uncompressedSize=L.readInt(8)),this.compressedSize===T.MAX_VALUE_32BITS&&(this.compressedSize=L.readInt(8)),this.localHeaderOffset===T.MAX_VALUE_32BITS&&(this.localHeaderOffset=L.readInt(8)),this.diskNumberStart===T.MAX_VALUE_32BITS&&(this.diskNumberStart=L.readInt(4))}},readExtraFields:function(L){var V,U,q,H=L.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});L.index+4<H;)V=L.readInt(2),U=L.readInt(2),q=L.readData(U),this.extraFields[V]={id:V,length:U,value:q};L.setIndex(H)},handleUTF8:function(){var L=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=I.utf8decode(this.fileName),this.fileCommentStr=I.utf8decode(this.fileComment);else{var V=this.findExtraFieldUnicodePath();if(V!==null)this.fileNameStr=V;else{var U=T.transformTo(L,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var q=this.findExtraFieldUnicodeComment();if(q!==null)this.fileCommentStr=q;else{var H=T.transformTo(L,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(H)}}},findExtraFieldUnicodePath:function(){var L=this.extraFields[28789];if(L){var V=C(L.value);return V.readInt(1)!==1||B(this.fileName)!==V.readInt(4)?null:I.utf8decode(V.readData(L.length-5))}return null},findExtraFieldUnicodeComment:function(){var L=this.extraFields[25461];if(L){var V=C(L.value);return V.readInt(1)!==1||B(this.fileComment)!==V.readInt(4)?null:I.utf8decode(V.readData(L.length-5))}return null}},E.exports=D},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(x,E,S){function C(V,U,q){this.name=V,this.dir=q.dir,this.date=q.date,this.comment=q.comment,this.unixPermissions=q.unixPermissions,this.dosPermissions=q.dosPermissions,this._data=U,this._dataBinary=q.binary,this.options={compression:q.compression,compressionOptions:q.compressionOptions}}var T=x("./stream/StreamHelper"),A=x("./stream/DataWorker"),B=x("./utf8"),I=x("./compressedObject"),M=x("./stream/GenericWorker");C.prototype={internalStream:function(V){var U=null,q="string";try{if(!V)throw new Error("No output type specified.");var H=(q=V.toLowerCase())==="string"||q==="text";q!=="binarystring"&&q!=="text"||(q="string"),U=this._decompressWorker();var W=!this._dataBinary;W&&!H&&(U=U.pipe(new B.Utf8EncodeWorker)),!W&&H&&(U=U.pipe(new B.Utf8DecodeWorker))}catch(Q){(U=new M("error")).error(Q)}return new T(U,q,"")},async:function(V,U){return this.internalStream(V).accumulate(U)},nodeStream:function(V,U){return this.internalStream(V||"nodebuffer").toNodejsStream(U)},_compressWorker:function(V,U){if(this._data instanceof I&&this._data.compression.magic===V.magic)return this._data.getCompressedWorker();var q=this._decompressWorker();return this._dataBinary||(q=q.pipe(new B.Utf8EncodeWorker)),I.createWorkerFrom(q,V,U)},_decompressWorker:function(){return this._data instanceof I?this._data.getContentWorker():this._data instanceof M?this._data:new A(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],D=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},L=0;L<O.length;L++)C.prototype[O[L]]=D;E.exports=C},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(x,E,S){(function(C){var T,A,B=C.MutationObserver||C.WebKitMutationObserver;if(B){var I=0,M=new B(V),O=C.document.createTextNode("");M.observe(O,{characterData:!0}),T=function(){O.data=I=++I%2}}else if(C.setImmediate||C.MessageChannel===void 0)T="document"in C&&"onreadystatechange"in C.document.createElement("script")?function(){var U=C.document.createElement("script");U.onreadystatechange=function(){V(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},C.document.documentElement.appendChild(U)}:function(){setTimeout(V,0)};else{var D=new C.MessageChannel;D.port1.onmessage=V,T=function(){D.port2.postMessage(0)}}var L=[];function V(){var U,q;A=!0;for(var H=L.length;H;){for(q=L,L=[],U=-1;++U<H;)q[U]();H=L.length}A=!1}E.exports=function(U){L.push(U)!==1||A||T()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(x,E,S){var C=x("immediate");function T(){}var A={},B=["REJECTED"],I=["FULFILLED"],M=["PENDING"];function O(H){if(typeof H!="function")throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,H!==T&&U(this,H)}function D(H,W,Q){this.promise=H,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof Q=="function"&&(this.onRejected=Q,this.callRejected=this.otherCallRejected)}function L(H,W,Q){C(function(){var re;try{re=W(Q)}catch(ce){return A.reject(H,ce)}re===H?A.reject(H,new TypeError("Cannot resolve promise with itself")):A.resolve(H,re)})}function V(H){var W=H&&H.then;if(H&&(typeof H=="object"||typeof H=="function")&&typeof W=="function")return function(){W.apply(H,arguments)}}function U(H,W){var Q=!1;function re(Y){Q||(Q=!0,A.reject(H,Y))}function ce(Y){Q||(Q=!0,A.resolve(H,Y))}var ne=q(function(){W(ce,re)});ne.status==="error"&&re(ne.value)}function q(H,W){var Q={};try{Q.value=H(W),Q.status="success"}catch(re){Q.status="error",Q.value=re}return Q}(E.exports=O).prototype.finally=function(H){if(typeof H!="function")return this;var W=this.constructor;return this.then(function(Q){return W.resolve(H()).then(function(){return Q})},function(Q){return W.resolve(H()).then(function(){throw Q})})},O.prototype.catch=function(H){return this.then(null,H)},O.prototype.then=function(H,W){if(typeof H!="function"&&this.state===I||typeof W!="function"&&this.state===B)return this;var Q=new this.constructor(T);return this.state!==M?L(Q,this.state===I?H:W,this.outcome):this.queue.push(new D(Q,H,W)),Q},D.prototype.callFulfilled=function(H){A.resolve(this.promise,H)},D.prototype.otherCallFulfilled=function(H){L(this.promise,this.onFulfilled,H)},D.prototype.callRejected=function(H){A.reject(this.promise,H)},D.prototype.otherCallRejected=function(H){L(this.promise,this.onRejected,H)},A.resolve=function(H,W){var Q=q(V,W);if(Q.status==="error")return A.reject(H,Q.value);var re=Q.value;if(re)U(H,re);else{H.state=I,H.outcome=W;for(var ce=-1,ne=H.queue.length;++ce<ne;)H.queue[ce].callFulfilled(W)}return H},A.reject=function(H,W){H.state=B,H.outcome=W;for(var Q=-1,re=H.queue.length;++Q<re;)H.queue[Q].callRejected(W);return H},O.resolve=function(H){return H instanceof this?H:A.resolve(new this(T),H)},O.reject=function(H){var W=new this(T);return A.reject(W,H)},O.all=function(H){var W=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Q=H.length,re=!1;if(!Q)return this.resolve([]);for(var ce=new Array(Q),ne=0,Y=-1,fe=new this(T);++Y<Q;)ge(H[Y],Y);return fe;function ge($e,_e){W.resolve($e).then(function(ae){ce[_e]=ae,++ne!==Q||re||(re=!0,A.resolve(fe,ce))},function(ae){re||(re=!0,A.reject(fe,ae))})}},O.race=function(H){var W=this;if(Object.prototype.toString.call(H)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Q=H.length,re=!1;if(!Q)return this.resolve([]);for(var ce=-1,ne=new this(T);++ce<Q;)Y=H[ce],W.resolve(Y).then(function(fe){re||(re=!0,A.resolve(ne,fe))},function(fe){re||(re=!0,A.reject(ne,fe))});var Y;return ne}},{immediate:36}],38:[function(x,E,S){var C={};(0,x("./lib/utils/common").assign)(C,x("./lib/deflate"),x("./lib/inflate"),x("./lib/zlib/constants")),E.exports=C},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(x,E,S){var C=x("./zlib/deflate"),T=x("./utils/common"),A=x("./utils/strings"),B=x("./zlib/messages"),I=x("./zlib/zstream"),M=Object.prototype.toString,O=0,D=-1,L=0,V=8;function U(H){if(!(this instanceof U))return new U(H);this.options=T.assign({level:D,method:V,chunkSize:16384,windowBits:15,memLevel:8,strategy:L,to:""},H||{});var W=this.options;W.raw&&0<W.windowBits?W.windowBits=-W.windowBits:W.gzip&&0<W.windowBits&&W.windowBits<16&&(W.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var Q=C.deflateInit2(this.strm,W.level,W.method,W.windowBits,W.memLevel,W.strategy);if(Q!==O)throw new Error(B[Q]);if(W.header&&C.deflateSetHeader(this.strm,W.header),W.dictionary){var re;if(re=typeof W.dictionary=="string"?A.string2buf(W.dictionary):M.call(W.dictionary)==="[object ArrayBuffer]"?new Uint8Array(W.dictionary):W.dictionary,(Q=C.deflateSetDictionary(this.strm,re))!==O)throw new Error(B[Q]);this._dict_set=!0}}function q(H,W){var Q=new U(W);if(Q.push(H,!0),Q.err)throw Q.msg||B[Q.err];return Q.result}U.prototype.push=function(H,W){var Q,re,ce=this.strm,ne=this.options.chunkSize;if(this.ended)return!1;re=W===~~W?W:W===!0?4:0,typeof H=="string"?ce.input=A.string2buf(H):M.call(H)==="[object ArrayBuffer]"?ce.input=new Uint8Array(H):ce.input=H,ce.next_in=0,ce.avail_in=ce.input.length;do{if(ce.avail_out===0&&(ce.output=new T.Buf8(ne),ce.next_out=0,ce.avail_out=ne),(Q=C.deflate(ce,re))!==1&&Q!==O)return this.onEnd(Q),!(this.ended=!0);ce.avail_out!==0&&(ce.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(A.buf2binstring(T.shrinkBuf(ce.output,ce.next_out))):this.onData(T.shrinkBuf(ce.output,ce.next_out)))}while((0<ce.avail_in||ce.avail_out===0)&&Q!==1);return re===4?(Q=C.deflateEnd(this.strm),this.onEnd(Q),this.ended=!0,Q===O):re!==2||(this.onEnd(O),!(ce.avail_out=0))},U.prototype.onData=function(H){this.chunks.push(H)},U.prototype.onEnd=function(H){H===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=H,this.msg=this.strm.msg},S.Deflate=U,S.deflate=q,S.deflateRaw=function(H,W){return(W=W||{}).raw=!0,q(H,W)},S.gzip=function(H,W){return(W=W||{}).gzip=!0,q(H,W)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(x,E,S){var C=x("./zlib/inflate"),T=x("./utils/common"),A=x("./utils/strings"),B=x("./zlib/constants"),I=x("./zlib/messages"),M=x("./zlib/zstream"),O=x("./zlib/gzheader"),D=Object.prototype.toString;function L(U){if(!(this instanceof L))return new L(U);this.options=T.assign({chunkSize:16384,windowBits:0,to:""},U||{});var q=this.options;q.raw&&0<=q.windowBits&&q.windowBits<16&&(q.windowBits=-q.windowBits,q.windowBits===0&&(q.windowBits=-15)),!(0<=q.windowBits&&q.windowBits<16)||U&&U.windowBits||(q.windowBits+=32),15<q.windowBits&&q.windowBits<48&&!(15&q.windowBits)&&(q.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var H=C.inflateInit2(this.strm,q.windowBits);if(H!==B.Z_OK)throw new Error(I[H]);this.header=new O,C.inflateGetHeader(this.strm,this.header)}function V(U,q){var H=new L(q);if(H.push(U,!0),H.err)throw H.msg||I[H.err];return H.result}L.prototype.push=function(U,q){var H,W,Q,re,ce,ne,Y=this.strm,fe=this.options.chunkSize,ge=this.options.dictionary,$e=!1;if(this.ended)return!1;W=q===~~q?q:q===!0?B.Z_FINISH:B.Z_NO_FLUSH,typeof U=="string"?Y.input=A.binstring2buf(U):D.call(U)==="[object ArrayBuffer]"?Y.input=new Uint8Array(U):Y.input=U,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new T.Buf8(fe),Y.next_out=0,Y.avail_out=fe),(H=C.inflate(Y,B.Z_NO_FLUSH))===B.Z_NEED_DICT&&ge&&(ne=typeof ge=="string"?A.string2buf(ge):D.call(ge)==="[object ArrayBuffer]"?new Uint8Array(ge):ge,H=C.inflateSetDictionary(this.strm,ne)),H===B.Z_BUF_ERROR&&$e===!0&&(H=B.Z_OK,$e=!1),H!==B.Z_STREAM_END&&H!==B.Z_OK)return this.onEnd(H),!(this.ended=!0);Y.next_out&&(Y.avail_out!==0&&H!==B.Z_STREAM_END&&(Y.avail_in!==0||W!==B.Z_FINISH&&W!==B.Z_SYNC_FLUSH)||(this.options.to==="string"?(Q=A.utf8border(Y.output,Y.next_out),re=Y.next_out-Q,ce=A.buf2string(Y.output,Q),Y.next_out=re,Y.avail_out=fe-re,re&&T.arraySet(Y.output,Y.output,Q,re,0),this.onData(ce)):this.onData(T.shrinkBuf(Y.output,Y.next_out)))),Y.avail_in===0&&Y.avail_out===0&&($e=!0)}while((0<Y.avail_in||Y.avail_out===0)&&H!==B.Z_STREAM_END);return H===B.Z_STREAM_END&&(W=B.Z_FINISH),W===B.Z_FINISH?(H=C.inflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===B.Z_OK):W!==B.Z_SYNC_FLUSH||(this.onEnd(B.Z_OK),!(Y.avail_out=0))},L.prototype.onData=function(U){this.chunks.push(U)},L.prototype.onEnd=function(U){U===B.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},S.Inflate=L,S.inflate=V,S.inflateRaw=function(U,q){return(q=q||{}).raw=!0,V(U,q)},S.ungzip=V},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(x,E,S){var C=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";S.assign=function(B){for(var I=Array.prototype.slice.call(arguments,1);I.length;){var M=I.shift();if(M){if(typeof M!="object")throw new TypeError(M+"must be non-object");for(var O in M)M.hasOwnProperty(O)&&(B[O]=M[O])}}return B},S.shrinkBuf=function(B,I){return B.length===I?B:B.subarray?B.subarray(0,I):(B.length=I,B)};var T={arraySet:function(B,I,M,O,D){if(I.subarray&&B.subarray)B.set(I.subarray(M,M+O),D);else for(var L=0;L<O;L++)B[D+L]=I[M+L]},flattenChunks:function(B){var I,M,O,D,L,V;for(I=O=0,M=B.length;I<M;I++)O+=B[I].length;for(V=new Uint8Array(O),I=D=0,M=B.length;I<M;I++)L=B[I],V.set(L,D),D+=L.length;return V}},A={arraySet:function(B,I,M,O,D){for(var L=0;L<O;L++)B[D+L]=I[M+L]},flattenChunks:function(B){return[].concat.apply([],B)}};S.setTyped=function(B){B?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,T)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,A))},S.setTyped(C)},{}],42:[function(x,E,S){var C=x("./common"),T=!0,A=!0;try{String.fromCharCode.apply(null,[0])}catch{T=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{A=!1}for(var B=new C.Buf8(256),I=0;I<256;I++)B[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;function M(O,D){if(D<65537&&(O.subarray&&A||!O.subarray&&T))return String.fromCharCode.apply(null,C.shrinkBuf(O,D));for(var L="",V=0;V<D;V++)L+=String.fromCharCode(O[V]);return L}B[254]=B[254]=1,S.string2buf=function(O){var D,L,V,U,q,H=O.length,W=0;for(U=0;U<H;U++)(64512&(L=O.charCodeAt(U)))==55296&&U+1<H&&(64512&(V=O.charCodeAt(U+1)))==56320&&(L=65536+(L-55296<<10)+(V-56320),U++),W+=L<128?1:L<2048?2:L<65536?3:4;for(D=new C.Buf8(W),U=q=0;q<W;U++)(64512&(L=O.charCodeAt(U)))==55296&&U+1<H&&(64512&(V=O.charCodeAt(U+1)))==56320&&(L=65536+(L-55296<<10)+(V-56320),U++),L<128?D[q++]=L:(L<2048?D[q++]=192|L>>>6:(L<65536?D[q++]=224|L>>>12:(D[q++]=240|L>>>18,D[q++]=128|L>>>12&63),D[q++]=128|L>>>6&63),D[q++]=128|63&L);return D},S.buf2binstring=function(O){return M(O,O.length)},S.binstring2buf=function(O){for(var D=new C.Buf8(O.length),L=0,V=D.length;L<V;L++)D[L]=O.charCodeAt(L);return D},S.buf2string=function(O,D){var L,V,U,q,H=D||O.length,W=new Array(2*H);for(L=V=0;L<H;)if((U=O[L++])<128)W[V++]=U;else if(4<(q=B[U]))W[V++]=65533,L+=q-1;else{for(U&=q===2?31:q===3?15:7;1<q&&L<H;)U=U<<6|63&O[L++],q--;1<q?W[V++]=65533:U<65536?W[V++]=U:(U-=65536,W[V++]=55296|U>>10&1023,W[V++]=56320|1023&U)}return M(W,V)},S.utf8border=function(O,D){var L;for((D=D||O.length)>O.length&&(D=O.length),L=D-1;0<=L&&(192&O[L])==128;)L--;return L<0||L===0?D:L+B[O[L]]>D?L:D}},{"./common":41}],43:[function(x,E,S){E.exports=function(C,T,A,B){for(var I=65535&C|0,M=C>>>16&65535|0,O=0;A!==0;){for(A-=O=2e3<A?2e3:A;M=M+(I=I+T[B++]|0)|0,--O;);I%=65521,M%=65521}return I|M<<16|0}},{}],44:[function(x,E,S){E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(x,E,S){var C=function(){for(var T,A=[],B=0;B<256;B++){T=B;for(var I=0;I<8;I++)T=1&T?3988292384^T>>>1:T>>>1;A[B]=T}return A}();E.exports=function(T,A,B,I){var M=C,O=I+B;T^=-1;for(var D=I;D<O;D++)T=T>>>8^M[255&(T^A[D])];return-1^T}},{}],46:[function(x,E,S){var C,T=x("../utils/common"),A=x("./trees"),B=x("./adler32"),I=x("./crc32"),M=x("./messages"),O=0,D=4,L=0,V=-2,U=-1,q=4,H=2,W=8,Q=9,re=286,ce=30,ne=19,Y=2*re+1,fe=15,ge=3,$e=258,_e=$e+ge+1,ae=42,X=113,F=1,z=2,J=3,te=4;function se(me,Ie){return me.msg=M[Ie],Ie}function oe(me){return(me<<1)-(4<me?9:0)}function ie(me){for(var Ie=me.length;0<=--Ie;)me[Ie]=0}function G(me){var Ie=me.state,Ve=Ie.pending;Ve>me.avail_out&&(Ve=me.avail_out),Ve!==0&&(T.arraySet(me.output,Ie.pending_buf,Ie.pending_out,Ve,me.next_out),me.next_out+=Ve,Ie.pending_out+=Ve,me.total_out+=Ve,me.avail_out-=Ve,Ie.pending-=Ve,Ie.pending===0&&(Ie.pending_out=0))}function j(me,Ie){A._tr_flush_block(me,0<=me.block_start?me.block_start:-1,me.strstart-me.block_start,Ie),me.block_start=me.strstart,G(me.strm)}function ee(me,Ie){me.pending_buf[me.pending++]=Ie}function pe(me,Ie){me.pending_buf[me.pending++]=Ie>>>8&255,me.pending_buf[me.pending++]=255&Ie}function he(me,Ie){var Ve,Me,Ne=me.max_chain_length,Pe=me.strstart,He=me.prev_length,We=me.nice_match,Ke=me.strstart>me.w_size-_e?me.strstart-(me.w_size-_e):0,Ge=me.window,nt=me.w_mask,ot=me.prev,Ze=me.strstart+$e,Re=Ge[Pe+He-1],be=Ge[Pe+He];me.prev_length>=me.good_match&&(Ne>>=2),We>me.lookahead&&(We=me.lookahead);do if(Ge[(Ve=Ie)+He]===be&&Ge[Ve+He-1]===Re&&Ge[Ve]===Ge[Pe]&&Ge[++Ve]===Ge[Pe+1]){Pe+=2,Ve++;do;while(Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Ge[++Pe]===Ge[++Ve]&&Pe<Ze);if(Me=$e-(Ze-Pe),Pe=Ze-$e,He<Me){if(me.match_start=Ie,We<=(He=Me))break;Re=Ge[Pe+He-1],be=Ge[Pe+He]}}while((Ie=ot[Ie&nt])>Ke&&--Ne!=0);return He<=me.lookahead?He:me.lookahead}function Se(me){var Ie,Ve,Me,Ne,Pe,He,We,Ke,Ge,nt,ot=me.w_size;do{if(Ne=me.window_size-me.lookahead-me.strstart,me.strstart>=ot+(ot-_e)){for(T.arraySet(me.window,me.window,ot,ot,0),me.match_start-=ot,me.strstart-=ot,me.block_start-=ot,Ie=Ve=me.hash_size;Me=me.head[--Ie],me.head[Ie]=ot<=Me?Me-ot:0,--Ve;);for(Ie=Ve=ot;Me=me.prev[--Ie],me.prev[Ie]=ot<=Me?Me-ot:0,--Ve;);Ne+=ot}if(me.strm.avail_in===0)break;if(He=me.strm,We=me.window,Ke=me.strstart+me.lookahead,Ge=Ne,nt=void 0,nt=He.avail_in,Ge<nt&&(nt=Ge),Ve=nt===0?0:(He.avail_in-=nt,T.arraySet(We,He.input,He.next_in,nt,Ke),He.state.wrap===1?He.adler=B(He.adler,We,nt,Ke):He.state.wrap===2&&(He.adler=I(He.adler,We,nt,Ke)),He.next_in+=nt,He.total_in+=nt,nt),me.lookahead+=Ve,me.lookahead+me.insert>=ge)for(Pe=me.strstart-me.insert,me.ins_h=me.window[Pe],me.ins_h=(me.ins_h<<me.hash_shift^me.window[Pe+1])&me.hash_mask;me.insert&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[Pe+ge-1])&me.hash_mask,me.prev[Pe&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=Pe,Pe++,me.insert--,!(me.lookahead+me.insert<ge)););}while(me.lookahead<_e&&me.strm.avail_in!==0)}function we(me,Ie){for(var Ve,Me;;){if(me.lookahead<_e){if(Se(me),me.lookahead<_e&&Ie===O)return F;if(me.lookahead===0)break}if(Ve=0,me.lookahead>=ge&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ge-1])&me.hash_mask,Ve=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),Ve!==0&&me.strstart-Ve<=me.w_size-_e&&(me.match_length=he(me,Ve)),me.match_length>=ge)if(Me=A._tr_tally(me,me.strstart-me.match_start,me.match_length-ge),me.lookahead-=me.match_length,me.match_length<=me.max_lazy_match&&me.lookahead>=ge){for(me.match_length--;me.strstart++,me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ge-1])&me.hash_mask,Ve=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart,--me.match_length!=0;);me.strstart++}else me.strstart+=me.match_length,me.match_length=0,me.ins_h=me.window[me.strstart],me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+1])&me.hash_mask;else Me=A._tr_tally(me,0,me.window[me.strstart]),me.lookahead--,me.strstart++;if(Me&&(j(me,!1),me.strm.avail_out===0))return F}return me.insert=me.strstart<ge-1?me.strstart:ge-1,Ie===D?(j(me,!0),me.strm.avail_out===0?J:te):me.last_lit&&(j(me,!1),me.strm.avail_out===0)?F:z}function xe(me,Ie){for(var Ve,Me,Ne;;){if(me.lookahead<_e){if(Se(me),me.lookahead<_e&&Ie===O)return F;if(me.lookahead===0)break}if(Ve=0,me.lookahead>=ge&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ge-1])&me.hash_mask,Ve=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),me.prev_length=me.match_length,me.prev_match=me.match_start,me.match_length=ge-1,Ve!==0&&me.prev_length<me.max_lazy_match&&me.strstart-Ve<=me.w_size-_e&&(me.match_length=he(me,Ve),me.match_length<=5&&(me.strategy===1||me.match_length===ge&&4096<me.strstart-me.match_start)&&(me.match_length=ge-1)),me.prev_length>=ge&&me.match_length<=me.prev_length){for(Ne=me.strstart+me.lookahead-ge,Me=A._tr_tally(me,me.strstart-1-me.prev_match,me.prev_length-ge),me.lookahead-=me.prev_length-1,me.prev_length-=2;++me.strstart<=Ne&&(me.ins_h=(me.ins_h<<me.hash_shift^me.window[me.strstart+ge-1])&me.hash_mask,Ve=me.prev[me.strstart&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=me.strstart),--me.prev_length!=0;);if(me.match_available=0,me.match_length=ge-1,me.strstart++,Me&&(j(me,!1),me.strm.avail_out===0))return F}else if(me.match_available){if((Me=A._tr_tally(me,0,me.window[me.strstart-1]))&&j(me,!1),me.strstart++,me.lookahead--,me.strm.avail_out===0)return F}else me.match_available=1,me.strstart++,me.lookahead--}return me.match_available&&(Me=A._tr_tally(me,0,me.window[me.strstart-1]),me.match_available=0),me.insert=me.strstart<ge-1?me.strstart:ge-1,Ie===D?(j(me,!0),me.strm.avail_out===0?J:te):me.last_lit&&(j(me,!1),me.strm.avail_out===0)?F:z}function Ee(me,Ie,Ve,Me,Ne){this.good_length=me,this.max_lazy=Ie,this.nice_length=Ve,this.max_chain=Me,this.func=Ne}function ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*Y),this.dyn_dtree=new T.Buf16(2*(2*ce+1)),this.bl_tree=new T.Buf16(2*(2*ne+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16(fe+1),this.heap=new T.Buf16(2*re+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*re+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ce(me){var Ie;return me&&me.state?(me.total_in=me.total_out=0,me.data_type=H,(Ie=me.state).pending=0,Ie.pending_out=0,Ie.wrap<0&&(Ie.wrap=-Ie.wrap),Ie.status=Ie.wrap?ae:X,me.adler=Ie.wrap===2?0:1,Ie.last_flush=O,A._tr_init(Ie),L):se(me,V)}function ve(me){var Ie=Ce(me);return Ie===L&&function(Ve){Ve.window_size=2*Ve.w_size,ie(Ve.head),Ve.max_lazy_match=C[Ve.level].max_lazy,Ve.good_match=C[Ve.level].good_length,Ve.nice_match=C[Ve.level].nice_length,Ve.max_chain_length=C[Ve.level].max_chain,Ve.strstart=0,Ve.block_start=0,Ve.lookahead=0,Ve.insert=0,Ve.match_length=Ve.prev_length=ge-1,Ve.match_available=0,Ve.ins_h=0}(me.state),Ie}function Be(me,Ie,Ve,Me,Ne,Pe){if(!me)return V;var He=1;if(Ie===U&&(Ie=6),Me<0?(He=0,Me=-Me):15<Me&&(He=2,Me-=16),Ne<1||Q<Ne||Ve!==W||Me<8||15<Me||Ie<0||9<Ie||Pe<0||q<Pe)return se(me,V);Me===8&&(Me=9);var We=new ye;return(me.state=We).strm=me,We.wrap=He,We.gzhead=null,We.w_bits=Me,We.w_size=1<<We.w_bits,We.w_mask=We.w_size-1,We.hash_bits=Ne+7,We.hash_size=1<<We.hash_bits,We.hash_mask=We.hash_size-1,We.hash_shift=~~((We.hash_bits+ge-1)/ge),We.window=new T.Buf8(2*We.w_size),We.head=new T.Buf16(We.hash_size),We.prev=new T.Buf16(We.w_size),We.lit_bufsize=1<<Ne+6,We.pending_buf_size=4*We.lit_bufsize,We.pending_buf=new T.Buf8(We.pending_buf_size),We.d_buf=1*We.lit_bufsize,We.l_buf=3*We.lit_bufsize,We.level=Ie,We.strategy=Pe,We.method=Ve,ve(me)}C=[new Ee(0,0,0,0,function(me,Ie){var Ve=65535;for(Ve>me.pending_buf_size-5&&(Ve=me.pending_buf_size-5);;){if(me.lookahead<=1){if(Se(me),me.lookahead===0&&Ie===O)return F;if(me.lookahead===0)break}me.strstart+=me.lookahead,me.lookahead=0;var Me=me.block_start+Ve;if((me.strstart===0||me.strstart>=Me)&&(me.lookahead=me.strstart-Me,me.strstart=Me,j(me,!1),me.strm.avail_out===0)||me.strstart-me.block_start>=me.w_size-_e&&(j(me,!1),me.strm.avail_out===0))return F}return me.insert=0,Ie===D?(j(me,!0),me.strm.avail_out===0?J:te):(me.strstart>me.block_start&&(j(me,!1),me.strm.avail_out),F)}),new Ee(4,4,8,4,we),new Ee(4,5,16,8,we),new Ee(4,6,32,32,we),new Ee(4,4,16,16,xe),new Ee(8,16,32,32,xe),new Ee(8,16,128,128,xe),new Ee(8,32,128,256,xe),new Ee(32,128,258,1024,xe),new Ee(32,258,258,4096,xe)],S.deflateInit=function(me,Ie){return Be(me,Ie,W,15,8,0)},S.deflateInit2=Be,S.deflateReset=ve,S.deflateResetKeep=Ce,S.deflateSetHeader=function(me,Ie){return me&&me.state?me.state.wrap!==2?V:(me.state.gzhead=Ie,L):V},S.deflate=function(me,Ie){var Ve,Me,Ne,Pe;if(!me||!me.state||5<Ie||Ie<0)return me?se(me,V):V;if(Me=me.state,!me.output||!me.input&&me.avail_in!==0||Me.status===666&&Ie!==D)return se(me,me.avail_out===0?-5:V);if(Me.strm=me,Ve=Me.last_flush,Me.last_flush=Ie,Me.status===ae)if(Me.wrap===2)me.adler=0,ee(Me,31),ee(Me,139),ee(Me,8),Me.gzhead?(ee(Me,(Me.gzhead.text?1:0)+(Me.gzhead.hcrc?2:0)+(Me.gzhead.extra?4:0)+(Me.gzhead.name?8:0)+(Me.gzhead.comment?16:0)),ee(Me,255&Me.gzhead.time),ee(Me,Me.gzhead.time>>8&255),ee(Me,Me.gzhead.time>>16&255),ee(Me,Me.gzhead.time>>24&255),ee(Me,Me.level===9?2:2<=Me.strategy||Me.level<2?4:0),ee(Me,255&Me.gzhead.os),Me.gzhead.extra&&Me.gzhead.extra.length&&(ee(Me,255&Me.gzhead.extra.length),ee(Me,Me.gzhead.extra.length>>8&255)),Me.gzhead.hcrc&&(me.adler=I(me.adler,Me.pending_buf,Me.pending,0)),Me.gzindex=0,Me.status=69):(ee(Me,0),ee(Me,0),ee(Me,0),ee(Me,0),ee(Me,0),ee(Me,Me.level===9?2:2<=Me.strategy||Me.level<2?4:0),ee(Me,3),Me.status=X);else{var He=W+(Me.w_bits-8<<4)<<8;He|=(2<=Me.strategy||Me.level<2?0:Me.level<6?1:Me.level===6?2:3)<<6,Me.strstart!==0&&(He|=32),He+=31-He%31,Me.status=X,pe(Me,He),Me.strstart!==0&&(pe(Me,me.adler>>>16),pe(Me,65535&me.adler)),me.adler=1}if(Me.status===69)if(Me.gzhead.extra){for(Ne=Me.pending;Me.gzindex<(65535&Me.gzhead.extra.length)&&(Me.pending!==Me.pending_buf_size||(Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),G(me),Ne=Me.pending,Me.pending!==Me.pending_buf_size));)ee(Me,255&Me.gzhead.extra[Me.gzindex]),Me.gzindex++;Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),Me.gzindex===Me.gzhead.extra.length&&(Me.gzindex=0,Me.status=73)}else Me.status=73;if(Me.status===73)if(Me.gzhead.name){Ne=Me.pending;do{if(Me.pending===Me.pending_buf_size&&(Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),G(me),Ne=Me.pending,Me.pending===Me.pending_buf_size)){Pe=1;break}Pe=Me.gzindex<Me.gzhead.name.length?255&Me.gzhead.name.charCodeAt(Me.gzindex++):0,ee(Me,Pe)}while(Pe!==0);Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),Pe===0&&(Me.gzindex=0,Me.status=91)}else Me.status=91;if(Me.status===91)if(Me.gzhead.comment){Ne=Me.pending;do{if(Me.pending===Me.pending_buf_size&&(Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),G(me),Ne=Me.pending,Me.pending===Me.pending_buf_size)){Pe=1;break}Pe=Me.gzindex<Me.gzhead.comment.length?255&Me.gzhead.comment.charCodeAt(Me.gzindex++):0,ee(Me,Pe)}while(Pe!==0);Me.gzhead.hcrc&&Me.pending>Ne&&(me.adler=I(me.adler,Me.pending_buf,Me.pending-Ne,Ne)),Pe===0&&(Me.status=103)}else Me.status=103;if(Me.status===103&&(Me.gzhead.hcrc?(Me.pending+2>Me.pending_buf_size&&G(me),Me.pending+2<=Me.pending_buf_size&&(ee(Me,255&me.adler),ee(Me,me.adler>>8&255),me.adler=0,Me.status=X)):Me.status=X),Me.pending!==0){if(G(me),me.avail_out===0)return Me.last_flush=-1,L}else if(me.avail_in===0&&oe(Ie)<=oe(Ve)&&Ie!==D)return se(me,-5);if(Me.status===666&&me.avail_in!==0)return se(me,-5);if(me.avail_in!==0||Me.lookahead!==0||Ie!==O&&Me.status!==666){var We=Me.strategy===2?function(Ke,Ge){for(var nt;;){if(Ke.lookahead===0&&(Se(Ke),Ke.lookahead===0)){if(Ge===O)return F;break}if(Ke.match_length=0,nt=A._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++,nt&&(j(Ke,!1),Ke.strm.avail_out===0))return F}return Ke.insert=0,Ge===D?(j(Ke,!0),Ke.strm.avail_out===0?J:te):Ke.last_lit&&(j(Ke,!1),Ke.strm.avail_out===0)?F:z}(Me,Ie):Me.strategy===3?function(Ke,Ge){for(var nt,ot,Ze,Re,be=Ke.window;;){if(Ke.lookahead<=$e){if(Se(Ke),Ke.lookahead<=$e&&Ge===O)return F;if(Ke.lookahead===0)break}if(Ke.match_length=0,Ke.lookahead>=ge&&0<Ke.strstart&&(ot=be[Ze=Ke.strstart-1])===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]){Re=Ke.strstart+$e;do;while(ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&ot===be[++Ze]&&Ze<Re);Ke.match_length=$e-(Re-Ze),Ke.match_length>Ke.lookahead&&(Ke.match_length=Ke.lookahead)}if(Ke.match_length>=ge?(nt=A._tr_tally(Ke,1,Ke.match_length-ge),Ke.lookahead-=Ke.match_length,Ke.strstart+=Ke.match_length,Ke.match_length=0):(nt=A._tr_tally(Ke,0,Ke.window[Ke.strstart]),Ke.lookahead--,Ke.strstart++),nt&&(j(Ke,!1),Ke.strm.avail_out===0))return F}return Ke.insert=0,Ge===D?(j(Ke,!0),Ke.strm.avail_out===0?J:te):Ke.last_lit&&(j(Ke,!1),Ke.strm.avail_out===0)?F:z}(Me,Ie):C[Me.level].func(Me,Ie);if(We!==J&&We!==te||(Me.status=666),We===F||We===J)return me.avail_out===0&&(Me.last_flush=-1),L;if(We===z&&(Ie===1?A._tr_align(Me):Ie!==5&&(A._tr_stored_block(Me,0,0,!1),Ie===3&&(ie(Me.head),Me.lookahead===0&&(Me.strstart=0,Me.block_start=0,Me.insert=0))),G(me),me.avail_out===0))return Me.last_flush=-1,L}return Ie!==D?L:Me.wrap<=0?1:(Me.wrap===2?(ee(Me,255&me.adler),ee(Me,me.adler>>8&255),ee(Me,me.adler>>16&255),ee(Me,me.adler>>24&255),ee(Me,255&me.total_in),ee(Me,me.total_in>>8&255),ee(Me,me.total_in>>16&255),ee(Me,me.total_in>>24&255)):(pe(Me,me.adler>>>16),pe(Me,65535&me.adler)),G(me),0<Me.wrap&&(Me.wrap=-Me.wrap),Me.pending!==0?L:1)},S.deflateEnd=function(me){var Ie;return me&&me.state?(Ie=me.state.status)!==ae&&Ie!==69&&Ie!==73&&Ie!==91&&Ie!==103&&Ie!==X&&Ie!==666?se(me,V):(me.state=null,Ie===X?se(me,-3):L):V},S.deflateSetDictionary=function(me,Ie){var Ve,Me,Ne,Pe,He,We,Ke,Ge,nt=Ie.length;if(!me||!me.state||(Pe=(Ve=me.state).wrap)===2||Pe===1&&Ve.status!==ae||Ve.lookahead)return V;for(Pe===1&&(me.adler=B(me.adler,Ie,nt,0)),Ve.wrap=0,nt>=Ve.w_size&&(Pe===0&&(ie(Ve.head),Ve.strstart=0,Ve.block_start=0,Ve.insert=0),Ge=new T.Buf8(Ve.w_size),T.arraySet(Ge,Ie,nt-Ve.w_size,Ve.w_size,0),Ie=Ge,nt=Ve.w_size),He=me.avail_in,We=me.next_in,Ke=me.input,me.avail_in=nt,me.next_in=0,me.input=Ie,Se(Ve);Ve.lookahead>=ge;){for(Me=Ve.strstart,Ne=Ve.lookahead-(ge-1);Ve.ins_h=(Ve.ins_h<<Ve.hash_shift^Ve.window[Me+ge-1])&Ve.hash_mask,Ve.prev[Me&Ve.w_mask]=Ve.head[Ve.ins_h],Ve.head[Ve.ins_h]=Me,Me++,--Ne;);Ve.strstart=Me,Ve.lookahead=ge-1,Se(Ve)}return Ve.strstart+=Ve.lookahead,Ve.block_start=Ve.strstart,Ve.insert=Ve.lookahead,Ve.lookahead=0,Ve.match_length=Ve.prev_length=ge-1,Ve.match_available=0,me.next_in=We,me.input=Ke,me.avail_in=He,Ve.wrap=Pe,L},S.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(x,E,S){E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(x,E,S){E.exports=function(C,T){var A,B,I,M,O,D,L,V,U,q,H,W,Q,re,ce,ne,Y,fe,ge,$e,_e,ae,X,F,z;A=C.state,B=C.next_in,F=C.input,I=B+(C.avail_in-5),M=C.next_out,z=C.output,O=M-(T-C.avail_out),D=M+(C.avail_out-257),L=A.dmax,V=A.wsize,U=A.whave,q=A.wnext,H=A.window,W=A.hold,Q=A.bits,re=A.lencode,ce=A.distcode,ne=(1<<A.lenbits)-1,Y=(1<<A.distbits)-1;e:do{Q<15&&(W+=F[B++]<<Q,Q+=8,W+=F[B++]<<Q,Q+=8),fe=re[W&ne];t:for(;;){if(W>>>=ge=fe>>>24,Q-=ge,(ge=fe>>>16&255)===0)z[M++]=65535&fe;else{if(!(16&ge)){if(!(64&ge)){fe=re[(65535&fe)+(W&(1<<ge)-1)];continue t}if(32&ge){A.mode=12;break e}C.msg="invalid literal/length code",A.mode=30;break e}$e=65535&fe,(ge&=15)&&(Q<ge&&(W+=F[B++]<<Q,Q+=8),$e+=W&(1<<ge)-1,W>>>=ge,Q-=ge),Q<15&&(W+=F[B++]<<Q,Q+=8,W+=F[B++]<<Q,Q+=8),fe=ce[W&Y];r:for(;;){if(W>>>=ge=fe>>>24,Q-=ge,!(16&(ge=fe>>>16&255))){if(!(64&ge)){fe=ce[(65535&fe)+(W&(1<<ge)-1)];continue r}C.msg="invalid distance code",A.mode=30;break e}if(_e=65535&fe,Q<(ge&=15)&&(W+=F[B++]<<Q,(Q+=8)<ge&&(W+=F[B++]<<Q,Q+=8)),L<(_e+=W&(1<<ge)-1)){C.msg="invalid distance too far back",A.mode=30;break e}if(W>>>=ge,Q-=ge,(ge=M-O)<_e){if(U<(ge=_e-ge)&&A.sane){C.msg="invalid distance too far back",A.mode=30;break e}if(X=H,(ae=0)===q){if(ae+=V-ge,ge<$e){for($e-=ge;z[M++]=H[ae++],--ge;);ae=M-_e,X=z}}else if(q<ge){if(ae+=V+q-ge,(ge-=q)<$e){for($e-=ge;z[M++]=H[ae++],--ge;);if(ae=0,q<$e){for($e-=ge=q;z[M++]=H[ae++],--ge;);ae=M-_e,X=z}}}else if(ae+=q-ge,ge<$e){for($e-=ge;z[M++]=H[ae++],--ge;);ae=M-_e,X=z}for(;2<$e;)z[M++]=X[ae++],z[M++]=X[ae++],z[M++]=X[ae++],$e-=3;$e&&(z[M++]=X[ae++],1<$e&&(z[M++]=X[ae++]))}else{for(ae=M-_e;z[M++]=z[ae++],z[M++]=z[ae++],z[M++]=z[ae++],2<($e-=3););$e&&(z[M++]=z[ae++],1<$e&&(z[M++]=z[ae++]))}break}}break}}while(B<I&&M<D);B-=$e=Q>>3,W&=(1<<(Q-=$e<<3))-1,C.next_in=B,C.next_out=M,C.avail_in=B<I?I-B+5:5-(B-I),C.avail_out=M<D?D-M+257:257-(M-D),A.hold=W,A.bits=Q}},{}],49:[function(x,E,S){var C=x("../utils/common"),T=x("./adler32"),A=x("./crc32"),B=x("./inffast"),I=x("./inftrees"),M=1,O=2,D=0,L=-2,V=1,U=852,q=592;function H(ae){return(ae>>>24&255)+(ae>>>8&65280)+((65280&ae)<<8)+((255&ae)<<24)}function W(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Q(ae){var X;return ae&&ae.state?(X=ae.state,ae.total_in=ae.total_out=X.total=0,ae.msg="",X.wrap&&(ae.adler=1&X.wrap),X.mode=V,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new C.Buf32(U),X.distcode=X.distdyn=new C.Buf32(q),X.sane=1,X.back=-1,D):L}function re(ae){var X;return ae&&ae.state?((X=ae.state).wsize=0,X.whave=0,X.wnext=0,Q(ae)):L}function ce(ae,X){var F,z;return ae&&ae.state?(z=ae.state,X<0?(F=0,X=-X):(F=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?L:(z.window!==null&&z.wbits!==X&&(z.window=null),z.wrap=F,z.wbits=X,re(ae))):L}function ne(ae,X){var F,z;return ae?(z=new W,(ae.state=z).window=null,(F=ce(ae,X))!==D&&(ae.state=null),F):L}var Y,fe,ge=!0;function $e(ae){if(ge){var X;for(Y=new C.Buf32(512),fe=new C.Buf32(32),X=0;X<144;)ae.lens[X++]=8;for(;X<256;)ae.lens[X++]=9;for(;X<280;)ae.lens[X++]=7;for(;X<288;)ae.lens[X++]=8;for(I(M,ae.lens,0,288,Y,0,ae.work,{bits:9}),X=0;X<32;)ae.lens[X++]=5;I(O,ae.lens,0,32,fe,0,ae.work,{bits:5}),ge=!1}ae.lencode=Y,ae.lenbits=9,ae.distcode=fe,ae.distbits=5}function _e(ae,X,F,z){var J,te=ae.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new C.Buf8(te.wsize)),z>=te.wsize?(C.arraySet(te.window,X,F-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(z<(J=te.wsize-te.wnext)&&(J=z),C.arraySet(te.window,X,F-z,J,te.wnext),(z-=J)?(C.arraySet(te.window,X,F-z,z,0),te.wnext=z,te.whave=te.wsize):(te.wnext+=J,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=J))),0}S.inflateReset=re,S.inflateReset2=ce,S.inflateResetKeep=Q,S.inflateInit=function(ae){return ne(ae,15)},S.inflateInit2=ne,S.inflate=function(ae,X){var F,z,J,te,se,oe,ie,G,j,ee,pe,he,Se,we,xe,Ee,ye,Ce,ve,Be,me,Ie,Ve,Me,Ne=0,Pe=new C.Buf8(4),He=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ae||!ae.state||!ae.output||!ae.input&&ae.avail_in!==0)return L;(F=ae.state).mode===12&&(F.mode=13),se=ae.next_out,J=ae.output,ie=ae.avail_out,te=ae.next_in,z=ae.input,oe=ae.avail_in,G=F.hold,j=F.bits,ee=oe,pe=ie,Ie=D;e:for(;;)switch(F.mode){case V:if(F.wrap===0){F.mode=13;break}for(;j<16;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(2&F.wrap&&G===35615){Pe[F.check=0]=255&G,Pe[1]=G>>>8&255,F.check=A(F.check,Pe,2,0),j=G=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&G)<<8)+(G>>8))%31){ae.msg="incorrect header check",F.mode=30;break}if((15&G)!=8){ae.msg="unknown compression method",F.mode=30;break}if(j-=4,me=8+(15&(G>>>=4)),F.wbits===0)F.wbits=me;else if(me>F.wbits){ae.msg="invalid window size",F.mode=30;break}F.dmax=1<<me,ae.adler=F.check=1,F.mode=512&G?10:12,j=G=0;break;case 2:for(;j<16;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(F.flags=G,(255&F.flags)!=8){ae.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){ae.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=G>>8&1),512&F.flags&&(Pe[0]=255&G,Pe[1]=G>>>8&255,F.check=A(F.check,Pe,2,0)),j=G=0,F.mode=3;case 3:for(;j<32;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.head&&(F.head.time=G),512&F.flags&&(Pe[0]=255&G,Pe[1]=G>>>8&255,Pe[2]=G>>>16&255,Pe[3]=G>>>24&255,F.check=A(F.check,Pe,4,0)),j=G=0,F.mode=4;case 4:for(;j<16;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.head&&(F.head.xflags=255&G,F.head.os=G>>8),512&F.flags&&(Pe[0]=255&G,Pe[1]=G>>>8&255,F.check=A(F.check,Pe,2,0)),j=G=0,F.mode=5;case 5:if(1024&F.flags){for(;j<16;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.length=G,F.head&&(F.head.extra_len=G),512&F.flags&&(Pe[0]=255&G,Pe[1]=G>>>8&255,F.check=A(F.check,Pe,2,0)),j=G=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(oe<(he=F.length)&&(he=oe),he&&(F.head&&(me=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),C.arraySet(F.head.extra,z,te,he,me)),512&F.flags&&(F.check=A(F.check,z,he,te)),oe-=he,te+=he,F.length-=he),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(oe===0)break e;for(he=0;me=z[te+he++],F.head&&me&&F.length<65536&&(F.head.name+=String.fromCharCode(me)),me&&he<oe;);if(512&F.flags&&(F.check=A(F.check,z,he,te)),oe-=he,te+=he,me)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(oe===0)break e;for(he=0;me=z[te+he++],F.head&&me&&F.length<65536&&(F.head.comment+=String.fromCharCode(me)),me&&he<oe;);if(512&F.flags&&(F.check=A(F.check,z,he,te)),oe-=he,te+=he,me)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;j<16;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(G!==(65535&F.check)){ae.msg="header crc mismatch",F.mode=30;break}j=G=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),ae.adler=F.check=0,F.mode=12;break;case 10:for(;j<32;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}ae.adler=F.check=H(G),j=G=0,F.mode=11;case 11:if(F.havedict===0)return ae.next_out=se,ae.avail_out=ie,ae.next_in=te,ae.avail_in=oe,F.hold=G,F.bits=j,2;ae.adler=F.check=1,F.mode=12;case 12:if(X===5||X===6)break e;case 13:if(F.last){G>>>=7&j,j-=7&j,F.mode=27;break}for(;j<3;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}switch(F.last=1&G,j-=1,3&(G>>>=1)){case 0:F.mode=14;break;case 1:if($e(F),F.mode=20,X!==6)break;G>>>=2,j-=2;break e;case 2:F.mode=17;break;case 3:ae.msg="invalid block type",F.mode=30}G>>>=2,j-=2;break;case 14:for(G>>>=7&j,j-=7&j;j<32;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if((65535&G)!=(G>>>16^65535)){ae.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&G,j=G=0,F.mode=15,X===6)break e;case 15:F.mode=16;case 16:if(he=F.length){if(oe<he&&(he=oe),ie<he&&(he=ie),he===0)break e;C.arraySet(J,z,te,he,se),oe-=he,te+=he,ie-=he,se+=he,F.length-=he;break}F.mode=12;break;case 17:for(;j<14;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(F.nlen=257+(31&G),G>>>=5,j-=5,F.ndist=1+(31&G),G>>>=5,j-=5,F.ncode=4+(15&G),G>>>=4,j-=4,286<F.nlen||30<F.ndist){ae.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;j<3;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.lens[He[F.have++]]=7&G,G>>>=3,j-=3}for(;F.have<19;)F.lens[He[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,Ve={bits:F.lenbits},Ie=I(0,F.lens,0,19,F.lencode,0,F.work,Ve),F.lenbits=Ve.bits,Ie){ae.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Ee=(Ne=F.lencode[G&(1<<F.lenbits)-1])>>>16&255,ye=65535&Ne,!((xe=Ne>>>24)<=j);){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(ye<16)G>>>=xe,j-=xe,F.lens[F.have++]=ye;else{if(ye===16){for(Me=xe+2;j<Me;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(G>>>=xe,j-=xe,F.have===0){ae.msg="invalid bit length repeat",F.mode=30;break}me=F.lens[F.have-1],he=3+(3&G),G>>>=2,j-=2}else if(ye===17){for(Me=xe+3;j<Me;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}j-=xe,me=0,he=3+(7&(G>>>=xe)),G>>>=3,j-=3}else{for(Me=xe+7;j<Me;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}j-=xe,me=0,he=11+(127&(G>>>=xe)),G>>>=7,j-=7}if(F.have+he>F.nlen+F.ndist){ae.msg="invalid bit length repeat",F.mode=30;break}for(;he--;)F.lens[F.have++]=me}}if(F.mode===30)break;if(F.lens[256]===0){ae.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,Ve={bits:F.lenbits},Ie=I(M,F.lens,0,F.nlen,F.lencode,0,F.work,Ve),F.lenbits=Ve.bits,Ie){ae.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,Ve={bits:F.distbits},Ie=I(O,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,Ve),F.distbits=Ve.bits,Ie){ae.msg="invalid distances set",F.mode=30;break}if(F.mode=20,X===6)break e;case 20:F.mode=21;case 21:if(6<=oe&&258<=ie){ae.next_out=se,ae.avail_out=ie,ae.next_in=te,ae.avail_in=oe,F.hold=G,F.bits=j,B(ae,pe),se=ae.next_out,J=ae.output,ie=ae.avail_out,te=ae.next_in,z=ae.input,oe=ae.avail_in,G=F.hold,j=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Ee=(Ne=F.lencode[G&(1<<F.lenbits)-1])>>>16&255,ye=65535&Ne,!((xe=Ne>>>24)<=j);){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(Ee&&!(240&Ee)){for(Ce=xe,ve=Ee,Be=ye;Ee=(Ne=F.lencode[Be+((G&(1<<Ce+ve)-1)>>Ce)])>>>16&255,ye=65535&Ne,!(Ce+(xe=Ne>>>24)<=j);){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}G>>>=Ce,j-=Ce,F.back+=Ce}if(G>>>=xe,j-=xe,F.back+=xe,F.length=ye,Ee===0){F.mode=26;break}if(32&Ee){F.back=-1,F.mode=12;break}if(64&Ee){ae.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Ee,F.mode=22;case 22:if(F.extra){for(Me=F.extra;j<Me;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.length+=G&(1<<F.extra)-1,G>>>=F.extra,j-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Ee=(Ne=F.distcode[G&(1<<F.distbits)-1])>>>16&255,ye=65535&Ne,!((xe=Ne>>>24)<=j);){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(!(240&Ee)){for(Ce=xe,ve=Ee,Be=ye;Ee=(Ne=F.distcode[Be+((G&(1<<Ce+ve)-1)>>Ce)])>>>16&255,ye=65535&Ne,!(Ce+(xe=Ne>>>24)<=j);){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}G>>>=Ce,j-=Ce,F.back+=Ce}if(G>>>=xe,j-=xe,F.back+=xe,64&Ee){ae.msg="invalid distance code",F.mode=30;break}F.offset=ye,F.extra=15&Ee,F.mode=24;case 24:if(F.extra){for(Me=F.extra;j<Me;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}F.offset+=G&(1<<F.extra)-1,G>>>=F.extra,j-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){ae.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(ie===0)break e;if(he=pe-ie,F.offset>he){if((he=F.offset-he)>F.whave&&F.sane){ae.msg="invalid distance too far back",F.mode=30;break}Se=he>F.wnext?(he-=F.wnext,F.wsize-he):F.wnext-he,he>F.length&&(he=F.length),we=F.window}else we=J,Se=se-F.offset,he=F.length;for(ie<he&&(he=ie),ie-=he,F.length-=he;J[se++]=we[Se++],--he;);F.length===0&&(F.mode=21);break;case 26:if(ie===0)break e;J[se++]=F.length,ie--,F.mode=21;break;case 27:if(F.wrap){for(;j<32;){if(oe===0)break e;oe--,G|=z[te++]<<j,j+=8}if(pe-=ie,ae.total_out+=pe,F.total+=pe,pe&&(ae.adler=F.check=F.flags?A(F.check,J,pe,se-pe):T(F.check,J,pe,se-pe)),pe=ie,(F.flags?G:H(G))!==F.check){ae.msg="incorrect data check",F.mode=30;break}j=G=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;j<32;){if(oe===0)break e;oe--,G+=z[te++]<<j,j+=8}if(G!==(4294967295&F.total)){ae.msg="incorrect length check",F.mode=30;break}j=G=0}F.mode=29;case 29:Ie=1;break e;case 30:Ie=-3;break e;case 31:return-4;case 32:default:return L}return ae.next_out=se,ae.avail_out=ie,ae.next_in=te,ae.avail_in=oe,F.hold=G,F.bits=j,(F.wsize||pe!==ae.avail_out&&F.mode<30&&(F.mode<27||X!==4))&&_e(ae,ae.output,ae.next_out,pe-ae.avail_out)?(F.mode=31,-4):(ee-=ae.avail_in,pe-=ae.avail_out,ae.total_in+=ee,ae.total_out+=pe,F.total+=pe,F.wrap&&pe&&(ae.adler=F.check=F.flags?A(F.check,J,pe,ae.next_out-pe):T(F.check,J,pe,ae.next_out-pe)),ae.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(ee==0&&pe===0||X===4)&&Ie===D&&(Ie=-5),Ie)},S.inflateEnd=function(ae){if(!ae||!ae.state)return L;var X=ae.state;return X.window&&(X.window=null),ae.state=null,D},S.inflateGetHeader=function(ae,X){var F;return ae&&ae.state&&2&(F=ae.state).wrap?((F.head=X).done=!1,D):L},S.inflateSetDictionary=function(ae,X){var F,z=X.length;return ae&&ae.state?(F=ae.state).wrap!==0&&F.mode!==11?L:F.mode===11&&T(1,X,z,0)!==F.check?-3:_e(ae,X,z,z)?(F.mode=31,-4):(F.havedict=1,D):L},S.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(x,E,S){var C=x("../utils/common"),T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],A=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],I=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(M,O,D,L,V,U,q,H){var W,Q,re,ce,ne,Y,fe,ge,$e,_e=H.bits,ae=0,X=0,F=0,z=0,J=0,te=0,se=0,oe=0,ie=0,G=0,j=null,ee=0,pe=new C.Buf16(16),he=new C.Buf16(16),Se=null,we=0;for(ae=0;ae<=15;ae++)pe[ae]=0;for(X=0;X<L;X++)pe[O[D+X]]++;for(J=_e,z=15;1<=z&&pe[z]===0;z--);if(z<J&&(J=z),z===0)return V[U++]=20971520,V[U++]=20971520,H.bits=1,0;for(F=1;F<z&&pe[F]===0;F++);for(J<F&&(J=F),ae=oe=1;ae<=15;ae++)if(oe<<=1,(oe-=pe[ae])<0)return-1;if(0<oe&&(M===0||z!==1))return-1;for(he[1]=0,ae=1;ae<15;ae++)he[ae+1]=he[ae]+pe[ae];for(X=0;X<L;X++)O[D+X]!==0&&(q[he[O[D+X]]++]=X);if(Y=M===0?(j=Se=q,19):M===1?(j=T,ee-=257,Se=A,we-=257,256):(j=B,Se=I,-1),ae=F,ne=U,se=X=G=0,re=-1,ce=(ie=1<<(te=J))-1,M===1&&852<ie||M===2&&592<ie)return 1;for(;;){for(fe=ae-se,$e=q[X]<Y?(ge=0,q[X]):q[X]>Y?(ge=Se[we+q[X]],j[ee+q[X]]):(ge=96,0),W=1<<ae-se,F=Q=1<<te;V[ne+(G>>se)+(Q-=W)]=fe<<24|ge<<16|$e|0,Q!==0;);for(W=1<<ae-1;G&W;)W>>=1;if(W!==0?(G&=W-1,G+=W):G=0,X++,--pe[ae]==0){if(ae===z)break;ae=O[D+q[X]]}if(J<ae&&(G&ce)!==re){for(se===0&&(se=J),ne+=F,oe=1<<(te=ae-se);te+se<z&&!((oe-=pe[te+se])<=0);)te++,oe<<=1;if(ie+=1<<te,M===1&&852<ie||M===2&&592<ie)return 1;V[re=G&ce]=J<<24|te<<16|ne-U|0}}return G!==0&&(V[ne+G]=ae-se<<24|64<<16|0),H.bits=J,0}},{"../utils/common":41}],51:[function(x,E,S){E.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(x,E,S){var C=x("../utils/common"),T=0,A=1;function B(Ne){for(var Pe=Ne.length;0<=--Pe;)Ne[Pe]=0}var I=0,M=29,O=256,D=O+1+M,L=30,V=19,U=2*D+1,q=15,H=16,W=7,Q=256,re=16,ce=17,ne=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_e=new Array(2*(D+2));B(_e);var ae=new Array(2*L);B(ae);var X=new Array(512);B(X);var F=new Array(256);B(F);var z=new Array(M);B(z);var J,te,se,oe=new Array(L);function ie(Ne,Pe,He,We,Ke){this.static_tree=Ne,this.extra_bits=Pe,this.extra_base=He,this.elems=We,this.max_length=Ke,this.has_stree=Ne&&Ne.length}function G(Ne,Pe){this.dyn_tree=Ne,this.max_code=0,this.stat_desc=Pe}function j(Ne){return Ne<256?X[Ne]:X[256+(Ne>>>7)]}function ee(Ne,Pe){Ne.pending_buf[Ne.pending++]=255&Pe,Ne.pending_buf[Ne.pending++]=Pe>>>8&255}function pe(Ne,Pe,He){Ne.bi_valid>H-He?(Ne.bi_buf|=Pe<<Ne.bi_valid&65535,ee(Ne,Ne.bi_buf),Ne.bi_buf=Pe>>H-Ne.bi_valid,Ne.bi_valid+=He-H):(Ne.bi_buf|=Pe<<Ne.bi_valid&65535,Ne.bi_valid+=He)}function he(Ne,Pe,He){pe(Ne,He[2*Pe],He[2*Pe+1])}function Se(Ne,Pe){for(var He=0;He|=1&Ne,Ne>>>=1,He<<=1,0<--Pe;);return He>>>1}function we(Ne,Pe,He){var We,Ke,Ge=new Array(q+1),nt=0;for(We=1;We<=q;We++)Ge[We]=nt=nt+He[We-1]<<1;for(Ke=0;Ke<=Pe;Ke++){var ot=Ne[2*Ke+1];ot!==0&&(Ne[2*Ke]=Se(Ge[ot]++,ot))}}function xe(Ne){var Pe;for(Pe=0;Pe<D;Pe++)Ne.dyn_ltree[2*Pe]=0;for(Pe=0;Pe<L;Pe++)Ne.dyn_dtree[2*Pe]=0;for(Pe=0;Pe<V;Pe++)Ne.bl_tree[2*Pe]=0;Ne.dyn_ltree[2*Q]=1,Ne.opt_len=Ne.static_len=0,Ne.last_lit=Ne.matches=0}function Ee(Ne){8<Ne.bi_valid?ee(Ne,Ne.bi_buf):0<Ne.bi_valid&&(Ne.pending_buf[Ne.pending++]=Ne.bi_buf),Ne.bi_buf=0,Ne.bi_valid=0}function ye(Ne,Pe,He,We){var Ke=2*Pe,Ge=2*He;return Ne[Ke]<Ne[Ge]||Ne[Ke]===Ne[Ge]&&We[Pe]<=We[He]}function Ce(Ne,Pe,He){for(var We=Ne.heap[He],Ke=He<<1;Ke<=Ne.heap_len&&(Ke<Ne.heap_len&&ye(Pe,Ne.heap[Ke+1],Ne.heap[Ke],Ne.depth)&&Ke++,!ye(Pe,We,Ne.heap[Ke],Ne.depth));)Ne.heap[He]=Ne.heap[Ke],He=Ke,Ke<<=1;Ne.heap[He]=We}function ve(Ne,Pe,He){var We,Ke,Ge,nt,ot=0;if(Ne.last_lit!==0)for(;We=Ne.pending_buf[Ne.d_buf+2*ot]<<8|Ne.pending_buf[Ne.d_buf+2*ot+1],Ke=Ne.pending_buf[Ne.l_buf+ot],ot++,We===0?he(Ne,Ke,Pe):(he(Ne,(Ge=F[Ke])+O+1,Pe),(nt=Y[Ge])!==0&&pe(Ne,Ke-=z[Ge],nt),he(Ne,Ge=j(--We),He),(nt=fe[Ge])!==0&&pe(Ne,We-=oe[Ge],nt)),ot<Ne.last_lit;);he(Ne,Q,Pe)}function Be(Ne,Pe){var He,We,Ke,Ge=Pe.dyn_tree,nt=Pe.stat_desc.static_tree,ot=Pe.stat_desc.has_stree,Ze=Pe.stat_desc.elems,Re=-1;for(Ne.heap_len=0,Ne.heap_max=U,He=0;He<Ze;He++)Ge[2*He]!==0?(Ne.heap[++Ne.heap_len]=Re=He,Ne.depth[He]=0):Ge[2*He+1]=0;for(;Ne.heap_len<2;)Ge[2*(Ke=Ne.heap[++Ne.heap_len]=Re<2?++Re:0)]=1,Ne.depth[Ke]=0,Ne.opt_len--,ot&&(Ne.static_len-=nt[2*Ke+1]);for(Pe.max_code=Re,He=Ne.heap_len>>1;1<=He;He--)Ce(Ne,Ge,He);for(Ke=Ze;He=Ne.heap[1],Ne.heap[1]=Ne.heap[Ne.heap_len--],Ce(Ne,Ge,1),We=Ne.heap[1],Ne.heap[--Ne.heap_max]=He,Ne.heap[--Ne.heap_max]=We,Ge[2*Ke]=Ge[2*He]+Ge[2*We],Ne.depth[Ke]=(Ne.depth[He]>=Ne.depth[We]?Ne.depth[He]:Ne.depth[We])+1,Ge[2*He+1]=Ge[2*We+1]=Ke,Ne.heap[1]=Ke++,Ce(Ne,Ge,1),2<=Ne.heap_len;);Ne.heap[--Ne.heap_max]=Ne.heap[1],function(be,Ae){var Le,Xe,Qe,et,St,mt,dt=Ae.dyn_tree,jt=Ae.max_code,Ct=Ae.stat_desc.static_tree,Rt=Ae.stat_desc.has_stree,ur=Ae.stat_desc.extra_bits,Gt=Ae.stat_desc.extra_base,Nt=Ae.stat_desc.max_length,er=0;for(et=0;et<=q;et++)be.bl_count[et]=0;for(dt[2*be.heap[be.heap_max]+1]=0,Le=be.heap_max+1;Le<U;Le++)Nt<(et=dt[2*dt[2*(Xe=be.heap[Le])+1]+1]+1)&&(et=Nt,er++),dt[2*Xe+1]=et,jt<Xe||(be.bl_count[et]++,St=0,Gt<=Xe&&(St=ur[Xe-Gt]),mt=dt[2*Xe],be.opt_len+=mt*(et+St),Rt&&(be.static_len+=mt*(Ct[2*Xe+1]+St)));if(er!==0){do{for(et=Nt-1;be.bl_count[et]===0;)et--;be.bl_count[et]--,be.bl_count[et+1]+=2,be.bl_count[Nt]--,er-=2}while(0<er);for(et=Nt;et!==0;et--)for(Xe=be.bl_count[et];Xe!==0;)jt<(Qe=be.heap[--Le])||(dt[2*Qe+1]!==et&&(be.opt_len+=(et-dt[2*Qe+1])*dt[2*Qe],dt[2*Qe+1]=et),Xe--)}}(Ne,Pe),we(Ge,Re,Ne.bl_count)}function me(Ne,Pe,He){var We,Ke,Ge=-1,nt=Pe[1],ot=0,Ze=7,Re=4;for(nt===0&&(Ze=138,Re=3),Pe[2*(He+1)+1]=65535,We=0;We<=He;We++)Ke=nt,nt=Pe[2*(We+1)+1],++ot<Ze&&Ke===nt||(ot<Re?Ne.bl_tree[2*Ke]+=ot:Ke!==0?(Ke!==Ge&&Ne.bl_tree[2*Ke]++,Ne.bl_tree[2*re]++):ot<=10?Ne.bl_tree[2*ce]++:Ne.bl_tree[2*ne]++,Ge=Ke,Re=(ot=0)===nt?(Ze=138,3):Ke===nt?(Ze=6,3):(Ze=7,4))}function Ie(Ne,Pe,He){var We,Ke,Ge=-1,nt=Pe[1],ot=0,Ze=7,Re=4;for(nt===0&&(Ze=138,Re=3),We=0;We<=He;We++)if(Ke=nt,nt=Pe[2*(We+1)+1],!(++ot<Ze&&Ke===nt)){if(ot<Re)for(;he(Ne,Ke,Ne.bl_tree),--ot!=0;);else Ke!==0?(Ke!==Ge&&(he(Ne,Ke,Ne.bl_tree),ot--),he(Ne,re,Ne.bl_tree),pe(Ne,ot-3,2)):ot<=10?(he(Ne,ce,Ne.bl_tree),pe(Ne,ot-3,3)):(he(Ne,ne,Ne.bl_tree),pe(Ne,ot-11,7));Ge=Ke,Re=(ot=0)===nt?(Ze=138,3):Ke===nt?(Ze=6,3):(Ze=7,4)}}B(oe);var Ve=!1;function Me(Ne,Pe,He,We){pe(Ne,(I<<1)+(We?1:0),3),function(Ke,Ge,nt,ot){Ee(Ke),ot&&(ee(Ke,nt),ee(Ke,~nt)),C.arraySet(Ke.pending_buf,Ke.window,Ge,nt,Ke.pending),Ke.pending+=nt}(Ne,Pe,He,!0)}S._tr_init=function(Ne){Ve||(function(){var Pe,He,We,Ke,Ge,nt=new Array(q+1);for(Ke=We=0;Ke<M-1;Ke++)for(z[Ke]=We,Pe=0;Pe<1<<Y[Ke];Pe++)F[We++]=Ke;for(F[We-1]=Ke,Ke=Ge=0;Ke<16;Ke++)for(oe[Ke]=Ge,Pe=0;Pe<1<<fe[Ke];Pe++)X[Ge++]=Ke;for(Ge>>=7;Ke<L;Ke++)for(oe[Ke]=Ge<<7,Pe=0;Pe<1<<fe[Ke]-7;Pe++)X[256+Ge++]=Ke;for(He=0;He<=q;He++)nt[He]=0;for(Pe=0;Pe<=143;)_e[2*Pe+1]=8,Pe++,nt[8]++;for(;Pe<=255;)_e[2*Pe+1]=9,Pe++,nt[9]++;for(;Pe<=279;)_e[2*Pe+1]=7,Pe++,nt[7]++;for(;Pe<=287;)_e[2*Pe+1]=8,Pe++,nt[8]++;for(we(_e,D+1,nt),Pe=0;Pe<L;Pe++)ae[2*Pe+1]=5,ae[2*Pe]=Se(Pe,5);J=new ie(_e,Y,O+1,D,q),te=new ie(ae,fe,0,L,q),se=new ie(new Array(0),ge,0,V,W)}(),Ve=!0),Ne.l_desc=new G(Ne.dyn_ltree,J),Ne.d_desc=new G(Ne.dyn_dtree,te),Ne.bl_desc=new G(Ne.bl_tree,se),Ne.bi_buf=0,Ne.bi_valid=0,xe(Ne)},S._tr_stored_block=Me,S._tr_flush_block=function(Ne,Pe,He,We){var Ke,Ge,nt=0;0<Ne.level?(Ne.strm.data_type===2&&(Ne.strm.data_type=function(ot){var Ze,Re=4093624447;for(Ze=0;Ze<=31;Ze++,Re>>>=1)if(1&Re&&ot.dyn_ltree[2*Ze]!==0)return T;if(ot.dyn_ltree[18]!==0||ot.dyn_ltree[20]!==0||ot.dyn_ltree[26]!==0)return A;for(Ze=32;Ze<O;Ze++)if(ot.dyn_ltree[2*Ze]!==0)return A;return T}(Ne)),Be(Ne,Ne.l_desc),Be(Ne,Ne.d_desc),nt=function(ot){var Ze;for(me(ot,ot.dyn_ltree,ot.l_desc.max_code),me(ot,ot.dyn_dtree,ot.d_desc.max_code),Be(ot,ot.bl_desc),Ze=V-1;3<=Ze&&ot.bl_tree[2*$e[Ze]+1]===0;Ze--);return ot.opt_len+=3*(Ze+1)+5+5+4,Ze}(Ne),Ke=Ne.opt_len+3+7>>>3,(Ge=Ne.static_len+3+7>>>3)<=Ke&&(Ke=Ge)):Ke=Ge=He+5,He+4<=Ke&&Pe!==-1?Me(Ne,Pe,He,We):Ne.strategy===4||Ge===Ke?(pe(Ne,2+(We?1:0),3),ve(Ne,_e,ae)):(pe(Ne,4+(We?1:0),3),function(ot,Ze,Re,be){var Ae;for(pe(ot,Ze-257,5),pe(ot,Re-1,5),pe(ot,be-4,4),Ae=0;Ae<be;Ae++)pe(ot,ot.bl_tree[2*$e[Ae]+1],3);Ie(ot,ot.dyn_ltree,Ze-1),Ie(ot,ot.dyn_dtree,Re-1)}(Ne,Ne.l_desc.max_code+1,Ne.d_desc.max_code+1,nt+1),ve(Ne,Ne.dyn_ltree,Ne.dyn_dtree)),xe(Ne),We&&Ee(Ne)},S._tr_tally=function(Ne,Pe,He){return Ne.pending_buf[Ne.d_buf+2*Ne.last_lit]=Pe>>>8&255,Ne.pending_buf[Ne.d_buf+2*Ne.last_lit+1]=255&Pe,Ne.pending_buf[Ne.l_buf+Ne.last_lit]=255&He,Ne.last_lit++,Pe===0?Ne.dyn_ltree[2*He]++:(Ne.matches++,Pe--,Ne.dyn_ltree[2*(F[He]+O+1)]++,Ne.dyn_dtree[2*j(Pe)]++),Ne.last_lit===Ne.lit_bufsize-1},S._tr_align=function(Ne){pe(Ne,2,3),he(Ne,Q,_e),function(Pe){Pe.bi_valid===16?(ee(Pe,Pe.bi_buf),Pe.bi_buf=0,Pe.bi_valid=0):8<=Pe.bi_valid&&(Pe.pending_buf[Pe.pending++]=255&Pe.bi_buf,Pe.bi_buf>>=8,Pe.bi_valid-=8)}(Ne)}},{"../utils/common":41}],53:[function(x,E,S){E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(x,E,S){(function(C){(function(T,A){if(!T.setImmediate){var B,I,M,O,D=1,L={},V=!1,U=T.document,q=Object.getPrototypeOf&&Object.getPrototypeOf(T);q=q&&q.setTimeout?q:T,B={}.toString.call(T.process)==="[object process]"?function(re){browser$1$1.nextTick(function(){W(re)})}:function(){if(T.postMessage&&!T.importScripts){var re=!0,ce=T.onmessage;return T.onmessage=function(){re=!1},T.postMessage("","*"),T.onmessage=ce,re}}()?(O="setImmediate$"+Math.random()+"$",T.addEventListener?T.addEventListener("message",Q,!1):T.attachEvent("onmessage",Q),function(re){T.postMessage(O+re,"*")}):T.MessageChannel?((M=new MessageChannel).port1.onmessage=function(re){W(re.data)},function(re){M.port2.postMessage(re)}):U&&"onreadystatechange"in U.createElement("script")?(I=U.documentElement,function(re){var ce=U.createElement("script");ce.onreadystatechange=function(){W(re),ce.onreadystatechange=null,I.removeChild(ce),ce=null},I.appendChild(ce)}):function(re){setTimeout(W,0,re)},q.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ce=new Array(arguments.length-1),ne=0;ne<ce.length;ne++)ce[ne]=arguments[ne+1];var Y={callback:re,args:ce};return L[D]=Y,B(D),D++},q.clearImmediate=H}function H(re){delete L[re]}function W(re){if(V)setTimeout(W,0,re);else{var ce=L[re];if(ce){V=!0;try{(function(ne){var Y=ne.callback,fe=ne.args;switch(fe.length){case 0:Y();break;case 1:Y(fe[0]);break;case 2:Y(fe[0],fe[1]);break;case 3:Y(fe[0],fe[1],fe[2]);break;default:Y.apply(A,fe)}})(ce)}finally{H(re),V=!1}}}}function Q(re){re.source===T&&typeof re.data=="string"&&re.data.indexOf(O)===0&&W(+re.data.slice(O.length))}})(typeof self>"u"?C===void 0?this:C:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),e$1=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}return"showOpenFilePicker"in self})();e$1?Promise.resolve().then(function(){return l}):Promise.resolve().then(function(){return v$1});e$1?Promise.resolve().then(function(){return y}):Promise.resolve().then(function(){return b});const a=e$1?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k});async function o(...n){return(await a).default(...n)}const s$3=async n=>{const _=await n.getFile();return _.handle=n,_};var c$1=async(n=[{}])=>{Array.isArray(n)||(n=[n]);const _=[];n.forEach((S,C)=>{_[C]={description:S.description||"Files",accept:{}},S.mimeTypes?S.mimeTypes.map(T=>{_[C].accept[T]=S.extensions||[]}):_[C].accept["*/*"]=S.extensions||[]});const x=await window.showOpenFilePicker({id:n[0].id,startIn:n[0].startIn,types:_,multiple:n[0].multiple||!1,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1}),E=await Promise.all(x.map(s$3));return n[0].multiple?E:E[0]},l={__proto__:null,default:c$1};function u(n){function _(x){if(Object(x)!==x)return Promise.reject(new TypeError(x+" is not an object."));var E=x.done;return Promise.resolve(x.value).then(function(S){return{value:S,done:E}})}return u=function(x){this.s=x,this.n=x.next},u.prototype={s:null,n:null,next:function(){return _(this.n.apply(this.s,arguments))},return:function(x){var E=this.s.return;return E===void 0?Promise.resolve({value:x,done:!0}):_(E.apply(this.s,arguments))},throw:function(x){var E=this.s.return;return E===void 0?Promise.reject(x):_(E.apply(this.s,arguments))}},new u(n)}const p=async(n,_,x=n.name,E)=>{const S=[],C=[];var T,A=!1,B=!1;try{for(var I,M=function(O){var D,L,V,U=2;for(typeof Symbol<"u"&&(L=Symbol.asyncIterator,V=Symbol.iterator);U--;){if(L&&(D=O[L])!=null)return D.call(O);if(V&&(D=O[V])!=null)return new u(D.call(O));L="@@asyncIterator",V="@@iterator"}throw new TypeError("Object is not async iterable")}(n.values());A=!(I=await M.next()).done;A=!1){const O=I.value,D=`${x}/${O.name}`;O.kind==="file"?C.push(O.getFile().then(L=>(L.directoryHandle=n,L.handle=O,Object.defineProperty(L,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>D})))):O.kind!=="directory"||!_||E&&E(O)||S.push(p(O,_,D,E))}}catch(O){B=!0,T=O}finally{try{A&&M.return!=null&&await M.return()}finally{if(B)throw T}}return[...(await Promise.all(S)).flat(),...await Promise.all(C)]};var d=async(n={})=>{n.recursive=n.recursive||!1,n.mode=n.mode||"read";const _=await window.showDirectoryPicker({id:n.id,startIn:n.startIn,mode:n.mode});return(await(await _.values()).next()).done?[_]:p(_,n.recursive,void 0,n.skipDirectory)},y={__proto__:null,default:d},f$1=async(n,_=[{}],x=null,E=!1,S=null)=>{Array.isArray(_)||(_=[_]),_[0].fileName=_[0].fileName||"Untitled";const C=[];let T=null;if(n instanceof Blob&&n.type?T=n.type:n.headers&&n.headers.get("content-type")&&(T=n.headers.get("content-type")),_.forEach((I,M)=>{C[M]={description:I.description||"Files",accept:{}},I.mimeTypes?(M===0&&T&&I.mimeTypes.push(T),I.mimeTypes.map(O=>{C[M].accept[O]=I.extensions||[]})):T?C[M].accept[T]=I.extensions||[]:C[M].accept["*/*"]=I.extensions||[]}),x)try{await x.getFile()}catch(I){if(x=null,E)throw I}const A=x||await window.showSaveFilePicker({suggestedName:_[0].fileName,id:_[0].id,startIn:_[0].startIn,types:C,excludeAcceptAllOption:_[0].excludeAcceptAllOption||!1});!x&&S&&S(A);const B=await A.createWritable();return"stream"in n?(await n.stream().pipeTo(B),A):"body"in n?(await n.body.pipeTo(B),A):(await B.write(await n),await B.close(),A)},m={__proto__:null,default:f$1},w=async(n=[{}])=>(Array.isArray(n)||(n=[n]),new Promise((_,x)=>{const E=document.createElement("input");E.type="file";const S=[...n.map(B=>B.mimeTypes||[]),...n.map(B=>B.extensions||[])].join();E.multiple=n[0].multiple||!1,E.accept=S||"",E.style.display="none",document.body.append(E);const C=B=>{typeof T=="function"&&T(),_(B)},T=n[0].legacySetup&&n[0].legacySetup(C,()=>T(x),E),A=()=>{window.removeEventListener("focus",A),E.remove()};E.addEventListener("click",()=>{window.addEventListener("focus",A)}),E.addEventListener("change",()=>{window.removeEventListener("focus",A),E.remove(),C(E.multiple?Array.from(E.files):E.files[0])}),"showPicker"in HTMLInputElement.prototype?E.showPicker():E.click()})),v$1={__proto__:null,default:w},h=async(n=[{}])=>(Array.isArray(n)||(n=[n]),n[0].recursive=n[0].recursive||!1,new Promise((_,x)=>{const E=document.createElement("input");E.type="file",E.webkitdirectory=!0;const S=T=>{typeof C=="function"&&C(),_(T)},C=n[0].legacySetup&&n[0].legacySetup(S,()=>C(x),E);E.addEventListener("change",()=>{let T=Array.from(E.files);n[0].recursive?n[0].recursive&&n[0].skipDirectory&&(T=T.filter(A=>A.webkitRelativePath.split("/").every(B=>!n[0].skipDirectory({name:B,kind:"directory"})))):T=T.filter(A=>A.webkitRelativePath.split("/").length===2),S(T)}),"showPicker"in HTMLInputElement.prototype?E.showPicker():E.click()})),b={__proto__:null,default:h},P=async(n,_={})=>{Array.isArray(_)&&(_=_[0]);const x=document.createElement("a");let E=n;"body"in n&&(E=await async function(T,A){const B=T.getReader(),I=new ReadableStream({start:D=>async function L(){return B.read().then(({done:V,value:U})=>{if(!V)return D.enqueue(U),L();D.close()})}()}),M=new Response(I),O=await M.blob();return B.releaseLock(),new Blob([O],{type:A})}(n.body,n.headers.get("content-type"))),x.download=_.fileName||"Untitled",x.href=URL.createObjectURL(await E);const S=()=>{typeof C=="function"&&C()},C=_.legacySetup&&_.legacySetup(S,()=>C(),x);return x.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(x.href),3e4),S()}),x.click(),null},k={__proto__:null,default:P};function normalizeArray(n,_){for(var x=0,E=n.length-1;E>=0;E--){var S=n[E];S==="."?n.splice(E,1):S===".."?(n.splice(E,1),x++):x&&(n.splice(E,1),x--)}if(_)for(;x--;x)n.unshift("..");return n}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(n){return splitPathRe.exec(n).slice(1)};function resolve$2(){for(var n="",_=!1,x=arguments.length-1;x>=-1&&!_;x--){var E=x>=0?arguments[x]:"/";if(typeof E!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!E)continue;n=E+"/"+n,_=E.charAt(0)==="/"}return n=normalizeArray(filter$1(n.split("/"),function(S){return!!S}),!_).join("/"),(_?"/":"")+n||"."}function normalize(n){var _=isAbsolute(n),x=substr(n,-1)==="/";return n=normalizeArray(filter$1(n.split("/"),function(E){return!!E}),!_).join("/"),!n&&!_&&(n="."),n&&x&&(n+="/"),(_?"/":"")+n}function isAbsolute(n){return n.charAt(0)==="/"}function join$1(){var n=Array.prototype.slice.call(arguments,0);return normalize(filter$1(n,function(_,x){if(typeof _!="string")throw new TypeError("Arguments to path.join must be strings");return _}).join("/"))}function relative(n,_){n=resolve$2(n).substr(1),_=resolve$2(_).substr(1);function x(I){for(var M=0;M<I.length&&I[M]==="";M++);for(var O=I.length-1;O>=0&&I[O]==="";O--);return M>O?[]:I.slice(M,O-M+1)}for(var E=x(n.split("/")),S=x(_.split("/")),C=Math.min(E.length,S.length),T=C,A=0;A<C;A++)if(E[A]!==S[A]){T=A;break}for(var B=[],A=T;A<E.length;A++)B.push("..");return B=B.concat(S.slice(T)),B.join("/")}var sep="/",delimiter=":";function dirname(n){var _=splitPath(n),x=_[0],E=_[1];return!x&&!E?".":(E&&(E=E.substr(0,E.length-1)),x+E)}function basename(n,_){var x=splitPath(n)[2];return _&&x.substr(-1*_.length)===_&&(x=x.substr(0,x.length-_.length)),x}function extname(n){return splitPath(n)[3]}const path={extname,basename,dirname,sep,delimiter,relative,join:join$1,isAbsolute,normalize,resolve:resolve$2};function filter$1(n,_){if(n.filter)return n.filter(_);for(var x=[],E=0;E<n.length;E++)_(n[E],E,n)&&x.push(n[E]);return x}var substr="ab".substr(-1)==="b"?function(n,_,x){return n.substr(_,x)}:function(n,_,x){return _<0&&(_=n.length+_),n.substr(_,x)};const path$1=Object.freeze(Object.defineProperty({__proto__:null,basename,default:path,delimiter,dirname,extname,isAbsolute,join:join$1,normalize,relative,resolve:resolve$2,sep},Symbol.toStringTag,{value:"Module"}));function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof browser$1$1<"u"&&typeof browser$1$1.versions=="object"&&browser$1$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser$1=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer$1=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function traduire(n,_){const x=_.find(S=>n[S]!==void 0);return x?n[x]:void 0}async function zipper(n,_,x){x.endsWith(".zip")||(x=`${x}.zip`);const E=new JSZip;for(const C of n)E.file(C.nom,C.octets);const S=E.folder("sfip");for(const C of _)S.file(C.nom,C.octets);await sauvegarderFichierZip({fichierZip:E,nomFichier:x})}async function sauvegarderFichierZip({fichierZip:n,nomFichier:_}){if(isNode||isElectronMain){const x=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),E=n.generateNodeStream();x.mkdirSync(path.dirname(_),{recursive:!0});const S=x.createWriteStream(_),C=E.pipe(S);return new Promise(T=>C.on("finish",T))}else{const x=await n.generateAsync({type:"blob"});await o(x,{fileName:_})}}var encode_1$6=encode$t,MSB$5=128,REST$5=127,MSBALL$4=~REST$5,INT$4=Math.pow(2,31);function encode$t(n,_,x){_=_||[],x=x||0;for(var E=x;n>=INT$4;)_[x++]=n&255|MSB$5,n/=128;for(;n&MSBALL$4;)_[x++]=n&255|MSB$5,n>>>=7;return _[x]=n|0,encode$t.bytes=x-E+1,_}var decode$w=read$8,MSB$1$4=128,REST$1$4=127;function read$8(n,E){var x=0,E=E||0,S=0,C=E,T,A=n.length;do{if(C>=A)throw read$8.bytes=0,new RangeError("Could not decode varint");T=n[C++],x+=S<28?(T&REST$1$4)<<S:(T&REST$1$4)*Math.pow(2,S),S+=7}while(T>=MSB$1$4);return read$8.bytes=C-E,x}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$4=function(n){return n<N1$4?1:n<N2$4?2:n<N3$4?3:n<N4$4?4:n<N5$4?5:n<N6$4?6:n<N7$4?7:n<N8$4?8:n<N9$4?9:10},varint$4={encode:encode_1$6,decode:decode$w,encodingLength:length$4},_brrp_varint$4=varint$4;const decode$v=(n,_=0)=>[_brrp_varint$4.decode(n,_),_brrp_varint$4.decode.bytes],encodeTo$4=(n,_,x=0)=>(_brrp_varint$4.encode(n,_,x),_),encodingLength$4=n=>_brrp_varint$4.encodingLength(n),equals$8=(n,_)=>{if(n===_)return!0;if(n.byteLength!==_.byteLength)return!1;for(let x=0;x<n.byteLength;x++)if(n[x]!==_[x])return!1;return!0},coerce$5=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},fromString$6=n=>new TextEncoder().encode(n),toString$a=n=>new TextDecoder().decode(n),create$7=(n,_)=>{const x=_.byteLength,E=encodingLength$4(n),S=E+encodingLength$4(x),C=new Uint8Array(S+x);return encodeTo$4(n,C,0),encodeTo$4(x,C,E),C.set(_,S),new Digest$4(n,x,_,C)},decode$u=n=>{const _=coerce$5(n),[x,E]=decode$v(_),[S,C]=decode$v(_.subarray(E)),T=_.subarray(E+C);if(T.byteLength!==S)throw new Error("Incorrect length");return new Digest$4(x,S,T,_)},equals$7=(n,_)=>n===_?!0:n.code===_.code&&n.size===_.size&&equals$8(n.bytes,_.bytes);let Digest$4=class{constructor(_,x,E,S){this.code=_,this.size=x,this.digest=E,this.bytes=S}};function base$8(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$8=base$8,_brrp__multiformats_scope_baseX$5=src$8;let Encoder$6=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$6=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or$5(this,_)}},ComposedDecoder$5=class{constructor(_){this.decoders=_}or(_){return or$5(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$5=(n,_)=>new ComposedDecoder$5({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$6=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$6(_,x,E),this.decoder=new Decoder$6(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$9=({name:n,prefix:_,encode:x,decode:E})=>new Codec$6(n,_,x,E),baseX$5=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX$5(x,_);return from$9({prefix:n,name:_,encode:E,decode:C=>coerce$5(S(C))})},decode$t=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$s=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648$5=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$9({prefix:_,name:n,encode(S){return encode$s(S,E,x)},decode(S){return decode$t(S,E,x,n)}}),base58btc$5=baseX$5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$5,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"}));let CID$3=class gn{constructor(_,x,E,S){this.code=x,this.version=_,this.multihash=E,this.bytes=S,this.byteOffset=S.byteOffset,this.byteLength=S.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$2,version:readonly$2,multihash:readonly$2,bytes:readonly$2,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:_,multihash:x}=this;if(_!==DAG_PB_CODE$3)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(x.code!==SHA_256_CODE$3)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return gn.createV0(x)}}}toV1(){switch(this.version){case 0:{const{code:_,digest:x}=this.multihash,E=create$7(_,x);return gn.createV1(this.code,E)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(_){return _&&this.code===_.code&&this.version===_.version&&equals$7(this.multihash,_.multihash)}toString(_){const{bytes:x,version:E,_baseCache:S}=this;switch(E){case 0:return toStringV0$3(x,S,_||base58btc$5.encoder);default:return toStringV1$3(x,S,_||base32$5.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(_){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION),!!(_&&(_[cidSymbol$3]||_.asCID===_))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(_){if(_ instanceof gn)return _;if(_!=null&&_.asCID===_){const{version:x,code:E,multihash:S,bytes:C}=_;return new gn(x,E,S,C||encodeCID$3(x,E,S.bytes))}else if(_!=null&&_[cidSymbol$3]===!0){const{version:x,multihash:E,code:S}=_,C=decode$u(E);return gn.create(x,S,C)}else return null}static create(_,x,E){if(typeof x!="number")throw new Error("String codecs are no longer supported");switch(_){case 0:{if(x!==DAG_PB_CODE$3)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$3}) block encoding`);return new gn(_,x,E,E.bytes)}case 1:{const S=encodeCID$3(_,x,E.bytes);return new gn(_,x,E,S)}default:throw new Error("Invalid version")}}static createV0(_){return gn.create(0,DAG_PB_CODE$3,_)}static createV1(_,x){return gn.create(1,_,x)}static decode(_){const[x,E]=gn.decodeFirst(_);if(E.length)throw new Error("Incorrect length");return x}static decodeFirst(_){const x=gn.inspectBytes(_),E=x.size-x.multihashSize,S=coerce$5(_.subarray(E,E+x.multihashSize));if(S.byteLength!==x.multihashSize)throw new Error("Incorrect length");const C=S.subarray(x.multihashSize-x.digestSize),T=new Digest$4(x.multihashCode,x.digestSize,C,S);return[x.version===0?gn.createV0(T):gn.createV1(x.codec,T),_.subarray(x.size)]}static inspectBytes(_){let x=0;const E=()=>{const[O,D]=decode$v(_.subarray(x));return x+=D,O};let S=E(),C=DAG_PB_CODE$3;if(S===18?(S=0,x=0):S===1&&(C=E()),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const T=x,A=E(),B=E(),I=x+B,M=I-T;return{version:S,codec:C,multihashCode:A,digestSize:B,multihashSize:M,size:I}}static parse(_,x){const[E,S]=parseCIDtoBytes$3(_,x),C=gn.decode(S);return C._baseCache.set(E,_),C}};const parseCIDtoBytes$3=(n,_)=>{switch(n[0]){case"Q":{const x=_||base58btc$5;return[base58btc$5.prefix,x.decode(`${base58btc$5.prefix}${n}`)]}case base58btc$5.prefix:{const x=_||base58btc$5;return[base58btc$5.prefix,x.decode(n)]}case base32$5.prefix:{const x=_||base32$5;return[base32$5.prefix,x.decode(n)]}default:{if(_==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],_.decode(n)]}}},toStringV0$3=(n,_,x)=>{const{prefix:E}=x;if(E!==base58btc$5.prefix)throw Error(`Cannot string encode V0 in ${x.name} encoding`);const S=_.get(E);if(S==null){const C=x.encode(n).slice(1);return _.set(E,C),C}else return S},toStringV1$3=(n,_,x)=>{const{prefix:E}=x,S=_.get(E);if(S==null){const C=x.encode(n);return _.set(E,C),C}else return S},DAG_PB_CODE$3=112,SHA_256_CODE$3=18,encodeCID$3=(n,_,x)=>{const E=encodingLength$4(n),S=E+encodingLength$4(_),C=new Uint8Array(S+x.byteLength);return encodeTo$4(n,C,0),encodeTo$4(_,C,E),C.set(x,S),C},cidSymbol$3=Symbol.for("@ipld/js-cid/CID"),readonly$2={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$k="0.0.0-dev",deprecate$1=(n,_)=>{if(n.test(version$k))console.warn(_);else throw new Error(_)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;function asUint8Array$2(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function alloc$2(n=0){return globalThis.Buffer?.alloc!=null?asUint8Array$2(globalThis.Buffer.alloc(n)):new Uint8Array(n)}function allocUnsafe$2(n=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function concat$5(n,_){_==null&&(_=n.reduce((S,C)=>S+C.length,0));const x=allocUnsafe$2(_);let E=0;for(const S of n)x.set(S,E),E+=S.length;return asUint8Array$2(x)}function cidValide(n){if(typeof n=="string")try{return CID$3.parse(n),!0}catch{return!1}return!1}async function toBuffer$2(n,_){let x=new Uint8Array(0);for await(const E of n)if(x=concat$5([x,E],x.length+E.length),_!==void 0&&x.length>_)return null;return x}const orbitdb_isValidAdresse=n=>{const _=T=>T!==""&&T!==" ";n=n.toString().replace(/\\/g,"/");const x=(T,A)=>!((A===0||A===1)&&n.toString().indexOf("/orbit")===0&&T==="orbitdb"),E=n.toString().split("/").filter(x).filter(_);let S;const C=T=>{const A=["zd","Qm","ba","k5"];for(const B of A)if(T.indexOf(B)>-1)return!0;return!1};try{S=C(E[0])?CID$3.parse(E[0]).toString():null}catch{return!1}return S!==null};function adresseOrbiteValide(n){return typeof n=="string"&&n.startsWith("/orbitdb/")&&orbitdb_isValidAdresse(n)}class metteurUneFois extends eventsExports.EventEmitter{constructor(x,E){super();$t(this,"condition");$t(this,"rsultatPrt");$t(this,"fOublier");$t(this,"rsultat");$t(this,"f");this.condition=E||(()=>!0),this.rsultatPrt=!1,this.f=x,this.initialiser()}async initialiser(){const x=async E=>{this.condition(E)&&(this.rsultat=E,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(x),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}}const suivreBdDeFonction=async({fRacine:n,f:_,fSuivre:x})=>{let E,S,C=!0;const T=await n({fSuivreRacine:async A=>{A===void 0&&C&&(C=!1,await _(void 0)),A!==S&&(S=A,E&&await E(),S?E=await x({id:S,fSuivreBd:_}):(await _(void 0),E=void 0))}});return async()=>{await T(),E&&await E()}},uneFois=async function(n,_){const x=new metteurUneFois(n,_);return(await once_1(x,"fini"))[0]},faisRien=async()=>{},ignorerNonDfinis=n=>async _=>{if(_!==void 0)return await n(_)};var typeDetect$1={exports:{}};(function(n,_){(function(x,E){n.exports=E()})(commonjsGlobal,function(){var x=typeof Promise=="function",E=typeof self=="object"?self:commonjsGlobal,S=typeof Symbol<"u",C=typeof Map<"u",T=typeof Set<"u",A=typeof WeakMap<"u",B=typeof WeakSet<"u",I=typeof DataView<"u",M=S&&typeof Symbol.iterator<"u",O=S&&typeof Symbol.toStringTag<"u",D=T&&typeof Set.prototype.entries=="function",L=C&&typeof Map.prototype.entries=="function",V=D&&Object.getPrototypeOf(new Set().entries()),U=L&&Object.getPrototypeOf(new Map().entries()),q=M&&typeof Array.prototype[Symbol.iterator]=="function",H=q&&Object.getPrototypeOf([][Symbol.iterator]()),W=M&&typeof String.prototype[Symbol.iterator]=="function",Q=W&&Object.getPrototypeOf(""[Symbol.iterator]()),re=8,ce=-1;function ne(Y){var fe=typeof Y;if(fe!=="object")return fe;if(Y===null)return"null";if(Y===E)return"global";if(Array.isArray(Y)&&(O===!1||!(Symbol.toStringTag in Y)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&Y===window.location)return"Location";if(typeof window.document=="object"&&Y===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&Y===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&Y===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&Y instanceof window.HTMLElement){if(Y.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(Y.tagName==="TD")return"HTMLTableDataCellElement";if(Y.tagName==="TH")return"HTMLTableHeaderCellElement"}}var ge=O&&Y[Symbol.toStringTag];if(typeof ge=="string")return ge;var $e=Object.getPrototypeOf(Y);return $e===RegExp.prototype?"RegExp":$e===Date.prototype?"Date":x&&$e===Promise.prototype?"Promise":T&&$e===Set.prototype?"Set":C&&$e===Map.prototype?"Map":B&&$e===WeakSet.prototype?"WeakSet":A&&$e===WeakMap.prototype?"WeakMap":I&&$e===DataView.prototype?"DataView":C&&$e===U?"Map Iterator":T&&$e===V?"Set Iterator":q&&$e===H?"Array Iterator":W&&$e===Q?"String Iterator":$e===null?"Object":Object.prototype.toString.call(Y).slice(re,ce)}return ne})})(typeDetect$1);var typeDetectExports=typeDetect$1.exports;const typeDetect=getDefaultExportFromCjs(typeDetectExports),isBufferExists=typeof Buffer<"u",isBufferFromExists=isBufferExists&&typeof Buffer.from<"u",isBuffer$6=isBufferExists?function(_){return Buffer.isBuffer(_)}:function(){return!1},copy$2=isBufferFromExists?function(_){return Buffer.from(_)}:isBufferExists?function(_){return new Buffer(_)}:function(_){return _};function detectType(n){return isBuffer$6(n)?"Buffer":typeDetect(n)}const collectionTypeSet=new Set(["Arguments","Array","Map","Object","Set"]);function get$3(n,_,x=null){switch(x||detectType(n)){case"Arguments":case"Array":case"Object":return n[_];case"Map":return n.get(_);case"Set":return _}}function isCollection(n){return collectionTypeSet.has(n)}function set$1(n,_,x,E=null){switch(E||detectType(n)){case"Arguments":case"Array":case"Object":n[_]=x;break;case"Map":n.set(_,x);break;case"Set":n.add(x);break}return n}const freeGlobalThis=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,freeGlobal=typeof global<"u"&&global!==null&&global.Object===Object&&global,freeSelf=typeof self<"u"&&self!==null&&self.Object===Object&&self,globalObject=freeGlobalThis||freeGlobal||freeSelf||Function("return this")();function copyArrayBuffer(n){return n.slice(0)}function copyBoolean(n){return new Boolean(n.valueOf())}function copyDataView(n){return new DataView(n.buffer)}function copyBuffer(n){return copy$2(n)}function copyDate(n){return new Date(n.getTime())}function copyNumber(n){return new Number(n)}function copyRegExp(n){return new RegExp(n.source,n.flags)}function copyString(n){return new String(n)}function copyTypedArray(n,_){return globalObject[_].from?globalObject[_].from(n):new globalObject[_](n)}function shallowCopy$1(n){return n}function getEmptyArray(){return[]}function getEmptyMap(){return new Map}function getEmptyObject(){return{}}function getEmptySet(){return new Set}const copyMap=new Map([["ArrayBuffer",copyArrayBuffer],["Boolean",copyBoolean],["Buffer",copyBuffer],["DataView",copyDataView],["Date",copyDate],["Number",copyNumber],["RegExp",copyRegExp],["String",copyString],["Float32Array",copyTypedArray],["Float64Array",copyTypedArray],["Int16Array",copyTypedArray],["Int32Array",copyTypedArray],["Int8Array",copyTypedArray],["Uint16Array",copyTypedArray],["Uint32Array",copyTypedArray],["Uint8Array",copyTypedArray],["Uint8ClampedArray",copyTypedArray],["Array Iterator",shallowCopy$1],["Map Iterator",shallowCopy$1],["Promise",shallowCopy$1],["Set Iterator",shallowCopy$1],["String Iterator",shallowCopy$1],["function",shallowCopy$1],["global",shallowCopy$1],["WeakMap",shallowCopy$1],["WeakSet",shallowCopy$1],["boolean",shallowCopy$1],["null",shallowCopy$1],["number",shallowCopy$1],["string",shallowCopy$1],["symbol",shallowCopy$1],["undefined",shallowCopy$1],["Arguments",getEmptyArray],["Array",getEmptyArray],["Map",getEmptyMap],["Object",getEmptyObject],["Set",getEmptySet]]);function noop$7(){}function copy$1(n,_=null,x=noop$7){arguments.length===2&&typeof _=="function"&&(x=_,_=null);const E=_||detectType(n),S=copyMap.get(E);if(E==="Object"){const C=x(n,E);if(C!==void 0)return C}return S?S(n,E):n}function deepcopy(n,_={}){typeof _=="function"&&(_={customizer:_});const{customizer:x}=_,E=detectType(n);if(!isCollection(E))return recursiveCopy(n,null,null,null);const S=copy$1(n,E,x),C=new WeakMap([[n,S]]),T=new WeakSet([n]);return recursiveCopy(n,S,C,T)}function recursiveCopy(n,_,x,E,S){const C=detectType(n),T=copy$1(n,C);if(!isCollection(C))return T;let A;switch(C){case"Arguments":case"Array":A=Object.keys(n);break;case"Object":A=Object.keys(n),A.push(...Object.getOwnPropertySymbols(n));break;case"Map":case"Set":A=n.keys();break}for(let B of A){const I=get$3(n,B,C);if(E.has(I))set$1(_,B,x.get(I),C);else{const M=detectType(I),O=copy$1(I,M);isCollection(M)&&(x.set(I,O),E.add(I)),set$1(_,B,recursiveCopy(I,O,x,E),C)}}return _}class {constructor({:_,_:x,_:E,:S,:C}){$t(this,"");$t(this,"_");$t(this,"_");$t(this,"");$t(this,"");this.=_,this._=x,this._=E,this.=._({:S,_:x,_:E,:C}),this.=Object.assign({},,C)}static _({:_,_:x,_:E,:S}){const C=deepcopy(_),T=C.tableaux.find(B=>B.clef===x);if(!T)throw new Error("    .");return T.cols.find(B=>B.idColonne===(S?.__||__))||(T.cols.push({idVariable:S?.__||__,idColonne:S?.__||__}),C.tableaux=C.tableaux.map(B=>B.clef===x?T:B)),C.nues||(C.nues=[]),C.nues.includes(E)||C.nues.push(E),C}static async ({:_,:x,_:E,:S}){if(!_.nues||!_.bds)throw new Error(" ");const C=await _.nues.crerNue({});x=this._({:x,_:E,_:C,:S});for(const B of x.tableaux){const I=await _.nues.ajouterTableauNue({idNue:C,clefTableau:B.clef});for(const M of B.cols)await _.nues.ajouterColonneTableauNue({idTableau:I,idVariable:M.idVariable,idColonne:M.idColonne}),M.index&&await _.nues.changerColIndexTableauNue({idTableau:I,idColonne:M.idColonne,val:!0});x.motsClefs&&await _.nues.ajouterMotsClefsNue({idNue:C,idsMotsClefs:x.motsClefs})}const T={licence:x.licence,motsClefs:x.motsClefs,nues:[C],tableaux:x.tableaux.map(B=>B.clef===E?{clef:B.clef,cols:[...B.cols,{idColonne:S?.__||__,idVariable:S?.__||__,index:!0}]}:B)},A=await _.bds.crerBdDeSchma({schma:T});return await _.nues.sauvegarderMtadonneNue({idNue:C,clef:___,valeur:A}),C}async __({:_}){return suivreBdDeFonction({fRacine:async({fSuivreRacine:x})=>await this.__({:x}),f:ignorerNonDfinis(_),fSuivre:async({id:x,fSuivreBd:E})=>await this..bds.suivreDonnesDeTableauParClef({idBd:x,clefTableau:this._,f:E})})}async _({:_}){return await this..nues.suivreDonnesTableauNue({idNue:this._,clefTableau:this._,f:async x=>{await _(x.map(E=>({:E.idCompte,:E.lment.empreinte,:E.lment.donnes})))},nRsultatsDsirs:1e3})}async __({:_}){return await this..bds.suivreDonnesDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,f:async x=>{const E=await this..obtIdCompte();await _(x.map(S=>({:E,:S.empreinte,:S.donnes})))}})}async ({:_}){const x=E=>E[this..__]?E:{...E,[this..__]:Date.now()};await this..bds.ajouterlmentTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:x(_)})}async _({:_}){return await this..bds.effacerlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,empreinte:_})}async _({:_,:x}){await this..bds.modifierlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:_,empreintePrcdente:x})}async __({:_}){const x=async E=>{const S=E[this..___];if(typeof S=="string")return await _(S)};return await this..nues.suivreMtadonnesNue({idNue:this._,f:x})}async __(){return await uneFois(async x=>await this.__({:x}))}async ({:_}){const x=await this.__(),E=Object.assign({},_.,{[this..__]:_.});await this..bds.ajouterlmentTableauParClef({idBd:x,clefTableau:this._,vals:E})}async __({:_}){const x=await this.__();await this..bds.effacerlmentDeTableauParClef({idBd:x,clefTableau:this._,empreintelment:_})}async __({:_,:x}){const E=await this.__();await this..bds.modifierlmentDeTableauParClef({idBd:E,clefTableau:this._,empreintelment:x,vals:_})}async _({:_,:x=""}){const E={:[],:[]},S=this..tableaux.find(B=>B.clef===this._)?.cols.filter(B=>B.index).map(B=>B.idColonne)||[],C=async()=>{const B=[...E.];for(const I of E.){const M=B.find(O=>S.every(D=>O[D]===I[D]));if(M){const O=M[this..__],D=I[this..__];O&&D&&D>O&&B.push(I)}else B.push(I)}return await _(B)},A=[await this.__({:async B=>{E.=B.map(I=>I.donnes),await C()}})];if(x===""){const B=await this._({:async I=>{E.=I.map(M=>({[this..__]:M.,...M.})),await C()}});A.push(B.fOublier)}else if(x===""){const B=await this.__({:async I=>{E.=I.map(M=>({[this..__]:M.,...M.})),await C()}});A.push(B)}return async()=>{await Promise.all(A.map(B=>B()))}}}const jaqblKikajtzkChabl="chab'l",jaqblKikajtzkTzibanem="tzib'anem",runukMolajKel="",retalTzibNuchabl="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY/c0e399ba-391c-4b85-b69c-7e8fe5eda4a1",runukRucheelRunukChabl="runukChabl",runukRucheelRajilankChabl="rajilankChabl",runukRucheelRubiChabl="rubiChabl",runukRucheelRutzibanemChabl="rutzibanemChabl",runukRucheelRunukGlChabl="gl",runukRucheelRunukI1Chabl="i1",runukRucheelRunukI2Chabl="i2",runukRucheelRunukI3Chabl="i3",runukRujalojRunukChabl="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN/7affb315-cbda-471b-ab38-4b510be31f80",runukRujalojRajilankChabl="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",runukRujalojRubiChabl="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM/23617e18-1cd6-4e98-9eb8-f779c6ac54db",runukRujalojRutzibanemChabl="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV/2c33ece9-a19c-4713-aac0-104478e142ae",runukRujalojRunukGlChabl="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt/ed95ff2b-0f30-41a4-8efd-92196b65dab7",runukRujalojRunukI1Chabl="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY/62569dba-f8d3-4c7a-ba3d-d07fac9d55e0",runukRujalojRunukI2Chabl="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS/43cd5ea5-8080-4d55-b5a1-8b782509423f",runukRujalojRunukI3Chabl="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC/430bb19c-b541-4b88-85a0-e4ef9b8b9b29",runukRucheelRunukTzib="runukTzib",runukRucheelRajilankTzib="rajilankTzib",runukRucheelRubiTzib="rubiTzib",runukRucheelRucholanemTzib="rucholanemTzib",runukRucheelRutzibTzib="rutzibTzib",runukRujalojRunukTzib="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P/5e71fe3b-3eb9-4574-b2b5-d8d9f3f82a63",runukRujalojRajilankTzib="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou/03c04f10-4807-43f1-8e7e-1e43c048ef34",runukRujalojRubiTzib="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6/e45c68b2-2387-4092-b6be-3c50b3a5e884",runukRujalojRucholanemTzib="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe/026952f2-38f5-4d18-95ca-d99114e2cc1e",runukRujalojRutzibTzib="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz/3212b086-1480-4c9a-aa0e-0b5e98247ce4",RubanikilRuxeelTzij={licence:"ODbl-1_0",motsClefs:[retalTzibNuchabl],tableaux:[{cols:[{idColonne:runukRucheelRunukChabl,idVariable:runukRujalojRunukChabl,index:!0},{idColonne:runukRucheelRajilankChabl,idVariable:runukRujalojRajilankChabl},{idColonne:runukRucheelRubiChabl,idVariable:runukRujalojRubiChabl},{idColonne:runukRucheelRutzibanemChabl,idVariable:runukRujalojRutzibanemChabl},{idColonne:runukRucheelRunukGlChabl,idVariable:runukRujalojRunukGlChabl},{idColonne:runukRucheelRunukI1Chabl,idVariable:runukRujalojRunukI1Chabl},{idColonne:runukRucheelRunukI2Chabl,idVariable:runukRujalojRunukI2Chabl},{idColonne:runukRucheelRunukI3Chabl,idVariable:runukRujalojRunukI3Chabl}],clef:jaqblKikajtzkChabl},{cols:[{idColonne:runukRucheelRunukTzib,idVariable:runukRujalojRunukTzib,index:!0},{idColonne:runukRucheelRajilankTzib,idVariable:runukRujalojRajilankTzib},{idColonne:runukRucheelRubiTzib,idVariable:runukRujalojRubiTzib},{idColonne:runukRucheelRucholanemTzib,idVariable:runukRujalojRucholanemTzib},{idColonne:runukRucheelRutzibTzib,idVariable:runukRujalojRutzibTzib}],clef:jaqblKikajtzkTzibanem}]},tachojmisajKel=({chumil:n})=>{const _=new ({:n,_:jaqblKikajtzkChabl,:RubanikilRuxeelTzij,_:runukMolajKel}),x=new ({:n,_:jaqblKikajtzkTzibanem,:RubanikilRuxeelTzij,_:runukMolajKel});return{kelChabl:_,kelTzibanem:x}},kaq={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},fr={aj:"latin","rb'":"franais",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},cst={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},nl={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},en$1={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},kny={"rb'":"Kanyen'k:ha",ajilank:"latin",rn:{}},sw={aj:"latin","rb'":"Kiswahili",rn:{}},yo={aj:"latin","rb'":"Yorb",rn:{gl:"yoru1245",i1:"yo"}},rw={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},de={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},_retamablChabl={kaq,fr,:{aj:"","rb'":"",tz:"",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst,nl,en:en$1,:{aj:"","rb'":"",tz:"",rn:{gl:"west2386",i3:"pnb"}},:{aj:"","rb'":"",tz:"",rn:{gl:"panj1256",i1:"pa"}},:{aj:"","rb'":"",rn:{gl:"",i1:"hi"}},:{aj:"","rb'":"",rn:{gl:"guja1252",i1:"gu"}},:{aj:"","rb'":"",rn:{gl:"beng1280",i1:"bn"}},:{"rb'":"",rn:{gl:"telu1262",i1:"te"},aj:""},:{"rb'":"",rn:{},aj:""},:{"rb'":"",rn:{i1:"ar"},aj:""},:{aj:"","rb'":"",tz:"",rn:{gl:"urdu1245",i1:"ur"}},:{aj:"","rb'":"",tz:"",rn:{gl:"cent1989",i1:"km"}},:{aj:"","rb'":"",tz:"",rn:{gl:"west2369",i1:"fa"}},:{aj:"","rb'":"",rn:{gl:"mara1378",i1:"mr"}},:{aj:"","rb'":"",rn:{gl:"mala1464",i1:"ml"}},:{aj:"","rb'":"",rn:{gl:"nepa1254",i1:"ne"}},:{"rb'":"",aj:"",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny,:{aj:"","rb'":"",tz:"",rn:{gl:"sini1245",i1:"zh"}},:{aj:"","rb'":"",tz:"",rn:{gl:"taib1240",i3:"goyu"}},:{aj:"","rb'":"",rn:{gl:"nucl1643",i1:"ja"}},sw,yo,rw,de},ltn={"rb'":"latin",ch:"",aj:"latin",tz:"[A-Za-z-----------------------]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},_retamablTzibanem={ltn,:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD807[\uDFC0-\uDFF1\uDFFF]"},:{"rb'":"",ch:"",aj:"",tz:"[--------------------]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},:{"rb'":"",ch:"",aj:""},:{"rb'":"",ch:"",aj:"",tz:"[------------]"},:{"rb'":"",ch:"",aj:"",tz:"[-----------]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]"},:{"rb'":"",ch:"",aj:"",tz:"[----]"},:{"rb'":"",ch:"",aj:"",tz:"[----]|\uD806[\uDF00-\uDF09]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[--]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]||[-------]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[--]"}};class Nuchabl{constructor({chumil:_}){$t(this,"retamablChablChumil");$t(this,"retamablTzibanemChumil");$t(this,"vnements");$t(this,"chumil");$t(this,"tamestajKel");this.chumil=_,this.retamablChablChumil={},this.retamablTzibanemChumil={},this.vnements=new eventsExports.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabl:_,kelTzibanem:x}=tachojmisajKel({chumil:this.chumil}),E=await _.__({:C=>{this.retamablChablChumil=tajalPaRubanikilRetamabalChabl(C),this.xujalRi()}}),S=await x.__({:C=>{this.retamablTzibanemChumil=tajalPaRubanikilRetamabalTzibanem(C),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([E(),S()])}}}xujalRi(){this.vnements.emit("xujalRi'")}get retamablChabl(){return merge$1(_retamablChabl,this.retamablChablChumil)}get retamablTzibanem(){return merge$1(_retamablTzibanem,this.retamablTzibanemChumil)}get konojelChabl(){return Object.keys(this.retamablChabl)}get konojelTzibanem(){return Object.keys(this.retamablTzibanem)}runukChabl({chabl:_,runukulem:x}){const E=Object.keys(this.retamablChabl).find(C=>this.retamablChabl[C]["rb'"]===_);if(!x||!E)return E;x=x.toLowerCase();const S=this.retamablChabl[E].rn;return x==="iso"?[S.i1,S.i2,S.i3].find(C=>C):S[rkxnkNklm[x]||x]}rubiChabl({runuk:_,runukulem:x}){const E=x?.toLowerCase();let S;return E===void 0?S=this.retamablChabl[_]:E==="iso"?S=Object.values(this.retamablChabl).find(C=>[C.rn.i1,C.rn.i2,C.rn.i3].some(T=>T===_)):Object.keys(rkxnkNklm).includes(E)&&(S=Object.values(this.retamablChabl).find(C=>C.rn[rkxnkNklm[E]]===_)),S?S["rb'"]:void 0}rutzibanemChabl({runuk:_}){const E=this.retamablChabl[_]?.tz;if(E)return E;for(const S in this.konojelTzibanem){const C=this.rutzibTzibanem({runuk:S});if(C&&_.match(new RegExp(C,"g")))return S}}rajilankChabl({runuk:_}){const x=this.retamablChabl[_];if(x)return x.aj;const E=this.rutzibanemChabl({runuk:_});return E?this.rajilankTzibanem({runuk:E}):void 0}rubiTzibanem({runuk:_}){const x=this.retamablTzibanem[_];return x?x["rb'"]:void 0}runukTzibanem({tzibanem:_}){return Object.keys(this.retamablTzibanem).find(x=>this.retamablChabl[x]["rb'"]===_)}rucholanemTzibanem({runuk:_}){return this.retamablTzibanem[_]?.ch}rutzibTzibanem({runuk:_}){return this.retamablTzibanem[_]?.tz}rajilankTzibanem({runuk:_}){return this.retamablTzibanem[_]?.aj}tatzeqelbej(_){return this.vnements.on("xujalRi'",_),_(),()=>{this.vnements.off("xujalRi'",_)}}tatzeqelbejRetamablChabl({sm:_}){return this.tatzeqelbej(()=>_(this.retamablChabl))}tatzeqelbejRetamablTzibanem({sm:_}){return this.tatzeqelbej(()=>_(this.retamablTzibanem))}tatzeqelbejKonojelChabl({sm:_}){return this.tatzeqelbej(()=>_(this.konojelChabl))}tatzeqelbejKonojelTzibanem({sm:_}){return this.tatzeqelbej(()=>_(this.konojelTzibanem))}tatzeqelbejRunukChabl({sm:_,chabl:x,runukulem:E}){return this.tatzeqelbej(()=>_(this.runukChabl({chabl:x,runukulem:E})))}tatzeqelbejRubiChabl({sm:_,runuk:x,runukulem:E}){return this.tatzeqelbej(()=>_(this.rubiChabl({runuk:x,runukulem:E})))}tatzeqelbejRutzibanemChabl({sm:_,runuk:x}){return this.tatzeqelbej(()=>_(this.rutzibanemChabl({runuk:x})))}tatzeqelbejRajilankChabl({sm:_,runuk:x}){return this.tatzeqelbej(()=>_(this.rajilankChabl({runuk:x})))}tatzeqelbejRubiTzibanem({sm:_,runuk:x}){return this.tatzeqelbej(()=>_(this.rubiTzibanem({runuk:x})))}tatzeqelbejRunukTzibanem({sm:_,tzibanem:x}){return this.tatzeqelbej(()=>_(this.runukTzibanem({tzibanem:x})))}tatzeqelbejRucholanemTzibanem({sm:_,runuk:x}){return this.tatzeqelbej(()=>_(this.rucholanemTzibanem({runuk:x})))}tatzeqelbejRajilankTzibanem({sm:_,runuk:x}){return this.tatzeqelbej(()=>_(this.rajilankTzibanem({runuk:x})))}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const rkxnkNklm={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},tajalPaRubanikilRetamabalChabl=n=>{const _={};for(const x of n)_[x.donnes[runukRucheelRunukChabl]]={aj:x.donnes[runukRucheelRajilankChabl],"rb'":x.donnes[runukRucheelRubiChabl],tz:x.donnes[runukRucheelRutzibanemChabl],rn:{gl:x.donnes[runukRucheelRunukGlChabl],i1:x.donnes[runukRucheelRunukI1Chabl],i2:x.donnes[runukRucheelRunukI2Chabl],i3:x.donnes[runukRucheelRunukI3Chabl]}};return _},tajalPaRubanikilRetamabalTzibanem=n=>{const _={};for(const x of n)_[x.donnes[runukRucheelRunukTzib]]={aj:x.donnes[runukRucheelRajilankTzib],"rb'":x.donnes[runukRucheelRubiTzib],ch:x.donnes[runukRucheelRucholanemTzib],tz:x.donnes[runukRucheelRutzibTzib]};return _},latin={:"",:"latn",:"0123456789",:"eE",:"."},_={latin,"Mayab'":{:"",:null,:""},:{:"",:null,:""},:{:"",:"deva",:"",:""},:{:"",:"guru",:"",:""},:{:"",:"gujr",:""}," ":{:"",:"mlym",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},:{:"",:"taml",:"",:"",:{"":10,"":100,"":1e3}}," ":{:"",:"tamldec",:"",:""},:{:"",:"arabext",:"",:"",:"."},:{:"",:"arab",:"",:"",:"."},:{:"",:"orya",:""},:{:"",:"beng",:"",:""},:{:"",:"knda",:""},:{:"",:"telu",:""},"":{:"",:"brah",:""},"":{:"",:"cakm",:""},"":{:"",:"nkoo",:""},"":{:"",:"saur",:""}," ":{:"",:"olck",:""}," ":{:"",:"sinh",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},"":{:"",:"bali",:""},"":{:"",:"cham",:""},"":{:"",:"java",:""},:{:"",:"thai",:"",:""},:{:"",:"laoo",:""},"":{:"",:"tibt",:""},"":{:"",:"mymrshan",:""},"":{:"",:"mymrtlng",:""},"":{:"",:"mymr",:""}," ":{:"",:"kali",:""},"":{:"",:"talu",:""},"":{:"",:"ahom",:""},"":{:"",:"bhks",:""},"":{:"",:"gong",:""},"":{:"",:"gonm",:""},"":{:"",:"rohg",:""},"  ":{:"",:"hmng",:""},"":{:"",:"hmng",:""},:{:"",:"khmr",:""}," - lek nai tam":{:"",:"lana",:""}," - lek hora":{:"",:"lanatham",:""},"":{:"",:"lepc",:""}," ":{:"",:"limb",:""}," ":{:"",:"mong",:""},"":{:"",:"mtei",:""},"":{:"",:"sund",:""},"":{:"",:"sind",:""},"":{:"",:"modi",:""},"":{:"",:"mroo",:""}," ":{:"",:"newa",:""},"":{:"",:"vaii",:""},"":{:"",:"osma",:""},"":{:"",:"shrd",:""},:{:"",:"ethi",:"0",:{"":10,"":20,"":30,"":40,"":50,"":60,"":70,"":80,"":90,"":100,"":1e4}}," ":{:"",:"sora",:""},"":{:"",:"takr",:""},"":{:"",:"tirh",:""}," ":{:"",:"wara",:""},"":{:"",:null,:""},"":{:"",:"wcho",:""},"":{:"",:"adlm",:""},:{:"",:"hans",:"",:"",:".",:{:10,:100,:1e3,:1e4,:1e8,:1e12,:1e16,:1e20,:1e24,:1e28,:1e32,:1e36,:1e40,:1e44}},:{:"",:"hanidec",:"",:"",:"."},:{:"",:null,:""}},_="",__="",__="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb/b4949e9f-bab6-4057-b13a-1d66ae6e93ee",___="",___="",____="",___="",___="",___="",___="",___="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",___="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn/aa379217-bb8f-4050-b807-3394e46dab51",____="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo/02e278a4-d9cd-4548-9148-f69a91e7bb99",___="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k/53411a0f-a4ab-4c0f-93bd-1fa9dcdd9acb",___="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp/e4d10758-41fd-4e97-92a8-e6fff65d402e",___="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s/0f17278e-5ffd-45ee-b55e-6ad061f55350",___="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa/77be95cc-c216-4f86-b794-29a3037aa953",_={licence:"ODbl-1_0",motsClefs:[__],tableaux:[{cols:[{idColonne:___,idVariable:___,index:!0},{idColonne:___,idVariable:___},{idColonne:____,idVariable:____},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___}],clef:_}]},_=({:n})=>new ({:n,_,:_,_:__});class {constructor({:_}){$t(this,"_");$t(this,"");$t(this,"");$t(this,"_");this.=_,this._={},this.=new eventsExports.EventEmitter,this.__()}async __(){if(this.){const _=_({:this.});this._=await _.__({:x=>{this._=___(x),this._()}})}}_(){this..emit("")}get (){return merge$1(_,this._)}get (){return Object.keys(this.)}_({:_}){const x=this.[_];if(!x)throw Error(`   ${_}`);return x}_({:_,_:x}){const{:E,:S}=x,C=x.||".",T=[...E],A=_<0;_=Math.abs(_);const B=_.toString().split(".")[1];let I=this.__(_,T,S);return I.length===0&&(I=T[0]),A&&(I="-"+I),B&&(I+=C[0]+[...B].map(M=>E[parseInt(M)]).join("")),I}_({:_,_:x}){const E=x.,S=[...x.],C=x.||".",T=_[0]==="-";T?_=_.slice(1):_=_.replace(/^\++/,"");const[A,B]=_.split(C[0]);let I=0;if(A){const M=[...A].map(D=>E[D]||S.indexOf(D)).reverse(),O=D=>{const L=D[0],V=D.slice(1).find(re=>re>L),U=(V?D.slice(1).indexOf(V):D.slice(1).length)+1,q=D.slice(1,U),H=q.length?O(q):1,W=D.slice(U),Q=W.length?O(W):0;return L*H+Q};I=O(M)}return B!==void 0&&B.length&&(I+=parseFloat("."+[...B].map(M=>S.indexOf(M).toString()).join(""))),T&&(I*=-1),I}_({:_,_:x}){const E=[...x.],S=E.length,C=(x.||".")[0];if(S===10){let M=_.toString();return M.includes(".")&&(M=M.replace(".",C)),Array.prototype.map.call(M,O=>O===C?O:E[parseInt(O)]).join("")}if(_===0)return E[0];const T=_<0;let A=_%1;A=parseFloat(A.toFixed(_(_))),_=Math.abs(_);let B="";for(;_;)B=E[Math.floor(_%S)]+B,_=Math.floor(_/S);A&&(B+=C);let I;for(;A!==0;)I=_(A),A*=S,B+=E[Math.floor(A)],A-=Math.floor(A),A=parseFloat(A.toFixed(I));return T&&(B="-"+B),B}_({:_,:x,_:E}){const S=[...E.],C=E.||"eE",T=S.length,A=E.||".";if(_=_.replace(/^\++/,""),C.split("").some(B=>_.includes(B))){const[B,I]=_.split(RegExp(C));return this._({:B,:x,_:E})*T**this.({:I,:x})}if(T===10){for(const[B,I]of S.entries())_=_.replace(I,B.toString());for(const B of A.split(""))_=_.replace(B,".");return parseFloat(_)}else{let B=0;const I=_.split(/\./);let M=I[0];const O=I[1],D=M[0]==="-";if(M=M.replace(/^-+/,""),M)for(const L of M)B*=T,B+=S.indexOf(L);if(O){let L=T;for(const V of O)B+=S.indexOf(V)/L,B=parseFloat(B.toFixed(_(1/L))),L*=T}return B=D?-B:B,B}}({:_,:x}){const E=this._({:x});return E.===""?this._({:_,_:E}):this._({:_,_:E})}({:_,:x}){const E=x?[x]:this.;for(const S of E)try{const C=this._({:S});return this._({:_,:S,_:C})}catch{continue}throw new Error(`${_}    .`)}_({:_,:x,_:E}){const S=E.;if(S==="")return this._({:_,:x,_:E});if(S==="")return this._({:_,_:E});throw Error(`    ${S}`)}__(_,x,E){let S=_,C="";for(const[T,A]of Object.entries(E).sort((B,I)=>I[1]-B[1])){const B=Math.floor(S/A);B&&(S-=B*A,B!==1&&(C+=this.__(B,x,E)),C+=T)}return S&&(C=C+x[Math.floor(S)]),C}(_){return this..on("",_),_(),()=>{this..off("",_)}}_({:_}){return this.(()=>_(this.))}_({:_,:x,:E}){return this.(()=>E(this.({:_,:x})))}_({:_,:x,:E}){return this.(()=>E(this.({:_,:x})))}async (){this._&&await this._()}}function _(n){const _=n.toString();if(_.includes("e")){const[x,E]=_.split("e-");return parseInt(E)+x.length}else return _.length}function ___(n){const _={};for(const x of n){const E=x.donnes[___],S=x.donnes[___];if(E===""){const C={:E,:x.donnes[___],:x.donnes[____],:x.donnes[___],:x.donnes[___]};_[S]=C}else if(E===""){const C=x.donnes[___];if(!C)throw new Error(`${S}     .`);const T={:E,:x.donnes[___],:x.donnes[____],:x.donnes[___],:JSON.parse(C),:x.donnes[___]};_[S]=T}}return _}const crerNuchabl=({constellation:n})=>new Nuchabl({chumil:n}),crerEnnikai=({constellation:n})=>new ({:n}),crerLocales=({langue:n,languesAlternatives:_=[]})=>{const x=api$3.get("paramtres.langue");let E;try{E=x?JSON.parse(x):void 0}catch{}const S=ref$1(Array.isArray(E)?E:[n,..._]),C=ref$1();return{langueEtAlternatives:S,slectionNumration:C}},utiliserLangues=()=>{const n=inject$1("locales");if(!n)throw new Error("Locales non installes");const _=n.locales.langueEtAlternatives,x=computed(()=>_.value[0]),E=computed(()=>_.value.slice(1));return{langue:x,languesAlternatives:E,choisirLangues:A=>{Array.isArray(A)?A.length&&(_.value=A):_.value=[A,..._.value.filter(B=>B!==A)],api$3.set("paramtres.langue",JSON.stringify(_.value))},traduireNom:A=>{const I=inject$1("locales")?.nuchabl;return computed(()=>{for(const O of _.value)if(A.value[O])return A.value[O];const M=I?.rutzibanemChabl({runuk:_.value[0]});for(const O of _.value)if(M&&M===I?.rutzibanemChabl({runuk:O}))return A.value[O];return Object.values(A.value)[0]})},langueDroiteGauche:()=>{const B=inject$1("locales")?.nuchabl;return computed(()=>{const I=B?.rutzibanemChabl({runuk:x.value});if(!I)return!1;const M=B?.rucholanemTzibanem({runuk:I});return M?M==="":!1})}}},utiliserNumration=()=>{const n=inject$1("locales");if(!n)throw new Error("Locales non installes");const _=n.nuchabl,x=n.,{langue:E}=utiliserLangues(),S=ref$1(_.rajilankChabl({runuk:E.value}));let C;watchEffect(()=>{C&&C(),C=_?.tatzeqelbejRajilankChabl({runuk:E.value,sm:D=>S.value=D})}),onUnmounted(()=>{C&&C()});const T=ref$1(x.);let A;watchEffect(()=>{A=x._({:D=>T.value=D})}),onUnmounted(()=>{A&&A()});const B=computed(()=>n.locales.slectionNumration.value||S.value||"latin");if(_){let D;watchEffect(()=>{D=_.tatzeqelbejRajilankChabl({runuk:E.value,sm:L=>S.value=L})}),onUnmounted(()=>{D&&D()})}const I=(D,L)=>computed(()=>x.({:typeof D=="number"?D:D.value,:L||B.value})),M=(D,L)=>computed(()=>[...typeof D=="string"?D:D.value].map(q=>{if(q===" "||q===""||q==="+")return q;try{const H=x.({:q});return x.({:H,:L||B.value})}catch{return q}}).join("")),O=D=>computed(()=>B.value?D.split(".").map(V=>x.({:parseInt(V),:B.value})).join("."):void 0);return{numration:B,systmesNumration:T,slectionNumration:n?.locales.slectionNumration,formatterChiffre:I,formatterNumro:M,formatterVersion:O}},gnrerLocalisation=({langue:n,languesAlternatives:_=[]})=>({install:x=>{const E=x.config.globalProperties.$constl,S=crerNuchabl({constellation:E}),C=crerEnnikai({constellation:E});x.provide("locales",{nuchabl:S,:C,locales:crerLocales({langue:n,languesAlternatives:_})})}});var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(n,_){(function(){var x,E="4.17.21",S=200,C="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",T="Expected a function",A="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",I=500,M="__lodash_placeholder__",O=1,D=2,L=4,V=1,U=2,q=1,H=2,W=4,Q=8,re=16,ce=32,ne=64,Y=128,fe=256,ge=512,$e=30,_e="...",ae=800,X=16,F=1,z=2,J=3,te=1/0,se=9007199254740991,oe=17976931348623157e292,ie=0/0,G=4294967295,j=G-1,ee=G>>>1,pe=[["ary",Y],["bind",q],["bindKey",H],["curry",Q],["curryRight",re],["flip",ge],["partial",ce],["partialRight",ne],["rearg",fe]],he="[object Arguments]",Se="[object Array]",we="[object AsyncFunction]",xe="[object Boolean]",Ee="[object Date]",ye="[object DOMException]",Ce="[object Error]",ve="[object Function]",Be="[object GeneratorFunction]",me="[object Map]",Ie="[object Number]",Ve="[object Null]",Me="[object Object]",Ne="[object Promise]",Pe="[object Proxy]",He="[object RegExp]",We="[object Set]",Ke="[object String]",Ge="[object Symbol]",nt="[object Undefined]",ot="[object WeakMap]",Ze="[object WeakSet]",Re="[object ArrayBuffer]",be="[object DataView]",Ae="[object Float32Array]",Le="[object Float64Array]",Xe="[object Int8Array]",Qe="[object Int16Array]",et="[object Int32Array]",St="[object Uint8Array]",mt="[object Uint8ClampedArray]",dt="[object Uint16Array]",jt="[object Uint32Array]",Ct=/\b__p \+= '';/g,Rt=/\b(__p \+=) '' \+/g,ur=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gt=/&(?:amp|lt|gt|quot|#39);/g,Nt=/[&<>"']/g,er=RegExp(Gt.source),Mt=RegExp(Nt.source),kt=/<%-([\s\S]+?)%>/g,tr=/<%([\s\S]+?)%>/g,Vt=/<%=([\s\S]+?)%>/g,Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ar=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,ir=RegExp(Tt.source),qe=/^\s+/,Oe=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ue=/[()=,{}\[\]\/\s]/,ze=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,at=/^[-+]0x[0-9a-f]+$/i,ct=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,lt=/^0o[0-7]+$/i,ht=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,gt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",Dt="\\u0300-\\u036f",Ft="\\ufe20-\\ufe2f",Kt="\\u20d0-\\u20ff",Ut=Dt+Ft+Kt,Xt="\\u2700-\\u27bf",Zt="a-z\\xdf-\\xf6\\xf8-\\xff",Wt="\\xac\\xb1\\xd7\\xf7",yt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",Pt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",It="A-Z\\xc0-\\xd6\\xd8-\\xde",Lt="\\ufe0e\\ufe0f",Yt=Wt+yt+xt+Pt,cr="[']",yr="["+wt+"]",br="["+Yt+"]",dr="["+Ut+"]",ut="\\d+",Er="["+Xt+"]",kr="["+Zt+"]",Br="[^"+wt+Yt+ut+Xt+Zt+It+"]",_r="\\ud83c[\\udffb-\\udfff]",Ir="(?:"+dr+"|"+_r+")",Tr="[^"+wt+"]",Ur="(?:\\ud83c[\\udde6-\\uddff]){2}",Mr="[\\ud800-\\udbff][\\udc00-\\udfff]",Dr="["+It+"]",jr="\\u200d",qr="(?:"+kr+"|"+Br+")",Xr="(?:"+Dr+"|"+Br+")",Zr="(?:"+cr+"(?:d|ll|m|re|s|t|ve))?",Qr="(?:"+cr+"(?:D|LL|M|RE|S|T|VE))?",tn=Ir+"?",Hs="["+Lt+"]?",dl="(?:"+jr+"(?:"+[Tr,Ur,Mr].join("|")+")"+Hs+tn+")*",pl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ml="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zs=Hs+tn+dl,gl="(?:"+[Er,Ur,Mr].join("|")+")"+zs,vl="(?:"+[Tr+dr+"?",dr,Ur,Mr,yr].join("|")+")",yl=RegExp(cr,"g"),bl=RegExp(dr,"g"),Pa=RegExp(_r+"(?="+_r+")|"+vl+zs,"g"),_l=RegExp([Dr+"?"+kr+"+"+Zr+"(?="+[br,Dr,"$"].join("|")+")",Xr+"+"+Qr+"(?="+[br,Dr+qr,"$"].join("|")+")",Dr+"?"+qr+"+"+Zr,Dr+"+"+Qr,ml,pl,ut,gl].join("|"),"g"),xl=RegExp("["+jr+wt+Ut+Lt+"]"),wl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,El=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sl=-1,Hr={};Hr[Ae]=Hr[Le]=Hr[Xe]=Hr[Qe]=Hr[et]=Hr[St]=Hr[mt]=Hr[dt]=Hr[jt]=!0,Hr[he]=Hr[Se]=Hr[Re]=Hr[xe]=Hr[be]=Hr[Ee]=Hr[Ce]=Hr[ve]=Hr[me]=Hr[Ie]=Hr[Me]=Hr[He]=Hr[We]=Hr[Ke]=Hr[ot]=!1;var Vr={};Vr[he]=Vr[Se]=Vr[Re]=Vr[be]=Vr[xe]=Vr[Ee]=Vr[Ae]=Vr[Le]=Vr[Xe]=Vr[Qe]=Vr[et]=Vr[me]=Vr[Ie]=Vr[Me]=Vr[He]=Vr[We]=Vr[Ke]=Vr[Ge]=Vr[St]=Vr[mt]=Vr[dt]=Vr[jt]=!0,Vr[Ce]=Vr[ve]=Vr[ot]=!1;var $l={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Cl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Al={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kl=parseFloat,Il=parseInt,Ks=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Rl=typeof self=="object"&&self&&self.Object===Object&&self,sn=Ks||Rl||Function("return this")(),Ma=_&&!_.nodeType&&_,ci=Ma&&!0&&n&&!n.nodeType&&n,Ws=ci&&ci.exports===Ma,Na=Ws&&Ks.process,An=function(){try{var vt=ci&&ci.require&&ci.require("util").types;return vt||Na&&Na.binding&&Na.binding("util")}catch{}}(),Gs=An&&An.isArrayBuffer,Xs=An&&An.isDate,Ys=An&&An.isMap,Js=An&&An.isRegExp,Zs=An&&An.isSet,Qs=An&&An.isTypedArray;function wn(vt,Ot,At){switch(At.length){case 0:return vt.call(Ot);case 1:return vt.call(Ot,At[0]);case 2:return vt.call(Ot,At[0],At[1]);case 3:return vt.call(Ot,At[0],At[1],At[2])}return vt.apply(Ot,At)}function Pl(vt,Ot,At,nr){for(var xr=-1,Nr=vt==null?0:vt.length;++xr<Nr;){var rn=vt[xr];Ot(nr,rn,At(rn),vt)}return nr}function kn(vt,Ot){for(var At=-1,nr=vt==null?0:vt.length;++At<nr&&Ot(vt[At],At,vt)!==!1;);return vt}function Ml(vt,Ot){for(var At=vt==null?0:vt.length;At--&&Ot(vt[At],At,vt)!==!1;);return vt}function eo(vt,Ot){for(var At=-1,nr=vt==null?0:vt.length;++At<nr;)if(!Ot(vt[At],At,vt))return!1;return!0}function Zn(vt,Ot){for(var At=-1,nr=vt==null?0:vt.length,xr=0,Nr=[];++At<nr;){var rn=vt[At];Ot(rn,At,vt)&&(Nr[xr++]=rn)}return Nr}function Wi(vt,Ot){var At=vt==null?0:vt.length;return!!At&&vi(vt,Ot,0)>-1}function Oa(vt,Ot,At){for(var nr=-1,xr=vt==null?0:vt.length;++nr<xr;)if(At(Ot,vt[nr]))return!0;return!1}function Kr(vt,Ot){for(var At=-1,nr=vt==null?0:vt.length,xr=Array(nr);++At<nr;)xr[At]=Ot(vt[At],At,vt);return xr}function Qn(vt,Ot){for(var At=-1,nr=Ot.length,xr=vt.length;++At<nr;)vt[xr+At]=Ot[At];return vt}function Da(vt,Ot,At,nr){var xr=-1,Nr=vt==null?0:vt.length;for(nr&&Nr&&(At=vt[++xr]);++xr<Nr;)At=Ot(At,vt[xr],xr,vt);return At}function Nl(vt,Ot,At,nr){var xr=vt==null?0:vt.length;for(nr&&xr&&(At=vt[--xr]);xr--;)At=Ot(At,vt[xr],xr,vt);return At}function Fa(vt,Ot){for(var At=-1,nr=vt==null?0:vt.length;++At<nr;)if(Ot(vt[At],At,vt))return!0;return!1}var Ol=La("length");function Dl(vt){return vt.split("")}function Fl(vt){return vt.match(Fe)||[]}function to(vt,Ot,At){var nr;return At(vt,function(xr,Nr,rn){if(Ot(xr,Nr,rn))return nr=Nr,!1}),nr}function Gi(vt,Ot,At,nr){for(var xr=vt.length,Nr=At+(nr?1:-1);nr?Nr--:++Nr<xr;)if(Ot(vt[Nr],Nr,vt))return Nr;return-1}function vi(vt,Ot,At){return Ot===Ot?Jl(vt,Ot,At):Gi(vt,ro,At)}function Ll(vt,Ot,At,nr){for(var xr=At-1,Nr=vt.length;++xr<Nr;)if(nr(vt[xr],Ot))return xr;return-1}function ro(vt){return vt!==vt}function no(vt,Ot){var At=vt==null?0:vt.length;return At?Ua(vt,Ot)/At:ie}function La(vt){return function(Ot){return Ot==null?x:Ot[vt]}}function Va(vt){return function(Ot){return vt==null?x:vt[Ot]}}function io(vt,Ot,At,nr,xr){return xr(vt,function(Nr,rn,Lr){At=nr?(nr=!1,Nr):Ot(At,Nr,rn,Lr)}),At}function Vl(vt,Ot){var At=vt.length;for(vt.sort(Ot);At--;)vt[At]=vt[At].value;return vt}function Ua(vt,Ot){for(var At,nr=-1,xr=vt.length;++nr<xr;){var Nr=Ot(vt[nr]);Nr!==x&&(At=At===x?Nr:At+Nr)}return At}function ja(vt,Ot){for(var At=-1,nr=Array(vt);++At<vt;)nr[At]=Ot(At);return nr}function Ul(vt,Ot){return Kr(Ot,function(At){return[At,vt[At]]})}function ao(vt){return vt&&vt.slice(0,lo(vt)+1).replace(qe,"")}function En(vt){return function(Ot){return vt(Ot)}}function qa(vt,Ot){return Kr(Ot,function(At){return vt[At]})}function Ii(vt,Ot){return vt.has(Ot)}function so(vt,Ot){for(var At=-1,nr=vt.length;++At<nr&&vi(Ot,vt[At],0)>-1;);return At}function oo(vt,Ot){for(var At=vt.length;At--&&vi(Ot,vt[At],0)>-1;);return At}function jl(vt,Ot){for(var At=vt.length,nr=0;At--;)vt[At]===Ot&&++nr;return nr}var ql=Va($l),Hl=Va(Cl);function Kl(vt){return"\\"+Al[vt]}function Wl(vt,Ot){return vt==null?x:vt[Ot]}function yi(vt){return xl.test(vt)}function Gl(vt){return wl.test(vt)}function Xl(vt){for(var Ot,At=[];!(Ot=vt.next()).done;)At.push(Ot.value);return At}function Ha(vt){var Ot=-1,At=Array(vt.size);return vt.forEach(function(nr,xr){At[++Ot]=[xr,nr]}),At}function co(vt,Ot){return function(At){return vt(Ot(At))}}function ei(vt,Ot){for(var At=-1,nr=vt.length,xr=0,Nr=[];++At<nr;){var rn=vt[At];(rn===Ot||rn===M)&&(vt[At]=M,Nr[xr++]=At)}return Nr}function Xi(vt){var Ot=-1,At=Array(vt.size);return vt.forEach(function(nr){At[++Ot]=nr}),At}function Yl(vt){var Ot=-1,At=Array(vt.size);return vt.forEach(function(nr){At[++Ot]=[nr,nr]}),At}function Jl(vt,Ot,At){for(var nr=At-1,xr=vt.length;++nr<xr;)if(vt[nr]===Ot)return nr;return-1}function Zl(vt,Ot,At){for(var nr=At+1;nr--;)if(vt[nr]===Ot)return nr;return nr}function bi(vt){return yi(vt)?ef(vt):Ol(vt)}function On(vt){return yi(vt)?tf(vt):Dl(vt)}function lo(vt){for(var Ot=vt.length;Ot--&&Oe.test(vt.charAt(Ot)););return Ot}var Ql=Va(Tl);function ef(vt){for(var Ot=Pa.lastIndex=0;Pa.test(vt);)++Ot;return Ot}function tf(vt){return vt.match(Pa)||[]}function rf(vt){return vt.match(_l)||[]}var nf=function vt(Ot){Ot=Ot==null?sn:_i.defaults(sn.Object(),Ot,_i.pick(sn,El));var At=Ot.Array,nr=Ot.Date,xr=Ot.Error,Nr=Ot.Function,rn=Ot.Math,Lr=Ot.Object,za=Ot.RegExp,af=Ot.String,Bn=Ot.TypeError,Yi=At.prototype,sf=Nr.prototype,xi=Lr.prototype,Ji=Ot["__core-js_shared__"],Zi=sf.toString,Fr=xi.hasOwnProperty,of=0,fo=function(){var Z=/[^.]+$/.exec(Ji&&Ji.keys&&Ji.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),Qi=xi.toString,cf=Zi.call(Lr),lf=sn._,ff=za("^"+Zi.call(Fr).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=Ws?Ot.Buffer:x,ti=Ot.Symbol,ta=Ot.Uint8Array,uo=ea?ea.allocUnsafe:x,ra=co(Lr.getPrototypeOf,Lr),ho=Lr.create,po=xi.propertyIsEnumerable,na=Yi.splice,mo=ti?ti.isConcatSpreadable:x,Ri=ti?ti.iterator:x,li=ti?ti.toStringTag:x,ia=function(){try{var Z=pi(Lr,"defineProperty");return Z({},"",{}),Z}catch{}}(),uf=Ot.clearTimeout!==sn.clearTimeout&&Ot.clearTimeout,df=nr&&nr.now!==sn.Date.now&&nr.now,hf=Ot.setTimeout!==sn.setTimeout&&Ot.setTimeout,aa=rn.ceil,sa=rn.floor,Ka=Lr.getOwnPropertySymbols,pf=ea?ea.isBuffer:x,go=Ot.isFinite,mf=Yi.join,gf=co(Lr.keys,Lr),nn=rn.max,ln=rn.min,vf=nr.now,yf=Ot.parseInt,vo=rn.random,bf=Yi.reverse,Wa=pi(Ot,"DataView"),Pi=pi(Ot,"Map"),Ga=pi(Ot,"Promise"),wi=pi(Ot,"Set"),Mi=pi(Ot,"WeakMap"),Ni=pi(Lr,"create"),oa=Mi&&new Mi,Ei={},_f=mi(Wa),xf=mi(Pi),wf=mi(Ga),Ef=mi(wi),Sf=mi(Mi),ca=ti?ti.prototype:x,Oi=ca?ca.valueOf:x,bo=ca?ca.toString:x;function tt(Z){if(Gr(Z)&&!wr(Z)&&!(Z instanceof Rr)){if(Z instanceof In)return Z;if(Fr.call(Z,"__wrapped__"))return xc(Z)}return new In(Z)}var Si=function(){function Z(){}return function(le){if(!Wr(le))return{};if(ho)return ho(le);Z.prototype=le;var Te=new Z;return Z.prototype=x,Te}}();function la(){}function In(Z,le){this.__wrapped__=Z,this.__actions__=[],this.__chain__=!!le,this.__index__=0,this.__values__=x}tt.templateSettings={escape:kt,evaluate:tr,interpolate:Vt,variable:"",imports:{_:tt}},tt.prototype=la.prototype,tt.prototype.constructor=tt,In.prototype=Si(la.prototype),In.prototype.constructor=In;function Rr(Z){this.__wrapped__=Z,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function $f(){var Z=new Rr(this.__wrapped__);return Z.__actions__=vn(this.__actions__),Z.__dir__=this.__dir__,Z.__filtered__=this.__filtered__,Z.__iteratees__=vn(this.__iteratees__),Z.__takeCount__=this.__takeCount__,Z.__views__=vn(this.__views__),Z}function Cf(){if(this.__filtered__){var Z=new Rr(this);Z.__dir__=-1,Z.__filtered__=!0}else Z=this.clone(),Z.__dir__*=-1;return Z}function Tf(){var Z=this.__wrapped__.value(),le=this.__dir__,Te=wr(Z),je=le<0,Je=Te?Z.length:0,it=Lu(0,Je,this.__views__),ft=it.start,pt=it.end,_t=pt-ft,Ht=je?pt:ft-1,zt=this.__iteratees__,Jt=zt.length,Qt=0,lr=ln(_t,this.__takeCount__);if(!Te||!je&&Je==_t&&lr==_t)return qo(Z,this.__actions__);var gr=[];e:for(;_t--&&Qt<lr;){Ht+=le;for(var $r=-1,vr=Z[Ht];++$r<Jt;){var Ar=zt[$r],Pr=Ar.iteratee,Cn=Ar.type,mn=Pr(vr);if(Cn==z)vr=mn;else if(!mn){if(Cn==F)continue e;break e}}gr[Qt++]=vr}return gr}Rr.prototype=Si(la.prototype),Rr.prototype.constructor=Rr;function fi(Z){var le=-1,Te=Z==null?0:Z.length;for(this.clear();++le<Te;){var je=Z[le];this.set(je[0],je[1])}}function Af(){this.__data__=Ni?Ni(null):{},this.size=0}function kf(Z){var le=this.has(Z)&&delete this.__data__[Z];return this.size-=le?1:0,le}function Bf(Z){var le=this.__data__;if(Ni){var Te=le[Z];return Te===B?x:Te}return Fr.call(le,Z)?le[Z]:x}function If(Z){var le=this.__data__;return Ni?le[Z]!==x:Fr.call(le,Z)}function Rf(Z,le){var Te=this.__data__;return this.size+=this.has(Z)?0:1,Te[Z]=Ni&&le===x?B:le,this}fi.prototype.clear=Af,fi.prototype.delete=kf,fi.prototype.get=Bf,fi.prototype.has=If,fi.prototype.set=Rf;function qn(Z){var le=-1,Te=Z==null?0:Z.length;for(this.clear();++le<Te;){var je=Z[le];this.set(je[0],je[1])}}function Pf(){this.__data__=[],this.size=0}function Mf(Z){var le=this.__data__,Te=fa(le,Z);if(Te<0)return!1;var je=le.length-1;return Te==je?le.pop():na.call(le,Te,1),--this.size,!0}function Nf(Z){var le=this.__data__,Te=fa(le,Z);return Te<0?x:le[Te][1]}function Of(Z){return fa(this.__data__,Z)>-1}function Df(Z,le){var Te=this.__data__,je=fa(Te,Z);return je<0?(++this.size,Te.push([Z,le])):Te[je][1]=le,this}qn.prototype.clear=Pf,qn.prototype.delete=Mf,qn.prototype.get=Nf,qn.prototype.has=Of,qn.prototype.set=Df;function Hn(Z){var le=-1,Te=Z==null?0:Z.length;for(this.clear();++le<Te;){var je=Z[le];this.set(je[0],je[1])}}function Ff(){this.size=0,this.__data__={hash:new fi,map:new(Pi||qn),string:new fi}}function Lf(Z){var le=wa(this,Z).delete(Z);return this.size-=le?1:0,le}function Vf(Z){return wa(this,Z).get(Z)}function Uf(Z){return wa(this,Z).has(Z)}function jf(Z,le){var Te=wa(this,Z),je=Te.size;return Te.set(Z,le),this.size+=Te.size==je?0:1,this}Hn.prototype.clear=Ff,Hn.prototype.delete=Lf,Hn.prototype.get=Vf,Hn.prototype.has=Uf,Hn.prototype.set=jf;function ui(Z){var le=-1,Te=Z==null?0:Z.length;for(this.__data__=new Hn;++le<Te;)this.add(Z[le])}function qf(Z){return this.__data__.set(Z,B),this}function Hf(Z){return this.__data__.has(Z)}ui.prototype.add=ui.prototype.push=qf,ui.prototype.has=Hf;function Dn(Z){var le=this.__data__=new qn(Z);this.size=le.size}function zf(){this.__data__=new qn,this.size=0}function Kf(Z){var le=this.__data__,Te=le.delete(Z);return this.size=le.size,Te}function Wf(Z){return this.__data__.get(Z)}function Gf(Z){return this.__data__.has(Z)}function Xf(Z,le){var Te=this.__data__;if(Te instanceof qn){var je=Te.__data__;if(!Pi||je.length<S-1)return je.push([Z,le]),this.size=++Te.size,this;Te=this.__data__=new Hn(je)}return Te.set(Z,le),this.size=Te.size,this}Dn.prototype.clear=zf,Dn.prototype.delete=Kf,Dn.prototype.get=Wf,Dn.prototype.has=Gf,Dn.prototype.set=Xf;function _o(Z,le){var Te=wr(Z),je=!Te&&gi(Z),Je=!Te&&!je&&si(Z),it=!Te&&!je&&!Je&&Ai(Z),ft=Te||je||Je||it,pt=ft?ja(Z.length,af):[],_t=pt.length;for(var Ht in Z)(le||Fr.call(Z,Ht))&&!(ft&&(Ht=="length"||Je&&(Ht=="offset"||Ht=="parent")||it&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||Gn(Ht,_t)))&&pt.push(Ht);return pt}function xo(Z){var le=Z.length;return le?Z[ss(0,le-1)]:x}function Yf(Z,le){return Ea(vn(Z),di(le,0,Z.length))}function Jf(Z){return Ea(vn(Z))}function Xa(Z,le,Te){(Te!==x&&!Fn(Z[le],Te)||Te===x&&!(le in Z))&&zn(Z,le,Te)}function Di(Z,le,Te){var je=Z[le];(!(Fr.call(Z,le)&&Fn(je,Te))||Te===x&&!(le in Z))&&zn(Z,le,Te)}function fa(Z,le){for(var Te=Z.length;Te--;)if(Fn(Z[Te][0],le))return Te;return-1}function Zf(Z,le,Te,je){return ri(Z,function(Je,it,ft){le(je,Je,Te(Je),ft)}),je}function wo(Z,le){return Z&&Un(le,an(le),Z)}function Qf(Z,le){return Z&&Un(le,_n(le),Z)}function zn(Z,le,Te){le=="__proto__"&&ia?ia(Z,le,{configurable:!0,enumerable:!0,value:Te,writable:!0}):Z[le]=Te}function Ya(Z,le){for(var Te=-1,je=le.length,Je=At(je),it=Z==null;++Te<je;)Je[Te]=it?x:Ms(Z,le[Te]);return Je}function di(Z,le,Te){return Z===Z&&(Te!==x&&(Z=Z<=Te?Z:Te),le!==x&&(Z=Z>=le?Z:le)),Z}function Rn(Z,le,Te,je,Je,it){var ft,pt=le&O,_t=le&D,Ht=le&L;if(Te&&(ft=Je?Te(Z,je,Je,it):Te(Z)),ft!==x)return ft;if(!Wr(Z))return Z;var zt=wr(Z);if(zt){if(ft=Uu(Z),!pt)return vn(Z,ft)}else{var Jt=fn(Z),Qt=Jt==ve||Jt==Be;if(si(Z))return Ko(Z,pt);if(Jt==Me||Jt==he||Qt&&!Je){if(ft=_t||Qt?{}:dc(Z),!pt)return _t?Bu(Z,Qf(ft,Z)):ku(Z,wo(ft,Z))}else{if(!Vr[Jt])return Je?Z:{};ft=ju(Z,Jt,pt)}}it||(it=new Dn);var lr=it.get(Z);if(lr)return lr;it.set(Z,ft),Uc(Z)?Z.forEach(function(vr){ft.add(Rn(vr,le,Te,vr,Z,it))}):Lc(Z)&&Z.forEach(function(vr,Ar){ft.set(Ar,Rn(vr,le,Te,Ar,Z,it))});var gr=Ht?_t?_s:bs:_t?_n:an,$r=zt?x:gr(Z);return kn($r||Z,function(vr,Ar){$r&&(Ar=vr,vr=Z[Ar]),Di(ft,Ar,Rn(vr,le,Te,Ar,Z,it))}),ft}function eu(Z){var le=an(Z);return function(Te){return Eo(Te,Z,le)}}function Eo(Z,le,Te){var je=Te.length;if(Z==null)return!je;for(Z=Lr(Z);je--;){var Je=Te[je],it=le[Je],ft=Z[Je];if(ft===x&&!(Je in Z)||!it(ft))return!1}return!0}function So(Z,le,Te){if(typeof Z!="function")throw new Bn(T);return Hi(function(){Z.apply(x,Te)},le)}function Fi(Z,le,Te,je){var Je=-1,it=Wi,ft=!0,pt=Z.length,_t=[],Ht=le.length;if(!pt)return _t;Te&&(le=Kr(le,En(Te))),je?(it=Oa,ft=!1):le.length>=S&&(it=Ii,ft=!1,le=new ui(le));e:for(;++Je<pt;){var zt=Z[Je],Jt=Te==null?zt:Te(zt);if(zt=je||zt!==0?zt:0,ft&&Jt===Jt){for(var Qt=Ht;Qt--;)if(le[Qt]===Jt)continue e;_t.push(zt)}else it(le,Jt,je)||_t.push(zt)}return _t}var ri=Jo(Vn),$o=Jo(Za,!0);function tu(Z,le){var Te=!0;return ri(Z,function(je,Je,it){return Te=!!le(je,Je,it),Te}),Te}function ua(Z,le,Te){for(var je=-1,Je=Z.length;++je<Je;){var it=Z[je],ft=le(it);if(ft!=null&&(pt===x?ft===ft&&!$n(ft):Te(ft,pt)))var pt=ft,_t=it}return _t}function ru(Z,le,Te,je){var Je=Z.length;for(Te=Sr(Te),Te<0&&(Te=-Te>Je?0:Je+Te),je=je===x||je>Je?Je:Sr(je),je<0&&(je+=Je),je=Te>je?0:qc(je);Te<je;)Z[Te++]=le;return Z}function Co(Z,le){var Te=[];return ri(Z,function(je,Je,it){le(je,Je,it)&&Te.push(je)}),Te}function cn(Z,le,Te,je,Je){var it=-1,ft=Z.length;for(Te||(Te=Hu),Je||(Je=[]);++it<ft;){var pt=Z[it];le>0&&Te(pt)?le>1?cn(pt,le-1,Te,je,Je):Qn(Je,pt):je||(Je[Je.length]=pt)}return Je}var Ja=Zo(),To=Zo(!0);function Vn(Z,le){return Z&&Ja(Z,le,an)}function Za(Z,le){return Z&&To(Z,le,an)}function da(Z,le){return Zn(le,function(Te){return Xn(Z[Te])})}function hi(Z,le){le=ii(le,Z);for(var Te=0,je=le.length;Z!=null&&Te<je;)Z=Z[jn(le[Te++])];return Te&&Te==je?Z:x}function Ao(Z,le,Te){var je=le(Z);return wr(Z)?je:Qn(je,Te(Z))}function hn(Z){return Z==null?Z===x?nt:Ve:li&&li in Lr(Z)?Fu(Z):Ju(Z)}function Qa(Z,le){return Z>le}function nu(Z,le){return Z!=null&&Fr.call(Z,le)}function iu(Z,le){return Z!=null&&le in Lr(Z)}function au(Z,le,Te){return Z>=ln(le,Te)&&Z<nn(le,Te)}function es(Z,le,Te){for(var je=Te?Oa:Wi,Je=Z[0].length,it=Z.length,ft=it,pt=At(it),_t=1/0,Ht=[];ft--;){var zt=Z[ft];ft&&le&&(zt=Kr(zt,En(le))),_t=ln(zt.length,_t),pt[ft]=!Te&&(le||Je>=120&&zt.length>=120)?new ui(ft&&zt):x}zt=Z[0];var Jt=-1,Qt=pt[0];e:for(;++Jt<Je&&Ht.length<_t;){var lr=zt[Jt],gr=le?le(lr):lr;if(lr=Te||lr!==0?lr:0,!(Qt?Ii(Qt,gr):je(Ht,gr,Te))){for(ft=it;--ft;){var $r=pt[ft];if(!($r?Ii($r,gr):je(Z[ft],gr,Te)))continue e}Qt&&Qt.push(gr),Ht.push(lr)}}return Ht}function su(Z,le,Te,je){return Vn(Z,function(Je,it,ft){le(je,Te(Je),it,ft)}),je}function Li(Z,le,Te){le=ii(le,Z),Z=gc(Z,le);var je=Z==null?Z:Z[jn(Mn(le))];return je==null?x:wn(je,Z,Te)}function ko(Z){return Gr(Z)&&hn(Z)==he}function ou(Z){return Gr(Z)&&hn(Z)==Re}function cu(Z){return Gr(Z)&&hn(Z)==Ee}function Vi(Z,le,Te,je,Je){return Z===le?!0:Z==null||le==null||!Gr(Z)&&!Gr(le)?Z!==Z&&le!==le:lu(Z,le,Te,je,Vi,Je)}function lu(Z,le,Te,je,Je,it){var ft=wr(Z),pt=wr(le),_t=ft?Se:fn(Z),Ht=pt?Se:fn(le);_t=_t==he?Me:_t,Ht=Ht==he?Me:Ht;var zt=_t==Me,Jt=Ht==Me,Qt=_t==Ht;if(Qt&&si(Z)){if(!si(le))return!1;ft=!0,zt=!1}if(Qt&&!zt)return it||(it=new Dn),ft||Ai(Z)?lc(Z,le,Te,je,Je,it):Ou(Z,le,_t,Te,je,Je,it);if(!(Te&V)){var lr=zt&&Fr.call(Z,"__wrapped__"),gr=Jt&&Fr.call(le,"__wrapped__");if(lr||gr){var $r=lr?Z.value():Z,vr=gr?le.value():le;return it||(it=new Dn),Je($r,vr,Te,je,it)}}return Qt?(it||(it=new Dn),Du(Z,le,Te,je,Je,it)):!1}function fu(Z){return Gr(Z)&&fn(Z)==me}function ts(Z,le,Te,je){var Je=Te.length,it=Je,ft=!je;if(Z==null)return!it;for(Z=Lr(Z);Je--;){var pt=Te[Je];if(ft&&pt[2]?pt[1]!==Z[pt[0]]:!(pt[0]in Z))return!1}for(;++Je<it;){pt=Te[Je];var _t=pt[0],Ht=Z[_t],zt=pt[1];if(ft&&pt[2]){if(Ht===x&&!(_t in Z))return!1}else{var Jt=new Dn;if(je)var Qt=je(Ht,zt,_t,Z,le,Jt);if(!(Qt===x?Vi(zt,Ht,V|U,je,Jt):Qt))return!1}}return!0}function Bo(Z){if(!Wr(Z)||Ku(Z))return!1;var le=Xn(Z)?ff:st;return le.test(mi(Z))}function uu(Z){return Gr(Z)&&hn(Z)==He}function du(Z){return Gr(Z)&&fn(Z)==We}function hu(Z){return Gr(Z)&&ka(Z.length)&&!!Hr[hn(Z)]}function Io(Z){return typeof Z=="function"?Z:Z==null?xn:typeof Z=="object"?wr(Z)?Mo(Z[0],Z[1]):Po(Z):el(Z)}function rs(Z){if(!qi(Z))return gf(Z);var le=[];for(var Te in Lr(Z))Fr.call(Z,Te)&&Te!="constructor"&&le.push(Te);return le}function pu(Z){if(!Wr(Z))return Yu(Z);var le=qi(Z),Te=[];for(var je in Z)je=="constructor"&&(le||!Fr.call(Z,je))||Te.push(je);return Te}function ns(Z,le){return Z<le}function Ro(Z,le){var Te=-1,je=yn(Z)?At(Z.length):[];return ri(Z,function(Je,it,ft){je[++Te]=le(Je,it,ft)}),je}function Po(Z){var le=ws(Z);return le.length==1&&le[0][2]?pc(le[0][0],le[0][1]):function(Te){return Te===Z||ts(Te,Z,le)}}function Mo(Z,le){return Ss(Z)&&hc(le)?pc(jn(Z),le):function(Te){var je=Ms(Te,Z);return je===x&&je===le?Ns(Te,Z):Vi(le,je,V|U)}}function ha(Z,le,Te,je,Je){Z!==le&&Ja(le,function(it,ft){if(Je||(Je=new Dn),Wr(it))mu(Z,le,ft,Te,ha,je,Je);else{var pt=je?je(Cs(Z,ft),it,ft+"",Z,le,Je):x;pt===x&&(pt=it),Xa(Z,ft,pt)}},_n)}function mu(Z,le,Te,je,Je,it,ft){var pt=Cs(Z,Te),_t=Cs(le,Te),Ht=ft.get(_t);if(Ht){Xa(Z,Te,Ht);return}var zt=it?it(pt,_t,Te+"",Z,le,ft):x,Jt=zt===x;if(Jt){var Qt=wr(_t),lr=!Qt&&si(_t),gr=!Qt&&!lr&&Ai(_t);zt=_t,Qt||lr||gr?wr(pt)?zt=pt:Yr(pt)?zt=vn(pt):lr?(Jt=!1,zt=Ko(_t,!0)):gr?(Jt=!1,zt=Wo(_t,!0)):zt=[]:zi(_t)||gi(_t)?(zt=pt,gi(pt)?zt=Hc(pt):(!Wr(pt)||Xn(pt))&&(zt=dc(_t))):Jt=!1}Jt&&(ft.set(_t,zt),Je(zt,_t,je,it,ft),ft.delete(_t)),Xa(Z,Te,zt)}function No(Z,le){var Te=Z.length;if(Te)return le+=le<0?Te:0,Gn(le,Te)?Z[le]:x}function Oo(Z,le,Te){le.length?le=Kr(le,function(it){return wr(it)?function(ft){return hi(ft,it.length===1?it[0]:it)}:it}):le=[xn];var je=-1;le=Kr(le,En(pr()));var Je=Ro(Z,function(it,ft,pt){var _t=Kr(le,function(Ht){return Ht(it)});return{criteria:_t,index:++je,value:it}});return Vl(Je,function(it,ft){return Au(it,ft,Te)})}function gu(Z,le){return Do(Z,le,function(Te,je){return Ns(Z,je)})}function Do(Z,le,Te){for(var je=-1,Je=le.length,it={};++je<Je;){var ft=le[je],pt=hi(Z,ft);Te(pt,ft)&&Ui(it,ii(ft,Z),pt)}return it}function vu(Z){return function(le){return hi(le,Z)}}function as(Z,le,Te,je){var Je=je?Ll:vi,it=-1,ft=le.length,pt=Z;for(Z===le&&(le=vn(le)),Te&&(pt=Kr(Z,En(Te)));++it<ft;)for(var _t=0,Ht=le[it],zt=Te?Te(Ht):Ht;(_t=Je(pt,zt,_t,je))>-1;)pt!==Z&&na.call(pt,_t,1),na.call(Z,_t,1);return Z}function Fo(Z,le){for(var Te=Z?le.length:0,je=Te-1;Te--;){var Je=le[Te];if(Te==je||Je!==it){var it=Je;Gn(Je)?na.call(Z,Je,1):us(Z,Je)}}return Z}function ss(Z,le){return Z+sa(vo()*(le-Z+1))}function yu(Z,le,Te,je){for(var Je=-1,it=nn(aa((le-Z)/(Te||1)),0),ft=At(it);it--;)ft[je?it:++Je]=Z,Z+=Te;return ft}function cs(Z,le){var Te="";if(!Z||le<1||le>se)return Te;do le%2&&(Te+=Z),le=sa(le/2),le&&(Z+=Z);while(le);return Te}function Cr(Z,le){return Ts(mc(Z,le,xn),Z+"")}function bu(Z){return xo(ki(Z))}function _u(Z,le){var Te=ki(Z);return Ea(Te,di(le,0,Te.length))}function Ui(Z,le,Te,je){if(!Wr(Z))return Z;le=ii(le,Z);for(var Je=-1,it=le.length,ft=it-1,pt=Z;pt!=null&&++Je<it;){var _t=jn(le[Je]),Ht=Te;if(_t==="__proto__"||_t==="constructor"||_t==="prototype")return Z;if(Je!=ft){var zt=pt[_t];Ht=je?je(zt,_t,pt):x,Ht===x&&(Ht=Wr(zt)?zt:Gn(le[Je+1])?[]:{})}Di(pt,_t,Ht),pt=pt[_t]}return Z}var Lo=oa?function(Z,le){return oa.set(Z,le),Z}:xn,xu=ia?function(Z,le){return ia(Z,"toString",{configurable:!0,enumerable:!1,value:Ds(le),writable:!0})}:xn;function wu(Z){return Ea(ki(Z))}function Pn(Z,le,Te){var je=-1,Je=Z.length;le<0&&(le=-le>Je?0:Je+le),Te=Te>Je?Je:Te,Te<0&&(Te+=Je),Je=le>Te?0:Te-le>>>0,le>>>=0;for(var it=At(Je);++je<Je;)it[je]=Z[je+le];return it}function Eu(Z,le){var Te;return ri(Z,function(je,Je,it){return Te=le(je,Je,it),!Te}),!!Te}function pa(Z,le,Te){var je=0,Je=Z==null?je:Z.length;if(typeof le=="number"&&le===le&&Je<=ee){for(;je<Je;){var it=je+Je>>>1,ft=Z[it];ft!==null&&!$n(ft)&&(Te?ft<=le:ft<le)?je=it+1:Je=it}return Je}return ls(Z,le,xn,Te)}function ls(Z,le,Te,je){var Je=0,it=Z==null?0:Z.length;if(it===0)return 0;le=Te(le);for(var ft=le!==le,pt=le===null,_t=$n(le),Ht=le===x;Je<it;){var zt=sa((Je+it)/2),Jt=Te(Z[zt]),Qt=Jt!==x,lr=Jt===null,gr=Jt===Jt,$r=$n(Jt);if(ft)var vr=je||gr;else Ht?vr=gr&&(je||Qt):pt?vr=gr&&Qt&&(je||!lr):_t?vr=gr&&Qt&&!lr&&(je||!$r):lr||$r?vr=!1:vr=je?Jt<=le:Jt<le;vr?Je=zt+1:it=zt}return ln(it,j)}function Vo(Z,le){for(var Te=-1,je=Z.length,Je=0,it=[];++Te<je;){var ft=Z[Te],pt=le?le(ft):ft;if(!Te||!Fn(pt,_t)){var _t=pt;it[Je++]=ft===0?0:ft}}return it}function Uo(Z){return typeof Z=="number"?Z:$n(Z)?ie:+Z}function Sn(Z){if(typeof Z=="string")return Z;if(wr(Z))return Kr(Z,Sn)+"";if($n(Z))return bo?bo.call(Z):"";var le=Z+"";return le=="0"&&1/Z==-te?"-0":le}function ni(Z,le,Te){var je=-1,Je=Wi,it=Z.length,ft=!0,pt=[],_t=pt;if(Te)ft=!1,Je=Oa;else if(it>=S){var Ht=le?null:Mu(Z);if(Ht)return Xi(Ht);ft=!1,Je=Ii,_t=new ui}else _t=le?[]:pt;e:for(;++je<it;){var zt=Z[je],Jt=le?le(zt):zt;if(zt=Te||zt!==0?zt:0,ft&&Jt===Jt){for(var Qt=_t.length;Qt--;)if(_t[Qt]===Jt)continue e;le&&_t.push(Jt),pt.push(zt)}else Je(_t,Jt,Te)||(_t!==pt&&_t.push(Jt),pt.push(zt))}return pt}function us(Z,le){return le=ii(le,Z),Z=gc(Z,le),Z==null||delete Z[jn(Mn(le))]}function jo(Z,le,Te,je){return Ui(Z,le,Te(hi(Z,le)),je)}function ma(Z,le,Te,je){for(var Je=Z.length,it=je?Je:-1;(je?it--:++it<Je)&&le(Z[it],it,Z););return Te?Pn(Z,je?0:it,je?it+1:Je):Pn(Z,je?it+1:0,je?Je:it)}function qo(Z,le){var Te=Z;return Te instanceof Rr&&(Te=Te.value()),Da(le,function(je,Je){return Je.func.apply(Je.thisArg,Qn([je],Je.args))},Te)}function ds(Z,le,Te){var je=Z.length;if(je<2)return je?ni(Z[0]):[];for(var Je=-1,it=At(je);++Je<je;)for(var ft=Z[Je],pt=-1;++pt<je;)pt!=Je&&(it[Je]=Fi(it[Je]||ft,Z[pt],le,Te));return ni(cn(it,1),le,Te)}function Ho(Z,le,Te){for(var je=-1,Je=Z.length,it=le.length,ft={};++je<Je;){var pt=je<it?le[je]:x;Te(ft,Z[je],pt)}return ft}function hs(Z){return Yr(Z)?Z:[]}function ps(Z){return typeof Z=="function"?Z:xn}function ii(Z,le){return wr(Z)?Z:Ss(Z,le)?[Z]:_c(Or(Z))}var Su=Cr;function ai(Z,le,Te){var je=Z.length;return Te=Te===x?je:Te,!le&&Te>=je?Z:Pn(Z,le,Te)}var zo=uf||function(Z){return sn.clearTimeout(Z)};function Ko(Z,le){if(le)return Z.slice();var Te=Z.length,je=uo?uo(Te):new Z.constructor(Te);return Z.copy(je),je}function gs(Z){var le=new Z.constructor(Z.byteLength);return new ta(le).set(new ta(Z)),le}function $u(Z,le){var Te=le?gs(Z.buffer):Z.buffer;return new Z.constructor(Te,Z.byteOffset,Z.byteLength)}function Cu(Z){var le=new Z.constructor(Z.source,rt.exec(Z));return le.lastIndex=Z.lastIndex,le}function Tu(Z){return Oi?Lr(Oi.call(Z)):{}}function Wo(Z,le){var Te=le?gs(Z.buffer):Z.buffer;return new Z.constructor(Te,Z.byteOffset,Z.length)}function Go(Z,le){if(Z!==le){var Te=Z!==x,je=Z===null,Je=Z===Z,it=$n(Z),ft=le!==x,pt=le===null,_t=le===le,Ht=$n(le);if(!pt&&!Ht&&!it&&Z>le||it&&ft&&_t&&!pt&&!Ht||je&&ft&&_t||!Te&&_t||!Je)return 1;if(!je&&!it&&!Ht&&Z<le||Ht&&Te&&Je&&!je&&!it||pt&&Te&&Je||!ft&&Je||!_t)return-1}return 0}function Au(Z,le,Te){for(var je=-1,Je=Z.criteria,it=le.criteria,ft=Je.length,pt=Te.length;++je<ft;){var _t=Go(Je[je],it[je]);if(_t){if(je>=pt)return _t;var Ht=Te[je];return _t*(Ht=="desc"?-1:1)}}return Z.index-le.index}function Xo(Z,le,Te,je){for(var Je=-1,it=Z.length,ft=Te.length,pt=-1,_t=le.length,Ht=nn(it-ft,0),zt=At(_t+Ht),Jt=!je;++pt<_t;)zt[pt]=le[pt];for(;++Je<ft;)(Jt||Je<it)&&(zt[Te[Je]]=Z[Je]);for(;Ht--;)zt[pt++]=Z[Je++];return zt}function Yo(Z,le,Te,je){for(var Je=-1,it=Z.length,ft=-1,pt=Te.length,_t=-1,Ht=le.length,zt=nn(it-pt,0),Jt=At(zt+Ht),Qt=!je;++Je<zt;)Jt[Je]=Z[Je];for(var lr=Je;++_t<Ht;)Jt[lr+_t]=le[_t];for(;++ft<pt;)(Qt||Je<it)&&(Jt[lr+Te[ft]]=Z[Je++]);return Jt}function vn(Z,le){var Te=-1,je=Z.length;for(le||(le=At(je));++Te<je;)le[Te]=Z[Te];return le}function Un(Z,le,Te,je){var Je=!Te;Te||(Te={});for(var it=-1,ft=le.length;++it<ft;){var pt=le[it],_t=je?je(Te[pt],Z[pt],pt,Te,Z):x;_t===x&&(_t=Z[pt]),Je?zn(Te,pt,_t):Di(Te,pt,_t)}return Te}function ku(Z,le){return Un(Z,Es(Z),le)}function Bu(Z,le){return Un(Z,fc(Z),le)}function ga(Z,le){return function(Te,je){var Je=wr(Te)?Pl:Zf,it=le?le():{};return Je(Te,Z,pr(je,2),it)}}function $i(Z){return Cr(function(le,Te){var je=-1,Je=Te.length,it=Je>1?Te[Je-1]:x,ft=Je>2?Te[2]:x;for(it=Z.length>3&&typeof it=="function"?(Je--,it):x,ft&&pn(Te[0],Te[1],ft)&&(it=Je<3?x:it,Je=1),le=Lr(le);++je<Je;){var pt=Te[je];pt&&Z(le,pt,je,it)}return le})}function Jo(Z,le){return function(Te,je){if(Te==null)return Te;if(!yn(Te))return Z(Te,je);for(var Je=Te.length,it=le?Je:-1,ft=Lr(Te);(le?it--:++it<Je)&&je(ft[it],it,ft)!==!1;);return Te}}function Zo(Z){return function(le,Te,je){for(var Je=-1,it=Lr(le),ft=je(le),pt=ft.length;pt--;){var _t=ft[Z?pt:++Je];if(Te(it[_t],_t,it)===!1)break}return le}}function Iu(Z,le,Te){var je=le&q,Je=ji(Z);function it(){var ft=this&&this!==sn&&this instanceof it?Je:Z;return ft.apply(je?Te:this,arguments)}return it}function Qo(Z){return function(le){le=Or(le);var Te=yi(le)?On(le):x,je=Te?Te[0]:le.charAt(0),Je=Te?ai(Te,1).join(""):le.slice(1);return je[Z]()+Je}}function Ci(Z){return function(le){return Da(Zc(Jc(le).replace(yl,"")),Z,"")}}function ji(Z){return function(){var le=arguments;switch(le.length){case 0:return new Z;case 1:return new Z(le[0]);case 2:return new Z(le[0],le[1]);case 3:return new Z(le[0],le[1],le[2]);case 4:return new Z(le[0],le[1],le[2],le[3]);case 5:return new Z(le[0],le[1],le[2],le[3],le[4]);case 6:return new Z(le[0],le[1],le[2],le[3],le[4],le[5]);case 7:return new Z(le[0],le[1],le[2],le[3],le[4],le[5],le[6])}var Te=Si(Z.prototype),je=Z.apply(Te,le);return Wr(je)?je:Te}}function Ru(Z,le,Te){var je=ji(Z);function Je(){for(var it=arguments.length,ft=At(it),pt=it,_t=Ti(Je);pt--;)ft[pt]=arguments[pt];var Ht=it<3&&ft[0]!==_t&&ft[it-1]!==_t?[]:ei(ft,_t);if(it-=Ht.length,it<Te)return ac(Z,le,va,Je.placeholder,x,ft,Ht,x,x,Te-it);var zt=this&&this!==sn&&this instanceof Je?je:Z;return wn(zt,this,ft)}return Je}function tc(Z){return function(le,Te,je){var Je=Lr(le);if(!yn(le)){var it=pr(Te,3);le=an(le),Te=function(pt){return it(Je[pt],pt,Je)}}var ft=Z(le,Te,je);return ft>-1?Je[it?le[ft]:ft]:x}}function rc(Z){return Wn(function(le){var Te=le.length,je=Te,Je=In.prototype.thru;for(Z&&le.reverse();je--;){var it=le[je];if(typeof it!="function")throw new Bn(T);if(Je&&!ft&&xa(it)=="wrapper")var ft=new In([],!0)}for(je=ft?je:Te;++je<Te;){it=le[je];var pt=xa(it),_t=pt=="wrapper"?xs(it):x;_t&&$s(_t[0])&&_t[1]==(Y|Q|ce|fe)&&!_t[4].length&&_t[9]==1?ft=ft[xa(_t[0])].apply(ft,_t[3]):ft=it.length==1&&$s(it)?ft[pt]():ft.thru(it)}return function(){var Ht=arguments,zt=Ht[0];if(ft&&Ht.length==1&&wr(zt))return ft.plant(zt).value();for(var Jt=0,Qt=Te?le[Jt].apply(this,Ht):zt;++Jt<Te;)Qt=le[Jt].call(this,Qt);return Qt}})}function va(Z,le,Te,je,Je,it,ft,pt,_t,Ht){var zt=le&Y,Jt=le&q,Qt=le&H,lr=le&(Q|re),gr=le&ge,$r=Qt?x:ji(Z);function vr(){for(var Ar=arguments.length,Pr=At(Ar),Cn=Ar;Cn--;)Pr[Cn]=arguments[Cn];if(lr)var mn=Ti(vr),Tn=jl(Pr,mn);if(je&&(Pr=Xo(Pr,je,Je,lr)),it&&(Pr=Yo(Pr,it,ft,lr)),Ar-=Tn,lr&&Ar<Ht){var Jr=ei(Pr,mn);return ac(Z,le,va,vr.placeholder,Te,Pr,Jr,pt,_t,Ht-Ar)}var Ln=Jt?Te:this,Jn=Qt?Ln[Z]:Z;return Ar=Pr.length,pt?Pr=Zu(Pr,pt):gr&&Ar>1&&Pr.reverse(),zt&&_t<Ar&&(Pr.length=_t),this&&this!==sn&&this instanceof vr&&(Jn=$r||ji(Jn)),Jn.apply(Ln,Pr)}return vr}function nc(Z,le){return function(Te,je){return su(Te,Z,le(je),{})}}function ya(Z,le){return function(Te,je){var Je;if(Te===x&&je===x)return le;if(Te!==x&&(Je=Te),je!==x){if(Je===x)return je;typeof Te=="string"||typeof je=="string"?(Te=Sn(Te),je=Sn(je)):(Te=Uo(Te),je=Uo(je)),Je=Z(Te,je)}return Je}}function vs(Z){return Wn(function(le){return le=Kr(le,En(pr())),Cr(function(Te){var je=this;return Z(le,function(Je){return wn(Je,je,Te)})})})}function ba(Z,le){le=le===x?" ":Sn(le);var Te=le.length;if(Te<2)return Te?cs(le,Z):le;var je=cs(le,aa(Z/bi(le)));return yi(le)?ai(On(je),0,Z).join(""):je.slice(0,Z)}function Pu(Z,le,Te,je){var Je=le&q,it=ji(Z);function ft(){for(var pt=-1,_t=arguments.length,Ht=-1,zt=je.length,Jt=At(zt+_t),Qt=this&&this!==sn&&this instanceof ft?it:Z;++Ht<zt;)Jt[Ht]=je[Ht];for(;_t--;)Jt[Ht++]=arguments[++pt];return wn(Qt,Je?Te:this,Jt)}return ft}function ic(Z){return function(le,Te,je){return je&&typeof je!="number"&&pn(le,Te,je)&&(Te=je=x),le=Yn(le),Te===x?(Te=le,le=0):Te=Yn(Te),je=je===x?le<Te?1:-1:Yn(je),yu(le,Te,je,Z)}}function _a(Z){return function(le,Te){return typeof le=="string"&&typeof Te=="string"||(le=Nn(le),Te=Nn(Te)),Z(le,Te)}}function ac(Z,le,Te,je,Je,it,ft,pt,_t,Ht){var zt=le&Q,Jt=zt?ft:x,Qt=zt?x:ft,lr=zt?it:x,gr=zt?x:it;le|=zt?ce:ne,le&=~(zt?ne:ce),le&W||(le&=~(q|H));var $r=[Z,le,Je,lr,Jt,gr,Qt,pt,_t,Ht],vr=Te.apply(x,$r);return $s(Z)&&vc(vr,$r),vr.placeholder=je,yc(vr,Z,le)}function ys(Z){var le=rn[Z];return function(Te,je){if(Te=Nn(Te),je=je==null?0:ln(Sr(je),292),je&&go(Te)){var Je=(Or(Te)+"e").split("e"),it=le(Je[0]+"e"+(+Je[1]+je));return Je=(Or(it)+"e").split("e"),+(Je[0]+"e"+(+Je[1]-je))}return le(Te)}}var Mu=wi&&1/Xi(new wi([,-0]))[1]==te?function(Z){return new wi(Z)}:Vs;function sc(Z){return function(le){var Te=fn(le);return Te==me?Ha(le):Te==We?Yl(le):Ul(le,Z(le))}}function Kn(Z,le,Te,je,Je,it,ft,pt){var _t=le&H;if(!_t&&typeof Z!="function")throw new Bn(T);var Ht=je?je.length:0;if(Ht||(le&=~(ce|ne),je=Je=x),ft=ft===x?ft:nn(Sr(ft),0),pt=pt===x?pt:Sr(pt),Ht-=Je?Je.length:0,le&ne){var zt=je,Jt=Je;je=Je=x}var Qt=_t?x:xs(Z),lr=[Z,le,Te,je,Je,zt,Jt,it,ft,pt];if(Qt&&Xu(lr,Qt),Z=lr[0],le=lr[1],Te=lr[2],je=lr[3],Je=lr[4],pt=lr[9]=lr[9]===x?_t?0:Z.length:nn(lr[9]-Ht,0),!pt&&le&(Q|re)&&(le&=~(Q|re)),!le||le==q)var gr=Iu(Z,le,Te);else le==Q||le==re?gr=Ru(Z,le,pt):(le==ce||le==(q|ce))&&!Je.length?gr=Pu(Z,le,Te,je):gr=va.apply(x,lr);var $r=Qt?Lo:vc;return yc($r(gr,lr),Z,le)}function oc(Z,le,Te,je){return Z===x||Fn(Z,xi[Te])&&!Fr.call(je,Te)?le:Z}function cc(Z,le,Te,je,Je,it){return Wr(Z)&&Wr(le)&&(it.set(le,Z),ha(Z,le,x,cc,it),it.delete(le)),Z}function Nu(Z){return zi(Z)?x:Z}function lc(Z,le,Te,je,Je,it){var ft=Te&V,pt=Z.length,_t=le.length;if(pt!=_t&&!(ft&&_t>pt))return!1;var Ht=it.get(Z),zt=it.get(le);if(Ht&&zt)return Ht==le&&zt==Z;var Jt=-1,Qt=!0,lr=Te&U?new ui:x;for(it.set(Z,le),it.set(le,Z);++Jt<pt;){var gr=Z[Jt],$r=le[Jt];if(je)var vr=ft?je($r,gr,Jt,le,Z,it):je(gr,$r,Jt,Z,le,it);if(vr!==x){if(vr)continue;Qt=!1;break}if(lr){if(!Fa(le,function(Ar,Pr){if(!Ii(lr,Pr)&&(gr===Ar||Je(gr,Ar,Te,je,it)))return lr.push(Pr)})){Qt=!1;break}}else if(!(gr===$r||Je(gr,$r,Te,je,it))){Qt=!1;break}}return it.delete(Z),it.delete(le),Qt}function Ou(Z,le,Te,je,Je,it,ft){switch(Te){case be:if(Z.byteLength!=le.byteLength||Z.byteOffset!=le.byteOffset)return!1;Z=Z.buffer,le=le.buffer;case Re:return!(Z.byteLength!=le.byteLength||!it(new ta(Z),new ta(le)));case xe:case Ee:case Ie:return Fn(+Z,+le);case Ce:return Z.name==le.name&&Z.message==le.message;case He:case Ke:return Z==le+"";case me:var pt=Ha;case We:var _t=je&V;if(pt||(pt=Xi),Z.size!=le.size&&!_t)return!1;var Ht=ft.get(Z);if(Ht)return Ht==le;je|=U,ft.set(Z,le);var zt=lc(pt(Z),pt(le),je,Je,it,ft);return ft.delete(Z),zt;case Ge:if(Oi)return Oi.call(Z)==Oi.call(le)}return!1}function Du(Z,le,Te,je,Je,it){var ft=Te&V,pt=bs(Z),_t=pt.length,Ht=bs(le),zt=Ht.length;if(_t!=zt&&!ft)return!1;for(var Jt=_t;Jt--;){var Qt=pt[Jt];if(!(ft?Qt in le:Fr.call(le,Qt)))return!1}var lr=it.get(Z),gr=it.get(le);if(lr&&gr)return lr==le&&gr==Z;var $r=!0;it.set(Z,le),it.set(le,Z);for(var vr=ft;++Jt<_t;){Qt=pt[Jt];var Ar=Z[Qt],Pr=le[Qt];if(je)var Cn=ft?je(Pr,Ar,Qt,le,Z,it):je(Ar,Pr,Qt,Z,le,it);if(!(Cn===x?Ar===Pr||Je(Ar,Pr,Te,je,it):Cn)){$r=!1;break}vr||(vr=Qt=="constructor")}if($r&&!vr){var mn=Z.constructor,Tn=le.constructor;mn!=Tn&&"constructor"in Z&&"constructor"in le&&!(typeof mn=="function"&&mn instanceof mn&&typeof Tn=="function"&&Tn instanceof Tn)&&($r=!1)}return it.delete(Z),it.delete(le),$r}function Wn(Z){return Ts(mc(Z,x,Sc),Z+"")}function bs(Z){return Ao(Z,an,Es)}function _s(Z){return Ao(Z,_n,fc)}var xs=oa?function(Z){return oa.get(Z)}:Vs;function xa(Z){for(var le=Z.name+"",Te=Ei[le],je=Fr.call(Ei,le)?Te.length:0;je--;){var Je=Te[je],it=Je.func;if(it==null||it==Z)return Je.name}return le}function Ti(Z){var le=Fr.call(tt,"placeholder")?tt:Z;return le.placeholder}function pr(){var Z=tt.iteratee||Fs;return Z=Z===Fs?Io:Z,arguments.length?Z(arguments[0],arguments[1]):Z}function wa(Z,le){var Te=Z.__data__;return zu(le)?Te[typeof le=="string"?"string":"hash"]:Te.map}function ws(Z){for(var le=an(Z),Te=le.length;Te--;){var je=le[Te],Je=Z[je];le[Te]=[je,Je,hc(Je)]}return le}function pi(Z,le){var Te=Wl(Z,le);return Bo(Te)?Te:x}function Fu(Z){var le=Fr.call(Z,li),Te=Z[li];try{Z[li]=x;var je=!0}catch{}var Je=Qi.call(Z);return je&&(le?Z[li]=Te:delete Z[li]),Je}var Es=Ka?function(Z){return Z==null?[]:(Z=Lr(Z),Zn(Ka(Z),function(le){return po.call(Z,le)}))}:Us,fc=Ka?function(Z){for(var le=[];Z;)Qn(le,Es(Z)),Z=ra(Z);return le}:Us,fn=hn;(Wa&&fn(new Wa(new ArrayBuffer(1)))!=be||Pi&&fn(new Pi)!=me||Ga&&fn(Ga.resolve())!=Ne||wi&&fn(new wi)!=We||Mi&&fn(new Mi)!=ot)&&(fn=function(Z){var le=hn(Z),Te=le==Me?Z.constructor:x,je=Te?mi(Te):"";if(je)switch(je){case _f:return be;case xf:return me;case wf:return Ne;case Ef:return We;case Sf:return ot}return le});function Lu(Z,le,Te){for(var je=-1,Je=Te.length;++je<Je;){var it=Te[je],ft=it.size;switch(it.type){case"drop":Z+=ft;break;case"dropRight":le-=ft;break;case"take":le=ln(le,Z+ft);break;case"takeRight":Z=nn(Z,le-ft);break}}return{start:Z,end:le}}function Vu(Z){var le=Z.match(ue);return le?le[1].split(ke):[]}function uc(Z,le,Te){le=ii(le,Z);for(var je=-1,Je=le.length,it=!1;++je<Je;){var ft=jn(le[je]);if(!(it=Z!=null&&Te(Z,ft)))break;Z=Z[ft]}return it||++je!=Je?it:(Je=Z==null?0:Z.length,!!Je&&ka(Je)&&Gn(ft,Je)&&(wr(Z)||gi(Z)))}function Uu(Z){var le=Z.length,Te=new Z.constructor(le);return le&&typeof Z[0]=="string"&&Fr.call(Z,"index")&&(Te.index=Z.index,Te.input=Z.input),Te}function dc(Z){return typeof Z.constructor=="function"&&!qi(Z)?Si(ra(Z)):{}}function ju(Z,le,Te){var je=Z.constructor;switch(le){case Re:return gs(Z);case xe:case Ee:return new je(+Z);case be:return $u(Z,Te);case Ae:case Le:case Xe:case Qe:case et:case St:case mt:case dt:case jt:return Wo(Z,Te);case me:return new je;case Ie:case Ke:return new je(Z);case He:return Cu(Z);case We:return new je;case Ge:return Tu(Z)}}function qu(Z,le){var Te=le.length;if(!Te)return Z;var je=Te-1;return le[je]=(Te>1?"& ":"")+le[je],le=le.join(Te>2?", ":" "),Z.replace(De,`{
/* [wrapped with `+le+`] */
`)}function Hu(Z){return wr(Z)||gi(Z)||!!(mo&&Z&&Z[mo])}function Gn(Z,le){var Te=typeof Z;return le=le??se,!!le&&(Te=="number"||Te!="symbol"&&ht.test(Z))&&Z>-1&&Z%1==0&&Z<le}function pn(Z,le,Te){if(!Wr(Te))return!1;var je=typeof le;return(je=="number"?yn(Te)&&Gn(le,Te.length):je=="string"&&le in Te)?Fn(Te[le],Z):!1}function Ss(Z,le){if(wr(Z))return!1;var Te=typeof Z;return Te=="number"||Te=="symbol"||Te=="boolean"||Z==null||$n(Z)?!0:ar.test(Z)||!Bt.test(Z)||le!=null&&Z in Lr(le)}function zu(Z){var le=typeof Z;return le=="string"||le=="number"||le=="symbol"||le=="boolean"?Z!=="__proto__":Z===null}function $s(Z){var le=xa(Z),Te=tt[le];if(typeof Te!="function"||!(le in Rr.prototype))return!1;if(Z===Te)return!0;var je=xs(Te);return!!je&&Z===je[0]}function Ku(Z){return!!fo&&fo in Z}var Wu=Ji?Xn:js;function qi(Z){var le=Z&&Z.constructor,Te=typeof le=="function"&&le.prototype||xi;return Z===Te}function hc(Z){return Z===Z&&!Wr(Z)}function pc(Z,le){return function(Te){return Te==null?!1:Te[Z]===le&&(le!==x||Z in Lr(Te))}}function Gu(Z){var le=Ta(Z,function(je){return Te.size===I&&Te.clear(),je}),Te=le.cache;return le}function Xu(Z,le){var Te=Z[1],je=le[1],Je=Te|je,it=Je<(q|H|Y),ft=je==Y&&Te==Q||je==Y&&Te==fe&&Z[7].length<=le[8]||je==(Y|fe)&&le[7].length<=le[8]&&Te==Q;if(!(it||ft))return Z;je&q&&(Z[2]=le[2],Je|=Te&q?0:W);var pt=le[3];if(pt){var _t=Z[3];Z[3]=_t?Xo(_t,pt,le[4]):pt,Z[4]=_t?ei(Z[3],M):le[4]}return pt=le[5],pt&&(_t=Z[5],Z[5]=_t?Yo(_t,pt,le[6]):pt,Z[6]=_t?ei(Z[5],M):le[6]),pt=le[7],pt&&(Z[7]=pt),je&Y&&(Z[8]=Z[8]==null?le[8]:ln(Z[8],le[8])),Z[9]==null&&(Z[9]=le[9]),Z[0]=le[0],Z[1]=Je,Z}function Yu(Z){var le=[];if(Z!=null)for(var Te in Lr(Z))le.push(Te);return le}function Ju(Z){return Qi.call(Z)}function mc(Z,le,Te){return le=nn(le===x?Z.length-1:le,0),function(){for(var je=arguments,Je=-1,it=nn(je.length-le,0),ft=At(it);++Je<it;)ft[Je]=je[le+Je];Je=-1;for(var pt=At(le+1);++Je<le;)pt[Je]=je[Je];return pt[le]=Te(ft),wn(Z,this,pt)}}function gc(Z,le){return le.length<2?Z:hi(Z,Pn(le,0,-1))}function Zu(Z,le){for(var Te=Z.length,je=ln(le.length,Te),Je=vn(Z);je--;){var it=le[je];Z[je]=Gn(it,Te)?Je[it]:x}return Z}function Cs(Z,le){if(!(le==="constructor"&&typeof Z[le]=="function")&&le!="__proto__")return Z[le]}var vc=bc(Lo),Hi=hf||function(Z,le){return sn.setTimeout(Z,le)},Ts=bc(xu);function yc(Z,le,Te){var je=le+"";return Ts(Z,qu(je,Qu(Vu(je),Te)))}function bc(Z){var le=0,Te=0;return function(){var je=vf(),Je=X-(je-Te);if(Te=je,Je>0){if(++le>=ae)return arguments[0]}else le=0;return Z.apply(x,arguments)}}function Ea(Z,le){var Te=-1,je=Z.length,Je=je-1;for(le=le===x?je:le;++Te<le;){var it=ss(Te,Je),ft=Z[it];Z[it]=Z[Te],Z[Te]=ft}return Z.length=le,Z}var _c=Gu(function(Z){var le=[];return Z.charCodeAt(0)===46&&le.push(""),Z.replace(qt,function(Te,je,Je,it){le.push(Je?it.replace(ze,"$1"):je||Te)}),le});function jn(Z){if(typeof Z=="string"||$n(Z))return Z;var le=Z+"";return le=="0"&&1/Z==-te?"-0":le}function mi(Z){if(Z!=null){try{return Zi.call(Z)}catch{}try{return Z+""}catch{}}return""}function Qu(Z,le){return kn(pe,function(Te){var je="_."+Te[0];le&Te[1]&&!Wi(Z,je)&&Z.push(je)}),Z.sort()}function xc(Z){if(Z instanceof Rr)return Z.clone();var le=new In(Z.__wrapped__,Z.__chain__);return le.__actions__=vn(Z.__actions__),le.__index__=Z.__index__,le.__values__=Z.__values__,le}function ed(Z,le,Te){(Te?pn(Z,le,Te):le===x)?le=1:le=nn(Sr(le),0);var je=Z==null?0:Z.length;if(!je||le<1)return[];for(var Je=0,it=0,ft=At(aa(je/le));Je<je;)ft[it++]=Pn(Z,Je,Je+=le);return ft}function td(Z){for(var le=-1,Te=Z==null?0:Z.length,je=0,Je=[];++le<Te;){var it=Z[le];it&&(Je[je++]=it)}return Je}function rd(){var Z=arguments.length;if(!Z)return[];for(var le=At(Z-1),Te=arguments[0],je=Z;je--;)le[je-1]=arguments[je];return Qn(wr(Te)?vn(Te):[Te],cn(le,1))}var nd=Cr(function(Z,le){return Yr(Z)?Fi(Z,cn(le,1,Yr,!0)):[]}),ad=Cr(function(Z,le){var Te=Mn(le);return Yr(Te)&&(Te=x),Yr(Z)?Fi(Z,cn(le,1,Yr,!0),pr(Te,2)):[]}),sd=Cr(function(Z,le){var Te=Mn(le);return Yr(Te)&&(Te=x),Yr(Z)?Fi(Z,cn(le,1,Yr,!0),x,Te):[]});function od(Z,le,Te){var je=Z==null?0:Z.length;return je?(le=Te||le===x?1:Sr(le),Pn(Z,le<0?0:le,je)):[]}function cd(Z,le,Te){var je=Z==null?0:Z.length;return je?(le=Te||le===x?1:Sr(le),le=je-le,Pn(Z,0,le<0?0:le)):[]}function ld(Z,le){return Z&&Z.length?ma(Z,pr(le,3),!0,!0):[]}function fd(Z,le){return Z&&Z.length?ma(Z,pr(le,3),!0):[]}function ud(Z,le,Te,je){var Je=Z==null?0:Z.length;return Je?(Te&&typeof Te!="number"&&pn(Z,le,Te)&&(Te=0,je=Je),ru(Z,le,Te,je)):[]}function wc(Z,le,Te){var je=Z==null?0:Z.length;if(!je)return-1;var Je=Te==null?0:Sr(Te);return Je<0&&(Je=nn(je+Je,0)),Gi(Z,pr(le,3),Je)}function Ec(Z,le,Te){var je=Z==null?0:Z.length;if(!je)return-1;var Je=je-1;return Te!==x&&(Je=Sr(Te),Je=Te<0?nn(je+Je,0):ln(Je,je-1)),Gi(Z,pr(le,3),Je,!0)}function Sc(Z){var le=Z==null?0:Z.length;return le?cn(Z,1):[]}function dd(Z){var le=Z==null?0:Z.length;return le?cn(Z,te):[]}function hd(Z,le){var Te=Z==null?0:Z.length;return Te?(le=le===x?1:Sr(le),cn(Z,le)):[]}function pd(Z){for(var le=-1,Te=Z==null?0:Z.length,je={};++le<Te;){var Je=Z[le];je[Je[0]]=Je[1]}return je}function $c(Z){return Z&&Z.length?Z[0]:x}function md(Z,le,Te){var je=Z==null?0:Z.length;if(!je)return-1;var Je=Te==null?0:Sr(Te);return Je<0&&(Je=nn(je+Je,0)),vi(Z,le,Je)}function gd(Z){var le=Z==null?0:Z.length;return le?Pn(Z,0,-1):[]}var vd=Cr(function(Z){var le=Kr(Z,hs);return le.length&&le[0]===Z[0]?es(le):[]}),yd=Cr(function(Z){var le=Mn(Z),Te=Kr(Z,hs);return le===Mn(Te)?le=x:Te.pop(),Te.length&&Te[0]===Z[0]?es(Te,pr(le,2)):[]}),bd=Cr(function(Z){var le=Mn(Z),Te=Kr(Z,hs);return le=typeof le=="function"?le:x,le&&Te.pop(),Te.length&&Te[0]===Z[0]?es(Te,x,le):[]});function _d(Z,le){return Z==null?"":mf.call(Z,le)}function Mn(Z){var le=Z==null?0:Z.length;return le?Z[le-1]:x}function xd(Z,le,Te){var je=Z==null?0:Z.length;if(!je)return-1;var Je=je;return Te!==x&&(Je=Sr(Te),Je=Je<0?nn(je+Je,0):ln(Je,je-1)),le===le?Zl(Z,le,Je):Gi(Z,ro,Je,!0)}function wd(Z,le){return Z&&Z.length?No(Z,Sr(le)):x}var Ed=Cr(Cc);function Cc(Z,le){return Z&&Z.length&&le&&le.length?as(Z,le):Z}function Sd(Z,le,Te){return Z&&Z.length&&le&&le.length?as(Z,le,pr(Te,2)):Z}function $d(Z,le,Te){return Z&&Z.length&&le&&le.length?as(Z,le,x,Te):Z}var Cd=Wn(function(Z,le){var Te=Z==null?0:Z.length,je=Ya(Z,le);return Fo(Z,Kr(le,function(Je){return Gn(Je,Te)?+Je:Je}).sort(Go)),je});function Td(Z,le){var Te=[];if(!(Z&&Z.length))return Te;var je=-1,Je=[],it=Z.length;for(le=pr(le,3);++je<it;){var ft=Z[je];le(ft,je,Z)&&(Te.push(ft),Je.push(je))}return Fo(Z,Je),Te}function As(Z){return Z==null?Z:bf.call(Z)}function Ad(Z,le,Te){var je=Z==null?0:Z.length;return je?(Te&&typeof Te!="number"&&pn(Z,le,Te)?(le=0,Te=je):(le=le==null?0:Sr(le),Te=Te===x?je:Sr(Te)),Pn(Z,le,Te)):[]}function kd(Z,le){return pa(Z,le)}function Bd(Z,le,Te){return ls(Z,le,pr(Te,2))}function Id(Z,le){var Te=Z==null?0:Z.length;if(Te){var je=pa(Z,le);if(je<Te&&Fn(Z[je],le))return je}return-1}function Rd(Z,le){return pa(Z,le,!0)}function Pd(Z,le,Te){return ls(Z,le,pr(Te,2),!0)}function Md(Z,le){var Te=Z==null?0:Z.length;if(Te){var je=pa(Z,le,!0)-1;if(Fn(Z[je],le))return je}return-1}function Nd(Z){return Z&&Z.length?Vo(Z):[]}function Od(Z,le){return Z&&Z.length?Vo(Z,pr(le,2)):[]}function Dd(Z){var le=Z==null?0:Z.length;return le?Pn(Z,1,le):[]}function Fd(Z,le,Te){return Z&&Z.length?(le=Te||le===x?1:Sr(le),Pn(Z,0,le<0?0:le)):[]}function Ld(Z,le,Te){var je=Z==null?0:Z.length;return je?(le=Te||le===x?1:Sr(le),le=je-le,Pn(Z,le<0?0:le,je)):[]}function Vd(Z,le){return Z&&Z.length?ma(Z,pr(le,3),!1,!0):[]}function Ud(Z,le){return Z&&Z.length?ma(Z,pr(le,3)):[]}var jd=Cr(function(Z){return ni(cn(Z,1,Yr,!0))}),qd=Cr(function(Z){var le=Mn(Z);return Yr(le)&&(le=x),ni(cn(Z,1,Yr,!0),pr(le,2))}),Hd=Cr(function(Z){var le=Mn(Z);return le=typeof le=="function"?le:x,ni(cn(Z,1,Yr,!0),x,le)});function zd(Z){return Z&&Z.length?ni(Z):[]}function Kd(Z,le){return Z&&Z.length?ni(Z,pr(le,2)):[]}function Wd(Z,le){return le=typeof le=="function"?le:x,Z&&Z.length?ni(Z,x,le):[]}function ks(Z){if(!(Z&&Z.length))return[];var le=0;return Z=Zn(Z,function(Te){if(Yr(Te))return le=nn(Te.length,le),!0}),ja(le,function(Te){return Kr(Z,La(Te))})}function Tc(Z,le){if(!(Z&&Z.length))return[];var Te=ks(Z);return le==null?Te:Kr(Te,function(je){return wn(le,x,je)})}var Gd=Cr(function(Z,le){return Yr(Z)?Fi(Z,le):[]}),Xd=Cr(function(Z){return ds(Zn(Z,Yr))}),Yd=Cr(function(Z){var le=Mn(Z);return Yr(le)&&(le=x),ds(Zn(Z,Yr),pr(le,2))}),Jd=Cr(function(Z){var le=Mn(Z);return le=typeof le=="function"?le:x,ds(Zn(Z,Yr),x,le)}),Zd=Cr(ks);function Qd(Z,le){return Ho(Z||[],le||[],Di)}function eh(Z,le){return Ho(Z||[],le||[],Ui)}var th=Cr(function(Z){var le=Z.length,Te=le>1?Z[le-1]:x;return Te=typeof Te=="function"?(Z.pop(),Te):x,Tc(Z,Te)});function Ac(Z){var le=tt(Z);return le.__chain__=!0,le}function nh(Z,le){return le(Z),Z}function Sa(Z,le){return le(Z)}var ih=Wn(function(Z){var le=Z.length,Te=le?Z[0]:0,je=this.__wrapped__,Je=function(it){return Ya(it,Z)};return le>1||this.__actions__.length||!(je instanceof Rr)||!Gn(Te)?this.thru(Je):(je=je.slice(Te,+Te+(le?1:0)),je.__actions__.push({func:Sa,args:[Je],thisArg:x}),new In(je,this.__chain__).thru(function(it){return le&&!it.length&&it.push(x),it}))});function ah(){return Ac(this)}function oh(){return new In(this.value(),this.__chain__)}function ch(){this.__values__===x&&(this.__values__=jc(this.value()));var Z=this.__index__>=this.__values__.length,le=Z?x:this.__values__[this.__index__++];return{done:Z,value:le}}function lh(){return this}function fh(Z){for(var le,Te=this;Te instanceof la;){var je=xc(Te);je.__index__=0,je.__values__=x,le?Je.__wrapped__=je:le=je;var Je=je;Te=Te.__wrapped__}return Je.__wrapped__=Z,le}function uh(){var Z=this.__wrapped__;if(Z instanceof Rr){var le=Z;return this.__actions__.length&&(le=new Rr(this)),le=le.reverse(),le.__actions__.push({func:Sa,args:[As],thisArg:x}),new In(le,this.__chain__)}return this.thru(As)}function hh(){return qo(this.__wrapped__,this.__actions__)}var ph=ga(function(Z,le,Te){Fr.call(Z,Te)?++Z[Te]:zn(Z,Te,1)});function mh(Z,le,Te){var je=wr(Z)?eo:tu;return Te&&pn(Z,le,Te)&&(le=x),je(Z,pr(le,3))}function gh(Z,le){var Te=wr(Z)?Zn:Co;return Te(Z,pr(le,3))}var vh=tc(wc),yh=tc(Ec);function bh(Z,le){return cn($a(Z,le),1)}function _h(Z,le){return cn($a(Z,le),te)}function xh(Z,le,Te){return Te=Te===x?1:Sr(Te),cn($a(Z,le),Te)}function kc(Z,le){var Te=wr(Z)?kn:ri;return Te(Z,pr(le,3))}function Bc(Z,le){var Te=wr(Z)?Ml:$o;return Te(Z,pr(le,3))}var wh=ga(function(Z,le,Te){Fr.call(Z,Te)?Z[Te].push(le):zn(Z,Te,[le])});function Eh(Z,le,Te,je){Z=yn(Z)?Z:ki(Z),Te=Te&&!je?Sr(Te):0;var Je=Z.length;return Te<0&&(Te=nn(Je+Te,0)),Ba(Z)?Te<=Je&&Z.indexOf(le,Te)>-1:!!Je&&vi(Z,le,Te)>-1}var Sh=Cr(function(Z,le,Te){var je=-1,Je=typeof le=="function",it=yn(Z)?At(Z.length):[];return ri(Z,function(ft){it[++je]=Je?wn(le,ft,Te):Li(ft,le,Te)}),it}),$h=ga(function(Z,le,Te){zn(Z,Te,le)});function $a(Z,le){var Te=wr(Z)?Kr:Ro;return Te(Z,pr(le,3))}function Ch(Z,le,Te,je){return Z==null?[]:(wr(le)||(le=le==null?[]:[le]),Te=je?x:Te,wr(Te)||(Te=Te==null?[]:[Te]),Oo(Z,le,Te))}var Th=ga(function(Z,le,Te){Z[Te?0:1].push(le)},function(){return[[],[]]});function Ah(Z,le,Te){var je=wr(Z)?Da:io,Je=arguments.length<3;return je(Z,pr(le,4),Te,Je,ri)}function kh(Z,le,Te){var je=wr(Z)?Nl:io,Je=arguments.length<3;return je(Z,pr(le,4),Te,Je,$o)}function Bh(Z,le){var Te=wr(Z)?Zn:Co;return Te(Z,Aa(pr(le,3)))}function Ih(Z){var le=wr(Z)?xo:bu;return le(Z)}function Rh(Z,le,Te){(Te?pn(Z,le,Te):le===x)?le=1:le=Sr(le);var je=wr(Z)?Yf:_u;return je(Z,le)}function Ph(Z){var le=wr(Z)?Jf:wu;return le(Z)}function Mh(Z){if(Z==null)return 0;if(yn(Z))return Ba(Z)?bi(Z):Z.length;var le=fn(Z);return le==me||le==We?Z.size:rs(Z).length}function Nh(Z,le,Te){var je=wr(Z)?Fa:Eu;return Te&&pn(Z,le,Te)&&(le=x),je(Z,pr(le,3))}var Oh=Cr(function(Z,le){if(Z==null)return[];var Te=le.length;return Te>1&&pn(Z,le[0],le[1])?le=[]:Te>2&&pn(le[0],le[1],le[2])&&(le=[le[0]]),Oo(Z,cn(le,1),[])}),Ca=df||function(){return sn.Date.now()};function Dh(Z,le){if(typeof le!="function")throw new Bn(T);return Z=Sr(Z),function(){if(--Z<1)return le.apply(this,arguments)}}function Ic(Z,le,Te){return le=Te?x:le,le=Z&&le==null?Z.length:le,Kn(Z,Y,x,x,x,x,le)}function Rc(Z,le){var Te;if(typeof le!="function")throw new Bn(T);return Z=Sr(Z),function(){return--Z>0&&(Te=le.apply(this,arguments)),Z<=1&&(le=x),Te}}var Bs=Cr(function(Z,le,Te){var je=q;if(Te.length){var Je=ei(Te,Ti(Bs));je|=ce}return Kn(Z,je,le,Te,Je)}),Pc=Cr(function(Z,le,Te){var je=q|H;if(Te.length){var Je=ei(Te,Ti(Pc));je|=ce}return Kn(le,je,Z,Te,Je)});function Mc(Z,le,Te){le=Te?x:le;var je=Kn(Z,Q,x,x,x,x,x,le);return je.placeholder=Mc.placeholder,je}function Nc(Z,le,Te){le=Te?x:le;var je=Kn(Z,re,x,x,x,x,x,le);return je.placeholder=Nc.placeholder,je}function Oc(Z,le,Te){var je,Je,it,ft,pt,_t,Ht=0,zt=!1,Jt=!1,Qt=!0;if(typeof Z!="function")throw new Bn(T);le=Nn(le)||0,Wr(Te)&&(zt=!!Te.leading,Jt="maxWait"in Te,it=Jt?nn(Nn(Te.maxWait)||0,le):it,Qt="trailing"in Te?!!Te.trailing:Qt);function lr(Jr){var Ln=je,Jn=Je;return je=Je=x,Ht=Jr,ft=Z.apply(Jn,Ln),ft}function gr(Jr){return Ht=Jr,pt=Hi(Ar,le),zt?lr(Jr):ft}function $r(Jr){var Ln=Jr-_t,Jn=Jr-Ht,tl=le-Ln;return Jt?ln(tl,it-Jn):tl}function vr(Jr){var Ln=Jr-_t,Jn=Jr-Ht;return _t===x||Ln>=le||Ln<0||Jt&&Jn>=it}function Ar(){var Jr=Ca();if(vr(Jr))return Pr(Jr);pt=Hi(Ar,$r(Jr))}function Pr(Jr){return pt=x,Qt&&je?lr(Jr):(je=Je=x,ft)}function Cn(){pt!==x&&zo(pt),Ht=0,je=_t=Je=pt=x}function mn(){return pt===x?ft:Pr(Ca())}function Tn(){var Jr=Ca(),Ln=vr(Jr);if(je=arguments,Je=this,_t=Jr,Ln){if(pt===x)return gr(_t);if(Jt)return zo(pt),pt=Hi(Ar,le),lr(_t)}return pt===x&&(pt=Hi(Ar,le)),ft}return Tn.cancel=Cn,Tn.flush=mn,Tn}var Fh=Cr(function(Z,le){return So(Z,1,le)}),Lh=Cr(function(Z,le,Te){return So(Z,Nn(le)||0,Te)});function Vh(Z){return Kn(Z,ge)}function Ta(Z,le){if(typeof Z!="function"||le!=null&&typeof le!="function")throw new Bn(T);var Te=function(){var je=arguments,Je=le?le.apply(this,je):je[0],it=Te.cache;if(it.has(Je))return it.get(Je);var ft=Z.apply(this,je);return Te.cache=it.set(Je,ft)||it,ft};return Te.cache=new(Ta.Cache||Hn),Te}Ta.Cache=Hn;function Aa(Z){if(typeof Z!="function")throw new Bn(T);return function(){var le=arguments;switch(le.length){case 0:return!Z.call(this);case 1:return!Z.call(this,le[0]);case 2:return!Z.call(this,le[0],le[1]);case 3:return!Z.call(this,le[0],le[1],le[2])}return!Z.apply(this,le)}}function Uh(Z){return Rc(2,Z)}var jh=Su(function(Z,le){le=le.length==1&&wr(le[0])?Kr(le[0],En(pr())):Kr(cn(le,1),En(pr()));var Te=le.length;return Cr(function(je){for(var Je=-1,it=ln(je.length,Te);++Je<it;)je[Je]=le[Je].call(this,je[Je]);return wn(Z,this,je)})}),Is=Cr(function(Z,le){var Te=ei(le,Ti(Is));return Kn(Z,ce,x,le,Te)}),Dc=Cr(function(Z,le){var Te=ei(le,Ti(Dc));return Kn(Z,ne,x,le,Te)}),qh=Wn(function(Z,le){return Kn(Z,fe,x,x,x,le)});function Hh(Z,le){if(typeof Z!="function")throw new Bn(T);return le=le===x?le:Sr(le),Cr(Z,le)}function zh(Z,le){if(typeof Z!="function")throw new Bn(T);return le=le==null?0:nn(Sr(le),0),Cr(function(Te){var je=Te[le],Je=ai(Te,0,le);return je&&Qn(Je,je),wn(Z,this,Je)})}function Wh(Z,le,Te){var je=!0,Je=!0;if(typeof Z!="function")throw new Bn(T);return Wr(Te)&&(je="leading"in Te?!!Te.leading:je,Je="trailing"in Te?!!Te.trailing:Je),Oc(Z,le,{leading:je,maxWait:le,trailing:Je})}function Gh(Z){return Ic(Z,1)}function Xh(Z,le){return Is(ps(le),Z)}function Yh(){if(!arguments.length)return[];var Z=arguments[0];return wr(Z)?Z:[Z]}function Jh(Z){return Rn(Z,L)}function Zh(Z,le){return le=typeof le=="function"?le:x,Rn(Z,L,le)}function Qh(Z){return Rn(Z,O|L)}function e0(Z,le){return le=typeof le=="function"?le:x,Rn(Z,O|L,le)}function t0(Z,le){return le==null||Eo(Z,le,an(le))}function Fn(Z,le){return Z===le||Z!==Z&&le!==le}var r0=_a(Qa),n0=_a(function(Z,le){return Z>=le}),gi=ko(function(){return arguments}())?ko:function(Z){return Gr(Z)&&Fr.call(Z,"callee")&&!po.call(Z,"callee")},wr=At.isArray,i0=Gs?En(Gs):ou;function yn(Z){return Z!=null&&ka(Z.length)&&!Xn(Z)}function Yr(Z){return Gr(Z)&&yn(Z)}function a0(Z){return Z===!0||Z===!1||Gr(Z)&&hn(Z)==xe}var si=pf||js,s0=Xs?En(Xs):cu;function o0(Z){return Gr(Z)&&Z.nodeType===1&&!zi(Z)}function c0(Z){if(Z==null)return!0;if(yn(Z)&&(wr(Z)||typeof Z=="string"||typeof Z.splice=="function"||si(Z)||Ai(Z)||gi(Z)))return!Z.length;var le=fn(Z);if(le==me||le==We)return!Z.size;if(qi(Z))return!rs(Z).length;for(var Te in Z)if(Fr.call(Z,Te))return!1;return!0}function l0(Z,le){return Vi(Z,le)}function f0(Z,le,Te){Te=typeof Te=="function"?Te:x;var je=Te?Te(Z,le):x;return je===x?Vi(Z,le,x,Te):!!je}function Rs(Z){if(!Gr(Z))return!1;var le=hn(Z);return le==Ce||le==ye||typeof Z.message=="string"&&typeof Z.name=="string"&&!zi(Z)}function u0(Z){return typeof Z=="number"&&go(Z)}function Xn(Z){if(!Wr(Z))return!1;var le=hn(Z);return le==ve||le==Be||le==we||le==Pe}function Fc(Z){return typeof Z=="number"&&Z==Sr(Z)}function ka(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=se}function Wr(Z){var le=typeof Z;return Z!=null&&(le=="object"||le=="function")}function Gr(Z){return Z!=null&&typeof Z=="object"}var Lc=Ys?En(Ys):fu;function d0(Z,le){return Z===le||ts(Z,le,ws(le))}function h0(Z,le,Te){return Te=typeof Te=="function"?Te:x,ts(Z,le,ws(le),Te)}function p0(Z){return Vc(Z)&&Z!=+Z}function m0(Z){if(Wu(Z))throw new xr(C);return Bo(Z)}function g0(Z){return Z===null}function y0(Z){return Z==null}function Vc(Z){return typeof Z=="number"||Gr(Z)&&hn(Z)==Ie}function zi(Z){if(!Gr(Z)||hn(Z)!=Me)return!1;var le=ra(Z);if(le===null)return!0;var Te=Fr.call(le,"constructor")&&le.constructor;return typeof Te=="function"&&Te instanceof Te&&Zi.call(Te)==cf}var Ps=Js?En(Js):uu;function b0(Z){return Fc(Z)&&Z>=-se&&Z<=se}var Uc=Zs?En(Zs):du;function Ba(Z){return typeof Z=="string"||!wr(Z)&&Gr(Z)&&hn(Z)==Ke}function $n(Z){return typeof Z=="symbol"||Gr(Z)&&hn(Z)==Ge}var Ai=Qs?En(Qs):hu;function _0(Z){return Z===x}function x0(Z){return Gr(Z)&&fn(Z)==ot}function w0(Z){return Gr(Z)&&hn(Z)==Ze}var E0=_a(ns),S0=_a(function(Z,le){return Z<=le});function jc(Z){if(!Z)return[];if(yn(Z))return Ba(Z)?On(Z):vn(Z);if(Ri&&Z[Ri])return Xl(Z[Ri]());var le=fn(Z),Te=le==me?Ha:le==We?Xi:ki;return Te(Z)}function Yn(Z){if(!Z)return Z===0?Z:0;if(Z=Nn(Z),Z===te||Z===-te){var le=Z<0?-1:1;return le*oe}return Z===Z?Z:0}function Sr(Z){var le=Yn(Z),Te=le%1;return le===le?Te?le-Te:le:0}function qc(Z){return Z?di(Sr(Z),0,G):0}function Nn(Z){if(typeof Z=="number")return Z;if($n(Z))return ie;if(Wr(Z)){var le=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=Wr(le)?le+"":le}if(typeof Z!="string")return Z===0?Z:+Z;Z=ao(Z);var Te=ct.test(Z);return Te||lt.test(Z)?Il(Z.slice(2),Te?2:8):at.test(Z)?ie:+Z}function Hc(Z){return Un(Z,_n(Z))}function $0(Z){return Z?di(Sr(Z),-se,se):Z===0?Z:0}function Or(Z){return Z==null?"":Sn(Z)}var C0=$i(function(Z,le){if(qi(le)||yn(le)){Un(le,an(le),Z);return}for(var Te in le)Fr.call(le,Te)&&Di(Z,Te,le[Te])}),zc=$i(function(Z,le){Un(le,_n(le),Z)}),Ia=$i(function(Z,le,Te,je){Un(le,_n(le),Z,je)}),T0=$i(function(Z,le,Te,je){Un(le,an(le),Z,je)}),A0=Wn(Ya);function k0(Z,le){var Te=Si(Z);return le==null?Te:wo(Te,le)}var B0=Cr(function(Z,le){Z=Lr(Z);var Te=-1,je=le.length,Je=je>2?le[2]:x;for(Je&&pn(le[0],le[1],Je)&&(je=1);++Te<je;)for(var it=le[Te],ft=_n(it),pt=-1,_t=ft.length;++pt<_t;){var Ht=ft[pt],zt=Z[Ht];(zt===x||Fn(zt,xi[Ht])&&!Fr.call(Z,Ht))&&(Z[Ht]=it[Ht])}return Z}),I0=Cr(function(Z){return Z.push(x,cc),wn(Kc,x,Z)});function R0(Z,le){return to(Z,pr(le,3),Vn)}function P0(Z,le){return to(Z,pr(le,3),Za)}function M0(Z,le){return Z==null?Z:Ja(Z,pr(le,3),_n)}function N0(Z,le){return Z==null?Z:To(Z,pr(le,3),_n)}function O0(Z,le){return Z&&Vn(Z,pr(le,3))}function D0(Z,le){return Z&&Za(Z,pr(le,3))}function F0(Z){return Z==null?[]:da(Z,an(Z))}function L0(Z){return Z==null?[]:da(Z,_n(Z))}function Ms(Z,le,Te){var je=Z==null?x:hi(Z,le);return je===x?Te:je}function V0(Z,le){return Z!=null&&uc(Z,le,nu)}function Ns(Z,le){return Z!=null&&uc(Z,le,iu)}var U0=nc(function(Z,le,Te){le!=null&&typeof le.toString!="function"&&(le=Qi.call(le)),Z[le]=Te},Ds(xn)),j0=nc(function(Z,le,Te){le!=null&&typeof le.toString!="function"&&(le=Qi.call(le)),Fr.call(Z,le)?Z[le].push(Te):Z[le]=[Te]},pr),q0=Cr(Li);function an(Z){return yn(Z)?_o(Z):rs(Z)}function _n(Z){return yn(Z)?_o(Z,!0):pu(Z)}function H0(Z,le){var Te={};return le=pr(le,3),Vn(Z,function(je,Je,it){zn(Te,le(je,Je,it),je)}),Te}function z0(Z,le){var Te={};return le=pr(le,3),Vn(Z,function(je,Je,it){zn(Te,Je,le(je,Je,it))}),Te}var K0=$i(function(Z,le,Te){ha(Z,le,Te)}),Kc=$i(function(Z,le,Te,je){ha(Z,le,Te,je)}),W0=Wn(function(Z,le){var Te={};if(Z==null)return Te;var je=!1;le=Kr(le,function(it){return it=ii(it,Z),je||(je=it.length>1),it}),Un(Z,_s(Z),Te),je&&(Te=Rn(Te,O|D|L,Nu));for(var Je=le.length;Je--;)us(Te,le[Je]);return Te});function G0(Z,le){return Wc(Z,Aa(pr(le)))}var X0=Wn(function(Z,le){return Z==null?{}:gu(Z,le)});function Wc(Z,le){if(Z==null)return{};var Te=Kr(_s(Z),function(je){return[je]});return le=pr(le),Do(Z,Te,function(je,Je){return le(je,Je[0])})}function Y0(Z,le,Te){le=ii(le,Z);var je=-1,Je=le.length;for(Je||(Je=1,Z=x);++je<Je;){var it=Z==null?x:Z[jn(le[je])];it===x&&(je=Je,it=Te),Z=Xn(it)?it.call(Z):it}return Z}function J0(Z,le,Te){return Z==null?Z:Ui(Z,le,Te)}function Z0(Z,le,Te,je){return je=typeof je=="function"?je:x,Z==null?Z:Ui(Z,le,Te,je)}var Gc=sc(an),Xc=sc(_n);function Q0(Z,le,Te){var je=wr(Z),Je=je||si(Z)||Ai(Z);if(le=pr(le,4),Te==null){var it=Z&&Z.constructor;Je?Te=je?new it:[]:Wr(Z)?Te=Xn(it)?Si(ra(Z)):{}:Te={}}return(Je?kn:Vn)(Z,function(ft,pt,_t){return le(Te,ft,pt,_t)}),Te}function ep(Z,le){return Z==null?!0:us(Z,le)}function tp(Z,le,Te){return Z==null?Z:jo(Z,le,ps(Te))}function rp(Z,le,Te,je){return je=typeof je=="function"?je:x,Z==null?Z:jo(Z,le,ps(Te),je)}function ki(Z){return Z==null?[]:qa(Z,an(Z))}function np(Z){return Z==null?[]:qa(Z,_n(Z))}function ip(Z,le,Te){return Te===x&&(Te=le,le=x),Te!==x&&(Te=Nn(Te),Te=Te===Te?Te:0),le!==x&&(le=Nn(le),le=le===le?le:0),di(Nn(Z),le,Te)}function ap(Z,le,Te){return le=Yn(le),Te===x?(Te=le,le=0):Te=Yn(Te),Z=Nn(Z),au(Z,le,Te)}function sp(Z,le,Te){if(Te&&typeof Te!="boolean"&&pn(Z,le,Te)&&(le=Te=x),Te===x&&(typeof le=="boolean"?(Te=le,le=x):typeof Z=="boolean"&&(Te=Z,Z=x)),Z===x&&le===x?(Z=0,le=1):(Z=Yn(Z),le===x?(le=Z,Z=0):le=Yn(le)),Z>le){var je=Z;Z=le,le=je}if(Te||Z%1||le%1){var Je=vo();return ln(Z+Je*(le-Z+kl("1e-"+((Je+"").length-1))),le)}return ss(Z,le)}var op=Ci(function(Z,le,Te){return le=le.toLowerCase(),Z+(Te?Yc(le):le)});function Yc(Z){return Os(Or(Z).toLowerCase())}function Jc(Z){return Z=Or(Z),Z&&Z.replace(bt,ql).replace(bl,"")}function cp(Z,le,Te){Z=Or(Z),le=Sn(le);var je=Z.length;Te=Te===x?je:di(Sr(Te),0,je);var Je=Te;return Te-=le.length,Te>=0&&Z.slice(Te,Je)==le}function lp(Z){return Z=Or(Z),Z&&Mt.test(Z)?Z.replace(Nt,Hl):Z}function fp(Z){return Z=Or(Z),Z&&ir.test(Z)?Z.replace(Tt,"\\$&"):Z}var up=Ci(function(Z,le,Te){return Z+(Te?"-":"")+le.toLowerCase()}),dp=Ci(function(Z,le,Te){return Z+(Te?" ":"")+le.toLowerCase()}),hp=Qo("toLowerCase");function pp(Z,le,Te){Z=Or(Z),le=Sr(le);var je=le?bi(Z):0;if(!le||je>=le)return Z;var Je=(le-je)/2;return ba(sa(Je),Te)+Z+ba(aa(Je),Te)}function mp(Z,le,Te){Z=Or(Z),le=Sr(le);var je=le?bi(Z):0;return le&&je<le?Z+ba(le-je,Te):Z}function gp(Z,le,Te){Z=Or(Z),le=Sr(le);var je=le?bi(Z):0;return le&&je<le?ba(le-je,Te)+Z:Z}function vp(Z,le,Te){return Te||le==null?le=0:le&&(le=+le),yf(Or(Z).replace(qe,""),le||0)}function yp(Z,le,Te){return(Te?pn(Z,le,Te):le===x)?le=1:le=Sr(le),cs(Or(Z),le)}function bp(){var Z=arguments,le=Or(Z[0]);return Z.length<3?le:le.replace(Z[1],Z[2])}var _p=Ci(function(Z,le,Te){return Z+(Te?"_":"")+le.toLowerCase()});function xp(Z,le,Te){return Te&&typeof Te!="number"&&pn(Z,le,Te)&&(le=Te=x),Te=Te===x?G:Te>>>0,Te?(Z=Or(Z),Z&&(typeof le=="string"||le!=null&&!Ps(le))&&(le=Sn(le),!le&&yi(Z))?ai(On(Z),0,Te):Z.split(le,Te)):[]}var wp=Ci(function(Z,le,Te){return Z+(Te?" ":"")+Os(le)});function Ep(Z,le,Te){return Z=Or(Z),Te=Te==null?0:di(Sr(Te),0,Z.length),le=Sn(le),Z.slice(Te,Te+le.length)==le}function Sp(Z,le,Te){var je=tt.templateSettings;Te&&pn(Z,le,Te)&&(le=x),Z=Or(Z),le=Ia({},le,je,oc);var Je=Ia({},le.imports,je.imports,oc),it=an(Je),ft=qa(Je,it),pt,_t,Ht=0,zt=le.interpolate||Et,Jt="__p += '",Qt=za((le.escape||Et).source+"|"+zt.source+"|"+(zt===Vt?Ye:Et).source+"|"+(le.evaluate||Et).source+"|$","g"),lr="//# sourceURL="+(Fr.call(le,"sourceURL")?(le.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Sl+"]")+`
`;Z.replace(Qt,function(vr,Ar,Pr,Cn,mn,Tn){return Pr||(Pr=Cn),Jt+=Z.slice(Ht,Tn).replace(gt,Kl),Ar&&(pt=!0,Jt+=`' +
__e(`+Ar+`) +
'`),mn&&(_t=!0,Jt+=`';
`+mn+`;
__p += '`),Pr&&(Jt+=`' +
((__t = (`+Pr+`)) == null ? '' : __t) +
'`),Ht=Tn+vr.length,vr}),Jt+=`';
`;var gr=Fr.call(le,"variable")&&le.variable;if(!gr)Jt=`with (obj) {
`+Jt+`
}
`;else if(Ue.test(gr))throw new xr(A);Jt=(_t?Jt.replace(Ct,""):Jt).replace(Rt,"$1").replace(ur,"$1;"),Jt="function("+(gr||"obj")+`) {
`+(gr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(pt?", __e = _.escape":"")+(_t?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Jt+`return __p
}`;var $r=Qc(function(){return Nr(it,lr+"return "+Jt).apply(x,ft)});if($r.source=Jt,Rs($r))throw $r;return $r}function $p(Z){return Or(Z).toLowerCase()}function Cp(Z){return Or(Z).toUpperCase()}function Tp(Z,le,Te){if(Z=Or(Z),Z&&(Te||le===x))return ao(Z);if(!Z||!(le=Sn(le)))return Z;var je=On(Z),Je=On(le),it=so(je,Je),ft=oo(je,Je)+1;return ai(je,it,ft).join("")}function Ap(Z,le,Te){if(Z=Or(Z),Z&&(Te||le===x))return Z.slice(0,lo(Z)+1);if(!Z||!(le=Sn(le)))return Z;var je=On(Z),Je=oo(je,On(le))+1;return ai(je,0,Je).join("")}function kp(Z,le,Te){if(Z=Or(Z),Z&&(Te||le===x))return Z.replace(qe,"");if(!Z||!(le=Sn(le)))return Z;var je=On(Z),Je=so(je,On(le));return ai(je,Je).join("")}function Bp(Z,le){var Te=$e,je=_e;if(Wr(le)){var Je="separator"in le?le.separator:Je;Te="length"in le?Sr(le.length):Te,je="omission"in le?Sn(le.omission):je}Z=Or(Z);var it=Z.length;if(yi(Z)){var ft=On(Z);it=ft.length}if(Te>=it)return Z;var pt=Te-bi(je);if(pt<1)return je;var _t=ft?ai(ft,0,pt).join(""):Z.slice(0,pt);if(Je===x)return _t+je;if(ft&&(pt+=_t.length-pt),Ps(Je)){if(Z.slice(pt).search(Je)){var Ht,zt=_t;for(Je.global||(Je=za(Je.source,Or(rt.exec(Je))+"g")),Je.lastIndex=0;Ht=Je.exec(zt);)var Jt=Ht.index;_t=_t.slice(0,Jt===x?pt:Jt)}}else if(Z.indexOf(Sn(Je),pt)!=pt){var Qt=_t.lastIndexOf(Je);Qt>-1&&(_t=_t.slice(0,Qt))}return _t+je}function Ip(Z){return Z=Or(Z),Z&&er.test(Z)?Z.replace(Gt,Ql):Z}var Rp=Ci(function(Z,le,Te){return Z+(Te?" ":"")+le.toUpperCase()}),Os=Qo("toUpperCase");function Zc(Z,le,Te){return Z=Or(Z),le=Te?x:le,le===x?Gl(Z)?rf(Z):Fl(Z):Z.match(le)||[]}var Qc=Cr(function(Z,le){try{return wn(Z,x,le)}catch(Te){return Rs(Te)?Te:new xr(Te)}}),Pp=Wn(function(Z,le){return kn(le,function(Te){Te=jn(Te),zn(Z,Te,Bs(Z[Te],Z))}),Z});function Mp(Z){var le=Z==null?0:Z.length,Te=pr();return Z=le?Kr(Z,function(je){if(typeof je[1]!="function")throw new Bn(T);return[Te(je[0]),je[1]]}):[],Cr(function(je){for(var Je=-1;++Je<le;){var it=Z[Je];if(wn(it[0],this,je))return wn(it[1],this,je)}})}function Np(Z){return eu(Rn(Z,O))}function Ds(Z){return function(){return Z}}function Dp(Z,le){return Z==null||Z!==Z?le:Z}var Fp=rc(),Lp=rc(!0);function xn(Z){return Z}function Fs(Z){return Io(typeof Z=="function"?Z:Rn(Z,O))}function Vp(Z){return Po(Rn(Z,O))}function Up(Z,le){return Mo(Z,Rn(le,O))}var jp=Cr(function(Z,le){return function(Te){return Li(Te,Z,le)}}),qp=Cr(function(Z,le){return function(Te){return Li(Z,Te,le)}});function Ls(Z,le,Te){var je=an(le),Je=da(le,je);Te==null&&!(Wr(le)&&(Je.length||!je.length))&&(Te=le,le=Z,Z=this,Je=da(le,an(le)));var it=!(Wr(Te)&&"chain"in Te)||!!Te.chain,ft=Xn(Z);return kn(Je,function(pt){var _t=le[pt];Z[pt]=_t,ft&&(Z.prototype[pt]=function(){var Ht=this.__chain__;if(it||Ht){var zt=Z(this.__wrapped__),Jt=zt.__actions__=vn(this.__actions__);return Jt.push({func:_t,args:arguments,thisArg:Z}),zt.__chain__=Ht,zt}return _t.apply(Z,Qn([this.value()],arguments))})}),Z}function Hp(){return sn._===this&&(sn._=lf),this}function Vs(){}function zp(Z){return Z=Sr(Z),Cr(function(le){return No(le,Z)})}var Kp=vs(Kr),Wp=vs(eo),Gp=vs(Fa);function el(Z){return Ss(Z)?La(jn(Z)):vu(Z)}function Xp(Z){return function(le){return Z==null?x:hi(Z,le)}}var Yp=ic(),Jp=ic(!0);function Us(){return[]}function js(){return!1}function Zp(){return{}}function Qp(){return""}function e1(){return!0}function t1(Z,le){if(Z=Sr(Z),Z<1||Z>se)return[];var Te=G,je=ln(Z,G);le=pr(le),Z-=G;for(var Je=ja(je,le);++Te<Z;)le(Te);return Je}function r1(Z){return wr(Z)?Kr(Z,jn):$n(Z)?[Z]:vn(_c(Or(Z)))}function n1(Z){var le=++of;return Or(Z)+le}var i1=ya(function(Z,le){return Z+le},0),a1=ys("ceil"),s1=ya(function(Z,le){return Z/le},1),o1=ys("floor");function c1(Z){return Z&&Z.length?ua(Z,xn,Qa):x}function l1(Z,le){return Z&&Z.length?ua(Z,pr(le,2),Qa):x}function f1(Z){return no(Z,xn)}function u1(Z,le){return no(Z,pr(le,2))}function d1(Z){return Z&&Z.length?ua(Z,xn,ns):x}function h1(Z,le){return Z&&Z.length?ua(Z,pr(le,2),ns):x}var p1=ya(function(Z,le){return Z*le},1),m1=ys("round"),g1=ya(function(Z,le){return Z-le},0);function y1(Z){return Z&&Z.length?Ua(Z,xn):0}function b1(Z,le){return Z&&Z.length?Ua(Z,pr(le,2)):0}return tt.after=Dh,tt.ary=Ic,tt.assign=C0,tt.assignIn=zc,tt.assignInWith=Ia,tt.assignWith=T0,tt.at=A0,tt.before=Rc,tt.bind=Bs,tt.bindAll=Pp,tt.bindKey=Pc,tt.castArray=Yh,tt.chain=Ac,tt.chunk=ed,tt.compact=td,tt.concat=rd,tt.cond=Mp,tt.conforms=Np,tt.constant=Ds,tt.countBy=ph,tt.create=k0,tt.curry=Mc,tt.curryRight=Nc,tt.debounce=Oc,tt.defaults=B0,tt.defaultsDeep=I0,tt.defer=Fh,tt.delay=Lh,tt.difference=nd,tt.differenceBy=ad,tt.differenceWith=sd,tt.drop=od,tt.dropRight=cd,tt.dropRightWhile=ld,tt.dropWhile=fd,tt.fill=ud,tt.filter=gh,tt.flatMap=bh,tt.flatMapDeep=_h,tt.flatMapDepth=xh,tt.flatten=Sc,tt.flattenDeep=dd,tt.flattenDepth=hd,tt.flip=Vh,tt.flow=Fp,tt.flowRight=Lp,tt.fromPairs=pd,tt.functions=F0,tt.functionsIn=L0,tt.groupBy=wh,tt.initial=gd,tt.intersection=vd,tt.intersectionBy=yd,tt.intersectionWith=bd,tt.invert=U0,tt.invertBy=j0,tt.invokeMap=Sh,tt.iteratee=Fs,tt.keyBy=$h,tt.keys=an,tt.keysIn=_n,tt.map=$a,tt.mapKeys=H0,tt.mapValues=z0,tt.matches=Vp,tt.matchesProperty=Up,tt.memoize=Ta,tt.merge=K0,tt.mergeWith=Kc,tt.method=jp,tt.methodOf=qp,tt.mixin=Ls,tt.negate=Aa,tt.nthArg=zp,tt.omit=W0,tt.omitBy=G0,tt.once=Uh,tt.orderBy=Ch,tt.over=Kp,tt.overArgs=jh,tt.overEvery=Wp,tt.overSome=Gp,tt.partial=Is,tt.partialRight=Dc,tt.partition=Th,tt.pick=X0,tt.pickBy=Wc,tt.property=el,tt.propertyOf=Xp,tt.pull=Ed,tt.pullAll=Cc,tt.pullAllBy=Sd,tt.pullAllWith=$d,tt.pullAt=Cd,tt.range=Yp,tt.rangeRight=Jp,tt.rearg=qh,tt.reject=Bh,tt.remove=Td,tt.rest=Hh,tt.reverse=As,tt.sampleSize=Rh,tt.set=J0,tt.setWith=Z0,tt.shuffle=Ph,tt.slice=Ad,tt.sortBy=Oh,tt.sortedUniq=Nd,tt.sortedUniqBy=Od,tt.split=xp,tt.spread=zh,tt.tail=Dd,tt.take=Fd,tt.takeRight=Ld,tt.takeRightWhile=Vd,tt.takeWhile=Ud,tt.tap=nh,tt.throttle=Wh,tt.thru=Sa,tt.toArray=jc,tt.toPairs=Gc,tt.toPairsIn=Xc,tt.toPath=r1,tt.toPlainObject=Hc,tt.transform=Q0,tt.unary=Gh,tt.union=jd,tt.unionBy=qd,tt.unionWith=Hd,tt.uniq=zd,tt.uniqBy=Kd,tt.uniqWith=Wd,tt.unset=ep,tt.unzip=ks,tt.unzipWith=Tc,tt.update=tp,tt.updateWith=rp,tt.values=ki,tt.valuesIn=np,tt.without=Gd,tt.words=Zc,tt.wrap=Xh,tt.xor=Xd,tt.xorBy=Yd,tt.xorWith=Jd,tt.zip=Zd,tt.zipObject=Qd,tt.zipObjectDeep=eh,tt.zipWith=th,tt.entries=Gc,tt.entriesIn=Xc,tt.extend=zc,tt.extendWith=Ia,Ls(tt,tt),tt.add=i1,tt.attempt=Qc,tt.camelCase=op,tt.capitalize=Yc,tt.ceil=a1,tt.clamp=ip,tt.clone=Jh,tt.cloneDeep=Qh,tt.cloneDeepWith=e0,tt.cloneWith=Zh,tt.conformsTo=t0,tt.deburr=Jc,tt.defaultTo=Dp,tt.divide=s1,tt.endsWith=cp,tt.eq=Fn,tt.escape=lp,tt.escapeRegExp=fp,tt.every=mh,tt.find=vh,tt.findIndex=wc,tt.findKey=R0,tt.findLast=yh,tt.findLastIndex=Ec,tt.findLastKey=P0,tt.floor=o1,tt.forEach=kc,tt.forEachRight=Bc,tt.forIn=M0,tt.forInRight=N0,tt.forOwn=O0,tt.forOwnRight=D0,tt.get=Ms,tt.gt=r0,tt.gte=n0,tt.has=V0,tt.hasIn=Ns,tt.head=$c,tt.identity=xn,tt.includes=Eh,tt.indexOf=md,tt.inRange=ap,tt.invoke=q0,tt.isArguments=gi,tt.isArray=wr,tt.isArrayBuffer=i0,tt.isArrayLike=yn,tt.isArrayLikeObject=Yr,tt.isBoolean=a0,tt.isBuffer=si,tt.isDate=s0,tt.isElement=o0,tt.isEmpty=c0,tt.isEqual=l0,tt.isEqualWith=f0,tt.isError=Rs,tt.isFinite=u0,tt.isFunction=Xn,tt.isInteger=Fc,tt.isLength=ka,tt.isMap=Lc,tt.isMatch=d0,tt.isMatchWith=h0,tt.isNaN=p0,tt.isNative=m0,tt.isNil=y0,tt.isNull=g0,tt.isNumber=Vc,tt.isObject=Wr,tt.isObjectLike=Gr,tt.isPlainObject=zi,tt.isRegExp=Ps,tt.isSafeInteger=b0,tt.isSet=Uc,tt.isString=Ba,tt.isSymbol=$n,tt.isTypedArray=Ai,tt.isUndefined=_0,tt.isWeakMap=x0,tt.isWeakSet=w0,tt.join=_d,tt.kebabCase=up,tt.last=Mn,tt.lastIndexOf=xd,tt.lowerCase=dp,tt.lowerFirst=hp,tt.lt=E0,tt.lte=S0,tt.max=c1,tt.maxBy=l1,tt.mean=f1,tt.meanBy=u1,tt.min=d1,tt.minBy=h1,tt.stubArray=Us,tt.stubFalse=js,tt.stubObject=Zp,tt.stubString=Qp,tt.stubTrue=e1,tt.multiply=p1,tt.nth=wd,tt.noConflict=Hp,tt.noop=Vs,tt.now=Ca,tt.pad=pp,tt.padEnd=mp,tt.padStart=gp,tt.parseInt=vp,tt.random=sp,tt.reduce=Ah,tt.reduceRight=kh,tt.repeat=yp,tt.replace=bp,tt.result=Y0,tt.round=m1,tt.runInContext=vt,tt.sample=Ih,tt.size=Mh,tt.snakeCase=_p,tt.some=Nh,tt.sortedIndex=kd,tt.sortedIndexBy=Bd,tt.sortedIndexOf=Id,tt.sortedLastIndex=Rd,tt.sortedLastIndexBy=Pd,tt.sortedLastIndexOf=Md,tt.startCase=wp,tt.startsWith=Ep,tt.subtract=g1,tt.sum=y1,tt.sumBy=b1,tt.template=Sp,tt.times=t1,tt.toFinite=Yn,tt.toInteger=Sr,tt.toLength=qc,tt.toLower=$p,tt.toNumber=Nn,tt.toSafeInteger=$0,tt.toString=Or,tt.toUpper=Cp,tt.trim=Tp,tt.trimEnd=Ap,tt.trimStart=kp,tt.truncate=Bp,tt.unescape=Ip,tt.uniqueId=n1,tt.upperCase=Rp,tt.upperFirst=Os,tt.each=kc,tt.eachRight=Bc,tt.first=$c,Ls(tt,function(){var Z={};return Vn(tt,function(le,Te){Fr.call(tt.prototype,Te)||(Z[Te]=le)}),Z}(),{chain:!1}),tt.VERSION=E,kn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Z){tt[Z].placeholder=tt}),kn(["drop","take"],function(Z,le){Rr.prototype[Z]=function(Te){Te=Te===x?1:nn(Sr(Te),0);var je=this.__filtered__&&!le?new Rr(this):this.clone();return je.__filtered__?je.__takeCount__=ln(Te,je.__takeCount__):je.__views__.push({size:ln(Te,G),type:Z+(je.__dir__<0?"Right":"")}),je},Rr.prototype[Z+"Right"]=function(Te){return this.reverse()[Z](Te).reverse()}}),kn(["filter","map","takeWhile"],function(Z,le){var Te=le+1,je=Te==F||Te==J;Rr.prototype[Z]=function(Je){var it=this.clone();return it.__iteratees__.push({iteratee:pr(Je,3),type:Te}),it.__filtered__=it.__filtered__||je,it}}),kn(["head","last"],function(Z,le){var Te="take"+(le?"Right":"");Rr.prototype[Z]=function(){return this[Te](1).value()[0]}}),kn(["initial","tail"],function(Z,le){var Te="drop"+(le?"":"Right");Rr.prototype[Z]=function(){return this.__filtered__?new Rr(this):this[Te](1)}}),Rr.prototype.compact=function(){return this.filter(xn)},Rr.prototype.find=function(Z){return this.filter(Z).head()},Rr.prototype.findLast=function(Z){return this.reverse().find(Z)},Rr.prototype.invokeMap=Cr(function(Z,le){return typeof Z=="function"?new Rr(this):this.map(function(Te){return Li(Te,Z,le)})}),Rr.prototype.reject=function(Z){return this.filter(Aa(pr(Z)))},Rr.prototype.slice=function(Z,le){Z=Sr(Z);var Te=this;return Te.__filtered__&&(Z>0||le<0)?new Rr(Te):(Z<0?Te=Te.takeRight(-Z):Z&&(Te=Te.drop(Z)),le!==x&&(le=Sr(le),Te=le<0?Te.dropRight(-le):Te.take(le-Z)),Te)},Rr.prototype.takeRightWhile=function(Z){return this.reverse().takeWhile(Z).reverse()},Rr.prototype.toArray=function(){return this.take(G)},Vn(Rr.prototype,function(Z,le){var Te=/^(?:filter|find|map|reject)|While$/.test(le),je=/^(?:head|last)$/.test(le),Je=tt[je?"take"+(le=="last"?"Right":""):le],it=je||/^find/.test(le);Je&&(tt.prototype[le]=function(){var ft=this.__wrapped__,pt=je?[1]:arguments,_t=ft instanceof Rr,Ht=pt[0],zt=_t||wr(ft),Jt=function(Ar){var Pr=Je.apply(tt,Qn([Ar],pt));return je&&Qt?Pr[0]:Pr};zt&&Te&&typeof Ht=="function"&&Ht.length!=1&&(_t=zt=!1);var Qt=this.__chain__,lr=!!this.__actions__.length,gr=it&&!Qt,$r=_t&&!lr;if(!it&&zt){ft=$r?ft:new Rr(this);var vr=Z.apply(ft,pt);return vr.__actions__.push({func:Sa,args:[Jt],thisArg:x}),new In(vr,Qt)}return gr&&$r?Z.apply(this,pt):(vr=this.thru(Jt),gr?je?vr.value()[0]:vr.value():vr)})}),kn(["pop","push","shift","sort","splice","unshift"],function(Z){var le=Yi[Z],Te=/^(?:push|sort|unshift)$/.test(Z)?"tap":"thru",je=/^(?:pop|shift)$/.test(Z);tt.prototype[Z]=function(){var Je=arguments;if(je&&!this.__chain__){var it=this.value();return le.apply(wr(it)?it:[],Je)}return this[Te](function(ft){return le.apply(wr(ft)?ft:[],Je)})}}),Vn(Rr.prototype,function(Z,le){var Te=tt[le];if(Te){var je=Te.name+"";Fr.call(Ei,je)||(Ei[je]=[]),Ei[je].push({name:le,func:Te})}}),Ei[va(x,H).name]=[{name:"wrapper",func:x}],Rr.prototype.clone=$f,Rr.prototype.reverse=Cf,Rr.prototype.value=Tf,tt.prototype.at=ih,tt.prototype.chain=ah,tt.prototype.commit=oh,tt.prototype.next=ch,tt.prototype.plant=fh,tt.prototype.reverse=uh,tt.prototype.toJSON=tt.prototype.valueOf=tt.prototype.value=hh,tt.prototype.first=tt.prototype.head,Ri&&(tt.prototype[Ri]=lh),tt},_i=nf();ci?((ci.exports=_i)._=_i,Ma._=_i):sn._=_i}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const __="",__="",___="_",___="_",___="_",__="",_="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",__="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",___="/orbitdb/zdpuAtmGaeNicerk2ByPa4oQMtSPgdNovQp6ZC6c2fJqF64Sb/6462ccb9-25ca-44e5-b81a-ea6d5df09709",___="/orbitdb/zdpuAyBg5f4Lxabv7YHVrxpNbBQW6dzxwH6wfQVMKZjECnkry/f536d48e-e040-48bf-9efb-539321804f4f",__="/orbitdb/zdpuAnEhqhCW51yfohfHWzjLgDPyuY2ySVmTBW7upAidVbwnX/954f02c8-e2ea-433b-89e2-6e670fd8873b",___="/orbitdb/zdpuAoNDXakfzK2DxJAozuR2V9TYha5bvzjQHN5VnAm4jvL6S/736889ad-a29b-4e6f-94fa-a78f8e92978d",___="/orbitdb/zdpuAsViPqnpRhUwN6kL7cSyLFaxSEkK233cJAChJMtc2vwLT/fe6ab45c-dd39-4ca9-a695-f151d922704f",__={motsClefs:[___,___],licence:"ODbl-1_0",tableaux:[{clef:__,cols:[{idVariable:__,idColonne:__},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:__,idColonne:__},{idVariable:__,idColonne:__}]}]},___=n=>({:n.donnes[__],:n.donnes[__]?new Date(n.donnes[__]):void 0,:n.donnes[__],:n.donnes[__],_:n.donnes[___],_:n.donnes[___],_:n.donnes[___],:n.empreinte}),___=n=>({:n.,:n.,:{:n.[__],:n.[__]?new Date(n.[__]):void 0,:n.[__],_:n.[___],_:n.[___],_:n.[___]}}),__=n=>{const _=new Set(n.map(E=>E.)),x={};for(const E of _){x[E]||(x[E]={});const S=n.filter(C=>C.===E);for(const C of S)x[E][C._]=C.}return x},_=(...n)=>{const _={};for(const x of n)for(const E of Object.keys(x)){_[E]||(_[E]={});for(const[S,C]of Object.entries(x[E]))_[E][S]=C}return _},__=n=>{const _={};for(const x in n){const E=x.split(".");for(const S of Object.keys(n[x])){_[S]||(_[S]={});let C=_[S];for(const[T,A]of E.entries())T===E.length-1?C[A]=n[x][S]:((C[A]===void 0||typeof C[A]=="string")&&(C[A]={}),C=C[A])}}return _},__=n=>{const _={};function*x({:E,:S}){S=S||[];for(const[C,T]of Object.entries(E)){const A=[...S,C];if(typeof T=="string")yield{:A.join("."),:T};else for(const{:B,:I}of x({:T,:A}))yield{:B,:I}}}for(const E of Object.keys(n))for(const{:S,:C}of x({:n[E]}))_[S]||(_[S]={}),_[S][E]=C;return _};class  extends {constructor({:x,_:E,_:S,:C}){super({:x,_:C?._||__,_:C?._||_,:C?.__||__});$t(this,"_");$t(this,"_");this._=E,this._=S}static async ({:x}){return await .({:x,:__,_:__})}async _({:x}){const E={:Object.keys(this._),:[]};return await this._({:async C=>(E.=Object.keys(C),await x([...new Set(Object.values(E).flat())]))})}async _({:x=!0,:E}){const S={:Object.values(this._).map(B=>Object.keys(B)).flat()},C=async()=>{await E([...new Set(Object.values(S).flat())])};C();const A=[await this.__({:async B=>{S.=B.map(I=>I.donnes[___]),await C()}})];return x&&A.push((await this._({:async B=>{S.=B.map(I=>I.[___]),await C()}})).fOublier),async()=>{await Promise.all(A.map(B=>B()))}}async __({:x}){const E={:[]},S=async()=>{const C=_(__(E..map(T=>___(T))),this._);await x(C)};return await S(),await this.__({:async C=>{E.=C,await S()}})}async _({:x,:E}){await x(this._);const S={},C=await this..obtIdCompte(),T=async()=>{let I=[];(S.||[]).forEach(D=>{const L=I.find(V=>V..===D..);L?(D.===C&&L.!==C||(D..||0)>(L..||0))&&(I=[D,...I.filter(V=>V.!==L.)]):I.push(D)});const M=__(I.map(D=>D.)),O=_(this._,S.||{},M);return await x(O)},B=[await this.__({:async I=>{const M=__(I.map(___)),O=_(this._,M);S.=O}})];return E===""?B.push(await this.___({:async I=>{S.=I,await T()}})):E===""&&B.push((await this.__({:async I=>{S.=I,await T()}})).fOublier),async()=>{await Promise.all(B.map(I=>I()))}}async __({:x,:E,:S}){return await this._({:async C=>await S(C.filter(T=>(!x||T.[__]===x)&&(!E||T.[___]===E)).map(___))})}async ___({:x}){return await this.__({:E=>x(E.map(S=>___(S)))})}async _({:x,:E,:S}){const C={},T=async()=>{if(C.)if(E===""){const M=C..length,O=C..filter(L=>C.?.[L]?.[x]),D=C.?.filter(L=>L.._===x&&!O.includes(L..))||[];return await S({:M,:O.length,:D.length})}else{if(!C.||!C.)return;const M=Object.fromEntries(C..map(V=>[V,C.?.[V]?.[this._]?.length||(C.?.[V]?Object.values(C.?.[V])[0]?.length:0)])),O=Object.values(M).reduce((V,U)=>V+U,0),D=Object.entries(C.).filter(V=>V[1][x]).map(([V,U])=>M[V]).reduce((V,U)=>V+U,0),L=C.?.map(V=>M[V..]||0).reduce((V,U)=>V+U,0)||0;return await S({:O,:D,:L})}},A=await Promise.all([this._({:async M=>{C.=M,await T()}}),this._({:async M=>{C.=M,await T()}})]),B=(await this.__({:x,:async M=>{C.=M,await T()}})).fOublier;return async()=>{await Promise.all(A.map(M=>M())),await B}}async _({:x,:E,_:S,_:C,_:T}){const A={[__]:x,[__]:E,[___]:S,[___]:C,[___]:T};await this.({:A})}async ({:x,:E,:S,:C}){const T={},A=async()=>{const M=T.?.[x]?.[E];if(M)return await S(M);{const O=await this..obtIdCompte(),D=(T.||[]).filter(V=>V..===x&&V.._===E),L=D.find(V=>V.===O);return await S((L||D[0])?.?.)}},I=[await this._({:async M=>{T.=M,await A()}})];return C===""?I.push(await this.___({:async M=>{T.=M,await A()}})):C===""&&I.push((await this.__({:async M=>{T.=M,await A()}})).fOublier),async()=>{await Promise.all(I.map(M=>M()))}}}/*!
  * shared v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(n,_=!1)=>_?Symbol.for(n):Symbol(n),generateFormatCacheKey=(n,_,x)=>friendlyJSONstringify({l:n,k:_,s:x}),friendlyJSONstringify=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$3=n=>typeof n=="number"&&isFinite(n),isDate$3=n=>toTypeString$1(n)==="[object Date]",isRegExp$2=n=>toTypeString$1(n)==="[object RegExp]",isEmptyObject=n=>isPlainObject$2(n)&&Object.keys(n).length===0;function warn(n,_){typeof console<"u"&&(console.warn("[intlify] "+n),_&&console.warn(_.stack))}const assign$4=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$3=Object.prototype.hasOwnProperty;function hasOwn$2(n,_){return hasOwnProperty$3.call(n,_)}const isArray$7=Array.isArray,isFunction$3=n=>typeof n=="function",isString$5=n=>typeof n=="string",isBoolean$4=n=>typeof n=="boolean",isObject$4=n=>n!==null&&typeof n=="object",objectToString$1=Object.prototype.toString,toTypeString$1=n=>objectToString$1.call(n),isPlainObject$2=n=>toTypeString$1(n)==="[object Object]",toDisplayString=n=>n==null?"":isArray$7(n)||isPlainObject$2(n)&&n.toString===objectToString$1?JSON.stringify(n,null,2):String(n);/*!
  * message-compiler v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(n,_,x={}){const{domain:E,messages:S,args:C}=x,T=n,A=new SyntaxError(String(T));return A.code=n,_&&(A.location=_),A.domain=E,A}function defaultOnError(n){throw n}function createPosition(n,_,x){return{line:n,column:_,offset:x}}function createLocation(n,_,x){const E={start:n,end:_};return x!=null&&(E.source=x),E}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(n){const _=n;let x=0,E=1,S=1,C=0;const T=Y=>_[Y]===CHAR_CR&&_[Y+1]===CHAR_LF,A=Y=>_[Y]===CHAR_LF,B=Y=>_[Y]===CHAR_PS,I=Y=>_[Y]===CHAR_LS,M=Y=>T(Y)||A(Y)||B(Y)||I(Y),O=()=>x,D=()=>E,L=()=>S,V=()=>C,U=Y=>T(Y)||B(Y)||I(Y)?CHAR_LF:_[Y],q=()=>U(x),H=()=>U(x+C);function W(){return C=0,M(x)&&(E++,S=0),T(x)&&x++,x++,S++,_[x]}function Q(){return T(x+C)&&C++,C++,_[x+C]}function re(){x=0,E=1,S=1,C=0}function ce(Y=0){C=Y}function ne(){const Y=x+C;for(;Y!==x;)W();C=0}return{index:O,line:D,column:L,peekOffset:V,charAt:U,currentChar:q,currentPeek:H,next:W,peek:Q,reset:re,resetPeek:ce,skipToPeek:ne}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(n,_={}){const x=_.location!==!1,E=createScanner(n),S=()=>E.index(),C=()=>createPosition(E.line(),E.column(),E.index()),T=C(),A=S(),B={currentType:14,offset:A,startLoc:T,endLoc:T,lastType:14,lastOffset:A,lastStartLoc:T,lastEndLoc:T,braceNest:0,inLinked:!1,text:""},I=()=>B,{onError:M}=_;function O(Be,me,Ie,...Ve){const Me=I();if(me.column+=Ie,me.offset+=Ie,M){const Ne=createLocation(Me.startLoc,me),Pe=createCompileError(Be,Ne,{domain:ERROR_DOMAIN$1,args:Ve});M(Pe)}}function D(Be,me,Ie){Be.endLoc=C(),Be.currentType=me;const Ve={type:me};return x&&(Ve.loc=createLocation(Be.startLoc,Be.endLoc)),Ie!=null&&(Ve.value=Ie),Ve}const L=Be=>D(Be,14);function V(Be,me){return Be.currentChar()===me?(Be.next(),me):(O(CompileErrorCodes.EXPECTED_TOKEN,C(),0,me),"")}function U(Be){let me="";for(;Be.currentPeek()===CHAR_SP||Be.currentPeek()===CHAR_LF;)me+=Be.currentPeek(),Be.peek();return me}function q(Be){const me=U(Be);return Be.skipToPeek(),me}function H(Be){if(Be===EOF)return!1;const me=Be.charCodeAt(0);return me>=97&&me<=122||me>=65&&me<=90||me===95}function W(Be){if(Be===EOF)return!1;const me=Be.charCodeAt(0);return me>=48&&me<=57}function Q(Be,me){const{currentType:Ie}=me;if(Ie!==2)return!1;U(Be);const Ve=H(Be.currentPeek());return Be.resetPeek(),Ve}function re(Be,me){const{currentType:Ie}=me;if(Ie!==2)return!1;U(Be);const Ve=Be.currentPeek()==="-"?Be.peek():Be.currentPeek(),Me=W(Ve);return Be.resetPeek(),Me}function ce(Be,me){const{currentType:Ie}=me;if(Ie!==2)return!1;U(Be);const Ve=Be.currentPeek()===LITERAL_DELIMITER;return Be.resetPeek(),Ve}function ne(Be,me){const{currentType:Ie}=me;if(Ie!==8)return!1;U(Be);const Ve=Be.currentPeek()===".";return Be.resetPeek(),Ve}function Y(Be,me){const{currentType:Ie}=me;if(Ie!==9)return!1;U(Be);const Ve=H(Be.currentPeek());return Be.resetPeek(),Ve}function fe(Be,me){const{currentType:Ie}=me;if(!(Ie===8||Ie===12))return!1;U(Be);const Ve=Be.currentPeek()===":";return Be.resetPeek(),Ve}function ge(Be,me){const{currentType:Ie}=me;if(Ie!==10)return!1;const Ve=()=>{const Ne=Be.currentPeek();return Ne==="{"?H(Be.peek()):Ne==="@"||Ne==="%"||Ne==="|"||Ne===":"||Ne==="."||Ne===CHAR_SP||!Ne?!1:Ne===CHAR_LF?(Be.peek(),Ve()):H(Ne)},Me=Ve();return Be.resetPeek(),Me}function $e(Be){U(Be);const me=Be.currentPeek()==="|";return Be.resetPeek(),me}function _e(Be){const me=U(Be),Ie=Be.currentPeek()==="%"&&Be.peek()==="{";return Be.resetPeek(),{isModulo:Ie,hasSpace:me.length>0}}function ae(Be,me=!0){const Ie=(Me=!1,Ne="",Pe=!1)=>{const He=Be.currentPeek();return He==="{"?Ne==="%"?!1:Me:He==="@"||!He?Ne==="%"?!0:Me:He==="%"?(Be.peek(),Ie(Me,"%",!0)):He==="|"?Ne==="%"||Pe?!0:!(Ne===CHAR_SP||Ne===CHAR_LF):He===CHAR_SP?(Be.peek(),Ie(!0,CHAR_SP,Pe)):He===CHAR_LF?(Be.peek(),Ie(!0,CHAR_LF,Pe)):!0},Ve=Ie();return me&&Be.resetPeek(),Ve}function X(Be,me){const Ie=Be.currentChar();return Ie===EOF?EOF:me(Ie)?(Be.next(),Ie):null}function F(Be){return X(Be,Ie=>{const Ve=Ie.charCodeAt(0);return Ve>=97&&Ve<=122||Ve>=65&&Ve<=90||Ve>=48&&Ve<=57||Ve===95||Ve===36})}function z(Be){return X(Be,Ie=>{const Ve=Ie.charCodeAt(0);return Ve>=48&&Ve<=57})}function J(Be){return X(Be,Ie=>{const Ve=Ie.charCodeAt(0);return Ve>=48&&Ve<=57||Ve>=65&&Ve<=70||Ve>=97&&Ve<=102})}function te(Be){let me="",Ie="";for(;me=z(Be);)Ie+=me;return Ie}function se(Be){q(Be);const me=Be.currentChar();return me!=="%"&&O(CompileErrorCodes.EXPECTED_TOKEN,C(),0,me),Be.next(),"%"}function oe(Be){let me="";for(;;){const Ie=Be.currentChar();if(Ie==="{"||Ie==="}"||Ie==="@"||Ie==="|"||!Ie)break;if(Ie==="%")if(ae(Be))me+=Ie,Be.next();else break;else if(Ie===CHAR_SP||Ie===CHAR_LF)if(ae(Be))me+=Ie,Be.next();else{if($e(Be))break;me+=Ie,Be.next()}else me+=Ie,Be.next()}return me}function ie(Be){q(Be);let me="",Ie="";for(;me=F(Be);)Ie+=me;return Be.currentChar()===EOF&&O(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,C(),0),Ie}function G(Be){q(Be);let me="";return Be.currentChar()==="-"?(Be.next(),me+=`-${te(Be)}`):me+=te(Be),Be.currentChar()===EOF&&O(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,C(),0),me}function j(Be){q(Be),V(Be,"'");let me="",Ie="";const Ve=Ne=>Ne!==LITERAL_DELIMITER&&Ne!==CHAR_LF;for(;me=X(Be,Ve);)me==="\\"?Ie+=ee(Be):Ie+=me;const Me=Be.currentChar();return Me===CHAR_LF||Me===EOF?(O(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,C(),0),Me===CHAR_LF&&(Be.next(),V(Be,"'")),Ie):(V(Be,"'"),Ie)}function ee(Be){const me=Be.currentChar();switch(me){case"\\":case"'":return Be.next(),`\\${me}`;case"u":return pe(Be,me,4);case"U":return pe(Be,me,6);default:return O(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,C(),0,me),""}}function pe(Be,me,Ie){V(Be,me);let Ve="";for(let Me=0;Me<Ie;Me++){const Ne=J(Be);if(!Ne){O(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,C(),0,`\\${me}${Ve}${Be.currentChar()}`);break}Ve+=Ne}return`\\${me}${Ve}`}function he(Be){q(Be);let me="",Ie="";const Ve=Me=>Me!=="{"&&Me!=="}"&&Me!==CHAR_SP&&Me!==CHAR_LF;for(;me=X(Be,Ve);)Ie+=me;return Ie}function Se(Be){let me="",Ie="";for(;me=F(Be);)Ie+=me;return Ie}function we(Be){const me=(Ie=!1,Ve)=>{const Me=Be.currentChar();return Me==="{"||Me==="%"||Me==="@"||Me==="|"||!Me||Me===CHAR_SP?Ve:Me===CHAR_LF?(Ve+=Me,Be.next(),me(Ie,Ve)):(Ve+=Me,Be.next(),me(!0,Ve))};return me(!1,"")}function xe(Be){q(Be);const me=V(Be,"|");return q(Be),me}function Ee(Be,me){let Ie=null;switch(Be.currentChar()){case"{":return me.braceNest>=1&&O(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,C(),0),Be.next(),Ie=D(me,2,"{"),q(Be),me.braceNest++,Ie;case"}":return me.braceNest>0&&me.currentType===2&&O(CompileErrorCodes.EMPTY_PLACEHOLDER,C(),0),Be.next(),Ie=D(me,3,"}"),me.braceNest--,me.braceNest>0&&q(Be),me.inLinked&&me.braceNest===0&&(me.inLinked=!1),Ie;case"@":return me.braceNest>0&&O(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,C(),0),Ie=ye(Be,me)||L(me),me.braceNest=0,Ie;default:let Me=!0,Ne=!0,Pe=!0;if($e(Be))return me.braceNest>0&&O(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,C(),0),Ie=D(me,1,xe(Be)),me.braceNest=0,me.inLinked=!1,Ie;if(me.braceNest>0&&(me.currentType===5||me.currentType===6||me.currentType===7))return O(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,C(),0),me.braceNest=0,Ce(Be,me);if(Me=Q(Be,me))return Ie=D(me,5,ie(Be)),q(Be),Ie;if(Ne=re(Be,me))return Ie=D(me,6,G(Be)),q(Be),Ie;if(Pe=ce(Be,me))return Ie=D(me,7,j(Be)),q(Be),Ie;if(!Me&&!Ne&&!Pe)return Ie=D(me,13,he(Be)),O(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,C(),0,Ie.value),q(Be),Ie;break}return Ie}function ye(Be,me){const{currentType:Ie}=me;let Ve=null;const Me=Be.currentChar();switch((Ie===8||Ie===9||Ie===12||Ie===10)&&(Me===CHAR_LF||Me===CHAR_SP)&&O(CompileErrorCodes.INVALID_LINKED_FORMAT,C(),0),Me){case"@":return Be.next(),Ve=D(me,8,"@"),me.inLinked=!0,Ve;case".":return q(Be),Be.next(),D(me,9,".");case":":return q(Be),Be.next(),D(me,10,":");default:return $e(Be)?(Ve=D(me,1,xe(Be)),me.braceNest=0,me.inLinked=!1,Ve):ne(Be,me)||fe(Be,me)?(q(Be),ye(Be,me)):Y(Be,me)?(q(Be),D(me,12,Se(Be))):ge(Be,me)?(q(Be),Me==="{"?Ee(Be,me)||Ve:D(me,11,we(Be))):(Ie===8&&O(CompileErrorCodes.INVALID_LINKED_FORMAT,C(),0),me.braceNest=0,me.inLinked=!1,Ce(Be,me))}}function Ce(Be,me){let Ie={type:14};if(me.braceNest>0)return Ee(Be,me)||L(me);if(me.inLinked)return ye(Be,me)||L(me);switch(Be.currentChar()){case"{":return Ee(Be,me)||L(me);case"}":return O(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,C(),0),Be.next(),D(me,3,"}");case"@":return ye(Be,me)||L(me);default:if($e(Be))return Ie=D(me,1,xe(Be)),me.braceNest=0,me.inLinked=!1,Ie;const{isModulo:Me,hasSpace:Ne}=_e(Be);if(Me)return Ne?D(me,0,oe(Be)):D(me,4,se(Be));if(ae(Be))return D(me,0,oe(Be));break}return Ie}function ve(){const{currentType:Be,offset:me,startLoc:Ie,endLoc:Ve}=B;return B.lastType=Be,B.lastOffset=me,B.lastStartLoc=Ie,B.lastEndLoc=Ve,B.offset=S(),B.startLoc=C(),E.currentChar()===EOF?D(B,14):Ce(E,B)}return{nextToken:ve,currentOffset:S,currentPosition:C,context:I}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(n,_,x){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const E=parseInt(_||x,16);return E<=55295||E>=57344?String.fromCodePoint(E):""}}}function createParser(n={}){const _=n.location!==!1,{onError:x}=n;function E(H,W,Q,re,...ce){const ne=H.currentPosition();if(ne.offset+=re,ne.column+=re,x){const Y=createLocation(Q,ne),fe=createCompileError(W,Y,{domain:ERROR_DOMAIN,args:ce});x(fe)}}function S(H,W,Q){const re={type:H,start:W,end:W};return _&&(re.loc={start:Q,end:Q}),re}function C(H,W,Q,re){H.end=W,re&&(H.type=re),_&&H.loc&&(H.loc.end=Q)}function T(H,W){const Q=H.context(),re=S(3,Q.offset,Q.startLoc);return re.value=W,C(re,H.currentOffset(),H.currentPosition()),re}function A(H,W){const Q=H.context(),{lastOffset:re,lastStartLoc:ce}=Q,ne=S(5,re,ce);return ne.index=parseInt(W,10),H.nextToken(),C(ne,H.currentOffset(),H.currentPosition()),ne}function B(H,W){const Q=H.context(),{lastOffset:re,lastStartLoc:ce}=Q,ne=S(4,re,ce);return ne.key=W,H.nextToken(),C(ne,H.currentOffset(),H.currentPosition()),ne}function I(H,W){const Q=H.context(),{lastOffset:re,lastStartLoc:ce}=Q,ne=S(9,re,ce);return ne.value=W.replace(KNOWN_ESCAPES,fromEscapeSequence),H.nextToken(),C(ne,H.currentOffset(),H.currentPosition()),ne}function M(H){const W=H.nextToken(),Q=H.context(),{lastOffset:re,lastStartLoc:ce}=Q,ne=S(8,re,ce);return W.type!==12?(E(H,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,Q.lastStartLoc,0),ne.value="",C(ne,re,ce),{nextConsumeToken:W,node:ne}):(W.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,getTokenCaption(W)),ne.value=W.value||"",C(ne,H.currentOffset(),H.currentPosition()),{node:ne})}function O(H,W){const Q=H.context(),re=S(7,Q.offset,Q.startLoc);return re.value=W,C(re,H.currentOffset(),H.currentPosition()),re}function D(H){const W=H.context(),Q=S(6,W.offset,W.startLoc);let re=H.nextToken();if(re.type===9){const ce=M(H);Q.modifier=ce.node,re=ce.nextConsumeToken||H.nextToken()}switch(re.type!==10&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(re)),re=H.nextToken(),re.type===2&&(re=H.nextToken()),re.type){case 11:re.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(re)),Q.key=O(H,re.value||"");break;case 5:re.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(re)),Q.key=B(H,re.value||"");break;case 6:re.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(re)),Q.key=A(H,re.value||"");break;case 7:re.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(re)),Q.key=I(H,re.value||"");break;default:E(H,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,W.lastStartLoc,0);const ce=H.context(),ne=S(7,ce.offset,ce.startLoc);return ne.value="",C(ne,ce.offset,ce.startLoc),Q.key=ne,C(Q,ce.offset,ce.startLoc),{nextConsumeToken:re,node:Q}}return C(Q,H.currentOffset(),H.currentPosition()),{node:Q}}function L(H){const W=H.context(),Q=W.currentType===1?H.currentOffset():W.offset,re=W.currentType===1?W.endLoc:W.startLoc,ce=S(2,Q,re);ce.items=[];let ne=null;do{const ge=ne||H.nextToken();switch(ne=null,ge.type){case 0:ge.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(ge)),ce.items.push(T(H,ge.value||""));break;case 6:ge.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(ge)),ce.items.push(A(H,ge.value||""));break;case 5:ge.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(ge)),ce.items.push(B(H,ge.value||""));break;case 7:ge.value==null&&E(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,W.lastStartLoc,0,getTokenCaption(ge)),ce.items.push(I(H,ge.value||""));break;case 8:const $e=D(H);ce.items.push($e.node),ne=$e.nextConsumeToken||null;break}}while(W.currentType!==14&&W.currentType!==1);const Y=W.currentType===1?W.lastOffset:H.currentOffset(),fe=W.currentType===1?W.lastEndLoc:H.currentPosition();return C(ce,Y,fe),ce}function V(H,W,Q,re){const ce=H.context();let ne=re.items.length===0;const Y=S(1,W,Q);Y.cases=[],Y.cases.push(re);do{const fe=L(H);ne||(ne=fe.items.length===0),Y.cases.push(fe)}while(ce.currentType!==14);return ne&&E(H,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,Q,0),C(Y,H.currentOffset(),H.currentPosition()),Y}function U(H){const W=H.context(),{offset:Q,startLoc:re}=W,ce=L(H);return W.currentType===14?ce:V(H,Q,re,ce)}function q(H){const W=createTokenizer(H,assign$4({},n)),Q=W.context(),re=S(0,Q.offset,Q.startLoc);return _&&re.loc&&(re.loc.source=H),re.body=U(W),Q.currentType!==14&&E(W,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Q.lastStartLoc,0,H[Q.offset]||""),C(re,W.currentOffset(),W.currentPosition()),re}return{parse:q}}function getTokenCaption(n){if(n.type===14)return"EOF";const _=(n.value||"").replace(/\r?\n/gu,"\\n");return _.length>10?_.slice(0,9)+"":_}function createTransformer(n,_={}){const x={ast:n,helpers:new Set};return{context:()=>x,helper:C=>(x.helpers.add(C),C)}}function traverseNodes(n,_){for(let x=0;x<n.length;x++)traverseNode(n[x],_)}function traverseNode(n,_){switch(n.type){case 1:traverseNodes(n.cases,_),_.helper("plural");break;case 2:traverseNodes(n.items,_);break;case 6:traverseNode(n.key,_),_.helper("linked"),_.helper("type");break;case 5:_.helper("interpolate"),_.helper("list");break;case 4:_.helper("interpolate"),_.helper("named");break}}function transform$1(n,_={}){const x=createTransformer(n);x.helper("normalize"),n.body&&traverseNode(n.body,x);const E=x.context();n.helpers=Array.from(E.helpers)}function createCodeGenerator(n,_){const{sourceMap:x,filename:E,breakLineCode:S,needIndent:C}=_,T={source:n.loc.source,filename:E,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:S,needIndent:C,indentLevel:0},A=()=>T;function B(U,q){T.code+=U}function I(U,q=!0){const H=q?S:"";B(C?H+"  ".repeat(U):H)}function M(U=!0){const q=++T.indentLevel;U&&I(q)}function O(U=!0){const q=--T.indentLevel;U&&I(q)}function D(){I(T.indentLevel)}return{context:A,push:B,indent:M,deindent:O,newline:D,helper:U=>`_${U}`,needIndent:()=>T.needIndent}}function generateLinkedNode(n,_){const{helper:x}=n;n.push(`${x("linked")}(`),generateNode(n,_.key),_.modifier?(n.push(", "),generateNode(n,_.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function generateMessageNode(n,_){const{helper:x,needIndent:E}=n;n.push(`${x("normalize")}([`),n.indent(E());const S=_.items.length;for(let C=0;C<S&&(generateNode(n,_.items[C]),C!==S-1);C++)n.push(", ");n.deindent(E()),n.push("])")}function generatePluralNode(n,_){const{helper:x,needIndent:E}=n;if(_.cases.length>1){n.push(`${x("plural")}([`),n.indent(E());const S=_.cases.length;for(let C=0;C<S&&(generateNode(n,_.cases[C]),C!==S-1);C++)n.push(", ");n.deindent(E()),n.push("])")}}function generateResource(n,_){_.body?generateNode(n,_.body):n.push("null")}function generateNode(n,_){const{helper:x}=n;switch(_.type){case 0:generateResource(n,_);break;case 1:generatePluralNode(n,_);break;case 2:generateMessageNode(n,_);break;case 6:generateLinkedNode(n,_);break;case 8:n.push(JSON.stringify(_.value),_);break;case 7:n.push(JSON.stringify(_.value),_);break;case 5:n.push(`${x("interpolate")}(${x("list")}(${_.index}))`,_);break;case 4:n.push(`${x("interpolate")}(${x("named")}(${JSON.stringify(_.key)}))`,_);break;case 9:n.push(JSON.stringify(_.value),_);break;case 3:n.push(JSON.stringify(_.value),_);break}}const generate=(n,_={})=>{const x=isString$5(_.mode)?_.mode:"normal",E=isString$5(_.filename)?_.filename:"message.intl",S=!!_.sourceMap,C=_.breakLineCode!=null?_.breakLineCode:x==="arrow"?";":`
`,T=_.needIndent?_.needIndent:x!=="arrow",A=n.helpers||[],B=createCodeGenerator(n,{mode:x,filename:E,sourceMap:S,breakLineCode:C,needIndent:T});B.push(x==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),B.indent(T),A.length>0&&(B.push(`const { ${A.map(O=>`${O}: _${O}`).join(", ")} } = ctx`),B.newline()),B.push("return "),generateNode(B,n),B.deindent(T),B.push("}");const{code:I,map:M}=B.context();return{ast:n,code:I,map:M?M.toJSON():void 0}};function baseCompile(n,_={}){const x=assign$4({},_),S=createParser(x).parse(n);return transform$1(S,x),generate(S,x)}/*!
  * devtools-if v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(n){return literalValueRE.test(n)}function stripQuotes(n){const _=n.charCodeAt(0),x=n.charCodeAt(n.length-1);return _===x&&(_===34||_===39)?n.slice(1,-1):n}function getPathCharType(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(n){const _=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:isLiteral(_)?stripQuotes(_):"*"+_}function parse$2(n){const _=[];let x=-1,E=0,S=0,C,T,A,B,I,M,O;const D=[];D[0]=()=>{T===void 0?T=A:T+=A},D[1]=()=>{T!==void 0&&(_.push(T),T=void 0)},D[2]=()=>{D[0](),S++},D[3]=()=>{if(S>0)S--,E=4,D[0]();else{if(S=0,T===void 0||(T=formatSubPath(T),T===!1))return!1;D[1]()}};function L(){const V=n[x+1];if(E===5&&V==="'"||E===6&&V==='"')return x++,A="\\"+V,D[0](),!0}for(;E!==null;)if(x++,C=n[x],!(C==="\\"&&L())){if(B=getPathCharType(C),O=pathStateMachine[E],I=O[B]||O.l||8,I===8||(E=I[0],I[1]!==void 0&&(M=D[I[1]],M&&(A=C,M()===!1))))return;if(E===7)return _}}const cache$5=new Map;function resolveWithKeyValue(n,_){return isObject$4(n)?n[_]:null}function resolveValue(n,_){if(!isObject$4(n))return null;let x=cache$5.get(_);if(x||(x=parse$2(_),x&&cache$5.set(_,x)),!x)return null;const E=x.length;let S=n,C=0;for(;C<E;){const T=S[x[C]];if(T===void 0)return null;S=T,C++}return S}const DEFAULT_MODIFIER=n=>n,DEFAULT_MESSAGE=n=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=n=>n.length===0?"":n.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(n,_){return n=Math.abs(n),_===2?n?n>1?1:0:1:n?Math.min(n,2):0}function getPluralIndex(n){const _=isNumber$3(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(isNumber$3(n.named.count)||isNumber$3(n.named.n))?isNumber$3(n.named.count)?n.named.count:isNumber$3(n.named.n)?n.named.n:_:_}function normalizeNamed(n,_){_.count||(_.count=n),_.n||(_.n=n)}function createMessageContext(n={}){const _=n.locale,x=getPluralIndex(n),E=isObject$4(n.pluralRules)&&isString$5(_)&&isFunction$3(n.pluralRules[_])?n.pluralRules[_]:pluralDefault,S=isObject$4(n.pluralRules)&&isString$5(_)&&isFunction$3(n.pluralRules[_])?pluralDefault:void 0,C=H=>H[E(x,H.length,S)],T=n.list||[],A=H=>T[H],B=n.named||{};isNumber$3(n.pluralIndex)&&normalizeNamed(x,B);const I=H=>B[H];function M(H){const W=isFunction$3(n.messages)?n.messages(H):isObject$4(n.messages)?n.messages[H]:!1;return W||(n.parent?n.parent.message(H):DEFAULT_MESSAGE)}const O=H=>n.modifiers?n.modifiers[H]:DEFAULT_MODIFIER,D=isPlainObject$2(n.processor)&&isFunction$3(n.processor.normalize)?n.processor.normalize:DEFAULT_NORMALIZE,L=isPlainObject$2(n.processor)&&isFunction$3(n.processor.interpolate)?n.processor.interpolate:DEFAULT_INTERPOLATE,V=isPlainObject$2(n.processor)&&isString$5(n.processor.type)?n.processor.type:DEFAULT_MESSAGE_DATA_TYPE,q={list:A,named:I,plural:C,linked:(H,...W)=>{const[Q,re]=W;let ce="text",ne="";W.length===1?isObject$4(Q)?(ne=Q.modifier||ne,ce=Q.type||ce):isString$5(Q)&&(ne=Q||ne):W.length===2&&(isString$5(Q)&&(ne=Q||ne),isString$5(re)&&(ce=re||ce));let Y=M(H)(q);return ce==="vnode"&&isArray$7(Y)&&ne&&(Y=Y[0]),ne?O(ne)(Y,ce):Y},message:M,type:V,interpolate:L,normalize:D};return q}let devtools=null;function setDevToolsHook(n){devtools=n}function initI18nDevTools(n,_,x){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:n,version:_,meta:x})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(n){return _=>devtools&&devtools.emit(n,_)}function fallbackWithSimple(n,_,x){return[...new Set([x,...isArray$7(_)?_:isObject$4(_)?Object.keys(_):isString$5(_)?[_]:[x]])]}function fallbackWithLocaleChain(n,_,x){const E=isString$5(x)?x:DEFAULT_LOCALE,S=n;S.__localeChainCache||(S.__localeChainCache=new Map);let C=S.__localeChainCache.get(E);if(!C){C=[];let T=[x];for(;isArray$7(T);)T=appendBlockToChain(C,T,_);const A=isArray$7(_)||!isPlainObject$2(_)?_:_.default?_.default:null;T=isString$5(A)?[A]:A,isArray$7(T)&&appendBlockToChain(C,T,!1),S.__localeChainCache.set(E,C)}return C}function appendBlockToChain(n,_,x){let E=!0;for(let S=0;S<_.length&&isBoolean$4(E);S++){const C=_[S];isString$5(C)&&(E=appendLocaleToChain(n,_[S],x))}return E}function appendLocaleToChain(n,_,x){let E;const S=_.split("-");do{const C=S.join("-");E=appendItemToChain(n,C,x),S.splice(-1,1)}while(S.length&&E===!0);return E}function appendItemToChain(n,_,x){let E=!1;if(!n.includes(_)&&(E=!0,_)){E=_[_.length-1]!=="!";const S=_.replace(/!/g,"");n.push(S),(isArray$7(x)||isPlainObject$2(x))&&x[S]&&(E=x[S])}return E}const VERSION$2="9.3.0-beta.16",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(n,_)=>_==="text"&&isString$5(n)?n.toUpperCase():_==="vnode"&&isObject$4(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,_)=>_==="text"&&isString$5(n)?n.toLowerCase():_==="vnode"&&isObject$4(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,_)=>_==="text"&&isString$5(n)?capitalize(n):_==="vnode"&&isObject$4(n)&&"__v_isVNode"in n?capitalize(n.children):n}}let _compiler;function registerMessageCompiler(n){_compiler=n}let _resolver;function registerMessageResolver(n){_resolver=n}let _fallbacker;function registerLocaleFallbacker(n){_fallbacker=n}let _additionalMeta=null;const setAdditionalMeta=n=>{_additionalMeta=n},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=n=>{_fallbackContext=n},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(n={}){const _=isString$5(n.version)?n.version:VERSION$2,x=isString$5(n.locale)?n.locale:DEFAULT_LOCALE,E=isArray$7(n.fallbackLocale)||isPlainObject$2(n.fallbackLocale)||isString$5(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:x,S=isPlainObject$2(n.messages)?n.messages:{[x]:{}},C=isPlainObject$2(n.datetimeFormats)?n.datetimeFormats:{[x]:{}},T=isPlainObject$2(n.numberFormats)?n.numberFormats:{[x]:{}},A=assign$4({},n.modifiers||{},getDefaultLinkedModifiers()),B=n.pluralRules||{},I=isFunction$3(n.missing)?n.missing:null,M=isBoolean$4(n.missingWarn)||isRegExp$2(n.missingWarn)?n.missingWarn:!0,O=isBoolean$4(n.fallbackWarn)||isRegExp$2(n.fallbackWarn)?n.fallbackWarn:!0,D=!!n.fallbackFormat,L=!!n.unresolving,V=isFunction$3(n.postTranslation)?n.postTranslation:null,U=isPlainObject$2(n.processor)?n.processor:null,q=isBoolean$4(n.warnHtmlMessage)?n.warnHtmlMessage:!0,H=!!n.escapeParameter,W=isFunction$3(n.messageCompiler)?n.messageCompiler:_compiler,Q=isFunction$3(n.messageResolver)?n.messageResolver:_resolver||resolveWithKeyValue,re=isFunction$3(n.localeFallbacker)?n.localeFallbacker:_fallbacker||fallbackWithSimple,ce=isObject$4(n.fallbackContext)?n.fallbackContext:void 0,ne=isFunction$3(n.onWarn)?n.onWarn:warn,Y=n,fe=isObject$4(Y.__datetimeFormatters)?Y.__datetimeFormatters:new Map,ge=isObject$4(Y.__numberFormatters)?Y.__numberFormatters:new Map,$e=isObject$4(Y.__meta)?Y.__meta:{};_cid++;const _e={version:_,cid:_cid,locale:x,fallbackLocale:E,messages:S,modifiers:A,pluralRules:B,missing:I,missingWarn:M,fallbackWarn:O,fallbackFormat:D,unresolving:L,postTranslation:V,processor:U,warnHtmlMessage:q,escapeParameter:H,messageCompiler:W,messageResolver:Q,localeFallbacker:re,fallbackContext:ce,onWarn:ne,__meta:$e};return _e.datetimeFormats=C,_e.numberFormats=T,_e.__datetimeFormatters=fe,_e.__numberFormatters=ge,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(_e,_,$e),_e}function handleMissing(n,_,x,E,S){const{missing:C,onWarn:T}=n;if(C!==null){const A=C(n,x,_,S);return isString$5(A)?A:_}else return _}function updateFallbackLocale(n,_,x){const E=n;E.__localeChainCache=new Map,n.localeFallbacker(n,x,_)}const defaultOnCacheKey=n=>n;let compileCache=Object.create(null);function compileToFunction(n,_={}){{const E=(_.onCacheKey||defaultOnCacheKey)(n),S=compileCache[E];if(S)return S;let C=!1;const T=_.onError||defaultOnError;_.onError=I=>{C=!0,T(I)};const{code:A}=baseCompile(n,_),B=new Function(`return ${A}`)();return C?B:compileCache[E]=B}}let code$9=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$9,CoreErrorCodes={INVALID_ARGUMENT:code$9,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(n){return createCompileError(n,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=n=>isFunction$3(n);function translate(n,..._){const{fallbackFormat:x,postTranslation:E,unresolving:S,messageCompiler:C,fallbackLocale:T,messages:A}=n,[B,I]=parseTranslateArgs(..._),M=isBoolean$4(I.missingWarn)?I.missingWarn:n.missingWarn,O=isBoolean$4(I.fallbackWarn)?I.fallbackWarn:n.fallbackWarn,D=isBoolean$4(I.escapeParameter)?I.escapeParameter:n.escapeParameter,L=!!I.resolvedMessage,V=isString$5(I.default)||isBoolean$4(I.default)?isBoolean$4(I.default)?C?B:()=>B:I.default:x?C?B:()=>B:"",U=x||V!=="",q=isString$5(I.locale)?I.locale:n.locale;D&&escapeParams(I);let[H,W,Q]=L?[B,q,A[q]||{}]:resolveMessageFormat(n,B,q,T,O,M),re=H,ce=B;if(!L&&!(isString$5(re)||isMessageFunction(re))&&U&&(re=V,ce=re),!L&&(!(isString$5(re)||isMessageFunction(re))||!isString$5(W)))return S?NOT_REOSLVED:B;let ne=!1;const Y=()=>{ne=!0},fe=isMessageFunction(re)?re:compileMessageFormat(n,B,W,re,ce,Y);if(ne)return re;const ge=getMessageContextOptions(n,W,Q,I),$e=createMessageContext(ge),_e=evaluateMessage(n,fe,$e),ae=E?E(_e,B):_e;if(__INTLIFY_PROD_DEVTOOLS__){const X={timestamp:Date.now(),key:isString$5(B)?B:isMessageFunction(re)?re.key:"",locale:W||(isMessageFunction(re)?re.locale:""),format:isString$5(re)?re:isMessageFunction(re)?re.source:"",message:ae};X.meta=assign$4({},n.__meta,getAdditionalMeta()||{}),translateDevTools(X)}return ae}function escapeParams(n){isArray$7(n.list)?n.list=n.list.map(_=>isString$5(_)?escapeHtml(_):_):isObject$4(n.named)&&Object.keys(n.named).forEach(_=>{isString$5(n.named[_])&&(n.named[_]=escapeHtml(n.named[_]))})}function resolveMessageFormat(n,_,x,E,S,C){const{messages:T,onWarn:A,messageResolver:B,localeFallbacker:I}=n,M=I(n,E,x);let O={},D,L=null;const V="translate";for(let U=0;U<M.length&&(D=M[U],O=T[D]||{},(L=B(O,_))===null&&(L=O[_]),!(isString$5(L)||isFunction$3(L)));U++){const q=handleMissing(n,_,D,C,V);q!==_&&(L=q)}return[L,D,O]}function compileMessageFormat(n,_,x,E,S,C){const{messageCompiler:T,warnHtmlMessage:A}=n;if(isMessageFunction(E)){const I=E;return I.locale=I.locale||x,I.key=I.key||_,I}if(T==null){const I=()=>E;return I.locale=x,I.key=_,I}const B=T(E,getCompileOptions(n,x,S,E,A,C));return B.locale=x,B.key=_,B.source=E,B}function evaluateMessage(n,_,x){return _(x)}function parseTranslateArgs(...n){const[_,x,E]=n,S={};if(!isString$5(_)&&!isNumber$3(_)&&!isMessageFunction(_))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const C=isNumber$3(_)?String(_):(isMessageFunction(_),_);return isNumber$3(x)?S.plural=x:isString$5(x)?S.default=x:isPlainObject$2(x)&&!isEmptyObject(x)?S.named=x:isArray$7(x)&&(S.list=x),isNumber$3(E)?S.plural=E:isString$5(E)?S.default=E:isPlainObject$2(E)&&assign$4(S,E),[C,S]}function getCompileOptions(n,_,x,E,S,C){return{warnHtmlMessage:S,onError:T=>{throw C&&C(T),T},onCacheKey:T=>generateFormatCacheKey(_,x,T)}}function getMessageContextOptions(n,_,x,E){const{modifiers:S,pluralRules:C,messageResolver:T,fallbackLocale:A,fallbackWarn:B,missingWarn:I,fallbackContext:M}=n,D={locale:_,modifiers:S,pluralRules:C,messages:L=>{let V=T(x,L);if(V==null&&M){const[,,U]=resolveMessageFormat(M,L,_,A,B,I);V=T(U,L)}if(isString$5(V)){let U=!1;const H=compileMessageFormat(n,L,_,V,L,()=>{U=!0});return U?NOOP_MESSAGE_FUNCTION:H}else return isMessageFunction(V)?V:NOOP_MESSAGE_FUNCTION}};return n.processor&&(D.processor=n.processor),E.list&&(D.list=E.list),E.named&&(D.named=E.named),isNumber$3(E.plural)&&(D.pluralIndex=E.plural),D}function datetime(n,..._){const{datetimeFormats:x,unresolving:E,fallbackLocale:S,onWarn:C,localeFallbacker:T}=n,{__datetimeFormatters:A}=n,[B,I,M,O]=parseDateTimeArgs(..._),D=isBoolean$4(M.missingWarn)?M.missingWarn:n.missingWarn;isBoolean$4(M.fallbackWarn)?M.fallbackWarn:n.fallbackWarn;const L=!!M.part,V=isString$5(M.locale)?M.locale:n.locale,U=T(n,S,V);if(!isString$5(B)||B==="")return new Intl.DateTimeFormat(V,O).format(I);let q={},H,W=null;const Q="datetime format";for(let ne=0;ne<U.length&&(H=U[ne],q=x[H]||{},W=q[B],!isPlainObject$2(W));ne++)handleMissing(n,B,H,D,Q);if(!isPlainObject$2(W)||!isString$5(H))return E?NOT_REOSLVED:B;let re=`${H}__${B}`;isEmptyObject(O)||(re=`${re}__${JSON.stringify(O)}`);let ce=A.get(re);return ce||(ce=new Intl.DateTimeFormat(H,assign$4({},W,O)),A.set(re,ce)),L?ce.formatToParts(I):ce.format(I)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...n){const[_,x,E,S]=n,C={};let T={},A;if(isString$5(_)){const B=_.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!B)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const I=B[3]?B[3].trim().startsWith("T")?`${B[1].trim()}${B[3].trim()}`:`${B[1].trim()}T${B[3].trim()}`:B[1].trim();A=new Date(I);try{A.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$3(_)){if(isNaN(_.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);A=_}else if(isNumber$3(_))A=_;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$5(x)?C.key=x:isPlainObject$2(x)&&Object.keys(x).forEach(B=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(B)?T[B]=x[B]:C[B]=x[B]}),isString$5(E)?C.locale=E:isPlainObject$2(E)&&(T=E),isPlainObject$2(S)&&(T=S),[C.key||"",A,C,T]}function clearDateTimeFormat(n,_,x){const E=n;for(const S in x){const C=`${_}__${S}`;E.__datetimeFormatters.has(C)&&E.__datetimeFormatters.delete(C)}}function number(n,..._){const{numberFormats:x,unresolving:E,fallbackLocale:S,onWarn:C,localeFallbacker:T}=n,{__numberFormatters:A}=n,[B,I,M,O]=parseNumberArgs(..._),D=isBoolean$4(M.missingWarn)?M.missingWarn:n.missingWarn;isBoolean$4(M.fallbackWarn)?M.fallbackWarn:n.fallbackWarn;const L=!!M.part,V=isString$5(M.locale)?M.locale:n.locale,U=T(n,S,V);if(!isString$5(B)||B==="")return new Intl.NumberFormat(V,O).format(I);let q={},H,W=null;const Q="number format";for(let ne=0;ne<U.length&&(H=U[ne],q=x[H]||{},W=q[B],!isPlainObject$2(W));ne++)handleMissing(n,B,H,D,Q);if(!isPlainObject$2(W)||!isString$5(H))return E?NOT_REOSLVED:B;let re=`${H}__${B}`;isEmptyObject(O)||(re=`${re}__${JSON.stringify(O)}`);let ce=A.get(re);return ce||(ce=new Intl.NumberFormat(H,assign$4({},W,O)),A.set(re,ce)),L?ce.formatToParts(I):ce.format(I)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...n){const[_,x,E,S]=n,C={};let T={};if(!isNumber$3(_))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const A=_;return isString$5(x)?C.key=x:isPlainObject$2(x)&&Object.keys(x).forEach(B=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(B)?T[B]=x[B]:C[B]=x[B]}),isString$5(E)?C.locale=E:isPlainObject$2(E)&&(T=E),isPlainObject$2(S)&&(T=S),[C.key||"",A,C,T]}function clearNumberFormat(n,_,x){const E=n;for(const S in x){const C=`${_}__${S}`;E.__numberFormatters.has(C)&&E.__numberFormatters.delete(C)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$1="9.3.0-beta.16";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}let code$8=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code$8,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$8,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(n,..._){return createCompileError(n,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(n){if(!isObject$4(n))return n;for(const _ in n)if(hasOwn$2(n,_))if(!_.includes("."))isObject$4(n[_])&&handleFlatJson(n[_]);else{const x=_.split("."),E=x.length-1;let S=n;for(let C=0;C<E;C++)x[C]in S||(S[x[C]]={}),S=S[x[C]];S[x[E]]=n[_],delete n[_],isObject$4(S[x[E]])&&handleFlatJson(S[x[E]])}return n}function getLocaleMessages(n,_){const{messages:x,__i18n:E,messageResolver:S,flatJson:C}=_,T=isPlainObject$2(x)?x:isArray$7(E)?{}:{[n]:{}};if(isArray$7(E)&&E.forEach(A=>{if("locale"in A&&"resource"in A){const{locale:B,resource:I}=A;B?(T[B]=T[B]||{},deepCopy$1(I,T[B])):deepCopy$1(I,T)}else isString$5(A)&&deepCopy$1(JSON.parse(A),T)}),S==null&&C)for(const A in T)hasOwn$2(T,A)&&handleFlatJson(T[A]);return T}const isNotObjectOrIsArray=n=>!isObject$4(n)||isArray$7(n);function deepCopy$1(n,_){if(isNotObjectOrIsArray(n)||isNotObjectOrIsArray(_))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const x in n)hasOwn$2(n,x)&&(isNotObjectOrIsArray(n[x])||isNotObjectOrIsArray(_[x])?_[x]=n[x]:deepCopy$1(n[x],_[x]))}function getComponentOptions(n){return n.type}function adjustI18nResources(n,_,x){let E=isObject$4(_.messages)?_.messages:{};"__i18nGlobal"in x&&(E=getLocaleMessages(n.locale.value,{messages:E,__i18n:x.__i18nGlobal}));const S=Object.keys(E);S.length&&S.forEach(C=>{n.mergeLocaleMessage(C,E[C])});{if(isObject$4(_.datetimeFormats)){const C=Object.keys(_.datetimeFormats);C.length&&C.forEach(T=>{n.mergeDateTimeFormat(T,_.datetimeFormats[T])})}if(isObject$4(_.numberFormats)){const C=Object.keys(_.numberFormats);C.length&&C.forEach(T=>{n.mergeNumberFormat(T,_.numberFormats[T])})}}}function createTextNode(n){return createVNode(Text,null,n,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(n){return(_,x,E,S)=>n(x,E,getCurrentInstance$1()||void 0,S)}const getMetaInfo=()=>{const n=getCurrentInstance$1();let _=null;return n&&(_=getComponentOptions(n)[DEVTOOLS_META])?{[DEVTOOLS_META]:_}:null};function createComposer(n={},_){const{__root:x}=n,E=x===void 0;let S=isBoolean$4(n.inheritLocale)?n.inheritLocale:!0;const C=ref$1(x&&S?x.locale.value:isString$5(n.locale)?n.locale:DEFAULT_LOCALE),T=ref$1(x&&S?x.fallbackLocale.value:isString$5(n.fallbackLocale)||isArray$7(n.fallbackLocale)||isPlainObject$2(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:C.value),A=ref$1(getLocaleMessages(C.value,n)),B=ref$1(isPlainObject$2(n.datetimeFormats)?n.datetimeFormats:{[C.value]:{}}),I=ref$1(isPlainObject$2(n.numberFormats)?n.numberFormats:{[C.value]:{}});let M=x?x.missingWarn:isBoolean$4(n.missingWarn)||isRegExp$2(n.missingWarn)?n.missingWarn:!0,O=x?x.fallbackWarn:isBoolean$4(n.fallbackWarn)||isRegExp$2(n.fallbackWarn)?n.fallbackWarn:!0,D=x?x.fallbackRoot:isBoolean$4(n.fallbackRoot)?n.fallbackRoot:!0,L=!!n.fallbackFormat,V=isFunction$3(n.missing)?n.missing:null,U=isFunction$3(n.missing)?defineCoreMissingHandler(n.missing):null,q=isFunction$3(n.postTranslation)?n.postTranslation:null,H=x?x.warnHtmlMessage:isBoolean$4(n.warnHtmlMessage)?n.warnHtmlMessage:!0,W=!!n.escapeParameter;const Q=x?x.modifiers:isPlainObject$2(n.modifiers)?n.modifiers:{};let re=n.pluralRules||x&&x.pluralRules,ce;ce=(()=>{E&&setFallbackContext(null);const Ke={version:VERSION$1,locale:C.value,fallbackLocale:T.value,messages:A.value,modifiers:Q,pluralRules:re,missing:U===null?void 0:U,missingWarn:M,fallbackWarn:O,fallbackFormat:L,unresolving:!0,postTranslation:q===null?void 0:q,warnHtmlMessage:H,escapeParameter:W,messageResolver:n.messageResolver,__meta:{framework:"vue"}};Ke.datetimeFormats=B.value,Ke.numberFormats=I.value,Ke.__datetimeFormatters=isPlainObject$2(ce)?ce.__datetimeFormatters:void 0,Ke.__numberFormatters=isPlainObject$2(ce)?ce.__numberFormatters:void 0;const Ge=createCoreContext(Ke);return E&&setFallbackContext(Ge),Ge})(),updateFallbackLocale(ce,C.value,T.value);function Y(){return[C.value,T.value,A.value,B.value,I.value]}const fe=computed({get:()=>C.value,set:Ke=>{C.value=Ke,ce.locale=C.value}}),ge=computed({get:()=>T.value,set:Ke=>{T.value=Ke,ce.fallbackLocale=T.value,updateFallbackLocale(ce,C.value,Ke)}}),$e=computed(()=>A.value),_e=computed(()=>B.value),ae=computed(()=>I.value);function X(){return isFunction$3(q)?q:null}function F(Ke){q=Ke,ce.postTranslation=Ke}function z(){return V}function J(Ke){Ke!==null&&(U=defineCoreMissingHandler(Ke)),V=Ke,ce.missing=U}const te=(Ke,Ge,nt,ot,Ze,Re)=>{Y();let be;if(__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),E||(ce.fallbackContext=x?getFallbackContext():void 0),be=Ke(ce)}finally{setAdditionalMeta(null),E||(ce.fallbackContext=void 0)}else be=Ke(ce);if(isNumber$3(be)&&be===NOT_REOSLVED){const[Ae,Le]=Ge();return x&&D?ot(x):Ze(Ae)}else{if(Re(be))return be;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function se(...Ke){return te(Ge=>Reflect.apply(translate,null,[Ge,...Ke]),()=>parseTranslateArgs(...Ke),"translate",Ge=>Reflect.apply(Ge.t,Ge,[...Ke]),Ge=>Ge,Ge=>isString$5(Ge))}function oe(...Ke){const[Ge,nt,ot]=Ke;if(ot&&!isObject$4(ot))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return se(Ge,nt,assign$4({resolvedMessage:!0},ot||{}))}function ie(...Ke){return te(Ge=>Reflect.apply(datetime,null,[Ge,...Ke]),()=>parseDateTimeArgs(...Ke),"datetime format",Ge=>Reflect.apply(Ge.d,Ge,[...Ke]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$5(Ge))}function G(...Ke){return te(Ge=>Reflect.apply(number,null,[Ge,...Ke]),()=>parseNumberArgs(...Ke),"number format",Ge=>Reflect.apply(Ge.n,Ge,[...Ke]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$5(Ge))}function j(Ke){return Ke.map(Ge=>isString$5(Ge)||isNumber$3(Ge)||isBoolean$4(Ge)?createTextNode(String(Ge)):Ge)}const pe={normalize:j,interpolate:Ke=>Ke,type:"vnode"};function he(...Ke){return te(Ge=>{let nt;const ot=Ge;try{ot.processor=pe,nt=Reflect.apply(translate,null,[ot,...Ke])}finally{ot.processor=null}return nt},()=>parseTranslateArgs(...Ke),"translate",Ge=>Ge[TranslateVNodeSymbol](...Ke),Ge=>[createTextNode(Ge)],Ge=>isArray$7(Ge))}function Se(...Ke){return te(Ge=>Reflect.apply(number,null,[Ge,...Ke]),()=>parseNumberArgs(...Ke),"number format",Ge=>Ge[NumberPartsSymbol](...Ke),()=>[],Ge=>isString$5(Ge)||isArray$7(Ge))}function we(...Ke){return te(Ge=>Reflect.apply(datetime,null,[Ge,...Ke]),()=>parseDateTimeArgs(...Ke),"datetime format",Ge=>Ge[DatetimePartsSymbol](...Ke),()=>[],Ge=>isString$5(Ge)||isArray$7(Ge))}function xe(Ke){re=Ke,ce.pluralRules=re}function Ee(Ke,Ge){const nt=isString$5(Ge)?Ge:C.value,ot=ve(nt);return ce.messageResolver(ot,Ke)!==null}function ye(Ke){let Ge=null;const nt=fallbackWithLocaleChain(ce,T.value,C.value);for(let ot=0;ot<nt.length;ot++){const Ze=A.value[nt[ot]]||{},Re=ce.messageResolver(Ze,Ke);if(Re!=null){Ge=Re;break}}return Ge}function Ce(Ke){const Ge=ye(Ke);return Ge??(x?x.tm(Ke)||{}:{})}function ve(Ke){return A.value[Ke]||{}}function Be(Ke,Ge){A.value[Ke]=Ge,ce.messages=A.value}function me(Ke,Ge){A.value[Ke]=A.value[Ke]||{},deepCopy$1(Ge,A.value[Ke]),ce.messages=A.value}function Ie(Ke){return B.value[Ke]||{}}function Ve(Ke,Ge){B.value[Ke]=Ge,ce.datetimeFormats=B.value,clearDateTimeFormat(ce,Ke,Ge)}function Me(Ke,Ge){B.value[Ke]=assign$4(B.value[Ke]||{},Ge),ce.datetimeFormats=B.value,clearDateTimeFormat(ce,Ke,Ge)}function Ne(Ke){return I.value[Ke]||{}}function Pe(Ke,Ge){I.value[Ke]=Ge,ce.numberFormats=I.value,clearNumberFormat(ce,Ke,Ge)}function He(Ke,Ge){I.value[Ke]=assign$4(I.value[Ke]||{},Ge),ce.numberFormats=I.value,clearNumberFormat(ce,Ke,Ge)}composerID++,x&&inBrowser&&(watch(x.locale,Ke=>{S&&(C.value=Ke,ce.locale=Ke,updateFallbackLocale(ce,C.value,T.value))}),watch(x.fallbackLocale,Ke=>{S&&(T.value=Ke,ce.fallbackLocale=Ke,updateFallbackLocale(ce,C.value,T.value))}));const We={id:composerID,locale:fe,fallbackLocale:ge,get inheritLocale(){return S},set inheritLocale(Ke){S=Ke,Ke&&x&&(C.value=x.locale.value,T.value=x.fallbackLocale.value,updateFallbackLocale(ce,C.value,T.value))},get availableLocales(){return Object.keys(A.value).sort()},messages:$e,get modifiers(){return Q},get pluralRules(){return re||{}},get isGlobal(){return E},get missingWarn(){return M},set missingWarn(Ke){M=Ke,ce.missingWarn=M},get fallbackWarn(){return O},set fallbackWarn(Ke){O=Ke,ce.fallbackWarn=O},get fallbackRoot(){return D},set fallbackRoot(Ke){D=Ke},get fallbackFormat(){return L},set fallbackFormat(Ke){L=Ke,ce.fallbackFormat=L},get warnHtmlMessage(){return H},set warnHtmlMessage(Ke){H=Ke,ce.warnHtmlMessage=Ke},get escapeParameter(){return W},set escapeParameter(Ke){W=Ke,ce.escapeParameter=Ke},t:se,getLocaleMessage:ve,setLocaleMessage:Be,mergeLocaleMessage:me,getPostTranslationHandler:X,setPostTranslationHandler:F,getMissingHandler:z,setMissingHandler:J,[SetPluralRulesSymbol]:xe};return We.datetimeFormats=_e,We.numberFormats=ae,We.rt=oe,We.te=Ee,We.tm=Ce,We.d=ie,We.n=G,We.getDateTimeFormat=Ie,We.setDateTimeFormat=Ve,We.mergeDateTimeFormat=Me,We.getNumberFormat=Ne,We.setNumberFormat=Pe,We.mergeNumberFormat=He,We[InejctWithOption]=n.__injectWithOption,We[TranslateVNodeSymbol]=he,We[DatetimePartsSymbol]=we,We[NumberPartsSymbol]=Se,We}function convertComposerOptions(n){const _=isString$5(n.locale)?n.locale:DEFAULT_LOCALE,x=isString$5(n.fallbackLocale)||isArray$7(n.fallbackLocale)||isPlainObject$2(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:_,E=isFunction$3(n.missing)?n.missing:void 0,S=isBoolean$4(n.silentTranslationWarn)||isRegExp$2(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,C=isBoolean$4(n.silentFallbackWarn)||isRegExp$2(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,T=isBoolean$4(n.fallbackRoot)?n.fallbackRoot:!0,A=!!n.formatFallbackMessages,B=isPlainObject$2(n.modifiers)?n.modifiers:{},I=n.pluralizationRules,M=isFunction$3(n.postTranslation)?n.postTranslation:void 0,O=isString$5(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,D=!!n.escapeParameterHtml,L=isBoolean$4(n.sync)?n.sync:!0;let V=n.messages;if(isPlainObject$2(n.sharedMessages)){const ce=n.sharedMessages;V=Object.keys(ce).reduce((Y,fe)=>{const ge=Y[fe]||(Y[fe]={});return assign$4(ge,ce[fe]),Y},V||{})}const{__i18n:U,__root:q,__injectWithOption:H}=n,W=n.datetimeFormats,Q=n.numberFormats,re=n.flatJson;return{locale:_,fallbackLocale:x,messages:V,flatJson:re,datetimeFormats:W,numberFormats:Q,missing:E,missingWarn:S,fallbackWarn:C,fallbackRoot:T,fallbackFormat:A,modifiers:B,pluralRules:I,postTranslation:M,warnHtmlMessage:O,escapeParameter:D,messageResolver:n.messageResolver,inheritLocale:L,__i18n:U,__root:q,__injectWithOption:H}}function createVueI18n(n={},_){{const x=createComposer(convertComposerOptions(n)),E={id:x.id,get locale(){return x.locale.value},set locale(S){x.locale.value=S},get fallbackLocale(){return x.fallbackLocale.value},set fallbackLocale(S){x.fallbackLocale.value=S},get messages(){return x.messages.value},get datetimeFormats(){return x.datetimeFormats.value},get numberFormats(){return x.numberFormats.value},get availableLocales(){return x.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(S){},get missing(){return x.getMissingHandler()},set missing(S){x.setMissingHandler(S)},get silentTranslationWarn(){return isBoolean$4(x.missingWarn)?!x.missingWarn:x.missingWarn},set silentTranslationWarn(S){x.missingWarn=isBoolean$4(S)?!S:S},get silentFallbackWarn(){return isBoolean$4(x.fallbackWarn)?!x.fallbackWarn:x.fallbackWarn},set silentFallbackWarn(S){x.fallbackWarn=isBoolean$4(S)?!S:S},get modifiers(){return x.modifiers},get formatFallbackMessages(){return x.fallbackFormat},set formatFallbackMessages(S){x.fallbackFormat=S},get postTranslation(){return x.getPostTranslationHandler()},set postTranslation(S){x.setPostTranslationHandler(S)},get sync(){return x.inheritLocale},set sync(S){x.inheritLocale=S},get warnHtmlInMessage(){return x.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(S){x.warnHtmlMessage=S!=="off"},get escapeParameterHtml(){return x.escapeParameter},set escapeParameterHtml(S){x.escapeParameter=S},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(S){},get pluralizationRules(){return x.pluralRules||{}},__composer:x,t(...S){const[C,T,A]=S,B={};let I=null,M=null;if(!isString$5(C))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const O=C;return isString$5(T)?B.locale=T:isArray$7(T)?I=T:isPlainObject$2(T)&&(M=T),isArray$7(A)?I=A:isPlainObject$2(A)&&(M=A),Reflect.apply(x.t,x,[O,I||M||{},B])},rt(...S){return Reflect.apply(x.rt,x,[...S])},tc(...S){const[C,T,A]=S,B={plural:1};let I=null,M=null;if(!isString$5(C))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const O=C;return isString$5(T)?B.locale=T:isNumber$3(T)?B.plural=T:isArray$7(T)?I=T:isPlainObject$2(T)&&(M=T),isString$5(A)?B.locale=A:isArray$7(A)?I=A:isPlainObject$2(A)&&(M=A),Reflect.apply(x.t,x,[O,I||M||{},B])},te(S,C){return x.te(S,C)},tm(S){return x.tm(S)},getLocaleMessage(S){return x.getLocaleMessage(S)},setLocaleMessage(S,C){x.setLocaleMessage(S,C)},mergeLocaleMessage(S,C){x.mergeLocaleMessage(S,C)},d(...S){return Reflect.apply(x.d,x,[...S])},getDateTimeFormat(S){return x.getDateTimeFormat(S)},setDateTimeFormat(S,C){x.setDateTimeFormat(S,C)},mergeDateTimeFormat(S,C){x.mergeDateTimeFormat(S,C)},n(...S){return Reflect.apply(x.n,x,[...S])},getNumberFormat(S){return x.getNumberFormat(S)},setNumberFormat(S,C){x.setNumberFormat(S,C)},mergeNumberFormat(S,C){x.mergeNumberFormat(S,C)},getChoiceIndex(S,C){return-1},__onComponentInstanceCreated(S){const{componentInstanceCreatedListener:C}=n;C&&C(S,E)}};return E}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:n},_){return _.length===1&&_[0]==="default"?(n.default?n.default():[]).reduce((E,S)=>[...E,...S.type===Fragment?S.children:[S]],[]):_.reduce((x,E)=>{const S=n[E];return S&&(x[E]=S()),x},{})}function getFragmentableTag(n){return Fragment}const TranslationImpl=defineComponent$1({name:"i18n-t",props:assign$4({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>isNumber$3(n)||!isNaN(n)}},baseFormatProps),setup(n,_){const{slots:x,attrs:E}=_,S=n.i18n||useI18n({useScope:n.scope,__useComponent:!0});return()=>{const C=Object.keys(x).filter(O=>O!=="_"),T={};n.locale&&(T.locale=n.locale),n.plural!==void 0&&(T.plural=isString$5(n.plural)?+n.plural:n.plural);const A=getInterpolateArg(_,C),B=S[TranslateVNodeSymbol](n.keypath,A,T),I=assign$4({},E),M=isString$5(n.tag)||isObject$4(n.tag)?n.tag:getFragmentableTag();return h$1(M,I,B)}}}),Translation=TranslationImpl;function isVNode(n){return isArray$7(n)&&!isString$5(n[0])}function renderFormatter(n,_,x,E){const{slots:S,attrs:C}=_;return()=>{const T={part:!0};let A={};n.locale&&(T.locale=n.locale),isString$5(n.format)?T.key=n.format:isObject$4(n.format)&&(isString$5(n.format.key)&&(T.key=n.format.key),A=Object.keys(n.format).reduce((D,L)=>x.includes(L)?assign$4({},D,{[L]:n.format[L]}):D,{}));const B=E(n.value,T,A);let I=[T.key];isArray$7(B)?I=B.map((D,L)=>{const V=S[D.type],U=V?V({[D.type]:D.value,index:L,parts:B}):[D.value];return isVNode(U)&&(U[0].key=`${D.type}-${L}`),U}):isString$5(B)&&(I=[B]);const M=assign$4({},C),O=isString$5(n.tag)||isObject$4(n.tag)?n.tag:getFragmentableTag();return h$1(O,M,I)}}const NumberFormatImpl=defineComponent$1({name:"i18n-n",props:assign$4({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(n,_){const x=n.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(n,_,NUMBER_FORMAT_OPTIONS_KEYS,(...E)=>x[NumberPartsSymbol](...E))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent$1({name:"i18n-d",props:assign$4({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(n,_){const x=n.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(n,_,DATETIME_FORMAT_OPTIONS_KEYS,(...E)=>x[DatetimePartsSymbol](...E))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(n,_){const x=n;if(n.mode==="composition")return x.__getInstance(_)||n.global;{const E=x.__getInstance(_);return E!=null?E.__composer:n.global.__composer}}function vTDirective(n){const _=T=>{const{instance:A,modifiers:B,value:I}=T;if(!A||!A.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const M=getComposer$2(n,A.$),O=parseValue(I);return[Reflect.apply(M.t,M,[...makeParams(O)]),M]};return{created:(T,A)=>{const[B,I]=_(A);inBrowser&&n.global===I&&(T.__i18nWatcher=watch(I.locale,()=>{A.instance&&A.instance.$forceUpdate()})),T.__composer=I,T.textContent=B},unmounted:T=>{inBrowser&&T.__i18nWatcher&&(T.__i18nWatcher(),T.__i18nWatcher=void 0,delete T.__i18nWatcher),T.__composer&&(T.__composer=void 0,delete T.__composer)},beforeUpdate:(T,{value:A})=>{if(T.__composer){const B=T.__composer,I=parseValue(A);T.textContent=Reflect.apply(B.t,B,[...makeParams(I)])}},getSSRProps:T=>{const[A]=_(T);return{textContent:A}}}}function parseValue(n){if(isString$5(n))return{path:n};if(isPlainObject$2(n)){if(!("path"in n))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return n}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(n){const{path:_,locale:x,args:E,choice:S,plural:C}=n,T={},A=E||{};return isString$5(x)&&(T.locale=x),isNumber$3(S)&&(T.plural=S),isNumber$3(C)&&(T.plural=C),[_,A,T]}function apply(n,_,...x){const E=isPlainObject$2(x[0])?x[0]:{},S=!!E.useI18nComponentName;(isBoolean$4(E.globalInstall)?E.globalInstall:!0)&&(n.component(S?"i18n":Translation.name,Translation),n.component(NumberFormat.name,NumberFormat),n.component(DatetimeFormat.name,DatetimeFormat)),n.directive("t",vTDirective(_))}function defineMixin(n,_,x){return{beforeCreate(){const E=getCurrentInstance$1();if(!E)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const S=this.$options;if(S.i18n){const C=S.i18n;S.__i18n&&(C.__i18n=S.__i18n),C.__root=_,this===this.$root?this.$i18n=mergeToRoot(n,C):(C.__injectWithOption=!0,this.$i18n=createVueI18n(C))}else S.__i18n?this===this.$root?this.$i18n=mergeToRoot(n,S):this.$i18n=createVueI18n({__i18n:S.__i18n,__injectWithOption:!0,__root:_}):this.$i18n=n;S.__i18nGlobal&&adjustI18nResources(_,S,S),n.__onComponentInstanceCreated(this.$i18n),x.__setInstance(E,this.$i18n),this.$t=(...C)=>this.$i18n.t(...C),this.$rt=(...C)=>this.$i18n.rt(...C),this.$tc=(...C)=>this.$i18n.tc(...C),this.$te=(C,T)=>this.$i18n.te(C,T),this.$d=(...C)=>this.$i18n.d(...C),this.$n=(...C)=>this.$i18n.n(...C),this.$tm=C=>this.$i18n.tm(C),this!==this.$root&&!this.$i18n.__extended__&&x.__vueI18nExtend&&(x.__vueI18nExtend(this.$i18n),this.$i18n.__extended__=!0)},mounted(){},unmounted(){const E=getCurrentInstance$1();if(!E)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,x.__deleteInstance(E),delete this.$i18n}}}function mergeToRoot(n,_){n.locale=_.locale||n.locale,n.fallbackLocale=_.fallbackLocale||n.fallbackLocale,n.missing=_.missing||n.missing,n.silentTranslationWarn=_.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=_.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=_.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=_.postTranslation||n.postTranslation,n.warnHtmlInMessage=_.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=_.escapeParameterHtml||n.escapeParameterHtml,n.sync=_.sync||n.sync,n.__composer[SetPluralRulesSymbol](_.pluralizationRules||n.pluralizationRules);const x=getLocaleMessages(n.locale,{messages:_.messages,__i18n:_.__i18n});return Object.keys(x).forEach(E=>n.mergeLocaleMessage(E,x[E])),_.datetimeFormats&&Object.keys(_.datetimeFormats).forEach(E=>n.mergeDateTimeFormat(E,_.datetimeFormats[E])),_.numberFormats&&Object.keys(_.numberFormats).forEach(E=>n.mergeNumberFormat(E,_.numberFormats[E])),n}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(n={},_){const x=__VUE_I18N_LEGACY_API__&&isBoolean$4(n.legacy)?n.legacy:__VUE_I18N_LEGACY_API__,E=isBoolean$4(n.globalInjection)?n.globalInjection:!0,S=__VUE_I18N_LEGACY_API__&&x?!!n.allowComposition:!0,C=new Map,[T,A]=createGlobal(n,x),B=makeSymbol("");function I(D){return C.get(D)||null}function M(D,L){C.set(D,L)}function O(D){C.delete(D)}{const D={get mode(){return __VUE_I18N_LEGACY_API__&&x?"legacy":"composition"},get allowComposition(){return S},async install(L,...V){if(L.__VUE_I18N_SYMBOL__=B,L.provide(L.__VUE_I18N_SYMBOL__,D),isPlainObject$2(V[0])){const q=V[0];D.__composerExtend=q.__composerExtend,D.__vueI18nExtend=q.__vueI18nExtend}!x&&E&&injectGlobalFields(L,D.global),__VUE_I18N_FULL_INSTALL__&&apply(L,D,...V),__VUE_I18N_LEGACY_API__&&x&&L.mixin(defineMixin(A,A.__composer,D));const U=L.unmount;L.unmount=()=>{D.dispose(),U()}},get global(){return A},dispose(){T.stop()},__instances:C,__getInstance:I,__setInstance:M,__deleteInstance:O};return D}}function useI18n(n={}){const _=getCurrentInstance$1();if(_==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!_.isCE&&_.appContext.app!=null&&!_.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const x=getI18nInstance(_),E=getGlobalComposer(x),S=getComponentOptions(_),C=getScope(n,S);if(__VUE_I18N_LEGACY_API__&&x.mode==="legacy"&&!n.__useComponent){if(!x.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(_,C,E,n)}if(C==="global")return adjustI18nResources(E,n,S),E;if(C==="parent"){let B=getComposer(x,_,n.__useComponent);return B==null&&(B=E),B}const T=x;let A=T.__getInstance(_);if(A==null){const B=assign$4({},n);"__i18n"in S&&(B.__i18n=S.__i18n),E&&(B.__root=E),A=createComposer(B),T.__composerExtend&&T.__composerExtend(A),setupLifeCycle(T,_),T.__setInstance(_,A)}return A}function createGlobal(n,_,x){const E=effectScope();{const S=__VUE_I18N_LEGACY_API__&&_?E.run(()=>createVueI18n(n)):E.run(()=>createComposer(n));if(S==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[E,S]}}function getI18nInstance(n){{const _=inject$1(n.isCE?I18nInjectionKey:n.appContext.app.__VUE_I18N_SYMBOL__);if(!_)throw createI18nError(n.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return _}}function getScope(n,_){return isEmptyObject(n)?"__i18n"in _?"local":"global":n.useScope?n.useScope:"local"}function getGlobalComposer(n){return n.mode==="composition"?n.global:n.global.__composer}function getComposer(n,_,x=!1){let E=null;const S=_.root;let C=_.parent;for(;C!=null;){const T=n;if(n.mode==="composition")E=T.__getInstance(C);else if(__VUE_I18N_LEGACY_API__){const A=T.__getInstance(C);A!=null&&(E=A.__composer,x&&E&&!E[InejctWithOption]&&(E=null))}if(E!=null||S===C)break;C=C.parent}return E}function setupLifeCycle(n,_,x){onMounted(()=>{},_),onUnmounted(()=>{n.__deleteInstance(_)},_)}function useI18nForLegacy(n,_,x,E={}){const S=_==="local",C=shallowRef(null);if(S&&n.proxy&&!(n.proxy.$options.i18n||n.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const T=isBoolean$4(E.inheritLocale)?E.inheritLocale:!0,A=ref$1(S&&T?x.locale.value:isString$5(E.locale)?E.locale:DEFAULT_LOCALE),B=ref$1(S&&T?x.fallbackLocale.value:isString$5(E.fallbackLocale)||isArray$7(E.fallbackLocale)||isPlainObject$2(E.fallbackLocale)||E.fallbackLocale===!1?E.fallbackLocale:A.value),I=ref$1(getLocaleMessages(A.value,E)),M=ref$1(isPlainObject$2(E.datetimeFormats)?E.datetimeFormats:{[A.value]:{}}),O=ref$1(isPlainObject$2(E.numberFormats)?E.numberFormats:{[A.value]:{}}),D=S?x.missingWarn:isBoolean$4(E.missingWarn)||isRegExp$2(E.missingWarn)?E.missingWarn:!0,L=S?x.fallbackWarn:isBoolean$4(E.fallbackWarn)||isRegExp$2(E.fallbackWarn)?E.fallbackWarn:!0,V=S?x.fallbackRoot:isBoolean$4(E.fallbackRoot)?E.fallbackRoot:!0,U=!!E.fallbackFormat,q=isFunction$3(E.missing)?E.missing:null,H=isFunction$3(E.postTranslation)?E.postTranslation:null,W=S?x.warnHtmlMessage:isBoolean$4(E.warnHtmlMessage)?E.warnHtmlMessage:!0,Q=!!E.escapeParameter,re=S?x.modifiers:isPlainObject$2(E.modifiers)?E.modifiers:{},ce=E.pluralRules||S&&x.pluralRules;function ne(){return[A.value,B.value,I.value,M.value,O.value]}const Y=computed({get:()=>C.value?C.value.locale.value:A.value,set:me=>{C.value&&(C.value.locale.value=me),A.value=me}}),fe=computed({get:()=>C.value?C.value.fallbackLocale.value:B.value,set:me=>{C.value&&(C.value.fallbackLocale.value=me),B.value=me}}),ge=computed(()=>C.value?C.value.messages.value:I.value),$e=computed(()=>M.value),_e=computed(()=>O.value);function ae(){return C.value?C.value.getPostTranslationHandler():H}function X(me){C.value&&C.value.setPostTranslationHandler(me)}function F(){return C.value?C.value.getMissingHandler():q}function z(me){C.value&&C.value.setMissingHandler(me)}function J(me){return ne(),me()}function te(...me){return C.value?J(()=>Reflect.apply(C.value.t,null,[...me])):J(()=>"")}function se(...me){return C.value?Reflect.apply(C.value.rt,null,[...me]):""}function oe(...me){return C.value?J(()=>Reflect.apply(C.value.d,null,[...me])):J(()=>"")}function ie(...me){return C.value?J(()=>Reflect.apply(C.value.n,null,[...me])):J(()=>"")}function G(me){return C.value?C.value.tm(me):{}}function j(me,Ie){return C.value?C.value.te(me,Ie):!1}function ee(me){return C.value?C.value.getLocaleMessage(me):{}}function pe(me,Ie){C.value&&(C.value.setLocaleMessage(me,Ie),I.value[me]=Ie)}function he(me,Ie){C.value&&C.value.mergeLocaleMessage(me,Ie)}function Se(me){return C.value?C.value.getDateTimeFormat(me):{}}function we(me,Ie){C.value&&(C.value.setDateTimeFormat(me,Ie),M.value[me]=Ie)}function xe(me,Ie){C.value&&C.value.mergeDateTimeFormat(me,Ie)}function Ee(me){return C.value?C.value.getNumberFormat(me):{}}function ye(me,Ie){C.value&&(C.value.setNumberFormat(me,Ie),O.value[me]=Ie)}function Ce(me,Ie){C.value&&C.value.mergeNumberFormat(me,Ie)}const ve={get id(){return C.value?C.value.id:-1},locale:Y,fallbackLocale:fe,messages:ge,datetimeFormats:$e,numberFormats:_e,get inheritLocale(){return C.value?C.value.inheritLocale:T},set inheritLocale(me){C.value&&(C.value.inheritLocale=me)},get availableLocales(){return C.value?C.value.availableLocales:Object.keys(I.value)},get modifiers(){return C.value?C.value.modifiers:re},get pluralRules(){return C.value?C.value.pluralRules:ce},get isGlobal(){return C.value?C.value.isGlobal:!1},get missingWarn(){return C.value?C.value.missingWarn:D},set missingWarn(me){C.value&&(C.value.missingWarn=me)},get fallbackWarn(){return C.value?C.value.fallbackWarn:L},set fallbackWarn(me){C.value&&(C.value.missingWarn=me)},get fallbackRoot(){return C.value?C.value.fallbackRoot:V},set fallbackRoot(me){C.value&&(C.value.fallbackRoot=me)},get fallbackFormat(){return C.value?C.value.fallbackFormat:U},set fallbackFormat(me){C.value&&(C.value.fallbackFormat=me)},get warnHtmlMessage(){return C.value?C.value.warnHtmlMessage:W},set warnHtmlMessage(me){C.value&&(C.value.warnHtmlMessage=me)},get escapeParameter(){return C.value?C.value.escapeParameter:Q},set escapeParameter(me){C.value&&(C.value.escapeParameter=me)},t:te,getPostTranslationHandler:ae,setPostTranslationHandler:X,getMissingHandler:F,setMissingHandler:z,rt:se,d:oe,n:ie,tm:G,te:j,getLocaleMessage:ee,setLocaleMessage:pe,mergeLocaleMessage:he,getDateTimeFormat:Se,setDateTimeFormat:we,mergeDateTimeFormat:xe,getNumberFormat:Ee,setNumberFormat:ye,mergeNumberFormat:Ce};function Be(me){me.locale.value=A.value,me.fallbackLocale.value=B.value,Object.keys(I.value).forEach(Ie=>{me.mergeLocaleMessage(Ie,I.value[Ie])}),Object.keys(M.value).forEach(Ie=>{me.mergeDateTimeFormat(Ie,M.value[Ie])}),Object.keys(O.value).forEach(Ie=>{me.mergeNumberFormat(Ie,O.value[Ie])}),me.escapeParameter=Q,me.fallbackFormat=U,me.fallbackRoot=V,me.fallbackWarn=L,me.missingWarn=D,me.warnHtmlMessage=W}return onBeforeMount(()=>{if(n.proxy==null||n.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const me=C.value=n.proxy.$i18n.__composer;_==="global"?(A.value=me.locale.value,B.value=me.fallbackLocale.value,I.value=me.messages.value,M.value=me.datetimeFormats.value,O.value=me.numberFormats.value):S&&Be(me)}),ve}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(n,_){const x=Object.create(null);globalExportProps.forEach(E=>{const S=Object.getOwnPropertyDescriptor(_,E);if(!S)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const C=isRef(S.value)?{get(){return S.value.value},set(T){S.value.value=T}}:{get(){return S.get&&S.get()}};Object.defineProperty(x,E,C)}),n.config.globalProperties.$i18n=x,globalExportMethods.forEach(E=>{const S=Object.getOwnPropertyDescriptor(_,E);if(!S||!S.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${E}`,S)})}registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);initFeatureFlags();if(__INTLIFY_PROD_DEVTOOLS__){const n=getGlobalThis();n.__INTLIFY__=!0,setDevToolsHook(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const useI18n_=()=>{const{langue:n,languesAlternatives:_}=utiliserLangues(),x=inject$1(""),{codesLanguesDisponibles:E}=__(),S=useI18n({messages:x?.value||{}});watchEffect(()=>{S.locale.value=n.value});const C=computed(()=>[..._.value,...E.value.filter(T=>T!==n.value&&!_.value.includes(T))]);return watch([C],()=>{S.fallbackLocale.value=C.value}),S.fallbackLocale.value=C.value,{...S,$t:S.t}},__=()=>{const n=inject$1(""),_=inject$1("locales")?.nuchabl;if(!n)throw new Error(" .");if(!_)throw new Error("Nuch'ab'l .");const x=ref$1([]);let E;onMounted(async()=>{E=await n._({:D=>x.value=D})}),onUnmounted(async()=>{E&&await E()});const S=[],C=inject$1(""),T=ref$1([]);C&&C._({:D=>{lodashExports.isEqual(D,T.value)||(T.value=D)},:!0}).then(D=>S.push(D));const A=ref$1([]),B=_.tatzeqelbejKonojelChabl({sm:D=>A.value=D});S.push(B),onUnmounted(async()=>{await Promise.all(S.map(D=>D()))});const I=computed(()=>[...new Set([...A.value,...T.value])]),M=computed(()=>I.value.map(D=>({code:D,lng:_.rubiChabl({runuk:D})})).filter(D=>D.lng));return{codesLanguesDisponibles:I,languesEtCodes:M,nomLangue:D=>computed(()=>{const L=typeof D=="string"?D:D.value;if(D)return M.value.find(V=>V.code===L)?.lng}),_:x}},__=({:n,:_=""})=>{const x=inject$1("");if(!x)throw new Error(" .");const E=ref$1();let S;return onMounted(async()=>{typeof n=="string"?S=await x._({:n,:_,:C=>E.value=C}):n.value&&(S=await x._({:n.value,:_,:C=>E.value=C}))}),onUnmounted(async()=>{S&&await S()}),typeof n!="string"&&watchEffect(async()=>{S&&await S(),n.value?S=await x._({:n.value,:_,:C=>E.value=C}):(E.value=void 0,S=void 0)}),{_:E}},_=()=>{const n=inject$1("");if(!n)throw new Error(" .");const _=ref$1();let x;return onMounted(async()=>{x=await n._({:E=>_.value=E})}),onUnmounted(async()=>{x&&await x()}),{:_}},_=()=>{const n=inject$1("");if(!n)throw new Error(" .");const _=ref$1({});let x;return onMounted(async()=>{x=await n.__({:E=>_.value=E})}),onUnmounted(async()=>{x&&await x()}),{_:_}},_=()=>{const n=inject$1("");if(!n)throw new Error(" .");const _=ref$1([]);let x;return onMounted(async()=>{x=(await n.__({:E=>_.value=E})).fOublier}),onUnmounted(async()=>{x&&await x()}),{:_}},_=({_:n,_:_})=>({install:x=>{const E=x.config.globalProperties.$constl;if(!E)throw Error(" .");const S=new ({:E,_:__(_),_:n}),C=ref$1({});S._({:T=>{C.value=__(T)},:""}),x.config.globalProperties.$=S,x.provide("",C),x.provide("",S)}}),_=()=>({__,__,_,_,_,useI18n:useI18n_}),enregistrercoute=n=>{let _;const x=new EventEmitter$5;let E;const S=new Promise(C=>{once_1(x,"prt").then(()=>{C(E)})});return onMounted(async()=>{E=await n,E instanceof Function?_=E:_=E?.fOublier,x.emit("prt")}),onUnmounted(async()=>{_&&await _()}),S};var isVue2=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=n=>activePinia=n,piniaSymbol=Symbol();function isPlainObject$1(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var MutationType;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const n=effectScope(!0),_=n.run(()=>ref$1({}));let x=[],E=[];const S=markRaw({install(C){setActivePinia(S),S._a=C,C.provide(piniaSymbol,S),C.config.globalProperties.$pinia=S,E.forEach(T=>x.push(T)),E=[]},use(C){return!this._a&&!isVue2?E.push(C):x.push(C),this},_p:x,_a:null,_e:n,_s:new Map,state:_});return S}const noop$6=()=>{};function addSubscription(n,_,x,E=noop$6){n.push(_);const S=()=>{const C=n.indexOf(_);C>-1&&(n.splice(C,1),E())};return!x&&getCurrentScope()&&onScopeDispose(S),S}function triggerSubscriptions(n,..._){n.slice().forEach(x=>{x(..._)})}const fallbackRunWithContext=n=>n();function mergeReactiveObjects(n,_){n instanceof Map&&_ instanceof Map&&_.forEach((x,E)=>n.set(E,x)),n instanceof Set&&_ instanceof Set&&_.forEach(n.add,n);for(const x in _){if(!_.hasOwnProperty(x))continue;const E=_[x],S=n[x];isPlainObject$1(S)&&isPlainObject$1(E)&&n.hasOwnProperty(x)&&!isRef(E)&&!isReactive(E)?n[x]=mergeReactiveObjects(S,E):n[x]=E}return n}const skipHydrateSymbol=Symbol();function shouldHydrate(n){return!isPlainObject$1(n)||!n.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$3}=Object;function isComputed(n){return!!(isRef(n)&&n.effect)}function createOptionsStore(n,_,x,E){const{state:S,actions:C,getters:T}=_,A=x.state.value[n];let B;function I(){A||(x.state.value[n]=S?S():{});const M=toRefs(x.state.value[n]);return assign$3(M,C,Object.keys(T||{}).reduce((O,D)=>(O[D]=markRaw(computed(()=>{setActivePinia(x);const L=x._s.get(n);return T[D].call(L,L)})),O),{}))}return B=createSetupStore(n,I,_,x,E,!0),B}function createSetupStore(n,_,x={},E,S,C){let T;const A=assign$3({actions:{}},x),B={deep:!0};let I,M,O=[],D=[],L;const V=E.state.value[n];!C&&!V&&(E.state.value[n]={}),ref$1({});let U;function q(fe){let ge;I=M=!1,typeof fe=="function"?(fe(E.state.value[n]),ge={type:MutationType.patchFunction,storeId:n,events:L}):(mergeReactiveObjects(E.state.value[n],fe),ge={type:MutationType.patchObject,payload:fe,storeId:n,events:L});const $e=U=Symbol();nextTick$2().then(()=>{U===$e&&(I=!0)}),M=!0,triggerSubscriptions(O,ge,E.state.value[n])}const H=C?function(){const{state:ge}=x,$e=ge?ge():{};this.$patch(_e=>{assign$3(_e,$e)})}:noop$6;function W(){T.stop(),O=[],D=[],E._s.delete(n)}function Q(fe,ge){return function(){setActivePinia(E);const $e=Array.from(arguments),_e=[],ae=[];function X(J){_e.push(J)}function F(J){ae.push(J)}triggerSubscriptions(D,{args:$e,name:fe,store:ce,after:X,onError:F});let z;try{z=ge.apply(this&&this.$id===n?this:ce,$e)}catch(J){throw triggerSubscriptions(ae,J),J}return z instanceof Promise?z.then(J=>(triggerSubscriptions(_e,J),J)).catch(J=>(triggerSubscriptions(ae,J),Promise.reject(J))):(triggerSubscriptions(_e,z),z)}}const re={_p:E,$id:n,$onAction:addSubscription.bind(null,D),$patch:q,$reset:H,$subscribe(fe,ge={}){const $e=addSubscription(O,fe,ge.detached,()=>_e()),_e=T.run(()=>watch(()=>E.state.value[n],ae=>{(ge.flush==="sync"?M:I)&&fe({storeId:n,type:MutationType.direct,events:L},ae)},assign$3({},B,ge)));return $e},$dispose:W},ce=reactive(re);E._s.set(n,ce);const ne=E._a&&E._a.runWithContext||fallbackRunWithContext,Y=E._e.run(()=>(T=effectScope(),ne(()=>T.run(_))));for(const fe in Y){const ge=Y[fe];if(isRef(ge)&&!isComputed(ge)||isReactive(ge))C||(V&&shouldHydrate(ge)&&(isRef(ge)?ge.value=V[fe]:mergeReactiveObjects(ge,V[fe])),E.state.value[n][fe]=ge);else if(typeof ge=="function"){const $e=Q(fe,ge);Y[fe]=$e,A.actions[fe]=ge}}return assign$3(ce,Y),assign$3(toRaw(ce),Y),Object.defineProperty(ce,"$state",{get:()=>E.state.value[n],set:fe=>{q(ge=>{assign$3(ge,fe)})}}),E._p.forEach(fe=>{assign$3(ce,T.run(()=>fe({store:ce,app:E._a,pinia:E,options:A})))}),V&&C&&x.hydrate&&x.hydrate(ce.$state,V),I=!0,M=!0,ce}function defineStore(n,_,x){let E,S;const C=typeof _=="function";typeof n=="string"?(E=n,S=C?x:_):(S=n,E=n.id);function T(A,B){const I=hasInjectionContext();return A=A||(I?inject$1(piniaSymbol,null):null),A&&setActivePinia(A),A=activePinia,A._s.has(E)||(C?createSetupStore(E,_,S,A):createOptionsStore(E,S,A)),A._s.get(E)}return T.$id=E,T}function storeToRefs(n){{n=toRaw(n);const _={};for(const x in n){const E=n[x];(isRef(E)||isReactive(E))&&(_[x]=toRef(n,x))}return _}}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function _classPrivateFieldInitSpec(n,_,x){_checkPrivateRedeclaration$1(n,_),_.set(n,x)}function _checkPrivateRedeclaration$1(n,_){if(_.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet$1(n,_,x){var E=_classExtractFieldDescriptor$1(n,_,"set");return _classApplyDescriptorSet$1(n,E,x),x}function _classApplyDescriptorSet$1(n,_,x){if(_.set)_.set.call(n,x);else{if(!_.writable)throw new TypeError("attempted to set read only private field");_.value=x}}function _classPrivateFieldGet$1(n,_){var x=_classExtractFieldDescriptor$1(n,_,"get");return _classApplyDescriptorGet$1(n,x)}function _classExtractFieldDescriptor$1(n,_,x){if(!_.has(n))throw new TypeError("attempted to "+x+" private field on non-instance");return _.get(n)}function _classApplyDescriptorGet$1(n,_){return _.get?_.get.call(n):_.value}function getNestedValue(n,_,x){const E=_.length-1;if(E<0)return n===void 0?x:n;for(let S=0;S<E;S++){if(n==null)return x;n=n[_[S]]}return n==null||n[_[E]]===void 0?x:n[_[E]]}function deepEqual$3(n,_){if(n===_)return!0;if(n instanceof Date&&_ instanceof Date&&n.getTime()!==_.getTime()||n!==Object(n)||_!==Object(_))return!1;const x=Object.keys(n);return x.length!==Object.keys(_).length?!1:x.every(E=>deepEqual$3(n[E],_[E]))}function getObjectValueByPath(n,_,x){return n==null||!_||typeof _!="string"?x:n[_]!==void 0?n[_]:(_=_.replace(/\[(\w+)\]/g,".$1"),_=_.replace(/^\./,""),getNestedValue(n,_.split("."),x))}function getPropertyFromItem(n,_,x){if(_==null)return n===void 0?x:n;if(n!==Object(n)){if(typeof _!="function")return x;const S=_(n,x);return typeof S>"u"?x:S}if(typeof _=="string")return getObjectValueByPath(n,_,x);if(Array.isArray(_))return getNestedValue(n,_,x);if(typeof _!="function")return x;const E=_(n,x);return typeof E>"u"?x:E}function createRange(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:n},(x,E)=>_+E)}function convertToUnit(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(n==null||n===""))return isNaN(+n)?String(n):isFinite(+n)?`${Number(n)}${_}`:void 0}function isObject$3(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function refElement(n){return n&&"$el"in n?n.$el:n}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function keys$4(n){return Object.keys(n)}function has$3(n,_){return _.every(x=>n.hasOwnProperty(x))}function pick$1(n,_,x){const E=Object.create(null),S=Object.create(null);for(const C in n)_.some(T=>T instanceof RegExp?T.test(C):T===C)&&!x?.some(T=>T===C)?E[C]=n[C]:S[C]=n[C];return[E,S]}function omit(n,_){const x={...n};return _.forEach(E=>delete x[E]),x}const onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),bubblingEvents=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function filterInputAttrs(n){const[_,x]=pick$1(n,[onRE]),E=omit(_,bubblingEvents),[S,C]=pick$1(x,["class","style","id",/^data-/]);return Object.assign(S,_),Object.assign(C,E),[S,C]}function wrapInArray(n){return n==null?[]:Array.isArray(n)?n:[n]}function clamp(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(_,Math.min(x,n))}function padEnd(n,_){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return n+x.repeat(Math.max(0,_-n.length))}function chunk(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const x=[];let E=0;for(;E<n.length;)x.push(n.substr(E,_)),E+=_;return x}function mergeDeep(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=arguments.length>2?arguments[2]:void 0;const E={};for(const S in n)E[S]=n[S];for(const S in _){const C=n[S],T=_[S];if(isObject$3(C)&&isObject$3(T)){E[S]=mergeDeep(C,T,x);continue}if(Array.isArray(C)&&Array.isArray(T)&&x){E[S]=x(C,T);continue}E[S]=T}return E}function flattenFragments(n){return n.map(_=>_.type===Fragment?flattenFragments(_.children):_).flat()}function toKebabCase(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(toKebabCase.cache.has(n))return toKebabCase.cache.get(n);const _=n.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return toKebabCase.cache.set(n,_),_}toKebabCase.cache=new Map;function findChildrenWithProvide(n,_){if(!_||typeof _!="object")return[];if(Array.isArray(_))return _.map(x=>findChildrenWithProvide(n,x)).flat(1);if(Array.isArray(_.children))return _.children.map(x=>findChildrenWithProvide(n,x)).flat(1);if(_.component){if(Object.getOwnPropertySymbols(_.component.provides).includes(n))return[_.component];if(_.component.subTree)return findChildrenWithProvide(n,_.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(_){_classPrivateFieldInitSpec(this,_arr,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_pointer,{writable:!0,value:0}),this.size=_}push(_){_classPrivateFieldGet$1(this,_arr)[_classPrivateFieldGet$1(this,_pointer)]=_,_classPrivateFieldSet$1(this,_pointer,(_classPrivateFieldGet$1(this,_pointer)+1)%this.size)}values(){return _classPrivateFieldGet$1(this,_arr).slice(_classPrivateFieldGet$1(this,_pointer)).concat(_classPrivateFieldGet$1(this,_arr).slice(0,_classPrivateFieldGet$1(this,_pointer)))}}function destructComputed(n){const _=reactive({}),x=computed(n);return watchEffect(()=>{for(const E in x.value)_[E]=x.value[E]},{flush:"sync"}),toRefs(_)}function includes(n,_){return n.includes(_)}function eventName(n){return n[2].toLowerCase()+n.slice(3)}const EventProp=()=>[Function,Array];function hasEvent(n,_){return _="on"+capitalize$1(_),!!(n[_]||n[`${_}Once`]||n[`${_}Capture`]||n[`${_}OnceCapture`]||n[`${_}CaptureOnce`])}function callEvent(n){for(var _=arguments.length,x=new Array(_>1?_-1:0),E=1;E<_;E++)x[E-1]=arguments[E];if(Array.isArray(n))for(const S of n)S(...x);else typeof n=="function"&&n(...x)}function focusableChildren(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const x=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(E=>`${E}${_?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...n.querySelectorAll(x)]}function getNextElement(n,_,x){let E,S=n.indexOf(document.activeElement);const C=_==="next"?1:-1;do S+=C,E=n[S];while((!E||E.offsetParent==null||!(x?.(E)??!0))&&S<n.length&&S>=0);return E}function focusChild(n,_){const x=focusableChildren(n);if(!_)(n===document.activeElement||!n.contains(document.activeElement))&&x[0]?.focus();else if(_==="first")x[0]?.focus();else if(_==="last")x.at(-1)?.focus();else if(typeof _=="number")x[_]?.focus();else{const E=getNextElement(x,_);E?E.focus():focusChild(n,_==="next"?"first":"last")}}function noop$5(){}function matchesSelector(n,_){if(!(IN_BROWSER&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${_})`)))return null;try{return!!n&&n.matches(_)}catch{return null}}const block=["top","bottom"],inline=["start","end","left","right"];function parseAnchor(n,_){let[x,E]=n.split(" ");return E||(E=includes(block,x)?"start":includes(inline,x)?"top":"center"),{side:toPhysical(x,_),align:toPhysical(E,_)}}function toPhysical(n,_){return n==="start"?_?"right":"left":n==="end"?_?"left":"right":n}function flipSide(n){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.side],align:n.align}}function flipAlign(n){return{side:n.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.align]}}function flipCorner(n){return{side:n.align,align:n.side}}function getAxis(n){return includes(block,n.side)?"y":"x"}class Box{constructor(_){let{x,y:E,width:S,height:C}=_;this.x=x,this.y=E,this.width=S,this.height=C}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function getOverflow(n,_){return{x:{before:Math.max(0,_.left-n.left),after:Math.max(0,n.right-_.right)},y:{before:Math.max(0,_.top-n.top),after:Math.max(0,n.bottom-_.bottom)}}}function nullifyTransforms(n){const _=n.getBoundingClientRect(),x=getComputedStyle(n),E=x.transform;if(E){let S,C,T,A,B;if(E.startsWith("matrix3d("))S=E.slice(9,-1).split(/, /),C=+S[0],T=+S[5],A=+S[12],B=+S[13];else if(E.startsWith("matrix("))S=E.slice(7,-1).split(/, /),C=+S[0],T=+S[3],A=+S[4],B=+S[5];else return new Box(_);const I=x.transformOrigin,M=_.x-A-(1-C)*parseFloat(I),O=_.y-B-(1-T)*parseFloat(I.slice(I.indexOf(" ")+1)),D=C?_.width/C:n.offsetWidth+1,L=T?_.height/T:n.offsetHeight+1;return new Box({x:M,y:O,width:D,height:L})}else return new Box(_)}function animate(n,_,x){if(typeof n.animate>"u")return{finished:Promise.resolve()};let E;try{E=n.animate(_,x)}catch{return{finished:Promise.resolve()}}return typeof E.finished>"u"&&(E.finished=new Promise(S=>{E.onfinish=()=>{S(E)}})),E}const handlers=new WeakMap;function bindProps(n,_){Object.keys(_).forEach(x=>{if(isOn(x)){const E=eventName(x),S=handlers.get(n);if(_[x]==null)S?.forEach(C=>{const[T,A]=C;T===E&&(n.removeEventListener(E,A),S.delete(C))});else if(!S||![...S].some(C=>C[0]===E&&C[1]===_[x])){n.addEventListener(E,_[x]);const C=S||new Set;C.add([E,_[x]]),handlers.has(n)||handlers.set(n,C)}}else _[x]==null?n.removeAttribute(x):n.setAttribute(x,_[x])})}function unbindProps(n,_){Object.keys(_).forEach(x=>{if(isOn(x)){const E=eventName(x),S=handlers.get(n);S?.forEach(C=>{const[T,A]=C;T===E&&(n.removeEventListener(E,A),S.delete(C))})}else n.removeAttribute(x)})}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(n,_){const x=(n.r/255)**mainTRC,E=(n.g/255)**mainTRC,S=(n.b/255)**mainTRC,C=(_.r/255)**mainTRC,T=(_.g/255)**mainTRC,A=(_.b/255)**mainTRC;let B=x*Rco+E*Gco+S*Bco,I=C*Rco+T*Gco+A*Bco;if(B<=blkThrs&&(B+=(blkThrs-B)**blkClmp),I<=blkThrs&&(I+=(blkThrs-I)**blkClmp),Math.abs(I-B)<deltaYmin)return 0;let M;if(I>B){const O=(I**normBG-B**normTXT)*scaleBoW;M=O<loClip?0:O<loConThresh?O-O*loConFactor*loConOffset:O-loConOffset}else{const O=(I**revBG-B**revTXT)*scaleWoB;M=O>-loClip?0:O>-loConThresh?O-O*loConFactor*loConOffset:O+loConOffset}return M*100}function consoleWarn(n){}function deprecate(n,_){_=Array.isArray(_)?_.slice(0,-1).map(x=>`'${x}'`).join(", ")+` or '${_.at(-1)}'`:`'${_}'`}const delta=.20689655172413793,cielabForwardTransform=n=>n>delta**3?Math.cbrt(n):n/(3*delta**2)+4/29,cielabReverseTransform=n=>n>delta?n**3:3*delta**2*(n-4/29);function fromXYZ$1(n){const _=cielabForwardTransform,x=_(n[1]);return[116*x-16,500*(_(n[0]/.95047)-x),200*(x-_(n[2]/1.08883))]}function toXYZ$1(n){const _=cielabReverseTransform,x=(n[0]+16)/116;return[_(x+n[1]/500)*.95047,_(x),_(x-n[2]/200)*1.08883]}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=n=>n<=.0031308?n*12.92:1.055*n**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4;function fromXYZ(n){const _=Array(3),x=srgbForwardTransform,E=srgbForwardMatrix;for(let S=0;S<3;++S)_[S]=Math.round(clamp(x(E[S][0]*n[0]+E[S][1]*n[1]+E[S][2]*n[2]))*255);return{r:_[0],g:_[1],b:_[2]}}function toXYZ(n){let{r:_,g:x,b:E}=n;const S=[0,0,0],C=srgbReverseTransform,T=srgbReverseMatrix;_=C(_/255),x=C(x/255),E=C(E/255);for(let A=0;A<3;++A)S[A]=T[A][0]*_+T[A][1]*x+T[A][2]*E;return S}function isCssColor(n){return!!n&&/^(#|var\(--|(rgb|hsl)a?\()/.test(n)}const cssColorRe=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,mappers={rgb:(n,_,x,E)=>({r:n,g:_,b:x,a:E}),rgba:(n,_,x,E)=>({r:n,g:_,b:x,a:E}),hsl:(n,_,x,E)=>HSLtoRGB({h:n,s:_,l:x,a:E}),hsla:(n,_,x,E)=>HSLtoRGB({h:n,s:_,l:x,a:E}),hsv:(n,_,x,E)=>HSVtoRGB({h:n,s:_,v:x,a:E}),hsva:(n,_,x,E)=>HSVtoRGB({h:n,s:_,v:x,a:E})};function parseColor(n){if(typeof n=="number")return{r:(n&16711680)>>16,g:(n&65280)>>8,b:n&255};if(typeof n=="string"&&cssColorRe.test(n)){const{groups:_}=n.match(cssColorRe),{fn:x,values:E}=_,S=E.split(/,\s*/).map(C=>C.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(x)?parseFloat(C)/100:parseFloat(C));return mappers[x](...S)}else if(typeof n=="string"){let _=n.startsWith("#")?n.slice(1):n;return[3,4].includes(_.length)?_=_.split("").map(x=>x+x).join(""):[6,8].includes(_.length),HexToRGB(_)}else if(typeof n=="object"){if(has$3(n,["r","g","b"]))return n;if(has$3(n,["h","s","l"]))return HSVtoRGB(HSLtoHSV(n));if(has$3(n,["h","s","v"]))return HSVtoRGB(n)}throw new TypeError(`Invalid color: ${n==null?n:String(n)||n.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function HSVtoRGB(n){const{h:_,s:x,v:E,a:S}=n,C=A=>{const B=(A+_/60)%6;return E-E*x*Math.max(Math.min(B,4-B,1),0)},T=[C(5),C(3),C(1)].map(A=>Math.round(A*255));return{r:T[0],g:T[1],b:T[2],a:S}}function HSLtoRGB(n){return HSVtoRGB(HSLtoHSV(n))}function HSLtoHSV(n){const{h:_,s:x,l:E,a:S}=n,C=E+x*Math.min(E,1-E),T=C===0?0:2-2*E/C;return{h:_,s:T,v:C,a:S}}function toHex$2(n){const _=Math.round(n).toString(16);return("00".substr(0,2-_.length)+_).toUpperCase()}function RGBtoHex(n){let{r:_,g:x,b:E,a:S}=n;return`#${[toHex$2(_),toHex$2(x),toHex$2(E),S!==void 0?toHex$2(Math.round(S*255)):""].join("")}`}function HexToRGB(n){n=parseHex(n);let[_,x,E,S]=chunk(n,2).map(C=>parseInt(C,16));return S=S===void 0?S:S/255,{r:_,g:x,b:E,a:S}}function parseHex(n){return n.startsWith("#")&&(n=n.slice(1)),n=n.replace(/([^0-9a-f])/gi,"F"),(n.length===3||n.length===4)&&(n=n.split("").map(_=>_+_).join("")),n.length!==6&&(n=padEnd(padEnd(n,6),8,"F")),n}function lighten(n,_){const x=fromXYZ$1(toXYZ(n));return x[0]=x[0]+_*10,fromXYZ(toXYZ$1(x))}function darken(n,_){const x=fromXYZ$1(toXYZ(n));return x[0]=x[0]-_*10,fromXYZ(toXYZ$1(x))}function getLuma(n){const _=parseColor(n);return toXYZ(_)[1]}function getForeground(n){const _=Math.abs(APCAcontrast(parseColor(0),parseColor(n)));return Math.abs(APCAcontrast(parseColor(16777215),parseColor(n)))>Math.min(_,50)?"#fff":"#000"}function propsFactory(n,_){return x=>Object.keys(n).reduce((E,S)=>{const T=typeof n[S]=="object"&&n[S]!=null&&!Array.isArray(n[S])?n[S]:{type:n[S]};return x&&S in x?E[S]={...T,default:x[S]}:E[S]=T,_&&!E[S].source&&(E[S].source=_),E},{})}const makeComponentProps=propsFactory({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function defineComponent(n){if(n._setup=n._setup??n.setup,!n.name)return n;if(n._setup){n.props=propsFactory(n.props??{},n.name)();const _=Object.keys(n.props);n.filterProps=function(E){return pick$1(E,_,["class","style"])},n.props._as=String,n.setup=function(E,S){const C=injectDefaults();if(!C.value)return n._setup(E,S);const{props:T,provideSubDefaults:A}=internalUseDefaults(E,E._as??n.name,C),B=n._setup(T,S);return A(),B}}return n}function genericComponent(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return _=>(n?defineComponent:defineComponent$1)(_)}function createSimpleFunctional(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",x=arguments.length>2?arguments[2]:void 0;return genericComponent()({name:x??capitalize$1(camelize(n.replace(/__/g,"-"))),props:{tag:{type:String,default:_},...makeComponentProps()},setup(E,S){let{slots:C}=S;return()=>h$1(E.tag,{class:[n,E.class],style:E.style},C.default?.())}})}function attachedRoot(n){if(typeof n.getRootNode!="function"){for(;n.parentNode;)n=n.parentNode;return n!==document?null:document}const _=n.getRootNode();return _!==document&&_.getRootNode({composed:!0})!==document?null:_}const standardEasing="cubic-bezier(0.4, 0, 0.2, 1)",deceleratedEasing="cubic-bezier(0.0, 0, 0.2, 1)",acceleratedEasing="cubic-bezier(0.4, 0, 1, 1)";function getCurrentInstance(n,_){const x=getCurrentInstance$1();if(!x)throw new Error(`[Vuetify] ${n} ${_||"must be called from inside a setup function"}`);return x}function getCurrentInstanceName(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const _=getCurrentInstance(n).type;return toKebabCase(_?.aliasName||_?.name)}let _uid=0,_map=new WeakMap;function getUid(){const n=getCurrentInstance("getUid");if(_map.has(n))return _map.get(n);{const _=_uid++;return _map.set(n,_),_}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function getScrollParent(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;n;){if(_?isPotentiallyScrollable(n):hasScrollbar(n))return n;n=n.parentElement}return document.scrollingElement}function getScrollParents(n,_){const x=[];if(_&&n&&!_.contains(n))return x;for(;n&&(hasScrollbar(n)&&x.push(n),n!==_);)n=n.parentElement;return x}function hasScrollbar(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const _=window.getComputedStyle(n);return _.overflowY==="scroll"||_.overflowY==="auto"&&n.scrollHeight>n.clientHeight}function isPotentiallyScrollable(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const _=window.getComputedStyle(n);return["scroll","auto"].includes(_.overflowY)}function injectSelf(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstance("injectSelf");const{provides:x}=_;if(x&&n in x)return x[n]}function isFixedPosition(n){for(;n;){if(window.getComputedStyle(n).position==="fixed")return!0;n=n.offsetParent}return!1}function useRender(n){const _=getCurrentInstance("useRender");_.render=n}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(n){return ref$1(n)}function injectDefaults(){const n=inject$1(DefaultsSymbol);if(!n)throw new Error("[Vuetify] Could not find defaults instance");return n}function provideDefaults(n,_){const x=injectDefaults(),E=ref$1(n),S=computed(()=>{if(unref(_?.disabled))return x.value;const T=unref(_?.scoped),A=unref(_?.reset),B=unref(_?.root);if(E.value==null&&!(T||A||B))return x.value;let I=mergeDeep(E.value,{prev:x.value});if(T)return I;if(A||B){const M=Number(A||1/0);for(let O=0;O<=M&&!(!I||!("prev"in I));O++)I=I.prev;return I&&typeof B=="string"&&B in I&&(I=mergeDeep(mergeDeep(I,{prev:I}),I[B])),I}return I.prev?mergeDeep(I.prev,I):I});return provide(DefaultsSymbol,S),S}function propIsDefined(n,_){return typeof n.props?.[_]<"u"||typeof n.props?.[toKebabCase(_)]<"u"}function internalUseDefaults(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:injectDefaults();const E=getCurrentInstance("useDefaults");if(_=_??E.type.name??E.type.__name,!_)throw new Error("[Vuetify] Could not determine component name");const S=computed(()=>x.value?.[n._as??_]),C=new Proxy(n,{get(B,I){const M=Reflect.get(B,I);return I==="class"||I==="style"?[S.value?.[I],M].filter(O=>O!=null):typeof I=="string"&&!propIsDefined(E.vnode,I)?S.value?.[I]??x.value?.global?.[I]??M:M}}),T=shallowRef();watchEffect(()=>{if(S.value){const B=Object.entries(S.value).filter(I=>{let[M]=I;return M.startsWith(M[0].toUpperCase())});T.value=B.length?Object.fromEntries(B):void 0}else T.value=void 0});function A(){const B=injectSelf(DefaultsSymbol,E);provide(DefaultsSymbol,computed(()=>T.value?mergeDeep(B?.value??{},T.value):B?.value))}return{props:C,provideSubDefaults:A}}const breakpoints=["sm","md","lg","xl","xxl"],DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,n)};function getClientWidth(n){return IN_BROWSER&&!n?window.innerWidth:typeof n=="object"&&n.clientWidth||0}function getClientHeight(n){return IN_BROWSER&&!n?window.innerHeight:typeof n=="object"&&n.clientHeight||0}function getPlatform(n){const _=IN_BROWSER&&!n?window.navigator.userAgent:"ssr";function x(V){return!!_.match(V)}const E=x(/android/i),S=x(/iphone|ipad|ipod/i),C=x(/cordova/i),T=x(/electron/i),A=x(/chrome/i),B=x(/edge/i),I=x(/firefox/i),M=x(/opera/i),O=x(/win/i),D=x(/mac/i),L=x(/linux/i);return{android:E,ios:S,cordova:C,electron:T,chrome:A,edge:B,firefox:I,opera:M,win:O,mac:D,linux:L,touch:SUPPORTS_TOUCH,ssr:_==="ssr"}}function createDisplay(n,_){const{thresholds:x,mobileBreakpoint:E}=parseDisplayOptions(n),S=shallowRef(getClientHeight(_)),C=shallowRef(getPlatform(_)),T=reactive({}),A=shallowRef(getClientWidth(_));function B(){S.value=getClientHeight(),A.value=getClientWidth()}function I(){B(),C.value=getPlatform()}return watchEffect(()=>{const M=A.value<x.sm,O=A.value<x.md&&!M,D=A.value<x.lg&&!(O||M),L=A.value<x.xl&&!(D||O||M),V=A.value<x.xxl&&!(L||D||O||M),U=A.value>=x.xxl,q=M?"xs":O?"sm":D?"md":L?"lg":V?"xl":"xxl",H=typeof E=="number"?E:x[E],W=A.value<H;T.xs=M,T.sm=O,T.md=D,T.lg=L,T.xl=V,T.xxl=U,T.smAndUp=!M,T.mdAndUp=!(M||O),T.lgAndUp=!(M||O||D),T.xlAndUp=!(M||O||D||L),T.smAndDown=!(D||L||V||U),T.mdAndDown=!(L||V||U),T.lgAndDown=!(V||U),T.xlAndDown=!U,T.name=q,T.height=S.value,T.width=A.value,T.mobile=W,T.mobileBreakpoint=E,T.platform=C.value,T.thresholds=x}),IN_BROWSER&&window.addEventListener("resize",B,{passive:!0}),{...toRefs(T),update:I,ssr:!!_}}function useDisplay(){const n=inject$1(DisplaySymbol);if(!n)throw new Error("Could not find Vuetify display injection");return n}const aliases$1={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar"},mdi={component:n=>h$1(VClassIcon,{...n,class:"mdi"})},IconValue=[String,Function,Object,Array],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=genericComponent()({name:"VComponentIcon",props:makeIconProps(),setup(n,_){let{slots:x}=_;return()=>{const E=n.icon;return createVNode(n.tag,null,{default:()=>[n.icon?createVNode(E,null,null):x.default?.()]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(n,_){let{attrs:x}=_;return()=>createVNode(n.tag,mergeProps(x,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(n.icon)?n.icon.map(E=>Array.isArray(E)?createVNode("path",{d:E[0],"fill-opacity":E[1]},null):createVNode("path",{d:E},null)):createVNode("path",{d:n.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(n){return()=>createVNode(n.tag,null,{default:()=>[n.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(n){return()=>createVNode(n.tag,{class:n.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(n){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:{...aliases$1,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},n)}const useIcon=n=>{const _=inject$1(IconSymbol);if(!_)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const E=unref(n);if(!E)return{component:VComponentIcon};let S=E;if(typeof S=="string"&&(S=S.trim(),S.startsWith("$")&&(S=_.aliases?.[S.slice(1)])),!S)throw new Error(`Could not find aliased icon "${E}"`);if(Array.isArray(S))return{component:VSvgIcon,icon:S};if(typeof S!="string")return{component:VComponentIcon,icon:S};const C=Object.keys(_.sets).find(B=>typeof S=="string"&&S.startsWith(`${B}:`)),T=C?S.slice(C.length+1):S;return{component:_.sets[C??_.defaultSet].component,icon:T}})}},en={badge:"Badge",open:"Open",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{ok:"OK",cancel:"Cancel",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function useToggleScope(n,_){let x;function E(){x=effectScope(),x.run(()=>_.length?_(()=>{x?.stop(),E()}):_())}watch(n,S=>{S&&!x?E():S||(x?.stop(),x=void 0)},{immediate:!0}),onScopeDispose(()=>{x?.stop()})}function useProxiedModel(n,_,x){let E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O=>O,S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:O=>O;const C=getCurrentInstance("useProxiedModel"),T=ref$1(n[_]!==void 0?n[_]:x),A=toKebabCase(_),I=computed(A!==_?()=>(n[_],!!((C.vnode.props?.hasOwnProperty(_)||C.vnode.props?.hasOwnProperty(A))&&(C.vnode.props?.hasOwnProperty(`onUpdate:${_}`)||C.vnode.props?.hasOwnProperty(`onUpdate:${A}`)))):()=>(n[_],!!(C.vnode.props?.hasOwnProperty(_)&&C.vnode.props?.hasOwnProperty(`onUpdate:${_}`))));useToggleScope(()=>!I.value,()=>{watch(()=>n[_],O=>{T.value=O})});const M=computed({get(){const O=n[_];return E(I.value?O:T.value)},set(O){const D=S(O),L=toRaw(I.value?n[_]:T.value);L===D||E(L)===O||(T.value=D,C?.emit(`update:${_}`,D))}});return Object.defineProperty(M,"externalValue",{get:()=>I.value?n[_]:T.value}),M}const LANG_PREFIX="$vuetify.",replace=(n,_)=>n.replace(/\{(\d+)\}/g,(x,E)=>String(_[+E])),createTranslateFunction=(n,_,x)=>function(E){for(var S=arguments.length,C=new Array(S>1?S-1:0),T=1;T<S;T++)C[T-1]=arguments[T];if(!E.startsWith(LANG_PREFIX))return replace(E,C);const A=E.replace(LANG_PREFIX,""),B=n.value&&x.value[n.value],I=_.value&&x.value[_.value];let M=getObjectValueByPath(B,A,null);return M||(`${E}${n.value}`,M=getObjectValueByPath(I,A,null)),M||(M=E),typeof M!="string"&&(M=E),replace(M,C)};function createNumberFunction(n,_){return(x,E)=>new Intl.NumberFormat([n.value,_.value],E).format(x)}function useProvided(n,_,x){const E=useProxiedModel(n,_,n[_]??x.value);return E.value=n[_]??x.value,watch(x,S=>{n[_]==null&&(E.value=x.value)}),E}function createProvideFunction(n){return _=>{const x=useProvided(_,"locale",n.current),E=useProvided(_,"fallback",n.fallback),S=useProvided(_,"messages",n.messages);return{name:"vuetify",current:x,fallback:E,messages:S,t:createTranslateFunction(x,E,S),n:createNumberFunction(x,E),provide:createProvideFunction({current:x,fallback:E,messages:S})}}}function createVuetifyAdapter(n){const _=shallowRef(n?.locale??"en"),x=shallowRef(n?.fallback??"en"),E=ref$1({en,...n?.messages});return{name:"vuetify",current:_,fallback:x,messages:E,t:createTranslateFunction(_,x,E),n:createNumberFunction(_,x),provide:createProvideFunction({current:_,fallback:x,messages:E})}}const LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(n){return n.name!=null}function createLocale(n){const _=n?.adapter&&isLocaleInstance(n?.adapter)?n?.adapter:createVuetifyAdapter(n),x=createRtl(_,n);return{..._,...x}}function useLocale(){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");return n}function provideLocale(n){const _=inject$1(LocaleSymbol);if(!_)throw new Error("[Vuetify] Could not find injected locale instance");const x=_.provide(n),E=provideRtl(x,_.rtl,n),S={...x,...E};return provide(LocaleSymbol,S),S}function createRtl(n,_){const x=ref$1(_?.rtl??defaultRtl),E=computed(()=>x.value[n.current.value]??!1);return{isRtl:E,rtl:x,rtlClasses:computed(()=>`v-locale--is-${E.value?"rtl":"ltr"}`)}}function provideRtl(n,_,x){const E=computed(()=>x.rtl??_.value[n.current.value]??!1);return{isRtl:E,rtl:_,rtlClasses:computed(()=>`v-locale--is-${E.value?"rtl":"ltr"}`)}}function useRtl(){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:n.isRtl,rtlClasses:n.rtlClasses}}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!n)return{...defaultThemeOptions,isDisabled:!0};const _={};for(const[x,E]of Object.entries(n.themes??{})){const S=E.dark||x==="dark"?defaultThemeOptions.themes?.dark:defaultThemeOptions.themes?.light;_[x]=mergeDeep(S,E)}return mergeDeep(defaultThemeOptions,{...n,themes:_})}function createTheme(n){const _=parseThemeOptions(n),x=ref$1(_.defaultTheme),E=ref$1(_.themes),S=computed(()=>{const M={};for(const[O,D]of Object.entries(E.value)){const L=M[O]={...D,colors:{...D.colors}};if(_.variations)for(const V of _.variations.colors){const U=L.colors[V];if(U)for(const q of["lighten","darken"]){const H=q==="lighten"?lighten:darken;for(const W of createRange(_.variations[q],1))L.colors[`${V}-${q}-${W}`]=RGBtoHex(H(parseColor(U),W))}}for(const V of Object.keys(L.colors)){if(/^on-[a-z]/.test(V)||L.colors[`on-${V}`])continue;const U=`on-${V}`,q=parseColor(L.colors[V]);L.colors[U]=getForeground(q)}}return M}),C=computed(()=>S.value[x.value]),T=computed(()=>{const M=[];C.value.dark&&createCssClass(M,":root",["color-scheme: dark"]),createCssClass(M,":root",genCssVariables(C.value));for(const[V,U]of Object.entries(S.value))createCssClass(M,`.v-theme--${V}`,[`color-scheme: ${U.dark?"dark":"normal"}`,...genCssVariables(U)]);const O=[],D=[],L=new Set(Object.values(S.value).flatMap(V=>Object.keys(V.colors)));for(const V of L)/^on-[a-z]/.test(V)?createCssClass(D,`.${V}`,[`color: rgb(var(--v-theme-${V})) !important`]):(createCssClass(O,`.bg-${V}`,[`--v-theme-overlay-multiplier: var(--v-theme-${V}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${V})) !important`,`color: rgb(var(--v-theme-on-${V})) !important`]),createCssClass(D,`.text-${V}`,[`color: rgb(var(--v-theme-${V})) !important`]),createCssClass(D,`.border-${V}`,[`--v-border-color: var(--v-theme-${V})`]));return M.push(...O,...D),M.map((V,U)=>U===0?V:`    ${V}`).join("")});function A(){return{style:[{children:T.value,id:"vuetify-theme-stylesheet",nonce:_.cspNonce||!1}]}}function B(M){if(_.isDisabled)return;const O=M._context.provides.usehead;if(O)if(O.push){const D=O.push(A);IN_BROWSER&&watch(T,()=>{D.patch(A)})}else IN_BROWSER?(O.addHeadObjs(computed(A)),watchEffect(()=>O.updateDOM())):O.addHeadObjs(A());else{let L=function(){if(typeof document<"u"&&!D){const V=document.createElement("style");V.type="text/css",V.id="vuetify-theme-stylesheet",_.cspNonce&&V.setAttribute("nonce",_.cspNonce),D=V,document.head.appendChild(D)}D&&(D.innerHTML=T.value)},D=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;IN_BROWSER?watch(T,L,{immediate:!0}):L()}}const I=computed(()=>_.isDisabled?void 0:`v-theme--${x.value}`);return{install:B,isDisabled:_.isDisabled,name:x,themes:E,current:C,computedThemes:S,themeClasses:I,styles:T,global:{name:x,current:C}}}function provideTheme(n){getCurrentInstance("provideTheme");const _=inject$1(ThemeSymbol,null);if(!_)throw new Error("Could not find Vuetify theme injection");const x=computed(()=>n.theme??_?.name.value),E=computed(()=>_.isDisabled?void 0:`v-theme--${x.value}`),S={..._,name:x,themeClasses:E};return provide(ThemeSymbol,S),S}function useTheme(){getCurrentInstance("useTheme");const n=inject$1(ThemeSymbol,null);if(!n)throw new Error("Could not find Vuetify theme injection");return n}function createCssClass(n,_,x){n.push(`${_} {
`,...x.map(E=>`  ${E};
`),`}
`)}function genCssVariables(n){const _=n.dark?2:1,x=n.dark?1:2,E=[];for(const[S,C]of Object.entries(n.colors)){const T=parseColor(C);E.push(`--v-theme-${S}: ${T.r},${T.g},${T.b}`),S.startsWith("on-")||E.push(`--v-theme-${S}-overlay-multiplier: ${getLuma(C)>.18?_:x}`)}for(const[S,C]of Object.entries(n.variables)){const T=typeof C=="string"&&C.startsWith("#")?parseColor(C):void 0,A=T?`${T.r}, ${T.g}, ${T.b}`:void 0;E.push(`--v-${S}: ${A??C}`)}return E}const firstDay={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function getWeekArray(n,_){const x=[];let E=[];const S=startOfMonth(n),C=endOfMonth(n),T=S.getDay()-firstDay[_.slice(-2).toUpperCase()],A=C.getDay()-firstDay[_.slice(-2).toUpperCase()];for(let B=0;B<T;B++){const I=new Date(S);I.setDate(I.getDate()-(T-B)),E.push(I)}for(let B=1;B<=C.getDate();B++){const I=new Date(n.getFullYear(),n.getMonth(),B);E.push(I),E.length===7&&(x.push(E),E=[])}for(let B=1;B<7-A;B++){const I=new Date(C);I.setDate(I.getDate()+B),E.push(I)}return x.push(E),x}function startOfMonth(n){return new Date(n.getFullYear(),n.getMonth(),1)}function endOfMonth(n){return new Date(n.getFullYear(),n.getMonth()+1,0)}function parseLocalDate(n){const _=n.split("-").map(Number);return new Date(_[0],_[1]-1,_[2])}const _YYYMMDD=/([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))/;function date(n){if(n==null)return new Date;if(n instanceof Date)return n;if(typeof n=="string"){let _;if(_YYYMMDD.test(n))return parseLocalDate(n);if(_=Date.parse(n),!isNaN(_))return new Date(_)}return null}const sundayJanuarySecond2000=new Date(2e3,0,2);function getWeekdays(n){const _=firstDay[n.slice(-2).toUpperCase()];return createRange(7).map(x=>{const E=new Date(sundayJanuarySecond2000);return E.setDate(sundayJanuarySecond2000.getDate()+_+x),new Intl.DateTimeFormat(n,{weekday:"narrow"}).format(E)})}function format$7(n,_,x){const E=new Date(n);let S={};switch(_){case"fullDateWithWeekday":S={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":S={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":S={};break;case"monthAndDate":S={month:"long",day:"numeric"};break;case"monthAndYear":S={month:"long",year:"numeric"};break;case"dayOfMonth":S={day:"numeric"};break;default:S={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(x,S).format(E)}function addDays(n,_){const x=new Date(n);return x.setDate(x.getDate()+_),x}function addMonths(n,_){const x=new Date(n);return x.setMonth(x.getMonth()+_),x}function getYear(n){return n.getFullYear()}function getMonth(n){return n.getMonth()}function startOfYear(n){return new Date(n.getFullYear(),0,1)}function endOfYear(n){return new Date(n.getFullYear(),11,31)}function isWithinRange(n,_){return isAfter(n,_[0])&&isBefore(n,_[1])}function isValid(n){const _=new Date(n);return _ instanceof Date&&!isNaN(_.getTime())}function isAfter(n,_){return n.getTime()>_.getTime()}function isBefore(n,_){return n.getTime()<_.getTime()}function isEqual(n,_){return n.getTime()===_.getTime()}function isSameDay(n,_){return n.getDate()===_.getDate()&&n.getMonth()===_.getMonth()&&n.getFullYear()===_.getFullYear()}function isSameMonth(n,_){return n.getMonth()===_.getMonth()&&n.getFullYear()===_.getFullYear()}function getDiff(n,_,x){const E=new Date(n),S=new Date(_);return x==="month"?E.getMonth()-S.getMonth()+(E.getFullYear()-S.getFullYear())*12:Math.floor((E.getTime()-S.getTime())/(1e3*60*60*24))}function setYear(n,_){const x=new Date(n);return x.setFullYear(_),x}class VuetifyDateAdapter{constructor(_){this.locale=_.locale}date(_){return date(_)}toJsDate(_){return _}addDays(_,x){return addDays(_,x)}addMonths(_,x){return addMonths(_,x)}getWeekArray(_){return getWeekArray(_,this.locale)}startOfMonth(_){return startOfMonth(_)}endOfMonth(_){return endOfMonth(_)}format(_,x){return format$7(_,x,this.locale)}isEqual(_,x){return isEqual(_,x)}isValid(_){return isValid(_)}isWithinRange(_,x){return isWithinRange(_,x)}isAfter(_,x){return isAfter(_,x)}isBefore(_,x){return!isAfter(_,x)&&!isEqual(_,x)}isSameDay(_,x){return isSameDay(_,x)}isSameMonth(_,x){return isSameMonth(_,x)}setYear(_,x){return setYear(_,x)}getDiff(_,x,E){return getDiff(_,x,E)}getWeekdays(){return getWeekdays(this.locale)}getYear(_){return getYear(_)}getMonth(_){return getMonth(_)}startOfYear(_){return startOfYear(_)}endOfYear(_){return endOfYear(_)}}const DateAdapterSymbol=Symbol.for("vuetify:date-adapter");function createDate(n){return mergeDeep({adapter:VuetifyDateAdapter,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"nn-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},n)}function useResizeObserver(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const x=ref$1(),E=ref$1();if(IN_BROWSER){const S=new ResizeObserver(C=>{n?.(C,S),C.length&&(_==="content"?E.value=C[0].contentRect:E.value=C[0].target.getBoundingClientRect())});onBeforeUnmount(()=>{S.disconnect()}),watch(x,(C,T)=>{T&&(S.unobserve(refElement(T)),E.value=void 0),C&&S.observe(refElement(C))},{flush:"post"})}return{resizeRef:x,contentRect:readonly$3(E)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const n=inject$1(VuetifyLayoutKey);if(!n)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:n.getLayoutItem,mainRect:n.mainRect,mainStyles:n.mainStyles}}function useLayoutItem(n){const _=inject$1(VuetifyLayoutKey);if(!_)throw new Error("[Vuetify] Could not find injected layout");const x=n.id??`layout-item-${getUid()}`,E=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:x});const S=shallowRef(!1);onDeactivated(()=>S.value=!0),onActivated(()=>S.value=!1);const{layoutItemStyles:C,layoutItemScrimStyles:T}=_.register(E,{...n,active:computed(()=>S.value?!1:n.active.value),id:x});return onBeforeUnmount(()=>_.unregister(x)),{layoutItemStyles:C,layoutRect:_.layoutRect,layoutItemScrimStyles:T}}const generateLayers=(n,_,x,E)=>{let S={top:0,left:0,right:0,bottom:0};const C=[{id:"",layer:{...S}}];for(const T of n){const A=_.get(T),B=x.get(T),I=E.get(T);if(!A||!B||!I)continue;const M={...S,[A.value]:parseInt(S[A.value],10)+(I.value?parseInt(B.value,10):0)};C.push({id:T,layer:M}),S=M}return C};function createLayout(n){const _=inject$1(VuetifyLayoutKey,null),x=computed(()=>_?_.rootZIndex.value-100:ROOT_ZINDEX),E=ref$1([]),S=reactive(new Map),C=reactive(new Map),T=reactive(new Map),A=reactive(new Map),B=reactive(new Map),{resizeRef:I,contentRect:M}=useResizeObserver(),O=computed(()=>{const ne=new Map,Y=n.overlaps??[];for(const fe of Y.filter(ge=>ge.includes(":"))){const[ge,$e]=fe.split(":");if(!E.value.includes(ge)||!E.value.includes($e))continue;const _e=S.get(ge),ae=S.get($e),X=C.get(ge),F=C.get($e);!_e||!ae||!X||!F||(ne.set($e,{position:_e.value,amount:parseInt(X.value,10)}),ne.set(ge,{position:ae.value,amount:-parseInt(F.value,10)}))}return ne}),D=computed(()=>{const ne=[...new Set([...T.values()].map(fe=>fe.value))].sort((fe,ge)=>fe-ge),Y=[];for(const fe of ne){const ge=E.value.filter($e=>T.get($e)?.value===fe);Y.push(...ge)}return generateLayers(Y,S,C,A)}),L=computed(()=>!Array.from(B.values()).some(ne=>ne.value)),V=computed(()=>D.value[D.value.length-1].layer),U=computed(()=>({"--v-layout-left":convertToUnit(V.value.left),"--v-layout-right":convertToUnit(V.value.right),"--v-layout-top":convertToUnit(V.value.top),"--v-layout-bottom":convertToUnit(V.value.bottom),...L.value?void 0:{transition:"none"}})),q=computed(()=>D.value.slice(1).map((ne,Y)=>{let{id:fe}=ne;const{layer:ge}=D.value[Y],$e=C.get(fe),_e=S.get(fe);return{id:fe,...ge,size:Number($e.value),position:_e.value}})),H=ne=>q.value.find(Y=>Y.id===ne),W=getCurrentInstance("createLayout"),Q=shallowRef(!1);onMounted(()=>{Q.value=!0}),provide(VuetifyLayoutKey,{register:(ne,Y)=>{let{id:fe,order:ge,position:$e,layoutSize:_e,elementSize:ae,active:X,disableTransitions:F,absolute:z}=Y;T.set(fe,ge),S.set(fe,$e),C.set(fe,_e),A.set(fe,X),F&&B.set(fe,F);const te=findChildrenWithProvide(VuetifyLayoutItemKey,W?.vnode).indexOf(ne);te>-1?E.value.splice(te,0,fe):E.value.push(fe);const se=computed(()=>q.value.findIndex(j=>j.id===fe)),oe=computed(()=>x.value+D.value.length*2-se.value*2),ie=computed(()=>{const j=$e.value==="left"||$e.value==="right",ee=$e.value==="right",pe=$e.value==="bottom",he={[$e.value]:0,zIndex:oe.value,transform:`translate${j?"X":"Y"}(${(X.value?0:-110)*(ee||pe?-1:1)}%)`,position:z.value||x.value!==ROOT_ZINDEX?"absolute":"fixed",...L.value?void 0:{transition:"none"}};if(!Q.value)return he;const Se=q.value[se.value];if(!Se)throw new Error(`[Vuetify] Could not find layout item "${fe}"`);const we=O.value.get(fe);return we&&(Se[we.position]+=we.amount),{...he,height:j?`calc(100% - ${Se.top}px - ${Se.bottom}px)`:ae.value?`${ae.value}px`:void 0,left:ee?void 0:`${Se.left}px`,right:ee?`${Se.right}px`:void 0,top:$e.value!=="bottom"?`${Se.top}px`:void 0,bottom:$e.value!=="top"?`${Se.bottom}px`:void 0,width:j?ae.value?`${ae.value}px`:void 0:`calc(100% - ${Se.left}px - ${Se.right}px)`}}),G=computed(()=>({zIndex:oe.value-1}));return{layoutItemStyles:ie,layoutItemScrimStyles:G,zIndex:oe}},unregister:ne=>{T.delete(ne),S.delete(ne),C.delete(ne),A.delete(ne),B.delete(ne),E.value=E.value.filter(Y=>Y!==ne)},mainRect:V,mainStyles:U,getLayoutItem:H,items:q,layoutRect:M,rootZIndex:x});const re=computed(()=>["v-layout",{"v-layout--full-height":n.fullHeight}]),ce=computed(()=>({zIndex:x.value,position:_?"relative":void 0,overflow:_?"hidden":void 0}));return{layoutClasses:re,layoutStyles:ce,getLayoutItem:H,items:q,layoutRect:M,layoutRef:I}}function createVuetify(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:_,...x}=n,E=mergeDeep(_,x),{aliases:S={},components:C={},directives:T={}}=E,A=createDefaults(E.defaults),B=createDisplay(E.display,E.ssr),I=createTheme(E.theme),M=createIcons(E.icons),O=createLocale(E.locale),D=createDate(E.date);return{install:V=>{for(const U in T)V.directive(U,T[U]);for(const U in C)V.component(U,C[U]);for(const U in S)V.component(U,defineComponent({...S[U],name:U,aliasName:S[U].name}));if(I.install(V),V.provide(DefaultsSymbol,A),V.provide(DisplaySymbol,B),V.provide(ThemeSymbol,I),V.provide(IconSymbol,M),V.provide(LocaleSymbol,O),V.provide(DateAdapterSymbol,D),IN_BROWSER&&E.ssr)if(V.$nuxt)V.$nuxt.hook("app:suspense:resolve",()=>{B.update()});else{const{mount:U}=V;V.mount=function(){const q=U(...arguments);return nextTick$2(()=>B.update()),V.mount=U,q}}getUid.reset(),V.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol),date:inject.call(this,DateAdapterSymbol)})}}})},defaults:A,display:B,theme:I,icons:M,locale:O,date:D}}const version$j="3.3.14";createVuetify.version=version$j;function inject(n){const _=this.$,x=_.parent?.provides??_.vnode.appContext?.provides;if(x&&n in x)return x[n]}const changerThmeVuetify=n=>{const _=useTheme();_.global.name.value=n},utilisertatThme=defineStore("thme",{state:()=>({couleur:"light",thmeImages:"",langue:[]}),persist:{afterRestore:n=>{changerThmeVuetify(n.store.$state.couleur)}}}),imagesThme={constr:{unDraw:__vitePreload(()=>import("./undraw_under_construction_46pa-cec7f27b.js"),[]),:__vitePreload(()=>import("./-641f188c.js"),[])},docs:{unDraw:__vitePreload(()=>import("./undraw_book_lover_mkck-e32c2275.js"),[]),:__vitePreload(()=>import("./-740a350b.js"),[])},recherche:{unDraw:__vitePreload(()=>import("./undraw_not_found_60pq-59c3c2c0.js"),[]),:__vitePreload(()=>import("./-746ffbd2.js"),[])},message:{:__vitePreload(()=>import("./_-e3fed16e.js"),[])},profilFemme:{unDraw:__vitePreload(()=>import("./undraw_female_avatar_w3jk-c66f7c8b.js"),[]),:__vitePreload(()=>import("./__-a2bb3cf1.js"),[])},profilHomme:{unDraw:__vitePreload(()=>import("./undraw_male_avatar_323b-8ce579c5.js"),[]),:__vitePreload(()=>import("./__-75875eca.js"),[])},automatisation:{unDraw:__vitePreload(()=>import("./undraw_real-time_sync_o57k-b672eef7.js"),[])},problme:{unDraw:__vitePreload(()=>import("./undraw_towing_6yy4-65da90ce.js"),[]),:__vitePreload(()=>import("./-4e766fef.js"),[])},favoris:{unDraw:__vitePreload(()=>import("./undraw_Appreciation_re_p6rl-fef35f9a.js"),[]),:__vitePreload(()=>import("./-1463ed20.js"),[])},conditions:{unDraw:__vitePreload(()=>import("./undraw_Terms_re_6ak4-36b4fa8e.js"),[]),:__vitePreload(()=>import("./_-2ff461a4.js"),[])},logoBD:{unDraw:__vitePreload(()=>import("./undraw_Projections_re_1mrh-8e69e11f.js"),[])},dispositif:{unDraw:__vitePreload(()=>import("./undraw_Mobile_re_q4nk-526e6b1e.js"),[])},vide:{unDraw:__vitePreload(()=>import("./undraw_adventure_map_hnin-89b60e41.js"),[]),:__vitePreload(()=>import("./-ab90b912.js"),[])}},utiliserImagesDco=function(n){return{obtImageDco:x=>{const E=utilisertatThme(),{thmeImages:S}=storeToRefs(E),C=ref$1(),T=computed(()=>n||S.value);return watchEffect(()=>{if(x==="profil"){const A=["profilFemme","profilHomme"];x=A[Math.floor(Math.random()*A.length)]}imagesThme[x]&&(imagesThme[x][T.value]||Object.values(imagesThme[x])[0]).then(A=>C.value=A?.default)}),C}}},VAvatar$1="",VIcon$1="";function useColor(n){return destructComputed(()=>{const _=[],x={};if(n.value.background)if(isCssColor(n.value.background)){if(x.backgroundColor=n.value.background,!n.value.text){const E=getForeground(x.backgroundColor);x.color=E,x.caretColor=E}}else _.push(`bg-${n.value.background}`);return n.value.text&&(isCssColor(n.value.text)?(x.color=n.value.text,x.caretColor=n.value.text):_.push(`text-${n.value.text}`)),{colorClasses:_,colorStyles:x}})}function useTextColor(n,_){const x=computed(()=>({text:isRef(n)?n.value:_?n[_]:null})),{colorClasses:E,colorStyles:S}=useColor(x);return{textColorClasses:E,textColorStyles:S}}function useBackgroundColor(n,_){const x=computed(()=>({background:isRef(n)?n.value:_?n[_]:null})),{colorClasses:E,colorStyles:S}=useColor(x);return{backgroundColorClasses:E,backgroundColorStyles:S}}const predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let x,E;return includes(predefinedSizes,n.size)?x=`${_}--size-${n.size}`:n.size&&(E={width:convertToUnit(n.size),height:convertToUnit(n.size)}),{sizeClasses:x,sizeStyles:E}})}const makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag"),makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"VIcon"),VIcon=genericComponent()({name:"VIcon",props:makeVIconProps(),setup(n,_){let{attrs:x,slots:E}=_;const S=ref$1(),{themeClasses:C}=provideTheme(n),{iconData:T}=useIcon(computed(()=>S.value||n.icon)),{sizeClasses:A}=useSize(n),{textColorClasses:B,textColorStyles:I}=useTextColor(toRef(n,"color"));return useRender(()=>{const M=E.default?.();return M&&(S.value=flattenFragments(M).filter(O=>O.type===Text&&O.children&&typeof O.children=="string")[0]?.children),createVNode(T.value.component,{tag:n.tag,icon:T.value.icon,class:["v-icon","notranslate",C.value,A.value,B.value,{"v-icon--clickable":!!x.onClick,"v-icon--start":n.start,"v-icon--end":n.end},n.class],style:[A.value?void 0:{fontSize:convertToUnit(n.size),height:convertToUnit(n.size),width:convertToUnit(n.size)},I.value,n.style],role:x.onClick?"button":void 0,"aria-hidden":!x.onClick},{default:()=>[M]})}),{}}}),VImg$1="",VResponsive$1="",makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(n){return{dimensionStyles:computed(()=>({height:convertToUnit(n.height),maxHeight:convertToUnit(n.maxHeight),maxWidth:convertToUnit(n.maxWidth),minHeight:convertToUnit(n.minHeight),minWidth:convertToUnit(n.minWidth),width:convertToUnit(n.width)}))}}function useAspectStyles(n){return{aspectStyles:computed(()=>{const _=Number(n.aspectRatio);return _?{paddingBottom:String(1/_*100)+"%"}:void 0})}}const makeVResponsiveProps=propsFactory({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...makeComponentProps(),...makeDimensionProps()},"VResponsive"),VResponsive=genericComponent()({name:"VResponsive",props:makeVResponsiveProps(),setup(n,_){let{slots:x}=_;const{aspectStyles:E}=useAspectStyles(n),{dimensionStyles:S}=useDimension(n);return useRender(()=>createVNode("div",{class:["v-responsive",{"v-responsive--inline":n.inline},n.class],style:[S.value,n.style]},[createVNode("div",{class:"v-responsive__sizer",style:E.value},null),x.additional?.(),x.default&&createVNode("div",{class:["v-responsive__content",n.contentClass]},[x.default()])])),{}}}),makeTransitionProps$1=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:n=>n!==!0}},"transition"),MaybeTransition=(n,_)=>{let{slots:x}=_;const{transition:E,disabled:S,...C}=n,{component:T=Transition,...A}=typeof E=="object"?E:{};return h$1(T,mergeProps(typeof E=="string"?{name:S?"":E}:A,C,{disabled:S}),x)};function mounted$2(n,_){if(!SUPPORTS_INTERSECTION)return;const x=_.modifiers||{},E=_.value,{handler:S,options:C}=typeof E=="object"?E:{handler:E,options:{}},T=new IntersectionObserver(function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1?arguments[1]:void 0;const I=n._observe?.[_.instance.$.uid];if(!I)return;const M=A.some(O=>O.isIntersecting);S&&(!x.quiet||I.init)&&(!x.once||M||I.init)&&S(M,A,B),M&&x.once?unmounted$2(n,_):I.init=!0},C);n._observe=Object(n._observe),n._observe[_.instance.$.uid]={init:!1,observer:T},T.observe(n)}function unmounted$2(n,_){const x=n._observe?.[_.instance.$.uid];x&&(x.observer.unobserve(n),delete n._observe[_.instance.$.uid])}const Intersect={mounted:mounted$2,unmounted:unmounted$2},Intersect$1=Intersect,makeVImgProps=propsFactory({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...makeVResponsiveProps(),...makeComponentProps(),...makeTransitionProps$1()},"VImg"),VImg=genericComponent()({name:"VImg",directives:{intersect:Intersect$1},props:makeVImgProps(),emits:{loadstart:n=>!0,load:n=>!0,error:n=>!0},setup(n,_){let{emit:x,slots:E}=_;const S=shallowRef(""),C=ref$1(),T=shallowRef(n.eager?"loading":"idle"),A=shallowRef(),B=shallowRef(),I=computed(()=>n.src&&typeof n.src=="object"?{src:n.src.src,srcset:n.srcset||n.src.srcset,lazySrc:n.lazySrc||n.src.lazySrc,aspect:Number(n.aspectRatio||n.src.aspect||0)}:{src:n.src,srcset:n.srcset,lazySrc:n.lazySrc,aspect:Number(n.aspectRatio||0)}),M=computed(()=>I.value.aspect||A.value/B.value||0);watch(()=>n.src,()=>{O(T.value!=="idle")}),watch(M,(fe,ge)=>{!fe&&ge&&C.value&&q(C.value)}),onBeforeMount(()=>O());function O(fe){if(!(n.eager&&fe)&&!(SUPPORTS_INTERSECTION&&!fe&&!n.eager)){if(T.value="loading",I.value.lazySrc){const ge=new Image;ge.src=I.value.lazySrc,q(ge,null)}I.value.src&&nextTick$2(()=>{if(x("loadstart",C.value?.currentSrc||I.value.src),C.value?.complete){if(C.value.naturalWidth||L(),T.value==="error")return;M.value||q(C.value,null),D()}else M.value||q(C.value),V()})}}function D(){V(),T.value="loaded",x("load",C.value?.currentSrc||I.value.src)}function L(){T.value="error",x("error",C.value?.currentSrc||I.value.src)}function V(){const fe=C.value;fe&&(S.value=fe.currentSrc||fe.src)}let U=-1;function q(fe){let ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const $e=()=>{clearTimeout(U);const{naturalHeight:_e,naturalWidth:ae}=fe;_e||ae?(A.value=ae,B.value=_e):!fe.complete&&T.value==="loading"&&ge!=null?U=window.setTimeout($e,ge):(fe.currentSrc.endsWith(".svg")||fe.currentSrc.startsWith("data:image/svg+xml"))&&(A.value=1,B.value=1)};$e()}const H=computed(()=>({"v-img__img--cover":n.cover,"v-img__img--contain":!n.cover})),W=()=>{if(!I.value.src||T.value==="idle")return null;const fe=createVNode("img",{class:["v-img__img",H.value],src:I.value.src,srcset:I.value.srcset,alt:n.alt,sizes:n.sizes,ref:C,onLoad:D,onError:L},null),ge=E.sources?.();return createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[withDirectives(ge?createVNode("picture",{class:"v-img__picture"},[ge,fe]):fe,[[vShow,T.value==="loaded"]])]})},Q=()=>createVNode(MaybeTransition,{transition:n.transition},{default:()=>[I.value.lazySrc&&T.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",H.value],src:I.value.lazySrc,alt:n.alt},null)]}),re=()=>E.placeholder?createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[(T.value==="loading"||T.value==="error"&&!E.error)&&createVNode("div",{class:"v-img__placeholder"},[E.placeholder()])]}):null,ce=()=>E.error?createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[T.value==="error"&&createVNode("div",{class:"v-img__error"},[E.error()])]}):null,ne=()=>n.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${n.gradient})`}},null):null,Y=shallowRef(!1);{const fe=watch(M,ge=>{ge&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{Y.value=!0})}),fe())})}return useRender(()=>{const[fe]=VResponsive.filterProps(n);return withDirectives(createVNode(VResponsive,mergeProps({class:["v-img",{"v-img--booting":!Y.value},n.class],style:[{width:convertToUnit(n.width==="auto"?A.value:n.width)},n.style]},fe,{aspectRatio:M.value,"aria-label":n.alt,role:n.alt?"img":void 0}),{additional:()=>createVNode(Fragment,null,[createVNode(W,null,null),createVNode(Q,null,null),createVNode(ne,null,null),createVNode(re,null,null),createVNode(ce,null,null)]),default:E.default}),[[resolveDirective("intersect"),{handler:O,options:n.options},null,{once:!0}]])}),{currentSrc:S,image:C,state:T,naturalWidth:A,naturalHeight:B}}}),allowedDensities=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:n=>allowedDensities.includes(n)}},"density");function useDensity(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${_}--density-${n.density}`)}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const E=isRef(n)?n.value:n.rounded,S=[];if(E===!0||E==="")S.push(`${_}--rounded`);else if(typeof E=="string"||E===0)for(const C of String(E).split(" "))S.push(`rounded-${C}`);return S})}}const allowedVariants$1=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(n,_){return createVNode(Fragment,null,[n&&createVNode("span",{key:"overlay",class:`${_}__overlay`},null),createVNode("span",{key:"underlay",class:`${_}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:n=>allowedVariants$1.includes(n)}},"variant");function useVariant(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const x=computed(()=>{const{variant:C}=unref(n);return`${_}--variant-${C}`}),{colorClasses:E,colorStyles:S}=useColor(computed(()=>{const{variant:C,color:T}=unref(n);return{[["elevated","flat"].includes(C)?"background":"text"]:T}}));return{colorClasses:E,colorStyles:S,variantClasses:x}}const makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAvatar"),VAvatar=genericComponent()({name:"VAvatar",props:makeVAvatarProps(),setup(n,_){let{slots:x}=_;const{themeClasses:E}=provideTheme(n),{colorClasses:S,colorStyles:C,variantClasses:T}=useVariant(n),{densityClasses:A}=useDensity(n),{roundedClasses:B}=useRounded(n),{sizeClasses:I,sizeStyles:M}=useSize(n);return useRender(()=>createVNode(n.tag,{class:["v-avatar",{"v-avatar--start":n.start,"v-avatar--end":n.end},E.value,S.value,A.value,B.value,I.value,T.value,n.class],style:[C.value,M.value,n.style]},{default:()=>[n.image?createVNode(VImg,{key:"image",src:n.image,alt:"",cover:!0},null):n.icon?createVNode(VIcon,{key:"icon",icon:n.icon},null):x.default?.(),genOverlays(!1,"v-avatar")]})),{}}}),_sfc_main$C=defineComponent$1({__name:"ImageProfil",props:{id:{}},setup(n){const _=n,x=inject$1("constl"),E=ref$1(),S=computed(()=>{if(E.value)return URL.createObjectURL(new Blob([E.value],{type:"image"}))});enregistrercoute(x?.profil.suivreImage({idCompte:_.id,f:A=>E.value=A}));const{obtImageDco:C}=utiliserImagesDco(),T=C("profil");return(A,B)=>(openBlock(),createBlock(VAvatar,mergeProps({image:S.value||unref(T)},_),null,16,["image"]))}}),obtIcneContact=({type:n})=>{switch(n){case"siteInternet":return"mdi-open-in-new";case"whatsapp":return"mdi-whatsapp";case"tlphone":return"mdi-phone";case"tlgramme":return"mdi-send";case"courriel":return"mdi-email-outline";default:return"mdi-account-outline"}},utiliserNomEtTypeDispositif=({idDispositif:n,idCompte:_})=>{const x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),C=ref$1();enregistrercoute(x?.suivreIdCompte({f:M=>C.value=M}));const T=ref$1();let A;watchEffect(async()=>{A&&await A();const M=(typeof _=="string"?_:_?.value)||C.value,O=typeof n=="string"?n:n.value;O&&(A=await enregistrercoute(x?.suivreNomDispositif({idCompte:M,idDispositif:O,f:D=>T.value=D})))});const B=computed(()=>{if(!T.value)return;const{nom:M,type:O}=T.value;return M||(O?S(nomGnriqueTypeDispositif(O)):void 0)}),I=computed(()=>T.value?.type);return{nomDispositif:B,typeDispositif:I}},nomGnriqueTypeDispositif=n=>{switch(n){case"tlphone":return"dispositifs.type.tlphone";case"navigateur":return"dispositifs.type.navigateur";case"tablette":return"dispositifs.type.tablette";case"ordinateur":return"dispositifs.type.ordinateur";case"serveur":return"dispositifs.type.serveur";default:return"dispositifs.type.autre"}},obtIcneDispositifDeType=n=>n==="tlphone"?"mdi-cellphone":n==="navigateur"?"mdi-application-outline":n==="tablette"?"mdi-tablet":n==="ordinateur"?"mdi-monitor":n==="serveur"?"mdi-server":"mdi-monitor-cellphone",utiliserIlYA=({vu:n,t:_,clefs:x={enLigne:"membres.vu.enLigne",Linstant:"membres.vu.Linstant",ilYAMinutes:"membres.vu.ilYAMinutes",ilYAHeures:"membres.vu.ilYAHeures",ilYAJours:"membres.vu.ilYAJours",ilYASemaines:"membres.vu.ilYASemaines",ilYAMois:"membres.vu.ilYAMois",ilYALongtemps:"membres.vu.ilYALongtemps"}})=>{const{formatterChiffre:E}=utiliserNumration(),S=ref$1(new Date().getTime());let C;onMounted(()=>{C=window.setInterval(()=>{S.value=new Date().getTime()},1e3)}),onUnmounted(()=>{C&&clearInterval(C)});const T=computed(()=>n?S.value-n:void 0),A=computed(()=>T.value===void 0?{ilYA:0,texte:x.enLigne}:T.value<1e3*60*2?{ilYA:0,texte:x.Linstant}:T.value<1e3*60*60?{ilYA:Math.floor(T.value/(1e3*60)),texte:x.ilYAMinutes}:T.value<1e3*60*60*24?{ilYA:Math.floor(T.value/(1e3*60*60)),texte:x.ilYAHeures}:T.value<1e3*60*60*24*7?{ilYA:Math.floor(T.value/(1e3*60*60*24)),texte:x.ilYAJours}:T.value<1e3*60*60*24*30?{ilYA:Math.floor(T.value/(1e3*60*60*24*7)),texte:x.ilYASemaines}:T.value<1e3*60*60*24*365.25?{ilYA:Math.floor(T.value/(1e3*60*60*24*30)),texte:x.ilYAMois}:{ilYA:0,texte:x.ilYALongtemps}),B=E(computed(()=>A.value.ilYA||0)),I=computed(()=>A.value.ilYA?_(A.value.texte,{n:B.value},A.value.ilYA):_(A.value.texte));return{ilYA:computed(()=>A.value.ilYA),texte:I,ilYAMs:T}},_sfc_main$B=defineComponent$1({__name:"TexteTronqu",props:{texte:{},longueurMax:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),S=computed(()=>[..._.texte].length>_.longueurMax?_.texte.slice(0,Math.max(_.longueurMax-3,3))+E("communs.troisPetitsPoints"):_.texte);return(C,T)=>(openBlock(),createElementBlock("span",null,toDisplayString$1(S.value),1))}}),VDivider$1="",makeVDividerProps=propsFactory({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...makeComponentProps(),...makeThemeProps()},"VDivider"),VDivider=genericComponent()({name:"VDivider",props:makeVDividerProps(),setup(n,_){let{attrs:x}=_;const{themeClasses:E}=provideTheme(n),{textColorClasses:S,textColorStyles:C}=useTextColor(toRef(n,"color")),T=computed(()=>{const A={};return n.length&&(A[n.vertical?"maxHeight":"maxWidth"]=convertToUnit(n.length)),n.thickness&&(A[n.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(n.thickness)),A});return useRender(()=>createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":n.inset,"v-divider--vertical":n.vertical},E.value,S.value,n.class],style:[T.value,C.value,n.style],"aria-orientation":!x.role||x.role==="separator"?n.vertical?"vertical":"horizontal":void 0,role:`${x.role||"separator"}`},null)),{}}}),VList$1="",makeTransitionProps=propsFactory({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function createCssTransition(n,_,x){return genericComponent()({name:n,props:makeTransitionProps({mode:x,origin:_}),setup(E,S){let{slots:C}=S;const T={onBeforeEnter(A){E.origin&&(A.style.transformOrigin=E.origin)},onLeave(A){if(E.leaveAbsolute){const{offsetTop:B,offsetLeft:I,offsetWidth:M,offsetHeight:O}=A;A._transitionInitialStyles={position:A.style.position,top:A.style.top,left:A.style.left,width:A.style.width,height:A.style.height},A.style.position="absolute",A.style.top=`${B}px`,A.style.left=`${I}px`,A.style.width=`${M}px`,A.style.height=`${O}px`}E.hideOnLeave&&A.style.setProperty("display","none","important")},onAfterLeave(A){if(E.leaveAbsolute&&A?._transitionInitialStyles){const{position:B,top:I,left:M,width:O,height:D}=A._transitionInitialStyles;delete A._transitionInitialStyles,A.style.position=B||"",A.style.top=I||"",A.style.left=M||"",A.style.width=O||"",A.style.height=D||""}}};return()=>{const A=E.group?TransitionGroup:Transition;return h$1(A,{name:E.disabled?"":n,css:!E.disabled,...E.group?void 0:{mode:E.mode},...E.disabled?{}:T},C.default)}}})}function createJavascriptTransition(n,_){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return genericComponent()({name:n,props:{mode:{type:String,default:x},disabled:Boolean},setup(E,S){let{slots:C}=S;return()=>h$1(Transition,{name:E.disabled?"":n,css:!E.disabled,...E.disabled?{}:_},C.default)}})}function ExpandTransitionGenerator(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const x=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",E=camelize(`offset-${x}`);return{onBeforeEnter(T){T._parent=T.parentNode,T._initialStyle={transition:T.style.transition,overflow:T.style.overflow,[x]:T.style[x]}},onEnter(T){const A=T._initialStyle;T.style.setProperty("transition","none","important"),T.style.overflow="hidden";const B=`${T[E]}px`;T.style[x]="0",T.offsetHeight,T.style.transition=A.transition,n&&T._parent&&T._parent.classList.add(n),requestAnimationFrame(()=>{T.style[x]=B})},onAfterEnter:C,onEnterCancelled:C,onLeave(T){T._initialStyle={transition:"",overflow:T.style.overflow,[x]:T.style[x]},T.style.overflow="hidden",T.style[x]=`${T[E]}px`,T.offsetHeight,requestAnimationFrame(()=>T.style[x]="0")},onAfterLeave:S,onLeaveCancelled:S};function S(T){n&&T._parent&&T._parent.classList.remove(n),C(T)}function C(T){const A=T._initialStyle[x];T.style.overflow=T._initialStyle.overflow,A!=null&&(T.style[x]=A),delete T._initialStyle}}const makeVDialogTransitionProps=propsFactory({target:Object},"v-dialog-transition"),VDialogTransition=genericComponent()({name:"VDialogTransition",props:makeVDialogTransitionProps(),setup(n,_){let{slots:x}=_;const E={onBeforeEnter(S){S.style.pointerEvents="none",S.style.visibility="hidden"},async onEnter(S,C){await new Promise(D=>requestAnimationFrame(D)),await new Promise(D=>requestAnimationFrame(D)),S.style.visibility="";const{x:T,y:A,sx:B,sy:I,speed:M}=getDimensions(n.target,S),O=animate(S,[{transform:`translate(${T}px, ${A}px) scale(${B}, ${I})`,opacity:0},{}],{duration:225*M,easing:deceleratedEasing});getChildren(S)?.forEach(D=>{animate(D,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*M,easing:standardEasing})}),O.finished.then(()=>C())},onAfterEnter(S){S.style.removeProperty("pointer-events")},onBeforeLeave(S){S.style.pointerEvents="none"},async onLeave(S,C){await new Promise(D=>requestAnimationFrame(D));const{x:T,y:A,sx:B,sy:I,speed:M}=getDimensions(n.target,S);animate(S,[{},{transform:`translate(${T}px, ${A}px) scale(${B}, ${I})`,opacity:0}],{duration:125*M,easing:acceleratedEasing}).finished.then(()=>C()),getChildren(S)?.forEach(D=>{animate(D,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*M,easing:standardEasing})})},onAfterLeave(S){S.style.removeProperty("pointer-events")}};return()=>n.target?createVNode(Transition,mergeProps({name:"dialog-transition"},E,{css:!1}),x):createVNode(Transition,{name:"dialog-transition"},x)}});function getChildren(n){const _=n.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return _&&[..._]}function getDimensions(n,_){const x=n.getBoundingClientRect(),E=nullifyTransforms(_),[S,C]=getComputedStyle(_).transformOrigin.split(" ").map(H=>parseFloat(H)),[T,A]=getComputedStyle(_).getPropertyValue("--v-overlay-anchor-origin").split(" ");let B=x.left+x.width/2;T==="left"||A==="left"?B-=x.width/2:(T==="right"||A==="right")&&(B+=x.width/2);let I=x.top+x.height/2;T==="top"||A==="top"?I-=x.height/2:(T==="bottom"||A==="bottom")&&(I+=x.height/2);const M=x.width/E.width,O=x.height/E.height,D=Math.max(1,M,O),L=M/D||0,V=O/D||0,U=E.width*E.height/(window.innerWidth*window.innerHeight),q=U>.12?Math.min(1.5,(U-.12)*10+1):1;return{x:B-(S+E.left),y:I-(C+E.top),sx:L,sy:V,speed:q}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");const VFadeTransition=createCssTransition("fade-transition"),VScaleTransition=createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");const VScrollYTransition=createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");const VSlideYTransition=createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator()),VExpandXTransition=createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0)),makeVDefaultsProviderProps=propsFactory({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),VDefaultsProvider=genericComponent(!1)({name:"VDefaultsProvider",props:makeVDefaultsProviderProps(),setup(n,_){let{slots:x}=_;const{defaults:E,disabled:S,reset:C,root:T,scoped:A}=toRefs(n);return provideDefaults(E,{reset:C,root:T,scoped:A,disabled:S}),()=>x.default?.()}}),ListKey=Symbol.for("vuetify:list");function createList(){const n=inject$1(ListKey,{hasPrepend:shallowRef(!1),updateHasPrepend:()=>null}),_={hasPrepend:shallowRef(!1),updateHasPrepend:x=>{x&&(_.hasPrepend.value=x)}};return provide(ListKey,_),n}function useList(){return inject$1(ListKey,null)}const singleOpenStrategy={open:n=>{let{id:_,value:x,opened:E,parents:S}=n;if(x){const C=new Set;C.add(_);let T=S.get(_);for(;T!=null;)C.add(T),T=S.get(T);return C}else return E.delete(_),E},select:()=>null},multipleOpenStrategy={open:n=>{let{id:_,value:x,opened:E,parents:S}=n;if(x){let C=S.get(_);for(E.add(_);C!=null&&C!==_;)E.add(C),C=S.get(C);return E}else E.delete(_);return E},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:n=>{let{id:_,value:x,opened:E,parents:S}=n;if(!x)return E;const C=[];let T=S.get(_);for(;T!=null;)C.push(T),T=S.get(T);return new Set(C)}},independentSelectStrategy=n=>{const _={select:x=>{let{id:E,value:S,selected:C}=x;if(E=toRaw(E),n&&!S){const T=Array.from(C.entries()).reduce((A,B)=>{let[I,M]=B;return M==="on"?[...A,I]:A},[]);if(T.length===1&&T[0]===E)return C}return C.set(E,S?"on":"off"),C},in:(x,E,S)=>{let C=new Map;for(const T of x||[])C=_.select({id:T,value:!0,selected:new Map(C),children:E,parents:S});return C},out:x=>{const E=[];for(const[S,C]of x.entries())C==="on"&&E.push(S);return E}};return _},independentSingleSelectStrategy=n=>{const _=independentSelectStrategy(n);return{select:E=>{let{selected:S,id:C,...T}=E;C=toRaw(C);const A=S.has(C)?new Map([[C,S.get(C)]]):new Map;return _.select({...T,id:C,selected:A})},in:(E,S,C)=>{let T=new Map;return E?.length&&(T=_.in(E.slice(0,1),S,C)),T},out:(E,S,C)=>_.out(E,S,C)}},leafSelectStrategy=n=>{const _=independentSelectStrategy(n);return{select:E=>{let{id:S,selected:C,children:T,...A}=E;return S=toRaw(S),T.has(S)?C:_.select({id:S,selected:C,children:T,...A})},in:_.in,out:_.out}},leafSingleSelectStrategy=n=>{const _=independentSingleSelectStrategy(n);return{select:E=>{let{id:S,selected:C,children:T,...A}=E;return S=toRaw(S),T.has(S)?C:_.select({id:S,selected:C,children:T,...A})},in:_.in,out:_.out}},classicSelectStrategy=n=>{const _={select:x=>{let{id:E,value:S,selected:C,children:T,parents:A}=x;E=toRaw(E);const B=new Map(C),I=[E];for(;I.length;){const O=I.shift();C.set(O,S?"on":"off"),T.has(O)&&I.push(...T.get(O))}let M=A.get(E);for(;M;){const O=T.get(M),D=O.every(V=>C.get(V)==="on"),L=O.every(V=>!C.has(V)||C.get(V)==="off");C.set(M,D?"on":L?"off":"indeterminate"),M=A.get(M)}return n&&!S&&Array.from(C.entries()).reduce((D,L)=>{let[V,U]=L;return U==="on"?[...D,V]:D},[]).length===0?B:C},in:(x,E,S)=>{let C=new Map;for(const T of x||[])C=_.select({id:T,value:!0,selected:new Map(C),children:E,parents:S});return C},out:(x,E)=>{const S=[];for(const[C,T]of x.entries())T==="on"&&!E.has(C)&&S.push(C);return S}};return _},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:shallowRef(),root:{register:()=>null,unregister:()=>null,parents:ref$1(new Map),children:ref$1(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ref$1(new Set),selected:ref$1(new Map),selectedValues:ref$1([])}},makeNestedProps=propsFactory({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=n=>{let _=!1;const x=ref$1(new Map),E=ref$1(new Map),S=useProxiedModel(n,"opened",n.opened,O=>new Set(O),O=>[...O.values()]),C=computed(()=>{if(typeof n.selectStrategy=="object")return n.selectStrategy;switch(n.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(n.mandatory);case"leaf":return leafSelectStrategy(n.mandatory);case"independent":return independentSelectStrategy(n.mandatory);case"single-independent":return independentSingleSelectStrategy(n.mandatory);case"classic":default:return classicSelectStrategy(n.mandatory)}}),T=computed(()=>{if(typeof n.openStrategy=="object")return n.openStrategy;switch(n.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),A=useProxiedModel(n,"selected",n.selected,O=>C.value.in(O,x.value,E.value),O=>C.value.out(O,x.value,E.value));onBeforeUnmount(()=>{_=!0});function B(O){const D=[];let L=O;for(;L!=null;)D.unshift(L),L=E.value.get(L);return D}const I=getCurrentInstance("nested"),M={id:shallowRef(),root:{opened:S,selected:A,selectedValues:computed(()=>{const O=[];for(const[D,L]of A.value.entries())L==="on"&&O.push(D);return O}),register:(O,D,L)=>{D&&O!==D&&E.value.set(O,D),L&&x.value.set(O,[]),D!=null&&x.value.set(D,[...x.value.get(D)||[],O])},unregister:O=>{if(_)return;x.value.delete(O);const D=E.value.get(O);if(D){const L=x.value.get(D)??[];x.value.set(D,L.filter(V=>V!==O))}E.value.delete(O),S.value.delete(O)},open:(O,D,L)=>{I.emit("click:open",{id:O,value:D,path:B(O),event:L});const V=T.value.open({id:O,value:D,opened:new Set(S.value),children:x.value,parents:E.value,event:L});V&&(S.value=V)},openOnSelect:(O,D,L)=>{const V=T.value.select({id:O,value:D,selected:new Map(A.value),opened:new Set(S.value),children:x.value,parents:E.value,event:L});V&&(S.value=V)},select:(O,D,L)=>{I.emit("click:select",{id:O,value:D,path:B(O),event:L});const V=C.value.select({id:O,value:D,selected:new Map(A.value),children:x.value,parents:E.value,event:L});V&&(A.value=V),M.root.openOnSelect(O,D,L)},children:x,parents:E}};return provide(VNestedSymbol,M),M.root},useNestedItem=(n,_)=>{const x=inject$1(VNestedSymbol,emptyNested),E=Symbol(getUid()),S=computed(()=>n.value!==void 0?n.value:E),C={...x,id:S,open:(T,A)=>x.root.open(S.value,T,A),openOnSelect:(T,A)=>x.root.openOnSelect(S.value,T,A),isOpen:computed(()=>x.root.opened.value.has(S.value)),parent:computed(()=>x.root.parents.value.get(S.value)),select:(T,A)=>x.root.select(S.value,T,A),isSelected:computed(()=>x.root.selected.value.get(toRaw(S.value))==="on"),isIndeterminate:computed(()=>x.root.selected.value.get(S.value)==="indeterminate"),isLeaf:computed(()=>!x.root.children.value.get(S.value)),isGroupActivator:x.isGroupActivator};return!x.isGroupActivator&&x.root.register(S.value,x.id.value,_),onBeforeUnmount(()=>{!x.isGroupActivator&&x.root.unregister(S.value)}),_&&provide(VNestedSymbol,C),C},useNestedGroupActivator=()=>{const n=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...n,isGroupActivator:!0})};function useSsrBoot(){const n=shallowRef(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{n.value=!0})}),{ssrBootStyles:computed(()=>n.value?void 0:{transition:"none !important"}),isBooted:readonly$3(n)}}const VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(n,_){let{slots:x}=_;return useNestedGroupActivator(),()=>x.default?.()}}),makeVListGroupProps=propsFactory({activeColor:String,baseColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,title:String,value:null,...makeComponentProps(),...makeTagProps()},"VListGroup"),VListGroup=genericComponent()({name:"VListGroup",props:makeVListGroupProps(),setup(n,_){let{slots:x}=_;const{isOpen:E,open:S,id:C}=useNestedItem(toRef(n,"value"),!0),T=computed(()=>`v-list-group--id-${String(C.value)}`),A=useList(),{isBooted:B}=useSsrBoot();function I(L){S(!E.value,L)}const M=computed(()=>({onClick:I,class:"v-list-group__header",id:T.value})),O=computed(()=>E.value?n.collapseIcon:n.expandIcon),D=computed(()=>({VListItem:{active:E.value,activeColor:n.activeColor,baseColor:n.baseColor,color:n.color,prependIcon:n.prependIcon||n.subgroup&&O.value,appendIcon:n.appendIcon||!n.subgroup&&O.value,title:n.title,value:n.value}}));return useRender(()=>createVNode(n.tag,{class:["v-list-group",{"v-list-group--prepend":A?.hasPrepend.value,"v-list-group--fluid":n.fluid,"v-list-group--subgroup":n.subgroup,"v-list-group--open":E.value},n.class],style:n.style},{default:()=>[x.activator&&createVNode(VDefaultsProvider,{defaults:D.value},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[x.activator({props:M.value,isOpen:E.value})]})]}),createVNode(MaybeTransition,{transition:{component:VExpandTransition},disabled:!B.value},{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":T.value},[x.default?.()]),[[vShow,E.value]])]})]})),{}}}),VListItem$1="",VListItemSubtitle=createSimpleFunctional("v-list-item-subtitle"),VListItemTitle=createSimpleFunctional("v-list-item-title"),makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const E=isRef(n)?n.value:n.border,S=[];if(E===!0||E==="")S.push(`${_}--border`);else if(typeof E=="string"||E===0)for(const C of String(E).split(" "))S.push(`border-${C}`);return S})}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(n){const _=parseInt(n);return!isNaN(_)&&_>=0&&_<=24}}},"elevation");function useElevation(n){return{elevationClasses:computed(()=>{const x=isRef(n)?n.value:n.elevation,E=[];return x==null||E.push(`elevation-${x}`),E})}}function useRouter(){return getCurrentInstance("useRouter")?.proxy?.$router}function useLink$1(n,_){const x=resolveDynamicComponent("RouterLink"),E=computed(()=>!!(n.href||n.to)),S=computed(()=>E?.value||hasEvent(_,"click")||hasEvent(n,"click"));if(typeof x=="string")return{isLink:E,isClickable:S,href:toRef(n,"href")};const C=n.to?x.useLink(n):void 0;return{isLink:E,isClickable:S,route:C?.route,navigate:C?.navigate,isActive:C&&computed(()=>n.exact?C.isExactActive?.value:C.isActive?.value),href:computed(()=>n.to?C?.route.value.href:n.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let inTransition=!1;function useBackButton(n,_){let x=!1,E,S;IN_BROWSER&&(nextTick$2(()=>{window.addEventListener("popstate",C),E=n?.beforeEach((T,A,B)=>{inTransition?x?_(B):B():setTimeout(()=>x?_(B):B()),inTransition=!0}),S=n?.afterEach(()=>{inTransition=!1})}),onScopeDispose(()=>{window.removeEventListener("popstate",C),E?.(),S?.()}));function C(T){T.state?.replaced||(x=!0,setTimeout(()=>x=!1))}}const VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform(n,_){n.style.transform=_,n.style.webkitTransform=_}function isTouchEvent(n){return n.constructor.name==="TouchEvent"}function isKeyboardEvent(n){return n.constructor.name==="KeyboardEvent"}const calculate=function(n,_){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=0,S=0;if(!isKeyboardEvent(n)){const O=_.getBoundingClientRect(),D=isTouchEvent(n)?n.touches[n.touches.length-1]:n;E=D.clientX-O.left,S=D.clientY-O.top}let C=0,T=.3;_._ripple?.circle?(T=.15,C=_.clientWidth/2,C=x.center?C:C+Math.sqrt((E-C)**2+(S-C)**2)/4):C=Math.sqrt(_.clientWidth**2+_.clientHeight**2)/2;const A=`${(_.clientWidth-C*2)/2}px`,B=`${(_.clientHeight-C*2)/2}px`,I=x.center?A:`${E-C}px`,M=x.center?B:`${S-C}px`;return{radius:C,scale:T,x:I,y:M,centerX:A,centerY:B}},ripples={show(n,_){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!_?._ripple?.enabled)return;const E=document.createElement("span"),S=document.createElement("span");E.appendChild(S),E.className="v-ripple__container",x.class&&(E.className+=` ${x.class}`);const{radius:C,scale:T,x:A,y:B,centerX:I,centerY:M}=calculate(n,_,x),O=`${C*2}px`;S.className="v-ripple__animation",S.style.width=O,S.style.height=O,_.appendChild(E);const D=window.getComputedStyle(_);D&&D.position==="static"&&(_.style.position="relative",_.dataset.previousPosition="static"),S.classList.add("v-ripple__animation--enter"),S.classList.add("v-ripple__animation--visible"),transform(S,`translate(${A}, ${B}) scale3d(${T},${T},${T})`),S.dataset.activated=String(performance.now()),setTimeout(()=>{S.classList.remove("v-ripple__animation--enter"),S.classList.add("v-ripple__animation--in"),transform(S,`translate(${I}, ${M}) scale3d(1,1,1)`)},0)},hide(n){if(!n?._ripple?.enabled)return;const _=n.getElementsByClassName("v-ripple__animation");if(_.length===0)return;const x=_[_.length-1];if(x.dataset.isHiding)return;x.dataset.isHiding="true";const E=performance.now()-Number(x.dataset.activated),S=Math.max(250-E,0);setTimeout(()=>{x.classList.remove("v-ripple__animation--in"),x.classList.add("v-ripple__animation--out"),setTimeout(()=>{n.getElementsByClassName("v-ripple__animation").length===1&&n.dataset.previousPosition&&(n.style.position=n.dataset.previousPosition,delete n.dataset.previousPosition),x.parentNode?.parentNode===n&&n.removeChild(x.parentNode)},300)},S)}};function isRippleEnabled(n){return typeof n>"u"||!!n}function rippleShow(n){const _={},x=n.currentTarget;if(!(!x?._ripple||x._ripple.touched||n[stopSymbol])){if(n[stopSymbol]=!0,isTouchEvent(n))x._ripple.touched=!0,x._ripple.isTouch=!0;else if(x._ripple.isTouch)return;if(_.center=x._ripple.centered||isKeyboardEvent(n),x._ripple.class&&(_.class=x._ripple.class),isTouchEvent(n)){if(x._ripple.showTimerCommit)return;x._ripple.showTimerCommit=()=>{ripples.show(n,x,_)},x._ripple.showTimer=window.setTimeout(()=>{x?._ripple?.showTimerCommit&&(x._ripple.showTimerCommit(),x._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(n,x,_)}}function rippleStop(n){n[stopSymbol]=!0}function rippleHide(n){const _=n.currentTarget;if(_?._ripple){if(window.clearTimeout(_._ripple.showTimer),n.type==="touchend"&&_._ripple.showTimerCommit){_._ripple.showTimerCommit(),_._ripple.showTimerCommit=null,_._ripple.showTimer=window.setTimeout(()=>{rippleHide(n)});return}window.setTimeout(()=>{_._ripple&&(_._ripple.touched=!1)}),ripples.hide(_)}}function rippleCancelShow(n){const _=n.currentTarget;_?._ripple&&(_._ripple.showTimerCommit&&(_._ripple.showTimerCommit=null),window.clearTimeout(_._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(n){!keyboardRipple&&(n.keyCode===keyCodes.enter||n.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(n))}function keyboardRippleHide(n){keyboardRipple=!1,rippleHide(n)}function focusRippleHide(n){keyboardRipple&&(keyboardRipple=!1,rippleHide(n))}function updateRipple(n,_,x){const{value:E,modifiers:S}=_,C=isRippleEnabled(E);if(C||ripples.hide(n),n._ripple=n._ripple??{},n._ripple.enabled=C,n._ripple.centered=S.center,n._ripple.circle=S.circle,isObject$3(E)&&E.class&&(n._ripple.class=E.class),C&&!x){if(S.stop){n.addEventListener("touchstart",rippleStop,{passive:!0}),n.addEventListener("mousedown",rippleStop);return}n.addEventListener("touchstart",rippleShow,{passive:!0}),n.addEventListener("touchend",rippleHide,{passive:!0}),n.addEventListener("touchmove",rippleCancelShow,{passive:!0}),n.addEventListener("touchcancel",rippleHide),n.addEventListener("mousedown",rippleShow),n.addEventListener("mouseup",rippleHide),n.addEventListener("mouseleave",rippleHide),n.addEventListener("keydown",keyboardRippleShow),n.addEventListener("keyup",keyboardRippleHide),n.addEventListener("blur",focusRippleHide),n.addEventListener("dragstart",rippleHide,{passive:!0})}else!C&&x&&removeListeners(n)}function removeListeners(n){n.removeEventListener("mousedown",rippleShow),n.removeEventListener("touchstart",rippleShow),n.removeEventListener("touchend",rippleHide),n.removeEventListener("touchmove",rippleCancelShow),n.removeEventListener("touchcancel",rippleHide),n.removeEventListener("mouseup",rippleHide),n.removeEventListener("mouseleave",rippleHide),n.removeEventListener("keydown",keyboardRippleShow),n.removeEventListener("keyup",keyboardRippleHide),n.removeEventListener("dragstart",rippleHide),n.removeEventListener("blur",focusRippleHide)}function mounted$1(n,_){updateRipple(n,_,!1)}function unmounted$1(n){delete n._ripple,removeListeners(n)}function updated(n,_){if(_.value===_.oldValue)return;const x=isRippleEnabled(_.oldValue);updateRipple(n,_,x)}const Ripple={mounted:mounted$1,unmounted:unmounted$1,updated},makeVListItemProps=propsFactory({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VListItem"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:makeVListItemProps(),emits:{click:n=>!0},setup(n,_){let{attrs:x,slots:E,emit:S}=_;const C=useLink$1(n,x),T=computed(()=>n.value===void 0?C.href.value:n.value),{select:A,isSelected:B,isIndeterminate:I,isGroupActivator:M,root:O,parent:D,openOnSelect:L}=useNestedItem(T,!1),V=useList(),U=computed(()=>n.active!==!1&&(n.active||C.isActive?.value||B.value)),q=computed(()=>n.link!==!1&&C.isLink.value),H=computed(()=>!n.disabled&&n.link!==!1&&(n.link||C.isClickable.value||n.value!=null&&!!V)),W=computed(()=>n.rounded||n.nav),Q=computed(()=>n.color??n.activeColor),re=computed(()=>({color:U.value?Q.value??n.baseColor:n.baseColor,variant:n.variant}));watch(()=>C.isActive?.value,se=>{se&&D.value!=null&&O.open(D.value,!0),se&&L(se)},{immediate:!0});const{themeClasses:ce}=provideTheme(n),{borderClasses:ne}=useBorder(n),{colorClasses:Y,colorStyles:fe,variantClasses:ge}=useVariant(re),{densityClasses:$e}=useDensity(n),{dimensionStyles:_e}=useDimension(n),{elevationClasses:ae}=useElevation(n),{roundedClasses:X}=useRounded(W),F=computed(()=>n.lines?`v-list-item--${n.lines}-line`:void 0),z=computed(()=>({isActive:U.value,select:A,isSelected:B.value,isIndeterminate:I.value}));function J(se){S("click",se),!(M||!H.value)&&(C.navigate?.(se),n.value!=null&&A(!B.value,se))}function te(se){(se.key==="Enter"||se.key===" ")&&(se.preventDefault(),J(se))}return useRender(()=>{const se=q.value?"a":n.tag,oe=E.title||n.title,ie=E.subtitle||n.subtitle,G=!!(n.appendAvatar||n.appendIcon),j=!!(G||E.append),ee=!!(n.prependAvatar||n.prependIcon),pe=!!(ee||E.prepend);return V?.updateHasPrepend(pe),n.activeColor&&deprecate("active-color",["color","base-color"]),withDirectives(createVNode(se,{class:["v-list-item",{"v-list-item--active":U.value,"v-list-item--disabled":n.disabled,"v-list-item--link":H.value,"v-list-item--nav":n.nav,"v-list-item--prepend":!pe&&V?.hasPrepend.value,[`${n.activeClass}`]:n.activeClass&&U.value},ce.value,ne.value,Y.value,$e.value,ae.value,F.value,X.value,ge.value,n.class],style:[fe.value,_e.value,n.style],href:C.href.value,tabindex:H.value?V?-2:0:void 0,onClick:J,onKeydown:H.value&&!q.value&&te},{default:()=>[genOverlays(H.value||U.value,"v-list-item"),pe&&createVNode("div",{key:"prepend",class:"v-list-item__prepend"},[E.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{density:n.density,image:n.prependAvatar},VIcon:{density:n.density,icon:n.prependIcon},VListItemAction:{start:!0}}},{default:()=>[E.prepend?.(z.value)]}):createVNode(Fragment,null,[n.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",density:n.density,image:n.prependAvatar},null),n.prependIcon&&createVNode(VIcon,{key:"prepend-icon",density:n.density,icon:n.prependIcon},null)]),createVNode("div",{class:"v-list-item__spacer"},null)]),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[oe&&createVNode(VListItemTitle,{key:"title"},{default:()=>[E.title?.({title:n.title})??n.title]}),ie&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[E.subtitle?.({subtitle:n.subtitle})??n.subtitle]}),E.default?.(z.value)]),j&&createVNode("div",{key:"append",class:"v-list-item__append"},[E.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!G,defaults:{VAvatar:{density:n.density,image:n.appendAvatar},VIcon:{density:n.density,icon:n.appendIcon},VListItemAction:{end:!0}}},{default:()=>[E.append?.(z.value)]}):createVNode(Fragment,null,[n.appendIcon&&createVNode(VIcon,{key:"append-icon",density:n.density,icon:n.appendIcon},null),n.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",density:n.density,image:n.appendAvatar},null)]),createVNode("div",{class:"v-list-item__spacer"},null)])]}),[[resolveDirective("ripple"),H.value&&n.ripple]])}),{}}}),makeVListSubheaderProps=propsFactory({color:String,inset:Boolean,sticky:Boolean,title:String,...makeComponentProps(),...makeTagProps()},"VListSubheader"),VListSubheader=genericComponent()({name:"VListSubheader",props:makeVListSubheaderProps(),setup(n,_){let{slots:x}=_;const{textColorClasses:E,textColorStyles:S}=useTextColor(toRef(n,"color"));return useRender(()=>{const C=!!(x.default||n.title);return createVNode(n.tag,{class:["v-list-subheader",{"v-list-subheader--inset":n.inset,"v-list-subheader--sticky":n.sticky},E.value,n.class],style:[{textColorStyles:S},n.style]},{default:()=>[C&&createVNode("div",{class:"v-list-subheader__text"},[x.default?.()??n.title])]})}),{}}}),makeVListChildrenProps=propsFactory({items:Array},"VListChildren"),VListChildren=genericComponent()({name:"VListChildren",props:makeVListChildrenProps(),setup(n,_){let{slots:x}=_;return createList(),()=>x.default?.()??n.items?.map(E=>{let{children:S,props:C,type:T,raw:A}=E;if(T==="divider")return x.divider?.({props:C})??createVNode(VDivider,C,null);if(T==="subheader")return x.subheader?.({props:C})??createVNode(VListSubheader,C,null);const B={subtitle:x.subtitle?O=>x.subtitle?.({...O,item:A}):void 0,prepend:x.prepend?O=>x.prepend?.({...O,item:A}):void 0,append:x.append?O=>x.append?.({...O,item:A}):void 0,title:x.title?O=>x.title?.({...O,item:A}):void 0},[I,M]=VListGroup.filterProps(C);return S?createVNode(VListGroup,mergeProps({value:C?.value},I),{activator:O=>{let{props:D}=O;return x.header?x.header({props:{...C,...D}}):createVNode(VListItem,mergeProps(C,D),B)},default:()=>createVNode(VListChildren,{items:S},x)}):x.item?x.item({props:C}):createVNode(VListItem,C,B)})}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"list-items");function transformItem$1(n,_){const x=getPropertyFromItem(_,n.itemTitle,_),E=n.returnObject?_:getPropertyFromItem(_,n.itemValue,x),S=getPropertyFromItem(_,n.itemChildren),C=n.itemProps===!0?typeof _=="object"&&_!=null&&!Array.isArray(_)?"children"in _?pick$1(_,["children"])[1]:_:void 0:getPropertyFromItem(_,n.itemProps),T={title:x,value:E,...C};return{title:String(T.title??""),value:T.value,props:T,children:Array.isArray(S)?transformItems$1(n,S):void 0,raw:_}}function transformItems$1(n,_){const x=[];for(const E of _)x.push(transformItem$1(n,E));return x}function useItems(n){const _=computed(()=>transformItems$1(n,n.items));return useTransformItems(_,x=>transformItem$1(n,x))}function useTransformItems(n,_){function x(S){return S.filter(C=>C!==null||n.value.some(T=>T.value===null)).map(C=>n.value.find(A=>deepEqual$3(C,A.value))??_(C))}function E(S){return S.map(C=>{let{value:T}=C;return T})}return{items:n,transformIn:x,transformOut:E}}function isPrimitive$1(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function transformItem(n,_){const x=getPropertyFromItem(_,n.itemType,"item"),E=isPrimitive$1(_)?_:getPropertyFromItem(_,n.itemTitle),S=getPropertyFromItem(_,n.itemValue,void 0),C=getPropertyFromItem(_,n.itemChildren),T=n.itemProps===!0?pick$1(_,["children"])[1]:getPropertyFromItem(_,n.itemProps),A={title:E,value:S,...T};return{type:x,title:A.title,value:A.value,props:A,children:x==="item"&&C?transformItems(n,C):void 0,raw:_}}function transformItems(n,_){const x=[];for(const E of _)x.push(transformItem(n,E));return x}function useListItems(n){return{items:computed(()=>transformItems(n,n.items))}}const makeVListProps=propsFactory({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VList"),VList=genericComponent()({name:"VList",props:makeVListProps(),emits:{"update:selected":n=>!0,"update:opened":n=>!0,"click:open":n=>!0,"click:select":n=>!0},setup(n,_){let{slots:x}=_;const{items:E}=useListItems(n),{themeClasses:S}=provideTheme(n),{backgroundColorClasses:C,backgroundColorStyles:T}=useBackgroundColor(toRef(n,"bgColor")),{borderClasses:A}=useBorder(n),{densityClasses:B}=useDensity(n),{dimensionStyles:I}=useDimension(n),{elevationClasses:M}=useElevation(n),{roundedClasses:O}=useRounded(n),{open:D,select:L}=useNested(n),V=computed(()=>n.lines?`v-list--${n.lines}-line`:void 0),U=toRef(n,"activeColor"),q=toRef(n,"baseColor"),H=toRef(n,"color");createList(),provideDefaults({VListGroup:{activeColor:U,baseColor:q,color:H},VListItem:{activeClass:toRef(n,"activeClass"),activeColor:U,baseColor:q,color:H,density:toRef(n,"density"),disabled:toRef(n,"disabled"),lines:toRef(n,"lines"),nav:toRef(n,"nav"),variant:toRef(n,"variant")}});const W=shallowRef(!1),Q=ref$1();function re(ge){W.value=!0}function ce(ge){W.value=!1}function ne(ge){!W.value&&!(ge.relatedTarget&&Q.value?.contains(ge.relatedTarget))&&fe()}function Y(ge){if(Q.value){if(ge.key==="ArrowDown")fe("next");else if(ge.key==="ArrowUp")fe("prev");else if(ge.key==="Home")fe("first");else if(ge.key==="End")fe("last");else return;ge.preventDefault()}}function fe(ge){if(Q.value)return focusChild(Q.value,ge)}return useRender(()=>createVNode(n.tag,{ref:Q,class:["v-list",{"v-list--disabled":n.disabled,"v-list--nav":n.nav},S.value,C.value,A.value,B.value,M.value,V.value,O.value,n.class],style:[T.value,I.value,n.style],tabindex:n.disabled||W.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:re,onFocusout:ce,onFocus:ne,onKeydown:Y},{default:()=>[createVNode(VListChildren,{items:E.value},x)]})),{open:D,select:L,focus:fe}}}),VNavigationDrawer$1="";function useSticky(n){let{rootEl:_,isSticky:x,layoutItemStyles:E}=n;const S=shallowRef(!1),C=shallowRef(0),T=computed(()=>{const I=typeof S.value=="boolean"?"top":S.value;return[x.value?{top:"auto",bottom:"auto",height:void 0}:void 0,S.value?{[I]:convertToUnit(C.value)}:{top:E.value.top}]});onMounted(()=>{watch(x,I=>{I?window.addEventListener("scroll",B,{passive:!0}):window.removeEventListener("scroll",B)},{immediate:!0})}),onBeforeUnmount(()=>{window.removeEventListener("scroll",B)});let A=0;function B(){const I=A>window.scrollY?"up":"down",M=_.value.getBoundingClientRect(),O=parseFloat(E.value.top??0),D=window.scrollY-Math.max(0,C.value-O),L=M.height+Math.max(C.value,O)-window.scrollY-window.innerHeight,V=parseFloat(getComputedStyle(_.value).getPropertyValue("--v-body-scroll-y"))||0;M.height<window.innerHeight-O?(S.value="top",C.value=O):I==="up"&&S.value==="bottom"||I==="down"&&S.value==="top"?(C.value=window.scrollY+M.top-V,S.value=!0):I==="down"&&L<=0?(C.value=0,S.value="bottom"):I==="up"&&D<=0&&(V?S.value!=="top"&&(C.value=-D+V+O,S.value="top"):(C.value=M.top+D,S.value="top")),A=window.scrollY}return{isStuck:S,stickyStyles:T}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(n){const _=1.41421356237;return(n<0?-1:1)*Math.sqrt(Math.abs(n))*_}function calculateImpulseVelocity(n){if(n.length<2)return 0;if(n.length===2)return n[1].t===n[0].t?0:(n[1].d-n[0].d)/(n[1].t-n[0].t);let _=0;for(let x=n.length-1;x>0;x--){if(n[x].t===n[x-1].t)continue;const E=kineticEnergyToVelocity(_),S=(n[x].d-n[x-1].d)/(n[x].t-n[x-1].t);_+=(S-E)*Math.abs(S),x===n.length-1&&(_*=.5)}return kineticEnergyToVelocity(_)*1e3}function useVelocity(){const n={};function _(S){Array.from(S.changedTouches).forEach(C=>{(n[C.identifier]??(n[C.identifier]=new CircularBuffer(HISTORY))).push([S.timeStamp,C])})}function x(S){Array.from(S.changedTouches).forEach(C=>{delete n[C.identifier]})}function E(S){const C=n[S]?.values().reverse();if(!C)throw new Error(`No samples for touch id ${S}`);const T=C[0],A=[],B=[];for(const I of C){if(T[0]-I[0]>HORIZON)break;A.push({t:I[0],d:I[1].clientX}),B.push({t:I[0],d:I[1].clientY})}return{x:calculateImpulseVelocity(A),y:calculateImpulseVelocity(B),get direction(){const{x:I,y:M}=this,[O,D]=[Math.abs(I),Math.abs(M)];return O>D&&I>=0?"right":O>D&&I<=0?"left":D>O&&M>=0?"down":D>O&&M<=0?"up":oops$1()}}}return{addMovement:_,endTouch:x,getVelocity:E}}function oops$1(){throw new Error}function useTouch(n){let{isActive:_,isTemporary:x,width:E,touchless:S,position:C}=n;onMounted(()=>{window.addEventListener("touchstart",H,{passive:!0}),window.addEventListener("touchmove",W,{passive:!1}),window.addEventListener("touchend",Q,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",H),window.removeEventListener("touchmove",W),window.removeEventListener("touchend",Q)});const T=computed(()=>["left","right"].includes(C.value)),{addMovement:A,endTouch:B,getVelocity:I}=useVelocity();let M=!1;const O=shallowRef(!1),D=shallowRef(0),L=shallowRef(0);let V;function U(ce,ne){return(C.value==="left"?ce:C.value==="right"?document.documentElement.clientWidth-ce:C.value==="top"?ce:C.value==="bottom"?document.documentElement.clientHeight-ce:oops())-(ne?E.value:0)}function q(ce){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const Y=C.value==="left"?(ce-L.value)/E.value:C.value==="right"?(document.documentElement.clientWidth-ce-L.value)/E.value:C.value==="top"?(ce-L.value)/E.value:C.value==="bottom"?(document.documentElement.clientHeight-ce-L.value)/E.value:oops();return ne?Math.max(0,Math.min(1,Y)):Y}function H(ce){if(S.value)return;const ne=ce.changedTouches[0].clientX,Y=ce.changedTouches[0].clientY,fe=25,ge=C.value==="left"?ne<fe:C.value==="right"?ne>document.documentElement.clientWidth-fe:C.value==="top"?Y<fe:C.value==="bottom"?Y>document.documentElement.clientHeight-fe:oops(),$e=_.value&&(C.value==="left"?ne<E.value:C.value==="right"?ne>document.documentElement.clientWidth-E.value:C.value==="top"?Y<E.value:C.value==="bottom"?Y>document.documentElement.clientHeight-E.value:oops());(ge||$e||_.value&&x.value)&&(M=!0,V=[ne,Y],L.value=U(T.value?ne:Y,_.value),D.value=q(T.value?ne:Y),B(ce),A(ce))}function W(ce){const ne=ce.changedTouches[0].clientX,Y=ce.changedTouches[0].clientY;if(M){if(!ce.cancelable){M=!1;return}const ge=Math.abs(ne-V[0]),$e=Math.abs(Y-V[1]);(T.value?ge>$e&&ge>3:$e>ge&&$e>3)?(O.value=!0,M=!1):(T.value?$e:ge)>3&&(M=!1)}if(!O.value)return;ce.preventDefault(),A(ce);const fe=q(T.value?ne:Y,!1);D.value=Math.max(0,Math.min(1,fe)),fe>1?L.value=U(T.value?ne:Y,!0):fe<0&&(L.value=U(T.value?ne:Y,!1))}function Q(ce){if(M=!1,!O.value)return;A(ce),O.value=!1;const ne=I(ce.changedTouches[0].identifier),Y=Math.abs(ne.x),fe=Math.abs(ne.y);(T.value?Y>fe&&Y>400:fe>Y&&fe>3)?_.value=ne.direction===({left:"right",right:"left",top:"down",bottom:"up"}[C.value]||oops()):_.value=D.value>.5}const re=computed(()=>O.value?{transform:C.value==="left"?`translateX(calc(-100% + ${D.value*E.value}px))`:C.value==="right"?`translateX(calc(100% - ${D.value*E.value}px))`:C.value==="top"?`translateY(calc(-100% + ${D.value*E.value}px))`:C.value==="bottom"?`translateY(calc(100% - ${D.value*E.value}px))`:oops(),transition:"none"}:void 0);return{isDragging:O,dragProgress:D,dragStyles:re}}function oops(){throw new Error}function useScopeId(){const _=getCurrentInstance("useScopeId").vnode.scopeId;return{scopeId:_?{[_]:""}:void 0}}const locations=["start","end","left","right","top","bottom"],makeVNavigationDrawerProps=propsFactory({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:n=>locations.includes(n)},sticky:Boolean,...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},"VNavigationDrawer"),VNavigationDrawer=genericComponent()({name:"VNavigationDrawer",props:makeVNavigationDrawerProps(),emits:{"update:modelValue":n=>!0,"update:rail":n=>!0},setup(n,_){let{attrs:x,emit:E,slots:S}=_;const{isRtl:C}=useRtl(),{themeClasses:T}=provideTheme(n),{borderClasses:A}=useBorder(n),{backgroundColorClasses:B,backgroundColorStyles:I}=useBackgroundColor(toRef(n,"color")),{elevationClasses:M}=useElevation(n),{mobile:O}=useDisplay(),{roundedClasses:D}=useRounded(n),L=useRouter(),V=useProxiedModel(n,"modelValue",null,oe=>!!oe),{ssrBootStyles:U}=useSsrBoot(),{scopeId:q}=useScopeId(),H=ref$1(),W=shallowRef(!1),Q=computed(()=>n.rail&&n.expandOnHover&&W.value?Number(n.width):Number(n.rail?n.railWidth:n.width)),re=computed(()=>toPhysical(n.location,C.value)),ce=computed(()=>!n.permanent&&(O.value||n.temporary)),ne=computed(()=>n.sticky&&!ce.value&&re.value!=="bottom");n.expandOnHover&&n.rail!=null&&watch(W,oe=>E("update:rail",!oe)),n.disableResizeWatcher||watch(ce,oe=>!n.permanent&&nextTick$2(()=>V.value=!oe)),!n.disableRouteWatcher&&L&&watch(L.currentRoute,()=>ce.value&&(V.value=!1)),watch(()=>n.permanent,oe=>{oe&&(V.value=!0)}),onBeforeMount(()=>{n.modelValue!=null||ce.value||(V.value=n.permanent||!O.value)});const{isDragging:Y,dragProgress:fe,dragStyles:ge}=useTouch({isActive:V,isTemporary:ce,width:Q,touchless:toRef(n,"touchless"),position:re}),$e=computed(()=>{const oe=ce.value?0:n.rail&&n.expandOnHover?Number(n.railWidth):Q.value;return Y.value?oe*fe.value:oe}),{layoutItemStyles:_e,layoutItemScrimStyles:ae}=useLayoutItem({id:n.name,order:computed(()=>parseInt(n.order,10)),position:re,layoutSize:$e,elementSize:Q,active:computed(()=>V.value||Y.value),disableTransitions:computed(()=>Y.value),absolute:computed(()=>n.absolute||ne.value&&typeof X.value!="string")}),{isStuck:X,stickyStyles:F}=useSticky({rootEl:H,isSticky:ne,layoutItemStyles:_e}),z=useBackgroundColor(computed(()=>typeof n.scrim=="string"?n.scrim:null)),J=computed(()=>({...Y.value?{opacity:fe.value*.2,transition:"none"}:void 0,...ae.value}));provideDefaults({VList:{bgColor:"transparent"}});function te(){W.value=!0}function se(){W.value=!1}return useRender(()=>{const oe=S.image||n.image;return createVNode(Fragment,null,[createVNode(n.tag,mergeProps({ref:H,onMouseenter:te,onMouseleave:se,class:["v-navigation-drawer",`v-navigation-drawer--${re.value}`,{"v-navigation-drawer--expand-on-hover":n.expandOnHover,"v-navigation-drawer--floating":n.floating,"v-navigation-drawer--is-hovering":W.value,"v-navigation-drawer--rail":n.rail,"v-navigation-drawer--temporary":ce.value,"v-navigation-drawer--active":V.value,"v-navigation-drawer--sticky":ne.value},T.value,B.value,A.value,M.value,D.value,n.class],style:[I.value,_e.value,ge.value,U.value,F.value,n.style]},q,x),{default:()=>[oe&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[S.image?S.image?.({image:n.image}):createVNode("img",{src:n.image,alt:""},null)]),S.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[S.prepend?.()]),createVNode("div",{class:"v-navigation-drawer__content"},[S.default?.()]),S.append&&createVNode("div",{class:"v-navigation-drawer__append"},[S.append?.()])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[ce.value&&(Y.value||V.value)&&!!n.scrim&&createVNode("div",mergeProps({class:["v-navigation-drawer__scrim",z.backgroundColorClasses.value],style:[J.value,z.backgroundColorStyles.value],onClick:()=>V.value=!1},q),null)]})])}),{isStuck:X}}}),_sfc_main$A=defineComponent$1({__name:"NavigationPrincipale",setup(n){const{useI18n:_}=_(),{t:x}=_(),E=inject$1("constl"),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(E?.profil.suivreNoms({f:D=>C.value=D}));const A=ref$1();onMounted(async()=>{A.value=await E?.obtIdDispositif()});const{nomDispositif:B,typeDispositif:I}=utiliserNomEtTypeDispositif({idDispositif:A}),M=computed(()=>obtIcneDispositifDeType(I.value)),O=[{icne:"mdi-home",texte:x("navigation.accueil"),chemin:"/"},{icne:"mdi-database",texte:x("navigation.donnes"),chemin:"/donnes"},{icne:"mdi-chart-line",texte:x("navigation.visualiser"),chemin:"/visualiser"},{icne:"mdi-bug",texte:x("navigation.signalements"),chemin:"/signalements"}];return(D,L)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(T),onClick:L[0]||(L[0]=V=>D.$router.push({path:"/compte"}))},{prepend:withCtx(()=>[createVNode(_sfc_main$C)]),subtitle:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.value),1)]),_:1}),createVNode(_sfc_main$B,{texte:unref(B)||unref(x)("dispositifs.sansNom"),"longueur-max":20},null,8,["texte"])]),_:1},8,["title"])]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(O,V=>createVNode(VListItem,{key:V.chemin,"prepend-icon":V.icne,title:V.texte,onClick:U=>D.$router.push(encodeURI(V.chemin))},null,8,["prepend-icon","title","onClick"])),64))]),_:1})]),_:1}))}}),_sfc_main$z=defineComponent$1({__name:"PagePrincipale",setup(n){return(_,x)=>{const E=resolveComponent("router-view");return openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$A),createVNode(E,null,{default:withCtx(({Component:S})=>[createVNode(Transition,{name:"fade"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(S)))]),_:2},1024)]),_:1})])}}});let getRandomValues$1;const rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}const byteToHex$1=[];for(let n=0;n<256;++n)byteToHex$1.push((n+256).toString(16).slice(1));function unsafeStringify$1(n,_=0){return(byteToHex$1[n[_+0]]+byteToHex$1[n[_+1]]+byteToHex$1[n[_+2]]+byteToHex$1[n[_+3]]+"-"+byteToHex$1[n[_+4]]+byteToHex$1[n[_+5]]+"-"+byteToHex$1[n[_+6]]+byteToHex$1[n[_+7]]+"-"+byteToHex$1[n[_+8]]+byteToHex$1[n[_+9]]+"-"+byteToHex$1[n[_+10]]+byteToHex$1[n[_+11]]+byteToHex$1[n[_+12]]+byteToHex$1[n[_+13]]+byteToHex$1[n[_+14]]+byteToHex$1[n[_+15]]).toLowerCase()}const randomUUID$1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$1={randomUUID:randomUUID$1};function v4$1(n,_,x){if(native$1.randomUUID&&!_&&!n)return native$1.randomUUID();n=n||{};const E=n.random||(n.rng||rng$1)();if(E[6]=E[6]&15|64,E[8]=E[8]&63|128,_){x=x||0;for(let S=0;S<16;++S)_[x+S]=E[S];return _}return unsafeStringify$1(E)}const _hoisted_1$e=["width"],_hoisted_2$8=createBaseVNode("title",null,"Logo Constellation",-1),_hoisted_3$5=["x1","y1","x2","y2"],_hoisted_4$3=["cx","cy"],_hoisted_5$2=["to","dur","begin"],_sfc_main$y=defineComponent$1({__name:"LogoAnim",props:{largeur:{},delai:{},debut:{}},setup(n){const _=n,x=computed(()=>_.delai.toString()+"s"),E=ref$1([{cls:"cls-1",x:70.1742129851985,y:1.87,r:2},{cls:"cls-2",x:67.306684713793,y:16.47,r:5},{cls:"cls-3",x:34.3464829934943,y:10.01,r:3},{cls:"cls-4",x:22.5783740121382,y:31.93,r:3},{cls:"cls-1",x:13.8115094092477,y:56.91,r:2},{cls:"cls-2",x:46.9376282583068,y:69.76,r:6},{cls:"cls-3",x:86.0040169410121,y:61.32,r:4},{cls:"cls-4",x:91.0120944854386,y:54.13,r:2},{cls:"cls-1",x:112.68938567,y:63.71,r:5},{cls:"cls-2",x:100.419159062132,y:66.3,r:2},{cls:"cls-3",x:88.4938654324761,y:82.18,r:4},{cls:"cls-4",x:97.9593284722526,y:84.1,r:3},{cls:"cls-1",x:69.5525695323757,y:90.44,r:5},{cls:"cls-2",x:64.1411605466533,y:94.6,r:2},{cls:"cls-3",x:157.031284111252,y:83.37,r:3},{cls:"cls-4",x:136.188490590752,y:68.42,r:5},{cls:"cls-1",x:142.952888267913,y:53.85,r:2},{cls:"cls-2",x:162.02953761516,y:50.8,r:4},{cls:"cls-3",x:185.910142776055,y:57.71,r:4},{cls:"cls-4",x:137.021896694756,y:38.01,r:5},{cls:"cls-1",x:142.973627909008,y:29.65,r:3}].map(C=>Object.assign({},C,{begin:`${Math.random()*_.debut}s`,i:v4$1()}))),S=ref$1([{x1:70.1742129851985,y1:1.87,x2:34.3464829934943,y2:10.01,i:v4$1()},{x1:67.306684713793,y1:16.47,x2:34.3464829934943,y2:10.01,i:v4$1()},{x1:34.3464829934943,y1:10.01,x2:22.5783740121382,y2:31.93,i:v4$1()},{x1:22.5783740121382,y1:31.93,x2:13.8115094092477,y2:56.91,i:v4$1()},{x1:13.8115094092477,y1:56.91,x2:46.9376282583068,y2:69.76,i:v4$1()},{x1:46.9376282583068,y1:69.76,x2:86.0040169410121,y2:61.32,i:v4$1()},{x1:86.0040169410121,y1:61.32,x2:91.0120944854386,y2:54.13,i:v4$1()},{x1:86.0040169410121,y1:61.32,x2:100.419159062132,y2:66.3,i:v4$1()},{x1:91.0120944854386,y1:54.13,x2:112.68938567,y2:63.71,i:v4$1()},{x1:100.419159062132,y1:66.3,x2:112.68938567,y2:63.71,i:v4$1()},{x1:112.68938567,y1:63.71,x2:97.9593284722526,y2:84.1,i:v4$1()},{x1:97.9593284722526,y1:84.1,x2:88.4938654324761,y2:82.18,i:v4$1()},{x1:88.4938654324761,y1:82.18,x2:69.5525695323757,y2:90.44,i:v4$1()},{x1:69.5525695323757,y1:90.44,x2:64.1411605466533,y2:94.6,i:v4$1()},{x1:112.68938567,y1:63.71,x2:136.188490590752,y2:68.42,i:v4$1()},{x1:136.188490590752,y1:68.42,x2:157.031284111252,y2:83.37,i:v4$1()},{x1:136.188490590752,y1:68.42,x2:142.952888267913,y2:53.85,i:v4$1()},{x1:112.68938567,y1:63.71,x2:142.952888267913,y2:53.85,i:v4$1()},{x1:142.952888267913,y1:53.85,x2:137.021896694756,y2:38.01,i:v4$1()},{x1:91.0120944854386,y1:54.13,x2:137.021896694756,y2:38.01,i:v4$1()},{x1:137.021896694756,y1:38.01,x2:142.973627909008,y2:29.65,i:v4$1()},{x1:137.021896694756,y1:38.01,x2:162.02953761516,y2:50.8,i:v4$1()},{x1:142.952888267913,y1:53.85,x2:162.02953761516,y2:50.8,i:v4$1()},{x1:162.02953761516,y1:50.8,x2:185.910142776055,y2:57.71,i:v4$1()}]);return(C,T)=>(openBlock(),createElementBlock("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -10 200 110",width:C.largeur},[_hoisted_2$8,(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,A=>(openBlock(),createElementBlock("line",{key:A.i,class:"l",x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2},null,8,_hoisted_3$5))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,A=>(openBlock(),createElementBlock("circle",{key:A.i,class:normalizeClass(A.cls),cx:A.x,cy:A.y},[createBaseVNode("animate",{attributeName:"r",to:A.r,dur:x.value,begin:A.begin,fill:"freeze",repeatCount:"1"},null,8,_hoisted_5$2)],10,_hoisted_4$3))),128))],8,_hoisted_1$e))}}),LogoAnim__vue_vue_type_style_index_0_lang="",URL_SIGNALEMENTS="https://github.com/Terk-Samut/Kam-vi-thy-tu-ra-sab/issues",COURRIEL_SIGNALEMENTS="julien.malard@mail.mcgill.ca",MAX_TAILLE_IMAGE$4=500*1e3;var imageFileResize=function({file:n,width:_,height:x,type:E}){return new Promise(function(S,C){let T=["jpg","gif","bmp","png","jpeg","svg"];try{if(n.name&&n.name.split(".").reverse()[0]&&T.includes(n.name.split(".").reverse()[0].toLowerCase())&&n.size&&n.type){let A=E||"jpeg";const B=_||500,I=x||300,M=n.name,O=new FileReader;O.readAsDataURL(n),O.onload=D=>{const L=new Image;L.src=D.target.result,L.onload=()=>{const V=document.createElement("canvas");V.width=B,V.height=I;const U=V.getContext("2d");U.drawImage(L,0,0,B,I),U.canvas.toBlob(q=>{const H=new File([q],M,{type:`image/${A.toLowerCase()}`,lastModified:Date.now()});S(H)},"image/jpeg",1)},O.onerror=V=>C(V)}}else C("File not supported!")}catch(A){console.log("Error while image resize: ",A),C(A)}})};const convert$2=getDefaultExportFromCjs(imageFileResize),VBtn$1="",VBtnToggle="",VBtnGroup$1="",makeVBtnGroupProps=propsFactory({divided:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},"VBtnGroup"),VBtnGroup=genericComponent()({name:"VBtnGroup",props:makeVBtnGroupProps(),setup(n,_){let{slots:x}=_;const{themeClasses:E}=provideTheme(n),{densityClasses:S}=useDensity(n),{borderClasses:C}=useBorder(n),{elevationClasses:T}=useElevation(n),{roundedClasses:A}=useRounded(n);provideDefaults({VBtn:{height:"auto",color:toRef(n,"color"),density:toRef(n,"density"),flat:!0,variant:toRef(n,"variant")}}),useRender(()=>createVNode(n.tag,{class:["v-btn-group",{"v-btn-group--divided":n.divided},E.value,C.value,S.value,T.value,A.value,n.class],style:n.style},x))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(n,_){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const E=getCurrentInstance("useGroupItem");if(!E)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const S=getUid();provide(Symbol.for(`${_.description}:id`),S);const C=inject$1(_,null);if(!C){if(!x)return C;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${_.description}`)}const T=toRef(n,"value"),A=computed(()=>!!(C.disabled.value||n.disabled));C.register({id:S,value:T,disabled:A},E),onBeforeUnmount(()=>{C.unregister(S)});const B=computed(()=>C.isSelected(S)),I=computed(()=>B.value&&[C.selectedClass.value,n.selectedClass]);return watch(B,M=>{E.emit("group:selected",{value:M})}),{id:S,isSelected:B,toggle:()=>C.select(S,!B.value),select:M=>C.select(S,M),selectedClass:I,value:T,disabled:A,group:C}}function useGroup(n,_){let x=!1;const E=reactive([]),S=useProxiedModel(n,"modelValue",[],D=>D==null?[]:getIds(E,wrapInArray(D)),D=>{const L=getValues(E,D);return n.multiple?L:L[0]}),C=getCurrentInstance("useGroup");function T(D,L){const V=D,U=Symbol.for(`${_.description}:id`),H=findChildrenWithProvide(U,C?.vnode).indexOf(L);H>-1?E.splice(H,0,V):E.push(V)}function A(D){if(x)return;B();const L=E.findIndex(V=>V.id===D);E.splice(L,1)}function B(){const D=E.find(L=>!L.disabled);D&&n.mandatory==="force"&&!S.value.length&&(S.value=[D.id])}onMounted(()=>{B()}),onBeforeUnmount(()=>{x=!0});function I(D,L){const V=E.find(U=>U.id===D);if(!(L&&V?.disabled))if(n.multiple){const U=S.value.slice(),q=U.findIndex(W=>W===D),H=~q;if(L=L??!H,H&&n.mandatory&&U.length<=1||!H&&n.max!=null&&U.length+1>n.max)return;q<0&&L?U.push(D):q>=0&&!L&&U.splice(q,1),S.value=U}else{const U=S.value.includes(D);if(n.mandatory&&U)return;S.value=L??!U?[D]:[]}}function M(D){if(n.multiple,S.value.length){const L=S.value[0],V=E.findIndex(H=>H.id===L);let U=(V+D)%E.length,q=E[U];for(;q.disabled&&U!==V;)U=(U+D)%E.length,q=E[U];if(q.disabled)return;S.value=[E[U].id]}else{const L=E.find(V=>!V.disabled);L&&(S.value=[L.id])}}const O={register:T,unregister:A,selected:S,select:I,disabled:toRef(n,"disabled"),prev:()=>M(E.length-1),next:()=>M(1),isSelected:D=>S.value.includes(D),selectedClass:computed(()=>n.selectedClass),items:computed(()=>E),getItemIndex:D=>getItemIndex(E,D)};return provide(_,O),O}function getItemIndex(n,_){const x=getIds(n,[_]);return x.length?n.findIndex(E=>E.id===x[0]):-1}function getIds(n,_){const x=[];return _.forEach(E=>{const S=n.find(T=>deepEqual$3(E,T.value)),C=n[E];S?.value!=null?x.push(S.id):C!=null&&x.push(C.id)}),x}function getValues(n,_){const x=[];return _.forEach(E=>{const S=n.findIndex(C=>C.id===E);if(~S){const C=n[S];x.push(C.value!=null?C.value:S)}}),x}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle"),makeVBtnToggleProps=propsFactory({...makeVBtnGroupProps(),...makeGroupProps()},"VBtnToggle");genericComponent()({name:"VBtnToggle",props:makeVBtnToggleProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const{isSelected:E,next:S,prev:C,select:T,selected:A}=useGroup(n,VBtnToggleSymbol);return useRender(()=>{const[B]=VBtnGroup.filterProps(n);return createVNode(VBtnGroup,mergeProps({class:["v-btn-toggle",n.class]},B,{style:n.style}),{default:()=>[x.default?.({isSelected:E,next:S,prev:C,select:T,selected:A})]})}),{next:S,prev:C,select:T}}});const VProgressCircular$1="";function useIntersectionObserver(n,_){const x=ref$1(),E=shallowRef(!1);if(SUPPORTS_INTERSECTION){const S=new IntersectionObserver(C=>{n?.(C,S),E.value=!!C.find(T=>T.isIntersecting)},_);onBeforeUnmount(()=>{S.disconnect()}),watch(x,(C,T)=>{T&&(S.unobserve(T),E.value=!1),C&&S.observe(C)},{flush:"post"})}return{intersectionRef:x,isIntersecting:E}}const makeVProgressCircularProps=propsFactory({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},"VProgressCircular"),VProgressCircular=genericComponent()({name:"VProgressCircular",props:makeVProgressCircularProps(),setup(n,_){let{slots:x}=_;const E=20,S=2*Math.PI*E,C=ref$1(),{themeClasses:T}=provideTheme(n),{sizeClasses:A,sizeStyles:B}=useSize(n),{textColorClasses:I,textColorStyles:M}=useTextColor(toRef(n,"color")),{textColorClasses:O,textColorStyles:D}=useTextColor(toRef(n,"bgColor")),{intersectionRef:L,isIntersecting:V}=useIntersectionObserver(),{resizeRef:U,contentRect:q}=useResizeObserver(),H=computed(()=>Math.max(0,Math.min(100,parseFloat(n.modelValue)))),W=computed(()=>Number(n.width)),Q=computed(()=>B.value?Number(n.size):q.value?q.value.width:Math.max(W.value,32)),re=computed(()=>E/(1-W.value/Q.value)*2),ce=computed(()=>W.value/Q.value*re.value),ne=computed(()=>convertToUnit((100-H.value)/100*S));return watchEffect(()=>{L.value=C.value,U.value=C.value}),useRender(()=>createVNode(n.tag,{ref:C,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!n.indeterminate,"v-progress-circular--visible":V.value,"v-progress-circular--disable-shrink":n.indeterminate==="disable-shrink"},T.value,A.value,I.value,n.class],style:[B.value,M.value,n.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":n.indeterminate?void 0:H.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(n.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${re.value} ${re.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",O.value],style:D.value,fill:"transparent",cx:"50%",cy:"50%",r:E,"stroke-width":ce.value,"stroke-dasharray":S,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:E,"stroke-width":ce.value,"stroke-dasharray":S,"stroke-dashoffset":ne.value},null)]),x.default&&createVNode("div",{class:"v-progress-circular__content"},[x.default({value:H.value})])]})),{}}}),VProgressLinear$1="",oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2?arguments[2]:void 0;const{isRtl:E}=useRtl();return{locationStyles:computed(()=>{if(!n.location)return{};const{side:C,align:T}=parseAnchor(n.location.split(" ").length>1?n.location:`${n.location} center`,E.value);function A(I){return x?x(I):0}const B={};return C!=="center"&&(_?B[oppositeMap[C]]=`calc(100% - ${A(C)}px)`:B[C]=0),T!=="center"?_?B[oppositeMap[T]]=`calc(100% - ${A(T)}px)`:B[T]=0:(C==="center"?B.top=B.left="50%":B[{top:"left",bottom:"left",left:"top",right:"top"}[C]]="50%",B.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[C]),B})}}const makeVProgressLinearProps=propsFactory({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...makeComponentProps(),...makeLocationProps({location:"top"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps()},"VProgressLinear"),VProgressLinear=genericComponent()({name:"VProgressLinear",props:makeVProgressLinearProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{isRtl:S,rtlClasses:C}=useRtl(),{themeClasses:T}=provideTheme(n),{locationStyles:A}=useLocation(n),{textColorClasses:B,textColorStyles:I}=useTextColor(n,"color"),{backgroundColorClasses:M,backgroundColorStyles:O}=useBackgroundColor(computed(()=>n.bgColor||n.color)),{backgroundColorClasses:D,backgroundColorStyles:L}=useBackgroundColor(n,"color"),{roundedClasses:V}=useRounded(n),{intersectionRef:U,isIntersecting:q}=useIntersectionObserver(),H=computed(()=>parseInt(n.max,10)),W=computed(()=>parseInt(n.height,10)),Q=computed(()=>parseFloat(n.bufferValue)/H.value*100),re=computed(()=>parseFloat(E.value)/H.value*100),ce=computed(()=>S.value!==n.reverse),ne=computed(()=>n.indeterminate?"fade-transition":"slide-x-transition"),Y=computed(()=>n.bgOpacity==null?n.bgOpacity:parseFloat(n.bgOpacity));function fe(ge){if(!U.value)return;const{left:$e,right:_e,width:ae}=U.value.getBoundingClientRect(),X=ce.value?ae-ge.clientX+(_e-ae):ge.clientX-$e;E.value=Math.round(X/ae*H.value)}return useRender(()=>createVNode(n.tag,{ref:U,class:["v-progress-linear",{"v-progress-linear--absolute":n.absolute,"v-progress-linear--active":n.active&&q.value,"v-progress-linear--reverse":ce.value,"v-progress-linear--rounded":n.rounded,"v-progress-linear--rounded-bar":n.roundedBar,"v-progress-linear--striped":n.striped},V.value,T.value,C.value,n.class],style:[{bottom:n.location==="bottom"?0:void 0,top:n.location==="top"?0:void 0,height:n.active?convertToUnit(W.value):0,"--v-progress-linear-height":convertToUnit(W.value),...A.value},n.style],role:"progressbar","aria-hidden":n.active?"false":"true","aria-valuemin":"0","aria-valuemax":n.max,"aria-valuenow":n.indeterminate?void 0:re.value,onClick:n.clickable&&fe},{default:()=>[n.stream&&createVNode("div",{key:"stream",class:["v-progress-linear__stream",B.value],style:{...I.value,[ce.value?"left":"right"]:convertToUnit(-W.value),borderTop:`${convertToUnit(W.value/2)} dotted`,opacity:Y.value,top:`calc(50% - ${convertToUnit(W.value/4)})`,width:convertToUnit(100-Q.value,"%"),"--v-progress-linear-stream-to":convertToUnit(W.value*(ce.value?1:-1))}},null),createVNode("div",{class:["v-progress-linear__background",M.value],style:[O.value,{opacity:Y.value,width:convertToUnit(n.stream?Q.value:100,"%")}]},null),createVNode(Transition,{name:ne.value},{default:()=>[n.indeterminate?createVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(ge=>createVNode("div",{key:ge,class:["v-progress-linear__indeterminate",ge,D.value],style:L.value},null))]):createVNode("div",{class:["v-progress-linear__determinate",D.value],style:[L.value,{width:convertToUnit(re.value,"%")}]},null)]}),x.default&&createVNode("div",{class:"v-progress-linear__content"},[x.default({value:re.value,buffer:Q.value})])]})),{}}}),makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${_}--loading`]:n.loading}))}}function LoaderSlot(n,_){let{slots:x}=_;return createVNode("div",{class:`${n.name}__loader`},[x.default?.({color:n.color,isActive:n.active})||createVNode(VProgressLinear,{active:n.active,color:n.color,height:"2",indeterminate:!0},null)])}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:n=>positionValues.includes(n)}},"position");function usePosition(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>n.position?`${_}--${n.position}`:void 0)}}function useSelectLink(n,_){watch(()=>n.isActive?.value,x=>{n.isLink.value&&x&&_&&nextTick$2(()=>{_(!0)})},{immediate:!0})}const makeVBtnProps=propsFactory({active:{type:Boolean,default:void 0},symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VBtn"),VBtn=genericComponent()({name:"VBtn",directives:{Ripple},props:makeVBtnProps(),emits:{"group:selected":n=>!0},setup(n,_){let{attrs:x,slots:E}=_;const{themeClasses:S}=provideTheme(n),{borderClasses:C}=useBorder(n),{colorClasses:T,colorStyles:A,variantClasses:B}=useVariant(n),{densityClasses:I}=useDensity(n),{dimensionStyles:M}=useDimension(n),{elevationClasses:O}=useElevation(n),{loaderClasses:D}=useLoader(n),{locationStyles:L}=useLocation(n),{positionClasses:V}=usePosition(n),{roundedClasses:U}=useRounded(n),{sizeClasses:q,sizeStyles:H}=useSize(n),W=useGroupItem(n,n.symbol,!1),Q=useLink$1(n,x),re=computed(()=>n.active!==void 0?n.active:Q.isLink.value?Q.isActive?.value:W?.isSelected.value),ce=computed(()=>W?.disabled.value||n.disabled),ne=computed(()=>n.variant==="elevated"&&!(n.disabled||n.flat||n.border)),Y=computed(()=>{if(n.value!==void 0)return Object(n.value)===n.value?JSON.stringify(n.value,null,0):n.value});function fe(ge){ce.value||Q.isLink.value&&(ge.metaKey||ge.ctrlKey||ge.shiftKey||ge.button!==0||x.target==="_blank")||(Q.navigate?.(ge),W?.toggle())}return useSelectLink(Q,W?.select),useRender(()=>{const ge=Q.isLink.value?"a":n.tag,$e=!!(n.prependIcon||E.prepend),_e=!!(n.appendIcon||E.append),ae=!!(n.icon&&n.icon!==!0),X=W?.isSelected.value&&(!Q.isLink.value||Q.isActive?.value)||!W||Q.isActive?.value;return withDirectives(createVNode(ge,{type:ge==="a"?void 0:"button",class:["v-btn",W?.selectedClass.value,{"v-btn--active":re.value,"v-btn--block":n.block,"v-btn--disabled":ce.value,"v-btn--elevated":ne.value,"v-btn--flat":n.flat,"v-btn--icon":!!n.icon,"v-btn--loading":n.loading,"v-btn--stacked":n.stacked},S.value,C.value,X?T.value:void 0,I.value,O.value,D.value,V.value,U.value,q.value,B.value,n.class],style:[X?A.value:void 0,M.value,L.value,H.value,n.style],disabled:ce.value||void 0,href:Q.href.value,onClick:fe,value:Y.value},{default:()=>[genOverlays(!0,"v-btn"),!n.icon&&$e&&createVNode("span",{key:"prepend",class:"v-btn__prepend"},[E.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!n.prependIcon,defaults:{VIcon:{icon:n.prependIcon}}},E.prepend):createVNode(VIcon,{key:"prepend-icon",icon:n.prependIcon},null)]),createVNode("span",{class:"v-btn__content","data-no-activator":""},[!E.default&&ae?createVNode(VIcon,{key:"content-icon",icon:n.icon},null):createVNode(VDefaultsProvider,{key:"content-defaults",disabled:!ae,defaults:{VIcon:{icon:n.icon}}},{default:()=>[E.default?.()??n.text]})]),!n.icon&&_e&&createVNode("span",{key:"append",class:"v-btn__append"},[E.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!n.appendIcon,defaults:{VIcon:{icon:n.appendIcon}}},E.append):createVNode(VIcon,{key:"append-icon",icon:n.appendIcon},null)]),!!n.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[E.loader?.()??createVNode(VProgressCircular,{color:typeof n.loading=="boolean"?void 0:n.loading,indeterminate:!0,size:"23",width:"2"},null)])]}),[[resolveDirective("ripple"),!ce.value&&n.ripple,null]])}),{}}}),VGrid="",makeVContainerProps=propsFactory({fluid:{type:Boolean,default:!1},...makeComponentProps(),...makeTagProps()},"VContainer"),VContainer=genericComponent()({name:"VContainer",props:makeVContainerProps(),setup(n,_){let{slots:x}=_;const{rtlClasses:E}=useRtl();return useRender(()=>createVNode(n.tag,{class:["v-container",{"v-container--fluid":n.fluid},E.value,n.class],style:n.style},x)),{}}}),breakpointProps=(()=>breakpoints.reduce((n,_)=>(n[_]={type:[Boolean,String,Number],default:!1},n),{}))(),offsetProps=(()=>breakpoints.reduce((n,_)=>{const x="offset"+capitalize$1(_);return n[x]={type:[String,Number],default:null},n},{}))(),orderProps=(()=>breakpoints.reduce((n,_)=>{const x="order"+capitalize$1(_);return n[x]={type:[String,Number],default:null},n},{}))(),propMap$1={col:Object.keys(breakpointProps),offset:Object.keys(offsetProps),order:Object.keys(orderProps)};function breakpointClass$1(n,_,x){let E=n;if(!(x==null||x===!1)){if(_){const S=_.replace(n,"");E+=`-${S}`}return n==="col"&&(E="v-"+E),n==="col"&&(x===""||x===!0)||(E+=`-${x}`),E.toLowerCase()}}const ALIGN_SELF_VALUES=["auto","start","end","center","baseline","stretch"],makeVColProps=propsFactory({cols:{type:[Boolean,String,Number],default:!1},...breakpointProps,offset:{type:[String,Number],default:null},...offsetProps,order:{type:[String,Number],default:null},...orderProps,alignSelf:{type:String,default:null,validator:n=>ALIGN_SELF_VALUES.includes(n)},...makeComponentProps(),...makeTagProps()},"VCol"),VCol=genericComponent()({name:"VCol",props:makeVColProps(),setup(n,_){let{slots:x}=_;const E=computed(()=>{const S=[];let C;for(C in propMap$1)propMap$1[C].forEach(A=>{const B=n[A],I=breakpointClass$1(C,A,B);I&&S.push(I)});const T=S.some(A=>A.startsWith("v-col-"));return S.push({"v-col":!T||!n.cols,[`v-col-${n.cols}`]:n.cols,[`offset-${n.offset}`]:n.offset,[`order-${n.order}`]:n.order,[`align-self-${n.alignSelf}`]:n.alignSelf}),S});return()=>h$1(n.tag,{class:[E.value,n.class],style:n.style},x.default?.())}}),ALIGNMENT=["start","end","center"],SPACE=["space-between","space-around","space-evenly"];function makeRowProps(n,_){return breakpoints.reduce((x,E)=>{const S=n+capitalize$1(E);return x[S]=_(),x},{})}const ALIGN_VALUES=[...ALIGNMENT,"baseline","stretch"],alignValidator=n=>ALIGN_VALUES.includes(n),alignProps=makeRowProps("align",()=>({type:String,default:null,validator:alignValidator})),JUSTIFY_VALUES=[...ALIGNMENT,...SPACE],justifyValidator=n=>JUSTIFY_VALUES.includes(n),justifyProps=makeRowProps("justify",()=>({type:String,default:null,validator:justifyValidator})),ALIGN_CONTENT_VALUES=[...ALIGNMENT,...SPACE,"stretch"],alignContentValidator=n=>ALIGN_CONTENT_VALUES.includes(n),alignContentProps=makeRowProps("alignContent",()=>({type:String,default:null,validator:alignContentValidator})),propMap={align:Object.keys(alignProps),justify:Object.keys(justifyProps),alignContent:Object.keys(alignContentProps)},classMap={align:"align",justify:"justify",alignContent:"align-content"};function breakpointClass(n,_,x){let E=classMap[n];if(x!=null){if(_){const S=_.replace(n,"");E+=`-${S}`}return E+=`-${x}`,E.toLowerCase()}}const makeVRowProps=propsFactory({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:alignValidator},...alignProps,justify:{type:String,default:null,validator:justifyValidator},...justifyProps,alignContent:{type:String,default:null,validator:alignContentValidator},...alignContentProps,...makeComponentProps(),...makeTagProps()},"VRow"),VRow=genericComponent()({name:"VRow",props:makeVRowProps(),setup(n,_){let{slots:x}=_;const E=computed(()=>{const S=[];let C;for(C in propMap)propMap[C].forEach(T=>{const A=n[T],B=breakpointClass(C,T,A);B&&S.push(B)});return S.push({"v-row--no-gutters":n.noGutters,"v-row--dense":n.dense,[`align-${n.align}`]:n.align,[`justify-${n.justify}`]:n.justify,[`align-content-${n.alignContent}`]:n.alignContent}),S});return()=>h$1(n.tag,{class:["v-row",E.value,n.class],style:n.style},x.default?.())}}),VSpacer=createSimpleFunctional("v-spacer","div","VSpacer"),makeDelayProps=propsFactory({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function useDelay(n,_){const x={},E=S=>()=>{if(!IN_BROWSER)return Promise.resolve(!0);const C=S==="openDelay";return x.closeDelay&&window.clearTimeout(x.closeDelay),delete x.closeDelay,x.openDelay&&window.clearTimeout(x.openDelay),delete x.openDelay,new Promise(T=>{const A=parseInt(n[S]??0,10);x[S]=window.setTimeout(()=>{_?.(C),T(C)},A)})};return{runCloseDelay:E("closeDelay"),runOpenDelay:E("openDelay")}}const makeVHoverProps=propsFactory({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...makeDelayProps()},"VHover"),VHover=genericComponent()({name:"VHover",props:makeVHoverProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{runOpenDelay:S,runCloseDelay:C}=useDelay(n,T=>!n.disabled&&(E.value=T));return()=>x.default?.({isHovering:E.value,props:{onMouseenter:S,onMouseleave:C}})}}),VSnackbar$1="",VOverlay$1="";function elementToViewport(n,_){return{x:n.x+_.x,y:n.y+_.y}}function getOffset(n,_){return{x:n.x-_.x,y:n.y-_.y}}function anchorToPoint(n,_){if(n.side==="top"||n.side==="bottom"){const{side:x,align:E}=n,S=E==="left"?0:E==="center"?_.width/2:E==="right"?_.width:E,C=x==="top"?0:x==="bottom"?_.height:x;return elementToViewport({x:S,y:C},_)}else if(n.side==="left"||n.side==="right"){const{side:x,align:E}=n,S=x==="left"?0:x==="right"?_.width:x,C=E==="top"?0:E==="center"?_.height/2:E==="bottom"?_.height:E;return elementToViewport({x:S,y:C},_)}return elementToViewport({x:_.width/2,y:_.height/2},_)}const locationStrategies={static:staticLocationStrategy,connected:connectedLocationStrategy},makeLocationStrategyProps=propsFactory({locationStrategy:{type:[String,Function],default:"static",validator:n=>typeof n=="function"||n in locationStrategies},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function useLocationStrategies(n,_){const x=ref$1({}),E=ref$1();IN_BROWSER&&(useToggleScope(()=>!!(_.isActive.value&&n.locationStrategy),C=>{watch(()=>n.locationStrategy,C),onScopeDispose(()=>{E.value=void 0}),typeof n.locationStrategy=="function"?E.value=n.locationStrategy(_,n,x)?.updateLocation:E.value=locationStrategies[n.locationStrategy](_,n,x)?.updateLocation}),window.addEventListener("resize",S,{passive:!0}),onScopeDispose(()=>{window.removeEventListener("resize",S),E.value=void 0}));function S(C){E.value?.(C)}return{contentStyles:x,updateLocation:E}}function staticLocationStrategy(){}function getIntrinsicSize(n,_){_?n.style.removeProperty("left"):n.style.removeProperty("right");const x=nullifyTransforms(n);return _?x.x+=parseFloat(n.style.right||0):x.x-=parseFloat(n.style.left||0),x.y-=parseFloat(n.style.top||0),x}function connectedLocationStrategy(n,_,x){isFixedPosition(n.activatorEl.value)&&Object.assign(x.value,{position:"fixed",top:0,[n.isRtl.value?"right":"left"]:0});const{preferredAnchor:S,preferredOrigin:C}=destructComputed(()=>{const V=parseAnchor(_.location,n.isRtl.value),U=_.origin==="overlap"?V:_.origin==="auto"?flipSide(V):parseAnchor(_.origin,n.isRtl.value);return V.side===U.side&&V.align===flipAlign(U).align?{preferredAnchor:flipCorner(V),preferredOrigin:flipCorner(U)}:{preferredAnchor:V,preferredOrigin:U}}),[T,A,B,I]=["minWidth","minHeight","maxWidth","maxHeight"].map(V=>computed(()=>{const U=parseFloat(_[V]);return isNaN(U)?1/0:U})),M=computed(()=>{if(Array.isArray(_.offset))return _.offset;if(typeof _.offset=="string"){const V=_.offset.split(" ").map(parseFloat);return V.length<2&&V.push(0),V}return typeof _.offset=="number"?[_.offset,0]:[0,0]});let O=!1;const D=new ResizeObserver(()=>{O&&L()});watch([n.activatorEl,n.contentEl],(V,U)=>{let[q,H]=V,[W,Q]=U;W&&D.unobserve(W),q&&D.observe(q),Q&&D.unobserve(Q),H&&D.observe(H)},{immediate:!0}),onScopeDispose(()=>{D.disconnect()});function L(){if(O=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>O=!0)}),!n.activatorEl.value||!n.contentEl.value)return;const V=n.activatorEl.value.getBoundingClientRect(),U=getIntrinsicSize(n.contentEl.value,n.isRtl.value),q=getScrollParents(n.contentEl.value),H=12;q.length||(q.push(document.documentElement),n.contentEl.value.style.top&&n.contentEl.value.style.left||(U.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),U.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const W=q.reduce((_e,ae)=>{const X=ae.getBoundingClientRect(),F=new Box({x:ae===document.documentElement?0:X.x,y:ae===document.documentElement?0:X.y,width:ae.clientWidth,height:ae.clientHeight});return _e?new Box({x:Math.max(_e.left,F.left),y:Math.max(_e.top,F.top),width:Math.min(_e.right,F.right)-Math.max(_e.left,F.left),height:Math.min(_e.bottom,F.bottom)-Math.max(_e.top,F.top)}):F},void 0);W.x+=H,W.y+=H,W.width-=H*2,W.height-=H*2;let Q={anchor:S.value,origin:C.value};function re(_e){const ae=new Box(U),X=anchorToPoint(_e.anchor,V),F=anchorToPoint(_e.origin,ae);let{x:z,y:J}=getOffset(X,F);switch(_e.anchor.side){case"top":J-=M.value[0];break;case"bottom":J+=M.value[0];break;case"left":z-=M.value[0];break;case"right":z+=M.value[0];break}switch(_e.anchor.align){case"top":J-=M.value[1];break;case"bottom":J+=M.value[1];break;case"left":z-=M.value[1];break;case"right":z+=M.value[1];break}return ae.x+=z,ae.y+=J,ae.width=Math.min(ae.width,B.value),ae.height=Math.min(ae.height,I.value),{overflows:getOverflow(ae,W),x:z,y:J}}let ce=0,ne=0;const Y={x:0,y:0},fe={x:!1,y:!1};let ge=-1;for(;!(ge++>10);){const{x:_e,y:ae,overflows:X}=re(Q);ce+=_e,ne+=ae,U.x+=_e,U.y+=ae;{const F=getAxis(Q.anchor),z=X.x.before||X.x.after,J=X.y.before||X.y.after;let te=!1;if(["x","y"].forEach(se=>{if(se==="x"&&z&&!fe.x||se==="y"&&J&&!fe.y){const oe={anchor:{...Q.anchor},origin:{...Q.origin}},ie=se==="x"?F==="y"?flipAlign:flipSide:F==="y"?flipSide:flipAlign;oe.anchor=ie(oe.anchor),oe.origin=ie(oe.origin);const{overflows:G}=re(oe);(G[se].before<=X[se].before&&G[se].after<=X[se].after||G[se].before+G[se].after<(X[se].before+X[se].after)/2)&&(Q=oe,te=fe[se]=!0)}}),te)continue}X.x.before&&(ce+=X.x.before,U.x+=X.x.before),X.x.after&&(ce-=X.x.after,U.x-=X.x.after),X.y.before&&(ne+=X.y.before,U.y+=X.y.before),X.y.after&&(ne-=X.y.after,U.y-=X.y.after);{const F=getOverflow(U,W);Y.x=W.width-F.x.before-F.x.after,Y.y=W.height-F.y.before-F.y.after,ce+=F.x.before,U.x+=F.x.before,ne+=F.y.before,U.y+=F.y.before}break}const $e=getAxis(Q.anchor);return Object.assign(x.value,{"--v-overlay-anchor-origin":`${Q.anchor.side} ${Q.anchor.align}`,transformOrigin:`${Q.origin.side} ${Q.origin.align}`,top:convertToUnit(pixelRound(ne)),left:n.isRtl.value?void 0:convertToUnit(pixelRound(ce)),right:n.isRtl.value?convertToUnit(pixelRound(-ce)):void 0,minWidth:convertToUnit($e==="y"?Math.min(T.value,V.width):T.value),maxWidth:convertToUnit(pixelCeil(clamp(Y.x,T.value===1/0?0:T.value,B.value))),maxHeight:convertToUnit(pixelCeil(clamp(Y.y,A.value===1/0?0:A.value,I.value)))}),{available:Y,contentBox:U}}return watch(()=>[S.value,C.value,_.offset,_.minWidth,_.minHeight,_.maxWidth,_.maxHeight],()=>L()),nextTick$2(()=>{const V=L();if(!V)return;const{available:U,contentBox:q}=V;q.height>U.y&&requestAnimationFrame(()=>{L(),requestAnimationFrame(()=>{L()})})}),{updateLocation:L}}function pixelRound(n){return Math.round(n*devicePixelRatio)/devicePixelRatio}function pixelCeil(n){return Math.ceil(n*devicePixelRatio)/devicePixelRatio}let clean=!0;const frames=[];function requestNewFrame(n){!clean||frames.length?(frames.push(n),run$1()):(clean=!1,n(),run$1())}let raf=-1;function run$1(){cancelAnimationFrame(raf),raf=requestAnimationFrame(()=>{const n=frames.shift();n&&n(),frames.length?run$1():clean=!0})}const scrollStrategies={none:null,close:closeScrollStrategy,block:blockScrollStrategy,reposition:repositionScrollStrategy},makeScrollStrategyProps=propsFactory({scrollStrategy:{type:[String,Function],default:"block",validator:n=>typeof n=="function"||n in scrollStrategies}},"VOverlay-scroll-strategies");function useScrollStrategies(n,_){if(!IN_BROWSER)return;let x;watchEffect(async()=>{x?.stop(),_.isActive.value&&n.scrollStrategy&&(x=effectScope(),await nextTick$2(),x.active&&x.run(()=>{typeof n.scrollStrategy=="function"?n.scrollStrategy(_,n,x):scrollStrategies[n.scrollStrategy]?.(_,n,x)}))}),onScopeDispose(()=>{x?.stop()})}function closeScrollStrategy(n){function _(x){n.isActive.value=!1}bindScroll(n.activatorEl.value??n.contentEl.value,_)}function blockScrollStrategy(n,_){const x=n.root.value?.offsetParent,E=[...new Set([...getScrollParents(n.activatorEl.value,_.contained?x:void 0),...getScrollParents(n.contentEl.value,_.contained?x:void 0)])].filter(T=>!T.classList.contains("v-overlay-scroll-blocked")),S=window.innerWidth-document.documentElement.offsetWidth,C=(T=>hasScrollbar(T)&&T)(x||document.documentElement);C&&n.root.value.classList.add("v-overlay--scroll-blocked"),E.forEach((T,A)=>{T.style.setProperty("--v-body-scroll-x",convertToUnit(-T.scrollLeft)),T.style.setProperty("--v-body-scroll-y",convertToUnit(-T.scrollTop)),T!==document.documentElement&&T.style.setProperty("--v-scrollbar-offset",convertToUnit(S)),T.classList.add("v-overlay-scroll-blocked")}),onScopeDispose(()=>{E.forEach((T,A)=>{const B=parseFloat(T.style.getPropertyValue("--v-body-scroll-x")),I=parseFloat(T.style.getPropertyValue("--v-body-scroll-y"));T.style.removeProperty("--v-body-scroll-x"),T.style.removeProperty("--v-body-scroll-y"),T.style.removeProperty("--v-scrollbar-offset"),T.classList.remove("v-overlay-scroll-blocked"),T.scrollLeft=-B,T.scrollTop=-I}),C&&n.root.value.classList.remove("v-overlay--scroll-blocked")})}function repositionScrollStrategy(n,_,x){let E=!1,S=-1,C=-1;function T(A){requestNewFrame(()=>{const B=performance.now();n.updateLocation.value?.(A),E=(performance.now()-B)/(1e3/60)>2})}C=(typeof requestIdleCallback>"u"?A=>A():requestIdleCallback)(()=>{x.run(()=>{bindScroll(n.activatorEl.value??n.contentEl.value,A=>{E?(cancelAnimationFrame(S),S=requestAnimationFrame(()=>{S=requestAnimationFrame(()=>{T(A)})})):T(A)})})}),onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(C),cancelAnimationFrame(S)})}function bindScroll(n,_){const x=[document,...getScrollParents(n)];x.forEach(E=>{E.addEventListener("scroll",_,{passive:!0})}),onScopeDispose(()=>{x.forEach(E=>{E.removeEventListener("scroll",_)})})}const VMenuSymbol=Symbol.for("vuetify:v-menu"),makeActivatorProps=propsFactory({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...makeDelayProps()},"VOverlay-activator");function useActivator(n,_){let{isActive:x,isTop:E}=_;const S=ref$1();let C=!1,T=!1,A=!0;const B=computed(()=>n.openOnFocus||n.openOnFocus==null&&n.openOnHover),I=computed(()=>n.openOnClick||n.openOnClick==null&&!n.openOnHover&&!B.value),{runOpenDelay:M,runCloseDelay:O}=useDelay(n,Q=>{Q===(n.openOnHover&&C||B.value&&T)&&!(n.openOnHover&&x.value&&!E.value)&&(x.value!==Q&&(A=!0),x.value=Q)}),D={onClick:Q=>{Q.stopPropagation(),S.value=Q.currentTarget||Q.target,x.value=!x.value},onMouseenter:Q=>{Q.sourceCapabilities?.firesTouchEvents||(C=!0,S.value=Q.currentTarget||Q.target,M())},onMouseleave:Q=>{C=!1,O()},onFocus:Q=>{matchesSelector(Q.target,":focus-visible")!==!1&&(T=!0,Q.stopPropagation(),S.value=Q.currentTarget||Q.target,M())},onBlur:Q=>{T=!1,Q.stopPropagation(),O()}},L=computed(()=>{const Q={};return I.value&&(Q.onClick=D.onClick),n.openOnHover&&(Q.onMouseenter=D.onMouseenter,Q.onMouseleave=D.onMouseleave),B.value&&(Q.onFocus=D.onFocus,Q.onBlur=D.onBlur),Q}),V=computed(()=>{const Q={};if(n.openOnHover&&(Q.onMouseenter=()=>{C=!0,M()},Q.onMouseleave=()=>{C=!1,O()}),B.value&&(Q.onFocusin=()=>{T=!0,M()},Q.onFocusout=()=>{T=!1,O()}),n.closeOnContentClick){const re=inject$1(VMenuSymbol,null);Q.onClick=()=>{x.value=!1,re?.closeParents()}}return Q}),U=computed(()=>{const Q={};return n.openOnHover&&(Q.onMouseenter=()=>{A&&(C=!0,A=!1,M())},Q.onMouseleave=()=>{C=!1,O()}),Q});watch(E,Q=>{Q&&(n.openOnHover&&!C&&(!B.value||!T)||B.value&&!T&&(!n.openOnHover||!C))&&(x.value=!1)});const q=ref$1();watchEffect(()=>{q.value&&nextTick$2(()=>{S.value=refElement(q.value)})});const H=getCurrentInstance("useActivator");let W;return watch(()=>!!n.activator,Q=>{Q&&IN_BROWSER?(W=effectScope(),W.run(()=>{_useActivator(n,H,{activatorEl:S,activatorEvents:L})})):W&&W.stop()},{flush:"post",immediate:!0}),onScopeDispose(()=>{W?.stop()}),{activatorEl:S,activatorRef:q,activatorEvents:L,contentEvents:V,scrimEvents:U}}function _useActivator(n,_,x){let{activatorEl:E,activatorEvents:S}=x;watch(()=>n.activator,(B,I)=>{if(I&&B!==I){const M=A(I);M&&T(M)}B&&nextTick$2(()=>C())},{immediate:!0}),watch(()=>n.activatorProps,()=>{C()}),onScopeDispose(()=>{T()});function C(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A(),I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;B&&bindProps(B,mergeProps(S.value,I))}function T(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A(),I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;B&&unbindProps(B,mergeProps(S.value,I))}function A(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.activator,I;if(B)if(B==="parent"){let M=_?.proxy?.$el?.parentNode;for(;M.hasAttribute("data-no-activator");)M=M.parentNode;I=M}else typeof B=="string"?I=document.querySelector(B):"$el"in B?I=B.$el:I=B;return E.value=I?.nodeType===Node.ELEMENT_NODE?I:null,E.value}}function useHydration(){if(!IN_BROWSER)return shallowRef(!1);const{ssr:n}=useDisplay();if(n){const _=shallowRef(!1);return onMounted(()=>{_.value=!0}),_}else return shallowRef(!0)}const makeLazyProps=propsFactory({eager:Boolean},"lazy");function useLazy(n,_){const x=shallowRef(!1),E=computed(()=>x.value||n.eager||_.value);watch(_,()=>x.value=!0);function S(){n.eager||(x.value=!1)}return{isBooted:x,hasContent:E,onAfterLeave:S}}const StackSymbol=Symbol.for("vuetify:stack"),globalStack=reactive([]);function useStack(n,_,x){const E=getCurrentInstance("useStack"),S=!x,C=inject$1(StackSymbol,void 0),T=reactive({activeChildren:new Set});provide(StackSymbol,T);const A=shallowRef(+_.value);useToggleScope(n,()=>{const M=globalStack.at(-1)?.[1];A.value=M?M+10:+_.value,S&&globalStack.push([E.uid,A.value]),C?.activeChildren.add(E.uid),onScopeDispose(()=>{if(S){const O=toRaw(globalStack).findIndex(D=>D[0]===E.uid);globalStack.splice(O,1)}C?.activeChildren.delete(E.uid)})});const B=shallowRef(!0);S&&watchEffect(()=>{const M=globalStack.at(-1)?.[0]===E.uid;setTimeout(()=>B.value=M)});const I=computed(()=>!T.activeChildren.size);return{globalTop:readonly$3(B),localTop:I,stackStyles:computed(()=>({zIndex:A.value}))}}function useTeleport(n){return{teleportTarget:computed(()=>{const x=n.value;if(x===!0||!IN_BROWSER)return;const E=x===!1?document.body:typeof x=="string"?document.querySelector(x):x;if(E==null)return;let S=E.querySelector(":scope > .v-overlay-container");return S||(S=document.createElement("div"),S.className="v-overlay-container",E.appendChild(S)),S})}}function defaultConditional(){return!0}function checkEvent(n,_,x){if(!n||checkIsActive(n,x)===!1)return!1;const E=attachedRoot(_);if(typeof ShadowRoot<"u"&&E instanceof ShadowRoot&&E.host===n.target)return!1;const S=(typeof x.value=="object"&&x.value.include||(()=>[]))();return S.push(_),!S.some(C=>C?.contains(n.target))}function checkIsActive(n,_){return(typeof _.value=="object"&&_.value.closeConditional||defaultConditional)(n)}function directive(n,_,x){const E=typeof x.value=="function"?x.value:x.value.handler;_._clickOutside.lastMousedownWasOutside&&checkEvent(n,_,x)&&setTimeout(()=>{checkIsActive(n,x)&&E&&E(n)},0)}function handleShadow(n,_){const x=attachedRoot(n);_(document),typeof ShadowRoot<"u"&&x instanceof ShadowRoot&&_(x)}const ClickOutside={mounted(n,_){const x=S=>directive(S,n,_),E=S=>{n._clickOutside.lastMousedownWasOutside=checkEvent(S,n,_)};handleShadow(n,S=>{S.addEventListener("click",x,!0),S.addEventListener("mousedown",E,!0)}),n._clickOutside||(n._clickOutside={lastMousedownWasOutside:!1}),n._clickOutside[_.instance.$.uid]={onClick:x,onMousedown:E}},unmounted(n,_){n._clickOutside&&(handleShadow(n,x=>{if(!x||!n._clickOutside?.[_.instance.$.uid])return;const{onClick:E,onMousedown:S}=n._clickOutside[_.instance.$.uid];x.removeEventListener("click",E,!0),x.removeEventListener("mousedown",S,!0)}),delete n._clickOutside[_.instance.$.uid])}};function Scrim(n){const{modelValue:_,color:x,...E}=n;return createVNode(Transition,{name:"fade-transition",appear:!0},{default:()=>[n.modelValue&&createVNode("div",mergeProps({class:["v-overlay__scrim",n.color.backgroundColorClasses.value],style:n.color.backgroundColorStyles.value},E),null)]})}const makeVOverlayProps=propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...makeActivatorProps(),...makeComponentProps(),...makeDimensionProps(),...makeLazyProps(),...makeLocationStrategyProps(),...makeScrollStrategyProps(),...makeThemeProps(),...makeTransitionProps$1()},"VOverlay"),VOverlay=genericComponent()({name:"VOverlay",directives:{ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...makeVOverlayProps()},emits:{"click:outside":n=>!0,"update:modelValue":n=>!0,afterLeave:()=>!0},setup(n,_){let{slots:x,attrs:E,emit:S}=_;const C=useProxiedModel(n,"modelValue"),T=computed({get:()=>C.value,set:oe=>{oe&&n.disabled||(C.value=oe)}}),{teleportTarget:A}=useTeleport(computed(()=>n.attach||n.contained)),{themeClasses:B}=provideTheme(n),{rtlClasses:I,isRtl:M}=useRtl(),{hasContent:O,onAfterLeave:D}=useLazy(n,T),L=useBackgroundColor(computed(()=>typeof n.scrim=="string"?n.scrim:null)),{globalTop:V,localTop:U,stackStyles:q}=useStack(T,toRef(n,"zIndex"),n._disableGlobalStack),{activatorEl:H,activatorRef:W,activatorEvents:Q,contentEvents:re,scrimEvents:ce}=useActivator(n,{isActive:T,isTop:U}),{dimensionStyles:ne}=useDimension(n),Y=useHydration(),{scopeId:fe}=useScopeId();watch(()=>n.disabled,oe=>{oe&&(T.value=!1)});const ge=ref$1(),$e=ref$1(),{contentStyles:_e,updateLocation:ae}=useLocationStrategies(n,{isRtl:M,contentEl:$e,activatorEl:H,isActive:T});useScrollStrategies(n,{root:ge,contentEl:$e,activatorEl:H,isActive:T,updateLocation:ae});function X(oe){S("click:outside",oe),n.persistent?se():T.value=!1}function F(){return T.value&&V.value}IN_BROWSER&&watch(T,oe=>{oe?window.addEventListener("keydown",z):window.removeEventListener("keydown",z)},{immediate:!0});function z(oe){oe.key==="Escape"&&V.value&&(n.persistent?se():(T.value=!1,$e.value?.contains(document.activeElement)&&H.value?.focus()))}const J=useRouter();useToggleScope(()=>n.closeOnBack,()=>{useBackButton(J,oe=>{V.value&&T.value?(oe(!1),n.persistent?se():T.value=!1):oe()})});const te=ref$1();watch(()=>T.value&&(n.absolute||n.contained)&&A.value==null,oe=>{if(oe){const ie=getScrollParent(ge.value);ie&&ie!==document.scrollingElement&&(te.value=ie.scrollTop)}});function se(){n.noClickAnimation||$e.value&&animate($e.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:standardEasing})}return useRender(()=>createVNode(Fragment,null,[x.activator?.({isActive:T.value,props:mergeProps({ref:W},Q.value,n.activatorProps)}),Y.value&&O.value&&createVNode(Teleport,{disabled:!A.value,to:A.value},{default:()=>[createVNode("div",mergeProps({class:["v-overlay",{"v-overlay--absolute":n.absolute||n.contained,"v-overlay--active":T.value,"v-overlay--contained":n.contained},B.value,I.value,n.class],style:[q.value,{top:convertToUnit(te.value)},n.style],ref:ge},fe,E),[createVNode(Scrim,mergeProps({color:L,modelValue:T.value&&!!n.scrim},ce.value),null),createVNode(MaybeTransition,{appear:!0,persisted:!0,transition:n.transition,target:H.value,onAfterLeave:()=>{D(),S("afterLeave")}},{default:()=>[withDirectives(createVNode("div",mergeProps({ref:$e,class:["v-overlay__content",n.contentClass],style:[ne.value,_e.value]},re.value,n.contentProps),[x.default?.({isActive:T})]),[[vShow,T.value],[resolveDirective("click-outside"),{handler:X,closeConditional:F,include:()=>[H.value]}]])]})])]})])),{activatorEl:H,animateClick:se,contentEl:$e,globalTop:V,localTop:U,updateLocation:ae}}}),Refs=Symbol("Forwarded refs");function getDescriptor(n,_){let x=n;for(;x;){const E=Reflect.getOwnPropertyDescriptor(x,_);if(E)return E;x=Object.getPrototypeOf(x)}}function forwardRefs(n){for(var _=arguments.length,x=new Array(_>1?_-1:0),E=1;E<_;E++)x[E-1]=arguments[E];return n[Refs]=x,new Proxy(n,{get(S,C){if(Reflect.has(S,C))return Reflect.get(S,C);if(!(typeof C=="symbol"||C.startsWith("__"))){for(const T of x)if(T.value&&Reflect.has(T.value,C)){const A=Reflect.get(T.value,C);return typeof A=="function"?A.bind(T.value):A}}},has(S,C){if(Reflect.has(S,C))return!0;if(typeof C=="symbol"||C.startsWith("__"))return!1;for(const T of x)if(T.value&&Reflect.has(T.value,C))return!0;return!1},set(S,C,T){if(Reflect.has(S,C))return Reflect.set(S,C,T);if(typeof C=="symbol"||C.startsWith("__"))return!1;for(const A of x)if(A.value&&Reflect.has(A.value,C))return Reflect.set(A.value,C,T);return!1},getOwnPropertyDescriptor(S,C){const T=Reflect.getOwnPropertyDescriptor(S,C);if(T)return T;if(!(typeof C=="symbol"||C.startsWith("__"))){for(const A of x){if(!A.value)continue;const B=getDescriptor(A.value,C)??("_"in A.value?getDescriptor(A.value._?.setupState,C):void 0);if(B)return B}for(const A of x){const B=A.value&&A.value[Refs];if(!B)continue;const I=B.slice();for(;I.length;){const M=I.shift(),O=getDescriptor(M.value,C);if(O)return O;const D=M.value&&M.value[Refs];D&&I.push(...D)}}}}})}const makeVSnackbarProps=propsFactory({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...makeLocationProps({location:"bottom"}),...makePositionProps(),...makeRoundedProps(),...makeVariantProps(),...makeThemeProps(),...omit(makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),VSnackbar=genericComponent()({name:"VSnackbar",props:makeVSnackbarProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{locationStyles:S}=useLocation(n),{positionClasses:C}=usePosition(n),{scopeId:T}=useScopeId(),{themeClasses:A}=provideTheme(n),{colorClasses:B,colorStyles:I,variantClasses:M}=useVariant(n),{roundedClasses:O}=useRounded(n),D=ref$1();watch(E,V),watch(()=>n.timeout,V),onMounted(()=>{E.value&&V()});let L=-1;function V(){window.clearTimeout(L);const q=Number(n.timeout);!E.value||q===-1||(L=window.setTimeout(()=>{E.value=!1},q))}function U(){window.clearTimeout(L)}return useRender(()=>{const[q]=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:D,class:["v-snackbar",{"v-snackbar--active":E.value,"v-snackbar--multi-line":n.multiLine&&!n.vertical,"v-snackbar--vertical":n.vertical},C.value,n.class],style:n.style},q,{modelValue:E.value,"onUpdate:modelValue":H=>E.value=H,contentProps:mergeProps({class:["v-snackbar__wrapper",A.value,B.value,O.value,M.value],style:[S.value,I.value],onPointerenter:U,onPointerleave:V},q.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},T),{default:()=>[genOverlays(!1,"v-snackbar"),x.default&&createVNode("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[x.default()]),x.actions&&createVNode(VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[createVNode("div",{class:"v-snackbar__actions"},[x.actions()])]})],activator:x.activator})}),forwardRefs({},D)}}),_hoisted_1$d={class:"align-self-center",style:{height:"100%"}},_hoisted_2$7={class:"my-auto"},_sfc_main$x=defineComponent$1({__name:"ImageEditable",props:{srcImage:{},imgDefaut:{},maxTailleImage:{},tailleAvatar:{},editable:{type:Boolean}},emits:["imageChangee"],setup(n,{emit:_}){const x=n,{useI18n:E}=_(),{t:S}=E(),C=ref$1(),T=()=>{C.value?.click()},A=ref$1(),B=ref$1(),I=ref$1(),M=computed(()=>B.value?B.value.size>x.maxTailleImage:!1),O=()=>{_("imageChangee",void 0)},D=async()=>{C.value?.files?.length&&(A.value=C.value.files[0])},L=V=>new Promise(U=>{const q=URL.createObjectURL(V),H=new Image;H.onload=()=>{U({hauteur:H.height,largeur:H.width})},H.src=q});return watchEffect(async()=>{if(A.value)if(A.value.size>x.maxTailleImage){const{hauteur:V,largeur:U}=await L(A.value),q=V*U*16/(8*1024)/x.maxTailleImage;try{B.value=convert$2({file:A.value,height:q*V,width:q*U})}catch{B.value=A.value;return}}else B.value=A.value}),watchEffect(async()=>{I.value=await B.value?.arrayBuffer()}),watchEffect(async()=>{I.value&&(M.value||_("imageChangee",I.value))}),(V,U)=>(openBlock(),createBlock(VRow,{class:"text-center"},{default:withCtx(()=>[createBaseVNode("input",{ref_key:"HTMLChoixFichier",ref:C,type:"file",style:{display:"none"},accept:"image/*",onChange:D},null,544),createVNode(VSnackbar,{modelValue:M.value,"onUpdate:modelValue":U[0]||(U[0]=q=>M.value=q),timeout:"5000",color:"error",outlined:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("imageditable.imageTropGrande",{tailleMaxKO:V.maxTailleImage/1e3})),1)]),_:1},8,["modelValue"]),createVNode(VCol,{cols:"12"},{default:withCtx(()=>[createVNode(VHover,{disabled:!V.editable},{default:withCtx(({isHovering:q,props:H})=>[createVNode(VAvatar,mergeProps(H,{class:"mb-3",size:V.tailleAvatar,elevation:q?12:2}),{default:withCtx(()=>[createVNode(VImg,{src:V.srcImage||V.imgDefaut,contain:""},{default:withCtx(()=>[createVNode(VRow,{class:normalizeClass({"ma-0":!0,"on-hover":q,"align-self-center":!0,"fill-height":!0,"flex-column":!0,fond:!0}),style:{"background-color":"black"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createVNode(VRow,{class:"flex-column fill-height ma-0"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$7,[createVNode(VBtn,{class:normalizeClass([{"show-btns":q,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:U[1]||(U[1]=()=>T())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":q}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-camera-outline ")]),_:2},1032,["class"])]),_:2},1032,["class"]),V.srcImage?(openBlock(),createBlock(VBtn,{key:0,class:normalizeClass([{"show-btns":q,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:U[2]||(U[2]=()=>O())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":q}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-close ")]),_:2},1032,["class"])]),_:2},1032,["class"])):createCommentVNode("",!0)])]),_:2},1024)])]),_:2},1032,["class"])]),_:2},1032,["src"])]),_:2},1040,["size","elevation"])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),ImageEditable_vue_vue_type_style_index_0_scoped_3a09e497_lang="",_export_sfc=(n,_)=>{const x=n.__vccOpts||n;for(const[E,S]of _)x[E]=S;return x},ImageEditable=_export_sfc(_sfc_main$x,[["__scopeId","data-v-3a09e497"]]),VCard$1="",VCardActions=genericComponent()({name:"VCardActions",props:makeComponentProps(),setup(n,_){let{slots:x}=_;return provideDefaults({VBtn:{variant:"text"}}),useRender(()=>createVNode("div",{class:["v-card-actions",n.class],style:n.style},[x.default?.()])),{}}}),VCardSubtitle=createSimpleFunctional("v-card-subtitle"),VCardTitle=createSimpleFunctional("v-card-title"),makeCardItemProps=propsFactory({appendAvatar:String,appendIcon:IconValue,prependAvatar:String,prependIcon:IconValue,subtitle:String,title:String,...makeComponentProps(),...makeDensityProps()},"VCardItem"),VCardItem=genericComponent()({name:"VCardItem",props:makeCardItemProps(),setup(n,_){let{slots:x}=_;return useRender(()=>{const E=!!(n.prependAvatar||n.prependIcon),S=!!(E||x.prepend),C=!!(n.appendAvatar||n.appendIcon),T=!!(C||x.append),A=!!(n.title||x.title),B=!!(n.subtitle||x.subtitle);return createVNode("div",{class:["v-card-item",n.class],style:n.style},[S&&createVNode("div",{key:"prepend",class:"v-card-item__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!E,defaults:{VAvatar:{density:n.density,icon:n.prependIcon,image:n.prependAvatar}}},x.prepend):E&&createVNode(VAvatar,{key:"prepend-avatar",density:n.density,icon:n.prependIcon,image:n.prependAvatar},null)]),createVNode("div",{class:"v-card-item__content"},[A&&createVNode(VCardTitle,{key:"title"},{default:()=>[x.title?.()??n.title]}),B&&createVNode(VCardSubtitle,{key:"subtitle"},{default:()=>[x.subtitle?.()??n.subtitle]}),x.default?.()]),T&&createVNode("div",{key:"append",class:"v-card-item__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!C,defaults:{VAvatar:{density:n.density,icon:n.appendIcon,image:n.appendAvatar}}},x.append):C&&createVNode(VAvatar,{key:"append-avatar",density:n.density,icon:n.appendIcon,image:n.appendAvatar},null)])])}),{}}}),VCardText=createSimpleFunctional("v-card-text"),makeVCardProps=propsFactory({appendAvatar:String,appendIcon:IconValue,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VCard"),VCard=genericComponent()({name:"VCard",directives:{Ripple},props:makeVCardProps(),setup(n,_){let{attrs:x,slots:E}=_;const{themeClasses:S}=provideTheme(n),{borderClasses:C}=useBorder(n),{colorClasses:T,colorStyles:A,variantClasses:B}=useVariant(n),{densityClasses:I}=useDensity(n),{dimensionStyles:M}=useDimension(n),{elevationClasses:O}=useElevation(n),{loaderClasses:D}=useLoader(n),{locationStyles:L}=useLocation(n),{positionClasses:V}=usePosition(n),{roundedClasses:U}=useRounded(n),q=useLink$1(n,x),H=computed(()=>n.link!==!1&&q.isLink.value),W=computed(()=>!n.disabled&&n.link!==!1&&(n.link||q.isClickable.value));return useRender(()=>{const Q=H.value?"a":n.tag,re=!!(E.title||n.title),ce=!!(E.subtitle||n.subtitle),ne=re||ce,Y=!!(E.append||n.appendAvatar||n.appendIcon),fe=!!(E.prepend||n.prependAvatar||n.prependIcon),ge=!!(E.image||n.image),$e=ne||fe||Y,_e=!!(E.text||n.text);return withDirectives(createVNode(Q,{class:["v-card",{"v-card--disabled":n.disabled,"v-card--flat":n.flat,"v-card--hover":n.hover&&!(n.disabled||n.flat),"v-card--link":W.value},S.value,C.value,T.value,I.value,O.value,D.value,V.value,U.value,B.value,n.class],style:[A.value,M.value,L.value,n.style],href:q.href.value,onClick:W.value&&q.navigate,tabindex:n.disabled?-1:void 0},{default:()=>[ge&&createVNode("div",{key:"image",class:"v-card__image"},[E.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!n.image,defaults:{VImg:{cover:!0,src:n.image}}},E.image):createVNode(VImg,{key:"image-img",cover:!0,src:n.image},null)]),createVNode(LoaderSlot,{name:"v-card",active:!!n.loading,color:typeof n.loading=="boolean"?void 0:n.loading},{default:E.loader}),$e&&createVNode(VCardItem,{key:"item",prependAvatar:n.prependAvatar,prependIcon:n.prependIcon,title:n.title,subtitle:n.subtitle,appendAvatar:n.appendAvatar,appendIcon:n.appendIcon},{default:E.item,prepend:E.prepend,title:E.title,subtitle:E.subtitle,append:E.append}),_e&&createVNode(VCardText,{key:"text"},{default:()=>[E.text?.()??n.text]}),E.default?.(),E.actions&&createVNode(VCardActions,null,{default:E.actions}),genOverlays(W.value,"v-card")]}),[[resolveDirective("ripple"),W.value&&n.ripple]])}),{}}}),VDialog$1="",makeVDialogProps=propsFactory({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...makeVOverlayProps({origin:"center center",scrollStrategy:"block",transition:{component:VDialogTransition},zIndex:2400})},"VDialog"),VDialog=genericComponent()({name:"VDialog",props:makeVDialogProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{scopeId:S}=useScopeId(),C=ref$1();function T(B){const I=B.relatedTarget,M=B.target;if(I!==M&&C.value?.contentEl&&C.value?.globalTop&&![document,C.value.contentEl].includes(M)&&!C.value.contentEl.contains(M)){const O=focusableChildren(C.value.contentEl);if(!O.length)return;const D=O[0],L=O[O.length-1];I===D?L.focus():D.focus()}}IN_BROWSER&&watch(()=>E.value&&n.retainFocus,B=>{B?document.addEventListener("focusin",T):document.removeEventListener("focusin",T)},{immediate:!0}),watch(E,async B=>{await nextTick$2(),B?C.value.contentEl?.focus({preventScroll:!0}):C.value.activatorEl?.focus({preventScroll:!0})});const A=computed(()=>mergeProps({"aria-haspopup":"dialog","aria-expanded":String(E.value)},n.activatorProps));return useRender(()=>{const[B]=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:C,class:["v-dialog",{"v-dialog--fullscreen":n.fullscreen,"v-dialog--scrollable":n.scrollable},n.class],style:n.style},B,{modelValue:E.value,"onUpdate:modelValue":I=>E.value=I,"aria-modal":"true",activatorProps:A.value,role:"dialog"},S),{activator:x.activator,default:function(){for(var I=arguments.length,M=new Array(I),O=0;O<I;O++)M[O]=arguments[O];return createVNode(VDefaultsProvider,{root:"VDialog"},{default:()=>[x.default?.(...M)]})}})}),forwardRefs({},C)}}),VTextField$1="",VCounter$1="",makeVCounterProps=propsFactory({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition}})},"VCounter"),VCounter=genericComponent()({name:"VCounter",functional:!0,props:makeVCounterProps(),setup(n,_){let{slots:x}=_;const E=computed(()=>n.max?`${n.value} / ${n.max}`:String(n.value));return useRender(()=>createVNode(MaybeTransition,{transition:n.transition},{default:()=>[withDirectives(createVNode("div",{class:["v-counter",n.class],style:n.style},[x.default?x.default({counter:E.value,max:n.max,value:n.value}):E.value]),[[vShow,n.active]])]})),{}}}),VField$1="",VLabel$1="",makeVLabelProps=propsFactory({text:String,clickable:Boolean,...makeComponentProps(),...makeThemeProps()},"VLabel"),VLabel=genericComponent()({name:"VLabel",props:makeVLabelProps(),setup(n,_){let{slots:x}=_;return useRender(()=>createVNode("label",{class:["v-label",{"v-label--clickable":n.clickable},n.class],style:n.style},[n.text,x.default?.()])),{}}}),makeVFieldLabelProps=propsFactory({floating:Boolean,...makeComponentProps()},"VFieldLabel"),VFieldLabel=genericComponent()({name:"VFieldLabel",props:makeVFieldLabelProps(),setup(n,_){let{slots:x}=_;return useRender(()=>createVNode(VLabel,{class:["v-field-label",{"v-field-label--floating":n.floating},n.class],style:n.style,"aria-hidden":n.floating||void 0},x)),{}}});function useInputIcon(n){const{t:_}=useLocale();function x(E){let{name:S}=E;const C={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[S],T=n[`onClick:${S}`],A=T&&C?_(`$vuetify.input.${C}`,n.label??""):void 0;return createVNode(VIcon,{icon:n[`${S}Icon`],"aria-label":A,onClick:T},null)}return{InputIcon:x}}const makeFocusProps=propsFactory({focused:Boolean,"onUpdate:focused":EventProp()},"focus");function useFocus(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const x=useProxiedModel(n,"focused"),E=computed(()=>({[`${_}--focused`]:x.value}));function S(){x.value=!0}function C(){x.value=!1}return{focusClasses:E,isFocused:x,focus:S,blur:C}}const allowedVariants=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],makeVFieldProps=propsFactory({appendInnerIcon:IconValue,bgColor:String,clearable:Boolean,clearIcon:{type:IconValue,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:IconValue,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:n=>allowedVariants.includes(n)},"onClick:clear":EventProp(),"onClick:appendInner":EventProp(),"onClick:prependInner":EventProp(),...makeComponentProps(),...makeLoaderProps(),...makeRoundedProps(),...makeThemeProps()},"VField"),VField=genericComponent()({name:"VField",inheritAttrs:!1,props:{id:String,...makeFocusProps(),...makeVFieldProps()},emits:{"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,_){let{attrs:x,emit:E,slots:S}=_;const{themeClasses:C}=provideTheme(n),{loaderClasses:T}=useLoader(n),{focusClasses:A,isFocused:B,focus:I,blur:M}=useFocus(n),{InputIcon:O}=useInputIcon(n),{roundedClasses:D}=useRounded(n),{rtlClasses:L}=useRtl(),V=computed(()=>n.dirty||n.active),U=computed(()=>!n.singleLine&&!!(n.label||S.label)),q=getUid(),H=computed(()=>n.id||`input-${q}`),W=computed(()=>`${H.value}-messages`),Q=ref$1(),re=ref$1(),ce=ref$1(),ne=computed(()=>["plain","underlined"].includes(n.variant)),{backgroundColorClasses:Y,backgroundColorStyles:fe}=useBackgroundColor(toRef(n,"bgColor")),{textColorClasses:ge,textColorStyles:$e}=useTextColor(computed(()=>n.error||n.disabled?void 0:V.value&&B.value?n.color:n.baseColor));watch(V,X=>{if(U.value){const F=Q.value.$el,z=re.value.$el;requestAnimationFrame(()=>{const J=nullifyTransforms(F),te=z.getBoundingClientRect(),se=te.x-J.x,oe=te.y-J.y-(J.height/2-te.height/2),ie=te.width/.75,G=Math.abs(ie-J.width)>1?{maxWidth:convertToUnit(ie)}:void 0,j=getComputedStyle(F),ee=getComputedStyle(z),pe=parseFloat(j.transitionDuration)*1e3||150,he=parseFloat(ee.getPropertyValue("--v-field-label-scale")),Se=ee.getPropertyValue("color");F.style.visibility="visible",z.style.visibility="hidden",animate(F,{transform:`translate(${se}px, ${oe}px) scale(${he})`,color:Se,...G},{duration:pe,easing:standardEasing,direction:X?"normal":"reverse"}).finished.then(()=>{F.style.removeProperty("visibility"),z.style.removeProperty("visibility")})})}},{flush:"post"});const _e=computed(()=>({isActive:V,isFocused:B,controlRef:ce,blur:M,focus:I}));function ae(X){X.target!==document.activeElement&&X.preventDefault()}return useRender(()=>{const X=n.variant==="outlined",F=S["prepend-inner"]||n.prependInnerIcon,z=!!(n.clearable||S.clear),J=!!(S["append-inner"]||n.appendInnerIcon||z),te=S.label?S.label({..._e.value,label:n.label,props:{for:H.value}}):n.label;return createVNode("div",mergeProps({class:["v-field",{"v-field--active":V.value,"v-field--appended":J,"v-field--center-affix":n.centerAffix??!ne.value,"v-field--disabled":n.disabled,"v-field--dirty":n.dirty,"v-field--error":n.error,"v-field--flat":n.flat,"v-field--has-background":!!n.bgColor,"v-field--persistent-clear":n.persistentClear,"v-field--prepended":F,"v-field--reverse":n.reverse,"v-field--single-line":n.singleLine,"v-field--no-label":!te,[`v-field--variant-${n.variant}`]:!0},C.value,Y.value,A.value,T.value,D.value,L.value,n.class],style:[fe.value,n.style],onClick:ae},x),[createVNode("div",{class:"v-field__overlay"},null),createVNode(LoaderSlot,{name:"v-field",active:!!n.loading,color:n.error?"error":typeof n.loading=="string"?n.loading:n.color},{default:S.loader}),F&&createVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[n.prependInnerIcon&&createVNode(O,{key:"prepend-icon",name:"prependInner"},null),S["prepend-inner"]?.(_e.value)]),createVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(n.variant)&&U.value&&createVNode(VFieldLabel,{key:"floating-label",ref:re,class:[ge.value],floating:!0,for:H.value,style:$e.value},{default:()=>[te]}),createVNode(VFieldLabel,{ref:Q,for:H.value},{default:()=>[te]}),S.default?.({..._e.value,props:{id:H.value,class:"v-field__input","aria-describedby":W.value},focus:I,blur:M})]),z&&createVNode(VExpandXTransition,{key:"clear"},{default:()=>[withDirectives(createVNode("div",{class:"v-field__clearable",onMousedown:se=>{se.preventDefault(),se.stopPropagation()}},[S.clear?S.clear():createVNode(O,{name:"clear"},null)]),[[vShow,n.dirty]])]}),J&&createVNode("div",{key:"append",class:"v-field__append-inner"},[S["append-inner"]?.(_e.value),n.appendInnerIcon&&createVNode(O,{key:"append-icon",name:"appendInner"},null)]),createVNode("div",{class:["v-field__outline",ge.value],style:$e.value},[X&&createVNode(Fragment,null,[createVNode("div",{class:"v-field__outline__start"},null),U.value&&createVNode("div",{class:"v-field__outline__notch"},[createVNode(VFieldLabel,{ref:re,floating:!0,for:H.value},{default:()=>[te]})]),createVNode("div",{class:"v-field__outline__end"},null)]),ne.value&&U.value&&createVNode(VFieldLabel,{ref:re,floating:!0,for:H.value},{default:()=>[te]})])])}),{controlRef:ce}}});function filterFieldProps(n){const _=Object.keys(VField.props).filter(x=>!isOn(x)&&x!=="class"&&x!=="style");return pick$1(n,_)}const VInput$1="",VMessages$1="",makeVMessagesProps=propsFactory({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition,leaveAbsolute:!0,group:!0}})},"VMessages"),VMessages=genericComponent()({name:"VMessages",props:makeVMessagesProps(),setup(n,_){let{slots:x}=_;const E=computed(()=>wrapInArray(n.messages)),{textColorClasses:S,textColorStyles:C}=useTextColor(computed(()=>n.color));return useRender(()=>createVNode(MaybeTransition,{transition:n.transition,tag:"div",class:["v-messages",S.value,n.class],style:[C.value,n.style],role:"alert","aria-live":"polite"},{default:()=>[n.active&&E.value.map((T,A)=>createVNode("div",{class:"v-messages__message",key:`${A}-${E.value}`},[x.message?x.message({message:T}):T]))]})),{}}}),FormKey=Symbol.for("vuetify:form");function useForm(){return inject$1(FormKey,null)}const makeValidationProps=propsFactory({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...makeFocusProps()},"validation");function useValidation(n){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName(),x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:getUid();const E=useProxiedModel(n,"modelValue"),S=computed(()=>n.validationValue===void 0?E.value:n.validationValue),C=useForm(),T=ref$1([]),A=shallowRef(!0),B=computed(()=>!!(wrapInArray(E.value===""?null:E.value).length||wrapInArray(S.value===""?null:S.value).length)),I=computed(()=>!!(n.disabled??C?.isDisabled.value)),M=computed(()=>!!(n.readonly??C?.isReadonly.value)),O=computed(()=>n.errorMessages.length?wrapInArray(n.errorMessages).slice(0,Math.max(0,+n.maxErrors)):T.value),D=computed(()=>{let re=(n.validateOn??C?.validateOn.value)||"input";re==="lazy"&&(re="input lazy");const ce=new Set(re?.split(" ")??[]);return{blur:ce.has("blur")||ce.has("input"),input:ce.has("input"),submit:ce.has("submit"),lazy:ce.has("lazy")}}),L=computed(()=>n.error||n.errorMessages.length?!1:n.rules.length?A.value?T.value.length||D.value.lazy?null:!0:!T.value.length:!0),V=shallowRef(!1),U=computed(()=>({[`${_}--error`]:L.value===!1,[`${_}--dirty`]:B.value,[`${_}--disabled`]:I.value,[`${_}--readonly`]:M.value})),q=computed(()=>n.name??unref(x));onBeforeMount(()=>{C?.register({id:q.value,validate:Q,reset:H,resetValidation:W})}),onBeforeUnmount(()=>{C?.unregister(q.value)}),onMounted(async()=>{D.value.lazy||await Q(!0),C?.update(q.value,L.value,O.value)}),useToggleScope(()=>D.value.input,()=>{watch(S,()=>{if(S.value!=null)Q();else if(n.focused){const re=watch(()=>n.focused,ce=>{ce||Q(),re()})}})}),useToggleScope(()=>D.value.blur,()=>{watch(()=>n.focused,re=>{re||Q()})}),watch(L,()=>{C?.update(q.value,L.value,O.value)});function H(){E.value=null,nextTick$2(W)}function W(){A.value=!0,D.value.lazy?T.value=[]:Q(!0)}async function Q(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ce=[];V.value=!0;for(const ne of n.rules){if(ce.length>=+(n.maxErrors??1))break;const fe=await(typeof ne=="function"?ne:()=>ne)(S.value);if(fe!==!0){if(fe!==!1&&typeof fe!="string"){console.warn(`${fe} is not a valid value. Rule functions must return boolean true or a string.`);continue}ce.push(fe||"")}}return T.value=ce,V.value=!1,A.value=re,T.value}return{errorMessages:O,isDirty:B,isDisabled:I,isReadonly:M,isPristine:A,isValid:L,isValidating:V,reset:H,resetValidation:W,validate:Q,validationClasses:U}}const makeVInputProps=propsFactory({id:String,appendIcon:IconValue,centerAffix:{type:Boolean,default:!0},prependIcon:IconValue,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:n=>["horizontal","vertical"].includes(n)},"onClick:prepend":EventProp(),"onClick:append":EventProp(),...makeComponentProps(),...makeDensityProps(),...makeValidationProps()},"VInput"),VInput=genericComponent()({name:"VInput",props:{...makeVInputProps()},emits:{"update:modelValue":n=>!0},setup(n,_){let{attrs:x,slots:E,emit:S}=_;const{densityClasses:C}=useDensity(n),{rtlClasses:T}=useRtl(),{InputIcon:A}=useInputIcon(n),B=getUid(),I=computed(()=>n.id||`input-${B}`),M=computed(()=>`${I.value}-messages`),{errorMessages:O,isDirty:D,isDisabled:L,isReadonly:V,isPristine:U,isValid:q,isValidating:H,reset:W,resetValidation:Q,validate:re,validationClasses:ce}=useValidation(n,"v-input",I),ne=computed(()=>({id:I,messagesId:M,isDirty:D,isDisabled:L,isReadonly:V,isPristine:U,isValid:q,isValidating:H,reset:W,resetValidation:Q,validate:re})),Y=computed(()=>n.errorMessages?.length||!U.value&&O.value.length?O.value:n.hint&&(n.persistentHint||n.focused)?n.hint:n.messages);return useRender(()=>{const fe=!!(E.prepend||n.prependIcon),ge=!!(E.append||n.appendIcon),$e=Y.value.length>0,_e=!n.hideDetails||n.hideDetails==="auto"&&($e||!!E.details);return createVNode("div",{class:["v-input",`v-input--${n.direction}`,{"v-input--center-affix":n.centerAffix},C.value,T.value,ce.value,n.class],style:n.style},[fe&&createVNode("div",{key:"prepend",class:"v-input__prepend"},[E.prepend?.(ne.value),n.prependIcon&&createVNode(A,{key:"prepend-icon",name:"prepend"},null)]),E.default&&createVNode("div",{class:"v-input__control"},[E.default?.(ne.value)]),ge&&createVNode("div",{key:"append",class:"v-input__append"},[n.appendIcon&&createVNode(A,{key:"append-icon",name:"append"},null),E.append?.(ne.value)]),_e&&createVNode("div",{class:"v-input__details"},[createVNode(VMessages,{id:M.value,active:$e,messages:Y.value},{message:E.message}),E.details?.(ne.value)])])}),{reset:W,resetValidation:Q,validate:re}}}),activeTypes=["color","file","time","date","datetime-local","week","month"],makeVTextFieldProps=propsFactory({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextField"),VTextField=genericComponent()({name:"VTextField",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextFieldProps(),emits:{"click:control":n=>!0,"mousedown:control":n=>!0,"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,_){let{attrs:x,emit:E,slots:S}=_;const C=useProxiedModel(n,"modelValue"),{isFocused:T,focus:A,blur:B}=useFocus(n),I=computed(()=>typeof n.counterValue=="function"?n.counterValue(C.value):(C.value??"").toString().length),M=computed(()=>{if(x.maxlength)return x.maxlength;if(!(!n.counter||typeof n.counter!="number"&&typeof n.counter!="string"))return n.counter}),O=computed(()=>["plain","underlined"].includes(n.variant));function D(ne,Y){!n.autofocus||!ne||Y[0].target?.focus?.()}const L=ref$1(),V=ref$1(),U=ref$1(),q=computed(()=>activeTypes.includes(n.type)||n.persistentPlaceholder||T.value||n.active);function H(){U.value!==document.activeElement&&U.value?.focus(),T.value||A()}function W(ne){E("mousedown:control",ne),ne.target!==U.value&&(H(),ne.preventDefault())}function Q(ne){H(),E("click:control",ne)}function re(ne){ne.stopPropagation(),H(),nextTick$2(()=>{C.value=null,callEvent(n["onClick:clear"],ne)})}function ce(ne){const Y=ne.target;if(C.value=Y.value,n.modelModifiers?.trim&&["text","search","password","tel","url"].includes(n.type)){const fe=[Y.selectionStart,Y.selectionEnd];nextTick$2(()=>{Y.selectionStart=fe[0],Y.selectionEnd=fe[1]})}}return useRender(()=>{const ne=!!(S.counter||n.counter||n.counterValue),Y=!!(ne||S.details),[fe,ge]=filterInputAttrs(x),[{modelValue:$e,..._e}]=VInput.filterProps(n),[ae]=filterFieldProps(n);return createVNode(VInput,mergeProps({ref:L,modelValue:C.value,"onUpdate:modelValue":X=>C.value=X,class:["v-text-field",{"v-text-field--prefixed":n.prefix,"v-text-field--suffixed":n.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(n.variant)},n.class],style:n.style},fe,_e,{centerAffix:!O.value,focused:T.value}),{...S,default:X=>{let{id:F,isDisabled:z,isDirty:J,isReadonly:te,isValid:se}=X;return createVNode(VField,mergeProps({ref:V,onMousedown:W,onClick:Q,"onClick:clear":re,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"],role:n.role},ae,{id:F.value,active:q.value||J.value,dirty:J.value||n.dirty,disabled:z.value,focused:T.value,error:se.value===!1}),{...S,default:oe=>{let{props:{class:ie,...G}}=oe;const j=withDirectives(createVNode("input",mergeProps({ref:U,value:C.value,onInput:ce,autofocus:n.autofocus,readonly:te.value,disabled:z.value,name:n.name,placeholder:n.placeholder,size:1,type:n.type,onFocus:H,onBlur:B},G,ge),null),[[resolveDirective("intersect"),{handler:D},null,{once:!0}]]);return createVNode(Fragment,null,[n.prefix&&createVNode("span",{class:"v-text-field__prefix"},[createVNode("span",{class:"v-text-field__prefix__text"},[n.prefix])]),S.default?createVNode("div",{class:ie,"data-no-activator":""},[S.default(),j]):cloneVNode(j,{class:ie}),n.suffix&&createVNode("span",{class:"v-text-field__suffix"},[createVNode("span",{class:"v-text-field__suffix__text"},[n.suffix])])])}})},details:Y?X=>createVNode(Fragment,null,[S.details?.(X),ne&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:n.persistentCounter||T.value,value:I.value,max:M.value},S.counter)])]):void 0})}),forwardRefs({},L,V,U)}}),VWindow$1="",handleGesture=n=>{const{touchstartX:_,touchendX:x,touchstartY:E,touchendY:S}=n,C=.5,T=16;n.offsetX=x-_,n.offsetY=S-E,Math.abs(n.offsetY)<C*Math.abs(n.offsetX)&&(n.left&&x<_-T&&n.left(n),n.right&&x>_+T&&n.right(n)),Math.abs(n.offsetX)<C*Math.abs(n.offsetY)&&(n.up&&S<E-T&&n.up(n),n.down&&S>E+T&&n.down(n))};function touchstart(n,_){const x=n.changedTouches[0];_.touchstartX=x.clientX,_.touchstartY=x.clientY,_.start?.({originalEvent:n,..._})}function touchend(n,_){const x=n.changedTouches[0];_.touchendX=x.clientX,_.touchendY=x.clientY,_.end?.({originalEvent:n,..._}),handleGesture(_)}function touchmove(n,_){const x=n.changedTouches[0];_.touchmoveX=x.clientX,_.touchmoveY=x.clientY,_.move?.({originalEvent:n,..._})}function createHandlers(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:x=>touchstart(x,_),touchend:x=>touchend(x,_),touchmove:x=>touchmove(x,_)}}function mounted(n,_){const x=_.value,E=x?.parent?n.parentElement:n,S=x?.options??{passive:!0},C=_.instance?.$.uid;if(!E||!C)return;const T=createHandlers(_.value);E._touchHandlers=E._touchHandlers??Object.create(null),E._touchHandlers[C]=T,keys$4(T).forEach(A=>{E.addEventListener(A,T[A],S)})}function unmounted(n,_){const x=_.value?.parent?n.parentElement:n,E=_.instance?.$.uid;if(!x?._touchHandlers||!E)return;const S=x._touchHandlers[E];keys$4(S).forEach(C=>{x.removeEventListener(C,S[C])}),delete x._touchHandlers[E]}const Touch={mounted,unmounted},Touch$1=Touch,VWindowSymbol=Symbol.for("vuetify:v-window"),VWindowGroupSymbol=Symbol.for("vuetify:v-window-group"),makeVWindowProps=propsFactory({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...makeComponentProps(),...makeTagProps(),...makeThemeProps()},"VWindow"),VWindow=genericComponent()({name:"VWindow",directives:{Touch},props:makeVWindowProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const{themeClasses:E}=provideTheme(n),{isRtl:S}=useRtl(),{t:C}=useLocale(),T=useGroup(n,VWindowGroupSymbol),A=ref$1(),B=computed(()=>S.value?!n.reverse:n.reverse),I=shallowRef(!1),M=computed(()=>{const re=n.direction==="vertical"?"y":"x",ne=(B.value?!I.value:I.value)?"-reverse":"";return`v-window-${re}${ne}-transition`}),O=shallowRef(0),D=ref$1(void 0),L=computed(()=>T.items.value.findIndex(re=>T.selected.value.includes(re.id)));watch(L,(re,ce)=>{const ne=T.items.value.length,Y=ne-1;ne<=2?I.value=re<ce:re===Y&&ce===0?I.value=!0:re===0&&ce===Y?I.value=!1:I.value=re<ce}),provide(VWindowSymbol,{transition:M,isReversed:I,transitionCount:O,transitionHeight:D,rootRef:A});const V=computed(()=>n.continuous||L.value!==0),U=computed(()=>n.continuous||L.value!==T.items.value.length-1);function q(){V.value&&T.prev()}function H(){U.value&&T.next()}const W=computed(()=>{const re=[],ce={icon:S.value?n.nextIcon:n.prevIcon,class:`v-window__${B.value?"right":"left"}`,onClick:T.prev,ariaLabel:C("$vuetify.carousel.prev")};re.push(V.value?x.prev?x.prev({props:ce}):createVNode(VBtn,ce,null):createVNode("div",null,null));const ne={icon:S.value?n.prevIcon:n.nextIcon,class:`v-window__${B.value?"left":"right"}`,onClick:T.next,ariaLabel:C("$vuetify.carousel.next")};return re.push(U.value?x.next?x.next({props:ne}):createVNode(VBtn,ne,null):createVNode("div",null,null)),re}),Q=computed(()=>n.touch===!1?n.touch:{...{left:()=>{B.value?q():H()},right:()=>{B.value?H():q()},start:ce=>{let{originalEvent:ne}=ce;ne.stopPropagation()}},...n.touch===!0?{}:n.touch});return useRender(()=>withDirectives(createVNode(n.tag,{ref:A,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},E.value,n.class],style:n.style},{default:()=>[createVNode("div",{class:"v-window__container",style:{height:D.value}},[x.default?.({group:T}),n.showArrows!==!1&&createVNode("div",{class:"v-window__controls"},[W.value])]),x.additional?.({group:T})]}),[[resolveDirective("touch"),Q.value]])),{group:T}}}),makeVWindowItemProps=propsFactory({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...makeComponentProps(),...makeGroupItemProps(),...makeLazyProps()},"VWindowItem"),VWindowItem=genericComponent()({name:"VWindowItem",directives:{Touch:Touch$1},props:makeVWindowItemProps(),emits:{"group:selected":n=>!0},setup(n,_){let{slots:x}=_;const E=inject$1(VWindowSymbol),S=useGroupItem(n,VWindowGroupSymbol),{isBooted:C}=useSsrBoot();if(!E||!S)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const T=shallowRef(!1),A=computed(()=>C.value&&(E.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function B(){!T.value||!E||(T.value=!1,E.transitionCount.value>0&&(E.transitionCount.value-=1,E.transitionCount.value===0&&(E.transitionHeight.value=void 0)))}function I(){T.value||!E||(T.value=!0,E.transitionCount.value===0&&(E.transitionHeight.value=convertToUnit(E.rootRef.value?.clientHeight)),E.transitionCount.value+=1)}function M(){B()}function O(V){T.value&&nextTick$2(()=>{!A.value||!T.value||!E||(E.transitionHeight.value=convertToUnit(V.clientHeight))})}const D=computed(()=>{const V=E.isReversed.value?n.reverseTransition:n.transition;return A.value?{name:typeof V!="string"?E.transition.value:V,onBeforeEnter:I,onAfterEnter:B,onEnterCancelled:M,onBeforeLeave:I,onAfterLeave:B,onLeaveCancelled:M,onEnter:O}:!1}),{hasContent:L}=useLazy(n,S.isSelected);return useRender(()=>createVNode(MaybeTransition,{transition:D.value,disabled:!C.value},{default:()=>[withDirectives(createVNode("div",{class:["v-window-item",S.selectedClass.value,n.class],style:n.style},[L.value&&x.default?.()]),[[vShow,S.isSelected.value]])]})),{groupItem:S}}}),_hoisted_1$c={class:"mt-3 text-center text-caption"},_hoisted_2$6={class:"mb-4"},_hoisted_3$4={key:0,class:"text-center"},_hoisted_4$2={key:1,class:"text-center"},_hoisted_5$1={class:"text-center"},_hoisted_6$1={class:"text-h6 font-weight-light mb-2"},_sfc_main$w=defineComponent$1({__name:"InitialiserCompte",setup(n){const{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),{obtImageDco:S}=utiliserImagesDco(),C=inject$1("constl"),T=new Nuchabl({}),A=ref$1(!1),B=ref$1(0),I=["noms","image","persister","cestParti"],M=()=>{switch(I[B.value]){case"image":B.value=I.indexOf(isBrowser$1?"persister":"cestParti");break;default:B.value++;break}},O=()=>{switch(I[B.value]){case"cestParti":B.value=I.indexOf(isBrowser$1?"persister":"image");break;default:B.value--;break}},D=computed(()=>{switch(I[B.value]){case"noms":return{actif:!!q.value,visible:!0};case"cestParti":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),L=computed(()=>{switch(I[B.value]){case"noms":return{actif:!1,visible:!1};case"cestParti":return{actif:!ge.value,visible:!0};default:return{actif:!0,visible:!0}}}),V=computed(()=>{switch(I[B.value]){case"noms":return x("...");case"image":return x("...");case"persister":return x("...");case"cestParti":return x("...");default:return""}}),U=computed(()=>{switch(I[B.value]){default:return""}}),q=ref$1(),H=computed(()=>{if(!q.value?.length)return;const ae=T.rutzibTzibanem({runuk:""});return ae&&!q.value.match(new RegExp(ae,"g"))?[x(".",{langue:q.value})]:void 0}),W=ref$1(),Q=computed(()=>{if(W.value)return URL.createObjectURL(new Blob([W.value],{type:"image"}))}),re=S("profil"),ce=ae=>{W.value=ae},ne=async()=>{await navigator.storage.persist()&&(M(),Y.value=!0)},Y=ref$1(!1);navigator.storage.persisted().then(ae=>Y.value=ae);const fe=ref$1();__vitePreload(()=>import("./logo-0cc4e638.js"),[]).then(ae=>fe.value=ae.default);const ge=ref$1(!1),$e=async()=>{ge.value=!0,!(!C||!q.value)&&(await C.profil.sauvegarderNom({langue:"",nom:q.value}),W.value&&await C.profil?.sauvegarderImage({image:W.value}),ge.value=!1)},_e=ref$1();return C?.suivreIdCompte({f:ae=>_e.value=ae}),(ae,X)=>(openBlock(),createBlock(VDialog,{modelValue:A.value,"onUpdate:modelValue":X[7]||(X[7]=F=>A.value=F)},{activator:withCtx(({props:F})=>[renderSlot(ae.$slots,"activator",normalizeProps(guardReactiveProps({props:F})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(V.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(U.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":X[6]||(X[6]=F=>B.value=F),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VTextField,{modelValue:q.value,"onUpdate:modelValue":X[0]||(X[0]=F=>q.value=F),label:unref(x)("..."),rules:H.value,variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(ImageEditable,{editable:!0,"src-image":Q.value,"img-defaut":unref(re),"max-taille-image":unref(MAX_TAILLE_IMAGE$4),"taille-avatar":150,onImageChangee:X[1]||(X[1]=F=>ce(F))},null,8,["src-image","img-defaut","max-taille-image"]),createBaseVNode("p",_hoisted_1$c,toDisplayString$1(unref(x)("...")),1)]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createBaseVNode("p",_hoisted_2$6,toDisplayString$1(unref(x)("...")),1),Y.value?(openBlock(),createElementBlock("div",_hoisted_3$4,[createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:X[2]||(X[2]=F=>B.value++)},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(x)("...")),1)]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_4$2,[createVNode(VBtn,{class:"mt-3 mx-3",color:"primary",variant:"flat",onClick:X[3]||(X[3]=()=>ne())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("...")),1)]),_:1}),createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:X[4]||(X[4]=F=>B.value++)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("...")),1)]),_:1})]))]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VImg,{class:"mb-4",contain:"",height:"128",src:fe.value},null,8,["src"]),createBaseVNode("div",_hoisted_5$1,[createBaseVNode("h3",_hoisted_6$1,toDisplayString$1(unref(x)("...")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:ge.value,onClick:X[5]||(X[5]=()=>$e())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("...")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!L.value.actif,onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)(".")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!D.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)(".")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),VFooter$1="",makeVFooterProps=propsFactory({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"footer"}),...makeThemeProps()},"VFooter"),VFooter=genericComponent()({name:"VFooter",props:makeVFooterProps(),setup(n,_){let{slots:x}=_;const{themeClasses:E}=provideTheme(n),{backgroundColorClasses:S,backgroundColorStyles:C}=useBackgroundColor(toRef(n,"color")),{borderClasses:T}=useBorder(n),{elevationClasses:A}=useElevation(n),{roundedClasses:B}=useRounded(n),I=shallowRef(32),{resizeRef:M}=useResizeObserver(L=>{L.length&&(I.value=L[0].target.clientHeight)}),O=computed(()=>n.height==="auto"?I.value:parseInt(n.height,10)),{layoutItemStyles:D}=useLayoutItem({id:n.name,order:computed(()=>parseInt(n.order,10)),position:computed(()=>"bottom"),layoutSize:O,elementSize:computed(()=>n.height==="auto"?void 0:O.value),active:computed(()=>n.app),absolute:toRef(n,"absolute")});return useRender(()=>createVNode(n.tag,{ref:M,class:["v-footer",E.value,S.value,T.value,A.value,B.value,n.class],style:[C.value,n.app?D.value:{height:convertToUnit(n.height)},n.style]},x)),{}}}),_hoisted_1$b={class:"text-subtitle-1 text-disabled"},_hoisted_2$5={class:"my-6",style:{height:"150px"}},_hoisted_3$3={class:"text-disabled"},_sfc_main$v=defineComponent$1({__name:"AccueilInitial",emits:["entrer"],setup(n,{emit:_}){const{mdAndUp:x}=useDisplay(),{useI18n:E}=_(),{t:S}=E(),C=inject$1("constl"),T="0.0.1",{formatterVersion:A}=utiliserNumration(),B=A(T),I=()=>_("entrer"),M=ref$1(3),O=ref$1(2),D=ref$1(!1);onMounted(()=>{setTimeout(()=>D.value=!0,(M.value+O.value)*1e3)});const L=ref$1(!1);C?.obtIdCompte().then(()=>L.value=!0);const V=ref$1();return enregistrercoute(C?.profil.suivreNoms({f:U=>V.value=U})),watchEffect(()=>{D.value&&V.value&&Object.keys(V.value).length&&I()}),(U,q)=>(openBlock(),createElementBlock("div",null,[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createVNode(VRow,{align:"center","no-gutters":"",style:{height:"80%"}},{default:withCtx(()=>[createVNode(VCol,null,{default:withCtx(()=>[createVNode(_sfc_main$y,{largeur:unref(x)?500:250,delai:M.value,debut:O.value},null,8,["largeur","delai","debut"]),createBaseVNode("h1",{class:normalizeClass(["mt-6",unref(x)?"text-h1":"text-h3"])},toDisplayString$1(unref(S)(".")),3),createBaseVNode("p",_hoisted_1$b,toDisplayString$1(unref(S)(".",{version:unref(B)})),1),createBaseVNode("div",_hoisted_2$5,[createVNode(_sfc_main$w,null,{activator:withCtx(({props:H})=>[createVNode(VFadeTransition,mergeProps(H,{"leave-absolute":""}),{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)(".")),1)]),_:1},512),[[vShow,D.value&&L.value]])]),_:2},1040)]),_:1})])]),_:1})]),_:1})]),_:1}),createVNode(VFooter,null,{default:withCtx(()=>[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$3,toDisplayString$1(unref(S)(".")),1)]),_:1})]),_:1})]))}}),VApp$1="",makeVAppProps=propsFactory({...makeComponentProps(),...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},"VApp"),VApp=genericComponent()({name:"VApp",props:makeVAppProps(),setup(n,_){let{slots:x}=_;const E=provideTheme(n),{layoutClasses:S,layoutStyles:C,getLayoutItem:T,items:A,layoutRef:B}=createLayout(n),{rtlClasses:I}=useRtl();return useRender(()=>createVNode("div",{ref:B,class:["v-application",E.themeClasses.value,S.value,I.value,n.class],style:[C.value,n.style]},[createVNode("div",{class:"v-application__wrap"},[x.default?.()])])),{getLayoutItem:T,items:A,theme:E}}}),VLocaleProvider$1="",makeVLocaleProviderProps=propsFactory({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...makeComponentProps()},"VLocaleProvider"),VLocaleProvider=genericComponent()({name:"VLocaleProvider",props:makeVLocaleProviderProps(),setup(n,_){let{slots:x}=_;const{rtlClasses:E}=provideLocale(n);return useRender(()=>createVNode("div",{class:["v-locale-provider",E.value,n.class],style:n.style},[x.default?.()])),{}}}),VMain$1="",makeVMainProps=propsFactory({scrollable:Boolean,...makeComponentProps(),...makeTagProps({tag:"main"})},"VMain"),VMain=genericComponent()({name:"VMain",props:makeVMainProps(),setup(n,_){let{slots:x}=_;const{mainStyles:E}=useLayout(),{ssrBootStyles:S}=useSsrBoot();return useRender(()=>createVNode(n.tag,{class:["v-main",{"v-main--scrollable":n.scrollable},n.class],style:[E.value,S.value,n.style]},{default:()=>[n.scrollable?createVNode("div",{class:"v-main__scroller"},[x.default?.()]):x.default?.()]})),{}}}),_sfc_main$u=defineComponent$1({__name:"App",setup(n){const _=ref$1(!1),{langueDroiteGauche:x}=utiliserLangues(),E=x();return(S,C)=>(openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(E)},{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[_.value?(openBlock(),createBlock(_sfc_main$z,{key:1})):(openBlock(),createBlock(_sfc_main$v,{key:0,onEntrer:C[0]||(C[0]=T=>_.value=!0)}))]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1}))}});let AccessController$1=class extends eventsExports.EventEmitter{static async create(_,x){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}get address(){}async canAppend(_,x){}async grant(_,x){return!1}async revoke(_,x){return!1}async load(_){}async save(){}async close(){}};var encode_1$5=encode$r,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$r(n,_,x){_=_||[],x=x||0;for(var E=x;n>=INT$3;)_[x++]=n&255|MSB$4,n/=128;for(;n&MSBALL$3;)_[x++]=n&255|MSB$4,n>>>=7;return _[x]=n|0,encode$r.bytes=x-E+1,_}var decode$s=read$7,MSB$1$3=128,REST$1$3=127;function read$7(n,E){var x=0,E=E||0,S=0,C=E,T,A=n.length;do{if(C>=A)throw read$7.bytes=0,new RangeError("Could not decode varint");T=n[C++],x+=S<28?(T&REST$1$3)<<S:(T&REST$1$3)*Math.pow(2,S),S+=7}while(T>=MSB$1$3);return read$7.bytes=C-E,x}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$3=function(n){return n<N1$3?1:n<N2$3?2:n<N3$3?3:n<N4$3?4:n<N5$3?5:n<N6$3?6:n<N7$3?7:n<N8$3?8:n<N9$3?9:10},varint$3={encode:encode_1$5,decode:decode$s,encodingLength:length$3},_brrp_varint$3=varint$3;const decode$r=(n,_=0)=>[_brrp_varint$3.decode(n,_),_brrp_varint$3.decode.bytes],encodeTo$3=(n,_,x=0)=>(_brrp_varint$3.encode(n,_,x),_),encodingLength$3=n=>_brrp_varint$3.encodingLength(n),equals$6=(n,_)=>{if(n===_)return!0;if(n.byteLength!==_.byteLength)return!1;for(let x=0;x<n.byteLength;x++)if(n[x]!==_[x])return!1;return!0},coerce$4=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},create$6=(n,_)=>{const x=_.byteLength,E=encodingLength$3(n),S=E+encodingLength$3(x),C=new Uint8Array(S+x);return encodeTo$3(n,C,0),encodeTo$3(x,C,E),C.set(_,S),new Digest$3(n,x,_,C)},decode$q=n=>{const _=coerce$4(n),[x,E]=decode$r(_),[S,C]=decode$r(_.subarray(E)),T=_.subarray(E+C);if(T.byteLength!==S)throw new Error("Incorrect length");return new Digest$3(x,S,T,_)},equals$5=(n,_)=>{if(n===_)return!0;{const x=_;return n.code===x.code&&n.size===x.size&&x.bytes instanceof Uint8Array&&equals$6(n.bytes,x.bytes)}};let Digest$3=class{constructor(_,x,E,S){this.code=_,this.size=x,this.digest=E,this.bytes=S}};function base$7(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$7=base$7,_brrp__multiformats_scope_baseX$4=src$7;let Encoder$5=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or$4(this,_)}},ComposedDecoder$4=class{constructor(_){this.decoders=_}or(_){return or$4(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$4=(n,_)=>new ComposedDecoder$4({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$5=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$5(_,x,E),this.decoder=new Decoder$5(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$8=({name:n,prefix:_,encode:x,decode:E})=>new Codec$5(n,_,x,E),baseX$4=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX$4(x,_);return from$8({prefix:n,name:_,encode:E,decode:C=>coerce$4(S(C))})},decode$p=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$q=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648$4=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$8({prefix:_,name:n,encode(S){return encode$q(S,E,x)},decode(S){return decode$p(S,E,x,n)}}),base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$4=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$6=(n,_)=>{const{bytes:x,version:E}=n;switch(E){case 0:return toStringV0$2(x,baseCache$2(n),_||base58btc$4.encoder);default:return toStringV1$2(x,baseCache$2(n),_||base32$4.encoder)}},cache$4=new WeakMap,baseCache$2=n=>{const _=cache$4.get(n);if(_==null){const x=new Map;return cache$4.set(n,x),x}return _};let CID$2=class un{constructor(_,x,E,S){this.code=x,this.version=_,this.multihash=E,this.bytes=S,this["/"]=S}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:_,multihash:x}=this;if(_!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(x.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return un.createV0(x)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:_,digest:x}=this.multihash,E=create$6(_,x);return un.createV1(this.code,E)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(_){return un.equals(this,_)}static equals(_,x){const E=x;return E&&_.code===E.code&&_.version===E.version&&equals$5(_.multihash,E.multihash)}toString(_){return format$6(this,_)}toJSON(){return{"/":format$6(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(_){if(_==null)return null;const x=_;if(x instanceof un)return x;if(x["/"]!=null&&x["/"]===x.bytes||x.asCID===x){const{version:E,code:S,multihash:C,bytes:T}=x;return new un(E,S,C,T||encodeCID$2(E,S,C.bytes))}else if(x[cidSymbol$2]===!0){const{version:E,multihash:S,code:C}=x,T=decode$q(S);return un.create(E,C,T)}else return null}static create(_,x,E){if(typeof x!="number")throw new Error("String codecs are no longer supported");if(!(E.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(_){case 0:{if(x!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new un(_,x,E,E.bytes)}case 1:{const S=encodeCID$2(_,x,E.bytes);return new un(_,x,E,S)}default:throw new Error("Invalid version")}}static createV0(_){return un.create(0,DAG_PB_CODE$2,_)}static createV1(_,x){return un.create(1,_,x)}static decode(_){const[x,E]=un.decodeFirst(_);if(E.length)throw new Error("Incorrect length");return x}static decodeFirst(_){const x=un.inspectBytes(_),E=x.size-x.multihashSize,S=coerce$4(_.subarray(E,E+x.multihashSize));if(S.byteLength!==x.multihashSize)throw new Error("Incorrect length");const C=S.subarray(x.multihashSize-x.digestSize),T=new Digest$3(x.multihashCode,x.digestSize,C,S);return[x.version===0?un.createV0(T):un.createV1(x.codec,T),_.subarray(x.size)]}static inspectBytes(_){let x=0;const E=()=>{const[O,D]=decode$r(_.subarray(x));return x+=D,O};let S=E(),C=DAG_PB_CODE$2;if(S===18?(S=0,x=0):C=E(),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const T=x,A=E(),B=E(),I=x+B,M=I-T;return{version:S,codec:C,multihashCode:A,digestSize:B,multihashSize:M,size:I}}static parse(_,x){const[E,S]=parseCIDtoBytes$2(_,x),C=un.decode(S);if(C.version===0&&_[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$2(C).set(E,_),C}};const parseCIDtoBytes$2=(n,_)=>{switch(n[0]){case"Q":{const x=_||base58btc$4;return[base58btc$4.prefix,x.decode(`${base58btc$4.prefix}${n}`)]}case base58btc$4.prefix:{const x=_||base58btc$4;return[base58btc$4.prefix,x.decode(n)]}case base32$4.prefix:{const x=_||base32$4;return[base32$4.prefix,x.decode(n)]}default:{if(_==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],_.decode(n)]}}},toStringV0$2=(n,_,x)=>{const{prefix:E}=x;if(E!==base58btc$4.prefix)throw Error(`Cannot string encode V0 in ${x.name} encoding`);const S=_.get(E);if(S==null){const C=x.encode(n).slice(1);return _.set(E,C),C}else return S},toStringV1$2=(n,_,x)=>{const{prefix:E}=x,S=_.get(E);if(S==null){const C=x.encode(n);return _.set(E,C),C}else return S},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(n,_,x)=>{const E=encodingLength$3(n),S=E+encodingLength$3(_),C=new Uint8Array(S+x.byteLength);return encodeTo$3(n,C,0),encodeTo$3(_,C,E),C.set(x,S),C},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),from$7=({name:n,code:_,encode:x})=>new Hasher$2(n,_,x);let Hasher$2=class{constructor(_,x,E){this.name=_,this.code=x,this.encode=E}digest(_){if(_ instanceof Uint8Array){const x=this.encode(_);return x instanceof Uint8Array?create$6(this.code,x):x.then(E=>create$6(this.code,E))}else throw Error("Unknown type, must be binary type")}};function readonly$1({enumerable:n=!0,configurable:_=!1}={}){return{enumerable:n,configurable:_,writable:!1}}function*linksWithin(n,_){if(_!=null&&typeof _=="object")if(Array.isArray(_))for(const[x,E]of _.entries()){const S=[...n,x],C=CID$2.asCID(E);C?yield[S.join("/"),C]:typeof E=="object"&&(yield*links$1(E,S))}else{const x=CID$2.asCID(_);x?yield[n.join("/"),x]:yield*links$1(_,n)}}function*links$1(n,_){if(n==null||n instanceof Uint8Array)return;const x=CID$2.asCID(n);x&&(yield[_.join("/"),x]);for(const[E,S]of Object.entries(n)){const C=[..._,E];yield*linksWithin(C,S)}}function*treeWithin(n,_){if(Array.isArray(_))for(const[x,E]of _.entries()){const S=[...n,x];yield S.join("/"),typeof E=="object"&&!CID$2.asCID(E)&&(yield*tree$1(E,S))}else yield*tree$1(_,n)}function*tree$1(n,_){if(!(n==null||typeof n!="object"))for(const[x,E]of Object.entries(n)){const S=[..._,x];yield S.join("/"),E!=null&&!(E instanceof Uint8Array)&&typeof E=="object"&&!CID$2.asCID(E)&&(yield*treeWithin(S,E))}}function get$2(n,_){let x=n;for(const[E,S]of _.entries()){if(x=x[S],x==null)throw new Error(`Object has no property at ${_.slice(0,E+1).map(T=>`[${JSON.stringify(T)}]`).join("")}`);const C=CID$2.asCID(x);if(C)return{value:C,remaining:_.slice(E+1).join("/")}}return{value:x}}let Block$1=class{constructor({cid:_,bytes:x,value:E}){if(!_||!x||typeof E>"u")throw new Error("Missing required argument");this.cid=_,this.bytes=x,this.value=E,this.asBlock=this,Object.defineProperties(this,{cid:readonly$1(),bytes:readonly$1(),value:readonly$1(),asBlock:readonly$1()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(_="/"){return get$2(this.value,_.split("/").filter(Boolean))}};async function encode$p({value:n,codec:_,hasher:x}){if(typeof n>"u")throw new Error('Missing required argument "value"');if(!_||!x)throw new Error("Missing required argument: codec or hasher");const E=_.encode(n),S=await x.digest(E),C=CID$2.create(1,_.code,S);return new Block$1({value:n,bytes:E,cid:C})}async function decode$o({bytes:n,codec:_,hasher:x}){if(!n)throw new Error('Missing required argument "bytes"');if(!_||!x)throw new Error("Missing required argument: codec or hasher");const E=_.decode(n),S=await x.digest(n),C=CID$2.create(1,_.code,S);return new Block$1({value:E,bytes:n,cid:C})}var encode_1$4=encode$o,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$o(n,_,x){_=_||[],x=x||0;for(var E=x;n>=INT$2;)_[x++]=n&255|MSB$3,n/=128;for(;n&MSBALL$2;)_[x++]=n&255|MSB$3,n>>>=7;return _[x]=n|0,encode$o.bytes=x-E+1,_}var decode$n=read$6,MSB$1$2=128,REST$1$2=127;function read$6(n,E){var x=0,E=E||0,S=0,C=E,T,A=n.length;do{if(C>=A)throw read$6.bytes=0,new RangeError("Could not decode varint");T=n[C++],x+=S<28?(T&REST$1$2)<<S:(T&REST$1$2)*Math.pow(2,S),S+=7}while(T>=MSB$1$2);return read$6.bytes=C-E,x}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(n){return n<N1$2?1:n<N2$2?2:n<N3$2?3:n<N4$2?4:n<N5$2?5:n<N6$2?6:n<N7$2?7:n<N8$2?8:n<N9$2?9:10},varint$2={encode:encode_1$4,decode:decode$n,encodingLength:length$2},_brrp_varint$2=varint$2;const decode$m=(n,_=0)=>[_brrp_varint$2.decode(n,_),_brrp_varint$2.decode.bytes],encodeTo$2=(n,_,x=0)=>(_brrp_varint$2.encode(n,_,x),_),encodingLength$2=n=>_brrp_varint$2.encodingLength(n),equals$4=(n,_)=>{if(n===_)return!0;if(n.byteLength!==_.byteLength)return!1;for(let x=0;x<n.byteLength;x++)if(n[x]!==_[x])return!1;return!0},coerce$3=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},create$5=(n,_)=>{const x=_.byteLength,E=encodingLength$2(n),S=E+encodingLength$2(x),C=new Uint8Array(S+x);return encodeTo$2(n,C,0),encodeTo$2(x,C,E),C.set(_,S),new Digest$2(n,x,_,C)},decode$l=n=>{const _=coerce$3(n),[x,E]=decode$m(_),[S,C]=decode$m(_.subarray(E)),T=_.subarray(E+C);if(T.byteLength!==S)throw new Error("Incorrect length");return new Digest$2(x,S,T,_)},equals$3=(n,_)=>{if(n===_)return!0;{const x=_;return n.code===x.code&&n.size===x.size&&x.bytes instanceof Uint8Array&&equals$4(n.bytes,x.bytes)}};let Digest$2=class{constructor(_,x,E,S){this.code=_,this.size=x,this.digest=E,this.bytes=S}};function base$6(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$6=base$6,_brrp__multiformats_scope_baseX$3=src$6;let Encoder$4=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or$3(this,_)}},ComposedDecoder$3=class{constructor(_){this.decoders=_}or(_){return or$3(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(n,_)=>new ComposedDecoder$3({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$4=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$4(_,x,E),this.decoder=new Decoder$4(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$6=({name:n,prefix:_,encode:x,decode:E})=>new Codec$4(n,_,x,E),baseX$3=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX$3(x,_);return from$6({prefix:n,name:_,encode:E,decode:C=>coerce$3(S(C))})},decode$k=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$n=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648$3=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$6({prefix:_,name:n,encode(S){return encode$n(S,E,x)},decode(S){return decode$k(S,E,x,n)}}),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$3=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$5=(n,_)=>{const{bytes:x,version:E}=n;switch(E){case 0:return toStringV0$1(x,baseCache$1(n),_||base58btc$3.encoder);default:return toStringV1$1(x,baseCache$1(n),_||base32$3.encoder)}},cache$3=new WeakMap,baseCache$1=n=>{const _=cache$3.get(n);if(_==null){const x=new Map;return cache$3.set(n,x),x}return _};let CID$1=class dn{constructor(_,x,E,S){this.code=x,this.version=_,this.multihash=E,this.bytes=S,this["/"]=S}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:_,multihash:x}=this;if(_!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(x.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return dn.createV0(x)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:_,digest:x}=this.multihash,E=create$5(_,x);return dn.createV1(this.code,E)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(_){return dn.equals(this,_)}static equals(_,x){const E=x;return E&&_.code===E.code&&_.version===E.version&&equals$3(_.multihash,E.multihash)}toString(_){return format$5(this,_)}toJSON(){return{"/":format$5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(_){if(_==null)return null;const x=_;if(x instanceof dn)return x;if(x["/"]!=null&&x["/"]===x.bytes||x.asCID===x){const{version:E,code:S,multihash:C,bytes:T}=x;return new dn(E,S,C,T||encodeCID$1(E,S,C.bytes))}else if(x[cidSymbol$1]===!0){const{version:E,multihash:S,code:C}=x,T=decode$l(S);return dn.create(E,C,T)}else return null}static create(_,x,E){if(typeof x!="number")throw new Error("String codecs are no longer supported");if(!(E.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(_){case 0:{if(x!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new dn(_,x,E,E.bytes)}case 1:{const S=encodeCID$1(_,x,E.bytes);return new dn(_,x,E,S)}default:throw new Error("Invalid version")}}static createV0(_){return dn.create(0,DAG_PB_CODE$1,_)}static createV1(_,x){return dn.create(1,_,x)}static decode(_){const[x,E]=dn.decodeFirst(_);if(E.length)throw new Error("Incorrect length");return x}static decodeFirst(_){const x=dn.inspectBytes(_),E=x.size-x.multihashSize,S=coerce$3(_.subarray(E,E+x.multihashSize));if(S.byteLength!==x.multihashSize)throw new Error("Incorrect length");const C=S.subarray(x.multihashSize-x.digestSize),T=new Digest$2(x.multihashCode,x.digestSize,C,S);return[x.version===0?dn.createV0(T):dn.createV1(x.codec,T),_.subarray(x.size)]}static inspectBytes(_){let x=0;const E=()=>{const[O,D]=decode$m(_.subarray(x));return x+=D,O};let S=E(),C=DAG_PB_CODE$1;if(S===18?(S=0,x=0):C=E(),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const T=x,A=E(),B=E(),I=x+B,M=I-T;return{version:S,codec:C,multihashCode:A,digestSize:B,multihashSize:M,size:I}}static parse(_,x){const[E,S]=parseCIDtoBytes$1(_,x),C=dn.decode(S);if(C.version===0&&_[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(C).set(E,_),C}};const parseCIDtoBytes$1=(n,_)=>{switch(n[0]){case"Q":{const x=_||base58btc$3;return[base58btc$3.prefix,x.decode(`${base58btc$3.prefix}${n}`)]}case base58btc$3.prefix:{const x=_||base58btc$3;return[base58btc$3.prefix,x.decode(n)]}case base32$3.prefix:{const x=_||base32$3;return[base32$3.prefix,x.decode(n)]}default:{if(_==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],_.decode(n)]}}},toStringV0$1=(n,_,x)=>{const{prefix:E}=x;if(E!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${x.name} encoding`);const S=_.get(E);if(S==null){const C=x.encode(n).slice(1);return _.set(E,C),C}else return S},toStringV1$1=(n,_,x)=>{const{prefix:E}=x,S=_.get(E);if(S==null){const C=x.encode(n);return _.set(E,C),C}else return S},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(n,_,x)=>{const E=encodingLength$2(n),S=E+encodingLength$2(_),C=new Uint8Array(S+x.byteLength);return encodeTo$2(n,C,0),encodeTo$2(_,C,E),C.set(x,S),C},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),textDecoder$3=new TextDecoder;function decodeVarint(n,_){let x=0;for(let E=0;;E+=7){if(E>=64)throw new Error("protobuf: varint overflow");if(_>=n.length)throw new Error("protobuf: unexpected end of data");const S=n[_++];if(x+=E<28?(S&127)<<E:(S&127)*2**E,S<128)break}return[x,_]}function decodeBytes(n,_){let x;[x,_]=decodeVarint(n,_);const E=_+x;if(x<0||E<0)throw new Error("protobuf: invalid length");if(E>n.length)throw new Error("protobuf: unexpected end of data");return[n.subarray(_,E),E]}function decodeKey(n,_){let x;return[x,_]=decodeVarint(n,_),[x&7,x>>3,_]}function decodeLink(n){const _={},x=n.length;let E=0;for(;E<x;){let S,C;if([S,C,E]=decodeKey(n,E),C===1){if(_.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(S!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${S}) for Hash`);if(_.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(_.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[_.Hash,E]=decodeBytes(n,E)}else if(C===2){if(_.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(S!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${S}) for Name`);if(_.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let T;[T,E]=decodeBytes(n,E),_.Name=textDecoder$3.decode(T)}else if(C===3){if(_.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(S!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${S}) for Tsize`);[_.Tsize,E]=decodeVarint(n,E)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${C}`)}if(E>x)throw new Error("protobuf: (PBLink) unexpected end of data");return _}function decodeNode(n){const _=n.length;let x=0,E,S=!1,C;for(;x<_;){let A,B;if([A,B,x]=decodeKey(n,x),A!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${A}`);if(B===1){if(C)throw new Error("protobuf: (PBNode) duplicate Data section");[C,x]=decodeBytes(n,x),E&&(S=!0)}else if(B===2){if(S)throw new Error("protobuf: (PBNode) duplicate Links section");E||(E=[]);let I;[I,x]=decodeBytes(n,x),E.push(decodeLink(I))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${B}`)}if(x>_)throw new Error("protobuf: (PBNode) unexpected end of data");const T={};return C&&(T.Data=C),T.Links=E||[],T}const textEncoder$5=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(n,_){let x=_.length;if(typeof n.Tsize=="number"){if(n.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(n.Tsize))throw new Error("Tsize too large for encoding");x=encodeVarint(_,x,n.Tsize)-1,_[x]=24}if(typeof n.Name=="string"){const E=textEncoder$5.encode(n.Name);x-=E.length,_.set(E,x),x=encodeVarint(_,x,E.length)-1,_[x]=18}return n.Hash&&(x-=n.Hash.length,_.set(n.Hash,x),x=encodeVarint(_,x,n.Hash.length)-1,_[x]=10),_.length-x}function encodeNode(n){const _=sizeNode(n),x=new Uint8Array(_);let E=_;if(n.Data&&(E-=n.Data.length,x.set(n.Data,E),E=encodeVarint(x,E,n.Data.length)-1,x[E]=10),n.Links)for(let S=n.Links.length-1;S>=0;S--){const C=encodeLink(n.Links[S],x.subarray(0,E));E-=C,E=encodeVarint(x,E,C)-1,x[E]=18}return x}function sizeLink(n){let _=0;if(n.Hash){const x=n.Hash.length;_+=1+x+sov(x)}if(typeof n.Name=="string"){const x=textEncoder$5.encode(n.Name).length;_+=1+x+sov(x)}return typeof n.Tsize=="number"&&(_+=1+sov(n.Tsize)),_}function sizeNode(n){let _=0;if(n.Data){const x=n.Data.length;_+=1+x+sov(x)}if(n.Links)for(const x of n.Links){const E=sizeLink(x);_+=1+E+sov(E)}return _}function encodeVarint(n,_,x){_-=sov(x);const E=_;for(;x>=maxUInt32;)n[_++]=x&127|128,x/=128;for(;x>=128;)n[_++]=x&127|128,x>>>=7;return n[_]=x,E}function sov(n){return n%2===0&&n++,Math.floor((len64(n)+6)/7)}function len64(n){let _=0;return n>=maxInt32&&(n=Math.floor(n/maxInt32),_=32),n>=65536&&(n>>>=16,_+=16),n>=256&&(n>>>=8,_+=8),_+len8tab[n]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$4=new TextEncoder;function linkComparator(n,_){if(n===_)return 0;const x=n.Name?textEncoder$4.encode(n.Name):[],E=_.Name?textEncoder$4.encode(_.Name):[];let S=x.length,C=E.length;for(let T=0,A=Math.min(S,C);T<A;++T)if(x[T]!==E[T]){S=x[T],C=E[T];break}return S<C?-1:C<S?1:0}function hasOnlyProperties(n,_){return!Object.keys(n).some(x=>!_.includes(x))}function asLink(n){if(typeof n.asCID=="object"){const x=CID$1.asCID(n);if(!x)throw new TypeError("Invalid DAG-PB form");return{Hash:x}}if(typeof n!="object"||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const _={};if(n.Hash){let x=CID$1.asCID(n.Hash);try{x||(typeof n.Hash=="string"?x=CID$1.parse(n.Hash):n.Hash instanceof Uint8Array&&(x=CID$1.decode(n.Hash)))}catch(E){throw new TypeError(`Invalid DAG-PB form: ${E.message}`)}x&&(_.Hash=x)}if(!_.Hash)throw new TypeError("Invalid DAG-PB form");return typeof n.Name=="string"&&(_.Name=n.Name),typeof n.Tsize=="number"&&(_.Tsize=n.Tsize),_}function prepare(n){if((n instanceof Uint8Array||typeof n=="string")&&(n={Data:n}),typeof n!="object"||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const _={};if(n.Data!==void 0)if(typeof n.Data=="string")_.Data=textEncoder$4.encode(n.Data);else if(n.Data instanceof Uint8Array)_.Data=n.Data;else throw new TypeError("Invalid DAG-PB form");if(n.Links!==void 0)if(Array.isArray(n.Links))_.Links=n.Links.map(asLink),_.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else _.Links=[];return _}function validate$1(n){if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(n,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(n.Data!==void 0&&!(n.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(n.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let _=0;_<n.Links.length;_++){const x=n.Links[_];if(!x||typeof x!="object"||Array.isArray(x)||x instanceof Uint8Array||x["/"]&&x["/"]===x.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(x,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(x.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(x.Hash==null||!x.Hash["/"]||x.Hash["/"]!==x.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(x.Name!==void 0&&typeof x.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(x.Tsize!==void 0){if(typeof x.Tsize!="number"||x.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(x.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(_>0&&linkComparator(x,n.Links[_-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(n,_=[]){return prepare({Data:n,Links:_})}function createLink(n,_,x){return asLink({Hash:x,Name:n,Tsize:_})}const name$6="dag-pb",code$7=112;function encode$m(n){validate$1(n);const _={};return n.Links&&(_.Links=n.Links.map(x=>{const E={};return x.Hash&&(E.Hash=x.Hash.bytes),x.Name!==void 0&&(E.Name=x.Name),x.Tsize!==void 0&&(E.Tsize=x.Tsize),E})),n.Data&&(_.Data=n.Data),encodeNode(_)}function decode$j(n){const _=decodeNode(n),x={};return _.Data&&(x.Data=_.Data),_.Links&&(x.Links=_.Links.map(E=>{const S={};try{S.Hash=CID$1.decode(E.Hash)}catch{}if(!S.Hash)throw new Error("Invalid Hash field found in link, expected CID");return E.Name!==void 0&&(S.Name=E.Name),E.Tsize!==void 0&&(S.Tsize=E.Tsize),S})),x}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,createLink,createNode,decode:decode$j,encode:encode$m,name:name$6,prepare,validate:validate$1},Symbol.toStringTag,{value:"Module"})),typeofs$1=["string","number","bigint","symbol"],objectTypeNames$1=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$3(n){if(n===null)return"null";if(n===void 0)return"undefined";if(n===!0||n===!1)return"boolean";const _=typeof n;if(typeofs$1.includes(_))return _;if(_==="function")return"Function";if(Array.isArray(n))return"Array";if(isBuffer$5(n))return"Buffer";const x=getObjectType$1(n);return x||"Object"}function isBuffer$5(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}function getObjectType$1(n){const _=Object.prototype.toString.call(n).slice(8,-1);if(objectTypeNames$1.includes(_))return _}let Type$1=class{constructor(_,x,E){this.major=_,this.majorEncoded=_<<5,this.name=x,this.terminal=E}toString(){return`Type[${this.major}].${this.name}`}compare(_){return this.major<_.major?-1:this.major>_.major?1:0}};Type$1.uint=new Type$1(0,"uint",!0);Type$1.negint=new Type$1(1,"negint",!0);Type$1.bytes=new Type$1(2,"bytes",!0);Type$1.string=new Type$1(3,"string",!0);Type$1.array=new Type$1(4,"array",!1);Type$1.map=new Type$1(5,"map",!1);Type$1.tag=new Type$1(6,"tag",!1);Type$1.float=new Type$1(7,"float",!0);Type$1.false=new Type$1(7,"false",!0);Type$1.true=new Type$1(7,"true",!0);Type$1.null=new Type$1(7,"null",!0);Type$1.undefined=new Type$1(7,"undefined",!0);Type$1.break=new Type$1(7,"break",!0);let Token$1=class{constructor(_,x,E){this.type=_,this.value=x,this.encodedLength=E,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};const useBuffer$1=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$3=new TextEncoder;function isBuffer$4(n){return useBuffer$1&&globalThis.Buffer.isBuffer(n)}function asU8A$1(n){return n instanceof Uint8Array?isBuffer$4(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}const toString$9=useBuffer$1?(n,_,x)=>x-_>64?globalThis.Buffer.from(n.subarray(_,x)).toString("utf8"):utf8Slice$1(n,_,x):(n,_,x)=>x-_>64?textDecoder$2.decode(n.subarray(_,x)):utf8Slice$1(n,_,x),fromString$5=useBuffer$1?n=>n.length>64?globalThis.Buffer.from(n):utf8ToBytes$1(n):n=>n.length>64?textEncoder$3.encode(n):utf8ToBytes$1(n),fromArray$1=n=>Uint8Array.from(n),slice$3=useBuffer$1?(n,_,x)=>isBuffer$4(n)?new Uint8Array(n.subarray(_,x)):n.slice(_,x):(n,_,x)=>n.slice(_,x),concat$4=useBuffer$1?(n,_)=>(n=n.map(x=>x instanceof Uint8Array?x:globalThis.Buffer.from(x)),asU8A$1(globalThis.Buffer.concat(n,_))):(n,_)=>{const x=new Uint8Array(_);let E=0;for(let S of n)E+S.length>x.length&&(S=S.subarray(0,x.length-E)),x.set(S,E),E+=S.length;return x},alloc$1=useBuffer$1?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function compare$3(n,_){if(isBuffer$4(n)&&isBuffer$4(_))return n.compare(_);for(let x=0;x<n.length;x++)if(n[x]!==_[x])return n[x]<_[x]?-1:1;return 0}function utf8ToBytes$1(n,_=1/0){let x;const E=n.length;let S=null;const C=[];for(let T=0;T<E;++T){if(x=n.charCodeAt(T),x>55295&&x<57344){if(!S){if(x>56319){(_-=3)>-1&&C.push(239,191,189);continue}else if(T+1===E){(_-=3)>-1&&C.push(239,191,189);continue}S=x;continue}if(x<56320){(_-=3)>-1&&C.push(239,191,189),S=x;continue}x=(S-55296<<10|x-56320)+65536}else S&&(_-=3)>-1&&C.push(239,191,189);if(S=null,x<128){if((_-=1)<0)break;C.push(x)}else if(x<2048){if((_-=2)<0)break;C.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;C.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;C.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return C}function utf8Slice$1(n,_,x){const E=[];for(;_<x;){const S=n[_];let C=null,T=S>239?4:S>223?3:S>191?2:1;if(_+T<=x){let A,B,I,M;switch(T){case 1:S<128&&(C=S);break;case 2:A=n[_+1],(A&192)===128&&(M=(S&31)<<6|A&63,M>127&&(C=M));break;case 3:A=n[_+1],B=n[_+2],(A&192)===128&&(B&192)===128&&(M=(S&15)<<12|(A&63)<<6|B&63,M>2047&&(M<55296||M>57343)&&(C=M));break;case 4:A=n[_+1],B=n[_+2],I=n[_+3],(A&192)===128&&(B&192)===128&&(I&192)===128&&(M=(S&15)<<18|(A&63)<<12|(B&63)<<6|I&63,M>65535&&M<1114112&&(C=M))}}C===null?(C=65533,T=1):C>65535&&(C-=65536,E.push(C>>>10&1023|55296),C=56320|C&1023),E.push(C),_+=T}return decodeCodePointsArray$1(E)}const MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(n){const _=n.length;if(_<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,n);let x="",E=0;for(;E<_;)x+=String.fromCharCode.apply(String,n.slice(E,E+=MAX_ARGUMENTS_LENGTH$1));return x}const defaultChunkSize$1=256;let Bl$1=class{constructor(_=defaultChunkSize$1){this.chunkSize=_,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(_){let x=this.chunks[this.chunks.length-1];if(this.cursor+_.length<=this.maxCursor+1){const S=x.length-(this.maxCursor-this.cursor)-1;x.set(_,S)}else{if(x){const S=x.length-(this.maxCursor-this.cursor)-1;S<x.length&&(this.chunks[this.chunks.length-1]=x.subarray(0,S),this.maxCursor=this.cursor-1)}_.length<64&&_.length<this.chunkSize?(x=alloc$1(this.chunkSize),this.chunks.push(x),this.maxCursor+=x.length,this._initReuseChunk===null&&(this._initReuseChunk=x),x.set(_,0)):(this.chunks.push(_),this.maxCursor+=_.length)}this.cursor+=_.length}toBytes(_=!1){let x;if(this.chunks.length===1){const E=this.chunks[0];_&&this.cursor>E.length/2?(x=this.cursor===E.length?E:E.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):x=slice$3(E,0,this.cursor)}else x=concat$4(this.chunks,this.cursor);return _&&this.reset(),x}};const decodeErrPrefix$1="CBOR decode error:",encodeErrPrefix$1="CBOR encode error:";function assertEnoughData$1(n,_,x){if(n.length-_<x)throw new Error(`${decodeErrPrefix$1} not enough data for type`)}const uintBoundaries$1=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8$1(n,_,x){assertEnoughData$1(n,_,1);const E=n[_];if(x.strict===!0&&E<uintBoundaries$1[0])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint16$1(n,_,x){assertEnoughData$1(n,_,2);const E=n[_]<<8|n[_+1];if(x.strict===!0&&E<uintBoundaries$1[1])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint32$1(n,_,x){assertEnoughData$1(n,_,4);const E=n[_]*16777216+(n[_+1]<<16)+(n[_+2]<<8)+n[_+3];if(x.strict===!0&&E<uintBoundaries$1[2])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint64$1(n,_,x){assertEnoughData$1(n,_,8);const E=n[_]*16777216+(n[_+1]<<16)+(n[_+2]<<8)+n[_+3],S=n[_+4]*16777216+(n[_+5]<<16)+(n[_+6]<<8)+n[_+7],C=(BigInt(E)<<BigInt(32))+BigInt(S);if(x.strict===!0&&C<uintBoundaries$1[3])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);if(C<=Number.MAX_SAFE_INTEGER)return Number(C);if(x.allowBigInt===!0)return C;throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`)}function decodeUint8$1(n,_,x,E){return new Token$1(Type$1.uint,readUint8$1(n,_+1,E),2)}function decodeUint16$1(n,_,x,E){return new Token$1(Type$1.uint,readUint16$1(n,_+1,E),3)}function decodeUint32$1(n,_,x,E){return new Token$1(Type$1.uint,readUint32$1(n,_+1,E),5)}function decodeUint64$1(n,_,x,E){return new Token$1(Type$1.uint,readUint64$1(n,_+1,E),9)}function encodeUint$1(n,_){return encodeUintValue$1(n,0,_.value)}function encodeUintValue$1(n,_,x){if(x<uintBoundaries$1[0]){const E=Number(x);n.push([_|E])}else if(x<uintBoundaries$1[1]){const E=Number(x);n.push([_|24,E])}else if(x<uintBoundaries$1[2]){const E=Number(x);n.push([_|25,E>>>8,E&255])}else if(x<uintBoundaries$1[3]){const E=Number(x);n.push([_|26,E>>>24&255,E>>>16&255,E>>>8&255,E&255])}else{const E=BigInt(x);if(E<uintBoundaries$1[4]){const S=[_|27,0,0,0,0,0,0,0];let C=Number(E&BigInt(4294967295)),T=Number(E>>BigInt(32)&BigInt(4294967295));S[8]=C&255,C=C>>8,S[7]=C&255,C=C>>8,S[6]=C&255,C=C>>8,S[5]=C&255,S[4]=T&255,T=T>>8,S[3]=T&255,T=T>>8,S[2]=T&255,T=T>>8,S[1]=T&255,n.push(S)}else throw new Error(`${decodeErrPrefix$1} encountered BigInt larger than allowable range`)}}encodeUint$1.encodedSize=function(_){return encodeUintValue$1.encodedSize(_.value)};encodeUintValue$1.encodedSize=function(_){return _<uintBoundaries$1[0]?1:_<uintBoundaries$1[1]?2:_<uintBoundaries$1[2]?3:_<uintBoundaries$1[3]?5:9};encodeUint$1.compareTokens=function(_,x){return _.value<x.value?-1:_.value>x.value?1:0};function decodeNegint8$1(n,_,x,E){return new Token$1(Type$1.negint,-1-readUint8$1(n,_+1,E),2)}function decodeNegint16$1(n,_,x,E){return new Token$1(Type$1.negint,-1-readUint16$1(n,_+1,E),3)}function decodeNegint32$1(n,_,x,E){return new Token$1(Type$1.negint,-1-readUint32$1(n,_+1,E),5)}const neg1b$1=BigInt(-1),pos1b$1=BigInt(1);function decodeNegint64$1(n,_,x,E){const S=readUint64$1(n,_+1,E);if(typeof S!="bigint"){const C=-1-S;if(C>=Number.MIN_SAFE_INTEGER)return new Token$1(Type$1.negint,C,9)}if(E.allowBigInt!==!0)throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`);return new Token$1(Type$1.negint,neg1b$1-BigInt(S),9)}function encodeNegint$1(n,_){const x=_.value,E=typeof x=="bigint"?x*neg1b$1-pos1b$1:x*-1-1;encodeUintValue$1(n,_.type.majorEncoded,E)}encodeNegint$1.encodedSize=function(_){const x=_.value,E=typeof x=="bigint"?x*neg1b$1-pos1b$1:x*-1-1;return E<uintBoundaries$1[0]?1:E<uintBoundaries$1[1]?2:E<uintBoundaries$1[2]?3:E<uintBoundaries$1[3]?5:9};encodeNegint$1.compareTokens=function(_,x){return _.value<x.value?1:_.value>x.value?-1:0};function toToken$7(n,_,x,E){assertEnoughData$1(n,_,x+E);const S=slice$3(n,_+x,_+x+E);return new Token$1(Type$1.bytes,S,x+E)}function decodeBytesCompact$1(n,_,x,E){return toToken$7(n,_,1,x)}function decodeBytes8$1(n,_,x,E){return toToken$7(n,_,2,readUint8$1(n,_+1,E))}function decodeBytes16$1(n,_,x,E){return toToken$7(n,_,3,readUint16$1(n,_+1,E))}function decodeBytes32$1(n,_,x,E){return toToken$7(n,_,5,readUint32$1(n,_+1,E))}function decodeBytes64$1(n,_,x,E){const S=readUint64$1(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer bytes lengths not supported`);return toToken$7(n,_,9,S)}function tokenBytes$1(n){return n.encodedBytes===void 0&&(n.encodedBytes=n.type===Type$1.string?fromString$5(n.value):n.value),n.encodedBytes}function encodeBytes$1(n,_){const x=tokenBytes$1(_);encodeUintValue$1(n,_.type.majorEncoded,x.length),n.push(x)}encodeBytes$1.encodedSize=function(_){const x=tokenBytes$1(_);return encodeUintValue$1.encodedSize(x.length)+x.length};encodeBytes$1.compareTokens=function(_,x){return compareBytes$1(tokenBytes$1(_),tokenBytes$1(x))};function compareBytes$1(n,_){return n.length<_.length?-1:n.length>_.length?1:compare$3(n,_)}function toToken$6(n,_,x,E,S){const C=x+E;assertEnoughData$1(n,_,C);const T=new Token$1(Type$1.string,toString$9(n,_+x,_+C),C);return S.retainStringBytes===!0&&(T.byteValue=slice$3(n,_+x,_+C)),T}function decodeStringCompact$1(n,_,x,E){return toToken$6(n,_,1,x,E)}function decodeString8$1(n,_,x,E){return toToken$6(n,_,2,readUint8$1(n,_+1,E),E)}function decodeString16$1(n,_,x,E){return toToken$6(n,_,3,readUint16$1(n,_+1,E),E)}function decodeString32$1(n,_,x,E){return toToken$6(n,_,5,readUint32$1(n,_+1,E),E)}function decodeString64$1(n,_,x,E){const S=readUint64$1(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer string lengths not supported`);return toToken$6(n,_,9,S,E)}const encodeString$1=encodeBytes$1;function toToken$5(n,_,x,E){return new Token$1(Type$1.array,E,x)}function decodeArrayCompact$1(n,_,x,E){return toToken$5(n,_,1,x)}function decodeArray8$1(n,_,x,E){return toToken$5(n,_,2,readUint8$1(n,_+1,E))}function decodeArray16$1(n,_,x,E){return toToken$5(n,_,3,readUint16$1(n,_+1,E))}function decodeArray32$1(n,_,x,E){return toToken$5(n,_,5,readUint32$1(n,_+1,E))}function decodeArray64$1(n,_,x,E){const S=readUint64$1(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer array lengths not supported`);return toToken$5(n,_,9,S)}function decodeArrayIndefinite$1(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$5(n,_,1,1/0)}function encodeArray$1(n,_){encodeUintValue$1(n,Type$1.array.majorEncoded,_.value)}encodeArray$1.compareTokens=encodeUint$1.compareTokens;encodeArray$1.encodedSize=function(_){return encodeUintValue$1.encodedSize(_.value)};function toToken$4(n,_,x,E){return new Token$1(Type$1.map,E,x)}function decodeMapCompact$1(n,_,x,E){return toToken$4(n,_,1,x)}function decodeMap8$1(n,_,x,E){return toToken$4(n,_,2,readUint8$1(n,_+1,E))}function decodeMap16$1(n,_,x,E){return toToken$4(n,_,3,readUint16$1(n,_+1,E))}function decodeMap32$1(n,_,x,E){return toToken$4(n,_,5,readUint32$1(n,_+1,E))}function decodeMap64$1(n,_,x,E){const S=readUint64$1(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer map lengths not supported`);return toToken$4(n,_,9,S)}function decodeMapIndefinite$1(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$4(n,_,1,1/0)}function encodeMap$1(n,_){encodeUintValue$1(n,Type$1.map.majorEncoded,_.value)}encodeMap$1.compareTokens=encodeUint$1.compareTokens;encodeMap$1.encodedSize=function(_){return encodeUintValue$1.encodedSize(_.value)};function decodeTagCompact$1(n,_,x,E){return new Token$1(Type$1.tag,x,1)}function decodeTag8$1(n,_,x,E){return new Token$1(Type$1.tag,readUint8$1(n,_+1,E),2)}function decodeTag16$1(n,_,x,E){return new Token$1(Type$1.tag,readUint16$1(n,_+1,E),3)}function decodeTag32$1(n,_,x,E){return new Token$1(Type$1.tag,readUint32$1(n,_+1,E),5)}function decodeTag64$1(n,_,x,E){return new Token$1(Type$1.tag,readUint64$1(n,_+1,E),9)}function encodeTag$1(n,_){encodeUintValue$1(n,Type$1.tag.majorEncoded,_.value)}encodeTag$1.compareTokens=encodeUint$1.compareTokens;encodeTag$1.encodedSize=function(_){return encodeUintValue$1.encodedSize(_.value)};const MINOR_FALSE$1=20,MINOR_TRUE$1=21,MINOR_NULL$1=22,MINOR_UNDEFINED$1=23;function decodeUndefined$1(n,_,x,E){if(E.allowUndefined===!1)throw new Error(`${decodeErrPrefix$1} undefined values are not supported`);return E.coerceUndefinedToNull===!0?new Token$1(Type$1.null,null,1):new Token$1(Type$1.undefined,void 0,1)}function decodeBreak$1(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return new Token$1(Type$1.break,void 0,1)}function createToken$1(n,_,x){if(x){if(x.allowNaN===!1&&Number.isNaN(n))throw new Error(`${decodeErrPrefix$1} NaN values are not supported`);if(x.allowInfinity===!1&&(n===1/0||n===-1/0))throw new Error(`${decodeErrPrefix$1} Infinity values are not supported`)}return new Token$1(Type$1.float,n,_)}function decodeFloat16$1(n,_,x,E){return createToken$1(readFloat16$1(n,_+1),3,E)}function decodeFloat32$1(n,_,x,E){return createToken$1(readFloat32$1(n,_+1),5,E)}function decodeFloat64$1(n,_,x,E){return createToken$1(readFloat64$1(n,_+1),9,E)}function encodeFloat$1(n,_,x){const E=_.value;if(E===!1)n.push([Type$1.float.majorEncoded|MINOR_FALSE$1]);else if(E===!0)n.push([Type$1.float.majorEncoded|MINOR_TRUE$1]);else if(E===null)n.push([Type$1.float.majorEncoded|MINOR_NULL$1]);else if(E===void 0)n.push([Type$1.float.majorEncoded|MINOR_UNDEFINED$1]);else{let S,C=!1;(!x||x.float64!==!0)&&(encodeFloat16$1(E),S=readFloat16$1(ui8a$1,1),E===S||Number.isNaN(E)?(ui8a$1[0]=249,n.push(ui8a$1.slice(0,3)),C=!0):(encodeFloat32$1(E),S=readFloat32$1(ui8a$1,1),E===S&&(ui8a$1[0]=250,n.push(ui8a$1.slice(0,5)),C=!0))),C||(encodeFloat64$1(E),S=readFloat64$1(ui8a$1,1),ui8a$1[0]=251,n.push(ui8a$1.slice(0,9)))}}encodeFloat$1.encodedSize=function(_,x){const E=_.value;if(E===!1||E===!0||E===null||E===void 0)return 1;if(!x||x.float64!==!0){encodeFloat16$1(E);let S=readFloat16$1(ui8a$1,1);if(E===S||Number.isNaN(E))return 3;if(encodeFloat32$1(E),S=readFloat32$1(ui8a$1,1),E===S)return 5}return 9};const buffer$2=new ArrayBuffer(9),dataView$1=new DataView(buffer$2,1),ui8a$1=new Uint8Array(buffer$2,0);function encodeFloat16$1(n){if(n===1/0)dataView$1.setUint16(0,31744,!1);else if(n===-1/0)dataView$1.setUint16(0,64512,!1);else if(Number.isNaN(n))dataView$1.setUint16(0,32256,!1);else{dataView$1.setFloat32(0,n);const _=dataView$1.getUint32(0),x=(_&2139095040)>>23,E=_&8388607;if(x===255)dataView$1.setUint16(0,31744,!1);else if(x===0)dataView$1.setUint16(0,(n&2147483648)>>16|E>>13,!1);else{const S=x-127;S<-24?dataView$1.setUint16(0,0):S<-14?dataView$1.setUint16(0,(_&2147483648)>>16|1<<24+S,!1):dataView$1.setUint16(0,(_&2147483648)>>16|S+15<<10|E>>13,!1)}}}function readFloat16$1(n,_){if(n.length-_<2)throw new Error(`${decodeErrPrefix$1} not enough data for float16`);const x=(n[_]<<8)+n[_+1];if(x===31744)return 1/0;if(x===64512)return-1/0;if(x===32256)return NaN;const E=x>>10&31,S=x&1023;let C;return E===0?C=S*2**-24:E!==31?C=(S+1024)*2**(E-25):C=S===0?1/0:NaN,x&32768?-C:C}function encodeFloat32$1(n){dataView$1.setFloat32(0,n,!1)}function readFloat32$1(n,_){if(n.length-_<4)throw new Error(`${decodeErrPrefix$1} not enough data for float32`);const x=(n.byteOffset||0)+_;return new DataView(n.buffer,x,4).getFloat32(0,!1)}function encodeFloat64$1(n){dataView$1.setFloat64(0,n,!1)}function readFloat64$1(n,_){if(n.length-_<8)throw new Error(`${decodeErrPrefix$1} not enough data for float64`);const x=(n.byteOffset||0)+_;return new DataView(n.buffer,x,8).getFloat64(0,!1)}encodeFloat$1.compareTokens=encodeUint$1.compareTokens;function invalidMinor$1(n,_,x){throw new Error(`${decodeErrPrefix$1} encountered invalid minor (${x}) for major ${n[_]>>>5}`)}function errorer$1(n){return()=>{throw new Error(`${decodeErrPrefix$1} ${n}`)}}const jump$1=[];for(let n=0;n<=23;n++)jump$1[n]=invalidMinor$1;jump$1[24]=decodeUint8$1;jump$1[25]=decodeUint16$1;jump$1[26]=decodeUint32$1;jump$1[27]=decodeUint64$1;jump$1[28]=invalidMinor$1;jump$1[29]=invalidMinor$1;jump$1[30]=invalidMinor$1;jump$1[31]=invalidMinor$1;for(let n=32;n<=55;n++)jump$1[n]=invalidMinor$1;jump$1[56]=decodeNegint8$1;jump$1[57]=decodeNegint16$1;jump$1[58]=decodeNegint32$1;jump$1[59]=decodeNegint64$1;jump$1[60]=invalidMinor$1;jump$1[61]=invalidMinor$1;jump$1[62]=invalidMinor$1;jump$1[63]=invalidMinor$1;for(let n=64;n<=87;n++)jump$1[n]=decodeBytesCompact$1;jump$1[88]=decodeBytes8$1;jump$1[89]=decodeBytes16$1;jump$1[90]=decodeBytes32$1;jump$1[91]=decodeBytes64$1;jump$1[92]=invalidMinor$1;jump$1[93]=invalidMinor$1;jump$1[94]=invalidMinor$1;jump$1[95]=errorer$1("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)jump$1[n]=decodeStringCompact$1;jump$1[120]=decodeString8$1;jump$1[121]=decodeString16$1;jump$1[122]=decodeString32$1;jump$1[123]=decodeString64$1;jump$1[124]=invalidMinor$1;jump$1[125]=invalidMinor$1;jump$1[126]=invalidMinor$1;jump$1[127]=errorer$1("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)jump$1[n]=decodeArrayCompact$1;jump$1[152]=decodeArray8$1;jump$1[153]=decodeArray16$1;jump$1[154]=decodeArray32$1;jump$1[155]=decodeArray64$1;jump$1[156]=invalidMinor$1;jump$1[157]=invalidMinor$1;jump$1[158]=invalidMinor$1;jump$1[159]=decodeArrayIndefinite$1;for(let n=160;n<=183;n++)jump$1[n]=decodeMapCompact$1;jump$1[184]=decodeMap8$1;jump$1[185]=decodeMap16$1;jump$1[186]=decodeMap32$1;jump$1[187]=decodeMap64$1;jump$1[188]=invalidMinor$1;jump$1[189]=invalidMinor$1;jump$1[190]=invalidMinor$1;jump$1[191]=decodeMapIndefinite$1;for(let n=192;n<=215;n++)jump$1[n]=decodeTagCompact$1;jump$1[216]=decodeTag8$1;jump$1[217]=decodeTag16$1;jump$1[218]=decodeTag32$1;jump$1[219]=decodeTag64$1;jump$1[220]=invalidMinor$1;jump$1[221]=invalidMinor$1;jump$1[222]=invalidMinor$1;jump$1[223]=invalidMinor$1;for(let n=224;n<=243;n++)jump$1[n]=errorer$1("simple values are not supported");jump$1[244]=invalidMinor$1;jump$1[245]=invalidMinor$1;jump$1[246]=invalidMinor$1;jump$1[247]=decodeUndefined$1;jump$1[248]=errorer$1("simple values are not supported");jump$1[249]=decodeFloat16$1;jump$1[250]=decodeFloat32$1;jump$1[251]=decodeFloat64$1;jump$1[252]=invalidMinor$1;jump$1[253]=invalidMinor$1;jump$1[254]=invalidMinor$1;jump$1[255]=decodeBreak$1;const quick$1=[];for(let n=0;n<24;n++)quick$1[n]=new Token$1(Type$1.uint,n,1);for(let n=-1;n>=-24;n--)quick$1[31-n]=new Token$1(Type$1.negint,n,1);quick$1[64]=new Token$1(Type$1.bytes,new Uint8Array(0),1);quick$1[96]=new Token$1(Type$1.string,"",1);quick$1[128]=new Token$1(Type$1.array,0,1);quick$1[160]=new Token$1(Type$1.map,0,1);quick$1[244]=new Token$1(Type$1.false,!1,1);quick$1[245]=new Token$1(Type$1.true,!0,1);quick$1[246]=new Token$1(Type$1.null,null,1);function quickEncodeToken$1(n){switch(n.type){case Type$1.false:return fromArray$1([244]);case Type$1.true:return fromArray$1([245]);case Type$1.null:return fromArray$1([246]);case Type$1.bytes:return n.value.length?void 0:fromArray$1([64]);case Type$1.string:return n.value===""?fromArray$1([96]):void 0;case Type$1.array:return n.value===0?fromArray$1([128]):void 0;case Type$1.map:return n.value===0?fromArray$1([160]):void 0;case Type$1.uint:return n.value<24?fromArray$1([Number(n.value)]):void 0;case Type$1.negint:if(n.value>=-24)return fromArray$1([31-Number(n.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken:quickEncodeToken$1};function makeCborEncoders$1(){const n=[];return n[Type$1.uint.major]=encodeUint$1,n[Type$1.negint.major]=encodeNegint$1,n[Type$1.bytes.major]=encodeBytes$1,n[Type$1.string.major]=encodeString$1,n[Type$1.array.major]=encodeArray$1,n[Type$1.map.major]=encodeMap$1,n[Type$1.tag.major]=encodeTag$1,n[Type$1.float.major]=encodeFloat$1,n}const cborEncoders$1=makeCborEncoders$1(),buf$1=new Bl$1;let Ref$1=class ll{constructor(_,x){this.obj=_,this.parent=x}includes(_){let x=this;do if(x.obj===_)return!0;while(x=x.parent);return!1}static createCheck(_,x){if(_&&_.includes(x))throw new Error(`${encodeErrPrefix$1} object contains circular references`);return new ll(x,_)}};const simpleTokens$1={null:new Token$1(Type$1.null,null),undefined:new Token$1(Type$1.undefined,void 0),true:new Token$1(Type$1.true,!0),false:new Token$1(Type$1.false,!1),emptyArray:new Token$1(Type$1.array,0),emptyMap:new Token$1(Type$1.map,0)},typeEncoders$1={number(n,_,x,E){return!Number.isInteger(n)||!Number.isSafeInteger(n)?new Token$1(Type$1.float,n):n>=0?new Token$1(Type$1.uint,n):new Token$1(Type$1.negint,n)},bigint(n,_,x,E){return n>=BigInt(0)?new Token$1(Type$1.uint,n):new Token$1(Type$1.negint,n)},Uint8Array(n,_,x,E){return new Token$1(Type$1.bytes,n)},string(n,_,x,E){return new Token$1(Type$1.string,n)},boolean(n,_,x,E){return n?simpleTokens$1.true:simpleTokens$1.false},null(n,_,x,E){return simpleTokens$1.null},undefined(n,_,x,E){return simpleTokens$1.undefined},ArrayBuffer(n,_,x,E){return new Token$1(Type$1.bytes,new Uint8Array(n))},DataView(n,_,x,E){return new Token$1(Type$1.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))},Array(n,_,x,E){if(!n.length)return x.addBreakTokens===!0?[simpleTokens$1.emptyArray,new Token$1(Type$1.break)]:simpleTokens$1.emptyArray;E=Ref$1.createCheck(E,n);const S=[];let C=0;for(const T of n)S[C++]=objectToTokens$1(T,x,E);return x.addBreakTokens?[new Token$1(Type$1.array,n.length),S,new Token$1(Type$1.break)]:[new Token$1(Type$1.array,n.length),S]},Object(n,_,x,E){const S=_!=="Object",C=S?n.keys():Object.keys(n),T=S?n.size:C.length;if(!T)return x.addBreakTokens===!0?[simpleTokens$1.emptyMap,new Token$1(Type$1.break)]:simpleTokens$1.emptyMap;E=Ref$1.createCheck(E,n);const A=[];let B=0;for(const I of C)A[B++]=[objectToTokens$1(I,x,E),objectToTokens$1(S?n.get(I):n[I],x,E)];return sortMapEntries$1(A,x),x.addBreakTokens?[new Token$1(Type$1.map,T),A,new Token$1(Type$1.break)]:[new Token$1(Type$1.map,T),A]}};typeEncoders$1.Map=typeEncoders$1.Object;typeEncoders$1.Buffer=typeEncoders$1.Uint8Array;for(const n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders$1[`${n}Array`]=typeEncoders$1.DataView;function objectToTokens$1(n,_={},x){const E=is$3(n),S=_&&_.typeEncoders&&_.typeEncoders[E]||typeEncoders$1[E];if(typeof S=="function"){const T=S(n,E,_,x);if(T!=null)return T}const C=typeEncoders$1[E];if(!C)throw new Error(`${encodeErrPrefix$1} unsupported type: ${E}`);return C(n,E,_,x)}function sortMapEntries$1(n,_){_.mapSorter&&n.sort(_.mapSorter)}function mapSorter$1(n,_){const x=Array.isArray(n[0])?n[0][0]:n[0],E=Array.isArray(_[0])?_[0][0]:_[0];if(x.type!==E.type)return x.type.compare(E.type);const S=x.type.major,C=cborEncoders$1[S].compareTokens(x,E);return C===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),C}function tokensToEncoded$1(n,_,x,E){if(Array.isArray(_))for(const S of _)tokensToEncoded$1(n,S,x,E);else x[_.type.major](n,_,E)}function encodeCustom$1(n,_,x){const E=objectToTokens$1(n,x);if(!Array.isArray(E)&&x.quickEncodeToken){const S=x.quickEncodeToken(E);if(S)return S;const C=_[E.type.major];if(C.encodedSize){const T=C.encodedSize(E,x),A=new Bl$1(T);if(C(A,E,x),A.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${E} was wrong`);return asU8A$1(A.chunks[0])}}return buf$1.reset(),tokensToEncoded$1(buf$1,E,_,x),buf$1.toBytes(!0)}function encode$l(n,_){return _=Object.assign({},defaultEncodeOptions$1,_),encodeCustom$1(n,cborEncoders$1,_)}const defaultDecodeOptions$1={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};let Tokeniser$1=class{constructor(_,x={}){this.pos=0,this.data=_,this.options=x}done(){return this.pos>=this.data.length}next(){const _=this.data[this.pos];let x=quick$1[_];if(x===void 0){const E=jump$1[_];if(!E)throw new Error(`${decodeErrPrefix$1} no decoder for major type ${_>>>5} (byte 0x${_.toString(16).padStart(2,"0")})`);const S=_&31;x=E(this.data,this.pos,S,this.options)}return this.pos+=x.encodedLength,x}};const DONE$1=Symbol.for("DONE"),BREAK$1=Symbol.for("BREAK");function tokenToArray$1(n,_,x){const E=[];for(let S=0;S<n.value;S++){const C=tokensToObject$1(_,x);if(C===BREAK$1){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed array`)}if(C===DONE$1)throw new Error(`${decodeErrPrefix$1} found array but not enough entries (got ${S}, expected ${n.value})`);E[S]=C}return E}function tokenToMap$1(n,_,x){const E=x.useMaps===!0,S=E?void 0:{},C=E?new Map:void 0;for(let T=0;T<n.value;T++){const A=tokensToObject$1(_,x);if(A===BREAK$1){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed map`)}if(A===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${T} [no key], expected ${n.value})`);if(E!==!0&&typeof A!="string")throw new Error(`${decodeErrPrefix$1} non-string keys not supported (got ${typeof A})`);if(x.rejectDuplicateMapKeys===!0&&(E&&C.has(A)||!E&&A in S))throw new Error(`${decodeErrPrefix$1} found repeat map key "${A}"`);const B=tokensToObject$1(_,x);if(B===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${T} [no value], expected ${n.value})`);E?C.set(A,B):S[A]=B}return E?C:S}function tokensToObject$1(n,_){if(n.done())return DONE$1;const x=n.next();if(x.type===Type$1.break)return BREAK$1;if(x.type.terminal)return x.value;if(x.type===Type$1.array)return tokenToArray$1(x,n,_);if(x.type===Type$1.map)return tokenToMap$1(x,n,_);if(x.type===Type$1.tag){if(_.tags&&typeof _.tags[x.value]=="function"){const E=tokensToObject$1(n,_);return _.tags[x.value](E)}throw new Error(`${decodeErrPrefix$1} tag not supported (${x.value})`)}throw new Error("unsupported")}function decode$i(n,_){if(!(n instanceof Uint8Array))throw new Error(`${decodeErrPrefix$1} data to decode must be a Uint8Array`);_=Object.assign({},defaultDecodeOptions$1,_);const x=_.tokenizer||new Tokeniser$1(n,_),E=tokensToObject$1(x,_);if(E===DONE$1)throw new Error(`${decodeErrPrefix$1} did not find any content to decode`);if(E===BREAK$1)throw new Error(`${decodeErrPrefix$1} got unexpected break`);if(!x.done())throw new Error(`${decodeErrPrefix$1} too many terminals, data makes no sense`);return E}var encode_1$3=encode$k,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$k(n,_,x){_=_||[],x=x||0;for(var E=x;n>=INT$1;)_[x++]=n&255|MSB$2,n/=128;for(;n&MSBALL$1;)_[x++]=n&255|MSB$2,n>>>=7;return _[x]=n|0,encode$k.bytes=x-E+1,_}var decode$h=read$5,MSB$1$1=128,REST$1$1=127;function read$5(n,E){var x=0,E=E||0,S=0,C=E,T,A=n.length;do{if(C>=A)throw read$5.bytes=0,new RangeError("Could not decode varint");T=n[C++],x+=S<28?(T&REST$1$1)<<S:(T&REST$1$1)*Math.pow(2,S),S+=7}while(T>=MSB$1$1);return read$5.bytes=C-E,x}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(n){return n<N1$1?1:n<N2$1?2:n<N3$1?3:n<N4$1?4:n<N5$1?5:n<N6$1?6:n<N7$1?7:n<N8$1?8:n<N9$1?9:10},varint$1={encode:encode_1$3,decode:decode$h,encodingLength:length$1},_brrp_varint$1=varint$1;const decode$g=(n,_=0)=>[_brrp_varint$1.decode(n,_),_brrp_varint$1.decode.bytes],encodeTo$1=(n,_,x=0)=>(_brrp_varint$1.encode(n,_,x),_),encodingLength$1=n=>_brrp_varint$1.encodingLength(n),equals$2=(n,_)=>{if(n===_)return!0;if(n.byteLength!==_.byteLength)return!1;for(let x=0;x<n.byteLength;x++)if(n[x]!==_[x])return!1;return!0},coerce$2=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},create$4=(n,_)=>{const x=_.byteLength,E=encodingLength$1(n),S=E+encodingLength$1(x),C=new Uint8Array(S+x);return encodeTo$1(n,C,0),encodeTo$1(x,C,E),C.set(_,S),new Digest$1(n,x,_,C)},decode$f=n=>{const _=coerce$2(n),[x,E]=decode$g(_),[S,C]=decode$g(_.subarray(E)),T=_.subarray(E+C);if(T.byteLength!==S)throw new Error("Incorrect length");return new Digest$1(x,S,T,_)},equals$1=(n,_)=>{if(n===_)return!0;{const x=_;return n.code===x.code&&n.size===x.size&&x.bytes instanceof Uint8Array&&equals$2(n.bytes,x.bytes)}};let Digest$1=class{constructor(_,x,E,S){this.code=_,this.size=x,this.digest=E,this.bytes=S}};function base$5(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$5=base$5,_brrp__multiformats_scope_baseX$2=src$5;let Encoder$3=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or$2(this,_)}},ComposedDecoder$2=class{constructor(_){this.decoders=_}or(_){return or$2(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(n,_)=>new ComposedDecoder$2({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$3=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$3(_,x,E),this.decoder=new Decoder$3(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$5=({name:n,prefix:_,encode:x,decode:E})=>new Codec$3(n,_,x,E),baseX$2=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX$2(x,_);return from$5({prefix:n,name:_,encode:E,decode:C=>coerce$2(S(C))})},decode$e=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$j=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648$2=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$5({prefix:_,name:n,encode(S){return encode$j(S,E,x)},decode(S){return decode$e(S,E,x,n)}}),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$2=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$4=(n,_)=>{const{bytes:x,version:E}=n;switch(E){case 0:return toStringV0(x,baseCache(n),_||base58btc$2.encoder);default:return toStringV1(x,baseCache(n),_||base32$2.encoder)}},cache$2=new WeakMap,baseCache=n=>{const _=cache$2.get(n);if(_==null){const x=new Map;return cache$2.set(n,x),x}return _};class CID{constructor(_,x,E,S){this.code=x,this.version=_,this.multihash=E,this.bytes=S,this["/"]=S}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:_,multihash:x}=this;if(_!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(x.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(x)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:_,digest:x}=this.multihash,E=create$4(_,x);return CID.createV1(this.code,E)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(_){return CID.equals(this,_)}static equals(_,x){const E=x;return E&&_.code===E.code&&_.version===E.version&&equals$1(_.multihash,E.multihash)}toString(_){return format$4(this,_)}toJSON(){return{"/":format$4(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(_){if(_==null)return null;const x=_;if(x instanceof CID)return x;if(x["/"]!=null&&x["/"]===x.bytes||x.asCID===x){const{version:E,code:S,multihash:C,bytes:T}=x;return new CID(E,S,C,T||encodeCID(E,S,C.bytes))}else if(x[cidSymbol]===!0){const{version:E,multihash:S,code:C}=x,T=decode$f(S);return CID.create(E,C,T)}else return null}static create(_,x,E){if(typeof x!="number")throw new Error("String codecs are no longer supported");if(!(E.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(_){case 0:{if(x!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(_,x,E,E.bytes)}case 1:{const S=encodeCID(_,x,E.bytes);return new CID(_,x,E,S)}default:throw new Error("Invalid version")}}static createV0(_){return CID.create(0,DAG_PB_CODE,_)}static createV1(_,x){return CID.create(1,_,x)}static decode(_){const[x,E]=CID.decodeFirst(_);if(E.length)throw new Error("Incorrect length");return x}static decodeFirst(_){const x=CID.inspectBytes(_),E=x.size-x.multihashSize,S=coerce$2(_.subarray(E,E+x.multihashSize));if(S.byteLength!==x.multihashSize)throw new Error("Incorrect length");const C=S.subarray(x.multihashSize-x.digestSize),T=new Digest$1(x.multihashCode,x.digestSize,C,S);return[x.version===0?CID.createV0(T):CID.createV1(x.codec,T),_.subarray(x.size)]}static inspectBytes(_){let x=0;const E=()=>{const[O,D]=decode$g(_.subarray(x));return x+=D,O};let S=E(),C=DAG_PB_CODE;if(S===18?(S=0,x=0):C=E(),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const T=x,A=E(),B=E(),I=x+B,M=I-T;return{version:S,codec:C,multihashCode:A,digestSize:B,multihashSize:M,size:I}}static parse(_,x){const[E,S]=parseCIDtoBytes(_,x),C=CID.decode(S);if(C.version===0&&_[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(C).set(E,_),C}}const parseCIDtoBytes=(n,_)=>{switch(n[0]){case"Q":{const x=_||base58btc$2;return[base58btc$2.prefix,x.decode(`${base58btc$2.prefix}${n}`)]}case base58btc$2.prefix:{const x=_||base58btc$2;return[base58btc$2.prefix,x.decode(n)]}case base32$2.prefix:{const x=_||base32$2;return[base32$2.prefix,x.decode(n)]}default:{if(_==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],_.decode(n)]}}},toStringV0=(n,_,x)=>{const{prefix:E}=x;if(E!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${x.name} encoding`);const S=_.get(E);if(S==null){const C=x.encode(n).slice(1);return _.set(E,C),C}else return S},toStringV1=(n,_,x)=>{const{prefix:E}=x,S=_.get(E);if(S==null){const C=x.encode(n);return _.set(E,C),C}else return S},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(n,_,x)=>{const E=encodingLength$1(n),S=E+encodingLength$1(_),C=new Uint8Array(S+x.byteLength);return encodeTo$1(n,C,0),encodeTo$1(_,C,E),C.set(x,S),C},cidSymbol=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG$2=42;function cidEncoder$2(n){if(n.asCID!==n&&n["/"]!==n.bytes)return null;const _=CID.asCID(n);if(!_)return null;const x=new Uint8Array(_.bytes.byteLength+1);return x.set(_.bytes,1),[new Token$1(Type$1.tag,CID_CBOR_TAG$2),new Token$1(Type$1.bytes,x)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$2(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(n.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$2]=cidDecoder$2;const name$5="dag-cbor",code$6=113,encode$i=n=>encode$l(n,encodeOptions$2),decode$d=n=>decode$i(n,decodeOptions$2),dagCBOR$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,decode:decode$d,encode:encode$i,name:name$5},Symbol.toStringTag,{value:"Module"})),sha$4=n=>async _=>new Uint8Array(await crypto.subtle.digest(n,_)),sha256$a=from$7({name:"sha2-256",code:18,encode:sha$4("SHA-256")}),mhtype="sha2-256",defaultBase=base58btc$4,unsupportedCodecError=()=>new Error("unsupported codec"),cidifyString=n=>n&&(Array.isArray(n)?n.map(cidifyString):CID$2.parse(n)),stringifyCid=(n,_={})=>{if(!n||typeof n=="string")return n;if(Array.isArray(n))return n.map(stringifyCid);const x=_.base||defaultBase;return n.toString(x)},codecCodes={[code$7]:dagPB,[code$6]:dagCBOR$1},codecMap={raw:dagCBOR$1,"dag-pb":dagPB,"dag-cbor":dagCBOR$1};async function read$4(n,_,x={}){_=cidifyString(stringifyCid(_));const E=codecCodes[_.code];if(!E)throw unsupportedCodecError();const S=await n.block.get(_,{timeout:x.timeout}),C=await decode$o({bytes:S,codec:E,hasher:sha256$a});if(C.cid.code===code$7)return JSON.parse(new TextDecoder().decode(C.value.Data));if(C.cid.code===code$6){const T=C.value;return(x.links||[]).forEach(B=>{T[B]&&(T[B]=stringifyCid(T[B],x))}),T}}async function write$3(n,_,x,E={}){E.format==="dag-pb"&&(_=E.format);const S=codecMap[_];if(!S)throw unsupportedCodecError();S.code===code$7&&(x=typeof x=="string"?x:JSON.stringify(x),x={Data:new TextEncoder().encode(x),Links:[]}),S.code===code$6&&(E.links||[]).forEach(B=>{x[B]&&(x[B]=cidifyString(x[B]))});const C=await encode$p({value:x,codec:S,hasher:sha256$a});return await n.block.put(C.bytes,{cid:C.cid.bytes,version:C.cid.version,format:_,mhtype,pin:E.pin,timeout:E.timeout}),(S.code===code$7?C.cid.toV0():C.cid).toString(E.base||defaultBase)}class AccessControllerManifest{constructor(_,x={}){this.type=_,this.params=x}static async resolve(_,x,E={}){if(E.skipManifest){if(!E.type)throw new Error("No manifest, access-controller type required");return new AccessControllerManifest(E.type,{address:x})}else{x.indexOf("/ipfs")===0&&(x=x.split("/")[2]);const{type:S,params:C}=await read$4(_,x);return new AccessControllerManifest(S,C)}}static async create(_,x,E){return E.skipManifest?E.address:write$3(_,"dag-cbor",{type:x,params:E})}}var safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,_){var x=buffer$3,E=x.Buffer;function S(T,A){for(var B in T)A[B]=T[B]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?n.exports=x:(S(x,_),_.Buffer=C);function C(T,A,B){return E(T,A,B)}C.prototype=Object.create(E.prototype),S(E,C),C.from=function(T,A,B){if(typeof T=="number")throw new TypeError("Argument must not be a number");return E(T,A,B)},C.alloc=function(T,A,B){if(typeof T!="number")throw new TypeError("Argument must be a number");var I=E(T);return A!==void 0?typeof B=="string"?I.fill(A,B):I.fill(A):I.fill(0),I},C.allocUnsafe=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return E(T)},C.allocUnsafeSlow=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return x.SlowBuffer(T)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports;const type$8="legacy-ipfs";class LegacyIPFSAccessController extends AccessController$1{constructor(_,x){super(),this._ipfs=_,this._write=Array.from(x.write||[])}static get type(){return type$8}get write(){return this._write}async canAppend(_,x){const E=_.key;return!!(this.write.includes(E)||this.write.includes("*"))}async load(_){_.indexOf("/ipfs")===0&&(_=_.split("/")[2]);try{const x=await read$4(this._ipfs,_);this._write=x.write}catch(x){console.log("LegacyIPFSAccessController.load ERROR:",x)}}async save(_){let x;const E={admin:[],write:this.write,read:[]};try{x=await write$3(this._ipfs,"raw",safeBufferExports.Buffer.from(JSON.stringify(E,null,2)),{format:"dag-pb"})}catch(S){console.log("LegacyIPFSAccessController.save ERROR:",S)}return{address:x,skipManifest:!0}}static async create(_,x={}){return x={...x,write:x.write||[_.identity.publicKey]},new LegacyIPFSAccessController(_._ipfs,x)}}const read$3=async(n,_,x={})=>{const E=await read$4(n,_,x);return typeof E.write=="string"?JSON.parse(E.write):E.write},write$2=write$3,type$7="ipfs";class IPFSAccessController extends AccessController$1{constructor(_,x){super(),this._ipfs=_,this._write=Array.from(x.write||[])}static get type(){return type$7}get write(){return this._write}async canAppend(_,x){const E=_.identity.id;return this.write.includes(E)||this.write.includes("*")?x.verifyIdentity(_.identity):!1}async load(_){_.indexOf("/ipfs")===0&&(_=_.split("/")[2]);try{this._write=await read$3(this._ipfs,_)}catch(x){console.log("IPFSAccessController.load ERROR:",x)}}async save(){let _;try{_=await write$2(this._ipfs,"dag-cbor",{write:JSON.stringify(this.write,null,2)})}catch(x){console.log("IPFSAccessController.save ERROR:",x)}return{address:_}}static async create(_,x={}){return x={...x,write:x.write||[_.identity.id]},new IPFSAccessController(_._ipfs,x)}}async function pMapSeries(n,_){const x=[];let E=0;for(const S of n)x.push(await _(await S,E++));return x}const ensureAddress$1=n=>n.toString().split("/").pop()==="_access"?n:path.join(n,"/_access"),type$6="orbitdb";class OrbitDBAccessController extends AccessController$1{constructor(_,x){super(),this._orbitdb=_,this._db=null,this._options=x||{}}static get type(){return type$6}get address(){return this._db.address}async canAppend(_,x){const E=new Set([...this.get("write"),...this.get("admin")]);return E.has(_.identity.id)||E.has("*")?await x.verifyIdentity(_.identity):!1}get capabilities(){if(this._db){const _=this._db.index,x=E=>{const S=E[0];_[S]=new Set([..._[S]||[],...E[1]])};return Object.entries({..._,admin:new Set([..._.admin||[],...this._db.access.write])}).forEach(x),_}return{}}get(_){return this.capabilities[_]||new Set([])}async close(){await this._db.close()}async load(_){this._db&&await this._db.close(),this._db=await this._orbitdb.keyvalue(ensureAddress$1(_),{accessController:{type:"ipfs",write:this._options.admin||[this._orbitdb.identity.id]},sync:!0}),this._db.events.on("ready",this._onUpdate.bind(this)),this._db.events.on("write",this._onUpdate.bind(this)),this._db.events.on("replicated",this._onUpdate.bind(this)),await this._db.load()}async save(){return{address:this._db.address.toString()}}async hasCapability(_,x){const E=new Set(this.get(_));return E.has(x.id)||E.has("*")}async grant(_,x){const E=new Set([...this._db.get(_)||[],x]);await this._db.put(_,Array.from(E.values()))}async revoke(_,x){const E=new Set(this._db.get(_)||[]);E.delete(x),E.size>0?await this._db.put(_,Array.from(E.values())):await this._db.del(_)}_onUpdate(){this.emit("updated")}static async create(_,x={}){const E=new OrbitDBAccessController(_,x);return await E.load(x.address||x.name||"default-access-controller"),x.write&&!x.address&&await pMapSeries(x.write,async S=>E.grant("write",S)),E}}const supportedTypes$1={"legacy-ipfs":LegacyIPFSAccessController,ipfs:IPFSAccessController,orbitdb:OrbitDBAccessController},getHandlerFor$1=n=>{if(!AccessControllers$1.isSupported(n))throw new Error(`AccessController type '${n}' is not supported`);return supportedTypes$1[n]};let AccessControllers$1=class fl{static get AccessController(){return AccessController$1}static isSupported(_){return Object.keys(supportedTypes$1).includes(_)}static addAccessController(_){if(!_.AccessController)throw new Error("AccessController class needs to be given as an option");if(!_.AccessController.type||typeof _.AccessController.type!="string")throw new Error("Given AccessController class needs to implement: static get type() { /* return a string */}.");supportedTypes$1[_.AccessController.type]=_.AccessController}static addAccessControllers(_){const x=_.AccessControllers;if(!x)throw new Error("AccessController classes need to be given as an option");x.forEach(E=>{fl.addAccessController({AccessController:E})})}static removeAccessController(_){delete supportedTypes$1[_]}static async resolve(_,x,E={}){const{type:S,params:C}=await AccessControllerManifest.resolve(_._ipfs,x,E),A=await getHandlerFor$1(S).create(_,Object.assign({},E,C));return await A.load(C.address),A}static async create(_,x,E={}){const T=await(await getHandlerFor$1(x).create(_,E)).save();return await AccessControllerManifest.create(_._ipfs,x,T)}};const pEachSeries=async(n,_)=>{let x=0;for(const E of n)if(await _(await E,x++)===pEachSeries.stop)break;return n};pEachSeries.stop=Symbol("pEachSeries.stop");var eventemitter3={exports:{}};(function(n){var _=Object.prototype.hasOwnProperty,x="~";function E(){}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(x=!1));function S(B,I,M){this.fn=B,this.context=I,this.once=M||!1}function C(B,I,M,O,D){if(typeof M!="function")throw new TypeError("The listener must be a function");var L=new S(M,O||B,D),V=x?x+I:I;return B._events[V]?B._events[V].fn?B._events[V]=[B._events[V],L]:B._events[V].push(L):(B._events[V]=L,B._eventsCount++),B}function T(B,I){--B._eventsCount===0?B._events=new E:delete B._events[I]}function A(){this._events=new E,this._eventsCount=0}A.prototype.eventNames=function(){var I=[],M,O;if(this._eventsCount===0)return I;for(O in M=this._events)_.call(M,O)&&I.push(x?O.slice(1):O);return Object.getOwnPropertySymbols?I.concat(Object.getOwnPropertySymbols(M)):I},A.prototype.listeners=function(I){var M=x?x+I:I,O=this._events[M];if(!O)return[];if(O.fn)return[O.fn];for(var D=0,L=O.length,V=new Array(L);D<L;D++)V[D]=O[D].fn;return V},A.prototype.listenerCount=function(I){var M=x?x+I:I,O=this._events[M];return O?O.fn?1:O.length:0},A.prototype.emit=function(I,M,O,D,L,V){var U=x?x+I:I;if(!this._events[U])return!1;var q=this._events[U],H=arguments.length,W,Q;if(q.fn){switch(q.once&&this.removeListener(I,q.fn,void 0,!0),H){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,M),!0;case 3:return q.fn.call(q.context,M,O),!0;case 4:return q.fn.call(q.context,M,O,D),!0;case 5:return q.fn.call(q.context,M,O,D,L),!0;case 6:return q.fn.call(q.context,M,O,D,L,V),!0}for(Q=1,W=new Array(H-1);Q<H;Q++)W[Q-1]=arguments[Q];q.fn.apply(q.context,W)}else{var re=q.length,ce;for(Q=0;Q<re;Q++)switch(q[Q].once&&this.removeListener(I,q[Q].fn,void 0,!0),H){case 1:q[Q].fn.call(q[Q].context);break;case 2:q[Q].fn.call(q[Q].context,M);break;case 3:q[Q].fn.call(q[Q].context,M,O);break;case 4:q[Q].fn.call(q[Q].context,M,O,D);break;default:if(!W)for(ce=1,W=new Array(H-1);ce<H;ce++)W[ce-1]=arguments[ce];q[Q].fn.apply(q[Q].context,W)}}return!0},A.prototype.on=function(I,M,O){return C(this,I,M,O,!1)},A.prototype.once=function(I,M,O){return C(this,I,M,O,!0)},A.prototype.removeListener=function(I,M,O,D){var L=x?x+I:I;if(!this._events[L])return this;if(!M)return T(this,L),this;var V=this._events[L];if(V.fn)V.fn===M&&(!D||V.once)&&(!O||V.context===O)&&T(this,L);else{for(var U=0,q=[],H=V.length;U<H;U++)(V[U].fn!==M||D&&!V[U].once||O&&V[U].context!==O)&&q.push(V[U]);q.length?this._events[L]=q.length===1?q[0]:q:T(this,L)}return this},A.prototype.removeAllListeners=function(I){var M;return I?(M=x?x+I:I,this._events[M]&&T(this,M)):(this._events=new E,this._eventsCount=0),this},A.prototype.off=A.prototype.removeListener,A.prototype.addListener=A.prototype.on,A.prefixed=x,A.EventEmitter=A,n.exports=A})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$3=getDefaultExportFromCjs(eventemitter3Exports);class TimeoutError extends Error{constructor(_){super(_),this.name="TimeoutError"}}let AbortError$3=class extends Error{constructor(_){super(),this.name="AbortError",this.message=_}};const getDOMException$1=n=>globalThis.DOMException===void 0?new AbortError$3(n):new DOMException(n),getAbortedReason$1=n=>{const _=n.reason===void 0?getDOMException$1("This operation was aborted."):n.reason;return _ instanceof Error?_:getDOMException$1(_)};function pTimeout(n,_,x,E){let S;const C=new Promise((T,A)=>{if(typeof _!="number"||Math.sign(_)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${_}\``);if(_===Number.POSITIVE_INFINITY){T(n);return}if(E={customTimers:{setTimeout,clearTimeout},...E},E.signal){const{signal:B}=E;B.aborted&&A(getAbortedReason$1(B)),B.addEventListener("abort",()=>{A(getAbortedReason$1(B))})}S=E.customTimers.setTimeout.call(void 0,()=>{if(typeof x=="function"){try{T(x())}catch(M){A(M)}return}const B=typeof x=="string"?x:`Promise timed out after ${_} milliseconds`,I=x instanceof Error?x:new TimeoutError(B);typeof n.cancel=="function"&&n.cancel(),A(I)},_),(async()=>{try{T(await n)}catch(B){A(B)}finally{E.customTimers.clearTimeout.call(void 0,S)}})()});return C.clear=()=>{clearTimeout(S),S=void 0},C}function lowerBound(n,_,x){let E=0,S=n.length;for(;S>0;){const C=Math.trunc(S/2);let T=E+C;x(n[T],_)<=0?(E=++T,S-=C+1):S=C}return E}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(n,_,x,E){if(x==="a"&&!E)throw new TypeError("Private accessor was defined without a getter");if(typeof _=="function"?n!==_||!E:!_.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return x==="m"?E:x==="a"?E.call(n):E?E.value:_.get(n)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(_,x){x={priority:0,...x};const E={priority:x.priority,run:_};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=x.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(E);return}const S=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),E,(C,T)=>T.priority-C.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(S,0,E)}dequeue(){const _=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return _?.run}filter(_){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(x=>x.priority===_.priority).map(x=>x.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(n,_,x,E,S){if(E==="m")throw new TypeError("Private method is not writable");if(E==="a"&&!S)throw new TypeError("Private accessor was defined without a setter");if(typeof _=="function"?n!==_||!S:!_.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return E==="a"?S.call(n,x):S?S.value=x:_.set(n,x),x},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(n,_,x,E){if(x==="a"&&!E)throw new TypeError("Private accessor was defined without a getter");if(typeof _=="function"?n!==_||!E:!_.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return x==="m"?E:x==="a"?E.call(n):E?E.value:_.get(n)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pending,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_throwOnAbort,_PQueue_onEvent;let AbortError$2=class extends Error{};class PQueue extends EventEmitter$3{constructor(_){var x,E,S,C;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pending.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),_={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,..._},!(typeof _.intervalCap=="number"&&_.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(E=(x=_.intervalCap)===null||x===void 0?void 0:x.toString())!==null&&E!==void 0?E:""}\` (${typeof _.intervalCap})`);if(_.interval===void 0||!(Number.isFinite(_.interval)&&_.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(C=(S=_.interval)===null||S===void 0?void 0:S.toString())!==null&&C!==void 0?C:""}\` (${typeof _.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,_.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,_.intervalCap===Number.POSITIVE_INFINITY||_.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,_.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,_.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new _.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,_.queueClass,"f"),this.concurrency=_.concurrency,this.timeout=_.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,_.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,_.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(_){if(!(typeof _=="number"&&_>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${_}\` (${typeof _})`);__classPrivateFieldSet(this,_PQueue_concurrency,_,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(_,x={}){return x={timeout:this.timeout,throwOnTimeout:__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"),...x},new Promise((E,S)=>{__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(async()=>{var C,T,A;__classPrivateFieldSet(this,_PQueue_pending,(T=__classPrivateFieldGet(this,_PQueue_pending,"f"),T++,T),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(A=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),A++,A),"f");try{if(!((C=x.signal)===null||C===void 0)&&C.aborted)throw new AbortError$2("The task was aborted.");let B=_({signal:x.signal});x.timeout&&(B=pTimeout(Promise.resolve(B),x.timeout)),x.signal&&(B=Promise.race([B,__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_throwOnAbort).call(this,x.signal)]));const I=await B;E(I),this.emit("completed",I)}catch(B){if(B instanceof TimeoutError&&!x.throwOnTimeout){E();return}S(B),this.emit("error",B)}finally{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)}},x),this.emit("add"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this)})}async addAll(_,x){return Promise.all(_.map(async E=>this.add(E,x)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(_){__classPrivateFieldGet(this,_PQueue_queue,"f").size<_||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<_)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(_){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(_).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pending,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pending=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_pending,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function(){var _;__classPrivateFieldSet(this,_PQueue_pending,(_=__classPrivateFieldGet(this,_PQueue_pending,"f"),_--,_),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_onResumeInterval=function(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function(){const _=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const x=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-_;if(x<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},x),"f"),!0}return!1},_PQueue_tryToStartAnother=function(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&this.emit("idle"),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const _=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const x=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return x?(this.emit("active"),x(),_&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_throwOnAbort=async function(_){return new Promise((x,E)=>{_.addEventListener("abort",()=>{E(new AbortError$2("The task was aborted."))},{once:!0})})},_PQueue_onEvent=async function(_,x){return new Promise(E=>{const S=()=>{x&&!x()||(this.off(_,S),E())};this.on(_,S)})};class Index{constructor(_){this.id=_,this._index=[]}get(){return this._index}async updateIndex(_,x){this._index=_.values}}function indentString(n,_=1,x={}){const{indent:E=" ",includeEmptyLines:S=!1}=x;if(typeof n!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof n}\``);if(typeof _!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof _}\``);if(_<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${_}\``);if(typeof E!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof E}\``);if(_===0)return n;const C=S?/^/gm:/^(?!\s*$)/gm;return n.replace(C,E.repeat(_))}var _endianness;function endianness(){if(typeof _endianness>"u"){var n=new ArrayBuffer(2),_=new Uint8Array(n),x=new Uint16Array(n);if(_[0]=1,_[1]=2,x[0]===258)_endianness="BE";else if(x[0]===513)_endianness="LE";else throw new Error("unable to figure out endianess")}return _endianness}function hostname(){return typeof global$1.location<"u"?global$1.location.hostname:""}function loadavg(){return[]}function uptime(){return 0}function freemem(){return Number.MAX_VALUE}function totalmem(){return Number.MAX_VALUE}function cpus(){return[]}function type$5(){return"Browser"}function release(){return typeof global$1.navigator<"u"?global$1.navigator.appVersion:""}function networkInterfaces(){}function getNetworkInterfaces(){}function arch(){return"javascript"}function platform$1(){return"browser"}function tmpDir(){return"/tmp"}var tmpdir=tmpDir,EOL=`
`;const os={EOL,tmpdir,tmpDir,networkInterfaces,getNetworkInterfaces,release,type:type$5,cpus,totalmem,freemem,uptime,loadavg,hostname,endianness},os$1=Object.freeze(Object.defineProperty({__proto__:null,EOL,arch,cpus,default:os,endianness,freemem,getNetworkInterfaces,hostname,loadavg,networkInterfaces,platform:platform$1,release,tmpDir,tmpdir,totalmem,type:type$5,uptime},Symbol.toStringTag,{value:"Module"}));function escapeStringRegexp(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const extractPathRegex=/\s+at.*[(\s](.*)\)?/,pathRegex=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,homeDir=typeof os.homedir>"u"?"":os.homedir().replace(/\\/g,"/");function cleanStack(n,{pretty:_=!1,basePath:x}={}){const E=x&&new RegExp(`(at | \\()${escapeStringRegexp(x.replace(/\\/g,"/"))}`,"g");if(typeof n=="string")return n.replace(/\\/g,"/").split(`
`).filter(S=>{const C=S.match(extractPathRegex);if(C===null||!C[1])return!0;const T=C[1];return T.includes(".app/Contents/Resources/electron.asar")||T.includes(".app/Contents/Resources/default_app.asar")||T.includes("node_modules/electron/dist/resources/electron.asar")||T.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!pathRegex.test(T)}).filter(S=>S.trim()!=="").map(S=>(E&&(S=S.replace(E,"$1")),_&&(S=S.replace(extractPathRegex,(C,T)=>C.replace(T,T.replace(homeDir,"~")))),S)).join(`
`)}const cleanInternalStack=n=>n.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Ki,cl;let AggregateError$1=(cl=class extends Error{constructor(x){if(!Array.isArray(x))throw new TypeError(`Expected input to be an Array, got ${typeof x}`);x=x.map(S=>S instanceof Error?S:S!==null&&typeof S=="object"?Object.assign(new Error(S.message),S):new Error(S));let E=x.map(S=>typeof S.stack=="string"&&S.stack.length>0?cleanInternalStack(cleanStack(S.stack)):String(S)).join(`
`);E=`
`+indentString(E,4);super(E);al(this,Ki,void 0);$t(this,"name","AggregateError");ol(this,Ki,x)}get errors(){return il(this,Ki).slice()}},Ki=new WeakMap,cl),AbortError$1=class extends Error{constructor(_){super(),this.name="AbortError",this.message=_}};const getDOMException=n=>globalThis.DOMException===void 0?new AbortError$1(n):new DOMException(n),getAbortedReason=n=>{const _=n.reason===void 0?getDOMException("This operation was aborted."):n.reason;return _ instanceof Error?_:getDOMException(_)};async function pMap$2(n,_,{concurrency:x=Number.POSITIVE_INFINITY,stopOnError:E=!0,signal:S}={}){return new Promise((C,T)=>{if(n[Symbol.iterator]===void 0&&n[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof n})`);if(typeof _!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(x)||x===Number.POSITIVE_INFINITY)&&x>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${x}\` (${typeof x})`);const A=[],B=[],I=new Map;let M=!1,O=!1,D=!1,L=0,V=0;const U=n[Symbol.iterator]===void 0?n[Symbol.asyncIterator]():n[Symbol.iterator](),q=W=>{M=!0,O=!0,T(W)};S&&(S.aborted&&q(getAbortedReason(S)),S.addEventListener("abort",()=>{q(getAbortedReason(S))}));const H=async()=>{if(O)return;const W=await U.next(),Q=V;if(V++,W.done){if(D=!0,L===0&&!O){if(!E&&B.length>0){q(new AggregateError$1(B));return}if(O=!0,I.size===0){C(A);return}const re=[];for(const[ce,ne]of A.entries())I.get(ce)!==pMapSkip&&re.push(ne);C(re)}return}L++,(async()=>{try{const re=await W.value;if(O)return;const ce=await _(re,Q);ce===pMapSkip&&I.set(Q,ce),A[Q]=ce,L--,await H()}catch(re){if(E)q(re);else{B.push(re),L--;try{await H()}catch(ce){q(ce)}}}})()};(async()=>{for(let W=0;W<x;W++){try{await H()}catch(Q){q(Q);break}if(D||M)break}})()})}const pMapSkip=Symbol("skip");class GSet{constructor(_){}append(_){}merge(_){}get(_){}has(_){}get values(){}get length(){}}class LamportClock{constructor(_,x){this.id=_,this.time=x||0}tick(){return new LamportClock(this.id,++this.time)}merge(_){return this.time=Math.max(this.time,_.time),new LamportClock(this.id,this.time)}clone(){return new LamportClock(this.id,this.time)}static compare(_,x){const E=_.time-x.time;return E===0&&_.id!==x.id?_.id<x.id?-1:1:E}}function difference$1(n,_,x){const E={},S={},C=A=>S[x?A[x]:A]=!0;n.forEach(C);const T=(A,B)=>{const I=S[x?B[x]:B]!==void 0,M=E[x?B[x]:B]!==void 0;return!I&&!M&&(A.push(B),E[x?B[x]:B]=!0),A};return _.reduce(T,[])}function findUniques(n,_){const x={},E=C=>x[C],S=C=>x[_?C[_]:C]=C;return n.forEach(S),Object.keys(x).map(E)}const isDefined$2=n=>n!=null;var defaults$3={space:"",cycles:!1,replacer:(n,_)=>_,stringify:JSON.stringify},util$a={isArray:Array.isArray,assign:Object.assign,isObject:n=>typeof n=="object",isFunction:n=>typeof n=="function",isBoolean:n=>typeof n=="boolean",isRegex:n=>n instanceof RegExp,keys:Object.keys};const DEFAULTS=defaults$3,isFunction$2=util$a.isFunction,isBoolean$3=util$a.isBoolean,isObject$2=util$a.isObject,isArray$6=util$a.isArray,isRegex$2=util$a.isRegex,assign$2=util$a.assign,keys$3=util$a.keys;function serialize$1(n){return n==null?n:isRegex$2(n)?n.toString():n.toJSON?n.toJSON():n}function stringifyDeterministic(n,_){_=_||assign$2({},DEFAULTS),isFunction$2(_)&&(_={compare:_});const x=_.space||DEFAULTS.space,E=isBoolean$3(_.cycles)?_.cycles:DEFAULTS.cycles,S=_.replacer||DEFAULTS.replacer,C=_.stringify||DEFAULTS.stringify,T=_.compare&&function(B){return function(I){return function(M,O){const D={key:M,value:I[M]},L={key:O,value:I[O]};return B(D,L)}}}(_.compare);E||C(n);const A=[];return function B(I,M,O,D){const L=x?`
`+new Array(D+1).join(x):"",V=x?": ":":";if(O=serialize$1(O),O=S.call(I,M,O),O!==void 0){if(!isObject$2(O)||O===null)return C(O);if(isArray$6(O)){const U=[];for(let q=0;q<O.length;q++){const H=B(O,q,O[q],D+1)||C(null);U.push(L+x+H)}return"["+U.join(",")+L+"]"}else{if(E){if(A.indexOf(O)!==-1)return C("[Circular]");A.push(O)}const U=keys$3(O).sort(T&&T(O)),q=[];for(let H=0;H<U.length;H++){const W=U[H],Q=B(O,W,O[W],D+1);if(!Q)continue;const re=C(W)+V+Q;q.push(L+x+re)}return A.splice(A.indexOf(O),1),"{"+q.join(",")+L+"}"}}}({"":n},"",n,0)}var lib$2=stringifyDeterministic;const stringify$2=getDefaultExportFromCjs(lib$2),IpfsNotDefinedError=()=>new Error("Ipfs instance not defined"),IPLD_LINKS$1=["next","refs"],getWriteFormatForVersion=n=>n===0?"dag-pb":"dag-cbor",getWriteFormat=n=>Entry.isEntry(n)?getWriteFormatForVersion(n.v):getWriteFormatForVersion(n);class Entry{static async create(_,x,E,S,C=[],T,A=[],B){if(!isDefined$2(_))throw IpfsNotDefinedError();if(!isDefined$2(x))throw new Error("Identity is required, cannot create entry");if(!isDefined$2(E))throw new Error("Entry requires an id");if(!isDefined$2(S))throw new Error("Entry requires data");if(!isDefined$2(C)||!Array.isArray(C))throw new Error("'next' argument is not an array");const I=L=>L.hash?L.hash:L,M=C.filter(isDefined$2).map(I),O={hash:null,id:E,payload:S,next:M,refs:A,v:2,clock:T||new LamportClock(x.publicKey)},D=await x.provider.sign(x,Entry.toBuffer(O));return O.key=x.publicKey,O.identity=x.toJSON(),O.sig=D,O.hash=await Entry.toMultihash(_,O,B),O}static async verify(_,x){if(!_)throw new Error("Identity-provider is required, cannot verify entry");if(!Entry.isEntry(x))throw new Error("Invalid Log entry");if(!x.key)throw new Error("Entry doesn't have a key");if(!x.sig)throw new Error("Entry doesn't have a signature");const E=Entry.toEntry(x,{presigned:!0}),S=x.v<1?"v0":"v1";return _.verify(x.sig,x.key,Entry.toBuffer(E),S)}static toBuffer(_){const x=_.v===0?JSON.stringify(_):stringify$2(_);return Buffer$5.from(x)}static async toMultihash(_,x,E=!1){if(!_)throw IpfsNotDefinedError();if(!Entry.isEntry(x))throw new Error("Invalid object format, cannot generate entry hash");const S=Entry.toEntry(x);return write$3(_,getWriteFormat(S.v),S,{links:IPLD_LINKS$1,pin:E})}static toEntry(_,{presigned:x=!1,includeHash:E=!1}={}){const S={hash:E?_.hash:null,id:_.id,payload:_.payload,next:_.next},C=_.v;return C>1&&(S.refs=_.refs),S.v=_.v,S.clock=new LamportClock(_.clock.id,_.clock.time),x||(S.key=_.key,C>0&&(S.identity=_.identity),S.sig=_.sig),S}static async fromMultihash(_,x){if(!_)throw IpfsNotDefinedError();if(!x)throw new Error(`Invalid hash: ${x}`);const E=await read$4(_,x,{links:IPLD_LINKS$1}),S=Entry.toEntry(E);return S.hash=x,S}static isEntry(_){return _&&_.id!==void 0&&_.next!==void 0&&_.payload!==void 0&&_.v!==void 0&&_.hash!==void 0&&_.clock!==void 0&&(_.refs!==void 0||_.v<2)}static compare(_,x){const E=LamportClock.compare(_.clock,x.clock);return E===0?_.clock.id<x.clock.id?-1:1:E}static isEqual(_,x){return _.hash===x.hash}static isParent(_,x){return x.next.indexOf(_.hash)>-1}static findChildren(_,x){let E=[],S=x.find(T=>Entry.isParent(_,T)),C=_;for(;S;)E.push(S),C=S,S=x.find(T=>Entry.isParent(C,T));return E=E.sort((T,A)=>T.clock.time>A.clock.time),E}}async function pDoWhilst(n,_){const x=await n();if(_(x))return pDoWhilst(n,_)}const{isEntry:isEntry$1,fromMultihash}=Entry,hasItems=n=>n&&n.length>0;class EntryIO{static async fetchParallel(_,x,{length:E,exclude:S=[],shouldExclude:C,timeout:T,concurrency:A,onProgressCallback:B}){const I=async L=>EntryIO.fetchAll(_,L,{length:E,exclude:S,shouldExclude:C,timeout:T,onProgressCallback:B,concurrency:A}),M=(L,V)=>L.concat(V),O=L=>L.reduce(M,[]),D=await pMap$2(x,I,{concurrency:Math.max(A||x.length,1)});return O(D)}static async fetchAll(_,x,{length:E=-1,exclude:S=[],shouldExclude:C,timeout:T,onProgressCallback:A,onStartProgressCallback:B,concurrency:I=32,delay:M=0}={}){const O=[],D={},L={},V=Array.isArray(x)?{0:x.slice()}:{0:[x]};let U=0,q=0,H=0;C=C||(()=>!1);const W=()=>Object.values(V).find(hasItems)!==void 0,Q=(fe,ge)=>{!L[fe]&&!C(fe)&&(V[ge]||(V[ge]=[]),V[ge].includes(fe)||V[ge].push(fe),L[fe]=!0)},re=(fe=1)=>{const ge=($e,_e,ae)=>{const X=V[_e];for(;X.length>0&&$e.length<fe;){const F=X.shift();$e.push(F)}return X.length===0&&delete V[_e],$e};return Object.keys(V).reduce(ge,[])},ce=fe=>{D[fe.hash||fe]=!0},ne=async fe=>{if(!(!fe||D[fe]||C(fe)))return new Promise(async(ge,$e)=>{const _e=T&&T>0?setTimeout(()=>{console.warn(`Warning: Couldn't fetch entry '${fe}', request timed out (${T}ms)`),ge()},T):null,ae=X=>{if(isEntry$1(X)&&!D[X.hash]&&!C(X.hash)){const F=X.clock.time;q=Math.max(q,F),H=O.length>0?Math.min(O[O.length-1].clock.time,H):q;const z=O.length>=E&&F>=H,J=te=>q-F+(te+1)*te;(E<0||O.length<E||z)&&!C(X.hash)&&!D[X.hash]&&(O.push(X),D[X.hash]=!0,A&&A(X)),E<0?(X.next.forEach(Q),X.refs&&X.refs.forEach(Q)):((O.length<E||F>H||F===H&&!D[X.hash]&&!C(X.hash))&&X.next.forEach(te=>Q(te,J(0))),X.refs&&O.length+X.refs.length<=E&&X.refs.forEach((te,se)=>Q(te,J(se))))}};B&&B(fe,null,0,O.length);try{const X=await fromMultihash(_,fe);M>0&&await((z=0)=>new Promise(J=>setTimeout(J,z)))(M),ae(X),ge()}catch(X){$e(X)}finally{clearTimeout(_e)}})},Y=async()=>{if(U<I){const fe=re(I);U+=fe.length,await pMap$2(fe,ne,{concurrency:I}),U-=fe.length}};return S.forEach(ce),await pDoWhilst(Y,W),O}}function LastWriteWins$2(n,_){const x=(C,T)=>C,E=(C,T)=>SortByClockId(C,T,x);return((C,T)=>SortByClocks(C,T,E))(n,_)}function SortByEntryHash(n,_){const x=(C,T)=>C.hash<T.hash?-1:1,E=(C,T)=>SortByClockId(C,T,x);return((C,T)=>SortByClocks(C,T,E))(n,_)}function SortByClocks(n,_,x){const E=LamportClock.compare(n.clock,_.clock);return E===0?x(n,_):E}function SortByClockId(n,_,x){return n.clock.id===_.clock.id?x(n,_):n.clock.id<_.clock.id?-1:1}function NoZeroes$2(n){const _=`Your log's tiebreaker function, ${n.name}, has returned zero and therefore cannot be`;return(E,S)=>{const C=n(E,S);if(C===0)throw Error(_);return C}}const Sorting={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$2,SortByEntryHash,NoZeroes:NoZeroes$2},IPFSNotDefinedError=()=>new Error("IPFS instance not defined"),LogNotDefinedError=()=>new Error("Log instance not defined"),NotALogError=()=>new Error("Given argument is not an instance of Log"),LtOrLteMustBeStringOrArray=()=>new Error("lt or lte must be a string or array of Entries"),{LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1}=Sorting,{fetchAll,fetchParallel}=EntryIO,{compare:compare$2,isEntry}=Entry,IPLD_LINKS=["heads"],last=(n,_)=>n.slice(n.length-Math.min(n.length,_),n.length);class LogIO{static async toMultihash(_,x,{format:E}={}){if(!isDefined$2(_))throw IPFSNotDefinedError();if(!isDefined$2(x))throw LogNotDefinedError();if(isDefined$2(E)||(E="dag-cbor"),x.values.length<1)throw new Error("Can't serialize an empty log");return write$3(_,E,x.toJSON(),{links:IPLD_LINKS})}static async fromMultihash(_,x,{length:E=-1,exclude:S=[],shouldExclude:C,timeout:T,concurrency:A,sortFn:B,onProgressCallback:I}){if(!isDefined$2(_))throw IPFSNotDefinedError();if(!isDefined$2(x))throw new Error(`Invalid hash: ${x}`);const M=await read$4(_,x,{links:IPLD_LINKS});if(!M.heads||!M.id)throw NotALogError();B=B||NoZeroes$1(LastWriteWins$1);const O=q=>M.heads.includes(q.hash),D=await fetchAll(_,M.heads,{length:E,exclude:S,shouldExclude:C,timeout:T,concurrency:A,onProgressCallback:I}),L=M.id,V=E>-1?last(D.sort(B),E):D,U=V.filter(O);return{logId:L,entries:V,heads:U}}static async fromEntryHash(_,x,{length:E=-1,exclude:S=[],shouldExclude:C,timeout:T,concurrency:A,sortFn:B,onProgressCallback:I}){if(!isDefined$2(_))throw IPFSNotDefinedError();if(!isDefined$2(x))throw new Error("'hash' must be defined");const M=Array.isArray(x)?x:[x];E=E>-1?Math.max(E,1):E;const O=await fetchParallel(_,M,{length:E,exclude:S,shouldExclude:C,timeout:T,concurrency:A,onProgressCallback:I});return B=B||NoZeroes$1(LastWriteWins$1),{entries:E>-1?last(O.sort(B),E):O}}static async fromJSON(_,x,{length:E=-1,timeout:S,concurrency:C,onProgressCallback:T}){if(!isDefined$2(_))throw IPFSNotDefinedError();const{id:A,heads:B}=x,I=B.map(D=>D.hash),O=(await fetchParallel(_,I,{length:E,timeout:S,concurrency:C,onProgressCallback:T})).sort(compare$2);return{logId:A,entries:O,heads:B}}static async fromEntry(_,x,{length:E=-1,exclude:S=[],shouldExclude:C,timeout:T,concurrency:A,onProgressCallback:B}){if(!isDefined$2(_))throw IPFSNotDefinedError();if(!isDefined$2(x))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(x)&&!isEntry(x))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(x)||(x=[x]),E=E>-1?Math.max(E,x.length):E;const I=x.map(W=>W.hash),M=await fetchParallel(_,I,{length:E,exclude:S,shouldExclude:C,timeout:T,concurrency:A,onProgressCallback:B}),O=x.concat(M).concat(S),D=findUniques(O,"hash").sort(compare$2),L=D.slice(E>-1?-E:-D.length),V=difference$1(L,x,"hash"),q=((W,Q)=>{const re=W.slice(Q.length,W.length);return Q.concat(re)})(L,V);return{logId:q[q.length-1].id,entries:q}}}class AccessController{async canAppend(_,x){return!0}}class EntryIndex{constructor(_={}){this._cache=_}set(_,x){this._cache[_]=x}get(_){return this._cache[_]}delete(_){return delete this._cache[_]}add(_){this._cache=Object.assign(this._cache,_)}get length(){return Object.values(this._cache).length}}const{LastWriteWins,NoZeroes}=Sorting,randomId=()=>new Date().getTime().toString(),getHash=n=>n.hash,flatMap$1=(n,_)=>n.concat(_),getNextPointers=n=>n.next,maxClockTimeReducer=(n,_)=>Math.max(n,_.clock.time),uniqueEntriesReducer=(n,_)=>(n[_.hash]=_,n);class Log extends GSet{constructor(_,x,{logId:E,access:S,entries:C,heads:T,clock:A,sortFn:B,concurrency:I}={}){if(!isDefined$2(_))throw IPFSNotDefinedError();if(!isDefined$2(x))throw new Error("Identity is required");if(isDefined$2(S)||(S=new AccessController),isDefined$2(C)&&!Array.isArray(C))throw new Error("'entries' argument must be an array of Entry instances");if(isDefined$2(T)&&!Array.isArray(T))throw new Error("'heads' argument must be an array");isDefined$2(B)||(B=LastWriteWins),super(),this._sortFn=NoZeroes(B),this._storage=_,this._id=E||randomId(),this._access=S,this._identity=x;const M=(C||[]).reduce(uniqueEntriesReducer,{});this._entryIndex=new EntryIndex(M),C=Object.values(M)||[],T=T||Log.findHeads(C),this._headsIndex=T.reduce(uniqueEntriesReducer,{}),this._nextsIndex={};const O=L=>L.next.forEach(V=>this._nextsIndex[V]=L.hash);C.forEach(O),this._length=C.length;const D=Math.max(A?A.time:0,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,D),this.joinConcurrency=I||16}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return Log.findTails(this.values)}get tailHashes(){return Log.findTailHashes(this.values)}setIdentity(_){this._identity=_;const x=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,x)}get(_){return this._entryIndex.get(_)}has(_){return this._entryIndex.get(_.hash||_)!==void 0}traverse(_,x=-1,E){let S=_.sort(this._sortFn).reverse(),C={};const T={};let A=0;const B=O=>this.get(O),I=O=>{!O||C[O.hash]||(S=[O,...S].sort(this._sortFn).reverse(),C[O.hash]=!0)},M=O=>{T[O.hash]=O,C[O.hash]=!0,A++};for(;S.length>0&&(A<x||x<0);){const O=S.shift();if(M(O),E&&E===O.hash)break;O.next.map(B).filter(isDefined$2).forEach(I)}return S=[],C={},T}async append(_,x=1,E=!1){const S=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0))+1;this._clock=new LamportClock(this.clock.id,S);const C=Object.values(this.traverse(this.heads,Math.max(x,this.heads.length))),A=(L=>{const V=new Set;for(let U=1;U<=L;U*=2){const q=Math.min(U-1,C.length-1);V.add(C[q])}return V})(Math.min(x,C.length));C.length<x&&C[C.length-1]&&A.add(C[C.length-1]);const B=Object.keys(this.heads.reverse().reduce(uniqueEntriesReducer,{})),I=L=>!B.includes(L),M=Array.from(A).map(getHash).filter(I),O=await Entry.create(this._storage,this._identity,this.id,_,B,this.clock,M,E);if(!await this._access.canAppend(O,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(O.hash,O),B.forEach(L=>this._nextsIndex[L]=O.hash),this._headsIndex={},this._headsIndex[O.hash]=O,this._length++,O}iterator({gt:_=void 0,gte:x=void 0,lt:E=void 0,lte:S=void 0,amount:C=-1}={}){if(C===0)return function*(){}();if(typeof S=="string"&&(S=[this.get(S)]),typeof E=="string"&&(E=[this.get(this.get(E).next[0])]),S&&!Array.isArray(S)||E&&!Array.isArray(E))throw LtOrLteMustBeStringOrArray();const T=(S||E||this.heads).filter(isDefined$2),A=x?this.get(x).hash:_?this.get(_).hash:null,B=A?-1:C||-1,I=this.traverse(T,B,A);let M=Object.values(I);return _&&M.pop(),(_||x)&&C>-1&&(M=M.slice(M.length-C,M.length)),function*(){for(const O in M)yield M[O]}()}async join(_,x=-1){if(!isDefined$2(_))throw LogNotDefinedError();if(!Log.isLog(_))throw NotALogError();if(this.id!==_.id)return;const E=Log.difference(_,this),S=this._identity.provider,C=async V=>{if(!await this._access.canAppend(V,S))throw new Error(`Could not append entry, key "${V.identity.id}" is not allowed to write to the log`)},T=async V=>{const U=await Entry.verify(S,V),q=V.identity?V.identity.publicKey:V.key;if(!U)throw new Error(`Could not validate signature "${V.sig}" for entry "${V.hash}" and key "${q}"`)},A=Object.values(E);await pMap$2(A,async V=>{await C(V),await T(V)},{concurrency:this.joinConcurrency});const B=V=>{this.get(V.hash)||this._length++,V.next.forEach(q=>this._nextsIndex[q]=V.hash)};Object.values(E).forEach(B),this._entryIndex.add(E);const I=V=>!O.find(U=>U===V.hash),M=V=>!this._nextsIndex[V.hash],O=Object.values(E).map(getNextPointers).reduce(flatMap$1,[]),D=Log.findHeads(Object.values(Object.assign({},this._headsIndex,_._headsIndex))).filter(I).filter(M).reduce(uniqueEntriesReducer,{});if(this._headsIndex=D,x>-1){let V=this.values;V=V.slice(-x),this._entryIndex=null,this._entryIndex=new EntryIndex(V.reduce(uniqueEntriesReducer,{})),this._headsIndex=Log.findHeads(V).reduce(uniqueEntriesReducer,{}),this._length=this._entryIndex.length}const L=Object.values(this._headsIndex).reduce(maxClockTimeReducer,0);return this._clock=new LamportClock(this.clock.id,Math.max(this.clock.time,L)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(getHash)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return Buffer$5.from(JSON.stringify(this.toJSON()))}toString(_){return this.values.slice().reverse().map((x,E)=>{const C=Entry.findChildren(x,this.values).length;let T=new Array(Math.max(C-1,0));return T=C>1?T.fill("  "):T,T=C>0?T.concat([""]):T,T.join("")+(_?_(x.payload):x.payload)}).join(`
`)}static isLog(_){return _.id!==void 0&&_.heads!==void 0&&_._entryIndex!==void 0}toMultihash({format:_}={}){return LogIO.toMultihash(this._storage,this,{format:_})}static async fromMultihash(_,x,E,{access:S,length:C=-1,exclude:T=[],shouldExclude:A,timeout:B,concurrency:I,sortFn:M,onProgressCallback:O}={}){const{logId:D,entries:L,heads:V}=await LogIO.fromMultihash(_,E,{length:C,exclude:T,shouldExclude:A,timeout:B,onProgressCallback:O,concurrency:I,sortFn:M});return new Log(_,x,{logId:D,access:S,entries:L,heads:V,sortFn:M})}static async fromEntryHash(_,x,E,{logId:S,access:C,length:T=-1,exclude:A=[],shouldExclude:B,timeout:I,concurrency:M,sortFn:O,onProgressCallback:D}={}){const{entries:L}=await LogIO.fromEntryHash(_,E,{length:T,exclude:A,shouldExclude:B,timeout:I,concurrency:M,onProgressCallback:D});return new Log(_,x,{logId:S,access:C,entries:L,sortFn:O})}static async fromJSON(_,x,E,{access:S,length:C=-1,timeout:T,sortFn:A,onProgressCallback:B}={}){const{logId:I,entries:M}=await LogIO.fromJSON(_,E,{length:C,timeout:T,onProgressCallback:B});return new Log(_,x,{logId:I,access:S,entries:M,sortFn:A})}static async fromEntry(_,x,E,{access:S,length:C=-1,exclude:T=[],timeout:A,concurrency:B,sortFn:I,onProgressCallback:M}={}){const{logId:O,entries:D}=await LogIO.fromEntry(_,E,{length:C,exclude:T,timeout:A,concurrency:B,onProgressCallback:M});return new Log(_,x,{logId:O,access:S,entries:D,sortFn:I})}static findHeads(_){const x=(T,A,B,I)=>{const M=O=>T[O]=A.hash;return A.next.forEach(M),T},E=_.reduce(x,{}),S=T=>E[T.hash]===void 0,C=(T,A)=>T.clock.id>A.clock.id;return _.filter(S).sort(C)}static findTails(_){const x={},E=[],S={};let C=[];const T=O=>{O.next.length===0&&E.push(O);const D=L=>{x[L]||(x[L]=[]),x[L].push(O)};O.next.forEach(D),C=C.concat(O.next),S[O.hash]=!0};_.forEach(T);const A=(O,D,L,V)=>O.concat(findUniques(D,"hash")),B=O=>S[O]===void 0,I=O=>x[O],M=C.filter(B).map(I).reduce(A,[]).concat(E);return findUniques(M,"hash").sort(Entry.compare)}static findTailHashes(_){const x={},E=C=>x[C.hash]=!0,S=(C,T,A,B)=>{const I=M=>{x[M]===void 0&&C.splice(0,0,M)};return T.next.reverse().forEach(I),C};return _.forEach(E),_.reduce(S,[])}static difference(_,x){const E=Object.keys(_._headsIndex),S={},C={},T=A=>{!S[A]&&!x.get(A)&&(E.push(A),S[A]=!0)};for(;E.length>0;){const A=E.shift(),B=_.get(A);B&&!x.get(A)&&B.id===x.id&&(C[B.hash]=B,S[B.hash]=!0,B.next.concat(B.refs).forEach(T))}return C}}const getNextAndRefsUnion=n=>[...new Set([...n.next,...n.refs])],flatMap=(n,_)=>n.concat(_),defaultConcurrency=32;class Replicator{constructor(_,x){this._store=_,this._concurrency=x||defaultConcurrency,this._q=new PQueue({concurrency:this._concurrency}),this._logs=[],this._fetching={},this._fetched={},this._q.on("idle",async()=>{const E=this._logs.slice();if(this._logs=[],this.onReplicationComplete&&E.length>0&&this._store._oplog)try{await this.onReplicationComplete(E),E.forEach(S=>S.values.forEach(C=>delete this._fetched[C.hash]))}catch(S){console.error(S)}})}get tasksRunning(){return this._q.pending}get tasksQueued(){return this._q.size}get unfinished(){return Object.keys(this._fetching)}async load(_){try{this._addToQueue(_)}catch(x){console.error(x)}}async _addToQueue(_){const x=S=>S&&this._store._oplog&&(this._store._oplog.has(S)||this._fetching[S]!==void 0||this._fetched[S]),E=S=>(this._fetching[S.hash||S]=!0,async()=>{S.hash&&this.onReplicationQueued&&this.onReplicationQueued(S);try{const C=await this._replicateLog(S);this._logs.push(C)}catch(C){throw console.error(C),C}delete this._fetching[S.hash||S]});if(_.length>0){const S=_.filter(C=>!x(C.hash||C)).map(C=>E(C));S.length>0&&this._q.addAll(S)}}async stop(){this._q.pause(),this._q.clear(),await this._q.onIdle(),this._logs=[],this._fetching={},this._fetched={}}async _replicateLog(_){const x=_.hash||_,E=A=>{this._fetched[A.hash]=!0,this.onReplicationProgress&&this.onReplicationProgress(A)},S=A=>A&&A!==x&&this._store._oplog&&(this._store._oplog.has(A)||this._fetching[A]!==void 0||this._fetched[A]!==void 0),C=await Log.fromEntryHash(this._store._ipfs,this._store.identity,x,{logId:this._store.id,access:this._store.access,length:-1,exclude:[],shouldExclude:S,concurrency:this._concurrency,onProgressCallback:E}),T=C.values.map(getNextAndRefsUnion).reduce(flatMap,[]);try{this._addToQueue(T)}catch(A){throw console.error(A),A}return C}}class ReplicationInfo{constructor(){this.progress=0,this.max=0}reset(){this.progress=0,this.max=0}}const globSourceImport={},fs_=Object.freeze(Object.defineProperty({__proto__:null,default:globSourceImport},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(fs_);var util$9={},types$1={},shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},x=Symbol("test"),E=Object(x);if(typeof x=="string"||Object.prototype.toString.call(x)!=="[object Symbol]"||Object.prototype.toString.call(E)!=="[object Symbol]")return!1;var S=42;_[x]=S;for(x in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var C=Object.getOwnPropertySymbols(_);if(C.length!==1||C[0]!==x||!Object.prototype.propertyIsEnumerable.call(_,x))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var T=Object.getOwnPropertyDescriptor(_,x);if(T.value!==S||T.enumerable!==!0)return!1}return!0},hasSymbols$5=shams$1,shams=function(){return hasSymbols$5()&&!!Symbol.toStringTag},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$4=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE$1="Function.prototype.bind called on incompatible ",slice$2=Array.prototype.slice,toStr$a=Object.prototype.toString,funcType="[object Function]",implementation$b=function(_){var x=this;if(typeof x!="function"||toStr$a.call(x)!==funcType)throw new TypeError(ERROR_MESSAGE$1+x);for(var E=slice$2.call(arguments,1),S,C=function(){if(this instanceof S){var M=x.apply(this,E.concat(slice$2.call(arguments)));return Object(M)===M?M:this}else return x.apply(_,E.concat(slice$2.call(arguments)))},T=Math.max(0,x.length-E.length),A=[],B=0;B<T;B++)A.push("$"+B);if(S=Function("binder","return function ("+A.join(",")+"){ return binder.apply(this,arguments); }")(C),x.prototype){var I=function(){};I.prototype=x.prototype,S.prototype=new I,I.prototype=null}return S},implementation$a=implementation$b,functionBind=Function.prototype.bind||implementation$a,bind$2=functionBind,src$4=bind$2.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(n){try{return $Function('"use strict"; return ('+n+").constructor;")()}catch{}},$gOPD$2=Object.getOwnPropertyDescriptor;if($gOPD$2)try{$gOPD$2({},"")}catch{$gOPD$2=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$2?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$2(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$3=hasSymbols$4(),hasProto=hasProto$1(),getProto$2=Object.getPrototypeOf||(hasProto?function(n){return n.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$2?undefined$1:getProto$2(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$3&&getProto$2?getProto$2([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$3&&getProto$2?getProto$2(getProto$2([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$3||!getProto$2?undefined$1:getProto$2(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$3||!getProto$2?undefined$1:getProto$2(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$3&&getProto$2?getProto$2(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$3?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$2)try{null.error}catch(n){var errorProto=getProto$2(getProto$2(n));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function n(_){var x;if(_==="%AsyncFunction%")x=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")x=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")x=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var E=n("%AsyncGeneratorFunction%");E&&(x=E.prototype)}else if(_==="%AsyncIteratorPrototype%"){var S=n("%AsyncGenerator%");S&&getProto$2&&(x=getProto$2(S.prototype))}return INTRINSICS[_]=x,x},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$1=src$4,$concat$1=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace$1=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec$1=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(_){var x=$strSlice(_,0,1),E=$strSlice(_,-1);if(x==="%"&&E!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(E==="%"&&x!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var S=[];return $replace$1(_,rePropName,function(C,T,A,B){S[S.length]=A?$replace$1(B,reEscapeChar,"$1"):T||C}),S},getBaseIntrinsic=function(_,x){var E=_,S;if(hasOwn$1(LEGACY_ALIASES,E)&&(S=LEGACY_ALIASES[E],E="%"+S[0]+"%"),hasOwn$1(INTRINSICS,E)){var C=INTRINSICS[E];if(C===needsEval&&(C=doEval(E)),typeof C>"u"&&!x)throw new $TypeError$2("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:S,name:E,value:C}}throw new $SyntaxError$1("intrinsic "+_+" does not exist!")},getIntrinsic=function(_,x){if(typeof _!="string"||_.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof x!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec$1(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var E=stringToPath(_),S=E.length>0?E[0]:"",C=getBaseIntrinsic("%"+S+"%",x),T=C.name,A=C.value,B=!1,I=C.alias;I&&(S=I[0],$spliceApply(E,$concat$1([0,1],I)));for(var M=1,O=!0;M<E.length;M+=1){var D=E[M],L=$strSlice(D,0,1),V=$strSlice(D,-1);if((L==='"'||L==="'"||L==="`"||V==='"'||V==="'"||V==="`")&&L!==V)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((D==="constructor"||!O)&&(B=!0),S+="."+D,T="%"+S+"%",hasOwn$1(INTRINSICS,T))A=INTRINSICS[T];else if(A!=null){if(!(D in A)){if(!x)throw new $TypeError$2("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD$2&&M+1>=E.length){var U=$gOPD$2(A,D);O=!!U,O&&"get"in U&&!("originalValue"in U.get)?A=U.get:A=A[D]}else O=hasOwn$1(A,D),A=A[D];O&&!B&&(INTRINSICS[T]=A)}}return A},callBind$6={exports:{}};(function(n){var _=functionBind,x=getIntrinsic,E=x("%Function.prototype.apply%"),S=x("%Function.prototype.call%"),C=x("%Reflect.apply%",!0)||_.call(S,E),T=x("%Object.getOwnPropertyDescriptor%",!0),A=x("%Object.defineProperty%",!0),B=x("%Math.max%");if(A)try{A({},"a",{value:1})}catch{A=null}n.exports=function(O){var D=C(_,S,arguments);if(T&&A){var L=T(D,"length");L.configurable&&A(D,"length",{value:1+B(0,O.length-(arguments.length-1))})}return D};var I=function(){return C(_,E,arguments)};A?A(n.exports,"apply",{value:I}):n.exports.apply=I})(callBind$6);var callBindExports=callBind$6.exports,GetIntrinsic$8=getIntrinsic,callBind$5=callBindExports,$indexOf$1=callBind$5(GetIntrinsic$8("String.prototype.indexOf")),callBound$c=function(_,x){var E=GetIntrinsic$8(_,!!x);return typeof E=="function"&&$indexOf$1(_,".prototype.")>-1?callBind$5(E):E},hasToStringTag$8=shams(),callBound$b=callBound$c,$toString$3=callBound$b("Object.prototype.toString"),isStandardArguments=function(_){return hasToStringTag$8&&_&&typeof _=="object"&&Symbol.toStringTag in _?!1:$toString$3(_)==="[object Arguments]"},isLegacyArguments=function(_){return isStandardArguments(_)?!0:_!==null&&typeof _=="object"&&typeof _.length=="number"&&_.length>=0&&$toString$3(_)!=="[object Array]"&&$toString$3(_.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$3=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$9=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$7=shams(),getProto$1=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$7)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(_){if(typeof _!="function")return!1;if(isFnRegex.test(fnToStr$1.call(_)))return!0;if(!hasToStringTag$7){var x=toStr$9.call(_);return x==="[object GeneratorFunction]"}if(!getProto$1)return!1;if(typeof GeneratorFunction>"u"){var E=getGeneratorFunc();GeneratorFunction=E?getProto$1(E):!1}return getProto$1(_)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(n){n!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(_){try{var x=fnToStr.call(_);return constructorRegex.test(x)}catch{return!1}},tryFunctionObject=function(_){try{return isES6ClassFn(_)?!1:(fnToStr.call(_),!0)}catch{return!1}},toStr$8=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$6=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$8.call(all)===toStr$8.call(document.all)&&(isDDA=function(_){if((isIE68||!_)&&(typeof _>"u"||typeof _=="object"))try{var x=toStr$8.call(_);return(x===ddaClass||x===ddaClass2||x===ddaClass3||x===objectClass)&&_("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(_){if(isDDA(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;try{reflectApply(_,null,badArrayLike)}catch(x){if(x!==isCallableMarker)return!1}return!isES6ClassFn(_)&&tryFunctionObject(_)}:function(_){if(isDDA(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;if(hasToStringTag$6)return tryFunctionObject(_);if(isES6ClassFn(_))return!1;var x=toStr$8.call(_);return x!==fnClass&&x!==genClass&&!/^\[object HTML/.test(x)?!1:tryFunctionObject(_)},isCallable=isCallable$1,toStr$7=Object.prototype.toString,hasOwnProperty$2=Object.prototype.hasOwnProperty,forEachArray=function(_,x,E){for(var S=0,C=_.length;S<C;S++)hasOwnProperty$2.call(_,S)&&(E==null?x(_[S],S,_):x.call(E,_[S],S,_))},forEachString=function(_,x,E){for(var S=0,C=_.length;S<C;S++)E==null?x(_.charAt(S),S,_):x.call(E,_.charAt(S),S,_)},forEachObject=function(_,x,E){for(var S in _)hasOwnProperty$2.call(_,S)&&(E==null?x(_[S],S,_):x.call(E,_[S],S,_))},forEach$3=function(_,x,E){if(!isCallable(x))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=E),toStr$7.call(_)==="[object Array]"?forEachArray(_,x,S):typeof _=="string"?forEachString(_,x,S):forEachObject(_,x,S)},forEach_1=forEach$3,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var _=[],x=0;x<possibleNames.length;x++)typeof g$1[possibleNames[x]]=="function"&&(_[_.length]=possibleNames[x]);return _},GetIntrinsic$7=getIntrinsic,$gOPD$1=GetIntrinsic$7("%Object.getOwnPropertyDescriptor%",!0);if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd=$gOPD$1,forEach$2=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind$4=callBindExports,callBound$a=callBound$c,gOPD$3=gopd,$toString$2=callBound$a("Object.prototype.toString"),hasToStringTag$5=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice$1=callBound$a("String.prototype.slice"),getPrototypeOf$1=Object.getPrototypeOf,$indexOf=callBound$a("Array.prototype.indexOf",!0)||function(_,x){for(var E=0;E<_.length;E+=1)if(_[E]===x)return E;return-1},cache$1={__proto__:null};hasToStringTag$5&&gOPD$3&&getPrototypeOf$1?forEach$2(typedArrays,function(n){var _=new g[n];if(Symbol.toStringTag in _){var x=getPrototypeOf$1(_),E=gOPD$3(x,Symbol.toStringTag);if(!E){var S=getPrototypeOf$1(x);E=gOPD$3(S,Symbol.toStringTag)}cache$1["$"+n]=callBind$4(E.get)}}):forEach$2(typedArrays,function(n){var _=new g[n];cache$1["$"+n]=callBind$4(_.slice)});var tryTypedArrays=function(_){var x=!1;return forEach$2(cache$1,function(E,S){if(!x)try{"$"+E(_)===S&&(x=$slice$1(S,1))}catch{}}),x},trySlices=function(_){var x=!1;return forEach$2(cache$1,function(E,S){if(!x)try{E(_),x=$slice$1(S,1)}catch{}}),x},whichTypedArray$2=function(_){if(!_||typeof _!="object")return!1;if(!hasToStringTag$5){var x=$slice$1($toString$2(_),8,-1);return $indexOf(typedArrays,x)>-1?x:x!=="Object"?!1:trySlices(_)}return gOPD$3?tryTypedArrays(_):null},whichTypedArray$1=whichTypedArray$2,isTypedArray$2=function(_){return!!whichTypedArray$1(_)};(function(n){var _=isArguments$3,x=isGeneratorFunction,E=whichTypedArray$2,S=isTypedArray$2;function C(Pe){return Pe.call.bind(Pe)}var T=typeof BigInt<"u",A=typeof Symbol<"u",B=C(Object.prototype.toString),I=C(Number.prototype.valueOf),M=C(String.prototype.valueOf),O=C(Boolean.prototype.valueOf);if(T)var D=C(BigInt.prototype.valueOf);if(A)var L=C(Symbol.prototype.valueOf);function V(Pe,He){if(typeof Pe!="object")return!1;try{return He(Pe),!0}catch{return!1}}n.isArgumentsObject=_,n.isGeneratorFunction=x,n.isTypedArray=S;function U(Pe){return typeof Promise<"u"&&Pe instanceof Promise||Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"&&typeof Pe.catch=="function"}n.isPromise=U;function q(Pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Pe):S(Pe)||ee(Pe)}n.isArrayBufferView=q;function H(Pe){return E(Pe)==="Uint8Array"}n.isUint8Array=H;function W(Pe){return E(Pe)==="Uint8ClampedArray"}n.isUint8ClampedArray=W;function Q(Pe){return E(Pe)==="Uint16Array"}n.isUint16Array=Q;function re(Pe){return E(Pe)==="Uint32Array"}n.isUint32Array=re;function ce(Pe){return E(Pe)==="Int8Array"}n.isInt8Array=ce;function ne(Pe){return E(Pe)==="Int16Array"}n.isInt16Array=ne;function Y(Pe){return E(Pe)==="Int32Array"}n.isInt32Array=Y;function fe(Pe){return E(Pe)==="Float32Array"}n.isFloat32Array=fe;function ge(Pe){return E(Pe)==="Float64Array"}n.isFloat64Array=ge;function $e(Pe){return E(Pe)==="BigInt64Array"}n.isBigInt64Array=$e;function _e(Pe){return E(Pe)==="BigUint64Array"}n.isBigUint64Array=_e;function ae(Pe){return B(Pe)==="[object Map]"}ae.working=typeof Map<"u"&&ae(new Map);function X(Pe){return typeof Map>"u"?!1:ae.working?ae(Pe):Pe instanceof Map}n.isMap=X;function F(Pe){return B(Pe)==="[object Set]"}F.working=typeof Set<"u"&&F(new Set);function z(Pe){return typeof Set>"u"?!1:F.working?F(Pe):Pe instanceof Set}n.isSet=z;function J(Pe){return B(Pe)==="[object WeakMap]"}J.working=typeof WeakMap<"u"&&J(new WeakMap);function te(Pe){return typeof WeakMap>"u"?!1:J.working?J(Pe):Pe instanceof WeakMap}n.isWeakMap=te;function se(Pe){return B(Pe)==="[object WeakSet]"}se.working=typeof WeakSet<"u"&&se(new WeakSet);function oe(Pe){return se(Pe)}n.isWeakSet=oe;function ie(Pe){return B(Pe)==="[object ArrayBuffer]"}ie.working=typeof ArrayBuffer<"u"&&ie(new ArrayBuffer);function G(Pe){return typeof ArrayBuffer>"u"?!1:ie.working?ie(Pe):Pe instanceof ArrayBuffer}n.isArrayBuffer=G;function j(Pe){return B(Pe)==="[object DataView]"}j.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&j(new DataView(new ArrayBuffer(1),0,1));function ee(Pe){return typeof DataView>"u"?!1:j.working?j(Pe):Pe instanceof DataView}n.isDataView=ee;var pe=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function he(Pe){return B(Pe)==="[object SharedArrayBuffer]"}function Se(Pe){return typeof pe>"u"?!1:(typeof he.working>"u"&&(he.working=he(new pe)),he.working?he(Pe):Pe instanceof pe)}n.isSharedArrayBuffer=Se;function we(Pe){return B(Pe)==="[object AsyncFunction]"}n.isAsyncFunction=we;function xe(Pe){return B(Pe)==="[object Map Iterator]"}n.isMapIterator=xe;function Ee(Pe){return B(Pe)==="[object Set Iterator]"}n.isSetIterator=Ee;function ye(Pe){return B(Pe)==="[object Generator]"}n.isGeneratorObject=ye;function Ce(Pe){return B(Pe)==="[object WebAssembly.Module]"}n.isWebAssemblyCompiledModule=Ce;function ve(Pe){return V(Pe,I)}n.isNumberObject=ve;function Be(Pe){return V(Pe,M)}n.isStringObject=Be;function me(Pe){return V(Pe,O)}n.isBooleanObject=me;function Ie(Pe){return T&&V(Pe,D)}n.isBigIntObject=Ie;function Ve(Pe){return A&&V(Pe,L)}n.isSymbolObject=Ve;function Me(Pe){return ve(Pe)||Be(Pe)||me(Pe)||Ie(Pe)||Ve(Pe)}n.isBoxedPrimitive=Me;function Ne(Pe){return typeof Uint8Array<"u"&&(G(Pe)||Se(Pe))}n.isAnyArrayBuffer=Ne,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Pe){Object.defineProperty(n,Pe,{enumerable:!1,value:function(){throw new Error(Pe+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function(_){return _&&typeof _=="object"&&typeof _.copy=="function"&&typeof _.fill=="function"&&typeof _.readUInt8=="function"},inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(_,x){x&&(_.super_=x,_.prototype=Object.create(x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(_,x){if(x){_.super_=x;var E=function(){};E.prototype=x.prototype,_.prototype=new E,_.prototype.constructor=_}};var inherits_browserExports=inherits_browser$1.exports;(function(n){var _=Object.getOwnPropertyDescriptors||function(ee){for(var pe=Object.keys(ee),he={},Se=0;Se<pe.length;Se++)he[pe[Se]]=Object.getOwnPropertyDescriptor(ee,pe[Se]);return he},x=/%[sdj%]/g;n.format=function(j){if(!ce(j)){for(var ee=[],pe=0;pe<arguments.length;pe++)ee.push(T(arguments[pe]));return ee.join(" ")}for(var pe=1,he=arguments,Se=he.length,we=String(j).replace(x,function(Ee){if(Ee==="%%")return"%";if(pe>=Se)return Ee;switch(Ee){case"%s":return String(he[pe++]);case"%d":return Number(he[pe++]);case"%j":try{return JSON.stringify(he[pe++])}catch{return"[Circular]"}default:return Ee}}),xe=he[pe];pe<Se;xe=he[++pe])W(xe)||!ge(xe)?we+=" "+xe:we+=" "+T(xe);return we},n.deprecate=function(j,ee){if(typeof browser$1$1<"u"&&browser$1$1.noDeprecation===!0)return j;if(typeof browser$1$1>"u")return function(){return n.deprecate(j,ee).apply(this,arguments)};var pe=!1;function he(){if(!pe){if(browser$1$1.throwDeprecation)throw new Error(ee);browser$1$1.traceDeprecation?console.trace(ee):console.error(ee),pe=!0}return j.apply(this,arguments)}return he};var E={},S=/^$/;if({}.NODE_DEBUG){var C={}.NODE_DEBUG;C=C.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),S=new RegExp("^"+C+"$","i")}n.debuglog=function(j){if(j=j.toUpperCase(),!E[j])if(S.test(j)){var ee=browser$1$1.pid;E[j]=function(){var pe=n.format.apply(n,arguments);console.error("%s %d: %s",j,ee,pe)}}else E[j]=function(){};return E[j]};function T(j,ee){var pe={seen:[],stylize:B};return arguments.length>=3&&(pe.depth=arguments[2]),arguments.length>=4&&(pe.colors=arguments[3]),H(ee)?pe.showHidden=ee:ee&&n._extend(pe,ee),Y(pe.showHidden)&&(pe.showHidden=!1),Y(pe.depth)&&(pe.depth=2),Y(pe.colors)&&(pe.colors=!1),Y(pe.customInspect)&&(pe.customInspect=!0),pe.colors&&(pe.stylize=A),M(pe,j,pe.depth)}n.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function A(j,ee){var pe=T.styles[ee];return pe?"\x1B["+T.colors[pe][0]+"m"+j+"\x1B["+T.colors[pe][1]+"m":j}function B(j,ee){return j}function I(j){var ee={};return j.forEach(function(pe,he){ee[pe]=!0}),ee}function M(j,ee,pe){if(j.customInspect&&ee&&ae(ee.inspect)&&ee.inspect!==n.inspect&&!(ee.constructor&&ee.constructor.prototype===ee)){var he=ee.inspect(pe,j);return ce(he)||(he=M(j,he,pe)),he}var Se=O(j,ee);if(Se)return Se;var we=Object.keys(ee),xe=I(we);if(j.showHidden&&(we=Object.getOwnPropertyNames(ee)),_e(ee)&&(we.indexOf("message")>=0||we.indexOf("description")>=0))return D(ee);if(we.length===0){if(ae(ee)){var Ee=ee.name?": "+ee.name:"";return j.stylize("[Function"+Ee+"]","special")}if(fe(ee))return j.stylize(RegExp.prototype.toString.call(ee),"regexp");if($e(ee))return j.stylize(Date.prototype.toString.call(ee),"date");if(_e(ee))return D(ee)}var ye="",Ce=!1,ve=["{","}"];if(q(ee)&&(Ce=!0,ve=["[","]"]),ae(ee)){var Be=ee.name?": "+ee.name:"";ye=" [Function"+Be+"]"}if(fe(ee)&&(ye=" "+RegExp.prototype.toString.call(ee)),$e(ee)&&(ye=" "+Date.prototype.toUTCString.call(ee)),_e(ee)&&(ye=" "+D(ee)),we.length===0&&(!Ce||ee.length==0))return ve[0]+ye+ve[1];if(pe<0)return fe(ee)?j.stylize(RegExp.prototype.toString.call(ee),"regexp"):j.stylize("[Object]","special");j.seen.push(ee);var me;return Ce?me=L(j,ee,pe,xe,we):me=we.map(function(Ie){return V(j,ee,pe,xe,Ie,Ce)}),j.seen.pop(),U(me,ye,ve)}function O(j,ee){if(Y(ee))return j.stylize("undefined","undefined");if(ce(ee)){var pe="'"+JSON.stringify(ee).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(pe,"string")}if(re(ee))return j.stylize(""+ee,"number");if(H(ee))return j.stylize(""+ee,"boolean");if(W(ee))return j.stylize("null","null")}function D(j){return"["+Error.prototype.toString.call(j)+"]"}function L(j,ee,pe,he,Se){for(var we=[],xe=0,Ee=ee.length;xe<Ee;++xe)se(ee,String(xe))?we.push(V(j,ee,pe,he,String(xe),!0)):we.push("");return Se.forEach(function(ye){ye.match(/^\d+$/)||we.push(V(j,ee,pe,he,ye,!0))}),we}function V(j,ee,pe,he,Se,we){var xe,Ee,ye;if(ye=Object.getOwnPropertyDescriptor(ee,Se)||{value:ee[Se]},ye.get?ye.set?Ee=j.stylize("[Getter/Setter]","special"):Ee=j.stylize("[Getter]","special"):ye.set&&(Ee=j.stylize("[Setter]","special")),se(he,Se)||(xe="["+Se+"]"),Ee||(j.seen.indexOf(ye.value)<0?(W(pe)?Ee=M(j,ye.value,null):Ee=M(j,ye.value,pe-1),Ee.indexOf(`
`)>-1&&(we?Ee=Ee.split(`
`).map(function(Ce){return"  "+Ce}).join(`
`).slice(2):Ee=`
`+Ee.split(`
`).map(function(Ce){return"   "+Ce}).join(`
`))):Ee=j.stylize("[Circular]","special")),Y(xe)){if(we&&Se.match(/^\d+$/))return Ee;xe=JSON.stringify(""+Se),xe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(xe=xe.slice(1,-1),xe=j.stylize(xe,"name")):(xe=xe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),xe=j.stylize(xe,"string"))}return xe+": "+Ee}function U(j,ee,pe){var he=j.reduce(function(Se,we){return we.indexOf(`
`)>=0,Se+we.replace(/\u001b\[\d\d?m/g,"").length+1},0);return he>60?pe[0]+(ee===""?"":ee+`
 `)+" "+j.join(`,
  `)+" "+pe[1]:pe[0]+ee+" "+j.join(", ")+" "+pe[1]}n.types=types$1;function q(j){return Array.isArray(j)}n.isArray=q;function H(j){return typeof j=="boolean"}n.isBoolean=H;function W(j){return j===null}n.isNull=W;function Q(j){return j==null}n.isNullOrUndefined=Q;function re(j){return typeof j=="number"}n.isNumber=re;function ce(j){return typeof j=="string"}n.isString=ce;function ne(j){return typeof j=="symbol"}n.isSymbol=ne;function Y(j){return j===void 0}n.isUndefined=Y;function fe(j){return ge(j)&&F(j)==="[object RegExp]"}n.isRegExp=fe,n.types.isRegExp=fe;function ge(j){return typeof j=="object"&&j!==null}n.isObject=ge;function $e(j){return ge(j)&&F(j)==="[object Date]"}n.isDate=$e,n.types.isDate=$e;function _e(j){return ge(j)&&(F(j)==="[object Error]"||j instanceof Error)}n.isError=_e,n.types.isNativeError=_e;function ae(j){return typeof j=="function"}n.isFunction=ae;function X(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||typeof j>"u"}n.isPrimitive=X,n.isBuffer=isBufferBrowser;function F(j){return Object.prototype.toString.call(j)}function z(j){return j<10?"0"+j.toString(10):j.toString(10)}var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function te(){var j=new Date,ee=[z(j.getHours()),z(j.getMinutes()),z(j.getSeconds())].join(":");return[j.getDate(),J[j.getMonth()],ee].join(" ")}n.log=function(){console.log("%s - %s",te(),n.format.apply(n,arguments))},n.inherits=inherits_browserExports,n._extend=function(j,ee){if(!ee||!ge(ee))return j;for(var pe=Object.keys(ee),he=pe.length;he--;)j[pe[he]]=ee[pe[he]];return j};function se(j,ee){return Object.prototype.hasOwnProperty.call(j,ee)}var oe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;n.promisify=function(ee){if(typeof ee!="function")throw new TypeError('The "original" argument must be of type Function');if(oe&&ee[oe]){var pe=ee[oe];if(typeof pe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(pe,oe,{value:pe,enumerable:!1,writable:!1,configurable:!0}),pe}function pe(){for(var he,Se,we=new Promise(function(ye,Ce){he=ye,Se=Ce}),xe=[],Ee=0;Ee<arguments.length;Ee++)xe.push(arguments[Ee]);xe.push(function(ye,Ce){ye?Se(ye):he(Ce)});try{ee.apply(this,xe)}catch(ye){Se(ye)}return we}return Object.setPrototypeOf(pe,Object.getPrototypeOf(ee)),oe&&Object.defineProperty(pe,oe,{value:pe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(pe,_(ee))},n.promisify.custom=oe;function ie(j,ee){if(!j){var pe=new Error("Promise was rejected with a falsy value");pe.reason=j,j=pe}return ee(j)}function G(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');function ee(){for(var pe=[],he=0;he<arguments.length;he++)pe.push(arguments[he]);var Se=pe.pop();if(typeof Se!="function")throw new TypeError("The last argument must be of type Function");var we=this,xe=function(){return Se.apply(we,arguments)};j.apply(this,pe).then(function(Ee){browser$1$1.nextTick(xe.bind(null,null,Ee))},function(Ee){browser$1$1.nextTick(ie.bind(null,Ee,xe))})}return Object.setPrototypeOf(ee,Object.getPrototypeOf(j)),Object.defineProperties(ee,_(j)),ee}n.callbackify=G})(util$9);const fs$1=require$$0$2,format$3=util$9.format,EventEmitter$2=eventsExports.EventEmitter;let isElectronRenderer=browser$1$1.type&&browser$1$1.type==="renderer",isNodejs=!!(!isElectronRenderer&&browser$1$1.version);const LogLevels$1={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels$1.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter$2,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};let Logger$1=class{constructor(_,x){this.category=_;let E={};Object.assign(E,defaultOptions),Object.assign(E,x),this.options=E,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels$1.DEBUG)&&this._write(LogLevels$1.DEBUG,format$3.apply(null,arguments))}log(){this._shouldLog(LogLevels$1.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels$1.INFO)&&this._write(LogLevels$1.INFO,format$3.apply(null,arguments))}warn(){this._shouldLog(LogLevels$1.WARN)&&this._write(LogLevels$1.WARN,format$3.apply(null,arguments))}error(){this._shouldLog(LogLevels$1.ERROR)&&this._write(LogLevels$1.ERROR,format$3.apply(null,arguments))}_write(_,x){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=fs$1.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let E=this._format(_,x),S=this._createLogMessage(_,x),C=this._createLogMessage(_,x,E.timestamp,E.level,E.category,E.text);this.fileWriter&&isNodejs&&fs$1.writeSync(this.fileWriter,S+`
`,null,"utf-8"),isNodejs||!this.options.useColors?(console.log(C),GlobalEvents.emit("data",this.category,_,x)):_===LogLevels$1.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(C,E.timestamp,E.level,E.category,E.text):this.options.showTimestamp&&!this.options.showLevel?console.error(C,E.timestamp,E.category,E.text):!this.options.showTimestamp&&this.options.showLevel?console.error(C,E.level,E.category,E.text):console.error(C,E.category,E.text):this.options.showTimestamp&&this.options.showLevel?console.log(C,E.timestamp,E.level,E.category,E.text):this.options.showTimestamp&&!this.options.showLevel?console.log(C,E.timestamp,E.category,E.text):!this.options.showTimestamp&&this.options.showLevel?console.log(C,E.level,E.category,E.text):console.log(C,E.category,E.text)}_format(_,x){let E="",S="",C="",T=": ";if(this.options.useColors){const A=Object.keys(LogLevels$1).map(I=>LogLevels$1[I]).indexOf(_),B=this.options.color;isNodejs?(this.options.showTimestamp&&(E="\x1B[3"+Colors.Grey+"m"),this.options.showLevel&&(S="\x1B[3"+loglevelColors[A]+";22m"),C="\x1B[3"+B+";1m",T="\x1B[0m: "):(this.options.showTimestamp&&(E="color:"+Colors.Grey),this.options.showLevel&&(S="color:"+loglevelColors[A]),C="color:"+B+"; font-weight: bold")}return{timestamp:E,level:S,category:C,text:T}}_createLogMessage(_,x,E,S,C,T){E=E||"",S=S||"",C=C||"",T=T||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(E="%c"),this.options.showLevel&&(S="%c"),C="%c",T=": %c");let A="";return this.options.showTimestamp&&!this.options.useLocalTime&&(A+=""+new Date().toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(A+=""+new Date().toLocaleString()+" "),A=E+A,this.options.showLevel&&(A+=S+"["+_+"]"+(_===LogLevels$1.INFO||_===LogLevels$1.WARN?" ":"")+" "),A+=C+this.category,A+=T+x,A}_shouldLog(_){let x=typeof browser$1$1<"u"&&browser$1$1.env!==void 0&&{}.LOG!==void 0?{}.LOG.toUpperCase():null;x=typeof window<"u"&&window.LOG?window.LOG.toUpperCase():x;const E=x||GlobalLogLevel,S=Object.keys(LogLevels$1).map(A=>LogLevels$1[A]),C=S.indexOf(_),T=S.indexOf(E);return C>=T}};var src$3={Colors,LogLevels:LogLevels$1,setLogLevel:n=>{GlobalLogLevel=n},setLogfile:n=>{GlobalLogfile=n},create:(n,_)=>new Logger$1(n,_),forceBrowserMode:n=>isNodejs=!n,events:GlobalEvents};const Logger$2=getDefaultExportFromCjs(src$3),logger$n=Logger$2.create("orbit-db.store",{color:Logger$2.Colors.Blue});Logger$2.setLogLevel("ERROR");const DefaultOptions={Index,maxHistory:-1,fetchEntryTimeout:null,referenceCount:32,replicationConcurrency:32,syncLocal:!1,sortFn:void 0};class Store{constructor(_,x,E,S){if(!x)throw new Error("Identity required");const C=Object.assign({},DefaultOptions);Object.assign(C,S),this.options=C,this._type="store",this.id=E.toString(),this.identity=x,this.address=E,this.dbname=E.path||"",this.events=new eventsExports.EventEmitter,this.remoteHeadsPath=path.join(this.id,"_remoteHeads"),this.localHeadsPath=path.join(this.id,"_localHeads"),this.snapshotPath=path.join(this.id,"snapshot"),this.queuePath=path.join(this.id,"queue"),this.manifestPath=path.join(this.id,"_manifest"),this._ipfs=_,this._cache=S.cache;const T={canAppend:A=>A.identity.publicKey===x.publicKey};this.access=S.accessController||T,this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._queue=new PQueue({concurrency:1}),this._index=new this.options.Index(this.address.root),this._replicationStatus=new ReplicationInfo,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{const A=async M=>{this._recalculateReplicationMax(M.clock?M.clock.time:0),this.events.emit("replicate",this.address.toString(),M)},B=async M=>{const O=this.replicationStatus.progress,D=this.replicationStatus.max;this._recalculateReplicationStatus(M.clock.time),(this._oplog.length+1>this.replicationStatus.progress||this.replicationStatus.progress>O||this.replicationStatus.max>D)&&this.events.emit("replicate.progress",this.address.toString(),M.hash,M,this.replicationStatus.progress,this.replicationStatus.max)},I=async M=>{const O=async()=>{try{if(this._oplog&&M.length>0){for(const L of M)await this._oplog.join(L);const D=this._oplog.heads;await this._cache.set(this.remoteHeadsPath,D),logger$n.debug(`Saved heads ${D.length} [${D.map(L=>L.hash).join(", ")}]`),await this._updateIndex(),this._oplog.length>this.replicationStatus.progress&&this._recalculateReplicationStatus(this._oplog.length),this.events.emit("replicated",this.address.toString(),M.length,this)}}catch(D){console.error(D)}};await this._queue.add(O.bind(this))};this._replicator=new Replicator(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.onReplicationQueued=A,this._replicator.onReplicationProgress=B,this._replicator.onReplicationComplete=I}catch(A){console.error("Store Error:",A)}this.events.on("replicated.progress",(A,B,I,M,O)=>{this._procEntry(I)}),this.events.on("write",(A,B,I)=>{this._procEntry(B)})}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map(_=>this._index._index[_])}get index(){return this._index._index}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}setIdentity(_){this.identity=_,this._oplog.setIdentity(_)}async close(){await this._replicator.stop(),await this._queue.onIdle(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.options.onClose&&await this.options.onClose(this),this.access.close&&await this.access.close();for(const _ in this.events._events)this.events.removeAllListeners(_);return this._oplog=null,this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){this.options.onDrop&&await this.options.onDrop(this),await this._cache.del(this.localHeadsPath),await this._cache.del(this.remoteHeadsPath),await this._cache.del(this.snapshotPath),await this._cache.del(this.queuePath),await this._cache.del(this.manifestPath),await this.close(),this._index=new this.options.Index(this.address.root),this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._cache=this.options.cache}async load(_,x={}){typeof _=="object"&&(x=_,_=void 0),_=_||this.options.maxHistory;const E=x.fetchEntryTimeout||this.options.fetchEntryTimeout;this.options.onLoad&&await this.options.onLoad(this);const S=await this._cache.get(this.localHeadsPath)||[],C=await this._cache.get(this.remoteHeadsPath)||[],T=S.concat(C);T.length>0&&this.events.emit("load",this.address.toString(),T),T.forEach(B=>this._recalculateReplicationMax(B.clock.time));const A=await Log.fromEntryHash(this._ipfs,this.identity,T.map(B=>B.hash),{logId:this.id,access:this.access,sortFn:this.options.sortFn,length:_,onProgressCallback:this._onLoadProgress.bind(this),timeout:E,concurrency:this.options.replicationConcurrency});this._oplog=A,T.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}async sync(_){return this._stats.syncRequestsReceieved+=1,logger$n.debug(`Sync request #${this._stats.syncRequestsReceieved} ${_.length}`),_.length===0?void 0:pEachSeries(_,async E=>{if(!E)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);const S=this.identity.provider;if(!S)throw new Error("Identity-provider is required, cannot verify entry");if(!await this.access.canAppend(E,S))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const T=Entry.toEntry(E);return await write$3(this._ipfs,getWriteFormat(T),T,{links:IPLD_LINKS$1,onlyHash:!0})!==E.hash&&console.warn(`"WARNING! Head hash didn't match the contents`),E}).then(async E=>this._replicator.load(E.filter(S=>S!==null)))}loadMoreFrom(_,x){this._replicator.load(x)}async saveSnapshot(){const _=this._replicator.unfinished,x=this._oplog.toSnapshot(),E=Buffer$5.from(JSON.stringify({id:x.id,heads:x.heads,size:x.values.length,values:x.values,type:this.type})),S=await this._ipfs.add(E);return S.hash=S.cid.toString(),await this._cache.set(this.snapshotPath,S),await this._cache.set(this.queuePath,_),logger$n.debug(`Saved snapshot: ${S.hash}, queue length: ${_.length}`),[S]}async loadFromSnapshot(_){this.options.onLoad&&await this.options.onLoad(this),this.events.emit("load",this.address.toString());const x=(C,T)=>Math.max(C,T.clock.time),E=await this._cache.get(this.queuePath);this.sync(E||[]);const S=await this._cache.get(this.snapshotPath);if(S){const C=[];for await(const B of this._ipfs.cat(S.hash))C.push(B);const T=Buffer$5.concat(C),A=JSON.parse(T.toString());this._recalculateReplicationMax(A.values.reduce(x,0)),A&&(this._oplog=await Log.fromJSON(this._ipfs,this.identity,A,{access:this.access,sortFn:this.options.sortFn,length:-1,timeout:1e3,onProgressCallback:this._onLoadProgress.bind(this)}),await this._updateIndex(),this.events.emit("replicated",this.address.toString())),this.events.emit("ready",this.address.toString(),this._oplog.heads)}else throw new Error(`Snapshot for ${this.address} not found!`);return this}async _updateIndex(){await this._index.updateIndex(this._oplog)}async syncLocal(){const _=await this._cache.get(this.localHeadsPath)||[],x=await this._cache.get(this.remoteHeadsPath)||[],E=_.concat(x);for(let S=0;S<E.length;S++){const C=E[S];if(!this._oplog.heads.includes(C)){await this.load();break}}}async _addOperation(_,{onProgressCallback:x,pin:E=!1}={}){async function S(){if(this._oplog){this.options.syncLocal&&await this.syncLocal();const C=await this._oplog.append(_,this.options.referenceCount,E);return this._recalculateReplicationStatus(C.clock.time),await this._cache.set(this.localHeadsPath,[C]),await this._updateIndex(),this.events.emit("write",this.address.toString(),C,this._oplog.heads),x&&x(C),C.hash}}return this._queue.add(S.bind(this))}_addOperationBatch(_,x,E,S){throw new Error("Not implemented!")}_procEntry(_){const{payload:x,hash:E}=_,{op:S}=x;S?this.events.emit(`log.op.${S}`,this.address.toString(),E,x):this.events.emit("log.op.none",this.address.toString(),E,x),this.events.emit("log.op",S,this.address.toString(),E,x)}_recalculateReplicationProgress(){this._replicationStatus.progress=Math.max(Math.min(this._replicationStatus.progress+1,this._replicationStatus.max),this._oplog?this._oplog.length:0)}_recalculateReplicationMax(_){this._replicationStatus.max=Math.max.apply(null,[this.replicationStatus.max,this._oplog?this._oplog.length:0,_||0])}_recalculateReplicationStatus(_){this._recalculateReplicationMax(_),this._recalculateReplicationProgress()}_onLoadProgress(_){this._recalculateReplicationStatus(_.clock.time),this.events.emit("load.progress",this.address.toString(),_.hash,_,this.replicationStatus.progress,this.replicationStatus.max)}}class EventIndex{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(_){this._index=_}}class EventStore extends Store{constructor(_,x,E,S={}){S.Index===void 0&&Object.assign(S,{Index:EventIndex}),super(_,x,E,S),this._type="eventlog",this.events.on("log.op.ADD",(C,T,A)=>{this.events.emit("db.append",A.value)})}add(_,x={}){return this._addOperation({op:"ADD",key:null,value:_},x)}get(_){return this.iterator({gte:_,limit:1}).collect()[0]}iterator(_){const x=this._query(_);let E=0;return{[Symbol.iterator](){return this},next(){let C={value:null,done:!0};return E<x.length&&(C={value:x[E],done:!1},E++),C},collect:()=>x}}_query(_){_||(_={});const x=_.limit?_.limit>-1?_.limit:this._index.get().length:1,E=this._index.get().slice();let S=[];return _.gt||_.gte?S=this._read(E,_.gt?_.gt:_.gte,x,!!_.gte):S=this._read(E.reverse(),_.lt?_.lt:_.lte,x,_.lte||!_.lt).reverse(),_.reverse&&S.reverse(),S}_read(_,x,E,S){const C=_.map(B=>B.hash).indexOf(x);let T=Math.max(C,0);return T+=S?0:1,_.slice(T).slice(0,E)}}class FeedIndex{constructor(){this._index={}}get(){return Object.keys(this._index).map(_=>this._index[_])}updateIndex(_){this._index={},_.values.reduce((x,E)=>(x.includes(E.hash)||(x.push(E.hash),E.payload.op==="ADD"?this._index[E.hash]=E:E.payload.op==="DEL"&&delete this._index[E.payload.value]),x),[])}}class FeedStore extends EventStore{constructor(_,x,E,S){S||(S={}),S.Index||Object.assign(S,{Index:FeedIndex}),super(_,x,E,S),this._type="feed"}remove(_,x={}){return this.del(_,x)}del(_,x={}){const E={op:"DEL",key:null,value:_};return this._addOperation(E,x)}}class KeyValueIndex{constructor(){this._index={}}get(_){return this._index[_]}updateIndex(_){const x=_.values,E={};for(let S=x.length-1;S>=0;S--){const C=x[S];if(!E[C.payload.key]){if(E[C.payload.key]=!0,C.payload.op==="PUT"){this._index[C.payload.key]=C.payload.value;continue}if(C.payload.op==="DEL"){delete this._index[C.payload.key];continue}}}}}class KeyValueStore extends Store{constructor(_,x,E,S){const C=Object.assign({},{Index:KeyValueIndex});Object.assign(C,S),super(_,x,E,C),this._type="keyvalue"}get all(){return this._index._index}get(_){return this._index.get(_)}set(_,x,E={}){return this.put(_,x,E)}put(_,x,E={}){return this._addOperation({op:"PUT",key:_,value:x},E)}del(_,x={}){return this._addOperation({op:"DEL",key:_,value:null},x)}}const deepEqual$2=(n,_)=>{const x=Object.getOwnPropertyNames(n),E=Object.getOwnPropertyNames(_);if(x.length!==E.length)return!1;for(let S=0;S<x.length;S++){const C=x[S];if(n[C]!==_[C])return!1}return!0},sum$3=(n,_)=>n+_;class GCounter{constructor(_,x){this.id=_,this._counters=x||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum$3,0)}increment(_){_&&_<1||(_==null&&(_=1),this._counters[this.id]=this._counters[this.id]+_)}merge(_){Object.entries(_._counters).forEach(([x,E])=>{this._counters[x]=Math.max(this._counters[x]||0,E)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(_){return GCounter.isEqual(this,_)}static from(_){return new GCounter(_.id,_.counters)}static isEqual(_,x){return _.id!==x.id?!1:deepEqual$2(_._counters,x._counters)}}class CounterIndex{constructor(_){this._index=new GCounter(_)}get(){return this._index}updateIndex(_){if(this._index){const x=S=>S.payload.value.counters,E=S=>this._index.merge({_counters:S});_.values.filter(S=>S&&S.payload.op==="COUNTER").map(x).forEach(E)}}}class CounterStore extends Store{constructor(_,x,E,S={}){S.Index||Object.assign(S,{Index:CounterIndex}),super(_,x,E,S),this._index=new this.options.Index(this.identity.publicKey),this._type="counter"}get value(){return this._index.get().value}inc(_,x={}){const E=new GCounter(this.identity.publicKey,Object.assign({},this._index.get()._counters));return E.increment(_),this._addOperation({op:"COUNTER",key:null,value:E.toJSON()},x)}}class DocumentIndex{constructor(){this._index={}}get(_,x=!1){return x?this._index[_]:this._index[_]?this._index[_].payload.value:null}updateIndex(_,x){const E=(S,C,T)=>{if(C.payload.op==="PUTALL"&&C.payload.docs[Symbol.iterator])for(const A of C.payload.docs)A&&S[A.key]!==!0&&(S[A.key]=!0,this._index[A.key]={payload:{op:"PUT",key:A.key,value:A.value}});else S[C.payload.key]!==!0&&(S[C.payload.key]=!0,C.payload.op==="PUT"?this._index[C.payload.key]=C:C.payload.op==="DEL"&&delete this._index[C.payload.key]);return x&&x(C,T),S};_.values.slice().reverse().reduce(E,{})}}var pMap=(n,_,x)=>new Promise((E,S)=>{x=Object.assign({concurrency:1/0},x);const C=x.concurrency;if(C<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const T=[],A=n[Symbol.iterator]();let B=!1,I=!1,M=0,O=0;const D=()=>{if(B)return;const L=A.next(),V=O;if(O++,L.done){I=!0,M===0&&E(T);return}M++,Promise.resolve(L.value).then(U=>_(U,V)).then(U=>{T[V]=U,M--,D()},U=>{B=!0,S(U)})};for(let L=0;L<C&&(D(),!I);L++);});const pMap$1=getDefaultExportFromCjs(pMap),replaceAll=(n,_,x)=>n.toString().split(_).join(x);class DocumentStore extends Store{constructor(_,x,E,S){S||(S={}),S.indexBy||Object.assign(S,{indexBy:"_id"}),S.Index||Object.assign(S,{Index:DocumentIndex}),super(_,x,E,S),this._type="docstore"}get(_,x=!1){_=_.toString();const E=_.split(" ");_=E.length>1?replaceAll(_,"."," ").toLowerCase():_.toLowerCase();const S=A=>E.length>1?replaceAll(A,"."," ").toLowerCase().indexOf(_)!==-1:A.toLowerCase().indexOf(_)!==-1,C=A=>this._index.get(A),T=A=>x?A.indexOf(_)!==-1:S(A);return Object.keys(this._index._index).filter(T).map(C)}query(_,x={}){const E=x.fullOp||!1;return Object.keys(this._index._index).map(S=>this._index.get(S,E)).filter(_)}batchPut(_,x){return pMap$1(_,(S,C)=>this._addOperationBatch({op:"PUT",key:S[this.options.indexBy],value:S},!0,C===_.length-1,x),{concurrency:1}).then(()=>this.saveSnapshot())}put(_,x={}){if(!_[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:_[this.options.indexBy],value:_},x)}putAll(_,x={}){if(Array.isArray(_)||(_=[_]),!_.every(E=>E[this.options.indexBy]))throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUTALL",docs:_.map(E=>({key:E[this.options.indexBy],value:E}))},x)}del(_,x={}){if(!this._index.get(_))throw new Error(`No entry with key '${_}' in the database`);return this._addOperation({op:"DEL",key:_,value:null},x)}}var pReduce$1=(n,_,x)=>new Promise((E,S)=>{const C=n[Symbol.iterator]();let T=0;const A=B=>{const I=C.next();if(I.done){E(B);return}Promise.all([B,I.value]).then(M=>{A(_(M[0],M[1],T++))}).catch(S)};A(x)}),dist$1={exports:{}};(function(n,_){Object.defineProperty(_,"__esModule",{value:!0});const x=util$9,E=Object.prototype.toString,S=B=>I=>typeof I===B,C=B=>{const I=E.call(B).slice(8,-1);return I||null},T=B=>I=>C(I)===B;function A(B){if(B===null)return"null";if(B===!0||B===!1)return"boolean";const I=typeof B;if(I==="undefined")return"undefined";if(I==="string")return"string";if(I==="number")return"number";if(I==="symbol")return"symbol";if(A.function_(B))return"Function";if(Array.isArray(B))return"Array";if(Buffer$5.isBuffer(B))return"Buffer";const M=C(B);if(M)return M;if(B instanceof String||B instanceof Boolean||B instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}(function(B){const I=ge=>typeof ge=="object";B.undefined=S("undefined"),B.string=S("string"),B.number=S("number"),B.function_=S("function"),B.null_=ge=>ge===null,B.class_=ge=>B.function_(ge)&&ge.toString().startsWith("class "),B.boolean=ge=>ge===!0||ge===!1,B.symbol=S("symbol"),B.array=Array.isArray,B.buffer=Buffer$5.isBuffer,B.nullOrUndefined=ge=>B.null_(ge)||B.undefined(ge),B.object=ge=>!B.nullOrUndefined(ge)&&(B.function_(ge)||I(ge)),B.iterable=ge=>!B.nullOrUndefined(ge)&&B.function_(ge[Symbol.iterator]),B.generator=ge=>B.iterable(ge)&&B.function_(ge.next)&&B.function_(ge.throw),B.nativePromise=T("Promise");const M=ge=>!B.null_(ge)&&I(ge)&&B.function_(ge.then)&&B.function_(ge.catch);B.promise=ge=>B.nativePromise(ge)||M(ge);const O=ge=>$e=>B.function_($e)&&B.function_($e.constructor)&&$e.constructor.name===ge;B.generatorFunction=O("GeneratorFunction"),B.asyncFunction=O("AsyncFunction"),B.boundFunction=ge=>B.function_(ge)&&!ge.hasOwnProperty("prototype"),B.regExp=T("RegExp"),B.date=T("Date"),B.error=T("Error"),B.map=T("Map"),B.set=T("Set"),B.weakMap=T("WeakMap"),B.weakSet=T("WeakSet"),B.int8Array=T("Int8Array"),B.uint8Array=T("Uint8Array"),B.uint8ClampedArray=T("Uint8ClampedArray"),B.int16Array=T("Int16Array"),B.uint16Array=T("Uint16Array"),B.int32Array=T("Int32Array"),B.uint32Array=T("Uint32Array"),B.float32Array=T("Float32Array"),B.float64Array=T("Float64Array"),B.arrayBuffer=T("ArrayBuffer"),B.sharedArrayBuffer=T("SharedArrayBuffer"),B.dataView=T("DataView"),B.directInstanceOf=(ge,$e)=>B.object(ge)&&B.object($e)&&Object.getPrototypeOf(ge)===$e.prototype,B.truthy=ge=>!!ge,B.falsy=ge=>!ge,B.nan=ge=>Number.isNaN(ge);const D=new Set(["undefined","string","number","boolean","symbol"]);B.primitive=ge=>B.null_(ge)||D.has(typeof ge),B.integer=ge=>Number.isInteger(ge),B.safeInteger=ge=>Number.isSafeInteger(ge),B.plainObject=ge=>{let $e;return C(ge)==="Object"&&($e=Object.getPrototypeOf(ge),$e===null||$e===Object.getPrototypeOf({}))};const L=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);B.typedArray=ge=>{const $e=C(ge);return $e===null?!1:L.has($e)};const V=ge=>B.safeInteger(ge)&&ge>-1;B.arrayLike=ge=>!B.nullOrUndefined(ge)&&!B.function_(ge)&&V(ge.length),B.inRange=(ge,$e)=>{if(B.number($e))return ge>=Math.min(0,$e)&&ge<=Math.max($e,0);if(B.array($e)&&$e.length===2)return ge>=Math.min.apply(null,$e)&&ge<=Math.max.apply(null,$e);throw new TypeError(`Invalid range: ${x.inspect($e)}`)};const U=1,q=["innerHTML","ownerDocument","style","attributes","nodeValue"];B.domElement=ge=>B.object(ge)&&ge.nodeType===U&&B.string(ge.nodeName)&&!B.plainObject(ge)&&q.every($e=>$e in ge),B.nodeStream=ge=>!B.nullOrUndefined(ge)&&I(ge)&&B.function_(ge.pipe),B.infinite=ge=>ge===1/0||ge===-1/0;const H=ge=>$e=>B.integer($e)&&Math.abs($e%2)===ge;B.even=H(0),B.odd=H(1);const W=ge=>B.string(ge)&&/\S/.test(ge)===!1,Q=ge=>(B.string(ge)||B.array(ge))&&ge.length===0,re=ge=>!B.map(ge)&&!B.set(ge)&&B.object(ge)&&Object.keys(ge).length===0,ce=ge=>(B.map(ge)||B.set(ge))&&ge.size===0;B.empty=ge=>B.falsy(ge)||Q(ge)||re(ge)||ce(ge),B.emptyOrWhitespace=ge=>B.empty(ge)||W(ge);const ne=(ge,$e,_e)=>{const ae=Array.prototype.slice.call(_e,1);if(B.function_($e)===!1)throw new TypeError(`Invalid predicate: ${x.inspect($e)}`);if(ae.length===0)throw new TypeError("Invalid number of values");return ge.call(ae,$e)};function Y(ge){return ne(Array.prototype.some,ge,arguments)}B.any=Y;function fe(ge){return ne(Array.prototype.every,ge,arguments)}B.all=fe})(A||(A={})),Object.defineProperties(A,{class:{value:A.class_},function:{value:A.function_},null:{value:A.null_}}),_.default=A,n.exports=A,n.exports.default=A})(dist$1,dist$1.exports);var distExports=dist$1.exports;const pReduce=pReduce$1,is$2=distExports;var pSeries=n=>{const _=[];for(const x of n){const E=is$2(x);if(E!=="Function")return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${E}\``))}return pReduce(n,(x,E)=>Promise.resolve().then(E).then(S=>{_.push(S)})).then(()=>_)};const pSeries$1=getDefaultExportFromCjs(pSeries),difference=(n,_)=>new Set([...n].filter(x=>!_.has(x))),DEFAULT_OPTIONS={start:!0,pollInterval:1e3};class IpfsPubsubPeerMonitor extends EventEmitter$5{constructor(_,x,E){super(),this._pubsub=_,this._topic=x,this._options=Object.assign({},DEFAULT_OPTIONS,E),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return this._interval!==null}set started(_){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval),this._pollPeers()}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(_){return this._peers.includes(_)}async _pollPeers(){try{const _=await this._pubsub.peers(this._topic);IpfsPubsubPeerMonitor._emitJoinsAndLeaves(new Set(this._peers),new Set(_),this),this._peers=_}catch(_){clearInterval(this._interval),this.emit("error",_)}}static _emitJoinsAndLeaves(_,x,E){const S=T=>E.emit("join",T),C=T=>E.emit("leave",T);difference(x,_).forEach(S),difference(_,x).forEach(C)}}const logger$m=Logger$2.create("pubsub",{color:Logger$2.Colors.Yellow});Logger$2.setLogLevel("ERROR");const maxTopicsOpen=256;let topicsOpenCount=0;class IPFSPubsub{constructor(_,x){this._ipfs=_,this._id=x,this._subscriptions={},this._ipfs.pubsub===null&&logger$m.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(maxTopicsOpen)}async subscribe(_,x,E,S={}){if(!this._subscriptions[_]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(_,this._handleMessage,S);const C=new IpfsPubsubPeerMonitor(this._ipfs.pubsub,_);C.on("join",T=>{logger$m.debug(`Peer joined ${_}:`),logger$m.debug(T),this._subscriptions[_]?E(_,T):(logger$m.warn("Peer joined a room we don't have a subscription for"),logger$m.warn(_,T))}),C.on("leave",T=>logger$m.debug(`Peer ${T} left ${_}`)),C.on("error",T=>logger$m.error(T)),this._subscriptions[_]={topicMonitor:C,onMessage:x,onNewPeer:E},topicsOpenCount++,logger$m.debug("Topics open:",topicsOpenCount)}}async unsubscribe(_){this._subscriptions[_]&&(await this._ipfs.pubsub.unsubscribe(_,this._handleMessage),this._subscriptions[_].topicMonitor.stop(),delete this._subscriptions[_],logger$m.debug(`Unsubscribed from '${_}'`),topicsOpenCount--,logger$m.debug("Topics open:",topicsOpenCount))}publish(_,x,E={}){if(this._subscriptions[_]&&this._ipfs.pubsub){let S;Buffer$5.isBuffer(x)||typeof x=="string"?S=x:S=JSON.stringify(x),this._ipfs.pubsub.publish(_,Buffer$5.from(S),E)}}async disconnect(){const _=Object.keys(this._subscriptions);await pSeries$1(_.map(x=>this.unsubscribe.bind(this,x))),this._subscriptions={}}async _handleMessage(_){if(String(_.from)===this._id)return;let x;const E=_.topic?_.topic:_.topicIDs[0];try{x=JSON.parse(Buffer$5.from(_.data).toString())}catch{x=_.data}const S=this._subscriptions[E];S&&S.onMessage&&x&&await S.onMessage(E,x,_.from)}}const logger$l=Logger$2.create("cache",{color:Logger$2.Colors.Magenta});Logger$2.setLogLevel("ERROR");class Cache{constructor(_){this._store=_}get status(){return this._store.status}async close(){if(!this._store)throw new Error("No cache store found to close");this.status==="open"&&await this._store.close()}async open(){if(!this._store)throw new Error("No cache store found to open");this.status!=="open"&&await this._store.open()}async get(_){try{return JSON.parse(await this._store.get(_))}catch(x){if(x.code==="LEVEL_NOT_FOUND"||x.cause!==void 0&&x.cause.code==="LEVEL_NOT_FOUND")return null;throw x}}async set(_,x){await this._store.put(_,JSON.stringify(x)),logger$l.debug(`cache: Set ${_} to ${JSON.stringify(x)}`)}load(){}destroy(){}async del(_){await this._store.del(_)}}var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(..._){const x=_.reduce((E,S)=>Object.assign(E,S),{});return Object.assign(x,{snapshots:x.snapshots||!1,permanence:x.permanence||!1,seek:x.seek||!1,clear:x.clear||!1,getMany:x.getMany||!1,keyIterator:x.keyIterator||!1,valueIterator:x.valueIterator||!1,iteratorNextv:x.iteratorNextv||!1,iteratorAll:x.iteratorAll||!1,status:x.status||!1,createIfMissing:x.createIfMissing||!1,errorIfExists:x.errorIfExists||!1,deferredOpen:x.deferredOpen||!1,promises:x.promises||!1,streams:x.streams||!1,encodings:Object.assign({},x.encodings),events:Object.assign({},x.events),additionalMethods:Object.assign({},x.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(_,x){super(_||""),typeof x=="object"&&x!==null&&(x.code&&(this.code=String(x.code)),x.expected&&(this.expected=!0),x.transient&&(this.transient=!0),x.cause&&(this.cause=x.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$2={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(_){if(this.encode=_.encode||this.encode,this.decode=_.decode||this.decode,this.name=_.name||this.name,this.format=_.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");_.createViewTranscoder&&(this.createViewTranscoder=_.createViewTranscoder),_.createBufferTranscoder&&(this.createBufferTranscoder=_.createBufferTranscoder),_.createUTF8Transcoder&&(this.createUTF8Transcoder=_.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$4}=buffer$3||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(_){super({..._,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:_=>this.decode(Buffer$4.from(_.buffer,_.byteOffset,_.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(_){super({..._,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:_=>{const x=this.encode(_);return Buffer$4.from(x.buffer,x.byteOffset,x.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(_){super({..._,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:_=>Buffer$4.from(this.encode(_),"utf8"),decode:_=>this.decode(_.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:_,textDecoder:x}=textEndec();return new ViewFormat$2({encode:E=>_.encode(this.encode(E)),decode:E=>this.decode(x.decode(E)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$3}=buffer$3||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$2,textDecoder:textDecoder$1}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$6=n=>n;encodings$2.utf8=new UTF8Format$1({encode:function(n){return Buffer$3.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?textDecoder$1.decode(n):String(n)},decode:identity$6,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder$2.encode(n)},decode:function(n){return textDecoder$1.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer$3.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer$3.from(n.buffer,n.byteOffset,n.byteLength):Buffer$3.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});encodings$2.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$2.buffer=new BufferFormat$1({encode:function(n){return Buffer$3.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer$3.from(n.buffer,n.byteOffset,n.byteLength):Buffer$3.from(String(n),"utf8")},decode:identity$6,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:Buffer$3.from(String(n),"utf8")},decode:function(n){return Buffer$3.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});encodings$2.view=new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder$2.encode(n)},decode:identity$6,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer$3.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer$3.from(n.buffer,n.byteOffset,n.byteLength):Buffer$3.from(String(n),"utf8")},decode:identity$6,name:`${this.name}+buffer`})}});encodings$2.hex=new BufferFormat$1({encode:function(n){return Buffer$3.isBuffer(n)?n:Buffer$3.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});encodings$2.base64=new BufferFormat$1({encode:function(n){return Buffer$3.isBuffer(n)?n:Buffer$3.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings$1=encodings$2,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(_){if(Array.isArray(_)){if(!_.every(x=>validFormats.has(x)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(_);for(const x in encodings$1)try{this.encoding(x)}catch(E){if(E.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw E}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(_){let x=this[kEncodings].get(_);if(x===void 0){if(typeof _=="string"&&_!==""){if(x=lookup[_],!x)throw new ModuleError$7(`Encoding '${_}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof _!="object"||_===null)throw new TypeError("First argument 'encoding' must be a string or object");x=from$4(_)}const{name:E,format:S}=x;if(!this[kFormats].has(S))if(this[kFormats].has("view"))x=x.createViewTranscoder();else if(this[kFormats].has("buffer"))x=x.createBufferTranscoder();else if(this[kFormats].has("utf8"))x=x.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${E}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const C of[_,E,x.name,x.commonName])this[kEncodings].set(C,x)}return x}};levelTranscoder.Transcoder=Transcoder$1;function from$4(n){if(n instanceof Encoding)return n;const _="type"in n&&typeof n.type=="string"?n.type:void 0,x=n.name||_||`anonymous-${anonymousCount++}`;switch(detectFormat(n)){case"view":return new ViewFormat({...n,name:x});case"utf8":return new UTF8Format({...n,name:x});case"buffer":return new BufferFormat({...n,name:x});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}const aliases={binary:encodings$1.buffer,"utf-8":encodings$1.utf8},lookup={...encodings$1,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n),nextTick=nextTickBrowser$1;catering.fromCallback=function(n,_){if(n===void 0){var x=new Promise(function(E,S){n=function(C,T){C?S(C):E(T)}});n[_!==void 0?_:"promise"]=x}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};catering.fromPromise=function(n,_){if(_===void 0)return n;n.then(function(x){nextTick(()=>_(null,x))}).catch(function(x){nextTick(()=>_(x))})};var abstractIterator={},common$7={};common$7.getCallback=function(n,_){return typeof n=="function"?n:_};common$7.getOptions=function(n,_){return typeof n=="object"&&n!==null?n:_!==void 0?_:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$7,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$4=()=>{};let warnedEnd=!1;class CommonIterator{constructor(_,x,E){if(typeof _!="object"||_===null){const S=_===null?"null":typeof _;throw new TypeError(`The first argument must be an abstract-level database, received ${S}`)}if(typeof x!="object"||x===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=x[kKeyEncoding$1],this[kValueEncoding$1]=x[kValueEncoding$1],this[kLegacy]=E,this[kLimit]=Number.isInteger(x.limit)&&x.limit>=0?x.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!x.abortOnClose,this.db=_,this.db.attachResource(this),this.nextTick=_.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(_){let x;if(_===void 0)x=new Promise((E,S)=>{_=(C,T,A)=>{C?S(C):this[kLegacy]?T===void 0&&A===void 0?E():E([T,A]):E(T)}});else if(typeof _!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(_,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(_,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=_,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),x}_next(_){this.nextTick(_)}nextv(_,x,E){return E=getCallback$2(x,E),E=fromCallback$3(E,kPromise$3),x=getOptions$2(x,emptyOptions$1),Number.isInteger(_)?(this[kClosing]?this.nextTick(E,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(E,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(_<1&&(_=1),this[kLimit]<1/0&&(_=Math.min(_,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=E,_<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(_,x,this[kHandleMany$1])),E[kPromise$3]):(this.nextTick(E,new TypeError("The first argument 'size' must be an integer")),E[kPromise$3])}_nextv(_,x,E){const S=[],C=(T,A,B)=>{if(T)return E(T);if(this[kLegacy]?A===void 0&&B===void 0:A===void 0)return E(null,S);S.push(this[kLegacy]?[A,B]:A),S.length===_?E(null,S):this._next(C)};this._next(C)}all(_,x){return x=getCallback$2(_,x),x=fromCallback$3(x,kPromise$3),_=getOptions$2(_,emptyOptions$1),this[kClosing]?this.nextTick(x,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(x,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=x,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(_,this[kHandleMany$1])),x[kPromise$3]}_all(_,x){let E=this[kCount];const S=[],C=()=>{const A=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-E):1e3;A<=0?this.nextTick(x,null,S):this._nextv(A,emptyOptions$1,T)},T=(A,B)=>{A?x(A):B.length===0?x(null,S):(S.push.apply(S,B),E+=B.length,C())};C()}[kFinishWork](){const _=this[kCallback$1];return this[kAbortOnClose]&&_===null?noop$4:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),_)}[kReturnMany](_,x,E){this[kAutoClose]?this.close(_.bind(null,x,E)):_(x,E)}seek(_,x){if(x=getOptions$2(x,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const E=this.db.keyEncoding(x.keyEncoding||this[kKeyEncoding$1]),S=E.format;x.keyEncoding!==S&&(x={...x,keyEncoding:S});const C=this.db.prefixKey(E.encode(_),S);this._seek(C,x)}}}_seek(_,x){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(_){return _=fromCallback$3(_,kPromise$3),this[kClosed]?this.nextTick(_):this[kClosing]?this[kCloseCallbacks$1].push(_):(this[kClosing]=!0,this[kCloseCallbacks$1].push(_),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),_[kPromise$3]}_close(_){this.nextTick(_)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const _=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const x of _)x()}async*[Symbol.asyncIterator](){try{let _;for(;(_=await this.next())!==void 0;)yield _}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(_,x){super(_,x,!0),this[kKeys]=x.keys!==!1,this[kValues]=x.values!==!1}[kHandleOne$1](_,x,E){const S=this[kFinishWork]();if(_)return S(_);try{x=this[kKeys]&&x!==void 0?this[kKeyEncoding$1].decode(x):void 0,E=this[kValues]&&E!==void 0?this[kValueEncoding$1].decode(E):void 0}catch(C){return S(new IteratorDecodeError("entry",C))}x===void 0&&E===void 0||this[kCount]++,S(null,x,E)}[kHandleMany$1](_,x){const E=this[kFinishWork]();if(_)return this[kReturnMany](E,_);try{for(const S of x){const C=S[0],T=S[1];S[0]=this[kKeys]&&C!==void 0?this[kKeyEncoding$1].decode(C):void 0,S[1]=this[kValues]&&T!==void 0?this[kValueEncoding$1].decode(T):void 0}}catch(S){return this[kReturnMany](E,new IteratorDecodeError("entries",S))}this[kCount]+=x.length,this[kReturnMany](E,null,x)}end(_){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(_)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(_,x){super(_,x,!1)}[kHandleOne$1](_,x){const E=this[kFinishWork]();if(_)return E(_);try{x=x!==void 0?this[kKeyEncoding$1].decode(x):void 0}catch(S){return E(new IteratorDecodeError("key",S))}x!==void 0&&this[kCount]++,E(null,x)}[kHandleMany$1](_,x){const E=this[kFinishWork]();if(_)return this[kReturnMany](E,_);try{for(let S=0;S<x.length;S++){const C=x[S];x[S]=C!==void 0?this[kKeyEncoding$1].decode(C):void 0}}catch(S){return this[kReturnMany](E,new IteratorDecodeError("keys",S))}this[kCount]+=x.length,this[kReturnMany](E,null,x)}},AbstractValueIterator$2=class extends CommonIterator{constructor(_,x){super(_,x,!1)}[kHandleOne$1](_,x){const E=this[kFinishWork]();if(_)return E(_);try{x=x!==void 0?this[kValueEncoding$1].decode(x):void 0}catch(S){return E(new IteratorDecodeError("value",S))}x!==void 0&&this[kCount]++,E(null,x)}[kHandleMany$1](_,x){const E=this[kFinishWork]();if(_)return this[kReturnMany](E,_);try{for(let S=0;S<x.length;S++){const C=x[S];x[S]=C!==void 0?this[kValueEncoding$1].decode(C):void 0}}catch(S){return this[kReturnMany](E,new IteratorDecodeError("values",S))}this[kCount]+=x.length,this[kReturnMany](E,null,x)}};class IteratorDecodeError extends ModuleError$6{constructor(_,x){super(`Iterator could not decode ${_}`,{code:"LEVEL_DECODE_ERROR",cause:x})}}for(const n of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,n.split(" ")[0],{get(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(_,x){super(_,x),this[kIterator]=_.iterator({...x,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(_,x){super(_,x),this[kIterator]=_.iterator({...x,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const n of[DefaultKeyIterator$1,DefaultValueIterator$1]){const _=n===DefaultKeyIterator$1,x=_?E=>E[0]:E=>E[1];n.prototype._next=function(E){this[kCallback]=E,this[kIterator].next(this[kHandleOne])},n.prototype[kHandleOne]=function(E,S,C){const T=this[kCallback];E?T(E):T(null,_?S:C)},n.prototype._nextv=function(E,S,C){this[kCallback]=C,this[kIterator].nextv(E,S,this[kHandleMany])},n.prototype._all=function(E,S){this[kCallback]=S,this[kIterator].all(E,this[kHandleMany])},n.prototype[kHandleMany]=function(E,S){const C=this[kCallback];E?C(E):C(null,S.map(x))},n.prototype._seek=function(E,S){this[kIterator].seek(E,S)},n.prototype._close=function(E){this[kIterator].close(E)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(_,x){super(_,x),this[kNut]=null,this[kFactory]=()=>_.iterator(x),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(_,x){super(_,x),this[kNut]=null,this[kFactory]=()=>_.keys(x),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(_,x){super(_,x),this[kNut]=null,this[kFactory]=()=>_.values(x),this.db.defer(()=>this[kUndefer$1]())}};for(const n of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])n.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},n.prototype._next=function(_){this[kNut]!==null?this[kNut].next(_):this.db.status==="opening"?this.db.defer(()=>this._next(_)):this.nextTick(_,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(_,x,E){this[kNut]!==null?this[kNut].nextv(_,x,E):this.db.status==="opening"?this.db.defer(()=>this._nextv(_,x,E)):this.nextTick(E,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(_,x){this[kNut]!==null?this[kNut].all(x):this.db.status==="opening"?this.db.defer(()=>this._all(_,x)):this.nextTick(x,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(_,x){this[kNut]!==null?this[kNut]._seek(_,x):this.db.status==="opening"&&this.db.defer(()=>this._seek(_,x))},n.prototype._close=function(_){this[kNut]!==null?this[kNut].close(_):this.db.status==="opening"?this.db.defer(()=>this._close(_)):this.nextTick(_)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$7,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(_){if(typeof _!="object"||_===null){const x=_===null?"null":typeof _;throw new TypeError(`The first argument must be an abstract-level database, received ${x}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=_,this.db.attachResource(this),this.nextTick=_.nextTick}get length(){return this[kOperations$1].length}put(_,x,E){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const S=this.db._checkKey(_)||this.db._checkValue(x);if(S)throw S;const C=E&&E.sublevel!=null?E.sublevel:this.db,T=E,A=C.keyEncoding(E&&E.keyEncoding),B=C.valueEncoding(E&&E.valueEncoding),I=A.format;E={...E,keyEncoding:I,valueEncoding:B.format},C!==this.db&&(E.sublevel=null);const M=C.prefixKey(A.encode(_),I),O=B.encode(x);return this._put(M,O,E),this[kOperations$1].push({...T,type:"put",key:_,value:x}),this}_put(_,x,E){}del(_,x){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const E=this.db._checkKey(_);if(E)throw E;const S=x&&x.sublevel!=null?x.sublevel:this.db,C=x,T=S.keyEncoding(x&&x.keyEncoding),A=T.format;return x={...x,keyEncoding:A},S!==this.db&&(x.sublevel=null),this._del(S.prefixKey(T.encode(_),A),x),this[kOperations$1].push({...C,type:"del",key:_}),this}_del(_,x){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(_,x){return x=getCallback$1(_,x),x=fromCallback$2(x,kPromise$2),_=getOptions$1(_),this[kStatus$1]!=="open"?this.nextTick(x,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(x):(this[kStatus$1]="writing",this._write(_,E=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>x(E)),E||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),x[kPromise$2]}_write(_,x){}close(_){return _=fromCallback$2(_,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(_):this[kStatus$1]==="closed"?this.nextTick(_):(this[kCloseCallbacks].push(_),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),_[kPromise$2]}_close(_){this.nextTick(_)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const _=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const x of _)x()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(_){super(_),this[kEncoded]=[]}_put(_,x,E){this[kEncoded].push({...E,type:"put",key:_,value:x})}_del(_,x){this[kEncoded].push({...x,type:"del",key:_})}_clear(){this[kEncoded]=[]}_write(_,x){this.db.status==="opening"?this.db.defer(()=>this._write(_,x)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(x):this.db._batch(this[kEncoded],_,x):this.nextTick(x,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$1=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(n,_){const x={};for(const E in n)if(hasOwnProperty$1.call(n,E)&&!(E==="keyEncoding"||E==="valueEncoding")){if(E==="start"||E==="end")throw new ModuleError$2(`The legacy range option '${E}' has been removed`,{code:"LEVEL_LEGACY"});if(E==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(E)?x[E]=_.encode(n[E]):x[E]=n[E]}return x.reverse=!!x.reverse,x.limit=Number.isInteger(x.limit)&&x.limit>=0?x.limit:-1,x};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):n=>(promise||(promise=Promise.resolve())).then(n).catch(_=>setTimeout(()=>{throw _},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const n=queueMicrotask_1;return nextTickBrowser=function(_,...x){x.length===0?n(_):n(()=>_(...x))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:n,AbstractKeyIterator:_,AbstractValueIterator:x}=abstractIterator,E=Symbol("unfix"),S=Symbol("iterator"),C=Symbol("handleOne"),T=Symbol("handleMany"),A=Symbol("callback");class B extends n{constructor(D,L,V,U){super(D,L),this[S]=V,this[E]=U,this[C]=this[C].bind(this),this[T]=this[T].bind(this),this[A]=null}[C](D,L,V){const U=this[A];if(D)return U(D);L!==void 0&&(L=this[E](L)),U(D,L,V)}[T](D,L){const V=this[A];if(D)return V(D);for(const U of L){const q=U[0];q!==void 0&&(U[0]=this[E](q))}V(D,L)}}class I extends _{constructor(D,L,V,U){super(D,L),this[S]=V,this[E]=U,this[C]=this[C].bind(this),this[T]=this[T].bind(this),this[A]=null}[C](D,L){const V=this[A];if(D)return V(D);L!==void 0&&(L=this[E](L)),V(D,L)}[T](D,L){const V=this[A];if(D)return V(D);for(let U=0;U<L.length;U++){const q=L[U];q!==void 0&&(L[U]=this[E](q))}V(D,L)}}class M extends x{constructor(D,L,V){super(D,L),this[S]=V}}for(const O of[B,I])O.prototype._next=function(D){this[A]=D,this[S].next(this[C])},O.prototype._nextv=function(D,L,V){this[A]=V,this[S].nextv(D,L,this[T])},O.prototype._all=function(D,L){this[A]=L,this[S].all(D,this[T])};for(const O of[M])O.prototype._next=function(D){this[S].next(D)},O.prototype._nextv=function(D,L,V){this[S].nextv(D,L,V)},O.prototype._all=function(D,L){this[S].all(D,L)};for(const O of[B,I,M])O.prototype._seek=function(D,L){this[S].seek(D,L)},O.prototype._close=function(D){this[S].close(D)};return abstractSublevelIterator.AbstractSublevelIterator=B,abstractSublevelIterator.AbstractSublevelKeyIterator=I,abstractSublevelIterator.AbstractSublevelValueIterator=M,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const n=moduleError,{Buffer:_}=buffer$3||{},{AbstractSublevelIterator:x,AbstractSublevelKeyIterator:E,AbstractSublevelValueIterator:S}=requireAbstractSublevelIterator(),C=Symbol("prefix"),T=Symbol("upperBound"),A=Symbol("prefixRange"),B=Symbol("parent"),I=Symbol("unfix"),M=new TextEncoder,O={separator:"!"};abstractSublevel=function({AbstractLevel:H}){class W extends H{static defaults(re){if(typeof re=="string")throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(re&&re.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return re==null?O:re.separator?re:{...re,separator:"!"}}constructor(re,ce,ne){const{separator:Y,manifest:fe,...ge}=W.defaults(ne);ce=q(ce,Y);const $e=Y.charCodeAt(0)+1,_e=re[B]||re;if(!M.encode(ce).every(F=>F>$e&&F<127))throw new n(`Prefix must use bytes > ${$e} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(D(_e,fe),ge);const ae=(re.prefix||"")+Y+ce+Y,X=ae.slice(0,-1)+String.fromCharCode($e);this[B]=_e,this[C]=new V(ae),this[T]=new V(X),this[I]=new U,this.nextTick=_e.nextTick}prefixKey(re,ce){if(ce==="utf8")return this[C].utf8+re;if(re.byteLength===0)return this[C][ce];if(ce==="view"){const ne=this[C].view,Y=new Uint8Array(ne.byteLength+re.byteLength);return Y.set(ne,0),Y.set(re,ne.byteLength),Y}else{const ne=this[C].buffer;return _.concat([ne,re],ne.byteLength+re.byteLength)}}[A](re,ce){re.gte!==void 0?re.gte=this.prefixKey(re.gte,ce):re.gt!==void 0?re.gt=this.prefixKey(re.gt,ce):re.gte=this[C][ce],re.lte!==void 0?re.lte=this.prefixKey(re.lte,ce):re.lt!==void 0?re.lt=this.prefixKey(re.lt,ce):re.lte=this[T][ce]}get prefix(){return this[C].utf8}get db(){return this[B]}_open(re,ce){this[B].open({passive:!0},ce)}_put(re,ce,ne,Y){this[B].put(re,ce,ne,Y)}_get(re,ce,ne){this[B].get(re,ce,ne)}_getMany(re,ce,ne){this[B].getMany(re,ce,ne)}_del(re,ce,ne){this[B].del(re,ce,ne)}_batch(re,ce,ne){this[B].batch(re,ce,ne)}_clear(re,ce){this[A](re,re.keyEncoding),this[B].clear(re,ce)}_iterator(re){this[A](re,re.keyEncoding);const ce=this[B].iterator(re),ne=this[I].get(this[C].utf8.length,re.keyEncoding);return new x(this,re,ce,ne)}_keys(re){this[A](re,re.keyEncoding);const ce=this[B].keys(re),ne=this[I].get(this[C].utf8.length,re.keyEncoding);return new E(this,re,ce,ne)}_values(re){this[A](re,re.keyEncoding);const ce=this[B].values(re);return new S(this,re,ce)}}return{AbstractSublevel:W}};const D=function(H,W){return{...H.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...W,encodings:{utf8:L(H,"utf8"),buffer:L(H,"buffer"),view:L(H,"view")}}},L=function(H,W){return H.supports.encodings[W]?H.keyEncoding(W).name===W:!1};class V{constructor(W){this.utf8=W,this.view=M.encode(W),this.buffer=_?_.from(this.view.buffer,0,this.view.byteLength):{}}}class U{constructor(){this.cache=new Map}get(W,Q){let re=this.cache.get(Q);return re===void 0&&(Q==="view"?re=function(ce,ne){return ne.subarray(ce)}.bind(null,W):re=function(ce,ne){return ne.slice(ce)}.bind(null,W),this.cache.set(Q,re)),re}}const q=function(H,W){let Q=0,re=H.length;for(;Q<re&&H[Q]===W;)Q++;for(;re>Q&&H[re-1]===W;)re--;return H.slice(Q,re)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$1}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$7,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$3=()=>{};let AbstractLevel$1=class extends EventEmitter$1{constructor(_,x){if(super(),typeof _!="object"||_===null)throw new TypeError("The first argument 'manifest' must be an object");x=getOptions(x);const{keyEncoding:E,valueEncoding:S,passive:C,...T}=x;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=T,this[kStatus]="opening",this.supports=supports(_,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:_.snapshots!==!1,permanence:_.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:_.encodings||{},events:Object.assign({},_.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(E||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(S||"utf8");for(const A of this[kTranscoder].encodings())this.supports.encodings[A.commonName]||(this.supports.encodings[A.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$3)})}get status(){return this[kStatus]}keyEncoding(_){return this[kTranscoder].encoding(_??this[kKeyEncoding])}valueEncoding(_){return this[kTranscoder].encoding(_??this[kValueEncoding])}open(_,x){x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_={...this[kOptions$1],...getOptions(_)},_.createIfMissing=_.createIfMissing!==!1,_.errorIfExists=!!_.errorIfExists;const E=S=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,S?()=>E(S):E):this[kStatus]!=="open"?x(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:S})):x()};return _.passive?this[kStatus]==="opening"?this.once(kLanded,E):this.nextTick(E):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(_,S=>{if(S){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),E(S)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),E()})):this[kStatus]==="open"?this.nextTick(E):this.once(kLanded,()=>this.open(_,x)),x[kPromise$1]}_open(_,x){this.nextTick(x)}close(_){_=fromCallback$1(_,kPromise$1);const x=E=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,E?x(E):x):this[kStatus]!=="closed"?_(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:E})):_()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const E=S=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),x(S)};this[kCloseResources](()=>{this._close(S=>{if(S)return E(S);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),x()})})}else this[kStatus]==="closed"?this.nextTick(x):this.once(kLanded,()=>this.close(_));return _[kPromise$1]}[kCloseResources](_){if(this[kResources].size===0)return this.nextTick(_);let x=this[kResources].size,E=!0;const S=()=>{--x===0&&(E?this.nextTick(_):_())};for(const C of this[kResources])C.close(S);E=!1,this[kResources].clear()}_close(_){this.nextTick(_)}get(_,x,E){if(E=getCallback(x,E),E=fromCallback$1(E,kPromise$1),x=getOptions(x,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(_,x,E)),E[kPromise$1];if(maybeError(this,E))return E[kPromise$1];const S=this._checkKey(_);if(S)return this.nextTick(E,S),E[kPromise$1];const C=this.keyEncoding(x.keyEncoding),T=this.valueEncoding(x.valueEncoding),A=C.format,B=T.format;return(x.keyEncoding!==A||x.valueEncoding!==B)&&(x=Object.assign({},x,{keyEncoding:A,valueEncoding:B})),this._get(this.prefixKey(C.encode(_),A),x,(I,M)=>{if(I)return(I.code==="LEVEL_NOT_FOUND"||I.notFound||/NotFound/i.test(I))&&(I.code||(I.code="LEVEL_NOT_FOUND"),I.notFound||(I.notFound=!0),I.status||(I.status=404)),E(I);try{M=T.decode(M)}catch(O){return E(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:O}))}E(null,M)}),E[kPromise$1]}_get(_,x,E){this.nextTick(E,new Error("NotFound"))}getMany(_,x,E){if(E=getCallback(x,E),E=fromCallback$1(E,kPromise$1),x=getOptions(x,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(_,x,E)),E[kPromise$1];if(maybeError(this,E))return E[kPromise$1];if(!Array.isArray(_))return this.nextTick(E,new TypeError("The first argument 'keys' must be an array")),E[kPromise$1];if(_.length===0)return this.nextTick(E,null,[]),E[kPromise$1];const S=this.keyEncoding(x.keyEncoding),C=this.valueEncoding(x.valueEncoding),T=S.format,A=C.format;(x.keyEncoding!==T||x.valueEncoding!==A)&&(x=Object.assign({},x,{keyEncoding:T,valueEncoding:A}));const B=new Array(_.length);for(let I=0;I<_.length;I++){const M=_[I],O=this._checkKey(M);if(O)return this.nextTick(E,O),E[kPromise$1];B[I]=this.prefixKey(S.encode(M),T)}return this._getMany(B,x,(I,M)=>{if(I)return E(I);try{for(let O=0;O<M.length;O++)M[O]!==void 0&&(M[O]=C.decode(M[O]))}catch(O){return E(new ModuleError$1(`Could not decode one or more of ${M.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:O}))}E(null,M)}),E[kPromise$1]}_getMany(_,x,E){this.nextTick(E,null,new Array(_.length).fill(void 0))}put(_,x,E,S){if(S=getCallback(E,S),S=fromCallback$1(S,kPromise$1),E=getOptions(E,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(_,x,E,S)),S[kPromise$1];if(maybeError(this,S))return S[kPromise$1];const C=this._checkKey(_)||this._checkValue(x);if(C)return this.nextTick(S,C),S[kPromise$1];const T=this.keyEncoding(E.keyEncoding),A=this.valueEncoding(E.valueEncoding),B=T.format,I=A.format;(E.keyEncoding!==B||E.valueEncoding!==I)&&(E=Object.assign({},E,{keyEncoding:B,valueEncoding:I}));const M=this.prefixKey(T.encode(_),B),O=A.encode(x);return this._put(M,O,E,D=>{if(D)return S(D);this.emit("put",_,x),S()}),S[kPromise$1]}_put(_,x,E,S){this.nextTick(S)}del(_,x,E){if(E=getCallback(x,E),E=fromCallback$1(E,kPromise$1),x=getOptions(x,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(_,x,E)),E[kPromise$1];if(maybeError(this,E))return E[kPromise$1];const S=this._checkKey(_);if(S)return this.nextTick(E,S),E[kPromise$1];const C=this.keyEncoding(x.keyEncoding),T=C.format;return x.keyEncoding!==T&&(x=Object.assign({},x,{keyEncoding:T})),this._del(this.prefixKey(C.encode(_),T),x,A=>{if(A)return E(A);this.emit("del",_),E()}),E[kPromise$1]}_del(_,x,E){this.nextTick(E)}batch(_,x,E){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof _=="function"?E=_:E=getCallback(x,E),E=fromCallback$1(E,kPromise$1),x=getOptions(x,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(_,x,E)),E[kPromise$1];if(maybeError(this,E))return E[kPromise$1];if(!Array.isArray(_))return this.nextTick(E,new TypeError("The first argument 'operations' must be an array")),E[kPromise$1];if(_.length===0)return this.nextTick(E),E[kPromise$1];const S=new Array(_.length),{keyEncoding:C,valueEncoding:T,...A}=x;for(let B=0;B<_.length;B++){if(typeof _[B]!="object"||_[B]===null)return this.nextTick(E,new TypeError("A batch operation must be an object")),E[kPromise$1];const I=Object.assign({},_[B]);if(I.type!=="put"&&I.type!=="del")return this.nextTick(E,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),E[kPromise$1];const M=this._checkKey(I.key);if(M)return this.nextTick(E,M),E[kPromise$1];const O=I.sublevel!=null?I.sublevel:this,D=O.keyEncoding(I.keyEncoding||C),L=D.format;if(I.key=O.prefixKey(D.encode(I.key),L),I.keyEncoding=L,I.type==="put"){const V=this._checkValue(I.value);if(V)return this.nextTick(E,V),E[kPromise$1];const U=O.valueEncoding(I.valueEncoding||T);I.value=U.encode(I.value),I.valueEncoding=U.format}O!==this&&(I.sublevel=null),S[B]=I}return this._batch(S,A,B=>{if(B)return E(B);this.emit("batch",_),E()}),E[kPromise$1]}_batch(_,x,E){this.nextTick(E)}sublevel(_,x){return this._sublevel(_,AbstractSublevel.defaults(x))}_sublevel(_,x){return new AbstractSublevel(this,_,x)}prefixKey(_,x){return _}clear(_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];const E=_,S=this.keyEncoding(_.keyEncoding);return _=rangeOptions(_,S),_.keyEncoding=S.format,_.limit===0?this.nextTick(x):this._clear(_,C=>{if(C)return x(C);this.emit("clear",E),x()}),x[kPromise$1]}_clear(_,x){this.nextTick(x)}iterator(_){const x=this.keyEncoding(_&&_.keyEncoding),E=this.valueEncoding(_&&_.valueEncoding);if(_=rangeOptions(_,x),_.keys=_.keys!==!1,_.values=_.values!==!1,_[AbstractIterator$1.keyEncoding]=x,_[AbstractIterator$1.valueEncoding]=E,_.keyEncoding=x.format,_.valueEncoding=E.format,this[kStatus]==="opening")return new DeferredIterator(this,_);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(_)}_iterator(_){return new AbstractIterator$1(this,_)}keys(_){const x=this.keyEncoding(_&&_.keyEncoding),E=this.valueEncoding(_&&_.valueEncoding);if(_=rangeOptions(_,x),_[AbstractIterator$1.keyEncoding]=x,_[AbstractIterator$1.valueEncoding]=E,_.keyEncoding=x.format,_.valueEncoding=E.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,_);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(_)}_keys(_){return new DefaultKeyIterator(this,_)}values(_){const x=this.keyEncoding(_&&_.keyEncoding),E=this.valueEncoding(_&&_.valueEncoding);if(_=rangeOptions(_,x),_[AbstractIterator$1.keyEncoding]=x,_[AbstractIterator$1.valueEncoding]=E,_.keyEncoding=x.format,_.valueEncoding=E.format,this[kStatus]==="opening")return new DeferredValueIterator(this,_);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(_)}_values(_){return new DefaultValueIterator(this,_)}defer(_){if(typeof _!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(_)}[kUndefer](){if(this[kOperations].length===0)return;const _=this[kOperations];this[kOperations]=[];for(const x of _)x()}attachResource(_){if(typeof _!="object"||_===null||typeof _.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(_)}detachResource(_){this[kResources].delete(_)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(_){if(_==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(_){if(_==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(n,_){return n[kStatus]!=="open"?(n.nextTick(_,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(n){return Object.keys(n.supports.encodings).filter(_=>!!n.supports.encodings[_])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(n,_,x){if(typeof _!="number")throw new Error("second argument must be a Number");let E,S,C,T,A,B=!0,I;Array.isArray(n)?(E=[],C=S=n.length):(T=Object.keys(n),E={},C=S=T.length);function M(D){function L(){x&&x(D,E),x=null}B?queueMicrotask$1(L):L()}function O(D,L,V){if(E[D]=V,L&&(A=!0),--C===0||L)M(L);else if(!A&&I<S){let U;T?(U=T[I],I+=1,n[U](function(q,H){O(U,q,H)})):(U=I,I+=1,n[U](function(q,H){O(U,q,H)}))}}I=_,C?T?T.some(function(D,L){return n[D](function(V,U){O(D,V,U)}),L===_-1}):n.some(function(D,L){return D(function(V,U){O(L,V,U)}),L===_-1}):M(null),B=!1}var iterator={},keyRange=function(_){const x=_.gte!==void 0?_.gte:_.gt!==void 0?_.gt:void 0,E=_.lte!==void 0?_.lte:_.lt!==void 0?_.lt:void 0,S=_.gte===void 0,C=_.lte===void 0;return x!==void 0&&E!==void 0?IDBKeyRange.bound(x,E,S,C):x!==void 0?IDBKeyRange.lowerBound(x,S):E!==void 0?IDBKeyRange.upperBound(E,C):null};const textEncoder$1=new TextEncoder;var deserialize$2=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):textEncoder$1.encode(n)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(_,x,E){super(_,E),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=E,this[kCurrentOptions]={...E},this[kPosition]=void 0,this[kLocation$1]=x,this[kFirst]=!0}_nextv(_,x,E){if(this[kFirst]=!1,this[kFinished])return this.nextTick(E,null,[]);if(this[kCache].length>0)return _=Math.min(_,this[kCache].length),this.nextTick(E,null,this[kCache].splice(0,_));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let S;try{S=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(E,null,[])}const C=this.db.db.transaction([this[kLocation$1]],"readonly"),T=C.objectStore(this[kLocation$1]),A=[];if(this[kOptions].reverse){const B=!this[kOptions].values&&T.openKeyCursor?"openKeyCursor":"openCursor";T[B](S,"prev").onsuccess=I=>{const M=I.target.result;if(M){const{key:O,value:D}=M;this[kPosition]=O,A.push([this[kOptions].keys&&O!==void 0?deserialize$1(O):void 0,this[kOptions].values&&D!==void 0?deserialize$1(D):void 0]),A.length<_?M.continue():maybeCommit(C)}else this[kFinished]=!0}}else{let B,I;const M=()=>{if(B===void 0||I===void 0)return;const O=Math.max(B.length,I.length);O===0||_===1/0?this[kFinished]=!0:this[kPosition]=B[O-1],A.length=O;for(let D=0;D<O;D++){const L=B[D],V=I[D];A[D]=[this[kOptions].keys&&L!==void 0?deserialize$1(L):void 0,this[kOptions].values&&V!==void 0?deserialize$1(V):void 0]}maybeCommit(C)};this[kOptions].keys||_<1/0?T.getAllKeys(S,_<1/0?_:void 0).onsuccess=O=>{B=O.target.result,M()}:(B=[],this.nextTick(M)),this[kOptions].values?T.getAll(S,_<1/0?_:void 0).onsuccess=O=>{I=O.target.result,M()}:(I=[],this.nextTick(M))}C.onabort=()=>{E(C.error||new Error("aborted by user")),E=null},C.oncomplete=()=>{E(null,A),E=null}}_next(_){if(this[kCache].length>0){const[x,E]=this[kCache].shift();this.nextTick(_,null,x,E)}else if(this[kFinished])this.nextTick(_);else{let x=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,x=1),this._nextv(x,emptyOptions,(E,S)=>{if(E)return _(E);this[kCache]=S,this._next(_)})}}_all(_,x){this[kFirst]=!1;const E=this[kCache].splice(0,this[kCache].length),S=this.limit-this.count-E.length;if(S<=0)return this.nextTick(x,null,E);this._nextv(S,emptyOptions,(C,T)=>{if(C)return x(C);E.length>0&&(T=E.concat(T)),x(null,T)})}_seek(_,x){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let E;try{E=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}E!==null&&!E.includes(_)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=_:this[kCurrentOptions].gte=_}};iterator.Iterator=Iterator$1;function maybeCommit(n){typeof n.commit=="function"&&n.commit()}var clear$1=function(_,x,E,S,C){if(S.limit===0)return _.nextTick(C);const T=_.db.transaction([x],"readwrite"),A=T.objectStore(x);let B=0;T.oncomplete=function(){C()},T.onabort=function(){C(T.error||new Error("aborted by user"))};const I=A.openKeyCursor?"openKeyCursor":"openCursor",M=S.reverse?"prev":"next";A[I](E,M).onsuccess=function(O){const D=O.target.result;D&&(A.delete(D.key).onsuccess=function(){(S.limit<=0||++B<S.limit)&&D.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(_,x,E){if(typeof x=="function"||typeof E=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:S,version:C,...T}=x||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},T),typeof _!="string")throw new Error("constructor requires a location string argument");this[kLocation]=_,this[kNamePrefix]=S??DEFAULT_PREFIX,this[kVersion]=parseInt(C||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(_,x){const E=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);E.onerror=function(){x(E.error||new Error("unknown error"))},E.onsuccess=()=>{this[kIDB]=E.result,x()},E.onupgradeneeded=S=>{const C=S.target.result;C.objectStoreNames.contains(this[kLocation])||C.createObjectStore(this[kLocation])}}[kStore](_){return this[kIDB].transaction([this[kLocation]],_).objectStore(this[kLocation])}[kOnComplete](_,x){const E=_.transaction;E.onabort=function(){x(E.error||new Error("aborted by user"))},E.oncomplete=function(){x(null,_.result)}}_get(_,x,E){const S=this[kStore]("readonly");let C;try{C=S.get(_)}catch(T){return this.nextTick(E,T)}this[kOnComplete](C,function(T,A){if(T)return E(T);if(A===void 0)return E(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));E(null,deserialize(A))})}_getMany(_,x,E){const S=this[kStore]("readonly"),C=_.map(T=>A=>{let B;try{B=S.get(T)}catch(I){return A(I)}B.onsuccess=()=>{const I=B.result;A(null,I===void 0?I:deserialize(I))},B.onerror=I=>{I.stopPropagation(),A(B.error)}});parallel(C,16,E)}_del(_,x,E){const S=this[kStore]("readwrite");let C;try{C=S.delete(_)}catch(T){return this.nextTick(E,T)}this[kOnComplete](C,E)}_put(_,x,E,S){const C=this[kStore]("readwrite");let T;try{T=C.put(x,_)}catch(A){return this.nextTick(S,A)}this[kOnComplete](T,S)}_iterator(_){return new Iterator(this,this[kLocation],_)}_batch(_,x,E){const S=this[kStore]("readwrite"),C=S.transaction;let T=0,A;C.onabort=function(){E(A||C.error||new Error("aborted by user"))},C.oncomplete=function(){E()};function B(){const I=_[T++],M=I.key;let O;try{O=I.type==="del"?S.delete(M):S.put(I.value,M)}catch(D){A=D,C.abort();return}T<_.length?O.onsuccess=B:typeof C.commit=="function"&&C.commit()}B()}_clear(_,x){let E,S;try{E=createKeyRange(_)}catch{return this.nextTick(x)}if(_.limit>=0)return clear(this,this[kLocation],E,_,x);try{const C=this[kStore]("readwrite");S=E?C.delete(E):C.clear()}catch(C){return this.nextTick(x,C)}this[kOnComplete](S,x)}_close(_){this[kIDB].close(),this.nextTick(_)}}BrowserLevel.destroy=function(n,_,x){typeof _=="function"&&(x=_,_=DEFAULT_PREFIX),x=fromCallback(x,kPromise);const E=indexedDB.deleteDatabase(_+n);return E.onsuccess=function(){x()},E.onerror=function(S){x(S)},x[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;const Bi=class Bi extends Error{constructor(x="The operation was aborted"){super(x);$t(this,"code");$t(this,"type");this.code=Bi.code,this.type=Bi.type}};$t(Bi,"code","ABORT_ERR"),$t(Bi,"type","aborted");let AbortError=Bi;class CodeError extends Error{constructor(x,E,S){super(x);$t(this,"code");$t(this,"props");this.code=E,this.name=S?.name??"CodeError",this.props=S??{}}}var forge$m={options:{usePureJavaScript:!1}};const forge$n=getDefaultExportFromCjs(forge$m);var util$8={exports:{}},api$2={},baseN$1=api$2,_reverseAlphabets={};api$2.encode=function(n,_,x){if(typeof _!="string")throw new TypeError('"alphabet" must be a string.');if(x!==void 0&&typeof x!="number")throw new TypeError('"maxline" must be a number.');var E="";if(!(n instanceof Uint8Array))E=_encodeWithByteBuffer(n,_);else{var S=0,C=_.length,T=_.charAt(0),A=[0];for(S=0;S<n.length;++S){for(var B=0,I=n[S];B<A.length;++B)I+=A[B]<<8,A[B]=I%C,I=I/C|0;for(;I>0;)A.push(I%C),I=I/C|0}for(S=0;n[S]===0&&S<n.length-1;++S)E+=T;for(S=A.length-1;S>=0;--S)E+=_[A[S]]}if(x){var M=new RegExp(".{1,"+x+"}","g");E=E.match(M).join(`\r
`)}return E};api$2.decode=function(n,_){if(typeof n!="string")throw new TypeError('"input" must be a string.');if(typeof _!="string")throw new TypeError('"alphabet" must be a string.');var x=_reverseAlphabets[_];if(!x){x=_reverseAlphabets[_]=[];for(var E=0;E<_.length;++E)x[_.charCodeAt(E)]=E}n=n.replace(/\s/g,"");for(var S=_.length,C=_.charAt(0),T=[0],E=0;E<n.length;E++){var A=x[n.charCodeAt(E)];if(A===void 0)return;for(var B=0,I=A;B<T.length;++B)I+=T[B]*S,T[B]=I&255,I>>=8;for(;I>0;)T.push(I&255),I>>=8}for(var M=0;n[M]===C&&M<n.length-1;++M)T.push(0);return typeof Buffer$5<"u"?Buffer$5.from(T.reverse()):new Uint8Array(T.reverse())};function _encodeWithByteBuffer(n,_){var x=0,E=_.length,S=_.charAt(0),C=[0];for(x=0;x<n.length();++x){for(var T=0,A=n.at(x);T<C.length;++T)A+=C[T]<<8,C[T]=A%E,A=A/E|0;for(;A>0;)C.push(A%E),A=A/E|0}var B="";for(x=0;n.at(x)===0&&x<n.length()-1;++x)B+=S;for(x=C.length-1;x>=0;--x)B+=_[C[x]];return B}var forge$l=forge$m,baseN=baseN$1,util$7=util$8.exports=forge$l.util=forge$l.util||{};(function(){if(typeof browser$1$1<"u"&&browser$1$1.nextTick&&!browser$1$1.browser){util$7.nextTick=browser$1$1.nextTick,typeof setImmediate=="function"?util$7.setImmediate=setImmediate:util$7.setImmediate=util$7.nextTick;return}if(typeof setImmediate=="function"){util$7.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$7.nextTick=function(T){return setImmediate(T)};return}if(util$7.setImmediate=function(T){setTimeout(T,0)},typeof window<"u"&&typeof window.postMessage=="function"){let T=function(A){if(A.source===window&&A.data===n){A.stopPropagation();var B=_.slice();_.length=0,B.forEach(function(I){I()})}};var n="forge.setImmediate",_=[];util$7.setImmediate=function(A){_.push(A),_.length===1&&window.postMessage(n,"*")},window.addEventListener("message",T,!0)}if(typeof MutationObserver<"u"){var x=Date.now(),E=!0,S=document.createElement("div"),_=[];new MutationObserver(function(){var A=_.slice();_.length=0,A.forEach(function(B){B()})}).observe(S,{attributes:!0});var C=util$7.setImmediate;util$7.setImmediate=function(A){Date.now()-x>15?(x=Date.now(),C(A)):(_.push(A),_.length===1&&S.setAttribute("a",E=!E))}}util$7.nextTick=util$7.setImmediate})();util$7.isNodejs=typeof browser$1$1<"u"&&browser$1$1.versions&&browser$1$1.versions.node;util$7.globalScope=function(){return util$7.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$7.isArray=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};util$7.isArrayBuffer=function(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer};util$7.isArrayBufferView=function(n){return n&&util$7.isArrayBuffer(n.buffer)&&n.byteLength!==void 0};function _checkBitsParam(n){if(!(n===8||n===16||n===24||n===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+n)}util$7.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(n){if(this.data="",this.read=0,typeof n=="string")this.data=n;else if(util$7.isArrayBuffer(n)||util$7.isArrayBufferView(n))if(typeof Buffer$5<"u"&&n instanceof Buffer$5)this.data=n.toString("binary");else{var _=new Uint8Array(n);try{this.data=String.fromCharCode.apply(null,_)}catch{for(var x=0;x<_.length;++x)this.putByte(_[x])}}else(n instanceof ByteStringBuffer||typeof n=="object"&&typeof n.data=="string"&&typeof n.read=="number")&&(this.data=n.data,this.read=n.read);this._constructedStringLength=0}util$7.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$7.ByteStringBuffer.prototype._optimizeConstructedString=function(n){this._constructedStringLength+=n,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$7.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$7.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.ByteStringBuffer.prototype.putByte=function(n){return this.putBytes(String.fromCharCode(n))};util$7.ByteStringBuffer.prototype.fillWithByte=function(n,_){n=String.fromCharCode(n);for(var x=this.data;_>0;)_&1&&(x+=n),_>>>=1,_>0&&(n+=n);return this.data=x,this._optimizeConstructedString(_),this};util$7.ByteStringBuffer.prototype.putBytes=function(n){return this.data+=n,this._optimizeConstructedString(n.length),this};util$7.ByteStringBuffer.prototype.putString=function(n){return this.putBytes(util$7.encodeUtf8(n))};util$7.ByteStringBuffer.prototype.putInt16=function(n){return this.putBytes(String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt24=function(n){return this.putBytes(String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt32=function(n){return this.putBytes(String.fromCharCode(n>>24&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt16Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255))};util$7.ByteStringBuffer.prototype.putInt24Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255))};util$7.ByteStringBuffer.prototype.putInt32Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>24&255))};util$7.ByteStringBuffer.prototype.putInt=function(n,_){_checkBitsParam(_);var x="";do _-=8,x+=String.fromCharCode(n>>_&255);while(_>0);return this.putBytes(x)};util$7.ByteStringBuffer.prototype.putSignedInt=function(n,_){return n<0&&(n+=2<<_-1),this.putInt(n,_)};util$7.ByteStringBuffer.prototype.putBuffer=function(n){return this.putBytes(n.getBytes())};util$7.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$7.ByteStringBuffer.prototype.getInt16=function(){var n=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,n};util$7.ByteStringBuffer.prototype.getInt24=function(){var n=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,n};util$7.ByteStringBuffer.prototype.getInt32=function(){var n=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,n};util$7.ByteStringBuffer.prototype.getInt16Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,n};util$7.ByteStringBuffer.prototype.getInt24Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,n};util$7.ByteStringBuffer.prototype.getInt32Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,n};util$7.ByteStringBuffer.prototype.getInt=function(n){_checkBitsParam(n);var _=0;do _=(_<<8)+this.data.charCodeAt(this.read++),n-=8;while(n>0);return _};util$7.ByteStringBuffer.prototype.getSignedInt=function(n){var _=this.getInt(n),x=2<<n-2;return _>=x&&(_-=x<<1),_};util$7.ByteStringBuffer.prototype.getBytes=function(n){var _;return n?(n=Math.min(this.length(),n),_=this.data.slice(this.read,this.read+n),this.read+=n):n===0?_="":(_=this.read===0?this.data:this.data.slice(this.read),this.clear()),_};util$7.ByteStringBuffer.prototype.bytes=function(n){return typeof n>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+n)};util$7.ByteStringBuffer.prototype.at=function(n){return this.data.charCodeAt(this.read+n)};util$7.ByteStringBuffer.prototype.setAt=function(n,_){return this.data=this.data.substr(0,this.read+n)+String.fromCharCode(_)+this.data.substr(this.read+n+1),this};util$7.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$7.ByteStringBuffer.prototype.copy=function(){var n=util$7.createBuffer(this.data);return n.read=this.read,n};util$7.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$7.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$7.ByteStringBuffer.prototype.truncate=function(n){var _=Math.max(0,this.length()-n);return this.data=this.data.substr(this.read,_),this.read=0,this};util$7.ByteStringBuffer.prototype.toHex=function(){for(var n="",_=this.read;_<this.data.length;++_){var x=this.data.charCodeAt(_);x<16&&(n+="0"),n+=x.toString(16)}return n};util$7.ByteStringBuffer.prototype.toString=function(){return util$7.decodeUtf8(this.bytes())};function DataBuffer(n,_){_=_||{},this.read=_.readOffset||0,this.growSize=_.growSize||1024;var x=util$7.isArrayBuffer(n),E=util$7.isArrayBufferView(n);if(x||E){x?this.data=new DataView(n):this.data=new DataView(n.buffer,n.byteOffset,n.byteLength),this.write="writeOffset"in _?_.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,n!=null&&this.putBytes(n),"writeOffset"in _&&(this.write=_.writeOffset)}util$7.DataBuffer=DataBuffer;util$7.DataBuffer.prototype.length=function(){return this.write-this.read};util$7.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.DataBuffer.prototype.accommodate=function(n,_){if(this.length()>=n)return this;_=Math.max(_||this.growSize,n);var x=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),E=new Uint8Array(this.length()+_);return E.set(x),this.data=new DataView(E.buffer),this};util$7.DataBuffer.prototype.putByte=function(n){return this.accommodate(1),this.data.setUint8(this.write++,n),this};util$7.DataBuffer.prototype.fillWithByte=function(n,_){this.accommodate(_);for(var x=0;x<_;++x)this.data.setUint8(n);return this};util$7.DataBuffer.prototype.putBytes=function(n,_){if(util$7.isArrayBufferView(n)){var x=new Uint8Array(n.buffer,n.byteOffset,n.byteLength),E=x.byteLength-x.byteOffset;this.accommodate(E);var S=new Uint8Array(this.data.buffer,this.write);return S.set(x),this.write+=E,this}if(util$7.isArrayBuffer(n)){var x=new Uint8Array(n);this.accommodate(x.byteLength);var S=new Uint8Array(this.data.buffer);return S.set(x,this.write),this.write+=x.byteLength,this}if(n instanceof util$7.DataBuffer||typeof n=="object"&&typeof n.read=="number"&&typeof n.write=="number"&&util$7.isArrayBufferView(n.data)){var x=new Uint8Array(n.data.byteLength,n.read,n.length());this.accommodate(x.byteLength);var S=new Uint8Array(n.data.byteLength,this.write);return S.set(x),this.write+=x.byteLength,this}if(n instanceof util$7.ByteStringBuffer&&(n=n.data,_="binary"),_=_||"binary",typeof n=="string"){var C;if(_==="hex")return this.accommodate(Math.ceil(n.length/2)),C=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.hex.decode(n,C,this.write),this;if(_==="base64")return this.accommodate(Math.ceil(n.length/4)*3),C=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.base64.decode(n,C,this.write),this;if(_==="utf8"&&(n=util$7.encodeUtf8(n),_="binary"),_==="binary"||_==="raw")return this.accommodate(n.length),C=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.raw.decode(C),this;if(_==="utf16")return this.accommodate(n.length*2),C=new Uint16Array(this.data.buffer,this.write),this.write+=util$7.text.utf16.encode(C),this;throw new Error("Invalid encoding: "+_)}throw Error("Invalid parameter: "+n)};util$7.DataBuffer.prototype.putBuffer=function(n){return this.putBytes(n),n.clear(),this};util$7.DataBuffer.prototype.putString=function(n){return this.putBytes(n,"utf16")};util$7.DataBuffer.prototype.putInt16=function(n){return this.accommodate(2),this.data.setInt16(this.write,n),this.write+=2,this};util$7.DataBuffer.prototype.putInt24=function(n){return this.accommodate(3),this.data.setInt16(this.write,n>>8&65535),this.data.setInt8(this.write,n>>16&255),this.write+=3,this};util$7.DataBuffer.prototype.putInt32=function(n){return this.accommodate(4),this.data.setInt32(this.write,n),this.write+=4,this};util$7.DataBuffer.prototype.putInt16Le=function(n){return this.accommodate(2),this.data.setInt16(this.write,n,!0),this.write+=2,this};util$7.DataBuffer.prototype.putInt24Le=function(n){return this.accommodate(3),this.data.setInt8(this.write,n>>16&255),this.data.setInt16(this.write,n>>8&65535,!0),this.write+=3,this};util$7.DataBuffer.prototype.putInt32Le=function(n){return this.accommodate(4),this.data.setInt32(this.write,n,!0),this.write+=4,this};util$7.DataBuffer.prototype.putInt=function(n,_){_checkBitsParam(_),this.accommodate(_/8);do _-=8,this.data.setInt8(this.write++,n>>_&255);while(_>0);return this};util$7.DataBuffer.prototype.putSignedInt=function(n,_){return _checkBitsParam(_),this.accommodate(_/8),n<0&&(n+=2<<_-1),this.putInt(n,_)};util$7.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$7.DataBuffer.prototype.getInt16=function(){var n=this.data.getInt16(this.read);return this.read+=2,n};util$7.DataBuffer.prototype.getInt24=function(){var n=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,n};util$7.DataBuffer.prototype.getInt32=function(){var n=this.data.getInt32(this.read);return this.read+=4,n};util$7.DataBuffer.prototype.getInt16Le=function(){var n=this.data.getInt16(this.read,!0);return this.read+=2,n};util$7.DataBuffer.prototype.getInt24Le=function(){var n=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,n};util$7.DataBuffer.prototype.getInt32Le=function(){var n=this.data.getInt32(this.read,!0);return this.read+=4,n};util$7.DataBuffer.prototype.getInt=function(n){_checkBitsParam(n);var _=0;do _=(_<<8)+this.data.getInt8(this.read++),n-=8;while(n>0);return _};util$7.DataBuffer.prototype.getSignedInt=function(n){var _=this.getInt(n),x=2<<n-2;return _>=x&&(_-=x<<1),_};util$7.DataBuffer.prototype.getBytes=function(n){var _;return n?(n=Math.min(this.length(),n),_=this.data.slice(this.read,this.read+n),this.read+=n):n===0?_="":(_=this.read===0?this.data:this.data.slice(this.read),this.clear()),_};util$7.DataBuffer.prototype.bytes=function(n){return typeof n>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+n)};util$7.DataBuffer.prototype.at=function(n){return this.data.getUint8(this.read+n)};util$7.DataBuffer.prototype.setAt=function(n,_){return this.data.setUint8(n,_),this};util$7.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$7.DataBuffer.prototype.copy=function(){return new util$7.DataBuffer(this)};util$7.DataBuffer.prototype.compact=function(){if(this.read>0){var n=new Uint8Array(this.data.buffer,this.read),_=new Uint8Array(n.byteLength);_.set(n),this.data=new DataView(_),this.write-=this.read,this.read=0}return this};util$7.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$7.DataBuffer.prototype.truncate=function(n){return this.write=Math.max(0,this.length()-n),this.read=Math.min(this.read,this.write),this};util$7.DataBuffer.prototype.toHex=function(){for(var n="",_=this.read;_<this.data.byteLength;++_){var x=this.data.getUint8(_);x<16&&(n+="0"),n+=x.toString(16)}return n};util$7.DataBuffer.prototype.toString=function(n){var _=new Uint8Array(this.data,this.read,this.length());if(n=n||"utf8",n==="binary"||n==="raw")return util$7.binary.raw.encode(_);if(n==="hex")return util$7.binary.hex.encode(_);if(n==="base64")return util$7.binary.base64.encode(_);if(n==="utf8")return util$7.text.utf8.decode(_);if(n==="utf16")return util$7.text.utf16.decode(_);throw new Error("Invalid encoding: "+n)};util$7.createBuffer=function(n,_){return _=_||"raw",n!==void 0&&_==="utf8"&&(n=util$7.encodeUtf8(n)),new util$7.ByteBuffer(n)};util$7.fillString=function(n,_){for(var x="";_>0;)_&1&&(x+=n),_>>>=1,_>0&&(n+=n);return x};util$7.xorBytes=function(n,_,x){for(var E="",S="",C="",T=0,A=0;x>0;--x,++T)S=n.charCodeAt(T)^_.charCodeAt(T),A>=10&&(E+=C,C="",A=0),C+=String.fromCharCode(S),++A;return E+=C,E};util$7.hexToBytes=function(n){var _="",x=0;for(n.length&!0&&(x=1,_+=String.fromCharCode(parseInt(n[0],16)));x<n.length;x+=2)_+=String.fromCharCode(parseInt(n.substr(x,2),16));return _};util$7.bytesToHex=function(n){return util$7.createBuffer(n).toHex()};util$7.int32ToBytes=function(n){return String.fromCharCode(n>>24&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$7.encode64=function(n,_){for(var x="",E="",S,C,T,A=0;A<n.length;)S=n.charCodeAt(A++),C=n.charCodeAt(A++),T=n.charCodeAt(A++),x+=_base64.charAt(S>>2),x+=_base64.charAt((S&3)<<4|C>>4),isNaN(C)?x+="==":(x+=_base64.charAt((C&15)<<2|T>>6),x+=isNaN(T)?"=":_base64.charAt(T&63)),_&&x.length>_&&(E+=x.substr(0,_)+`\r
`,x=x.substr(_));return E+=x,E};util$7.decode64=function(n){n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var _="",x,E,S,C,T=0;T<n.length;)x=_base64Idx[n.charCodeAt(T++)-43],E=_base64Idx[n.charCodeAt(T++)-43],S=_base64Idx[n.charCodeAt(T++)-43],C=_base64Idx[n.charCodeAt(T++)-43],_+=String.fromCharCode(x<<2|E>>4),S!==64&&(_+=String.fromCharCode((E&15)<<4|S>>2),C!==64&&(_+=String.fromCharCode((S&3)<<6|C)));return _};util$7.encodeUtf8=function(n){return unescape(encodeURIComponent(n))};util$7.decodeUtf8=function(n){return decodeURIComponent(escape(n))};util$7.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$7.binary.raw.encode=function(n){return String.fromCharCode.apply(null,n)};util$7.binary.raw.decode=function(n,_,x){var E=_;E||(E=new Uint8Array(n.length)),x=x||0;for(var S=x,C=0;C<n.length;++C)E[S++]=n.charCodeAt(C);return _?S-x:E};util$7.binary.hex.encode=util$7.bytesToHex;util$7.binary.hex.decode=function(n,_,x){var E=_;E||(E=new Uint8Array(Math.ceil(n.length/2))),x=x||0;var S=0,C=x;for(n.length&1&&(S=1,E[C++]=parseInt(n[0],16));S<n.length;S+=2)E[C++]=parseInt(n.substr(S,2),16);return _?C-x:E};util$7.binary.base64.encode=function(n,_){for(var x="",E="",S,C,T,A=0;A<n.byteLength;)S=n[A++],C=n[A++],T=n[A++],x+=_base64.charAt(S>>2),x+=_base64.charAt((S&3)<<4|C>>4),isNaN(C)?x+="==":(x+=_base64.charAt((C&15)<<2|T>>6),x+=isNaN(T)?"=":_base64.charAt(T&63)),_&&x.length>_&&(E+=x.substr(0,_)+`\r
`,x=x.substr(_));return E+=x,E};util$7.binary.base64.decode=function(n,_,x){var E=_;E||(E=new Uint8Array(Math.ceil(n.length/4)*3)),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,""),x=x||0;for(var S,C,T,A,B=0,I=x;B<n.length;)S=_base64Idx[n.charCodeAt(B++)-43],C=_base64Idx[n.charCodeAt(B++)-43],T=_base64Idx[n.charCodeAt(B++)-43],A=_base64Idx[n.charCodeAt(B++)-43],E[I++]=S<<2|C>>4,T!==64&&(E[I++]=(C&15)<<4|T>>2,A!==64&&(E[I++]=(T&3)<<6|A));return _?I-x:E.subarray(0,I)};util$7.binary.base58.encode=function(n,_){return util$7.binary.baseN.encode(n,_base58,_)};util$7.binary.base58.decode=function(n,_){return util$7.binary.baseN.decode(n,_base58,_)};util$7.text={utf8:{},utf16:{}};util$7.text.utf8.encode=function(n,_,x){n=util$7.encodeUtf8(n);var E=_;E||(E=new Uint8Array(n.length)),x=x||0;for(var S=x,C=0;C<n.length;++C)E[S++]=n.charCodeAt(C);return _?S-x:E};util$7.text.utf8.decode=function(n){return util$7.decodeUtf8(String.fromCharCode.apply(null,n))};util$7.text.utf16.encode=function(n,_,x){var E=_;E||(E=new Uint8Array(n.length*2));var S=new Uint16Array(E.buffer);x=x||0;for(var C=x,T=x,A=0;A<n.length;++A)S[T++]=n.charCodeAt(A),C+=2;return _?C-x:E};util$7.text.utf16.decode=function(n){return String.fromCharCode.apply(null,new Uint16Array(n.buffer))};util$7.deflate=function(n,_,x){if(_=util$7.decode64(n.deflate(util$7.encode64(_)).rval),x){var E=2,S=_.charCodeAt(1);S&32&&(E=6),_=_.substring(E,_.length-4)}return _};util$7.inflate=function(n,_,x){var E=n.inflate(util$7.encode64(_)).rval;return E===null?null:util$7.decode64(E)};var _setStorageObject=function(n,_,x){if(!n)throw new Error("WebStorage not available.");var E;if(x===null?E=n.removeItem(_):(x=util$7.encode64(JSON.stringify(x)),E=n.setItem(_,x)),typeof E<"u"&&E.rval!==!0){var S=new Error(E.error.message);throw S.id=E.error.id,S.name=E.error.name,S}},_getStorageObject=function(n,_){if(!n)throw new Error("WebStorage not available.");var x=n.getItem(_);if(n.init)if(x.rval===null){if(x.error){var E=new Error(x.error.message);throw E.id=x.error.id,E.name=x.error.name,E}x=null}else x=x.rval;return x!==null&&(x=JSON.parse(util$7.decode64(x))),x},_setItem=function(n,_,x,E){var S=_getStorageObject(n,_);S===null&&(S={}),S[x]=E,_setStorageObject(n,_,S)},_getItem=function(n,_,x){var E=_getStorageObject(n,_);return E!==null&&(E=x in E?E[x]:null),E},_removeItem=function(n,_,x){var E=_getStorageObject(n,_);if(E!==null&&x in E){delete E[x];var S=!0;for(var C in E){S=!1;break}S&&(E=null),_setStorageObject(n,_,E)}},_clearItems=function(n,_){_setStorageObject(n,_,null)},_callStorageFunction=function(n,_,x){var E=null;typeof x>"u"&&(x=["web","flash"]);var S,C=!1,T=null;for(var A in x){S=x[A];try{if(S==="flash"||S==="both"){if(_[0]===null)throw new Error("Flash local storage not available.");E=n.apply(this,_),C=S==="flash"}(S==="web"||S==="both")&&(_[0]=localStorage,E=n.apply(this,_),C=!0)}catch(B){T=B}if(C)break}if(!C)throw T;return E};util$7.setItem=function(n,_,x,E,S){_callStorageFunction(_setItem,arguments,S)};util$7.getItem=function(n,_,x,E){return _callStorageFunction(_getItem,arguments,E)};util$7.removeItem=function(n,_,x,E){_callStorageFunction(_removeItem,arguments,E)};util$7.clearItems=function(n,_,x){_callStorageFunction(_clearItems,arguments,x)};util$7.isEmpty=function(n){for(var _ in n)if(n.hasOwnProperty(_))return!1;return!0};util$7.format=function(n){for(var _=/%./g,x,E,S=0,C=[],T=0;x=_.exec(n);){E=n.substring(T,_.lastIndex-2),E.length>0&&C.push(E),T=_.lastIndex;var A=x[0][1];switch(A){case"s":case"o":S<arguments.length?C.push(arguments[S+++1]):C.push("<?>");break;case"%":C.push("%");break;default:C.push("<%"+A+"?>")}}return C.push(n.substring(T)),C.join("")};util$7.formatNumber=function(n,_,x,E){var S=n,C=isNaN(_=Math.abs(_))?2:_,T=x===void 0?",":x,A=E===void 0?".":E,B=S<0?"-":"",I=parseInt(S=Math.abs(+S||0).toFixed(C),10)+"",M=I.length>3?I.length%3:0;return B+(M?I.substr(0,M)+A:"")+I.substr(M).replace(/(\d{3})(?=\d)/g,"$1"+A)+(C?T+Math.abs(S-I).toFixed(C).slice(2):"")};util$7.formatSize=function(n){return n>=1073741824?n=util$7.formatNumber(n/1073741824,2,".","")+" GiB":n>=1048576?n=util$7.formatNumber(n/1048576,2,".","")+" MiB":n>=1024?n=util$7.formatNumber(n/1024,0)+" KiB":n=util$7.formatNumber(n,0)+" bytes",n};util$7.bytesFromIP=function(n){return n.indexOf(".")!==-1?util$7.bytesFromIPv4(n):n.indexOf(":")!==-1?util$7.bytesFromIPv6(n):null};util$7.bytesFromIPv4=function(n){if(n=n.split("."),n.length!==4)return null;for(var _=util$7.createBuffer(),x=0;x<n.length;++x){var E=parseInt(n[x],10);if(isNaN(E))return null;_.putByte(E)}return _.getBytes()};util$7.bytesFromIPv6=function(n){var _=0;n=n.split(":").filter(function(T){return T.length===0&&++_,!0});for(var x=(8-n.length+_)*2,E=util$7.createBuffer(),S=0;S<8;++S){if(!n[S]||n[S].length===0){E.fillWithByte(0,x),x=0;continue}var C=util$7.hexToBytes(n[S]);C.length<2&&E.putByte(0),E.putBytes(C)}return E.getBytes()};util$7.bytesToIP=function(n){return n.length===4?util$7.bytesToIPv4(n):n.length===16?util$7.bytesToIPv6(n):null};util$7.bytesToIPv4=function(n){if(n.length!==4)return null;for(var _=[],x=0;x<n.length;++x)_.push(n.charCodeAt(x));return _.join(".")};util$7.bytesToIPv6=function(n){if(n.length!==16)return null;for(var _=[],x=[],E=0,S=0;S<n.length;S+=2){for(var C=util$7.bytesToHex(n[S]+n[S+1]);C[0]==="0"&&C!=="0";)C=C.substr(1);if(C==="0"){var T=x[x.length-1],A=_.length;!T||A!==T.end+1?x.push({start:A,end:A}):(T.end=A,T.end-T.start>x[E].end-x[E].start&&(E=x.length-1))}_.push(C)}if(x.length>0){var B=x[E];B.end-B.start>0&&(_.splice(B.start,B.end-B.start+1,""),B.start===0&&_.unshift(""),B.end===7&&_.push(""))}return _.join(":")};util$7.estimateCores=function(n,_){if(typeof n=="function"&&(_=n,n={}),n=n||{},"cores"in util$7&&!n.update)return _(null,util$7.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$7.cores=navigator.hardwareConcurrency,_(null,util$7.cores);if(typeof Worker>"u")return util$7.cores=1,_(null,util$7.cores);if(typeof Blob>"u")return util$7.cores=2,_(null,util$7.cores);var x=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(T){var A=Date.now(),B=A+4;self.postMessage({st:A,et:B})})}.toString(),")()"],{type:"application/javascript"}));E([],5,16);function E(T,A,B){if(A===0){var I=Math.floor(T.reduce(function(M,O){return M+O},0)/T.length);return util$7.cores=Math.max(1,I),URL.revokeObjectURL(x),_(null,util$7.cores)}S(B,function(M,O){T.push(C(B,O)),E(T,A-1,B)})}function S(T,A){for(var B=[],I=[],M=0;M<T;++M){var O=new Worker(x);O.addEventListener("message",function(D){if(I.push(D.data),I.length===T){for(var L=0;L<T;++L)B[L].terminate();A(null,I)}}),B.push(O)}for(var M=0;M<T;++M)B[M].postMessage(M)}function C(T,A){for(var B=[],I=0;I<T;++I)for(var M=A[I],O=B[I]=[],D=0;D<T;++D)if(I!==D){var L=A[D];(M.st>L.st&&M.st<L.et||L.st>M.st&&L.st<M.et)&&O.push(D)}return B.reduce(function(V,U){return Math.max(V,U.length)},0)}};var utilExports=util$8.exports;const forgeUtil=getDefaultExportFromCjs(utilExports);var forge$k=forge$m;forge$k.cipher=forge$k.cipher||{};forge$k.cipher.algorithms=forge$k.cipher.algorithms||{};forge$k.cipher.createCipher=function(n,_){var x=n;if(typeof x=="string"&&(x=forge$k.cipher.getAlgorithm(x),x&&(x=x())),!x)throw new Error("Unsupported algorithm: "+n);return new forge$k.cipher.BlockCipher({algorithm:x,key:_,decrypt:!1})};forge$k.cipher.createDecipher=function(n,_){var x=n;if(typeof x=="string"&&(x=forge$k.cipher.getAlgorithm(x),x&&(x=x())),!x)throw new Error("Unsupported algorithm: "+n);return new forge$k.cipher.BlockCipher({algorithm:x,key:_,decrypt:!0})};forge$k.cipher.registerAlgorithm=function(n,_){n=n.toUpperCase(),forge$k.cipher.algorithms[n]=_};forge$k.cipher.getAlgorithm=function(n){return n=n.toUpperCase(),n in forge$k.cipher.algorithms?forge$k.cipher.algorithms[n]:null};var BlockCipher=forge$k.cipher.BlockCipher=function(n){this.algorithm=n.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=n.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=n.decrypt,this.algorithm.initialize(n)};BlockCipher.prototype.start=function(n){n=n||{};var _={};for(var x in n)_[x]=n[x];_.decrypt=this._decrypt,this._finish=!1,this._input=forge$k.util.createBuffer(),this.output=n.output||forge$k.util.createBuffer(),this.mode.start(_)};BlockCipher.prototype.update=function(n){for(n&&this._input.putBuffer(n);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(n){n&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(x){return n(this.blockSize,x,!1)},this.mode.unpad=function(x){return n(this.blockSize,x,!0)});var _={};return _.decrypt=this._decrypt,_.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,_)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,_))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,_))};var forge$j=forge$m;forge$j.cipher=forge$j.cipher||{};var modes$1=forge$j.cipher.modes=forge$j.cipher.modes||{};modes$1.ecb=function(n){n=n||{},this.name="ECB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(n){};modes$1.ecb.prototype.encrypt=function(n,_,x){if(n.length()<this.blockSize&&!(x&&n.length()>0))return!0;for(var E=0;E<this._ints;++E)this._inBlock[E]=n.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var E=0;E<this._ints;++E)_.putInt32(this._outBlock[E])};modes$1.ecb.prototype.decrypt=function(n,_,x){if(n.length()<this.blockSize&&!(x&&n.length()>0))return!0;for(var E=0;E<this._ints;++E)this._inBlock[E]=n.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var E=0;E<this._ints;++E)_.putInt32(this._outBlock[E])};modes$1.ecb.prototype.pad=function(n,_){var x=n.length()===this.blockSize?this.blockSize:this.blockSize-n.length();return n.fillWithByte(x,x),!0};modes$1.ecb.prototype.unpad=function(n,_){if(_.overflow>0)return!1;var x=n.length(),E=n.at(x-1);return E>this.blockSize<<2?!1:(n.truncate(E),!0)};modes$1.cbc=function(n){n=n||{},this.name="CBC",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(n){if(n.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in n)this._iv=transformIV(n.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(n,_,x){if(n.length()<this.blockSize&&!(x&&n.length()>0))return!0;for(var E=0;E<this._ints;++E)this._inBlock[E]=this._prev[E]^n.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var E=0;E<this._ints;++E)_.putInt32(this._outBlock[E]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(n,_,x){if(n.length()<this.blockSize&&!(x&&n.length()>0))return!0;for(var E=0;E<this._ints;++E)this._inBlock[E]=n.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var E=0;E<this._ints;++E)_.putInt32(this._prev[E]^this._outBlock[E]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(n,_){var x=n.length()===this.blockSize?this.blockSize:this.blockSize-n.length();return n.fillWithByte(x,x),!0};modes$1.cbc.prototype.unpad=function(n,_){if(_.overflow>0)return!1;var x=n.length(),E=n.at(x-1);return E>this.blockSize<<2?!1:(n.truncate(E),!0)};modes$1.cfb=function(n){n=n||{},this.name="CFB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(n,_,x){var E=n.length();if(E===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&E>=this.blockSize){for(var S=0;S<this._ints;++S)this._inBlock[S]=n.getInt32()^this._outBlock[S],_.putInt32(this._inBlock[S]);return}var C=(this.blockSize-E)%this.blockSize;C>0&&(C=this.blockSize-C),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialBlock[S]=n.getInt32()^this._outBlock[S],this._partialOutput.putInt32(this._partialBlock[S]);if(C>0)n.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._partialBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),C>0&&!x)return _.putBytes(this._partialOutput.getBytes(C-this._partialBytes)),this._partialBytes=C,!0;_.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(n,_,x){var E=n.length();if(E===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&E>=this.blockSize){for(var S=0;S<this._ints;++S)this._inBlock[S]=n.getInt32(),_.putInt32(this._inBlock[S]^this._outBlock[S]);return}var C=(this.blockSize-E)%this.blockSize;C>0&&(C=this.blockSize-C),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialBlock[S]=n.getInt32(),this._partialOutput.putInt32(this._partialBlock[S]^this._outBlock[S]);if(C>0)n.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._partialBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),C>0&&!x)return _.putBytes(this._partialOutput.getBytes(C-this._partialBytes)),this._partialBytes=C,!0;_.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(n){n=n||{},this.name="OFB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(n,_,x){var E=n.length();if(n.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&E>=this.blockSize){for(var S=0;S<this._ints;++S)_.putInt32(n.getInt32()^this._outBlock[S]),this._inBlock[S]=this._outBlock[S];return}var C=(this.blockSize-E)%this.blockSize;C>0&&(C=this.blockSize-C),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(n.getInt32()^this._outBlock[S]);if(C>0)n.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._outBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),C>0&&!x)return _.putBytes(this._partialOutput.getBytes(C-this._partialBytes)),this._partialBytes=C,!0;_.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(n){n=n||{},this.name="CTR",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(n,_,x){var E=n.length();if(E===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&E>=this.blockSize)for(var S=0;S<this._ints;++S)_.putInt32(n.getInt32()^this._outBlock[S]);else{var C=(this.blockSize-E)%this.blockSize;C>0&&(C=this.blockSize-C),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(n.getInt32()^this._outBlock[S]);if(C>0&&(n.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),C>0&&!x)return _.putBytes(this._partialOutput.getBytes(C-this._partialBytes)),this._partialBytes=C,!0;_.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(n){n=n||{},this.name="GCM",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");var _=forge$j.util.createBuffer(n.iv);this._cipherLength=0;var x;if("additionalData"in n?x=forge$j.util.createBuffer(n.additionalData):x=forge$j.util.createBuffer(),"tagLength"in n?this._tagLength=n.tagLength:this._tagLength=128,this._tag=null,n.decrypt&&(this._tag=forge$j.util.createBuffer(n.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var E=_.length();if(E===12)this._j0=[_.getInt32(),_.getInt32(),_.getInt32(),1];else{for(this._j0=[0,0,0,0];_.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[_.getInt32(),_.getInt32(),_.getInt32(),_.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(E*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,x=forge$j.util.createBuffer(x),this._aDataLength=from64To32(x.length()*8);var S=x.length()%this.blockSize;for(S&&x.fillWithByte(0,this.blockSize-S),this._s=[0,0,0,0];x.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[x.getInt32(),x.getInt32(),x.getInt32(),x.getInt32()])};modes$1.gcm.prototype.encrypt=function(n,_,x){var E=n.length();if(E===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&E>=this.blockSize){for(var S=0;S<this._ints;++S)_.putInt32(this._outBlock[S]^=n.getInt32());this._cipherLength+=this.blockSize}else{var C=(this.blockSize-E)%this.blockSize;C>0&&(C=this.blockSize-C),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(n.getInt32()^this._outBlock[S]);if(C<=0||x){if(x){var T=E%this.blockSize;this._cipherLength+=T,this._partialOutput.truncate(this.blockSize-T)}else this._cipherLength+=this.blockSize;for(var S=0;S<this._ints;++S)this._outBlock[S]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),C>0&&!x)return n.read-=this.blockSize,_.putBytes(this._partialOutput.getBytes(C-this._partialBytes)),this._partialBytes=C,!0;_.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(n,_,x){var E=n.length();if(E<this.blockSize&&!(x&&E>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=n.getInt32(),this._hashBlock[1]=n.getInt32(),this._hashBlock[2]=n.getInt32(),this._hashBlock[3]=n.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var S=0;S<this._ints;++S)_.putInt32(this._outBlock[S]^this._hashBlock[S]);E<this.blockSize?this._cipherLength+=E%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(n,_){var x=!0;_.decrypt&&_.overflow&&n.truncate(this.blockSize-_.overflow),this.tag=forge$j.util.createBuffer();var E=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,E);var S=[];this.cipher.encrypt(this._j0,S);for(var C=0;C<this._ints;++C)this.tag.putInt32(this._s[C]^S[C]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),_.decrypt&&this.tag.bytes()!==this._tag&&(x=!1),x};modes$1.gcm.prototype.multiply=function(n,_){for(var x=[0,0,0,0],E=_.slice(0),S=0;S<128;++S){var C=n[S/32|0]&1<<31-S%32;C&&(x[0]^=E[0],x[1]^=E[1],x[2]^=E[2],x[3]^=E[3]),this.pow(E,E)}return x};modes$1.gcm.prototype.pow=function(n,_){for(var x=n[3]&1,E=3;E>0;--E)_[E]=n[E]>>>1|(n[E-1]&1)<<31;_[0]=n[0]>>>1,x&&(_[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(n){for(var _=[0,0,0,0],x=0;x<32;++x){var E=x/8|0,S=n[E]>>>(7-x%8)*4&15,C=this._m[x][S];_[0]^=C[0],_[1]^=C[1],_[2]^=C[2],_[3]^=C[3]}return _};modes$1.gcm.prototype.ghash=function(n,_,x){return _[0]^=x[0],_[1]^=x[1],_[2]^=x[2],_[3]^=x[3],this.tableMultiply(_)};modes$1.gcm.prototype.generateHashTable=function(n,_){for(var x=8/_,E=4*x,S=16*x,C=new Array(S),T=0;T<S;++T){var A=[0,0,0,0],B=T/E|0,I=(E-1-T%E)*_;A[B]=1<<_-1<<I,C[T]=this.generateSubHashTable(this.multiply(A,n),_)}return C};modes$1.gcm.prototype.generateSubHashTable=function(n,_){var x=1<<_,E=x>>>1,S=new Array(x);S[E]=n.slice(0);for(var C=E>>>1;C>0;)this.pow(S[2*C],S[C]=[]),C>>=1;for(C=2;C<E;){for(var T=1;T<C;++T){var A=S[C],B=S[T];S[C+T]=[A[0]^B[0],A[1]^B[1],A[2]^B[2],A[3]^B[3]]}C*=2}for(S[0]=[0,0,0,0],C=E+1;C<x;++C){var I=S[C^E];S[C]=[n[0]^I[0],n[1]^I[1],n[2]^I[2],n[3]^I[3]]}return S};function transformIV(n,_){if(typeof n=="string"&&(n=forge$j.util.createBuffer(n)),forge$j.util.isArray(n)&&n.length>4){var x=n;n=forge$j.util.createBuffer();for(var E=0;E<x.length;++E)n.putByte(x[E])}if(n.length()<_)throw new Error("Invalid IV length; got "+n.length()+" bytes and expected "+_+" bytes.");if(!forge$j.util.isArray(n)){for(var S=[],C=_/4,E=0;E<C;++E)S.push(n.getInt32());n=S}return n}function inc32(n){n[n.length-1]=n[n.length-1]+1&4294967295}function from64To32(n){return[n/4294967296|0,n&4294967295]}var forge$i=forge$m;forge$i.aes=forge$i.aes||{};forge$i.aes.startEncrypting=function(n,_,x,E){var S=_createCipher$1({key:n,output:x,decrypt:!1,mode:E});return S.start(_),S};forge$i.aes.createEncryptionCipher=function(n,_){return _createCipher$1({key:n,output:null,decrypt:!1,mode:_})};forge$i.aes.startDecrypting=function(n,_,x,E){var S=_createCipher$1({key:n,output:x,decrypt:!0,mode:E});return S.start(_),S};forge$i.aes.createDecryptionCipher=function(n,_){return _createCipher$1({key:n,output:null,decrypt:!0,mode:_})};forge$i.aes.Algorithm=function(n,_){init||initialize();var x=this;x.name=n,x.mode=new _({blockSize:16,cipher:{encrypt:function(E,S){return _updateBlock$1(x._w,E,S,!1)},decrypt:function(E,S){return _updateBlock$1(x._w,E,S,!0)}}}),x._init=!1};forge$i.aes.Algorithm.prototype.initialize=function(n){if(!this._init){var _=n.key,x;if(typeof _=="string"&&(_.length===16||_.length===24||_.length===32))_=forge$i.util.createBuffer(_);else if(forge$i.util.isArray(_)&&(_.length===16||_.length===24||_.length===32)){x=_,_=forge$i.util.createBuffer();for(var E=0;E<x.length;++E)_.putByte(x[E])}if(!forge$i.util.isArray(_)){x=_,_=[];var S=x.length();if(S===16||S===24||S===32){S=S>>>2;for(var E=0;E<S;++E)_.push(x.getInt32())}}if(!forge$i.util.isArray(_)||!(_.length===4||_.length===6||_.length===8))throw new Error("Invalid key parameter.");var C=this.mode.name,T=["CFB","OFB","CTR","GCM"].indexOf(C)!==-1;this._w=_expandKey(_,n.decrypt&&!T),this._init=!0}};forge$i.aes._expandKey=function(n,_){return init||initialize(),_expandKey(n,_)};forge$i.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$i.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$i.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$i.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$i.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$i.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$i.cipher.modes.gcm);function registerAlgorithm$1(n,_){var x=function(){return new forge$i.aes.Algorithm(n,_)};forge$i.cipher.registerAlgorithm(n,x)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var n=new Array(256),_=0;_<128;++_)n[_]=_<<1,n[_+128]=_+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var _=0;_<4;++_)mix[_]=new Array(256),imix[_]=new Array(256);for(var x=0,E=0,S,C,T,A,B,I,M,_=0;_<256;++_){A=E^E<<1^E<<2^E<<3^E<<4,A=A>>8^A&255^99,sbox[x]=A,isbox[A]=x,B=n[A],S=n[x],C=n[S],T=n[C],I=B<<24^A<<16^A<<8^(A^B),M=(S^C^T)<<24^(x^T)<<16^(x^C^T)<<8^(x^S^T);for(var O=0;O<4;++O)mix[O][x]=I,imix[O][A]=M,I=I<<24|I>>>8,M=M<<24|M>>>8;x===0?x=E=1:(x=S^n[n[n[S^T]]],E^=n[n[E]])}}function _expandKey(n,_){for(var x=n.slice(0),E,S=1,C=x.length,T=C+6+1,A=Nb*T,B=C;B<A;++B)E=x[B-1],B%C===0?(E=sbox[E>>>16&255]<<24^sbox[E>>>8&255]<<16^sbox[E&255]<<8^sbox[E>>>24]^rcon[S]<<24,S++):C>6&&B%C===4&&(E=sbox[E>>>24]<<24^sbox[E>>>16&255]<<16^sbox[E>>>8&255]<<8^sbox[E&255]),x[B]=x[B-C]^E;if(_){var I,M=imix[0],O=imix[1],D=imix[2],L=imix[3],V=x.slice(0);A=x.length;for(var B=0,U=A-Nb;B<A;B+=Nb,U-=Nb)if(B===0||B===A-Nb)V[B]=x[U],V[B+1]=x[U+3],V[B+2]=x[U+2],V[B+3]=x[U+1];else for(var q=0;q<Nb;++q)I=x[U+q],V[B+(3&-q)]=M[sbox[I>>>24]]^O[sbox[I>>>16&255]]^D[sbox[I>>>8&255]]^L[sbox[I&255]];x=V}return x}function _updateBlock$1(n,_,x,E){var S=n.length/4-1,C,T,A,B,I;E?(C=imix[0],T=imix[1],A=imix[2],B=imix[3],I=isbox):(C=mix[0],T=mix[1],A=mix[2],B=mix[3],I=sbox);var M,O,D,L,V,U,q;M=_[0]^n[0],O=_[E?3:1]^n[1],D=_[2]^n[2],L=_[E?1:3]^n[3];for(var H=3,W=1;W<S;++W)V=C[M>>>24]^T[O>>>16&255]^A[D>>>8&255]^B[L&255]^n[++H],U=C[O>>>24]^T[D>>>16&255]^A[L>>>8&255]^B[M&255]^n[++H],q=C[D>>>24]^T[L>>>16&255]^A[M>>>8&255]^B[O&255]^n[++H],L=C[L>>>24]^T[M>>>16&255]^A[O>>>8&255]^B[D&255]^n[++H],M=V,O=U,D=q;x[0]=I[M>>>24]<<24^I[O>>>16&255]<<16^I[D>>>8&255]<<8^I[L&255]^n[++H],x[E?3:1]=I[O>>>24]<<24^I[D>>>16&255]<<16^I[L>>>8&255]<<8^I[M&255]^n[++H],x[2]=I[D>>>24]<<24^I[L>>>16&255]<<16^I[M>>>8&255]<<8^I[O&255]^n[++H],x[E?1:3]=I[L>>>24]<<24^I[M>>>16&255]<<16^I[O>>>8&255]<<8^I[D&255]^n[++H]}function _createCipher$1(n){n=n||{};var _=(n.mode||"CBC").toUpperCase(),x="AES-"+_,E;n.decrypt?E=forge$i.cipher.createDecipher(x,n.key):E=forge$i.cipher.createCipher(x,n.key);var S=E.start;return E.start=function(C,T){var A=null;T instanceof forge$i.util.ByteBuffer&&(A=T,T={}),T=T||{},T.output=A,T.iv=C,S.call(E,T)},E}function base$4(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$2=base$4,_brrp__multiformats_scope_baseX$1=src$2;const coerce$1=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=n=>new TextEncoder().encode(n),toString$8=n=>new TextDecoder().decode(n);let Encoder$2=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or$1(this,_)}},ComposedDecoder$1=class{constructor(_){this.decoders=_}or(_){return or$1(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(n,_)=>new ComposedDecoder$1({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$2=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$2(_,x,E),this.decoder=new Decoder$2(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$3=({name:n,prefix:_,encode:x,decode:E})=>new Codec$2(n,_,x,E),baseX$1=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX$1(x,_);return from$3({prefix:n,name:_,encode:E,decode:C=>coerce$1(S(C))})},decode$c=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$h=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648$1=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$3({prefix:_,name:n,encode(S){return encode$h(S,E,x)},decode(S){return decode$c(S,E,x,n)}}),identity$5=from$3({prefix:"\0",name:"identity",encode:n=>toString$8(n),decode:n=>fromString$4(n)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$5},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base32=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$6=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$7=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$6,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from(""),alphabetBytesToChars$1=alphabet$1.reduce((n,_,x)=>(n[x]=_,n),[]),alphabetCharsToBytes$1=alphabet$1.reduce((n,_,x)=>(n[_.codePointAt(0)]=x,n),[]);function encode$g(n){return n.reduce((_,x)=>(_+=alphabetBytesToChars$1[x],_),"")}function decode$b(n){const _=[];for(const x of n){const E=alphabetCharsToBytes$1[x.codePointAt(0)];if(E===void 0)throw new Error(`Non-base256emoji character: ${x}`);_.push(E)}return new Uint8Array(_)}const base256emoji$2=from$3({prefix:"",name:"base256emoji",encode:encode$g,decode:decode$b}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$1,...base36$3,...base58,...base64$7,...base256emoji$3};function createCodec$4(n,_,x,E){return{name:n,prefix:_,encoder:{name:n,prefix:_,encode:x},decoder:{decode:E}}}const string$2=createCodec$4("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),ascii$2=createCodec$4("ascii","a",n=>{let _="a";for(let x=0;x<n.length;x++)_+=String.fromCharCode(n[x]);return _},n=>{n=n.substring(1);const _=allocUnsafe$2(n.length);for(let x=0;x<n.length;x++)_[x]=n.charCodeAt(x);return _}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$1.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$1};function fromString$3(n,_="utf8"){const x=BASES$2[_];if(x==null)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(n,"utf-8")):x.decoder.decode(`${x.prefix}${n}`)}function toString$7(n,_="utf8"){const x=BASES$2[_];if(x==null)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):x.encoder.encode(n).substring(1)}const webcrypto={get(n=globalThis){const _=n.crypto;if(_==null||_.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return _}};var forge$h=forge$m;forge$h.pki=forge$h.pki||{};var oids$1=forge$h.pki.oids=forge$h.oids=forge$h.oids||{};function _IN(n,_){oids$1[n]=_,oids$1[_]=n}function _I_(n,_){oids$1[n]=_}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$g=forge$m,asn1$4=forge$g.asn1=forge$g.asn1||{};asn1$4.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$4.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$4.create=function(n,_,x,E,S){if(forge$g.util.isArray(E)){for(var C=[],T=0;T<E.length;++T)E[T]!==void 0&&C.push(E[T]);E=C}var A={tagClass:n,type:_,constructed:x,composed:x||forge$g.util.isArray(E),value:E};return S&&"bitStringContents"in S&&(A.bitStringContents=S.bitStringContents,A.original=asn1$4.copy(A)),A};asn1$4.copy=function(n,_){var x;if(forge$g.util.isArray(n)){x=[];for(var E=0;E<n.length;++E)x.push(asn1$4.copy(n[E],_));return x}return typeof n=="string"?n:(x={tagClass:n.tagClass,type:n.type,constructed:n.constructed,composed:n.composed,value:asn1$4.copy(n.value,_)},_&&!_.excludeBitStringContents&&(x.bitStringContents=n.bitStringContents),x)};asn1$4.equals=function(n,_,x){if(forge$g.util.isArray(n)){if(!forge$g.util.isArray(_)||n.length!==_.length)return!1;for(var E=0;E<n.length;++E)if(!asn1$4.equals(n[E],_[E]))return!1;return!0}if(typeof n!=typeof _)return!1;if(typeof n=="string")return n===_;var S=n.tagClass===_.tagClass&&n.type===_.type&&n.constructed===_.constructed&&n.composed===_.composed&&asn1$4.equals(n.value,_.value);return x&&x.includeBitStringContents&&(S=S&&n.bitStringContents===_.bitStringContents),S};asn1$4.getBerValueLength=function(n){var _=n.getByte();if(_!==128){var x,E=_&128;return E?x=n.getInt((_&127)<<3):x=_,x}};function _checkBufferLength(n,_,x){if(x>_){var E=new Error("Too few bytes to parse DER.");throw E.available=n.length(),E.remaining=_,E.requested=x,E}}var _getValueLength=function(n,_){var x=n.getByte();if(_--,x!==128){var E,S=x&128;if(!S)E=x;else{var C=x&127;_checkBufferLength(n,_,C),E=n.getInt(C<<3)}if(E<0)throw new Error("Negative length: "+E);return E}};asn1$4.fromDer=function(n,_){_===void 0&&(_={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof _=="boolean"&&(_={strict:_,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in _||(_.strict=!0),"parseAllBytes"in _||(_.parseAllBytes=!0),"decodeBitStrings"in _||(_.decodeBitStrings=!0),typeof n=="string"&&(n=forge$g.util.createBuffer(n));var x=n.length(),E=_fromDer(n,n.length(),0,_);if(_.parseAllBytes&&n.length()!==0){var S=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw S.byteCount=x,S.remaining=n.length(),S}return E};function _fromDer(n,_,x,E){var S;_checkBufferLength(n,_,2);var C=n.getByte();_--;var T=C&192,A=C&31;S=n.length();var B=_getValueLength(n,_);if(_-=S-n.length(),B!==void 0&&B>_){if(E.strict){var I=new Error("Too few bytes to read ASN.1 value.");throw I.available=n.length(),I.remaining=_,I.requested=B,I}B=_}var M,O,D=(C&32)===32;if(D)if(M=[],B===void 0)for(;;){if(_checkBufferLength(n,_,2),n.bytes(2)===String.fromCharCode(0,0)){n.getBytes(2),_-=2;break}S=n.length(),M.push(_fromDer(n,_,x+1,E)),_-=S-n.length()}else for(;B>0;)S=n.length(),M.push(_fromDer(n,B,x+1,E)),_-=S-n.length(),B-=S-n.length();if(M===void 0&&T===asn1$4.Class.UNIVERSAL&&A===asn1$4.Type.BITSTRING&&(O=n.bytes(B)),M===void 0&&E.decodeBitStrings&&T===asn1$4.Class.UNIVERSAL&&A===asn1$4.Type.BITSTRING&&B>1){var L=n.read,V=_,U=0;if(A===asn1$4.Type.BITSTRING&&(_checkBufferLength(n,_,1),U=n.getByte(),_--),U===0)try{S=n.length();var q={strict:!0,decodeBitStrings:!0},H=_fromDer(n,_,x+1,q),W=S-n.length();_-=W,A==asn1$4.Type.BITSTRING&&W++;var Q=H.tagClass;W===B&&(Q===asn1$4.Class.UNIVERSAL||Q===asn1$4.Class.CONTEXT_SPECIFIC)&&(M=[H])}catch{}M===void 0&&(n.read=L,_=V)}if(M===void 0){if(B===void 0){if(E.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");B=_}if(A===asn1$4.Type.BMPSTRING)for(M="";B>0;B-=2)_checkBufferLength(n,_,2),M+=String.fromCharCode(n.getInt16()),_-=2;else M=n.getBytes(B),_-=B}var re=O===void 0?null:{bitStringContents:O};return asn1$4.create(T,A,D,M,re)}asn1$4.toDer=function(n){var _=forge$g.util.createBuffer(),x=n.tagClass|n.type,E=forge$g.util.createBuffer(),S=!1;if("bitStringContents"in n&&(S=!0,n.original&&(S=asn1$4.equals(n,n.original))),S)E.putBytes(n.bitStringContents);else if(n.composed){n.constructed?x|=32:E.putByte(0);for(var C=0;C<n.value.length;++C)n.value[C]!==void 0&&E.putBuffer(asn1$4.toDer(n.value[C]))}else if(n.type===asn1$4.Type.BMPSTRING)for(var C=0;C<n.value.length;++C)E.putInt16(n.value.charCodeAt(C));else n.type===asn1$4.Type.INTEGER&&n.value.length>1&&(n.value.charCodeAt(0)===0&&!(n.value.charCodeAt(1)&128)||n.value.charCodeAt(0)===255&&(n.value.charCodeAt(1)&128)===128)?E.putBytes(n.value.substr(1)):E.putBytes(n.value);if(_.putByte(x),E.length()<=127)_.putByte(E.length()&127);else{var T=E.length(),A="";do A+=String.fromCharCode(T&255),T=T>>>8;while(T>0);_.putByte(A.length|128);for(var C=A.length-1;C>=0;--C)_.putByte(A.charCodeAt(C))}return _.putBuffer(E),_};asn1$4.oidToDer=function(n){var _=n.split("."),x=forge$g.util.createBuffer();x.putByte(40*parseInt(_[0],10)+parseInt(_[1],10));for(var E,S,C,T,A=2;A<_.length;++A){E=!0,S=[],C=parseInt(_[A],10);do T=C&127,C=C>>>7,E||(T|=128),S.push(T),E=!1;while(C>0);for(var B=S.length-1;B>=0;--B)x.putByte(S[B])}return x};asn1$4.derToOid=function(n){var _;typeof n=="string"&&(n=forge$g.util.createBuffer(n));var x=n.getByte();_=Math.floor(x/40)+"."+x%40;for(var E=0;n.length()>0;)x=n.getByte(),E=E<<7,x&128?E+=x&127:(_+="."+(E+x),E=0);return _};asn1$4.utcTimeToDate=function(n){var _=new Date,x=parseInt(n.substr(0,2),10);x=x>=50?1900+x:2e3+x;var E=parseInt(n.substr(2,2),10)-1,S=parseInt(n.substr(4,2),10),C=parseInt(n.substr(6,2),10),T=parseInt(n.substr(8,2),10),A=0;if(n.length>11){var B=n.charAt(10),I=10;B!=="+"&&B!=="-"&&(A=parseInt(n.substr(10,2),10),I+=2)}if(_.setUTCFullYear(x,E,S),_.setUTCHours(C,T,A,0),I&&(B=n.charAt(I),B==="+"||B==="-")){var M=parseInt(n.substr(I+1,2),10),O=parseInt(n.substr(I+4,2),10),D=M*60+O;D*=6e4,B==="+"?_.setTime(+_-D):_.setTime(+_+D)}return _};asn1$4.generalizedTimeToDate=function(n){var _=new Date,x=parseInt(n.substr(0,4),10),E=parseInt(n.substr(4,2),10)-1,S=parseInt(n.substr(6,2),10),C=parseInt(n.substr(8,2),10),T=parseInt(n.substr(10,2),10),A=parseInt(n.substr(12,2),10),B=0,I=0,M=!1;n.charAt(n.length-1)==="Z"&&(M=!0);var O=n.length-5,D=n.charAt(O);if(D==="+"||D==="-"){var L=parseInt(n.substr(O+1,2),10),V=parseInt(n.substr(O+4,2),10);I=L*60+V,I*=6e4,D==="+"&&(I*=-1),M=!0}return n.charAt(14)==="."&&(B=parseFloat(n.substr(14),10)*1e3),M?(_.setUTCFullYear(x,E,S),_.setUTCHours(C,T,A,B),_.setTime(+_+I)):(_.setFullYear(x,E,S),_.setHours(C,T,A,B)),_};asn1$4.dateToUtcTime=function(n){if(typeof n=="string")return n;var _="",x=[];x.push((""+n.getUTCFullYear()).substr(2)),x.push(""+(n.getUTCMonth()+1)),x.push(""+n.getUTCDate()),x.push(""+n.getUTCHours()),x.push(""+n.getUTCMinutes()),x.push(""+n.getUTCSeconds());for(var E=0;E<x.length;++E)x[E].length<2&&(_+="0"),_+=x[E];return _+="Z",_};asn1$4.dateToGeneralizedTime=function(n){if(typeof n=="string")return n;var _="",x=[];x.push(""+n.getUTCFullYear()),x.push(""+(n.getUTCMonth()+1)),x.push(""+n.getUTCDate()),x.push(""+n.getUTCHours()),x.push(""+n.getUTCMinutes()),x.push(""+n.getUTCSeconds());for(var E=0;E<x.length;++E)x[E].length<2&&(_+="0"),_+=x[E];return _+="Z",_};asn1$4.integerToDer=function(n){var _=forge$g.util.createBuffer();if(n>=-128&&n<128)return _.putSignedInt(n,8);if(n>=-32768&&n<32768)return _.putSignedInt(n,16);if(n>=-8388608&&n<8388608)return _.putSignedInt(n,24);if(n>=-2147483648&&n<2147483648)return _.putSignedInt(n,32);var x=new Error("Integer too large; max is 32-bits.");throw x.integer=n,x};asn1$4.derToInteger=function(n){typeof n=="string"&&(n=forge$g.util.createBuffer(n));var _=n.length()*8;if(_>32)throw new Error("Integer too large; max is 32-bits.");return n.getSignedInt(_)};asn1$4.validate=function(n,_,x,E){var S=!1;if((n.tagClass===_.tagClass||typeof _.tagClass>"u")&&(n.type===_.type||typeof _.type>"u"))if(n.constructed===_.constructed||typeof _.constructed>"u"){if(S=!0,_.value&&forge$g.util.isArray(_.value))for(var C=0,T=0;S&&T<_.value.length;++T)S=_.value[T].optional||!1,n.value[C]&&(S=asn1$4.validate(n.value[C],_.value[T],x,E),S?++C:_.value[T].optional&&(S=!0)),!S&&E&&E.push("["+_.name+'] Tag class "'+_.tagClass+'", type "'+_.type+'" expected value length "'+_.value.length+'", got "'+n.value.length+'"');if(S&&x&&(_.capture&&(x[_.capture]=n.value),_.captureAsn1&&(x[_.captureAsn1]=n),_.captureBitStringContents&&"bitStringContents"in n&&(x[_.captureBitStringContents]=n.bitStringContents),_.captureBitStringValue&&"bitStringContents"in n))if(n.bitStringContents.length<2)x[_.captureBitStringValue]="";else{var A=n.bitStringContents.charCodeAt(0);if(A!==0)throw new Error("captureBitStringValue only supported for zero unused bits");x[_.captureBitStringValue]=n.bitStringContents.slice(1)}}else E&&E.push("["+_.name+'] Expected constructed "'+_.constructed+'", got "'+n.constructed+'"');else E&&(n.tagClass!==_.tagClass&&E.push("["+_.name+'] Expected tag class "'+_.tagClass+'", got "'+n.tagClass+'"'),n.type!==_.type&&E.push("["+_.name+'] Expected type "'+_.type+'", got "'+n.type+'"'));return S};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$4.prettyPrint=function(n,_,x){var E="";_=_||0,x=x||2,_>0&&(E+=`
`);for(var S="",C=0;C<_*x;++C)S+=" ";switch(E+=S+"Tag: ",n.tagClass){case asn1$4.Class.UNIVERSAL:E+="Universal:";break;case asn1$4.Class.APPLICATION:E+="Application:";break;case asn1$4.Class.CONTEXT_SPECIFIC:E+="Context-Specific:";break;case asn1$4.Class.PRIVATE:E+="Private:";break}if(n.tagClass===asn1$4.Class.UNIVERSAL)switch(E+=n.type,n.type){case asn1$4.Type.NONE:E+=" (None)";break;case asn1$4.Type.BOOLEAN:E+=" (Boolean)";break;case asn1$4.Type.INTEGER:E+=" (Integer)";break;case asn1$4.Type.BITSTRING:E+=" (Bit string)";break;case asn1$4.Type.OCTETSTRING:E+=" (Octet string)";break;case asn1$4.Type.NULL:E+=" (Null)";break;case asn1$4.Type.OID:E+=" (Object Identifier)";break;case asn1$4.Type.ODESC:E+=" (Object Descriptor)";break;case asn1$4.Type.EXTERNAL:E+=" (External or Instance of)";break;case asn1$4.Type.REAL:E+=" (Real)";break;case asn1$4.Type.ENUMERATED:E+=" (Enumerated)";break;case asn1$4.Type.EMBEDDED:E+=" (Embedded PDV)";break;case asn1$4.Type.UTF8:E+=" (UTF8)";break;case asn1$4.Type.ROID:E+=" (Relative Object Identifier)";break;case asn1$4.Type.SEQUENCE:E+=" (Sequence)";break;case asn1$4.Type.SET:E+=" (Set)";break;case asn1$4.Type.PRINTABLESTRING:E+=" (Printable String)";break;case asn1$4.Type.IA5String:E+=" (IA5String (ASCII))";break;case asn1$4.Type.UTCTIME:E+=" (UTC time)";break;case asn1$4.Type.GENERALIZEDTIME:E+=" (Generalized time)";break;case asn1$4.Type.BMPSTRING:E+=" (BMP String)";break}else E+=n.type;if(E+=`
`,E+=S+"Constructed: "+n.constructed+`
`,n.composed){for(var T=0,A="",C=0;C<n.value.length;++C)n.value[C]!==void 0&&(T+=1,A+=asn1$4.prettyPrint(n.value[C],_+1,x),C+1<n.value.length&&(A+=","));E+=S+"Sub values: "+T+A}else{if(E+=S+"Value: ",n.type===asn1$4.Type.OID){var B=asn1$4.derToOid(n.value);E+=B,forge$g.pki&&forge$g.pki.oids&&B in forge$g.pki.oids&&(E+=" ("+forge$g.pki.oids[B]+") ")}if(n.type===asn1$4.Type.INTEGER)try{E+=asn1$4.derToInteger(n.value)}catch{E+="0x"+forge$g.util.bytesToHex(n.value)}else if(n.type===asn1$4.Type.BITSTRING){if(n.value.length>1?E+="0x"+forge$g.util.bytesToHex(n.value.slice(1)):E+="(none)",n.value.length>0){var I=n.value.charCodeAt(0);I==1?E+=" (1 unused bit shown)":I>1&&(E+=" ("+I+" unused bits shown)")}}else if(n.type===asn1$4.Type.OCTETSTRING)_nonLatinRegex.test(n.value)||(E+="("+n.value+") "),E+="0x"+forge$g.util.bytesToHex(n.value);else if(n.type===asn1$4.Type.UTF8)try{E+=forge$g.util.decodeUtf8(n.value)}catch(M){if(M.message==="URI malformed")E+="0x"+forge$g.util.bytesToHex(n.value)+" (malformed UTF8)";else throw M}else n.type===asn1$4.Type.PRINTABLESTRING||n.type===asn1$4.Type.IA5String?E+=n.value:_nonLatinRegex.test(n.value)?E+="0x"+forge$g.util.bytesToHex(n.value):n.value.length===0?E+="[null]":E+=n.value}return E};var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(n,_,x,E){var S=_createCipher({key:n,output:x,decrypt:!1,mode:E||(_===null?"ECB":"CBC")});return S.start(_),S};forge$f.des.createEncryptionCipher=function(n,_){return _createCipher({key:n,output:null,decrypt:!1,mode:_})};forge$f.des.startDecrypting=function(n,_,x,E){var S=_createCipher({key:n,output:x,decrypt:!0,mode:E||(_===null?"ECB":"CBC")});return S.start(_),S};forge$f.des.createDecryptionCipher=function(n,_){return _createCipher({key:n,output:null,decrypt:!0,mode:_})};forge$f.des.Algorithm=function(n,_){var x=this;x.name=n,x.mode=new _({blockSize:8,cipher:{encrypt:function(E,S){return _updateBlock(x._keys,E,S,!1)},decrypt:function(E,S){return _updateBlock(x._keys,E,S,!0)}}}),x._init=!1};forge$f.des.Algorithm.prototype.initialize=function(n){if(!this._init){var _=forge$f.util.createBuffer(n.key);if(this.name.indexOf("3DES")===0&&_.length()!==24)throw new Error("Invalid Triple-DES key size: "+_.length()*8);this._keys=_createKeys(_),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(n,_){var x=function(){return new forge$f.des.Algorithm(n,_)};forge$f.cipher.registerAlgorithm(n,x)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(n){for(var _=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],x=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],E=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],S=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],C=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],T=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],A=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],B=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],I=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],M=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],O=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],D=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],L=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],V=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],U=n.length()>8?3:1,q=[],H=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],W=0,Q,re=0;re<U;re++){var ce=n.getInt32(),ne=n.getInt32();Q=(ce>>>4^ne)&252645135,ne^=Q,ce^=Q<<4,Q=(ne>>>-16^ce)&65535,ce^=Q,ne^=Q<<-16,Q=(ce>>>2^ne)&858993459,ne^=Q,ce^=Q<<2,Q=(ne>>>-16^ce)&65535,ce^=Q,ne^=Q<<-16,Q=(ce>>>1^ne)&1431655765,ne^=Q,ce^=Q<<1,Q=(ne>>>8^ce)&16711935,ce^=Q,ne^=Q<<8,Q=(ce>>>1^ne)&1431655765,ne^=Q,ce^=Q<<1,Q=ce<<8|ne>>>20&240,ce=ne<<24|ne<<8&16711680|ne>>>8&65280|ne>>>24&240,ne=Q;for(var Y=0;Y<H.length;++Y){H[Y]?(ce=ce<<2|ce>>>26,ne=ne<<2|ne>>>26):(ce=ce<<1|ce>>>27,ne=ne<<1|ne>>>27),ce&=-15,ne&=-15;var fe=_[ce>>>28]|x[ce>>>24&15]|E[ce>>>20&15]|S[ce>>>16&15]|C[ce>>>12&15]|T[ce>>>8&15]|A[ce>>>4&15],ge=B[ne>>>28]|I[ne>>>24&15]|M[ne>>>20&15]|O[ne>>>16&15]|D[ne>>>12&15]|L[ne>>>8&15]|V[ne>>>4&15];Q=(ge>>>16^fe)&65535,q[W++]=fe^Q,q[W++]=ge^Q<<16}}return q}function _updateBlock(n,_,x,E){var S=n.length===32?3:9,C;S===3?C=E?[30,-2,-2]:[0,32,2]:C=E?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var T,A=_[0],B=_[1];T=(A>>>4^B)&252645135,B^=T,A^=T<<4,T=(A>>>16^B)&65535,B^=T,A^=T<<16,T=(B>>>2^A)&858993459,A^=T,B^=T<<2,T=(B>>>8^A)&16711935,A^=T,B^=T<<8,T=(A>>>1^B)&1431655765,B^=T,A^=T<<1,A=A<<1|A>>>31,B=B<<1|B>>>31;for(var I=0;I<S;I+=3){for(var M=C[I+1],O=C[I+2],D=C[I];D!=M;D+=O){var L=B^n[D],V=(B>>>4|B<<28)^n[D+1];T=A,A=B,B=T^(spfunction2[L>>>24&63]|spfunction4[L>>>16&63]|spfunction6[L>>>8&63]|spfunction8[L&63]|spfunction1[V>>>24&63]|spfunction3[V>>>16&63]|spfunction5[V>>>8&63]|spfunction7[V&63])}T=A,A=B,B=T}A=A>>>1|A<<31,B=B>>>1|B<<31,T=(A>>>1^B)&1431655765,B^=T,A^=T<<1,T=(B>>>8^A)&16711935,A^=T,B^=T<<8,T=(B>>>2^A)&858993459,A^=T,B^=T<<2,T=(A>>>16^B)&65535,B^=T,A^=T<<16,T=(A>>>4^B)&252645135,B^=T,A^=T<<4,x[0]=A,x[1]=B}function _createCipher(n){n=n||{};var _=(n.mode||"CBC").toUpperCase(),x="DES-"+_,E;n.decrypt?E=forge$f.cipher.createDecipher(x,n.key):E=forge$f.cipher.createCipher(x,n.key);var S=E.start;return E.start=function(C,T){var A=null;T instanceof forge$f.util.ByteBuffer&&(A=T,T={}),T=T||{},T.output=A,T.iv=C,S.call(E,T)},E}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac$1=forge$d.hmac=forge$d.hmac||{};hmac$1.create=function(){var n=null,_=null,x=null,E=null,S={};return S.start=function(C,T){if(C!==null)if(typeof C=="string")if(C=C.toLowerCase(),C in forge$d.md.algorithms)_=forge$d.md.algorithms[C].create();else throw new Error('Unknown hash algorithm "'+C+'"');else _=C;if(T===null)T=n;else{if(typeof T=="string")T=forge$d.util.createBuffer(T);else if(forge$d.util.isArray(T)){var A=T;T=forge$d.util.createBuffer();for(var B=0;B<A.length;++B)T.putByte(A[B])}var I=T.length();I>_.blockLength&&(_.start(),_.update(T.bytes()),T=_.digest()),x=forge$d.util.createBuffer(),E=forge$d.util.createBuffer(),I=T.length();for(var B=0;B<I;++B){var A=T.at(B);x.putByte(54^A),E.putByte(92^A)}if(I<_.blockLength)for(var A=_.blockLength-I,B=0;B<A;++B)x.putByte(54),E.putByte(92);n=T,x=x.bytes(),E=E.bytes()}_.start(),_.update(x)},S.update=function(C){_.update(C)},S.getMac=function(){var C=_.digest().bytes();return _.start(),_.update(E),_.update(C),_.digest()},S.digest=S.getMac,S};var cryptoBrowserify={},browser$e={exports:{}},hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$e.exports;hasRequiredBrowser$b=1;var n=65536,_=4294967295;function x(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var E=safeBufferExports.Buffer,S=commonjsGlobal.crypto||commonjsGlobal.msCrypto;S&&S.getRandomValues?browser$e.exports=C:browser$e.exports=x;function C(T,A){if(T>_)throw new RangeError("requested too many random bytes");var B=E.allocUnsafe(T);if(T>0)if(T>n)for(var I=0;I<T;I+=n)S.getRandomValues(B.slice(I,I+n));else S.getRandomValues(B);return typeof A=="function"?browser$1$1.nextTick(function(){A(null,B)}):B}return browser$e.exports}var readableBrowser={exports:{}},streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function n(V,U){var q=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);U&&(H=H.filter(function(W){return Object.getOwnPropertyDescriptor(V,W).enumerable})),q.push.apply(q,H)}return q}function _(V){for(var U=1;U<arguments.length;U++){var q=arguments[U]!=null?arguments[U]:{};U%2?n(Object(q),!0).forEach(function(H){x(V,H,q[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(q)):n(Object(q)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(q,H))})}return V}function x(V,U,q){return U=T(U),U in V?Object.defineProperty(V,U,{value:q,enumerable:!0,configurable:!0,writable:!0}):V[U]=q,V}function E(V,U){if(!(V instanceof U))throw new TypeError("Cannot call a class as a function")}function S(V,U){for(var q=0;q<U.length;q++){var H=U[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(V,T(H.key),H)}}function C(V,U,q){return U&&S(V.prototype,U),q&&S(V,q),Object.defineProperty(V,"prototype",{writable:!1}),V}function T(V){var U=A(V,"string");return typeof U=="symbol"?U:String(U)}function A(V,U){if(typeof V!="object"||V===null)return V;var q=V[Symbol.toPrimitive];if(q!==void 0){var H=q.call(V,U||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(V)}var B=buffer$3,I=B.Buffer,M=require$$0$2,O=M.inspect,D=O&&O.custom||"inspect";function L(V,U,q){I.prototype.copy.call(V,U,q)}return buffer_list=function(){function V(){E(this,V),this.head=null,this.tail=null,this.length=0}return C(V,[{key:"push",value:function(q){var H={data:q,next:null};this.length>0?this.tail.next=H:this.head=H,this.tail=H,++this.length}},{key:"unshift",value:function(q){var H={data:q,next:this.head};this.length===0&&(this.tail=H),this.head=H,++this.length}},{key:"shift",value:function(){if(this.length!==0){var q=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,q}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(q){if(this.length===0)return"";for(var H=this.head,W=""+H.data;H=H.next;)W+=q+H.data;return W}},{key:"concat",value:function(q){if(this.length===0)return I.alloc(0);for(var H=I.allocUnsafe(q>>>0),W=this.head,Q=0;W;)L(W.data,H,Q),Q+=W.data.length,W=W.next;return H}},{key:"consume",value:function(q,H){var W;return q<this.head.data.length?(W=this.head.data.slice(0,q),this.head.data=this.head.data.slice(q)):q===this.head.data.length?W=this.shift():W=H?this._getString(q):this._getBuffer(q),W}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(q){var H=this.head,W=1,Q=H.data;for(q-=Q.length;H=H.next;){var re=H.data,ce=q>re.length?re.length:q;if(ce===re.length?Q+=re:Q+=re.slice(0,q),q-=ce,q===0){ce===re.length?(++W,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=re.slice(ce));break}++W}return this.length-=W,Q}},{key:"_getBuffer",value:function(q){var H=I.allocUnsafe(q),W=this.head,Q=1;for(W.data.copy(H),q-=W.data.length;W=W.next;){var re=W.data,ce=q>re.length?re.length:q;if(re.copy(H,H.length-q,0,ce),q-=ce,q===0){ce===re.length?(++Q,W.next?this.head=W.next:this.head=this.tail=null):(this.head=W,W.data=re.slice(ce));break}++Q}return this.length-=Q,H}},{key:D,value:function(q,H){return O(this,_(_({},H),{},{depth:0,customInspect:!1}))}}]),V}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function n(T,A){var B=this,I=this._readableState&&this._readableState.destroyed,M=this._writableState&&this._writableState.destroyed;return I||M?(A?A(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1$1.nextTick(S,this,T)):browser$1$1.nextTick(S,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(O){!A&&O?B._writableState?B._writableState.errorEmitted?browser$1$1.nextTick(x,B):(B._writableState.errorEmitted=!0,browser$1$1.nextTick(_,B,O)):browser$1$1.nextTick(_,B,O):A?(browser$1$1.nextTick(x,B),A(O)):browser$1$1.nextTick(x,B)}),this)}function _(T,A){S(T,A),x(T)}function x(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function E(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function S(T,A){T.emit("error",A)}function C(T,A){var B=T._readableState,I=T._writableState;B&&B.autoDestroy||I&&I.autoDestroy?T.destroy(A):T.emit("error",A)}return destroy_1={destroy:n,undestroy:E,errorOrDestroy:C},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function n(A,B){A.prototype=Object.create(B.prototype),A.prototype.constructor=A,A.__proto__=B}var _={};function x(A,B,I){I||(I=Error);function M(D,L,V){return typeof B=="string"?B:B(D,L,V)}var O=function(D){n(L,D);function L(V,U,q){return D.call(this,M(V,U,q))||this}return L}(I);O.prototype.name=I.name,O.prototype.code=A,_[A]=O}function E(A,B){if(Array.isArray(A)){var I=A.length;return A=A.map(function(M){return String(M)}),I>2?"one of ".concat(B," ").concat(A.slice(0,I-1).join(", "),", or ")+A[I-1]:I===2?"one of ".concat(B," ").concat(A[0]," or ").concat(A[1]):"of ".concat(B," ").concat(A[0])}else return"of ".concat(B," ").concat(String(A))}function S(A,B,I){return A.substr(!I||I<0?0:+I,B.length)===B}function C(A,B,I){return(I===void 0||I>A.length)&&(I=A.length),A.substring(I-B.length,I)===B}function T(A,B,I){return typeof I!="number"&&(I=0),I+B.length>A.length?!1:A.indexOf(B,I)!==-1}return x("ERR_INVALID_OPT_VALUE",function(A,B){return'The value "'+B+'" is invalid for option "'+A+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(A,B,I){var M;typeof B=="string"&&S(B,"not ")?(M="must not be",B=B.replace(/^not /,"")):M="must be";var O;if(C(A," argument"))O="The ".concat(A," ").concat(M," ").concat(E(B,"type"));else{var D=T(A,".")?"property":"argument";O='The "'.concat(A,'" ').concat(D," ").concat(M," ").concat(E(B,"type"))}return O+=". Received type ".concat(typeof I),O},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(A){return"The "+A+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(A){return"Cannot call "+A+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(A){return"Unknown encoding: "+A},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=_,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var n=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function _(E,S,C){return E.highWaterMark!=null?E.highWaterMark:S?E[C]:null}function x(E,S,C,T){var A=_(S,T,C);if(A!=null){if(!(isFinite(A)&&Math.floor(A)===A)||A<0){var B=T?C:"highWaterMark";throw new n(B,A)}return Math.floor(A)}return E.objectMode?16:16*1024}return state={getHighWaterMark:x},state}var browser$d,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$d;hasRequiredBrowser$a=1,browser$d=n;function n(x,E){if(_("noDeprecation"))return x;var S=!1;function C(){if(!S){if(_("throwDeprecation"))throw new Error(E);_("traceDeprecation")?console.trace(E):console.warn(E),S=!0}return x.apply(this,arguments)}return C}function _(x){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var E=commonjsGlobal.localStorage[x];return E==null?!1:String(E).toLowerCase()==="true"}return browser$d}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=fe;function n(Se){var we=this;this.next=null,this.entry=null,this.finish=function(){he(we,Se)}}var _;fe.WritableState=ne;var x={deprecate:requireBrowser$a()},E=requireStreamBrowser(),S=buffer$3.Buffer,C=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function T(Se){return S.from(Se)}function A(Se){return S.isBuffer(Se)||Se instanceof C}var B=requireDestroy(),I=requireState(),M=I.getHighWaterMark,O=requireErrorsBrowser().codes,D=O.ERR_INVALID_ARG_TYPE,L=O.ERR_METHOD_NOT_IMPLEMENTED,V=O.ERR_MULTIPLE_CALLBACK,U=O.ERR_STREAM_CANNOT_PIPE,q=O.ERR_STREAM_DESTROYED,H=O.ERR_STREAM_NULL_VALUES,W=O.ERR_STREAM_WRITE_AFTER_END,Q=O.ERR_UNKNOWN_ENCODING,re=B.errorOrDestroy;inherits_browserExports(fe,E);function ce(){}function ne(Se,we,xe){_=_||require_stream_duplex(),Se=Se||{},typeof xe!="boolean"&&(xe=we instanceof _),this.objectMode=!!Se.objectMode,xe&&(this.objectMode=this.objectMode||!!Se.writableObjectMode),this.highWaterMark=M(this,Se,"writableHighWaterMark",xe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ee=Se.decodeStrings===!1;this.decodeStrings=!Ee,this.defaultEncoding=Se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ye){J(we,ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Se.emitClose!==!1,this.autoDestroy=!!Se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}ne.prototype.getBuffer=function(){for(var we=this.bufferedRequest,xe=[];we;)xe.push(we),we=we.next;return xe},function(){try{Object.defineProperty(ne.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Y;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Y=Function.prototype[Symbol.hasInstance],Object.defineProperty(fe,Symbol.hasInstance,{value:function(we){return Y.call(this,we)?!0:this!==fe?!1:we&&we._writableState instanceof ne}})):Y=function(we){return we instanceof this};function fe(Se){_=_||require_stream_duplex();var we=this instanceof _;if(!we&&!Y.call(fe,this))return new fe(Se);this._writableState=new ne(Se,this,we),this.writable=!0,Se&&(typeof Se.write=="function"&&(this._write=Se.write),typeof Se.writev=="function"&&(this._writev=Se.writev),typeof Se.destroy=="function"&&(this._destroy=Se.destroy),typeof Se.final=="function"&&(this._final=Se.final)),E.call(this)}fe.prototype.pipe=function(){re(this,new U)};function ge(Se,we){var xe=new W;re(Se,xe),browser$1$1.nextTick(we,xe)}function $e(Se,we,xe,Ee){var ye;return xe===null?ye=new H:typeof xe!="string"&&!we.objectMode&&(ye=new D("chunk",["string","Buffer"],xe)),ye?(re(Se,ye),browser$1$1.nextTick(Ee,ye),!1):!0}fe.prototype.write=function(Se,we,xe){var Ee=this._writableState,ye=!1,Ce=!Ee.objectMode&&A(Se);return Ce&&!S.isBuffer(Se)&&(Se=T(Se)),typeof we=="function"&&(xe=we,we=null),Ce?we="buffer":we||(we=Ee.defaultEncoding),typeof xe!="function"&&(xe=ce),Ee.ending?ge(this,xe):(Ce||$e(this,Ee,Se,xe))&&(Ee.pendingcb++,ye=ae(this,Ee,Ce,Se,we,xe)),ye},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){var Se=this._writableState;Se.corked&&(Se.corked--,!Se.writing&&!Se.corked&&!Se.bufferProcessing&&Se.bufferedRequest&&oe(this,Se))},fe.prototype.setDefaultEncoding=function(we){if(typeof we=="string"&&(we=we.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((we+"").toLowerCase())>-1))throw new Q(we);return this._writableState.defaultEncoding=we,this},Object.defineProperty(fe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function _e(Se,we,xe){return!Se.objectMode&&Se.decodeStrings!==!1&&typeof we=="string"&&(we=S.from(we,xe)),we}Object.defineProperty(fe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ae(Se,we,xe,Ee,ye,Ce){if(!xe){var ve=_e(we,Ee,ye);Ee!==ve&&(xe=!0,ye="buffer",Ee=ve)}var Be=we.objectMode?1:Ee.length;we.length+=Be;var me=we.length<we.highWaterMark;if(me||(we.needDrain=!0),we.writing||we.corked){var Ie=we.lastBufferedRequest;we.lastBufferedRequest={chunk:Ee,encoding:ye,isBuf:xe,callback:Ce,next:null},Ie?Ie.next=we.lastBufferedRequest:we.bufferedRequest=we.lastBufferedRequest,we.bufferedRequestCount+=1}else X(Se,we,!1,Be,Ee,ye,Ce);return me}function X(Se,we,xe,Ee,ye,Ce,ve){we.writelen=Ee,we.writecb=ve,we.writing=!0,we.sync=!0,we.destroyed?we.onwrite(new q("write")):xe?Se._writev(ye,we.onwrite):Se._write(ye,Ce,we.onwrite),we.sync=!1}function F(Se,we,xe,Ee,ye){--we.pendingcb,xe?(browser$1$1.nextTick(ye,Ee),browser$1$1.nextTick(ee,Se,we),Se._writableState.errorEmitted=!0,re(Se,Ee)):(ye(Ee),Se._writableState.errorEmitted=!0,re(Se,Ee),ee(Se,we))}function z(Se){Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0}function J(Se,we){var xe=Se._writableState,Ee=xe.sync,ye=xe.writecb;if(typeof ye!="function")throw new V;if(z(xe),we)F(Se,xe,Ee,we,ye);else{var Ce=ie(xe)||Se.destroyed;!Ce&&!xe.corked&&!xe.bufferProcessing&&xe.bufferedRequest&&oe(Se,xe),Ee?browser$1$1.nextTick(te,Se,xe,Ce,ye):te(Se,xe,Ce,ye)}}function te(Se,we,xe,Ee){xe||se(Se,we),we.pendingcb--,Ee(),ee(Se,we)}function se(Se,we){we.length===0&&we.needDrain&&(we.needDrain=!1,Se.emit("drain"))}function oe(Se,we){we.bufferProcessing=!0;var xe=we.bufferedRequest;if(Se._writev&&xe&&xe.next){var Ee=we.bufferedRequestCount,ye=new Array(Ee),Ce=we.corkedRequestsFree;Ce.entry=xe;for(var ve=0,Be=!0;xe;)ye[ve]=xe,xe.isBuf||(Be=!1),xe=xe.next,ve+=1;ye.allBuffers=Be,X(Se,we,!0,we.length,ye,"",Ce.finish),we.pendingcb++,we.lastBufferedRequest=null,Ce.next?(we.corkedRequestsFree=Ce.next,Ce.next=null):we.corkedRequestsFree=new n(we),we.bufferedRequestCount=0}else{for(;xe;){var me=xe.chunk,Ie=xe.encoding,Ve=xe.callback,Me=we.objectMode?1:me.length;if(X(Se,we,!1,Me,me,Ie,Ve),xe=xe.next,we.bufferedRequestCount--,we.writing)break}xe===null&&(we.lastBufferedRequest=null)}we.bufferedRequest=xe,we.bufferProcessing=!1}fe.prototype._write=function(Se,we,xe){xe(new L("_write()"))},fe.prototype._writev=null,fe.prototype.end=function(Se,we,xe){var Ee=this._writableState;return typeof Se=="function"?(xe=Se,Se=null,we=null):typeof we=="function"&&(xe=we,we=null),Se!=null&&this.write(Se,we),Ee.corked&&(Ee.corked=1,this.uncork()),Ee.ending||pe(this,Ee,xe),this},Object.defineProperty(fe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ie(Se){return Se.ending&&Se.length===0&&Se.bufferedRequest===null&&!Se.finished&&!Se.writing}function G(Se,we){Se._final(function(xe){we.pendingcb--,xe&&re(Se,xe),we.prefinished=!0,Se.emit("prefinish"),ee(Se,we)})}function j(Se,we){!we.prefinished&&!we.finalCalled&&(typeof Se._final=="function"&&!we.destroyed?(we.pendingcb++,we.finalCalled=!0,browser$1$1.nextTick(G,Se,we)):(we.prefinished=!0,Se.emit("prefinish")))}function ee(Se,we){var xe=ie(we);if(xe&&(j(Se,we),we.pendingcb===0&&(we.finished=!0,Se.emit("finish"),we.autoDestroy))){var Ee=Se._readableState;(!Ee||Ee.autoDestroy&&Ee.endEmitted)&&Se.destroy()}return xe}function pe(Se,we,xe){we.ending=!0,ee(Se,we),xe&&(we.finished?browser$1$1.nextTick(xe):Se.once("finish",xe)),we.ended=!0,Se.writable=!1}function he(Se,we,xe){var Ee=Se.entry;for(Se.entry=null;Ee;){var ye=Ee.callback;we.pendingcb--,ye(xe),Ee=Ee.next}we.corkedRequestsFree.next=Se}return Object.defineProperty(fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(we){this._writableState&&(this._writableState.destroyed=we)}}),fe.prototype.destroy=B.destroy,fe.prototype._undestroy=B.undestroy,fe.prototype._destroy=function(Se,we){we(Se)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var n=Object.keys||function(I){var M=[];for(var O in I)M.push(O);return M};_stream_duplex=T;var _=require_stream_readable(),x=require_stream_writable();inherits_browserExports(T,_);for(var E=n(x.prototype),S=0;S<E.length;S++){var C=E[S];T.prototype[C]||(T.prototype[C]=x.prototype[C])}function T(I){if(!(this instanceof T))return new T(I);_.call(this,I),x.call(this,I),this.allowHalfOpen=!0,I&&(I.readable===!1&&(this.readable=!1),I.writable===!1&&(this.writable=!1),I.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",A)))}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function A(){this._writableState.ended||browser$1$1.nextTick(B,this)}function B(I){I.end()}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(M){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=M,this._writableState.destroyed=M)}}),_stream_duplex}var string_decoder={},Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(n){switch(n=""+n,n&&n.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(n){if(!n)return"utf8";for(var _;;)switch(n){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return n;default:if(_)return;n=(""+n).toLowerCase(),_=!0}}function normalizeEncoding(n){var _=_normalizeEncoding(n);if(typeof _!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(n)))throw new Error("Unknown encoding: "+n);return _||n}var StringDecoder_1=string_decoder.StringDecoder=StringDecoder;function StringDecoder(n){this.encoding=normalizeEncoding(n);var _;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,_=4;break;case"utf8":this.fillLast=utf8FillLast,_=4;break;case"base64":this.text=base64Text,this.end=base64End,_=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(_)}StringDecoder.prototype.write=function(n){if(n.length===0)return"";var _,x;if(this.lastNeed){if(_=this.fillLast(n),_===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<n.length?_?_+this.text(n,x):this.text(n,x):_||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(n){if(this.lastNeed<=n.length)return n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,n.length),this.lastNeed-=n.length};function utf8CheckByte(n){return n<=127?0:n>>5===6?2:n>>4===14?3:n>>3===30?4:n>>6===2?-1:-2}function utf8CheckIncomplete(n,_,x){var E=_.length-1;if(E<x)return 0;var S=utf8CheckByte(_[E]);return S>=0?(S>0&&(n.lastNeed=S-1),S):--E<x||S===-2?0:(S=utf8CheckByte(_[E]),S>=0?(S>0&&(n.lastNeed=S-2),S):--E<x||S===-2?0:(S=utf8CheckByte(_[E]),S>=0?(S>0&&(S===2?S=0:n.lastNeed=S-3),S):0))}function utf8CheckExtraBytes(n,_,x){if((_[0]&192)!==128)return n.lastNeed=0,"";if(n.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return n.lastNeed=1,"";if(n.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return n.lastNeed=2,""}}function utf8FillLast(n){var _=this.lastTotal-this.lastNeed,x=utf8CheckExtraBytes(this,n);if(x!==void 0)return x;if(this.lastNeed<=n.length)return n.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);n.copy(this.lastChar,_,0,n.length),this.lastNeed-=n.length}function utf8Text(n,_){var x=utf8CheckIncomplete(this,n,_);if(!this.lastNeed)return n.toString("utf8",_);this.lastTotal=x;var E=n.length-(x-this.lastNeed);return n.copy(this.lastChar,0,E),n.toString("utf8",_,E)}function utf8End(n){var _=n&&n.length?this.write(n):"";return this.lastNeed?_+"":_}function utf16Text(n,_){if((n.length-_)%2===0){var x=n.toString("utf16le",_);if(x){var E=x.charCodeAt(x.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=n[n.length-1],n.toString("utf16le",_,n.length-1)}function utf16End(n){var _=n&&n.length?this.write(n):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,x)}return _}function base64Text(n,_){var x=(n.length-_)%3;return x===0?n.toString("base64",_):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=n[n.length-1]:(this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1]),n.toString("base64",_,n.length-x))}function base64End(n){var _=n&&n.length?this.write(n):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function simpleWrite(n){return n.toString(this.encoding)}function simpleEnd(n){return n&&n.length?this.write(n):""}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var n=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function _(C){var T=!1;return function(){if(!T){T=!0;for(var A=arguments.length,B=new Array(A),I=0;I<A;I++)B[I]=arguments[I];C.apply(this,B)}}}function x(){}function E(C){return C.setHeader&&typeof C.abort=="function"}function S(C,T,A){if(typeof T=="function")return S(C,null,T);T||(T={}),A=_(A||x);var B=T.readable||T.readable!==!1&&C.readable,I=T.writable||T.writable!==!1&&C.writable,M=function(){C.writable||D()},O=C._writableState&&C._writableState.finished,D=function(){I=!1,O=!0,B||A.call(C)},L=C._readableState&&C._readableState.endEmitted,V=function(){B=!1,L=!0,I||A.call(C)},U=function(Q){A.call(C,Q)},q=function(){var Q;if(B&&!L)return(!C._readableState||!C._readableState.ended)&&(Q=new n),A.call(C,Q);if(I&&!O)return(!C._writableState||!C._writableState.ended)&&(Q=new n),A.call(C,Q)},H=function(){C.req.on("finish",D)};return E(C)?(C.on("complete",D),C.on("abort",q),C.req?H():C.on("request",H)):I&&!C._writableState&&(C.on("end",M),C.on("close",M)),C.on("end",V),C.on("finish",D),T.error!==!1&&C.on("error",U),C.on("close",q),function(){C.removeListener("complete",D),C.removeListener("abort",q),C.removeListener("request",H),C.req&&C.req.removeListener("finish",D),C.removeListener("end",M),C.removeListener("close",M),C.removeListener("finish",D),C.removeListener("end",V),C.removeListener("error",U),C.removeListener("close",q)}}return endOfStream=S,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var n;function _(Q,re,ce){return re=x(re),re in Q?Object.defineProperty(Q,re,{value:ce,enumerable:!0,configurable:!0,writable:!0}):Q[re]=ce,Q}function x(Q){var re=E(Q,"string");return typeof re=="symbol"?re:String(re)}function E(Q,re){if(typeof Q!="object"||Q===null)return Q;var ce=Q[Symbol.toPrimitive];if(ce!==void 0){var ne=ce.call(Q,re||"default");if(typeof ne!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(re==="string"?String:Number)(Q)}var S=requireEndOfStream(),C=Symbol("lastResolve"),T=Symbol("lastReject"),A=Symbol("error"),B=Symbol("ended"),I=Symbol("lastPromise"),M=Symbol("handlePromise"),O=Symbol("stream");function D(Q,re){return{value:Q,done:re}}function L(Q){var re=Q[C];if(re!==null){var ce=Q[O].read();ce!==null&&(Q[I]=null,Q[C]=null,Q[T]=null,re(D(ce,!1)))}}function V(Q){browser$1$1.nextTick(L,Q)}function U(Q,re){return function(ce,ne){Q.then(function(){if(re[B]){ce(D(void 0,!0));return}re[M](ce,ne)},ne)}}var q=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((n={get stream(){return this[O]},next:function(){var re=this,ce=this[A];if(ce!==null)return Promise.reject(ce);if(this[B])return Promise.resolve(D(void 0,!0));if(this[O].destroyed)return new Promise(function(ge,$e){browser$1$1.nextTick(function(){re[A]?$e(re[A]):ge(D(void 0,!0))})});var ne=this[I],Y;if(ne)Y=new Promise(U(ne,this));else{var fe=this[O].read();if(fe!==null)return Promise.resolve(D(fe,!1));Y=new Promise(this[M])}return this[I]=Y,Y}},_(n,Symbol.asyncIterator,function(){return this}),_(n,"return",function(){var re=this;return new Promise(function(ce,ne){re[O].destroy(null,function(Y){if(Y){ne(Y);return}ce(D(void 0,!0))})})}),n),q),W=function(re){var ce,ne=Object.create(H,(ce={},_(ce,O,{value:re,writable:!0}),_(ce,C,{value:null,writable:!0}),_(ce,T,{value:null,writable:!0}),_(ce,A,{value:null,writable:!0}),_(ce,B,{value:re._readableState.endEmitted,writable:!0}),_(ce,M,{value:function(fe,ge){var $e=ne[O].read();$e?(ne[I]=null,ne[C]=null,ne[T]=null,fe(D($e,!1))):(ne[C]=fe,ne[T]=ge)},writable:!0}),ce));return ne[I]=null,S(re,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var fe=ne[T];fe!==null&&(ne[I]=null,ne[C]=null,ne[T]=null,fe(Y)),ne[A]=Y;return}var ge=ne[C];ge!==null&&(ne[I]=null,ne[C]=null,ne[T]=null,ge(D(void 0,!0))),ne[B]=!0}),re.on("readable",V.bind(null,ne)),ne};return async_iterator=W,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=ge;var n;ge.ReadableState=fe,eventsExports.EventEmitter;var _=function(ve,Be){return ve.listeners(Be).length},x=requireStreamBrowser(),E=buffer$3.Buffer,S=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function C(Ce){return E.from(Ce)}function T(Ce){return E.isBuffer(Ce)||Ce instanceof S}var A=require$$0$2,B;A&&A.debuglog?B=A.debuglog("stream"):B=function(){};var I=requireBuffer_list(),M=requireDestroy(),O=requireState(),D=O.getHighWaterMark,L=requireErrorsBrowser().codes,V=L.ERR_INVALID_ARG_TYPE,U=L.ERR_STREAM_PUSH_AFTER_EOF,q=L.ERR_METHOD_NOT_IMPLEMENTED,H=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,W,Q,re;inherits_browserExports(ge,x);var ce=M.errorOrDestroy,ne=["error","close","destroy","pause","resume"];function Y(Ce,ve,Be){if(typeof Ce.prependListener=="function")return Ce.prependListener(ve,Be);!Ce._events||!Ce._events[ve]?Ce.on(ve,Be):Array.isArray(Ce._events[ve])?Ce._events[ve].unshift(Be):Ce._events[ve]=[Be,Ce._events[ve]]}function fe(Ce,ve,Be){n=n||require_stream_duplex(),Ce=Ce||{},typeof Be!="boolean"&&(Be=ve instanceof n),this.objectMode=!!Ce.objectMode,Be&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode),this.highWaterMark=D(this,Ce,"readableHighWaterMark",Be),this.buffer=new I,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ce.emitClose!==!1,this.autoDestroy=!!Ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(W||(W=string_decoder.StringDecoder),this.decoder=new W(Ce.encoding),this.encoding=Ce.encoding)}function ge(Ce){if(n=n||require_stream_duplex(),!(this instanceof ge))return new ge(Ce);var ve=this instanceof n;this._readableState=new fe(Ce,this,ve),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),x.call(this)}Object.defineProperty(ge.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ve){this._readableState&&(this._readableState.destroyed=ve)}}),ge.prototype.destroy=M.destroy,ge.prototype._undestroy=M.undestroy,ge.prototype._destroy=function(Ce,ve){ve(Ce)},ge.prototype.push=function(Ce,ve){var Be=this._readableState,me;return Be.objectMode?me=!0:typeof Ce=="string"&&(ve=ve||Be.defaultEncoding,ve!==Be.encoding&&(Ce=E.from(Ce,ve),ve=""),me=!0),$e(this,Ce,ve,!1,me)},ge.prototype.unshift=function(Ce){return $e(this,Ce,null,!0,!1)};function $e(Ce,ve,Be,me,Ie){B("readableAddChunk",ve);var Ve=Ce._readableState;if(ve===null)Ve.reading=!1,J(Ce,Ve);else{var Me;if(Ie||(Me=ae(Ve,ve)),Me)ce(Ce,Me);else if(Ve.objectMode||ve&&ve.length>0)if(typeof ve!="string"&&!Ve.objectMode&&Object.getPrototypeOf(ve)!==E.prototype&&(ve=C(ve)),me)Ve.endEmitted?ce(Ce,new H):_e(Ce,Ve,ve,!0);else if(Ve.ended)ce(Ce,new U);else{if(Ve.destroyed)return!1;Ve.reading=!1,Ve.decoder&&!Be?(ve=Ve.decoder.write(ve),Ve.objectMode||ve.length!==0?_e(Ce,Ve,ve,!1):oe(Ce,Ve)):_e(Ce,Ve,ve,!1)}else me||(Ve.reading=!1,oe(Ce,Ve))}return!Ve.ended&&(Ve.length<Ve.highWaterMark||Ve.length===0)}function _e(Ce,ve,Be,me){ve.flowing&&ve.length===0&&!ve.sync?(ve.awaitDrain=0,Ce.emit("data",Be)):(ve.length+=ve.objectMode?1:Be.length,me?ve.buffer.unshift(Be):ve.buffer.push(Be),ve.needReadable&&te(Ce)),oe(Ce,ve)}function ae(Ce,ve){var Be;return!T(ve)&&typeof ve!="string"&&ve!==void 0&&!Ce.objectMode&&(Be=new V("chunk",["string","Buffer","Uint8Array"],ve)),Be}ge.prototype.isPaused=function(){return this._readableState.flowing===!1},ge.prototype.setEncoding=function(Ce){W||(W=string_decoder.StringDecoder);var ve=new W(Ce);this._readableState.decoder=ve,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,me="";Be!==null;)me+=ve.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),me!==""&&this._readableState.buffer.push(me),this._readableState.length=me.length,this};var X=1073741824;function F(Ce){return Ce>=X?Ce=X:(Ce--,Ce|=Ce>>>1,Ce|=Ce>>>2,Ce|=Ce>>>4,Ce|=Ce>>>8,Ce|=Ce>>>16,Ce++),Ce}function z(Ce,ve){return Ce<=0||ve.length===0&&ve.ended?0:ve.objectMode?1:Ce!==Ce?ve.flowing&&ve.length?ve.buffer.head.data.length:ve.length:(Ce>ve.highWaterMark&&(ve.highWaterMark=F(Ce)),Ce<=ve.length?Ce:ve.ended?ve.length:(ve.needReadable=!0,0))}ge.prototype.read=function(Ce){B("read",Ce),Ce=parseInt(Ce,10);var ve=this._readableState,Be=Ce;if(Ce!==0&&(ve.emittedReadable=!1),Ce===0&&ve.needReadable&&((ve.highWaterMark!==0?ve.length>=ve.highWaterMark:ve.length>0)||ve.ended))return B("read: emitReadable",ve.length,ve.ended),ve.length===0&&ve.ended?xe(this):te(this),null;if(Ce=z(Ce,ve),Ce===0&&ve.ended)return ve.length===0&&xe(this),null;var me=ve.needReadable;B("need readable",me),(ve.length===0||ve.length-Ce<ve.highWaterMark)&&(me=!0,B("length less than watermark",me)),ve.ended||ve.reading?(me=!1,B("reading or ended",me)):me&&(B("do read"),ve.reading=!0,ve.sync=!0,ve.length===0&&(ve.needReadable=!0),this._read(ve.highWaterMark),ve.sync=!1,ve.reading||(Ce=z(Be,ve)));var Ie;return Ce>0?Ie=we(Ce,ve):Ie=null,Ie===null?(ve.needReadable=ve.length<=ve.highWaterMark,Ce=0):(ve.length-=Ce,ve.awaitDrain=0),ve.length===0&&(ve.ended||(ve.needReadable=!0),Be!==Ce&&ve.ended&&xe(this)),Ie!==null&&this.emit("data",Ie),Ie};function J(Ce,ve){if(B("onEofChunk"),!ve.ended){if(ve.decoder){var Be=ve.decoder.end();Be&&Be.length&&(ve.buffer.push(Be),ve.length+=ve.objectMode?1:Be.length)}ve.ended=!0,ve.sync?te(Ce):(ve.needReadable=!1,ve.emittedReadable||(ve.emittedReadable=!0,se(Ce)))}}function te(Ce){var ve=Ce._readableState;B("emitReadable",ve.needReadable,ve.emittedReadable),ve.needReadable=!1,ve.emittedReadable||(B("emitReadable",ve.flowing),ve.emittedReadable=!0,browser$1$1.nextTick(se,Ce))}function se(Ce){var ve=Ce._readableState;B("emitReadable_",ve.destroyed,ve.length,ve.ended),!ve.destroyed&&(ve.length||ve.ended)&&(Ce.emit("readable"),ve.emittedReadable=!1),ve.needReadable=!ve.flowing&&!ve.ended&&ve.length<=ve.highWaterMark,Se(Ce)}function oe(Ce,ve){ve.readingMore||(ve.readingMore=!0,browser$1$1.nextTick(ie,Ce,ve))}function ie(Ce,ve){for(;!ve.reading&&!ve.ended&&(ve.length<ve.highWaterMark||ve.flowing&&ve.length===0);){var Be=ve.length;if(B("maybeReadMore read 0"),Ce.read(0),Be===ve.length)break}ve.readingMore=!1}ge.prototype._read=function(Ce){ce(this,new q("_read()"))},ge.prototype.pipe=function(Ce,ve){var Be=this,me=this._readableState;switch(me.pipesCount){case 0:me.pipes=Ce;break;case 1:me.pipes=[me.pipes,Ce];break;default:me.pipes.push(Ce);break}me.pipesCount+=1,B("pipe count=%d opts=%j",me.pipesCount,ve);var Ie=(!ve||ve.end!==!1)&&Ce!==browser$1$1.stdout&&Ce!==browser$1$1.stderr,Ve=Ie?Ne:Ze;me.endEmitted?browser$1$1.nextTick(Ve):Be.once("end",Ve),Ce.on("unpipe",Me);function Me(Re,be){B("onunpipe"),Re===Be&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,We())}function Ne(){B("onend"),Ce.end()}var Pe=G(Be);Ce.on("drain",Pe);var He=!1;function We(){B("cleanup"),Ce.removeListener("close",nt),Ce.removeListener("finish",ot),Ce.removeListener("drain",Pe),Ce.removeListener("error",Ge),Ce.removeListener("unpipe",Me),Be.removeListener("end",Ne),Be.removeListener("end",Ze),Be.removeListener("data",Ke),He=!0,me.awaitDrain&&(!Ce._writableState||Ce._writableState.needDrain)&&Pe()}Be.on("data",Ke);function Ke(Re){B("ondata");var be=Ce.write(Re);B("dest.write",be),be===!1&&((me.pipesCount===1&&me.pipes===Ce||me.pipesCount>1&&ye(me.pipes,Ce)!==-1)&&!He&&(B("false write response, pause",me.awaitDrain),me.awaitDrain++),Be.pause())}function Ge(Re){B("onerror",Re),Ze(),Ce.removeListener("error",Ge),_(Ce,"error")===0&&ce(Ce,Re)}Y(Ce,"error",Ge);function nt(){Ce.removeListener("finish",ot),Ze()}Ce.once("close",nt);function ot(){B("onfinish"),Ce.removeListener("close",nt),Ze()}Ce.once("finish",ot);function Ze(){B("unpipe"),Be.unpipe(Ce)}return Ce.emit("pipe",Be),me.flowing||(B("pipe resume"),Be.resume()),Ce};function G(Ce){return function(){var Be=Ce._readableState;B("pipeOnDrain",Be.awaitDrain),Be.awaitDrain&&Be.awaitDrain--,Be.awaitDrain===0&&_(Ce,"data")&&(Be.flowing=!0,Se(Ce))}}ge.prototype.unpipe=function(Ce){var ve=this._readableState,Be={hasUnpiped:!1};if(ve.pipesCount===0)return this;if(ve.pipesCount===1)return Ce&&Ce!==ve.pipes?this:(Ce||(Ce=ve.pipes),ve.pipes=null,ve.pipesCount=0,ve.flowing=!1,Ce&&Ce.emit("unpipe",this,Be),this);if(!Ce){var me=ve.pipes,Ie=ve.pipesCount;ve.pipes=null,ve.pipesCount=0,ve.flowing=!1;for(var Ve=0;Ve<Ie;Ve++)me[Ve].emit("unpipe",this,{hasUnpiped:!1});return this}var Me=ye(ve.pipes,Ce);return Me===-1?this:(ve.pipes.splice(Me,1),ve.pipesCount-=1,ve.pipesCount===1&&(ve.pipes=ve.pipes[0]),Ce.emit("unpipe",this,Be),this)},ge.prototype.on=function(Ce,ve){var Be=x.prototype.on.call(this,Ce,ve),me=this._readableState;return Ce==="data"?(me.readableListening=this.listenerCount("readable")>0,me.flowing!==!1&&this.resume()):Ce==="readable"&&!me.endEmitted&&!me.readableListening&&(me.readableListening=me.needReadable=!0,me.flowing=!1,me.emittedReadable=!1,B("on readable",me.length,me.reading),me.length?te(this):me.reading||browser$1$1.nextTick(ee,this)),Be},ge.prototype.addListener=ge.prototype.on,ge.prototype.removeListener=function(Ce,ve){var Be=x.prototype.removeListener.call(this,Ce,ve);return Ce==="readable"&&browser$1$1.nextTick(j,this),Be},ge.prototype.removeAllListeners=function(Ce){var ve=x.prototype.removeAllListeners.apply(this,arguments);return(Ce==="readable"||Ce===void 0)&&browser$1$1.nextTick(j,this),ve};function j(Ce){var ve=Ce._readableState;ve.readableListening=Ce.listenerCount("readable")>0,ve.resumeScheduled&&!ve.paused?ve.flowing=!0:Ce.listenerCount("data")>0&&Ce.resume()}function ee(Ce){B("readable nexttick read 0"),Ce.read(0)}ge.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(B("resume"),Ce.flowing=!Ce.readableListening,pe(this,Ce)),Ce.paused=!1,this};function pe(Ce,ve){ve.resumeScheduled||(ve.resumeScheduled=!0,browser$1$1.nextTick(he,Ce,ve))}function he(Ce,ve){B("resume",ve.reading),ve.reading||Ce.read(0),ve.resumeScheduled=!1,Ce.emit("resume"),Se(Ce),ve.flowing&&!ve.reading&&Ce.read(0)}ge.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Se(Ce){var ve=Ce._readableState;for(B("flow",ve.flowing);ve.flowing&&Ce.read()!==null;);}ge.prototype.wrap=function(Ce){var ve=this,Be=this._readableState,me=!1;Ce.on("end",function(){if(B("wrapped end"),Be.decoder&&!Be.ended){var Me=Be.decoder.end();Me&&Me.length&&ve.push(Me)}ve.push(null)}),Ce.on("data",function(Me){if(B("wrapped data"),Be.decoder&&(Me=Be.decoder.write(Me)),!(Be.objectMode&&Me==null)&&!(!Be.objectMode&&(!Me||!Me.length))){var Ne=ve.push(Me);Ne||(me=!0,Ce.pause())}});for(var Ie in Ce)this[Ie]===void 0&&typeof Ce[Ie]=="function"&&(this[Ie]=function(Ne){return function(){return Ce[Ne].apply(Ce,arguments)}}(Ie));for(var Ve=0;Ve<ne.length;Ve++)Ce.on(ne[Ve],this.emit.bind(this,ne[Ve]));return this._read=function(Me){B("wrapped _read",Me),me&&(me=!1,Ce.resume())},this},typeof Symbol=="function"&&(ge.prototype[Symbol.asyncIterator]=function(){return Q===void 0&&(Q=requireAsync_iterator()),Q(this)}),Object.defineProperty(ge.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ge.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ge.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ve){this._readableState&&(this._readableState.flowing=ve)}}),ge._fromList=we,Object.defineProperty(ge.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function we(Ce,ve){if(ve.length===0)return null;var Be;return ve.objectMode?Be=ve.buffer.shift():!Ce||Ce>=ve.length?(ve.decoder?Be=ve.buffer.join(""):ve.buffer.length===1?Be=ve.buffer.first():Be=ve.buffer.concat(ve.length),ve.buffer.clear()):Be=ve.buffer.consume(Ce,ve.decoder),Be}function xe(Ce){var ve=Ce._readableState;B("endReadable",ve.endEmitted),ve.endEmitted||(ve.ended=!0,browser$1$1.nextTick(Ee,ve,Ce))}function Ee(Ce,ve){if(B("endReadableNT",Ce.endEmitted,Ce.length),!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,ve.readable=!1,ve.emit("end"),Ce.autoDestroy)){var Be=ve._writableState;(!Be||Be.autoDestroy&&Be.finished)&&ve.destroy()}}typeof Symbol=="function"&&(ge.from=function(Ce,ve){return re===void 0&&(re=requireFromBrowser()),re(ge,Ce,ve)});function ye(Ce,ve){for(var Be=0,me=Ce.length;Be<me;Be++)if(Ce[Be]===ve)return Be;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=A;var n=requireErrorsBrowser().codes,_=n.ERR_METHOD_NOT_IMPLEMENTED,x=n.ERR_MULTIPLE_CALLBACK,E=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,S=n.ERR_TRANSFORM_WITH_LENGTH_0,C=require_stream_duplex();inherits_browserExports(A,C);function T(M,O){var D=this._transformState;D.transforming=!1;var L=D.writecb;if(L===null)return this.emit("error",new x);D.writechunk=null,D.writecb=null,O!=null&&this.push(O),L(M);var V=this._readableState;V.reading=!1,(V.needReadable||V.length<V.highWaterMark)&&this._read(V.highWaterMark)}function A(M){if(!(this instanceof A))return new A(M);C.call(this,M),this._transformState={afterTransform:T.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,M&&(typeof M.transform=="function"&&(this._transform=M.transform),typeof M.flush=="function"&&(this._flush=M.flush)),this.on("prefinish",B)}function B(){var M=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(O,D){I(M,O,D)}):I(this,null,null)}A.prototype.push=function(M,O){return this._transformState.needTransform=!1,C.prototype.push.call(this,M,O)},A.prototype._transform=function(M,O,D){D(new _("_transform()"))},A.prototype._write=function(M,O,D){var L=this._transformState;if(L.writecb=D,L.writechunk=M,L.writeencoding=O,!L.transforming){var V=this._readableState;(L.needTransform||V.needReadable||V.length<V.highWaterMark)&&this._read(V.highWaterMark)}},A.prototype._read=function(M){var O=this._transformState;O.writechunk!==null&&!O.transforming?(O.transforming=!0,this._transform(O.writechunk,O.writeencoding,O.afterTransform)):O.needTransform=!0},A.prototype._destroy=function(M,O){C.prototype._destroy.call(this,M,function(D){O(D)})};function I(M,O,D){if(O)return M.emit("error",O);if(D!=null&&M.push(D),M._writableState.length)throw new S;if(M._transformState.transforming)throw new E;return M.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=_;var n=require_stream_transform();inherits_browserExports(_,n);function _(x){if(!(this instanceof _))return new _(x);n.call(this,x)}return _.prototype._transform=function(x,E,S){S(null,x)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var n;function _(D){var L=!1;return function(){L||(L=!0,D.apply(void 0,arguments))}}var x=requireErrorsBrowser().codes,E=x.ERR_MISSING_ARGS,S=x.ERR_STREAM_DESTROYED;function C(D){if(D)throw D}function T(D){return D.setHeader&&typeof D.abort=="function"}function A(D,L,V,U){U=_(U);var q=!1;D.on("close",function(){q=!0}),n===void 0&&(n=requireEndOfStream()),n(D,{readable:L,writable:V},function(W){if(W)return U(W);q=!0,U()});var H=!1;return function(W){if(!q&&!H){if(H=!0,T(D))return D.abort();if(typeof D.destroy=="function")return D.destroy();U(W||new S("pipe"))}}}function B(D){D()}function I(D,L){return D.pipe(L)}function M(D){return!D.length||typeof D[D.length-1]!="function"?C:D.pop()}function O(){for(var D=arguments.length,L=new Array(D),V=0;V<D;V++)L[V]=arguments[V];var U=M(L);if(Array.isArray(L[0])&&(L=L[0]),L.length<2)throw new E("streams");var q,H=L.map(function(W,Q){var re=Q<L.length-1,ce=Q>0;return A(W,re,ce,function(ne){q||(q=ne),ne&&H.forEach(B),!re&&(H.forEach(B),U(q))})});return L.reduce(I)}return pipeline_1=O,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(n,_){_=n.exports=require_stream_readable(),_.Stream=_,_.Readable=_,_.Writable=require_stream_writable(),_.Duplex=require_stream_duplex(),_.Transform=require_stream_transform(),_.PassThrough=require_stream_passthrough(),_.finished=requireEndOfStream(),_.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var n=safeBufferExports.Buffer,_=requireReadableBrowser().Transform,x=inherits_browserExports;function E(C,T){if(!n.isBuffer(C)&&typeof C!="string")throw new TypeError(T+" must be a string or a buffer")}function S(C){_.call(this),this._block=n.allocUnsafe(C),this._blockSize=C,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return x(S,_),S.prototype._transform=function(C,T,A){var B=null;try{this.update(C,T)}catch(I){B=I}A(B)},S.prototype._flush=function(C){var T=null;try{this.push(this.digest())}catch(A){T=A}C(T)},S.prototype.update=function(C,T){if(E(C,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(C)||(C=n.from(C,T));for(var A=this._block,B=0;this._blockOffset+C.length-B>=this._blockSize;){for(var I=this._blockOffset;I<this._blockSize;)A[I++]=C[B++];this._update(),this._blockOffset=0}for(;B<C.length;)A[this._blockOffset++]=C[B++];for(var M=0,O=C.length*8;O>0;++M)this._length[M]+=O,O=this._length[M]/4294967296|0,O>0&&(this._length[M]-=4294967296*O);return this},S.prototype._update=function(){throw new Error("_update is not implemented")},S.prototype.digest=function(C){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var T=this._digest();C!==void 0&&(T=T.toString(C)),this._block.fill(0),this._blockOffset=0;for(var A=0;A<4;++A)this._length[A]=0;return T},S.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=S,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var n=inherits_browserExports,_=requireHashBase(),x=safeBufferExports.Buffer,E=new Array(16);function S(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}n(S,_),S.prototype._update=function(){for(var M=E,O=0;O<16;++O)M[O]=this._block.readInt32LE(O*4);var D=this._a,L=this._b,V=this._c,U=this._d;D=T(D,L,V,U,M[0],3614090360,7),U=T(U,D,L,V,M[1],3905402710,12),V=T(V,U,D,L,M[2],606105819,17),L=T(L,V,U,D,M[3],3250441966,22),D=T(D,L,V,U,M[4],4118548399,7),U=T(U,D,L,V,M[5],1200080426,12),V=T(V,U,D,L,M[6],2821735955,17),L=T(L,V,U,D,M[7],4249261313,22),D=T(D,L,V,U,M[8],1770035416,7),U=T(U,D,L,V,M[9],2336552879,12),V=T(V,U,D,L,M[10],4294925233,17),L=T(L,V,U,D,M[11],2304563134,22),D=T(D,L,V,U,M[12],1804603682,7),U=T(U,D,L,V,M[13],4254626195,12),V=T(V,U,D,L,M[14],2792965006,17),L=T(L,V,U,D,M[15],1236535329,22),D=A(D,L,V,U,M[1],4129170786,5),U=A(U,D,L,V,M[6],3225465664,9),V=A(V,U,D,L,M[11],643717713,14),L=A(L,V,U,D,M[0],3921069994,20),D=A(D,L,V,U,M[5],3593408605,5),U=A(U,D,L,V,M[10],38016083,9),V=A(V,U,D,L,M[15],3634488961,14),L=A(L,V,U,D,M[4],3889429448,20),D=A(D,L,V,U,M[9],568446438,5),U=A(U,D,L,V,M[14],3275163606,9),V=A(V,U,D,L,M[3],4107603335,14),L=A(L,V,U,D,M[8],1163531501,20),D=A(D,L,V,U,M[13],2850285829,5),U=A(U,D,L,V,M[2],4243563512,9),V=A(V,U,D,L,M[7],1735328473,14),L=A(L,V,U,D,M[12],2368359562,20),D=B(D,L,V,U,M[5],4294588738,4),U=B(U,D,L,V,M[8],2272392833,11),V=B(V,U,D,L,M[11],1839030562,16),L=B(L,V,U,D,M[14],4259657740,23),D=B(D,L,V,U,M[1],2763975236,4),U=B(U,D,L,V,M[4],1272893353,11),V=B(V,U,D,L,M[7],4139469664,16),L=B(L,V,U,D,M[10],3200236656,23),D=B(D,L,V,U,M[13],681279174,4),U=B(U,D,L,V,M[0],3936430074,11),V=B(V,U,D,L,M[3],3572445317,16),L=B(L,V,U,D,M[6],76029189,23),D=B(D,L,V,U,M[9],3654602809,4),U=B(U,D,L,V,M[12],3873151461,11),V=B(V,U,D,L,M[15],530742520,16),L=B(L,V,U,D,M[2],3299628645,23),D=I(D,L,V,U,M[0],4096336452,6),U=I(U,D,L,V,M[7],1126891415,10),V=I(V,U,D,L,M[14],2878612391,15),L=I(L,V,U,D,M[5],4237533241,21),D=I(D,L,V,U,M[12],1700485571,6),U=I(U,D,L,V,M[3],2399980690,10),V=I(V,U,D,L,M[10],4293915773,15),L=I(L,V,U,D,M[1],2240044497,21),D=I(D,L,V,U,M[8],1873313359,6),U=I(U,D,L,V,M[15],4264355552,10),V=I(V,U,D,L,M[6],2734768916,15),L=I(L,V,U,D,M[13],1309151649,21),D=I(D,L,V,U,M[4],4149444226,6),U=I(U,D,L,V,M[11],3174756917,10),V=I(V,U,D,L,M[2],718787259,15),L=I(L,V,U,D,M[9],3951481745,21),this._a=this._a+D|0,this._b=this._b+L|0,this._c=this._c+V|0,this._d=this._d+U|0},S.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var M=x.allocUnsafe(16);return M.writeInt32LE(this._a,0),M.writeInt32LE(this._b,4),M.writeInt32LE(this._c,8),M.writeInt32LE(this._d,12),M};function C(M,O){return M<<O|M>>>32-O}function T(M,O,D,L,V,U,q){return C(M+(O&D|~O&L)+V+U|0,q)+O|0}function A(M,O,D,L,V,U,q){return C(M+(O&L|D&~L)+V+U|0,q)+O|0}function B(M,O,D,L,V,U,q){return C(M+(O^D^L)+V+U|0,q)+O|0}function I(M,O,D,L,V,U,q){return C(M+(D^(O|~L))+V+U|0,q)+O|0}return md5_js=S,md5_js}var ripemd160$2,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160$2;hasRequiredRipemd160=1;var n=buffer$3.Buffer,_=inherits_browserExports,x=requireHashBase(),E=new Array(16),S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],C=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],T=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],B=[0,1518500249,1859775393,2400959708,2840853838],I=[1352829926,1548603684,1836072691,2053994217,0];function M(){x.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}_(M,x),M.prototype._update=function(){for(var H=E,W=0;W<16;++W)H[W]=this._block.readInt32LE(W*4);for(var Q=this._a|0,re=this._b|0,ce=this._c|0,ne=this._d|0,Y=this._e|0,fe=this._a|0,ge=this._b|0,$e=this._c|0,_e=this._d|0,ae=this._e|0,X=0;X<80;X+=1){var F,z;X<16?(F=D(Q,re,ce,ne,Y,H[S[X]],B[0],T[X]),z=q(fe,ge,$e,_e,ae,H[C[X]],I[0],A[X])):X<32?(F=L(Q,re,ce,ne,Y,H[S[X]],B[1],T[X]),z=U(fe,ge,$e,_e,ae,H[C[X]],I[1],A[X])):X<48?(F=V(Q,re,ce,ne,Y,H[S[X]],B[2],T[X]),z=V(fe,ge,$e,_e,ae,H[C[X]],I[2],A[X])):X<64?(F=U(Q,re,ce,ne,Y,H[S[X]],B[3],T[X]),z=L(fe,ge,$e,_e,ae,H[C[X]],I[3],A[X])):(F=q(Q,re,ce,ne,Y,H[S[X]],B[4],T[X]),z=D(fe,ge,$e,_e,ae,H[C[X]],I[4],A[X])),Q=Y,Y=ne,ne=O(ce,10),ce=re,re=F,fe=ae,ae=_e,_e=O($e,10),$e=ge,ge=z}var J=this._b+ce+_e|0;this._b=this._c+ne+ae|0,this._c=this._d+Y+fe|0,this._d=this._e+Q+ge|0,this._e=this._a+re+$e|0,this._a=J},M.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var H=n.alloc?n.alloc(20):new n(20);return H.writeInt32LE(this._a,0),H.writeInt32LE(this._b,4),H.writeInt32LE(this._c,8),H.writeInt32LE(this._d,12),H.writeInt32LE(this._e,16),H};function O(H,W){return H<<W|H>>>32-W}function D(H,W,Q,re,ce,ne,Y,fe){return O(H+(W^Q^re)+ne+Y|0,fe)+ce|0}function L(H,W,Q,re,ce,ne,Y,fe){return O(H+(W&Q|~W&re)+ne+Y|0,fe)+ce|0}function V(H,W,Q,re,ce,ne,Y,fe){return O(H+((W|~Q)^re)+ne+Y|0,fe)+ce|0}function U(H,W,Q,re,ce,ne,Y,fe){return O(H+(W&re|Q&~re)+ne+Y|0,fe)+ce|0}function q(H,W,Q,re,ce,ne,Y,fe){return O(H+(W^(Q|~re))+ne+Y|0,fe)+ce|0}return ripemd160$2=M,ripemd160$2}var sha_js={exports:{}},hash$5,hasRequiredHash;function requireHash(){if(hasRequiredHash)return hash$5;hasRequiredHash=1;var n=safeBufferExports.Buffer;function _(x,E){this._block=n.alloc(x),this._finalSize=E,this._blockSize=x,this._len=0}return _.prototype.update=function(x,E){typeof x=="string"&&(E=E||"utf8",x=n.from(x,E));for(var S=this._block,C=this._blockSize,T=x.length,A=this._len,B=0;B<T;){for(var I=A%C,M=Math.min(T-B,C-I),O=0;O<M;O++)S[I+O]=x[B+O];A+=M,B+=M,A%C===0&&this._update(S)}return this._len+=T,this},_.prototype.digest=function(x){var E=this._len%this._blockSize;this._block[E]=128,this._block.fill(0,E+1),E>=this._finalSize&&(this._update(this._block),this._block.fill(0));var S=this._len*8;if(S<=4294967295)this._block.writeUInt32BE(S,this._blockSize-4);else{var C=(S&4294967295)>>>0,T=(S-C)/4294967296;this._block.writeUInt32BE(T,this._blockSize-8),this._block.writeUInt32BE(C,this._blockSize-4)}this._update(this._block);var A=this._hash();return x?A.toString(x):A},_.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$5=_,hash$5}var sha$3,hasRequiredSha;function requireSha(){if(hasRequiredSha)return sha$3;hasRequiredSha=1;var n=inherits_browserExports,_=requireHash(),x=safeBufferExports.Buffer,E=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function C(){this.init(),this._w=S,_.call(this,64,56)}n(C,_),C.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function T(I){return I<<5|I>>>27}function A(I){return I<<30|I>>>2}function B(I,M,O,D){return I===0?M&O|~M&D:I===2?M&O|M&D|O&D:M^O^D}return C.prototype._update=function(I){for(var M=this._w,O=this._a|0,D=this._b|0,L=this._c|0,V=this._d|0,U=this._e|0,q=0;q<16;++q)M[q]=I.readInt32BE(q*4);for(;q<80;++q)M[q]=M[q-3]^M[q-8]^M[q-14]^M[q-16];for(var H=0;H<80;++H){var W=~~(H/20),Q=T(O)+B(W,D,L,V)+U+M[H]+E[W]|0;U=V,V=L,L=A(D),D=O,O=Q}this._a=O+this._a|0,this._b=D+this._b|0,this._c=L+this._c|0,this._d=V+this._d|0,this._e=U+this._e|0},C.prototype._hash=function(){var I=x.allocUnsafe(20);return I.writeInt32BE(this._a|0,0),I.writeInt32BE(this._b|0,4),I.writeInt32BE(this._c|0,8),I.writeInt32BE(this._d|0,12),I.writeInt32BE(this._e|0,16),I},sha$3=C,sha$3}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var n=inherits_browserExports,_=requireHash(),x=safeBufferExports.Buffer,E=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function C(){this.init(),this._w=S,_.call(this,64,56)}n(C,_),C.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function T(M){return M<<1|M>>>31}function A(M){return M<<5|M>>>27}function B(M){return M<<30|M>>>2}function I(M,O,D,L){return M===0?O&D|~O&L:M===2?O&D|O&L|D&L:O^D^L}return C.prototype._update=function(M){for(var O=this._w,D=this._a|0,L=this._b|0,V=this._c|0,U=this._d|0,q=this._e|0,H=0;H<16;++H)O[H]=M.readInt32BE(H*4);for(;H<80;++H)O[H]=T(O[H-3]^O[H-8]^O[H-14]^O[H-16]);for(var W=0;W<80;++W){var Q=~~(W/20),re=A(D)+I(Q,L,V,U)+q+O[W]+E[Q]|0;q=U,U=V,V=B(L),L=D,D=re}this._a=D+this._a|0,this._b=L+this._b|0,this._c=V+this._c|0,this._d=U+this._d|0,this._e=q+this._e|0},C.prototype._hash=function(){var M=x.allocUnsafe(20);return M.writeInt32BE(this._a|0,0),M.writeInt32BE(this._b|0,4),M.writeInt32BE(this._c|0,8),M.writeInt32BE(this._d|0,12),M.writeInt32BE(this._e|0,16),M},sha1$1=C,sha1$1}var sha256$9,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$9;hasRequiredSha256=1;var n=inherits_browserExports,_=requireHash(),x=safeBufferExports.Buffer,E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=new Array(64);function C(){this.init(),this._w=S,_.call(this,64,56)}n(C,_),C.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function T(D,L,V){return V^D&(L^V)}function A(D,L,V){return D&L|V&(D|L)}function B(D){return(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10)}function I(D){return(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7)}function M(D){return(D>>>7|D<<25)^(D>>>18|D<<14)^D>>>3}function O(D){return(D>>>17|D<<15)^(D>>>19|D<<13)^D>>>10}return C.prototype._update=function(D){for(var L=this._w,V=this._a|0,U=this._b|0,q=this._c|0,H=this._d|0,W=this._e|0,Q=this._f|0,re=this._g|0,ce=this._h|0,ne=0;ne<16;++ne)L[ne]=D.readInt32BE(ne*4);for(;ne<64;++ne)L[ne]=O(L[ne-2])+L[ne-7]+M(L[ne-15])+L[ne-16]|0;for(var Y=0;Y<64;++Y){var fe=ce+I(W)+T(W,Q,re)+E[Y]+L[Y]|0,ge=B(V)+A(V,U,q)|0;ce=re,re=Q,Q=W,W=H+fe|0,H=q,q=U,U=V,V=fe+ge|0}this._a=V+this._a|0,this._b=U+this._b|0,this._c=q+this._c|0,this._d=H+this._d|0,this._e=W+this._e|0,this._f=Q+this._f|0,this._g=re+this._g|0,this._h=ce+this._h|0},C.prototype._hash=function(){var D=x.allocUnsafe(32);return D.writeInt32BE(this._a,0),D.writeInt32BE(this._b,4),D.writeInt32BE(this._c,8),D.writeInt32BE(this._d,12),D.writeInt32BE(this._e,16),D.writeInt32BE(this._f,20),D.writeInt32BE(this._g,24),D.writeInt32BE(this._h,28),D},sha256$9=C,sha256$9}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var n=inherits_browserExports,_=requireSha256(),x=requireHash(),E=safeBufferExports.Buffer,S=new Array(64);function C(){this.init(),this._w=S,x.call(this,64,56)}return n(C,_),C.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},C.prototype._hash=function(){var T=E.allocUnsafe(28);return T.writeInt32BE(this._a,0),T.writeInt32BE(this._b,4),T.writeInt32BE(this._c,8),T.writeInt32BE(this._d,12),T.writeInt32BE(this._e,16),T.writeInt32BE(this._f,20),T.writeInt32BE(this._g,24),T},sha224$1=C,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var n=inherits_browserExports,_=requireHash(),x=safeBufferExports.Buffer,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],S=new Array(160);function C(){this.init(),this._w=S,_.call(this,128,112)}n(C,_),C.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function T(U,q,H){return H^U&(q^H)}function A(U,q,H){return U&q|H&(U|q)}function B(U,q){return(U>>>28|q<<4)^(q>>>2|U<<30)^(q>>>7|U<<25)}function I(U,q){return(U>>>14|q<<18)^(U>>>18|q<<14)^(q>>>9|U<<23)}function M(U,q){return(U>>>1|q<<31)^(U>>>8|q<<24)^U>>>7}function O(U,q){return(U>>>1|q<<31)^(U>>>8|q<<24)^(U>>>7|q<<25)}function D(U,q){return(U>>>19|q<<13)^(q>>>29|U<<3)^U>>>6}function L(U,q){return(U>>>19|q<<13)^(q>>>29|U<<3)^(U>>>6|q<<26)}function V(U,q){return U>>>0<q>>>0?1:0}return C.prototype._update=function(U){for(var q=this._w,H=this._ah|0,W=this._bh|0,Q=this._ch|0,re=this._dh|0,ce=this._eh|0,ne=this._fh|0,Y=this._gh|0,fe=this._hh|0,ge=this._al|0,$e=this._bl|0,_e=this._cl|0,ae=this._dl|0,X=this._el|0,F=this._fl|0,z=this._gl|0,J=this._hl|0,te=0;te<32;te+=2)q[te]=U.readInt32BE(te*4),q[te+1]=U.readInt32BE(te*4+4);for(;te<160;te+=2){var se=q[te-30],oe=q[te-15*2+1],ie=M(se,oe),G=O(oe,se);se=q[te-2*2],oe=q[te-2*2+1];var j=D(se,oe),ee=L(oe,se),pe=q[te-7*2],he=q[te-7*2+1],Se=q[te-16*2],we=q[te-16*2+1],xe=G+he|0,Ee=ie+pe+V(xe,G)|0;xe=xe+ee|0,Ee=Ee+j+V(xe,ee)|0,xe=xe+we|0,Ee=Ee+Se+V(xe,we)|0,q[te]=Ee,q[te+1]=xe}for(var ye=0;ye<160;ye+=2){Ee=q[ye],xe=q[ye+1];var Ce=A(H,W,Q),ve=A(ge,$e,_e),Be=B(H,ge),me=B(ge,H),Ie=I(ce,X),Ve=I(X,ce),Me=E[ye],Ne=E[ye+1],Pe=T(ce,ne,Y),He=T(X,F,z),We=J+Ve|0,Ke=fe+Ie+V(We,J)|0;We=We+He|0,Ke=Ke+Pe+V(We,He)|0,We=We+Ne|0,Ke=Ke+Me+V(We,Ne)|0,We=We+xe|0,Ke=Ke+Ee+V(We,xe)|0;var Ge=me+ve|0,nt=Be+Ce+V(Ge,me)|0;fe=Y,J=z,Y=ne,z=F,ne=ce,F=X,X=ae+We|0,ce=re+Ke+V(X,ae)|0,re=Q,ae=_e,Q=W,_e=$e,W=H,$e=ge,ge=We+Ge|0,H=Ke+nt+V(ge,We)|0}this._al=this._al+ge|0,this._bl=this._bl+$e|0,this._cl=this._cl+_e|0,this._dl=this._dl+ae|0,this._el=this._el+X|0,this._fl=this._fl+F|0,this._gl=this._gl+z|0,this._hl=this._hl+J|0,this._ah=this._ah+H+V(this._al,ge)|0,this._bh=this._bh+W+V(this._bl,$e)|0,this._ch=this._ch+Q+V(this._cl,_e)|0,this._dh=this._dh+re+V(this._dl,ae)|0,this._eh=this._eh+ce+V(this._el,X)|0,this._fh=this._fh+ne+V(this._fl,F)|0,this._gh=this._gh+Y+V(this._gl,z)|0,this._hh=this._hh+fe+V(this._hl,J)|0},C.prototype._hash=function(){var U=x.allocUnsafe(64);function q(H,W,Q){U.writeInt32BE(H,Q),U.writeInt32BE(W,Q+4)}return q(this._ah,this._al,0),q(this._bh,this._bl,8),q(this._ch,this._cl,16),q(this._dh,this._dl,24),q(this._eh,this._el,32),q(this._fh,this._fl,40),q(this._gh,this._gl,48),q(this._hh,this._hl,56),U},sha512$3=C,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var n=inherits_browserExports,_=requireSha512(),x=requireHash(),E=safeBufferExports.Buffer,S=new Array(160);function C(){this.init(),this._w=S,x.call(this,128,112)}return n(C,_),C.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},C.prototype._hash=function(){var T=E.allocUnsafe(48);function A(B,I,M){T.writeInt32BE(B,M),T.writeInt32BE(I,M+4)}return A(this._ah,this._al,0),A(this._bh,this._bl,8),A(this._ch,this._cl,16),A(this._dh,this._dl,24),A(this._eh,this._el,32),A(this._fh,this._fl,40),T},sha384$2=C,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var n=sha_js.exports=function(x){x=x.toLowerCase();var E=n[x];if(!E)throw new Error(x+" is not supported (we accept pull requests)");return new E};return n.sha=requireSha(),n.sha1=requireSha1(),n.sha224=requireSha224(),n.sha256=requireSha256(),n.sha384=requireSha384(),n.sha512=requireSha512(),sha_js.exports}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(n){var _={data:n,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length};BufferList.prototype.unshift=function(n){var _={data:n,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(n){if(this.length===0)return"";for(var _=this.head,x=""+_.data;_=_.next;)x+=n+_.data;return x};BufferList.prototype.concat=function(n){if(this.length===0)return buffer$3.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var _=buffer$3.Buffer.allocUnsafe(n>>>0),x=this.head,E=0;x;)x.data.copy(_,E),E+=x.data.length,x=x.next;return _};Readable.ReadableState=ReadableState;var debug$1=util$9.debuglog("stream");util$9.inherits(Readable,EventEmitter$5);function prependListener(n,_,x){if(typeof n.prependListener=="function")return n.prependListener(_,x);!n._events||!n._events[_]?n.on(_,x):Array.isArray(n._events[_])?n._events[_].unshift(x):n._events[_]=[x,n._events[_]]}function listenerCount(n,_){return n.listeners(_).length}function ReadableState(n,_){n=n||{},this.objectMode=!!n.objectMode,_ instanceof Duplex&&(this.objectMode=this.objectMode||!!n.readableObjectMode);var x=n.highWaterMark,E=this.objectMode?16:16*1024;this.highWaterMark=x||x===0?x:E,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(this.decoder=new StringDecoder_1(n.encoding),this.encoding=n.encoding)}function Readable(n){if(!(this instanceof Readable))return new Readable(n);this._readableState=new ReadableState(n,this),this.readable=!0,n&&typeof n.read=="function"&&(this._read=n.read),EventEmitter$5.call(this)}Readable.prototype.push=function(n,_){var x=this._readableState;return!x.objectMode&&typeof n=="string"&&(_=_||x.defaultEncoding,_!==x.encoding&&(n=Buffer$5.from(n,_),_="")),readableAddChunk(this,x,n,_,!1)};Readable.prototype.unshift=function(n){var _=this._readableState;return readableAddChunk(this,_,n,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(n,_,x,E,S){var C=chunkInvalid(_,x);if(C)n.emit("error",C);else if(x===null)_.reading=!1,onEofChunk(n,_);else if(_.objectMode||x&&x.length>0)if(_.ended&&!S){var T=new Error("stream.push() after EOF");n.emit("error",T)}else if(_.endEmitted&&S){var A=new Error("stream.unshift() after end event");n.emit("error",A)}else{var B;_.decoder&&!S&&!E&&(x=_.decoder.write(x),B=!_.objectMode&&x.length===0),S||(_.reading=!1),B||(_.flowing&&_.length===0&&!_.sync?(n.emit("data",x),n.read(0)):(_.length+=_.objectMode?1:x.length,S?_.buffer.unshift(x):_.buffer.push(x),_.needReadable&&emitReadable(n))),maybeReadMore(n,_)}else S||(_.reading=!1);return needMoreData(_)}function needMoreData(n){return!n.ended&&(n.needReadable||n.length<n.highWaterMark||n.length===0)}Readable.prototype.setEncoding=function(n){return this._readableState.decoder=new StringDecoder_1(n),this._readableState.encoding=n,this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){return n>=MAX_HWM?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,_){return n<=0||_.length===0&&_.ended?0:_.objectMode?1:n!==n?_.flowing&&_.length?_.buffer.head.data.length:_.length:(n>_.highWaterMark&&(_.highWaterMark=computeNewHighWaterMark(n)),n<=_.length?n:_.ended?_.length:(_.needReadable=!0,0))}Readable.prototype.read=function(n){debug$1("read",n),n=parseInt(n,10);var _=this._readableState,x=n;if(n!==0&&(_.emittedReadable=!1),n===0&&_.needReadable&&(_.length>=_.highWaterMark||_.ended))return debug$1("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,_),n===0&&_.ended)return _.length===0&&endReadable(this),null;var E=_.needReadable;debug$1("need readable",E),(_.length===0||_.length-n<_.highWaterMark)&&(E=!0,debug$1("length less than watermark",E)),_.ended||_.reading?(E=!1,debug$1("reading or ended",E)):E&&(debug$1("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(n=howMuchToRead(x,_)));var S;return n>0?S=fromList(n,_):S=null,S===null?(_.needReadable=!0,n=0):_.length-=n,_.length===0&&(_.ended||(_.needReadable=!0),x!==n&&_.ended&&endReadable(this)),S!==null&&this.emit("data",S),S};function chunkInvalid(n,_){var x=null;return!Buffer$5.isBuffer(_)&&typeof _!="string"&&_!==null&&_!==void 0&&!n.objectMode&&(x=new TypeError("Invalid non-string/buffer chunk")),x}function onEofChunk(n,_){if(!_.ended){if(_.decoder){var x=_.decoder.end();x&&x.length&&(_.buffer.push(x),_.length+=_.objectMode?1:x.length)}_.ended=!0,emitReadable(n)}}function emitReadable(n){var _=n._readableState;_.needReadable=!1,_.emittedReadable||(debug$1("emitReadable",_.flowing),_.emittedReadable=!0,_.sync?browserExports$1.nextTick(emitReadable_,n):emitReadable_(n))}function emitReadable_(n){debug$1("emit readable"),n.emit("readable"),flow(n)}function maybeReadMore(n,_){_.readingMore||(_.readingMore=!0,browserExports$1.nextTick(maybeReadMore_,n,_))}function maybeReadMore_(n,_){for(var x=_.length;!_.reading&&!_.flowing&&!_.ended&&_.length<_.highWaterMark&&(debug$1("maybeReadMore read 0"),n.read(0),x!==_.length);)x=_.length;_.readingMore=!1}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(n,_){var x=this,E=this._readableState;switch(E.pipesCount){case 0:E.pipes=n;break;case 1:E.pipes=[E.pipes,n];break;default:E.pipes.push(n);break}E.pipesCount+=1,debug$1("pipe count=%d opts=%j",E.pipesCount,_);var S=!_||_.end!==!1,C=S?A:M;E.endEmitted?browserExports$1.nextTick(C):x.once("end",C),n.on("unpipe",T);function T(H){debug$1("onunpipe"),H===x&&M()}function A(){debug$1("onend"),n.end()}var B=pipeOnDrain(x);n.on("drain",B);var I=!1;function M(){debug$1("cleanup"),n.removeListener("close",V),n.removeListener("finish",U),n.removeListener("drain",B),n.removeListener("error",L),n.removeListener("unpipe",T),x.removeListener("end",A),x.removeListener("end",M),x.removeListener("data",D),I=!0,E.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&B()}var O=!1;x.on("data",D);function D(H){debug$1("ondata"),O=!1;var W=n.write(H);W===!1&&!O&&((E.pipesCount===1&&E.pipes===n||E.pipesCount>1&&indexOf$1(E.pipes,n)!==-1)&&!I&&(debug$1("false write response, pause",x._readableState.awaitDrain),x._readableState.awaitDrain++,O=!0),x.pause())}function L(H){debug$1("onerror",H),q(),n.removeListener("error",L),listenerCount(n,"error")===0&&n.emit("error",H)}prependListener(n,"error",L);function V(){n.removeListener("finish",U),q()}n.once("close",V);function U(){debug$1("onfinish"),n.removeListener("close",V),q()}n.once("finish",U);function q(){debug$1("unpipe"),x.unpipe(n)}return n.emit("pipe",x),E.flowing||(debug$1("pipe resume"),x.resume()),n};function pipeOnDrain(n){return function(){var _=n._readableState;debug$1("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n.listeners("data").length&&(_.flowing=!0,flow(n))}}Readable.prototype.unpipe=function(n){var _=this._readableState;if(_.pipesCount===0)return this;if(_.pipesCount===1)return n&&n!==_.pipes?this:(n||(n=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,n&&n.emit("unpipe",this),this);if(!n){var x=_.pipes,E=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var S=0;S<E;S++)x[S].emit("unpipe",this);return this}var C=indexOf$1(_.pipes,n);return C===-1?this:(_.pipes.splice(C,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),n.emit("unpipe",this),this)};Readable.prototype.on=function(n,_){var x=EventEmitter$5.prototype.on.call(this,n,_);if(n==="data")this._readableState.flowing!==!1&&this.resume();else if(n==="readable"){var E=this._readableState;!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.emittedReadable=!1,E.reading?E.length&&emitReadable(this):browserExports$1.nextTick(nReadingNextTick,this))}return x};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(n){debug$1("readable nexttick read 0"),n.read(0)}Readable.prototype.resume=function(){var n=this._readableState;return n.flowing||(debug$1("resume"),n.flowing=!0,resume(this,n)),this};function resume(n,_){_.resumeScheduled||(_.resumeScheduled=!0,browserExports$1.nextTick(resume_,n,_))}function resume_(n,_){_.reading||(debug$1("resume read 0"),n.read(0)),_.resumeScheduled=!1,_.awaitDrain=0,n.emit("resume"),flow(n),_.flowing&&!_.reading&&n.read(0)}Readable.prototype.pause=function(){return debug$1("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug$1("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(n){var _=n._readableState;for(debug$1("flow",_.flowing);_.flowing&&n.read()!==null;);}Readable.prototype.wrap=function(n){var _=this._readableState,x=!1,E=this;n.on("end",function(){if(debug$1("wrapped end"),_.decoder&&!_.ended){var T=_.decoder.end();T&&T.length&&E.push(T)}E.push(null)}),n.on("data",function(T){if(debug$1("wrapped data"),_.decoder&&(T=_.decoder.write(T)),!(_.objectMode&&T==null)&&!(!_.objectMode&&(!T||!T.length))){var A=E.push(T);A||(x=!0,n.pause())}});for(var S in n)this[S]===void 0&&typeof n[S]=="function"&&(this[S]=function(T){return function(){return n[T].apply(n,arguments)}}(S));var C=["error","close","destroy","pause","resume"];return forEach$1(C,function(T){n.on(T,E.emit.bind(E,T))}),E._read=function(T){debug$1("wrapped _read",T),x&&(x=!1,n.resume())},E};Readable._fromList=fromList;function fromList(n,_){if(_.length===0)return null;var x;return _.objectMode?x=_.buffer.shift():!n||n>=_.length?(_.decoder?x=_.buffer.join(""):_.buffer.length===1?x=_.buffer.head.data:x=_.buffer.concat(_.length),_.buffer.clear()):x=fromListPartial(n,_.buffer,_.decoder),x}function fromListPartial(n,_,x){var E;return n<_.head.data.length?(E=_.head.data.slice(0,n),_.head.data=_.head.data.slice(n)):n===_.head.data.length?E=_.shift():E=x?copyFromBufferString(n,_):copyFromBuffer(n,_),E}function copyFromBufferString(n,_){var x=_.head,E=1,S=x.data;for(n-=S.length;x=x.next;){var C=x.data,T=n>C.length?C.length:n;if(T===C.length?S+=C:S+=C.slice(0,n),n-=T,n===0){T===C.length?(++E,x.next?_.head=x.next:_.head=_.tail=null):(_.head=x,x.data=C.slice(T));break}++E}return _.length-=E,S}function copyFromBuffer(n,_){var x=Buffer$5.allocUnsafe(n),E=_.head,S=1;for(E.data.copy(x),n-=E.data.length;E=E.next;){var C=E.data,T=n>C.length?C.length:n;if(C.copy(x,x.length-n,0,T),n-=T,n===0){T===C.length?(++S,E.next?_.head=E.next:_.head=_.tail=null):(_.head=E,E.data=C.slice(T));break}++S}return _.length-=S,x}function endReadable(n){var _=n._readableState;if(_.length>0)throw new Error('"endReadable()" called on non-empty stream');_.endEmitted||(_.ended=!0,browserExports$1.nextTick(endReadableNT,_,n))}function endReadableNT(n,_){!n.endEmitted&&n.length===0&&(n.endEmitted=!0,_.readable=!1,_.emit("end"))}function forEach$1(n,_){for(var x=0,E=n.length;x<E;x++)_(n[x],x)}function indexOf$1(n,_){for(var x=0,E=n.length;x<E;x++)if(n[x]===_)return x;return-1}Writable.WritableState=WritableState;util$9.inherits(Writable,eventsExports.EventEmitter);function nop(){}function WriteReq(n,_,x){this.chunk=n,this.encoding=_,this.callback=x,this.next=null}function WritableState(n,_){Object.defineProperty(this,"buffer",{get:util$9.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),n=n||{},this.objectMode=!!n.objectMode,_ instanceof Duplex&&(this.objectMode=this.objectMode||!!n.writableObjectMode);var x=n.highWaterMark,E=this.objectMode?16:16*1024;this.highWaterMark=x||x===0?x:E,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var S=n.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(C){onwrite(_,C)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var _=this.bufferedRequest,x=[];_;)x.push(_),_=_.next;return x};function Writable(n){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(n);this._writableState=new WritableState(n,this),this.writable=!0,n&&(typeof n.write=="function"&&(this._write=n.write),typeof n.writev=="function"&&(this._writev=n.writev)),eventsExports.EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(n,_){var x=new Error("write after end");n.emit("error",x),browserExports$1.nextTick(_,x)}function validChunk(n,_,x,E){var S=!0,C=!1;return x===null?C=new TypeError("May not write null values to stream"):!buffer$3.Buffer.isBuffer(x)&&typeof x!="string"&&x!==void 0&&!_.objectMode&&(C=new TypeError("Invalid non-string/buffer chunk")),C&&(n.emit("error",C),browserExports$1.nextTick(E,C),S=!1),S}Writable.prototype.write=function(n,_,x){var E=this._writableState,S=!1;return typeof _=="function"&&(x=_,_=null),buffer$3.Buffer.isBuffer(n)?_="buffer":_||(_=E.defaultEncoding),typeof x!="function"&&(x=nop),E.ended?writeAfterEnd(this,x):validChunk(this,E,n,x)&&(E.pendingcb++,S=writeOrBuffer(this,E,n,_,x)),S};Writable.prototype.cork=function(){var n=this._writableState;n.corked++};Writable.prototype.uncork=function(){var n=this._writableState;n.corked&&(n.corked--,!n.writing&&!n.corked&&!n.finished&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(this,n))};Writable.prototype.setDefaultEncoding=function(_){if(typeof _=="string"&&(_=_.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((_+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+_);return this._writableState.defaultEncoding=_,this};function decodeChunk(n,_,x){return!n.objectMode&&n.decodeStrings!==!1&&typeof _=="string"&&(_=buffer$3.Buffer.from(_,x)),_}function writeOrBuffer(n,_,x,E,S){x=decodeChunk(_,x,E),buffer$3.Buffer.isBuffer(x)&&(E="buffer");var C=_.objectMode?1:x.length;_.length+=C;var T=_.length<_.highWaterMark;if(T||(_.needDrain=!0),_.writing||_.corked){var A=_.lastBufferedRequest;_.lastBufferedRequest=new WriteReq(x,E,S),A?A.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1}else doWrite(n,_,!1,C,x,E,S);return T}function doWrite(n,_,x,E,S,C,T){_.writelen=E,_.writecb=T,_.writing=!0,_.sync=!0,x?n._writev(S,_.onwrite):n._write(S,C,_.onwrite),_.sync=!1}function onwriteError(n,_,x,E,S){--_.pendingcb,x?browserExports$1.nextTick(S,E):S(E),n._writableState.errorEmitted=!0,n.emit("error",E)}function onwriteStateUpdate(n){n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0}function onwrite(n,_){var x=n._writableState,E=x.sync,S=x.writecb;if(onwriteStateUpdate(x),_)onwriteError(n,x,E,_,S);else{var C=needFinish(x);!C&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&clearBuffer(n,x),E?browserExports$1.nextTick(afterWrite,n,x,C,S):afterWrite(n,x,C,S)}}function afterWrite(n,_,x,E){x||onwriteDrain(n,_),_.pendingcb--,E(),finishMaybe(n,_)}function onwriteDrain(n,_){_.length===0&&_.needDrain&&(_.needDrain=!1,n.emit("drain"))}function clearBuffer(n,_){_.bufferProcessing=!0;var x=_.bufferedRequest;if(n._writev&&x&&x.next){var E=_.bufferedRequestCount,S=new Array(E),C=_.corkedRequestsFree;C.entry=x;for(var T=0;x;)S[T]=x,x=x.next,T+=1;doWrite(n,_,!0,_.length,S,"",C.finish),_.pendingcb++,_.lastBufferedRequest=null,C.next?(_.corkedRequestsFree=C.next,C.next=null):_.corkedRequestsFree=new CorkedRequest(_)}else{for(;x;){var A=x.chunk,B=x.encoding,I=x.callback,M=_.objectMode?1:A.length;if(doWrite(n,_,!1,M,A,B,I),x=x.next,_.writing)break}x===null&&(_.lastBufferedRequest=null)}_.bufferedRequestCount=0,_.bufferedRequest=x,_.bufferProcessing=!1}Writable.prototype._write=function(n,_,x){x(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(n,_,x){var E=this._writableState;typeof n=="function"?(x=n,n=null,_=null):typeof _=="function"&&(x=_,_=null),n!=null&&this.write(n,_),E.corked&&(E.corked=1,this.uncork()),!E.ending&&!E.finished&&endWritable(this,E,x)};function needFinish(n){return n.ending&&n.length===0&&n.bufferedRequest===null&&!n.finished&&!n.writing}function prefinish(n,_){_.prefinished||(_.prefinished=!0,n.emit("prefinish"))}function finishMaybe(n,_){var x=needFinish(_);return x&&(_.pendingcb===0?(prefinish(n,_),_.finished=!0,n.emit("finish")):prefinish(n,_)),x}function endWritable(n,_,x){_.ending=!0,finishMaybe(n,_),x&&(_.finished?browserExports$1.nextTick(x):n.once("finish",x)),_.ended=!0,n.writable=!1}function CorkedRequest(n){var _=this;this.next=null,this.entry=null,this.finish=function(x){var E=_.entry;for(_.entry=null;E;){var S=E.callback;n.pendingcb--,S(x),E=E.next}n.corkedRequestsFree?n.corkedRequestsFree.next=_:n.corkedRequestsFree=_}}util$9.inherits(Duplex,Readable);var keys$2=Object.keys(Writable.prototype);for(var v=0;v<keys$2.length;v++){var method=keys$2[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(n){if(!(this instanceof Duplex))return new Duplex(n);Readable.call(this,n),Writable.call(this,n),n&&n.readable===!1&&(this.readable=!1),n&&n.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,n&&n.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||browserExports$1.nextTick(onEndNT,this)}function onEndNT(n){n.end()}util$9.inherits(Transform,Duplex);function TransformState(n){this.afterTransform=function(_,x){return afterTransform(n,_,x)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(n,_,x){var E=n._transformState;E.transforming=!1;var S=E.writecb;if(!S)return n.emit("error",new Error("no writecb in Transform class"));E.writechunk=null,E.writecb=null,x!=null&&n.push(x),S(_);var C=n._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&n._read(C.highWaterMark)}function Transform(n){if(!(this instanceof Transform))return new Transform(n);Duplex.call(this,n),this._transformState=new TransformState(this);var _=this;this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(x){done(_,x)}):done(_)})}Transform.prototype.push=function(n,_){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,n,_)};Transform.prototype._transform=function(n,_,x){throw new Error("Not implemented")};Transform.prototype._write=function(n,_,x){var E=this._transformState;if(E.writecb=x,E.writechunk=n,E.writeencoding=_,!E.transforming){var S=this._readableState;(E.needTransform||S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}};Transform.prototype._read=function(n){var _=this._transformState;_.writechunk!==null&&_.writecb&&!_.transforming?(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform)):_.needTransform=!0};function done(n,_){if(_)return n.emit("error",_);var x=n._writableState,E=n._transformState;if(x.length)throw new Error("Calling transform done when ws.length != 0");if(E.transforming)throw new Error("Calling transform done when still transforming");return n.push(null)}util$9.inherits(PassThrough,Transform);function PassThrough(n){if(!(this instanceof PassThrough))return new PassThrough(n);Transform.call(this,n)}PassThrough.prototype._transform=function(n,_,x){x(null,n)};util$9.inherits(Stream,EventEmitter$5);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter$5.call(this)}Stream.prototype.pipe=function(n,_){var x=this;function E(M){n.writable&&n.write(M)===!1&&x.pause&&x.pause()}x.on("data",E);function S(){x.readable&&x.resume&&x.resume()}n.on("drain",S),!n._isStdio&&(!_||_.end!==!1)&&(x.on("end",T),x.on("close",A));var C=!1;function T(){C||(C=!0,n.end())}function A(){C||(C=!0,typeof n.destroy=="function"&&n.destroy())}function B(M){if(I(),EventEmitter$5.listenerCount(this,"error")===0)throw M}x.on("error",B),n.on("error",B);function I(){x.removeListener("data",E),n.removeListener("drain",S),x.removeListener("end",T),x.removeListener("close",A),x.removeListener("error",B),n.removeListener("error",B),x.removeListener("end",I),x.removeListener("close",I),n.removeListener("close",I)}return x.on("end",I),x.on("close",I),n.on("close",I),n.emit("pipe",x),n};const stream$2=Object.freeze(Object.defineProperty({__proto__:null,Duplex,PassThrough,Readable,Stream,Transform,Writable,default:Stream},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(stream$2);var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var n=safeBufferExports.Buffer,_=require$$0$1.Transform,x=string_decoder.StringDecoder,E=inherits_browserExports;function S(C){_.call(this),this.hashMode=typeof C=="string",this.hashMode?this[C]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return E(S,_),S.prototype.update=function(C,T,A){typeof C=="string"&&(C=n.from(C,T));var B=this._update(C);return this.hashMode?this:(A&&(B=this._toString(B,A)),B)},S.prototype.setAutoPadding=function(){},S.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},S.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},S.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},S.prototype._transform=function(C,T,A){var B;try{this.hashMode?this._update(C):this.push(this._update(C))}catch(I){B=I}finally{A(B)}},S.prototype._flush=function(C){var T;try{this.push(this.__final())}catch(A){T=A}C(T)},S.prototype._finalOrDigest=function(C){var T=this.__final()||n.alloc(0);return C&&(T=this._toString(T,C,!0)),T},S.prototype._toString=function(C,T,A){if(this._decoder||(this._decoder=new x(T),this._encoding=T),this._encoding!==T)throw new Error("can't switch encodings");var B=this._decoder.write(C);return A&&(B+=this._decoder.end()),B},cipherBase=S,cipherBase}var browser$c,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$c;hasRequiredBrowser$9=1;var n=inherits_browserExports,_=requireMd5_js(),x=requireRipemd160(),E=requireSha_js(),S=requireCipherBase();function C(T){S.call(this,"digest"),this._hash=T}return n(C,S),C.prototype._update=function(T){this._hash.update(T)},C.prototype._final=function(){return this._hash.digest()},browser$c=function(A){return A=A.toLowerCase(),A==="md5"?new _:A==="rmd160"||A==="ripemd160"?new x:new C(E(A))},browser$c}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var n=inherits_browserExports,_=safeBufferExports.Buffer,x=requireCipherBase(),E=_.alloc(128),S=64;function C(T,A){x.call(this,"digest"),typeof A=="string"&&(A=_.from(A)),this._alg=T,this._key=A,A.length>S?A=T(A):A.length<S&&(A=_.concat([A,E],S));for(var B=this._ipad=_.allocUnsafe(S),I=this._opad=_.allocUnsafe(S),M=0;M<S;M++)B[M]=A[M]^54,I[M]=A[M]^92;this._hash=[B]}return n(C,x),C.prototype._update=function(T){this._hash.push(T)},C.prototype._final=function(){var T=this._alg(_.concat(this._hash));return this._alg(_.concat([this._opad,T]))},legacy=C,legacy}var md5$2,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5$2;hasRequiredMd5=1;var n=requireMd5_js();return md5$2=function(_){return new n().update(_).digest()},md5$2}var browser$b,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$b;hasRequiredBrowser$8=1;var n=inherits_browserExports,_=requireLegacy(),x=requireCipherBase(),E=safeBufferExports.Buffer,S=requireMd5(),C=requireRipemd160(),T=requireSha_js(),A=E.alloc(128);function B(I,M){x.call(this,"digest"),typeof M=="string"&&(M=E.from(M));var O=I==="sha512"||I==="sha384"?128:64;if(this._alg=I,this._key=M,M.length>O){var D=I==="rmd160"?new C:T(I);M=D.update(M).digest()}else M.length<O&&(M=E.concat([M,A],O));for(var L=this._ipad=E.allocUnsafe(O),V=this._opad=E.allocUnsafe(O),U=0;U<O;U++)L[U]=M[U]^54,V[U]=M[U]^92;this._hash=I==="rmd160"?new C:T(I),this._hash.update(L)}return n(B,x),B.prototype._update=function(I){this._hash.update(I)},B.prototype._final=function(){var I=this._hash.digest(),M=this._alg==="rmd160"?new C:T(this._alg);return M.update(this._opad).update(I).digest()},browser$b=function(M,O){return M=M.toLowerCase(),M==="rmd160"||M==="ripemd160"?new B("rmd160",O):M==="md5"?new _(S,O):new B(M,O)},browser$b}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$8={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$8,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$a={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var n=Math.pow(2,30)-1;return precondition=function(_,x){if(typeof _!="number")throw new TypeError("Iterations not a number");if(_<0)throw new TypeError("Bad iterations");if(typeof x!="number")throw new TypeError("Key length not a number");if(x<0||x>n||x!==x)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var n;if(commonjsGlobal.process&&commonjsGlobal.process.browser)n="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var _=parseInt(browser$1$1.version.split(".")[0].slice(1),10);n=_>=6?"utf-8":"binary"}else n="utf-8";return defaultEncoding_1=n,defaultEncoding_1}var toBuffer$1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer$1;hasRequiredToBuffer=1;var n=safeBufferExports.Buffer;return toBuffer$1=function(_,x,E){if(n.isBuffer(_))return _;if(typeof _=="string")return n.from(_,x);if(ArrayBuffer.isView(_))return n.from(_.buffer);throw new TypeError(E+" must be a string, a Buffer, a typed array or a DataView")},toBuffer$1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var n=requireMd5(),_=requireRipemd160(),x=requireSha_js(),E=safeBufferExports.Buffer,S=requirePrecondition(),C=requireDefaultEncoding(),T=requireToBuffer(),A=E.alloc(128),B={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function I(D,L,V){var U=M(D),q=D==="sha512"||D==="sha384"?128:64;L.length>q?L=U(L):L.length<q&&(L=E.concat([L,A],q));for(var H=E.allocUnsafe(q+B[D]),W=E.allocUnsafe(q+B[D]),Q=0;Q<q;Q++)H[Q]=L[Q]^54,W[Q]=L[Q]^92;var re=E.allocUnsafe(q+V+4);H.copy(re,0,0,q),this.ipad1=re,this.ipad2=H,this.opad=W,this.alg=D,this.blocksize=q,this.hash=U,this.size=B[D]}I.prototype.run=function(D,L){D.copy(L,this.blocksize);var V=this.hash(L);return V.copy(this.opad,this.blocksize),this.hash(this.opad)};function M(D){function L(U){return x(D).update(U).digest()}function V(U){return new _().update(U).digest()}return D==="rmd160"||D==="ripemd160"?V:D==="md5"?n:L}function O(D,L,V,U,q){S(V,U),D=T(D,C,"Password"),L=T(L,C,"Salt"),q=q||"sha1";var H=new I(q,D,L.length),W=E.allocUnsafe(U),Q=E.allocUnsafe(L.length+4);L.copy(Q,0,0,L.length);for(var re=0,ce=B[q],ne=Math.ceil(U/ce),Y=1;Y<=ne;Y++){Q.writeUInt32BE(Y,L.length);for(var fe=H.run(Q,H.ipad1),ge=fe,$e=1;$e<V;$e++){ge=H.run(ge,H.ipad2);for(var _e=0;_e<ce;_e++)fe[_e]^=ge[_e]}fe.copy(W,re),re+=ce}return W}return syncBrowser=O,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var n=safeBufferExports.Buffer,_=requirePrecondition(),x=requireDefaultEncoding(),E=requireSyncBrowser(),S=requireToBuffer(),C,T=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,A={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},B=[];function I(V){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!T||!T.importKey||!T.deriveBits)return Promise.resolve(!1);if(B[V]!==void 0)return B[V];C=C||n.alloc(8);var U=D(C,C,10,128,V).then(function(){return!0}).catch(function(){return!1});return B[V]=U,U}var M;function O(){return M||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?M=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?M=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?M=commonjsGlobal.setImmediate:M=commonjsGlobal.setTimeout,M)}function D(V,U,q,H,W){return T.importKey("raw",V,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Q){return T.deriveBits({name:"PBKDF2",salt:U,iterations:q,hash:{name:W}},Q,H<<3)}).then(function(Q){return n.from(Q)})}function L(V,U){V.then(function(q){O()(function(){U(null,q)})},function(q){O()(function(){U(q)})})}return async=function(V,U,q,H,W,Q){typeof W=="function"&&(Q=W,W=void 0),W=W||"sha1";var re=A[W.toLowerCase()];if(!re||typeof commonjsGlobal.Promise!="function"){O()(function(){var ce;try{ce=E(V,U,q,H,W)}catch(ne){return Q(ne)}Q(null,ce)});return}if(_(q,H),V=S(V,x,"Password"),U=S(U,x,"Salt"),typeof Q!="function")throw new Error("No callback provided to pbkdf2");L(I(re).then(function(ce){return ce?D(V,U,q,H,re):E(V,U,q,H,W)}),Q)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$a.pbkdf2=requireAsync(),browser$a.pbkdf2Sync=requireSyncBrowser()),browser$a}var browser$9={},des$1={},utils$q={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$q;hasRequiredUtils=1,utils$q.readUInt32BE=function(S,C){var T=S[0+C]<<24|S[1+C]<<16|S[2+C]<<8|S[3+C];return T>>>0},utils$q.writeUInt32BE=function(S,C,T){S[0+T]=C>>>24,S[1+T]=C>>>16&255,S[2+T]=C>>>8&255,S[3+T]=C&255},utils$q.ip=function(S,C,T,A){for(var B=0,I=0,M=6;M>=0;M-=2){for(var O=0;O<=24;O+=8)B<<=1,B|=C>>>O+M&1;for(var O=0;O<=24;O+=8)B<<=1,B|=S>>>O+M&1}for(var M=6;M>=0;M-=2){for(var O=1;O<=25;O+=8)I<<=1,I|=C>>>O+M&1;for(var O=1;O<=25;O+=8)I<<=1,I|=S>>>O+M&1}T[A+0]=B>>>0,T[A+1]=I>>>0},utils$q.rip=function(S,C,T,A){for(var B=0,I=0,M=0;M<4;M++)for(var O=24;O>=0;O-=8)B<<=1,B|=C>>>O+M&1,B<<=1,B|=S>>>O+M&1;for(var M=4;M<8;M++)for(var O=24;O>=0;O-=8)I<<=1,I|=C>>>O+M&1,I<<=1,I|=S>>>O+M&1;T[A+0]=B>>>0,T[A+1]=I>>>0},utils$q.pc1=function(S,C,T,A){for(var B=0,I=0,M=7;M>=5;M--){for(var O=0;O<=24;O+=8)B<<=1,B|=C>>O+M&1;for(var O=0;O<=24;O+=8)B<<=1,B|=S>>O+M&1}for(var O=0;O<=24;O+=8)B<<=1,B|=C>>O+M&1;for(var M=1;M<=3;M++){for(var O=0;O<=24;O+=8)I<<=1,I|=C>>O+M&1;for(var O=0;O<=24;O+=8)I<<=1,I|=S>>O+M&1}for(var O=0;O<=24;O+=8)I<<=1,I|=S>>O+M&1;T[A+0]=B>>>0,T[A+1]=I>>>0},utils$q.r28shl=function(S,C){return S<<C&268435455|S>>>28-C};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$q.pc2=function(S,C,T,A){for(var B=0,I=0,M=n.length>>>1,O=0;O<M;O++)B<<=1,B|=S>>>n[O]&1;for(var O=M;O<n.length;O++)I<<=1,I|=C>>>n[O]&1;T[A+0]=B>>>0,T[A+1]=I>>>0},utils$q.expand=function(S,C,T){var A=0,B=0;A=(S&1)<<5|S>>>27;for(var I=23;I>=15;I-=4)A<<=6,A|=S>>>I&63;for(var I=11;I>=3;I-=4)B|=S>>>I&63,B<<=6;B|=(S&31)<<1|S>>>31,C[T+0]=A>>>0,C[T+1]=B>>>0};var _=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$q.substitute=function(S,C){for(var T=0,A=0;A<4;A++){var B=S>>>18-A*6&63,I=_[A*64+B];T<<=4,T|=I}for(var A=0;A<4;A++){var B=C>>>18-A*6&63,I=_[4*64+A*64+B];T<<=4,T|=I}return T>>>0};var x=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$q.permute=function(S){for(var C=0,T=0;T<x.length;T++)C<<=1,C|=S>>>x[T]&1;return C>>>0},utils$q.padSplit=function(S,C,T){for(var A=S.toString(2);A.length<C;)A="0"+A;for(var B=[],I=0;I<C;I+=T)B.push(A.slice(I,I+T));return B.join(" ")},utils$q}var minimalisticAssert$1=assert$l;function assert$l(n,_){if(!n)throw new Error(_||"Assertion failed")}assert$l.equal=function(_,x,E){if(_!=x)throw new Error(E||"Assertion failed: "+_+" != "+x)};var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var n=minimalisticAssert$1;function _(x){this.options=x,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=x.padding!==!1}return cipher=_,_.prototype._init=function(){},_.prototype.update=function(E){return E.length===0?[]:this.type==="decrypt"?this._updateDecrypt(E):this._updateEncrypt(E)},_.prototype._buffer=function(E,S){for(var C=Math.min(this.buffer.length-this.bufferOff,E.length-S),T=0;T<C;T++)this.buffer[this.bufferOff+T]=E[S+T];return this.bufferOff+=C,C},_.prototype._flushBuffer=function(E,S){return this._update(this.buffer,0,E,S),this.bufferOff=0,this.blockSize},_.prototype._updateEncrypt=function(E){var S=0,C=0,T=(this.bufferOff+E.length)/this.blockSize|0,A=new Array(T*this.blockSize);this.bufferOff!==0&&(S+=this._buffer(E,S),this.bufferOff===this.buffer.length&&(C+=this._flushBuffer(A,C)));for(var B=E.length-(E.length-S)%this.blockSize;S<B;S+=this.blockSize)this._update(E,S,A,C),C+=this.blockSize;for(;S<E.length;S++,this.bufferOff++)this.buffer[this.bufferOff]=E[S];return A},_.prototype._updateDecrypt=function(E){for(var S=0,C=0,T=Math.ceil((this.bufferOff+E.length)/this.blockSize)-1,A=new Array(T*this.blockSize);T>0;T--)S+=this._buffer(E,S),C+=this._flushBuffer(A,C);return S+=this._buffer(E,S),A},_.prototype.final=function(E){var S;E&&(S=this.update(E));var C;return this.type==="encrypt"?C=this._finalEncrypt():C=this._finalDecrypt(),S?S.concat(C):C},_.prototype._pad=function(E,S){if(S===0)return!1;for(;S<E.length;)E[S++]=0;return!0},_.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var E=new Array(this.blockSize);return this._update(this.buffer,0,E,0),E},_.prototype._unpad=function(E){return E},_.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var E=new Array(this.blockSize);return this._flushBuffer(E,0),this._unpad(E)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var n=minimalisticAssert$1,_=inherits_browserExports,x=requireUtils(),E=requireCipher();function S(){this.tmp=new Array(2),this.keys=null}function C(A){E.call(this,A);var B=new S;this._desState=B,this.deriveKeys(B,A.key)}_(C,E),des=C,C.create=function(B){return new C(B)};var T=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return C.prototype.deriveKeys=function(B,I){B.keys=new Array(16*2),n.equal(I.length,this.blockSize,"Invalid key length");var M=x.readUInt32BE(I,0),O=x.readUInt32BE(I,4);x.pc1(M,O,B.tmp,0),M=B.tmp[0],O=B.tmp[1];for(var D=0;D<B.keys.length;D+=2){var L=T[D>>>1];M=x.r28shl(M,L),O=x.r28shl(O,L),x.pc2(M,O,B.keys,D)}},C.prototype._update=function(B,I,M,O){var D=this._desState,L=x.readUInt32BE(B,I),V=x.readUInt32BE(B,I+4);x.ip(L,V,D.tmp,0),L=D.tmp[0],V=D.tmp[1],this.type==="encrypt"?this._encrypt(D,L,V,D.tmp,0):this._decrypt(D,L,V,D.tmp,0),L=D.tmp[0],V=D.tmp[1],x.writeUInt32BE(M,L,O),x.writeUInt32BE(M,V,O+4)},C.prototype._pad=function(B,I){if(this.padding===!1)return!1;for(var M=B.length-I,O=I;O<B.length;O++)B[O]=M;return!0},C.prototype._unpad=function(B){if(this.padding===!1)return B;for(var I=B[B.length-1],M=B.length-I;M<B.length;M++)n.equal(B[M],I);return B.slice(0,B.length-I)},C.prototype._encrypt=function(B,I,M,O,D){for(var L=I,V=M,U=0;U<B.keys.length;U+=2){var q=B.keys[U],H=B.keys[U+1];x.expand(V,B.tmp,0),q^=B.tmp[0],H^=B.tmp[1];var W=x.substitute(q,H),Q=x.permute(W),re=V;V=(L^Q)>>>0,L=re}x.rip(V,L,O,D)},C.prototype._decrypt=function(B,I,M,O,D){for(var L=M,V=I,U=B.keys.length-2;U>=0;U-=2){var q=B.keys[U],H=B.keys[U+1];x.expand(L,B.tmp,0),q^=B.tmp[0],H^=B.tmp[1];var W=x.substitute(q,H),Q=x.permute(W),re=L;L=(V^Q)>>>0,V=re}x.rip(L,V,O,D)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var n=minimalisticAssert$1,_=inherits_browserExports,x={};function E(C){n.equal(C.length,8,"Invalid IV length"),this.iv=new Array(8);for(var T=0;T<this.iv.length;T++)this.iv[T]=C[T]}function S(C){function T(M){C.call(this,M),this._cbcInit()}_(T,C);for(var A=Object.keys(x),B=0;B<A.length;B++){var I=A[B];T.prototype[I]=x[I]}return T.create=function(O){return new T(O)},T}return cbc$1.instantiate=S,x._cbcInit=function(){var T=new E(this.options.iv);this._cbcState=T},x._update=function(T,A,B,I){var M=this._cbcState,O=this.constructor.super_.prototype,D=M.iv;if(this.type==="encrypt"){for(var L=0;L<this.blockSize;L++)D[L]^=T[A+L];O._update.call(this,D,0,B,I);for(var L=0;L<this.blockSize;L++)D[L]=B[I+L]}else{O._update.call(this,T,A,B,I);for(var L=0;L<this.blockSize;L++)B[I+L]^=D[L];for(var L=0;L<this.blockSize;L++)D[L]=T[A+L]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var n=minimalisticAssert$1,_=inherits_browserExports,x=requireCipher(),E=requireDes$1();function S(T,A){n.equal(A.length,24,"Invalid key length");var B=A.slice(0,8),I=A.slice(8,16),M=A.slice(16,24);T==="encrypt"?this.ciphers=[E.create({type:"encrypt",key:B}),E.create({type:"decrypt",key:I}),E.create({type:"encrypt",key:M})]:this.ciphers=[E.create({type:"decrypt",key:M}),E.create({type:"encrypt",key:I}),E.create({type:"decrypt",key:B})]}function C(T){x.call(this,T);var A=new S(this.type,this.options.key);this._edeState=A}return _(C,x),ede=C,C.create=function(A){return new C(A)},C.prototype._update=function(A,B,I,M){var O=this._edeState;O.ciphers[0]._update(A,B,I,M),O.ciphers[1]._update(I,M,I,M),O.ciphers[2]._update(I,M,I,M)},C.prototype._pad=E.prototype._pad,C.prototype._unpad=E.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var n=requireCipherBase(),_=requireDes(),x=inherits_browserExports,E=safeBufferExports.Buffer,S={"des-ede3-cbc":_.CBC.instantiate(_.EDE),"des-ede3":_.EDE,"des-ede-cbc":_.CBC.instantiate(_.EDE),"des-ede":_.EDE,"des-cbc":_.CBC.instantiate(_.DES),"des-ecb":_.DES};S.des=S["des-cbc"],S.des3=S["des-ede3-cbc"],browserifyDes=C,x(C,n);function C(T){n.call(this);var A=T.mode.toLowerCase(),B=S[A],I;T.decrypt?I="decrypt":I="encrypt";var M=T.key;E.isBuffer(M)||(M=E.from(M)),(A==="des-ede"||A==="des-ede-cbc")&&(M=E.concat([M,M.slice(0,8)]));var O=T.iv;E.isBuffer(O)||(O=E.from(O)),this._des=B.create({key:M,iv:O,type:I})}return C.prototype._update=function(T){return E.from(this._des.update(T))},C.prototype._final=function(){return E.from(this._des.final())},browserifyDes}var browser$8={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(n,_){return n._cipher.encryptBlock(_)},ecb.decrypt=function(n,_){return n._cipher.decryptBlock(_)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(_,x){for(var E=Math.min(_.length,x.length),S=new Buffer$5(E),C=0;C<E;++C)S[C]=_[C]^x[C];return S}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var n=requireBufferXor();return cbc.encrypt=function(_,x){var E=n(x,_._prev);return _._prev=_._cipher.encryptBlock(E),_._prev},cbc.decrypt=function(_,x){var E=_._prev;_._prev=x;var S=_._cipher.decryptBlock(x);return n(S,E)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var n=safeBufferExports.Buffer,_=requireBufferXor();function x(E,S,C){var T=S.length,A=_(S,E._cache);return E._cache=E._cache.slice(T),E._prev=n.concat([E._prev,C?S:A]),A}return cfb.encrypt=function(E,S,C){for(var T=n.allocUnsafe(0),A;S.length;)if(E._cache.length===0&&(E._cache=E._cipher.encryptBlock(E._prev),E._prev=n.allocUnsafe(0)),E._cache.length<=S.length)A=E._cache.length,T=n.concat([T,x(E,S.slice(0,A),C)]),S=S.slice(A);else{T=n.concat([T,x(E,S,C)]);break}return T},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var n=safeBufferExports.Buffer;function _(x,E,S){var C=x._cipher.encryptBlock(x._prev),T=C[0]^E;return x._prev=n.concat([x._prev.slice(1),n.from([S?E:T])]),T}return cfb8.encrypt=function(x,E,S){for(var C=E.length,T=n.allocUnsafe(C),A=-1;++A<C;)T[A]=_(x,E[A],S);return T},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var n=safeBufferExports.Buffer;function _(E,S,C){for(var T,A=-1,B=8,I=0,M,O;++A<B;)T=E._cipher.encryptBlock(E._prev),M=S&1<<7-A?128:0,O=T[0]^M,I+=(O&128)>>A%8,E._prev=x(E._prev,C?M:O);return I}function x(E,S){var C=E.length,T=-1,A=n.allocUnsafe(E.length);for(E=n.concat([E,n.from([S])]);++T<C;)A[T]=E[T]<<1|E[T+1]>>7;return A}return cfb1.encrypt=function(E,S,C){for(var T=S.length,A=n.allocUnsafe(T),B=-1;++B<T;)A[B]=_(E,S[B],C);return A},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var n=requireBufferXor();function _(x){return x._prev=x._cipher.encryptBlock(x._prev),x._prev}return ofb.encrypt=function(x,E){for(;x._cache.length<E.length;)x._cache=Buffer$5.concat([x._cache,_(x)]);var S=x._cache.slice(0,E.length);return x._cache=x._cache.slice(E.length),n(E,S)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function n(_){for(var x=_.length,E;x--;)if(E=_.readUInt8(x),E===255)_.writeUInt8(0,x);else{E++,_.writeUInt8(E,x);break}}return incr32_1=n,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var n=requireBufferXor(),_=safeBufferExports.Buffer,x=requireIncr32();function E(C){var T=C._cipher.encryptBlockRaw(C._prev);return x(C._prev),T}var S=16;return ctr.encrypt=function(C,T){var A=Math.ceil(T.length/S),B=C._cache.length;C._cache=_.concat([C._cache,_.allocUnsafe(A*S)]);for(var I=0;I<A;I++){var M=E(C),O=B+I*S;C._cache.writeUInt32BE(M[0],O+0),C._cache.writeUInt32BE(M[1],O+4),C._cache.writeUInt32BE(M[2],O+8),C._cache.writeUInt32BE(M[3],O+12)}var D=C._cache.slice(0,T.length);return C._cache=C._cache.slice(T.length),n(T,D)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var n={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},_=require$$2;for(var x in _)_[x].module=n[_[x].mode];return modes_1=_,modes_1}var aes$1={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes$1;hasRequiredAes=1;var n=safeBufferExports.Buffer;function _(A){n.isBuffer(A)||(A=n.from(A));for(var B=A.length/4|0,I=new Array(B),M=0;M<B;M++)I[M]=A.readUInt32BE(M*4);return I}function x(A){for(var B=0;B<A.length;A++)A[B]=0}function E(A,B,I,M,O){for(var D=I[0],L=I[1],V=I[2],U=I[3],q=A[0]^B[0],H=A[1]^B[1],W=A[2]^B[2],Q=A[3]^B[3],re,ce,ne,Y,fe=4,ge=1;ge<O;ge++)re=D[q>>>24]^L[H>>>16&255]^V[W>>>8&255]^U[Q&255]^B[fe++],ce=D[H>>>24]^L[W>>>16&255]^V[Q>>>8&255]^U[q&255]^B[fe++],ne=D[W>>>24]^L[Q>>>16&255]^V[q>>>8&255]^U[H&255]^B[fe++],Y=D[Q>>>24]^L[q>>>16&255]^V[H>>>8&255]^U[W&255]^B[fe++],q=re,H=ce,W=ne,Q=Y;return re=(M[q>>>24]<<24|M[H>>>16&255]<<16|M[W>>>8&255]<<8|M[Q&255])^B[fe++],ce=(M[H>>>24]<<24|M[W>>>16&255]<<16|M[Q>>>8&255]<<8|M[q&255])^B[fe++],ne=(M[W>>>24]<<24|M[Q>>>16&255]<<16|M[q>>>8&255]<<8|M[H&255])^B[fe++],Y=(M[Q>>>24]<<24|M[q>>>16&255]<<16|M[H>>>8&255]<<8|M[W&255])^B[fe++],re=re>>>0,ce=ce>>>0,ne=ne>>>0,Y=Y>>>0,[re,ce,ne,Y]}var S=[0,1,2,4,8,16,32,64,128,27,54],C=function(){for(var A=new Array(256),B=0;B<256;B++)B<128?A[B]=B<<1:A[B]=B<<1^283;for(var I=[],M=[],O=[[],[],[],[]],D=[[],[],[],[]],L=0,V=0,U=0;U<256;++U){var q=V^V<<1^V<<2^V<<3^V<<4;q=q>>>8^q&255^99,I[L]=q,M[q]=L;var H=A[L],W=A[H],Q=A[W],re=A[q]*257^q*16843008;O[0][L]=re<<24|re>>>8,O[1][L]=re<<16|re>>>16,O[2][L]=re<<8|re>>>24,O[3][L]=re,re=Q*16843009^W*65537^H*257^L*16843008,D[0][q]=re<<24|re>>>8,D[1][q]=re<<16|re>>>16,D[2][q]=re<<8|re>>>24,D[3][q]=re,L===0?L=V=1:(L=H^A[A[A[Q^H]]],V^=A[A[V]])}return{SBOX:I,INV_SBOX:M,SUB_MIX:O,INV_SUB_MIX:D}}();function T(A){this._key=_(A),this._reset()}return T.blockSize=4*4,T.keySize=256/8,T.prototype.blockSize=T.blockSize,T.prototype.keySize=T.keySize,T.prototype._reset=function(){for(var A=this._key,B=A.length,I=B+6,M=(I+1)*4,O=[],D=0;D<B;D++)O[D]=A[D];for(D=B;D<M;D++){var L=O[D-1];D%B===0?(L=L<<8|L>>>24,L=C.SBOX[L>>>24]<<24|C.SBOX[L>>>16&255]<<16|C.SBOX[L>>>8&255]<<8|C.SBOX[L&255],L^=S[D/B|0]<<24):B>6&&D%B===4&&(L=C.SBOX[L>>>24]<<24|C.SBOX[L>>>16&255]<<16|C.SBOX[L>>>8&255]<<8|C.SBOX[L&255]),O[D]=O[D-B]^L}for(var V=[],U=0;U<M;U++){var q=M-U,H=O[q-(U%4?0:4)];U<4||q<=4?V[U]=H:V[U]=C.INV_SUB_MIX[0][C.SBOX[H>>>24]]^C.INV_SUB_MIX[1][C.SBOX[H>>>16&255]]^C.INV_SUB_MIX[2][C.SBOX[H>>>8&255]]^C.INV_SUB_MIX[3][C.SBOX[H&255]]}this._nRounds=I,this._keySchedule=O,this._invKeySchedule=V},T.prototype.encryptBlockRaw=function(A){return A=_(A),E(A,this._keySchedule,C.SUB_MIX,C.SBOX,this._nRounds)},T.prototype.encryptBlock=function(A){var B=this.encryptBlockRaw(A),I=n.allocUnsafe(16);return I.writeUInt32BE(B[0],0),I.writeUInt32BE(B[1],4),I.writeUInt32BE(B[2],8),I.writeUInt32BE(B[3],12),I},T.prototype.decryptBlock=function(A){A=_(A);var B=A[1];A[1]=A[3],A[3]=B;var I=E(A,this._invKeySchedule,C.INV_SUB_MIX,C.INV_SBOX,this._nRounds),M=n.allocUnsafe(16);return M.writeUInt32BE(I[0],0),M.writeUInt32BE(I[3],4),M.writeUInt32BE(I[2],8),M.writeUInt32BE(I[1],12),M},T.prototype.scrub=function(){x(this._keySchedule),x(this._invKeySchedule),x(this._key)},aes$1.AES=T,aes$1}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var n=safeBufferExports.Buffer,_=n.alloc(16,0);function x(C){return[C.readUInt32BE(0),C.readUInt32BE(4),C.readUInt32BE(8),C.readUInt32BE(12)]}function E(C){var T=n.allocUnsafe(16);return T.writeUInt32BE(C[0]>>>0,0),T.writeUInt32BE(C[1]>>>0,4),T.writeUInt32BE(C[2]>>>0,8),T.writeUInt32BE(C[3]>>>0,12),T}function S(C){this.h=C,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}return S.prototype.ghash=function(C){for(var T=-1;++T<C.length;)this.state[T]^=C[T];this._multiply()},S.prototype._multiply=function(){for(var C=x(this.h),T=[0,0,0,0],A,B,I,M=-1;++M<128;){for(B=(this.state[~~(M/8)]&1<<7-M%8)!==0,B&&(T[0]^=C[0],T[1]^=C[1],T[2]^=C[2],T[3]^=C[3]),I=(C[3]&1)!==0,A=3;A>0;A--)C[A]=C[A]>>>1|(C[A-1]&1)<<31;C[0]=C[0]>>>1,I&&(C[0]=C[0]^225<<24)}this.state=E(T)},S.prototype.update=function(C){this.cache=n.concat([this.cache,C]);for(var T;this.cache.length>=16;)T=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(T)},S.prototype.final=function(C,T){return this.cache.length&&this.ghash(n.concat([this.cache,_],16)),this.ghash(E([0,C,0,T])),this.state},ghash=S,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var n=requireAes(),_=safeBufferExports.Buffer,x=requireCipherBase(),E=inherits_browserExports,S=requireGhash(),C=requireBufferXor(),T=requireIncr32();function A(M,O){var D=0;M.length!==O.length&&D++;for(var L=Math.min(M.length,O.length),V=0;V<L;++V)D+=M[V]^O[V];return D}function B(M,O,D){if(O.length===12)return M._finID=_.concat([O,_.from([0,0,0,1])]),_.concat([O,_.from([0,0,0,2])]);var L=new S(D),V=O.length,U=V%16;L.update(O),U&&(U=16-U,L.update(_.alloc(U,0))),L.update(_.alloc(8,0));var q=V*8,H=_.alloc(8);H.writeUIntBE(q,0,8),L.update(H),M._finID=L.state;var W=_.from(M._finID);return T(W),W}function I(M,O,D,L){x.call(this);var V=_.alloc(4,0);this._cipher=new n.AES(O);var U=this._cipher.encryptBlock(V);this._ghash=new S(U),D=B(this,D,U),this._prev=_.from(D),this._cache=_.allocUnsafe(0),this._secCache=_.allocUnsafe(0),this._decrypt=L,this._alen=0,this._len=0,this._mode=M,this._authTag=null,this._called=!1}return E(I,x),I.prototype._update=function(M){if(!this._called&&this._alen){var O=16-this._alen%16;O<16&&(O=_.alloc(O,0),this._ghash.update(O))}this._called=!0;var D=this._mode.encrypt(this,M);return this._decrypt?this._ghash.update(M):this._ghash.update(D),this._len+=M.length,D},I.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var M=C(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&A(M,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=M,this._cipher.scrub()},I.prototype.getAuthTag=function(){if(this._decrypt||!_.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},I.prototype.setAuthTag=function(O){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=O},I.prototype.setAAD=function(O){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(O),this._alen+=O.length},authCipher=I,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var n=requireAes(),_=safeBufferExports.Buffer,x=requireCipherBase(),E=inherits_browserExports;function S(C,T,A,B){x.call(this),this._cipher=new n.AES(T),this._prev=_.from(A),this._cache=_.allocUnsafe(0),this._secCache=_.allocUnsafe(0),this._decrypt=B,this._mode=C}return E(S,x),S.prototype._update=function(C){return this._mode.encrypt(this,C,this._decrypt)},S.prototype._final=function(){this._cipher.scrub()},streamCipher=S,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var n=safeBufferExports.Buffer,_=requireMd5_js();function x(E,S,C,T){if(n.isBuffer(E)||(E=n.from(E,"binary")),S&&(n.isBuffer(S)||(S=n.from(S,"binary")),S.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var A=C/8,B=n.alloc(A),I=n.alloc(T||0),M=n.alloc(0);A>0||T>0;){var O=new _;O.update(M),O.update(E),S&&O.update(S),M=O.digest();var D=0;if(A>0){var L=B.length-A;D=Math.min(A,M.length),M.copy(B,L,0,D),A-=D}if(D<M.length&&T>0){var V=I.length-T,U=Math.min(T,M.length-D);M.copy(I,V,D,D+U),T-=U}}return M.fill(0),{key:B,iv:I}}return evp_bytestokey=x,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var n=requireModes$1(),_=requireAuthCipher(),x=safeBufferExports.Buffer,E=requireStreamCipher(),S=requireCipherBase(),C=requireAes(),T=requireEvp_bytestokey(),A=inherits_browserExports;function B(L,V,U){S.call(this),this._cache=new M,this._cipher=new C.AES(V),this._prev=x.from(U),this._mode=L,this._autopadding=!0}A(B,S),B.prototype._update=function(L){this._cache.add(L);for(var V,U,q=[];V=this._cache.get();)U=this._mode.encrypt(this,V),q.push(U);return x.concat(q)};var I=x.alloc(16,16);B.prototype._final=function(){var L=this._cache.flush();if(this._autopadding)return L=this._mode.encrypt(this,L),this._cipher.scrub(),L;if(!L.equals(I))throw this._cipher.scrub(),new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(L){return this._autopadding=!!L,this};function M(){this.cache=x.allocUnsafe(0)}M.prototype.add=function(L){this.cache=x.concat([this.cache,L])},M.prototype.get=function(){if(this.cache.length>15){var L=this.cache.slice(0,16);return this.cache=this.cache.slice(16),L}return null},M.prototype.flush=function(){for(var L=16-this.cache.length,V=x.allocUnsafe(L),U=-1;++U<L;)V.writeUInt8(L,U);return x.concat([this.cache,V])};function O(L,V,U){var q=n[L.toLowerCase()];if(!q)throw new TypeError("invalid suite type");if(typeof V=="string"&&(V=x.from(V)),V.length!==q.key/8)throw new TypeError("invalid key length "+V.length);if(typeof U=="string"&&(U=x.from(U)),q.mode!=="GCM"&&U.length!==q.iv)throw new TypeError("invalid iv length "+U.length);return q.type==="stream"?new E(q.module,V,U):q.type==="auth"?new _(q.module,V,U):new B(q.module,V,U)}function D(L,V){var U=n[L.toLowerCase()];if(!U)throw new TypeError("invalid suite type");var q=T(V,!1,U.key,U.iv);return O(L,q.key,q.iv)}return encrypter.createCipheriv=O,encrypter.createCipher=D,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var n=requireAuthCipher(),_=safeBufferExports.Buffer,x=requireModes$1(),E=requireStreamCipher(),S=requireCipherBase(),C=requireAes(),T=requireEvp_bytestokey(),A=inherits_browserExports;function B(L,V,U){S.call(this),this._cache=new I,this._last=void 0,this._cipher=new C.AES(V),this._prev=_.from(U),this._mode=L,this._autopadding=!0}A(B,S),B.prototype._update=function(L){this._cache.add(L);for(var V,U,q=[];V=this._cache.get(this._autopadding);)U=this._mode.decrypt(this,V),q.push(U);return _.concat(q)},B.prototype._final=function(){var L=this._cache.flush();if(this._autopadding)return M(this._mode.decrypt(this,L));if(L)throw new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(L){return this._autopadding=!!L,this};function I(){this.cache=_.allocUnsafe(0)}I.prototype.add=function(L){this.cache=_.concat([this.cache,L])},I.prototype.get=function(L){var V;if(L){if(this.cache.length>16)return V=this.cache.slice(0,16),this.cache=this.cache.slice(16),V}else if(this.cache.length>=16)return V=this.cache.slice(0,16),this.cache=this.cache.slice(16),V;return null},I.prototype.flush=function(){if(this.cache.length)return this.cache};function M(L){var V=L[15];if(V<1||V>16)throw new Error("unable to decrypt data");for(var U=-1;++U<V;)if(L[U+(16-V)]!==V)throw new Error("unable to decrypt data");if(V!==16)return L.slice(0,16-V)}function O(L,V,U){var q=x[L.toLowerCase()];if(!q)throw new TypeError("invalid suite type");if(typeof U=="string"&&(U=_.from(U)),q.mode!=="GCM"&&U.length!==q.iv)throw new TypeError("invalid iv length "+U.length);if(typeof V=="string"&&(V=_.from(V)),V.length!==q.key/8)throw new TypeError("invalid key length "+V.length);return q.type==="stream"?new E(q.module,V,U,!0):q.type==="auth"?new n(q.module,V,U,!0):new B(q.module,V,U)}function D(L,V){var U=x[L.toLowerCase()];if(!U)throw new TypeError("invalid suite type");var q=T(V,!1,U.key,U.iv);return O(L,q.key,q.iv)}return decrypter.createDecipher=D,decrypter.createDecipheriv=O,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$8;hasRequiredBrowser$6=1;var n=requireEncrypter(),_=requireDecrypter(),x=require$$2;function E(){return Object.keys(x)}return browser$8.createCipher=browser$8.Cipher=n.createCipher,browser$8.createCipheriv=browser$8.Cipheriv=n.createCipheriv,browser$8.createDecipher=browser$8.Decipher=_.createDecipher,browser$8.createDecipheriv=browser$8.Decipheriv=_.createDecipheriv,browser$8.listCiphers=browser$8.getCiphers=E,browser$8}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(n){n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$9;hasRequiredBrowser$5=1;var n=requireBrowserifyDes(),_=requireBrowser$6(),x=requireModes$1(),E=requireModes(),S=requireEvp_bytestokey();function C(M,O){M=M.toLowerCase();var D,L;if(x[M])D=x[M].key,L=x[M].iv;else if(E[M])D=E[M].key*8,L=E[M].iv;else throw new TypeError("invalid suite type");var V=S(O,!1,D,L);return A(M,V.key,V.iv)}function T(M,O){M=M.toLowerCase();var D,L;if(x[M])D=x[M].key,L=x[M].iv;else if(E[M])D=E[M].key*8,L=E[M].iv;else throw new TypeError("invalid suite type");var V=S(O,!1,D,L);return B(M,V.key,V.iv)}function A(M,O,D){if(M=M.toLowerCase(),x[M])return _.createCipheriv(M,O,D);if(E[M])return new n({key:O,iv:D,mode:M});throw new TypeError("invalid suite type")}function B(M,O,D){if(M=M.toLowerCase(),x[M])return _.createDecipheriv(M,O,D);if(E[M])return new n({key:O,iv:D,mode:M,decrypt:!0});throw new TypeError("invalid suite type")}function I(){return Object.keys(E).concat(_.getCiphers())}return browser$9.createCipher=browser$9.Cipher=C,browser$9.createCipheriv=browser$9.Cipheriv=A,browser$9.createDecipher=browser$9.Decipher=T,browser$9.createDecipheriv=browser$9.Decipheriv=B,browser$9.listCiphers=browser$9.getCiphers=I,browser$9}var browser$7={},bn$4={exports:{}};bn$4.exports;(function(n){(function(_,x){function E(_e,ae){if(!_e)throw new Error(ae||"Assertion failed")}function S(_e,ae){_e.super_=ae;var X=function(){};X.prototype=ae.prototype,_e.prototype=new X,_e.prototype.constructor=_e}function C(_e,ae,X){if(C.isBN(_e))return _e;this.negative=0,this.words=null,this.length=0,this.red=null,_e!==null&&((ae==="le"||ae==="be")&&(X=ae,ae=10),this._init(_e||0,ae||10,X||"be"))}typeof _=="object"?_.exports=C:x.BN=C,C.BN=C,C.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=require$$0$2.Buffer}catch{}C.isBN=function(ae){return ae instanceof C?!0:ae!==null&&typeof ae=="object"&&ae.constructor.wordSize===C.wordSize&&Array.isArray(ae.words)},C.max=function(ae,X){return ae.cmp(X)>0?ae:X},C.min=function(ae,X){return ae.cmp(X)<0?ae:X},C.prototype._init=function(ae,X,F){if(typeof ae=="number")return this._initNumber(ae,X,F);if(typeof ae=="object")return this._initArray(ae,X,F);X==="hex"&&(X=16),E(X===(X|0)&&X>=2&&X<=36),ae=ae.toString().replace(/\s+/g,"");var z=0;ae[0]==="-"&&(z++,this.negative=1),z<ae.length&&(X===16?this._parseHex(ae,z,F):(this._parseBase(ae,X,z),F==="le"&&this._initArray(this.toArray(),X,F)))},C.prototype._initNumber=function(ae,X,F){ae<0&&(this.negative=1,ae=-ae),ae<67108864?(this.words=[ae&67108863],this.length=1):ae<4503599627370496?(this.words=[ae&67108863,ae/67108864&67108863],this.length=2):(E(ae<9007199254740992),this.words=[ae&67108863,ae/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),X,F)},C.prototype._initArray=function(ae,X,F){if(E(typeof ae.length=="number"),ae.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ae.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var J,te,se=0;if(F==="be")for(z=ae.length-1,J=0;z>=0;z-=3)te=ae[z]|ae[z-1]<<8|ae[z-2]<<16,this.words[J]|=te<<se&67108863,this.words[J+1]=te>>>26-se&67108863,se+=24,se>=26&&(se-=26,J++);else if(F==="le")for(z=0,J=0;z<ae.length;z+=3)te=ae[z]|ae[z+1]<<8|ae[z+2]<<16,this.words[J]|=te<<se&67108863,this.words[J+1]=te>>>26-se&67108863,se+=24,se>=26&&(se-=26,J++);return this.strip()};function A(_e,ae){var X=_e.charCodeAt(ae);return X>=65&&X<=70?X-55:X>=97&&X<=102?X-87:X-48&15}function B(_e,ae,X){var F=A(_e,X);return X-1>=ae&&(F|=A(_e,X-1)<<4),F}C.prototype._parseHex=function(ae,X,F){this.length=Math.ceil((ae.length-X)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var J=0,te=0,se;if(F==="be")for(z=ae.length-1;z>=X;z-=2)se=B(ae,X,z)<<J,this.words[te]|=se&67108863,J>=18?(J-=18,te+=1,this.words[te]|=se>>>26):J+=8;else{var oe=ae.length-X;for(z=oe%2===0?X+1:X;z<ae.length;z+=2)se=B(ae,X,z)<<J,this.words[te]|=se&67108863,J>=18?(J-=18,te+=1,this.words[te]|=se>>>26):J+=8}this.strip()};function I(_e,ae,X,F){for(var z=0,J=Math.min(_e.length,X),te=ae;te<J;te++){var se=_e.charCodeAt(te)-48;z*=F,se>=49?z+=se-49+10:se>=17?z+=se-17+10:z+=se}return z}C.prototype._parseBase=function(ae,X,F){this.words=[0],this.length=1;for(var z=0,J=1;J<=67108863;J*=X)z++;z--,J=J/X|0;for(var te=ae.length-F,se=te%z,oe=Math.min(te,te-se)+F,ie=0,G=F;G<oe;G+=z)ie=I(ae,G,G+z,X),this.imuln(J),this.words[0]+ie<67108864?this.words[0]+=ie:this._iaddn(ie);if(se!==0){var j=1;for(ie=I(ae,G,ae.length,X),G=0;G<se;G++)j*=X;this.imuln(j),this.words[0]+ie<67108864?this.words[0]+=ie:this._iaddn(ie)}this.strip()},C.prototype.copy=function(ae){ae.words=new Array(this.length);for(var X=0;X<this.length;X++)ae.words[X]=this.words[X];ae.length=this.length,ae.negative=this.negative,ae.red=this.red},C.prototype.clone=function(){var ae=new C(null);return this.copy(ae),ae},C.prototype._expand=function(ae){for(;this.length<ae;)this.words[this.length++]=0;return this},C.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},C.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},C.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],D=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];C.prototype.toString=function(ae,X){ae=ae||10,X=X|0||1;var F;if(ae===16||ae==="hex"){F="";for(var z=0,J=0,te=0;te<this.length;te++){var se=this.words[te],oe=((se<<z|J)&16777215).toString(16);J=se>>>24-z&16777215,J!==0||te!==this.length-1?F=M[6-oe.length]+oe+F:F=oe+F,z+=2,z>=26&&(z-=26,te--)}for(J!==0&&(F=J.toString(16)+F);F.length%X!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(ae===(ae|0)&&ae>=2&&ae<=36){var ie=O[ae],G=D[ae];F="";var j=this.clone();for(j.negative=0;!j.isZero();){var ee=j.modn(G).toString(ae);j=j.idivn(G),j.isZero()?F=ee+F:F=M[ie-ee.length]+ee+F}for(this.isZero()&&(F="0"+F);F.length%X!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}E(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var ae=this.words[0];return this.length===2?ae+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ae+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ae:ae},C.prototype.toJSON=function(){return this.toString(16)},C.prototype.toBuffer=function(ae,X){return E(typeof T<"u"),this.toArrayLike(T,ae,X)},C.prototype.toArray=function(ae,X){return this.toArrayLike(Array,ae,X)},C.prototype.toArrayLike=function(ae,X,F){var z=this.byteLength(),J=F||Math.max(1,z);E(z<=J,"byte array longer than desired length"),E(J>0,"Requested array length <= 0"),this.strip();var te=X==="le",se=new ae(J),oe,ie,G=this.clone();if(te){for(ie=0;!G.isZero();ie++)oe=G.andln(255),G.iushrn(8),se[ie]=oe;for(;ie<J;ie++)se[ie]=0}else{for(ie=0;ie<J-z;ie++)se[ie]=0;for(ie=0;!G.isZero();ie++)oe=G.andln(255),G.iushrn(8),se[J-ie-1]=oe}return se},Math.clz32?C.prototype._countBits=function(ae){return 32-Math.clz32(ae)}:C.prototype._countBits=function(ae){var X=ae,F=0;return X>=4096&&(F+=13,X>>>=13),X>=64&&(F+=7,X>>>=7),X>=8&&(F+=4,X>>>=4),X>=2&&(F+=2,X>>>=2),F+X},C.prototype._zeroBits=function(ae){if(ae===0)return 26;var X=ae,F=0;return X&8191||(F+=13,X>>>=13),X&127||(F+=7,X>>>=7),X&15||(F+=4,X>>>=4),X&3||(F+=2,X>>>=2),X&1||F++,F},C.prototype.bitLength=function(){var ae=this.words[this.length-1],X=this._countBits(ae);return(this.length-1)*26+X};function L(_e){for(var ae=new Array(_e.bitLength()),X=0;X<ae.length;X++){var F=X/26|0,z=X%26;ae[X]=(_e.words[F]&1<<z)>>>z}return ae}C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ae=0,X=0;X<this.length;X++){var F=this._zeroBits(this.words[X]);if(ae+=F,F!==26)break}return ae},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(ae){return this.negative!==0?this.abs().inotn(ae).iaddn(1):this.clone()},C.prototype.fromTwos=function(ae){return this.testn(ae-1)?this.notn(ae).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return this.negative!==0},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(ae){for(;this.length<ae.length;)this.words[this.length++]=0;for(var X=0;X<ae.length;X++)this.words[X]=this.words[X]|ae.words[X];return this.strip()},C.prototype.ior=function(ae){return E((this.negative|ae.negative)===0),this.iuor(ae)},C.prototype.or=function(ae){return this.length>ae.length?this.clone().ior(ae):ae.clone().ior(this)},C.prototype.uor=function(ae){return this.length>ae.length?this.clone().iuor(ae):ae.clone().iuor(this)},C.prototype.iuand=function(ae){var X;this.length>ae.length?X=ae:X=this;for(var F=0;F<X.length;F++)this.words[F]=this.words[F]&ae.words[F];return this.length=X.length,this.strip()},C.prototype.iand=function(ae){return E((this.negative|ae.negative)===0),this.iuand(ae)},C.prototype.and=function(ae){return this.length>ae.length?this.clone().iand(ae):ae.clone().iand(this)},C.prototype.uand=function(ae){return this.length>ae.length?this.clone().iuand(ae):ae.clone().iuand(this)},C.prototype.iuxor=function(ae){var X,F;this.length>ae.length?(X=this,F=ae):(X=ae,F=this);for(var z=0;z<F.length;z++)this.words[z]=X.words[z]^F.words[z];if(this!==X)for(;z<X.length;z++)this.words[z]=X.words[z];return this.length=X.length,this.strip()},C.prototype.ixor=function(ae){return E((this.negative|ae.negative)===0),this.iuxor(ae)},C.prototype.xor=function(ae){return this.length>ae.length?this.clone().ixor(ae):ae.clone().ixor(this)},C.prototype.uxor=function(ae){return this.length>ae.length?this.clone().iuxor(ae):ae.clone().iuxor(this)},C.prototype.inotn=function(ae){E(typeof ae=="number"&&ae>=0);var X=Math.ceil(ae/26)|0,F=ae%26;this._expand(X),F>0&&X--;for(var z=0;z<X;z++)this.words[z]=~this.words[z]&67108863;return F>0&&(this.words[z]=~this.words[z]&67108863>>26-F),this.strip()},C.prototype.notn=function(ae){return this.clone().inotn(ae)},C.prototype.setn=function(ae,X){E(typeof ae=="number"&&ae>=0);var F=ae/26|0,z=ae%26;return this._expand(F+1),X?this.words[F]=this.words[F]|1<<z:this.words[F]=this.words[F]&~(1<<z),this.strip()},C.prototype.iadd=function(ae){var X;if(this.negative!==0&&ae.negative===0)return this.negative=0,X=this.isub(ae),this.negative^=1,this._normSign();if(this.negative===0&&ae.negative!==0)return ae.negative=0,X=this.isub(ae),ae.negative=1,X._normSign();var F,z;this.length>ae.length?(F=this,z=ae):(F=ae,z=this);for(var J=0,te=0;te<z.length;te++)X=(F.words[te]|0)+(z.words[te]|0)+J,this.words[te]=X&67108863,J=X>>>26;for(;J!==0&&te<F.length;te++)X=(F.words[te]|0)+J,this.words[te]=X&67108863,J=X>>>26;if(this.length=F.length,J!==0)this.words[this.length]=J,this.length++;else if(F!==this)for(;te<F.length;te++)this.words[te]=F.words[te];return this},C.prototype.add=function(ae){var X;return ae.negative!==0&&this.negative===0?(ae.negative=0,X=this.sub(ae),ae.negative^=1,X):ae.negative===0&&this.negative!==0?(this.negative=0,X=ae.sub(this),this.negative=1,X):this.length>ae.length?this.clone().iadd(ae):ae.clone().iadd(this)},C.prototype.isub=function(ae){if(ae.negative!==0){ae.negative=0;var X=this.iadd(ae);return ae.negative=1,X._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ae),this.negative=1,this._normSign();var F=this.cmp(ae);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,J;F>0?(z=this,J=ae):(z=ae,J=this);for(var te=0,se=0;se<J.length;se++)X=(z.words[se]|0)-(J.words[se]|0)+te,te=X>>26,this.words[se]=X&67108863;for(;te!==0&&se<z.length;se++)X=(z.words[se]|0)+te,te=X>>26,this.words[se]=X&67108863;if(te===0&&se<z.length&&z!==this)for(;se<z.length;se++)this.words[se]=z.words[se];return this.length=Math.max(this.length,se),z!==this&&(this.negative=1),this.strip()},C.prototype.sub=function(ae){return this.clone().isub(ae)};function V(_e,ae,X){X.negative=ae.negative^_e.negative;var F=_e.length+ae.length|0;X.length=F,F=F-1|0;var z=_e.words[0]|0,J=ae.words[0]|0,te=z*J,se=te&67108863,oe=te/67108864|0;X.words[0]=se;for(var ie=1;ie<F;ie++){for(var G=oe>>>26,j=oe&67108863,ee=Math.min(ie,ae.length-1),pe=Math.max(0,ie-_e.length+1);pe<=ee;pe++){var he=ie-pe|0;z=_e.words[he]|0,J=ae.words[pe]|0,te=z*J+j,G+=te/67108864|0,j=te&67108863}X.words[ie]=j|0,oe=G|0}return oe!==0?X.words[ie]=oe|0:X.length--,X.strip()}var U=function(ae,X,F){var z=ae.words,J=X.words,te=F.words,se=0,oe,ie,G,j=z[0]|0,ee=j&8191,pe=j>>>13,he=z[1]|0,Se=he&8191,we=he>>>13,xe=z[2]|0,Ee=xe&8191,ye=xe>>>13,Ce=z[3]|0,ve=Ce&8191,Be=Ce>>>13,me=z[4]|0,Ie=me&8191,Ve=me>>>13,Me=z[5]|0,Ne=Me&8191,Pe=Me>>>13,He=z[6]|0,We=He&8191,Ke=He>>>13,Ge=z[7]|0,nt=Ge&8191,ot=Ge>>>13,Ze=z[8]|0,Re=Ze&8191,be=Ze>>>13,Ae=z[9]|0,Le=Ae&8191,Xe=Ae>>>13,Qe=J[0]|0,et=Qe&8191,St=Qe>>>13,mt=J[1]|0,dt=mt&8191,jt=mt>>>13,Ct=J[2]|0,Rt=Ct&8191,ur=Ct>>>13,Gt=J[3]|0,Nt=Gt&8191,er=Gt>>>13,Mt=J[4]|0,kt=Mt&8191,tr=Mt>>>13,Vt=J[5]|0,Bt=Vt&8191,ar=Vt>>>13,qt=J[6]|0,Tt=qt&8191,ir=qt>>>13,qe=J[7]|0,Oe=qe&8191,De=qe>>>13,ue=J[8]|0,ke=ue&8191,Fe=ue>>>13,Ue=J[9]|0,ze=Ue&8191,Ye=Ue>>>13;F.negative=ae.negative^X.negative,F.length=19,oe=Math.imul(ee,et),ie=Math.imul(ee,St),ie=ie+Math.imul(pe,et)|0,G=Math.imul(pe,St);var rt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(rt>>>26)|0,rt&=67108863,oe=Math.imul(Se,et),ie=Math.imul(Se,St),ie=ie+Math.imul(we,et)|0,G=Math.imul(we,St),oe=oe+Math.imul(ee,dt)|0,ie=ie+Math.imul(ee,jt)|0,ie=ie+Math.imul(pe,dt)|0,G=G+Math.imul(pe,jt)|0;var at=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(at>>>26)|0,at&=67108863,oe=Math.imul(Ee,et),ie=Math.imul(Ee,St),ie=ie+Math.imul(ye,et)|0,G=Math.imul(ye,St),oe=oe+Math.imul(Se,dt)|0,ie=ie+Math.imul(Se,jt)|0,ie=ie+Math.imul(we,dt)|0,G=G+Math.imul(we,jt)|0,oe=oe+Math.imul(ee,Rt)|0,ie=ie+Math.imul(ee,ur)|0,ie=ie+Math.imul(pe,Rt)|0,G=G+Math.imul(pe,ur)|0;var ct=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(ct>>>26)|0,ct&=67108863,oe=Math.imul(ve,et),ie=Math.imul(ve,St),ie=ie+Math.imul(Be,et)|0,G=Math.imul(Be,St),oe=oe+Math.imul(Ee,dt)|0,ie=ie+Math.imul(Ee,jt)|0,ie=ie+Math.imul(ye,dt)|0,G=G+Math.imul(ye,jt)|0,oe=oe+Math.imul(Se,Rt)|0,ie=ie+Math.imul(Se,ur)|0,ie=ie+Math.imul(we,Rt)|0,G=G+Math.imul(we,ur)|0,oe=oe+Math.imul(ee,Nt)|0,ie=ie+Math.imul(ee,er)|0,ie=ie+Math.imul(pe,Nt)|0,G=G+Math.imul(pe,er)|0;var st=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(st>>>26)|0,st&=67108863,oe=Math.imul(Ie,et),ie=Math.imul(Ie,St),ie=ie+Math.imul(Ve,et)|0,G=Math.imul(Ve,St),oe=oe+Math.imul(ve,dt)|0,ie=ie+Math.imul(ve,jt)|0,ie=ie+Math.imul(Be,dt)|0,G=G+Math.imul(Be,jt)|0,oe=oe+Math.imul(Ee,Rt)|0,ie=ie+Math.imul(Ee,ur)|0,ie=ie+Math.imul(ye,Rt)|0,G=G+Math.imul(ye,ur)|0,oe=oe+Math.imul(Se,Nt)|0,ie=ie+Math.imul(Se,er)|0,ie=ie+Math.imul(we,Nt)|0,G=G+Math.imul(we,er)|0,oe=oe+Math.imul(ee,kt)|0,ie=ie+Math.imul(ee,tr)|0,ie=ie+Math.imul(pe,kt)|0,G=G+Math.imul(pe,tr)|0;var lt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(lt>>>26)|0,lt&=67108863,oe=Math.imul(Ne,et),ie=Math.imul(Ne,St),ie=ie+Math.imul(Pe,et)|0,G=Math.imul(Pe,St),oe=oe+Math.imul(Ie,dt)|0,ie=ie+Math.imul(Ie,jt)|0,ie=ie+Math.imul(Ve,dt)|0,G=G+Math.imul(Ve,jt)|0,oe=oe+Math.imul(ve,Rt)|0,ie=ie+Math.imul(ve,ur)|0,ie=ie+Math.imul(Be,Rt)|0,G=G+Math.imul(Be,ur)|0,oe=oe+Math.imul(Ee,Nt)|0,ie=ie+Math.imul(Ee,er)|0,ie=ie+Math.imul(ye,Nt)|0,G=G+Math.imul(ye,er)|0,oe=oe+Math.imul(Se,kt)|0,ie=ie+Math.imul(Se,tr)|0,ie=ie+Math.imul(we,kt)|0,G=G+Math.imul(we,tr)|0,oe=oe+Math.imul(ee,Bt)|0,ie=ie+Math.imul(ee,ar)|0,ie=ie+Math.imul(pe,Bt)|0,G=G+Math.imul(pe,ar)|0;var ht=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(ht>>>26)|0,ht&=67108863,oe=Math.imul(We,et),ie=Math.imul(We,St),ie=ie+Math.imul(Ke,et)|0,G=Math.imul(Ke,St),oe=oe+Math.imul(Ne,dt)|0,ie=ie+Math.imul(Ne,jt)|0,ie=ie+Math.imul(Pe,dt)|0,G=G+Math.imul(Pe,jt)|0,oe=oe+Math.imul(Ie,Rt)|0,ie=ie+Math.imul(Ie,ur)|0,ie=ie+Math.imul(Ve,Rt)|0,G=G+Math.imul(Ve,ur)|0,oe=oe+Math.imul(ve,Nt)|0,ie=ie+Math.imul(ve,er)|0,ie=ie+Math.imul(Be,Nt)|0,G=G+Math.imul(Be,er)|0,oe=oe+Math.imul(Ee,kt)|0,ie=ie+Math.imul(Ee,tr)|0,ie=ie+Math.imul(ye,kt)|0,G=G+Math.imul(ye,tr)|0,oe=oe+Math.imul(Se,Bt)|0,ie=ie+Math.imul(Se,ar)|0,ie=ie+Math.imul(we,Bt)|0,G=G+Math.imul(we,ar)|0,oe=oe+Math.imul(ee,Tt)|0,ie=ie+Math.imul(ee,ir)|0,ie=ie+Math.imul(pe,Tt)|0,G=G+Math.imul(pe,ir)|0;var bt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(bt>>>26)|0,bt&=67108863,oe=Math.imul(nt,et),ie=Math.imul(nt,St),ie=ie+Math.imul(ot,et)|0,G=Math.imul(ot,St),oe=oe+Math.imul(We,dt)|0,ie=ie+Math.imul(We,jt)|0,ie=ie+Math.imul(Ke,dt)|0,G=G+Math.imul(Ke,jt)|0,oe=oe+Math.imul(Ne,Rt)|0,ie=ie+Math.imul(Ne,ur)|0,ie=ie+Math.imul(Pe,Rt)|0,G=G+Math.imul(Pe,ur)|0,oe=oe+Math.imul(Ie,Nt)|0,ie=ie+Math.imul(Ie,er)|0,ie=ie+Math.imul(Ve,Nt)|0,G=G+Math.imul(Ve,er)|0,oe=oe+Math.imul(ve,kt)|0,ie=ie+Math.imul(ve,tr)|0,ie=ie+Math.imul(Be,kt)|0,G=G+Math.imul(Be,tr)|0,oe=oe+Math.imul(Ee,Bt)|0,ie=ie+Math.imul(Ee,ar)|0,ie=ie+Math.imul(ye,Bt)|0,G=G+Math.imul(ye,ar)|0,oe=oe+Math.imul(Se,Tt)|0,ie=ie+Math.imul(Se,ir)|0,ie=ie+Math.imul(we,Tt)|0,G=G+Math.imul(we,ir)|0,oe=oe+Math.imul(ee,Oe)|0,ie=ie+Math.imul(ee,De)|0,ie=ie+Math.imul(pe,Oe)|0,G=G+Math.imul(pe,De)|0;var Et=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Et>>>26)|0,Et&=67108863,oe=Math.imul(Re,et),ie=Math.imul(Re,St),ie=ie+Math.imul(be,et)|0,G=Math.imul(be,St),oe=oe+Math.imul(nt,dt)|0,ie=ie+Math.imul(nt,jt)|0,ie=ie+Math.imul(ot,dt)|0,G=G+Math.imul(ot,jt)|0,oe=oe+Math.imul(We,Rt)|0,ie=ie+Math.imul(We,ur)|0,ie=ie+Math.imul(Ke,Rt)|0,G=G+Math.imul(Ke,ur)|0,oe=oe+Math.imul(Ne,Nt)|0,ie=ie+Math.imul(Ne,er)|0,ie=ie+Math.imul(Pe,Nt)|0,G=G+Math.imul(Pe,er)|0,oe=oe+Math.imul(Ie,kt)|0,ie=ie+Math.imul(Ie,tr)|0,ie=ie+Math.imul(Ve,kt)|0,G=G+Math.imul(Ve,tr)|0,oe=oe+Math.imul(ve,Bt)|0,ie=ie+Math.imul(ve,ar)|0,ie=ie+Math.imul(Be,Bt)|0,G=G+Math.imul(Be,ar)|0,oe=oe+Math.imul(Ee,Tt)|0,ie=ie+Math.imul(Ee,ir)|0,ie=ie+Math.imul(ye,Tt)|0,G=G+Math.imul(ye,ir)|0,oe=oe+Math.imul(Se,Oe)|0,ie=ie+Math.imul(Se,De)|0,ie=ie+Math.imul(we,Oe)|0,G=G+Math.imul(we,De)|0,oe=oe+Math.imul(ee,ke)|0,ie=ie+Math.imul(ee,Fe)|0,ie=ie+Math.imul(pe,ke)|0,G=G+Math.imul(pe,Fe)|0;var gt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(gt>>>26)|0,gt&=67108863,oe=Math.imul(Le,et),ie=Math.imul(Le,St),ie=ie+Math.imul(Xe,et)|0,G=Math.imul(Xe,St),oe=oe+Math.imul(Re,dt)|0,ie=ie+Math.imul(Re,jt)|0,ie=ie+Math.imul(be,dt)|0,G=G+Math.imul(be,jt)|0,oe=oe+Math.imul(nt,Rt)|0,ie=ie+Math.imul(nt,ur)|0,ie=ie+Math.imul(ot,Rt)|0,G=G+Math.imul(ot,ur)|0,oe=oe+Math.imul(We,Nt)|0,ie=ie+Math.imul(We,er)|0,ie=ie+Math.imul(Ke,Nt)|0,G=G+Math.imul(Ke,er)|0,oe=oe+Math.imul(Ne,kt)|0,ie=ie+Math.imul(Ne,tr)|0,ie=ie+Math.imul(Pe,kt)|0,G=G+Math.imul(Pe,tr)|0,oe=oe+Math.imul(Ie,Bt)|0,ie=ie+Math.imul(Ie,ar)|0,ie=ie+Math.imul(Ve,Bt)|0,G=G+Math.imul(Ve,ar)|0,oe=oe+Math.imul(ve,Tt)|0,ie=ie+Math.imul(ve,ir)|0,ie=ie+Math.imul(Be,Tt)|0,G=G+Math.imul(Be,ir)|0,oe=oe+Math.imul(Ee,Oe)|0,ie=ie+Math.imul(Ee,De)|0,ie=ie+Math.imul(ye,Oe)|0,G=G+Math.imul(ye,De)|0,oe=oe+Math.imul(Se,ke)|0,ie=ie+Math.imul(Se,Fe)|0,ie=ie+Math.imul(we,ke)|0,G=G+Math.imul(we,Fe)|0,oe=oe+Math.imul(ee,ze)|0,ie=ie+Math.imul(ee,Ye)|0,ie=ie+Math.imul(pe,ze)|0,G=G+Math.imul(pe,Ye)|0;var wt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(wt>>>26)|0,wt&=67108863,oe=Math.imul(Le,dt),ie=Math.imul(Le,jt),ie=ie+Math.imul(Xe,dt)|0,G=Math.imul(Xe,jt),oe=oe+Math.imul(Re,Rt)|0,ie=ie+Math.imul(Re,ur)|0,ie=ie+Math.imul(be,Rt)|0,G=G+Math.imul(be,ur)|0,oe=oe+Math.imul(nt,Nt)|0,ie=ie+Math.imul(nt,er)|0,ie=ie+Math.imul(ot,Nt)|0,G=G+Math.imul(ot,er)|0,oe=oe+Math.imul(We,kt)|0,ie=ie+Math.imul(We,tr)|0,ie=ie+Math.imul(Ke,kt)|0,G=G+Math.imul(Ke,tr)|0,oe=oe+Math.imul(Ne,Bt)|0,ie=ie+Math.imul(Ne,ar)|0,ie=ie+Math.imul(Pe,Bt)|0,G=G+Math.imul(Pe,ar)|0,oe=oe+Math.imul(Ie,Tt)|0,ie=ie+Math.imul(Ie,ir)|0,ie=ie+Math.imul(Ve,Tt)|0,G=G+Math.imul(Ve,ir)|0,oe=oe+Math.imul(ve,Oe)|0,ie=ie+Math.imul(ve,De)|0,ie=ie+Math.imul(Be,Oe)|0,G=G+Math.imul(Be,De)|0,oe=oe+Math.imul(Ee,ke)|0,ie=ie+Math.imul(Ee,Fe)|0,ie=ie+Math.imul(ye,ke)|0,G=G+Math.imul(ye,Fe)|0,oe=oe+Math.imul(Se,ze)|0,ie=ie+Math.imul(Se,Ye)|0,ie=ie+Math.imul(we,ze)|0,G=G+Math.imul(we,Ye)|0;var Dt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,oe=Math.imul(Le,Rt),ie=Math.imul(Le,ur),ie=ie+Math.imul(Xe,Rt)|0,G=Math.imul(Xe,ur),oe=oe+Math.imul(Re,Nt)|0,ie=ie+Math.imul(Re,er)|0,ie=ie+Math.imul(be,Nt)|0,G=G+Math.imul(be,er)|0,oe=oe+Math.imul(nt,kt)|0,ie=ie+Math.imul(nt,tr)|0,ie=ie+Math.imul(ot,kt)|0,G=G+Math.imul(ot,tr)|0,oe=oe+Math.imul(We,Bt)|0,ie=ie+Math.imul(We,ar)|0,ie=ie+Math.imul(Ke,Bt)|0,G=G+Math.imul(Ke,ar)|0,oe=oe+Math.imul(Ne,Tt)|0,ie=ie+Math.imul(Ne,ir)|0,ie=ie+Math.imul(Pe,Tt)|0,G=G+Math.imul(Pe,ir)|0,oe=oe+Math.imul(Ie,Oe)|0,ie=ie+Math.imul(Ie,De)|0,ie=ie+Math.imul(Ve,Oe)|0,G=G+Math.imul(Ve,De)|0,oe=oe+Math.imul(ve,ke)|0,ie=ie+Math.imul(ve,Fe)|0,ie=ie+Math.imul(Be,ke)|0,G=G+Math.imul(Be,Fe)|0,oe=oe+Math.imul(Ee,ze)|0,ie=ie+Math.imul(Ee,Ye)|0,ie=ie+Math.imul(ye,ze)|0,G=G+Math.imul(ye,Ye)|0;var Ft=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,oe=Math.imul(Le,Nt),ie=Math.imul(Le,er),ie=ie+Math.imul(Xe,Nt)|0,G=Math.imul(Xe,er),oe=oe+Math.imul(Re,kt)|0,ie=ie+Math.imul(Re,tr)|0,ie=ie+Math.imul(be,kt)|0,G=G+Math.imul(be,tr)|0,oe=oe+Math.imul(nt,Bt)|0,ie=ie+Math.imul(nt,ar)|0,ie=ie+Math.imul(ot,Bt)|0,G=G+Math.imul(ot,ar)|0,oe=oe+Math.imul(We,Tt)|0,ie=ie+Math.imul(We,ir)|0,ie=ie+Math.imul(Ke,Tt)|0,G=G+Math.imul(Ke,ir)|0,oe=oe+Math.imul(Ne,Oe)|0,ie=ie+Math.imul(Ne,De)|0,ie=ie+Math.imul(Pe,Oe)|0,G=G+Math.imul(Pe,De)|0,oe=oe+Math.imul(Ie,ke)|0,ie=ie+Math.imul(Ie,Fe)|0,ie=ie+Math.imul(Ve,ke)|0,G=G+Math.imul(Ve,Fe)|0,oe=oe+Math.imul(ve,ze)|0,ie=ie+Math.imul(ve,Ye)|0,ie=ie+Math.imul(Be,ze)|0,G=G+Math.imul(Be,Ye)|0;var Kt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,oe=Math.imul(Le,kt),ie=Math.imul(Le,tr),ie=ie+Math.imul(Xe,kt)|0,G=Math.imul(Xe,tr),oe=oe+Math.imul(Re,Bt)|0,ie=ie+Math.imul(Re,ar)|0,ie=ie+Math.imul(be,Bt)|0,G=G+Math.imul(be,ar)|0,oe=oe+Math.imul(nt,Tt)|0,ie=ie+Math.imul(nt,ir)|0,ie=ie+Math.imul(ot,Tt)|0,G=G+Math.imul(ot,ir)|0,oe=oe+Math.imul(We,Oe)|0,ie=ie+Math.imul(We,De)|0,ie=ie+Math.imul(Ke,Oe)|0,G=G+Math.imul(Ke,De)|0,oe=oe+Math.imul(Ne,ke)|0,ie=ie+Math.imul(Ne,Fe)|0,ie=ie+Math.imul(Pe,ke)|0,G=G+Math.imul(Pe,Fe)|0,oe=oe+Math.imul(Ie,ze)|0,ie=ie+Math.imul(Ie,Ye)|0,ie=ie+Math.imul(Ve,ze)|0,G=G+Math.imul(Ve,Ye)|0;var Ut=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,oe=Math.imul(Le,Bt),ie=Math.imul(Le,ar),ie=ie+Math.imul(Xe,Bt)|0,G=Math.imul(Xe,ar),oe=oe+Math.imul(Re,Tt)|0,ie=ie+Math.imul(Re,ir)|0,ie=ie+Math.imul(be,Tt)|0,G=G+Math.imul(be,ir)|0,oe=oe+Math.imul(nt,Oe)|0,ie=ie+Math.imul(nt,De)|0,ie=ie+Math.imul(ot,Oe)|0,G=G+Math.imul(ot,De)|0,oe=oe+Math.imul(We,ke)|0,ie=ie+Math.imul(We,Fe)|0,ie=ie+Math.imul(Ke,ke)|0,G=G+Math.imul(Ke,Fe)|0,oe=oe+Math.imul(Ne,ze)|0,ie=ie+Math.imul(Ne,Ye)|0,ie=ie+Math.imul(Pe,ze)|0,G=G+Math.imul(Pe,Ye)|0;var Xt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,oe=Math.imul(Le,Tt),ie=Math.imul(Le,ir),ie=ie+Math.imul(Xe,Tt)|0,G=Math.imul(Xe,ir),oe=oe+Math.imul(Re,Oe)|0,ie=ie+Math.imul(Re,De)|0,ie=ie+Math.imul(be,Oe)|0,G=G+Math.imul(be,De)|0,oe=oe+Math.imul(nt,ke)|0,ie=ie+Math.imul(nt,Fe)|0,ie=ie+Math.imul(ot,ke)|0,G=G+Math.imul(ot,Fe)|0,oe=oe+Math.imul(We,ze)|0,ie=ie+Math.imul(We,Ye)|0,ie=ie+Math.imul(Ke,ze)|0,G=G+Math.imul(Ke,Ye)|0;var Zt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,oe=Math.imul(Le,Oe),ie=Math.imul(Le,De),ie=ie+Math.imul(Xe,Oe)|0,G=Math.imul(Xe,De),oe=oe+Math.imul(Re,ke)|0,ie=ie+Math.imul(Re,Fe)|0,ie=ie+Math.imul(be,ke)|0,G=G+Math.imul(be,Fe)|0,oe=oe+Math.imul(nt,ze)|0,ie=ie+Math.imul(nt,Ye)|0,ie=ie+Math.imul(ot,ze)|0,G=G+Math.imul(ot,Ye)|0;var Wt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,oe=Math.imul(Le,ke),ie=Math.imul(Le,Fe),ie=ie+Math.imul(Xe,ke)|0,G=Math.imul(Xe,Fe),oe=oe+Math.imul(Re,ze)|0,ie=ie+Math.imul(Re,Ye)|0,ie=ie+Math.imul(be,ze)|0,G=G+Math.imul(be,Ye)|0;var yt=(se+oe|0)+((ie&8191)<<13)|0;se=(G+(ie>>>13)|0)+(yt>>>26)|0,yt&=67108863,oe=Math.imul(Le,ze),ie=Math.imul(Le,Ye),ie=ie+Math.imul(Xe,ze)|0,G=Math.imul(Xe,Ye);var xt=(se+oe|0)+((ie&8191)<<13)|0;return se=(G+(ie>>>13)|0)+(xt>>>26)|0,xt&=67108863,te[0]=rt,te[1]=at,te[2]=ct,te[3]=st,te[4]=lt,te[5]=ht,te[6]=bt,te[7]=Et,te[8]=gt,te[9]=wt,te[10]=Dt,te[11]=Ft,te[12]=Kt,te[13]=Ut,te[14]=Xt,te[15]=Zt,te[16]=Wt,te[17]=yt,te[18]=xt,se!==0&&(te[19]=se,F.length++),F};Math.imul||(U=V);function q(_e,ae,X){X.negative=ae.negative^_e.negative,X.length=_e.length+ae.length;for(var F=0,z=0,J=0;J<X.length-1;J++){var te=z;z=0;for(var se=F&67108863,oe=Math.min(J,ae.length-1),ie=Math.max(0,J-_e.length+1);ie<=oe;ie++){var G=J-ie,j=_e.words[G]|0,ee=ae.words[ie]|0,pe=j*ee,he=pe&67108863;te=te+(pe/67108864|0)|0,he=he+se|0,se=he&67108863,te=te+(he>>>26)|0,z+=te>>>26,te&=67108863}X.words[J]=se,F=te,te=z}return F!==0?X.words[J]=F:X.length--,X.strip()}function H(_e,ae,X){var F=new W;return F.mulp(_e,ae,X)}C.prototype.mulTo=function(ae,X){var F,z=this.length+ae.length;return this.length===10&&ae.length===10?F=U(this,ae,X):z<63?F=V(this,ae,X):z<1024?F=q(this,ae,X):F=H(this,ae,X),F};function W(_e,ae){this.x=_e,this.y=ae}W.prototype.makeRBT=function(ae){for(var X=new Array(ae),F=C.prototype._countBits(ae)-1,z=0;z<ae;z++)X[z]=this.revBin(z,F,ae);return X},W.prototype.revBin=function(ae,X,F){if(ae===0||ae===F-1)return ae;for(var z=0,J=0;J<X;J++)z|=(ae&1)<<X-J-1,ae>>=1;return z},W.prototype.permute=function(ae,X,F,z,J,te){for(var se=0;se<te;se++)z[se]=X[ae[se]],J[se]=F[ae[se]]},W.prototype.transform=function(ae,X,F,z,J,te){this.permute(te,ae,X,F,z,J);for(var se=1;se<J;se<<=1)for(var oe=se<<1,ie=Math.cos(2*Math.PI/oe),G=Math.sin(2*Math.PI/oe),j=0;j<J;j+=oe)for(var ee=ie,pe=G,he=0;he<se;he++){var Se=F[j+he],we=z[j+he],xe=F[j+he+se],Ee=z[j+he+se],ye=ee*xe-pe*Ee;Ee=ee*Ee+pe*xe,xe=ye,F[j+he]=Se+xe,z[j+he]=we+Ee,F[j+he+se]=Se-xe,z[j+he+se]=we-Ee,he!==oe&&(ye=ie*ee-G*pe,pe=ie*pe+G*ee,ee=ye)}},W.prototype.guessLen13b=function(ae,X){var F=Math.max(X,ae)|1,z=F&1,J=0;for(F=F/2|0;F;F=F>>>1)J++;return 1<<J+1+z},W.prototype.conjugate=function(ae,X,F){if(!(F<=1))for(var z=0;z<F/2;z++){var J=ae[z];ae[z]=ae[F-z-1],ae[F-z-1]=J,J=X[z],X[z]=-X[F-z-1],X[F-z-1]=-J}},W.prototype.normalize13b=function(ae,X){for(var F=0,z=0;z<X/2;z++){var J=Math.round(ae[2*z+1]/X)*8192+Math.round(ae[2*z]/X)+F;ae[z]=J&67108863,J<67108864?F=0:F=J/67108864|0}return ae},W.prototype.convert13b=function(ae,X,F,z){for(var J=0,te=0;te<X;te++)J=J+(ae[te]|0),F[2*te]=J&8191,J=J>>>13,F[2*te+1]=J&8191,J=J>>>13;for(te=2*X;te<z;++te)F[te]=0;E(J===0),E((J&-8192)===0)},W.prototype.stub=function(ae){for(var X=new Array(ae),F=0;F<ae;F++)X[F]=0;return X},W.prototype.mulp=function(ae,X,F){var z=2*this.guessLen13b(ae.length,X.length),J=this.makeRBT(z),te=this.stub(z),se=new Array(z),oe=new Array(z),ie=new Array(z),G=new Array(z),j=new Array(z),ee=new Array(z),pe=F.words;pe.length=z,this.convert13b(ae.words,ae.length,se,z),this.convert13b(X.words,X.length,G,z),this.transform(se,te,oe,ie,z,J),this.transform(G,te,j,ee,z,J);for(var he=0;he<z;he++){var Se=oe[he]*j[he]-ie[he]*ee[he];ie[he]=oe[he]*ee[he]+ie[he]*j[he],oe[he]=Se}return this.conjugate(oe,ie,z),this.transform(oe,ie,pe,te,z,J),this.conjugate(pe,te,z),this.normalize13b(pe,z),F.negative=ae.negative^X.negative,F.length=ae.length+X.length,F.strip()},C.prototype.mul=function(ae){var X=new C(null);return X.words=new Array(this.length+ae.length),this.mulTo(ae,X)},C.prototype.mulf=function(ae){var X=new C(null);return X.words=new Array(this.length+ae.length),H(this,ae,X)},C.prototype.imul=function(ae){return this.clone().mulTo(ae,this)},C.prototype.imuln=function(ae){E(typeof ae=="number"),E(ae<67108864);for(var X=0,F=0;F<this.length;F++){var z=(this.words[F]|0)*ae,J=(z&67108863)+(X&67108863);X>>=26,X+=z/67108864|0,X+=J>>>26,this.words[F]=J&67108863}return X!==0&&(this.words[F]=X,this.length++),this},C.prototype.muln=function(ae){return this.clone().imuln(ae)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(ae){var X=L(ae);if(X.length===0)return new C(1);for(var F=this,z=0;z<X.length&&X[z]===0;z++,F=F.sqr());if(++z<X.length)for(var J=F.sqr();z<X.length;z++,J=J.sqr())X[z]!==0&&(F=F.mul(J));return F},C.prototype.iushln=function(ae){E(typeof ae=="number"&&ae>=0);var X=ae%26,F=(ae-X)/26,z=67108863>>>26-X<<26-X,J;if(X!==0){var te=0;for(J=0;J<this.length;J++){var se=this.words[J]&z,oe=(this.words[J]|0)-se<<X;this.words[J]=oe|te,te=se>>>26-X}te&&(this.words[J]=te,this.length++)}if(F!==0){for(J=this.length-1;J>=0;J--)this.words[J+F]=this.words[J];for(J=0;J<F;J++)this.words[J]=0;this.length+=F}return this.strip()},C.prototype.ishln=function(ae){return E(this.negative===0),this.iushln(ae)},C.prototype.iushrn=function(ae,X,F){E(typeof ae=="number"&&ae>=0);var z;X?z=(X-X%26)/26:z=0;var J=ae%26,te=Math.min((ae-J)/26,this.length),se=67108863^67108863>>>J<<J,oe=F;if(z-=te,z=Math.max(0,z),oe){for(var ie=0;ie<te;ie++)oe.words[ie]=this.words[ie];oe.length=te}if(te!==0)if(this.length>te)for(this.length-=te,ie=0;ie<this.length;ie++)this.words[ie]=this.words[ie+te];else this.words[0]=0,this.length=1;var G=0;for(ie=this.length-1;ie>=0&&(G!==0||ie>=z);ie--){var j=this.words[ie]|0;this.words[ie]=G<<26-J|j>>>J,G=j&se}return oe&&G!==0&&(oe.words[oe.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},C.prototype.ishrn=function(ae,X,F){return E(this.negative===0),this.iushrn(ae,X,F)},C.prototype.shln=function(ae){return this.clone().ishln(ae)},C.prototype.ushln=function(ae){return this.clone().iushln(ae)},C.prototype.shrn=function(ae){return this.clone().ishrn(ae)},C.prototype.ushrn=function(ae){return this.clone().iushrn(ae)},C.prototype.testn=function(ae){E(typeof ae=="number"&&ae>=0);var X=ae%26,F=(ae-X)/26,z=1<<X;if(this.length<=F)return!1;var J=this.words[F];return!!(J&z)},C.prototype.imaskn=function(ae){E(typeof ae=="number"&&ae>=0);var X=ae%26,F=(ae-X)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(X!==0&&F++,this.length=Math.min(F,this.length),X!==0){var z=67108863^67108863>>>X<<X;this.words[this.length-1]&=z}return this.strip()},C.prototype.maskn=function(ae){return this.clone().imaskn(ae)},C.prototype.iaddn=function(ae){return E(typeof ae=="number"),E(ae<67108864),ae<0?this.isubn(-ae):this.negative!==0?this.length===1&&(this.words[0]|0)<ae?(this.words[0]=ae-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ae),this.negative=1,this):this._iaddn(ae)},C.prototype._iaddn=function(ae){this.words[0]+=ae;for(var X=0;X<this.length&&this.words[X]>=67108864;X++)this.words[X]-=67108864,X===this.length-1?this.words[X+1]=1:this.words[X+1]++;return this.length=Math.max(this.length,X+1),this},C.prototype.isubn=function(ae){if(E(typeof ae=="number"),E(ae<67108864),ae<0)return this.iaddn(-ae);if(this.negative!==0)return this.negative=0,this.iaddn(ae),this.negative=1,this;if(this.words[0]-=ae,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var X=0;X<this.length&&this.words[X]<0;X++)this.words[X]+=67108864,this.words[X+1]-=1;return this.strip()},C.prototype.addn=function(ae){return this.clone().iaddn(ae)},C.prototype.subn=function(ae){return this.clone().isubn(ae)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(ae,X,F){var z=ae.length+F,J;this._expand(z);var te,se=0;for(J=0;J<ae.length;J++){te=(this.words[J+F]|0)+se;var oe=(ae.words[J]|0)*X;te-=oe&67108863,se=(te>>26)-(oe/67108864|0),this.words[J+F]=te&67108863}for(;J<this.length-F;J++)te=(this.words[J+F]|0)+se,se=te>>26,this.words[J+F]=te&67108863;if(se===0)return this.strip();for(E(se===-1),se=0,J=0;J<this.length;J++)te=-(this.words[J]|0)+se,se=te>>26,this.words[J]=te&67108863;return this.negative=1,this.strip()},C.prototype._wordDiv=function(ae,X){var F=this.length-ae.length,z=this.clone(),J=ae,te=J.words[J.length-1]|0,se=this._countBits(te);F=26-se,F!==0&&(J=J.ushln(F),z.iushln(F),te=J.words[J.length-1]|0);var oe=z.length-J.length,ie;if(X!=="mod"){ie=new C(null),ie.length=oe+1,ie.words=new Array(ie.length);for(var G=0;G<ie.length;G++)ie.words[G]=0}var j=z.clone()._ishlnsubmul(J,1,oe);j.negative===0&&(z=j,ie&&(ie.words[oe]=1));for(var ee=oe-1;ee>=0;ee--){var pe=(z.words[J.length+ee]|0)*67108864+(z.words[J.length+ee-1]|0);for(pe=Math.min(pe/te|0,67108863),z._ishlnsubmul(J,pe,ee);z.negative!==0;)pe--,z.negative=0,z._ishlnsubmul(J,1,ee),z.isZero()||(z.negative^=1);ie&&(ie.words[ee]=pe)}return ie&&ie.strip(),z.strip(),X!=="div"&&F!==0&&z.iushrn(F),{div:ie||null,mod:z}},C.prototype.divmod=function(ae,X,F){if(E(!ae.isZero()),this.isZero())return{div:new C(0),mod:new C(0)};var z,J,te;return this.negative!==0&&ae.negative===0?(te=this.neg().divmod(ae,X),X!=="mod"&&(z=te.div.neg()),X!=="div"&&(J=te.mod.neg(),F&&J.negative!==0&&J.iadd(ae)),{div:z,mod:J}):this.negative===0&&ae.negative!==0?(te=this.divmod(ae.neg(),X),X!=="mod"&&(z=te.div.neg()),{div:z,mod:te.mod}):this.negative&ae.negative?(te=this.neg().divmod(ae.neg(),X),X!=="div"&&(J=te.mod.neg(),F&&J.negative!==0&&J.isub(ae)),{div:te.div,mod:J}):ae.length>this.length||this.cmp(ae)<0?{div:new C(0),mod:this}:ae.length===1?X==="div"?{div:this.divn(ae.words[0]),mod:null}:X==="mod"?{div:null,mod:new C(this.modn(ae.words[0]))}:{div:this.divn(ae.words[0]),mod:new C(this.modn(ae.words[0]))}:this._wordDiv(ae,X)},C.prototype.div=function(ae){return this.divmod(ae,"div",!1).div},C.prototype.mod=function(ae){return this.divmod(ae,"mod",!1).mod},C.prototype.umod=function(ae){return this.divmod(ae,"mod",!0).mod},C.prototype.divRound=function(ae){var X=this.divmod(ae);if(X.mod.isZero())return X.div;var F=X.div.negative!==0?X.mod.isub(ae):X.mod,z=ae.ushrn(1),J=ae.andln(1),te=F.cmp(z);return te<0||J===1&&te===0?X.div:X.div.negative!==0?X.div.isubn(1):X.div.iaddn(1)},C.prototype.modn=function(ae){E(ae<=67108863);for(var X=(1<<26)%ae,F=0,z=this.length-1;z>=0;z--)F=(X*F+(this.words[z]|0))%ae;return F},C.prototype.idivn=function(ae){E(ae<=67108863);for(var X=0,F=this.length-1;F>=0;F--){var z=(this.words[F]|0)+X*67108864;this.words[F]=z/ae|0,X=z%ae}return this.strip()},C.prototype.divn=function(ae){return this.clone().idivn(ae)},C.prototype.egcd=function(ae){E(ae.negative===0),E(!ae.isZero());var X=this,F=ae.clone();X.negative!==0?X=X.umod(ae):X=X.clone();for(var z=new C(1),J=new C(0),te=new C(0),se=new C(1),oe=0;X.isEven()&&F.isEven();)X.iushrn(1),F.iushrn(1),++oe;for(var ie=F.clone(),G=X.clone();!X.isZero();){for(var j=0,ee=1;!(X.words[0]&ee)&&j<26;++j,ee<<=1);if(j>0)for(X.iushrn(j);j-- >0;)(z.isOdd()||J.isOdd())&&(z.iadd(ie),J.isub(G)),z.iushrn(1),J.iushrn(1);for(var pe=0,he=1;!(F.words[0]&he)&&pe<26;++pe,he<<=1);if(pe>0)for(F.iushrn(pe);pe-- >0;)(te.isOdd()||se.isOdd())&&(te.iadd(ie),se.isub(G)),te.iushrn(1),se.iushrn(1);X.cmp(F)>=0?(X.isub(F),z.isub(te),J.isub(se)):(F.isub(X),te.isub(z),se.isub(J))}return{a:te,b:se,gcd:F.iushln(oe)}},C.prototype._invmp=function(ae){E(ae.negative===0),E(!ae.isZero());var X=this,F=ae.clone();X.negative!==0?X=X.umod(ae):X=X.clone();for(var z=new C(1),J=new C(0),te=F.clone();X.cmpn(1)>0&&F.cmpn(1)>0;){for(var se=0,oe=1;!(X.words[0]&oe)&&se<26;++se,oe<<=1);if(se>0)for(X.iushrn(se);se-- >0;)z.isOdd()&&z.iadd(te),z.iushrn(1);for(var ie=0,G=1;!(F.words[0]&G)&&ie<26;++ie,G<<=1);if(ie>0)for(F.iushrn(ie);ie-- >0;)J.isOdd()&&J.iadd(te),J.iushrn(1);X.cmp(F)>=0?(X.isub(F),z.isub(J)):(F.isub(X),J.isub(z))}var j;return X.cmpn(1)===0?j=z:j=J,j.cmpn(0)<0&&j.iadd(ae),j},C.prototype.gcd=function(ae){if(this.isZero())return ae.abs();if(ae.isZero())return this.abs();var X=this.clone(),F=ae.clone();X.negative=0,F.negative=0;for(var z=0;X.isEven()&&F.isEven();z++)X.iushrn(1),F.iushrn(1);do{for(;X.isEven();)X.iushrn(1);for(;F.isEven();)F.iushrn(1);var J=X.cmp(F);if(J<0){var te=X;X=F,F=te}else if(J===0||F.cmpn(1)===0)break;X.isub(F)}while(!0);return F.iushln(z)},C.prototype.invm=function(ae){return this.egcd(ae).a.umod(ae)},C.prototype.isEven=function(){return(this.words[0]&1)===0},C.prototype.isOdd=function(){return(this.words[0]&1)===1},C.prototype.andln=function(ae){return this.words[0]&ae},C.prototype.bincn=function(ae){E(typeof ae=="number");var X=ae%26,F=(ae-X)/26,z=1<<X;if(this.length<=F)return this._expand(F+1),this.words[F]|=z,this;for(var J=z,te=F;J!==0&&te<this.length;te++){var se=this.words[te]|0;se+=J,J=se>>>26,se&=67108863,this.words[te]=se}return J!==0&&(this.words[te]=J,this.length++),this},C.prototype.isZero=function(){return this.length===1&&this.words[0]===0},C.prototype.cmpn=function(ae){var X=ae<0;if(this.negative!==0&&!X)return-1;if(this.negative===0&&X)return 1;this.strip();var F;if(this.length>1)F=1;else{X&&(ae=-ae),E(ae<=67108863,"Number is too big");var z=this.words[0]|0;F=z===ae?0:z<ae?-1:1}return this.negative!==0?-F|0:F},C.prototype.cmp=function(ae){if(this.negative!==0&&ae.negative===0)return-1;if(this.negative===0&&ae.negative!==0)return 1;var X=this.ucmp(ae);return this.negative!==0?-X|0:X},C.prototype.ucmp=function(ae){if(this.length>ae.length)return 1;if(this.length<ae.length)return-1;for(var X=0,F=this.length-1;F>=0;F--){var z=this.words[F]|0,J=ae.words[F]|0;if(z!==J){z<J?X=-1:z>J&&(X=1);break}}return X},C.prototype.gtn=function(ae){return this.cmpn(ae)===1},C.prototype.gt=function(ae){return this.cmp(ae)===1},C.prototype.gten=function(ae){return this.cmpn(ae)>=0},C.prototype.gte=function(ae){return this.cmp(ae)>=0},C.prototype.ltn=function(ae){return this.cmpn(ae)===-1},C.prototype.lt=function(ae){return this.cmp(ae)===-1},C.prototype.lten=function(ae){return this.cmpn(ae)<=0},C.prototype.lte=function(ae){return this.cmp(ae)<=0},C.prototype.eqn=function(ae){return this.cmpn(ae)===0},C.prototype.eq=function(ae){return this.cmp(ae)===0},C.red=function(ae){return new ge(ae)},C.prototype.toRed=function(ae){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),ae.convertTo(this)._forceRed(ae)},C.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(ae){return this.red=ae,this},C.prototype.forceRed=function(ae){return E(!this.red,"Already a number in reduction context"),this._forceRed(ae)},C.prototype.redAdd=function(ae){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,ae)},C.prototype.redIAdd=function(ae){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ae)},C.prototype.redSub=function(ae){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,ae)},C.prototype.redISub=function(ae){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,ae)},C.prototype.redShl=function(ae){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,ae)},C.prototype.redMul=function(ae){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,ae),this.red.mul(this,ae)},C.prototype.redIMul=function(ae){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,ae),this.red.imul(this,ae)},C.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(ae){return E(this.red&&!ae.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ae)};var Q={k256:null,p224:null,p192:null,p25519:null};function re(_e,ae){this.name=_e,this.p=new C(ae,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}re.prototype._tmp=function(){var ae=new C(null);return ae.words=new Array(Math.ceil(this.n/13)),ae},re.prototype.ireduce=function(ae){var X=ae,F;do this.split(X,this.tmp),X=this.imulK(X),X=X.iadd(this.tmp),F=X.bitLength();while(F>this.n);var z=F<this.n?-1:X.ucmp(this.p);return z===0?(X.words[0]=0,X.length=1):z>0?X.isub(this.p):X.strip!==void 0?X.strip():X._strip(),X},re.prototype.split=function(ae,X){ae.iushrn(this.n,0,X)},re.prototype.imulK=function(ae){return ae.imul(this.k)};function ce(){re.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(ce,re),ce.prototype.split=function(ae,X){for(var F=4194303,z=Math.min(ae.length,9),J=0;J<z;J++)X.words[J]=ae.words[J];if(X.length=z,ae.length<=9){ae.words[0]=0,ae.length=1;return}var te=ae.words[9];for(X.words[X.length++]=te&F,J=10;J<ae.length;J++){var se=ae.words[J]|0;ae.words[J-10]=(se&F)<<4|te>>>22,te=se}te>>>=22,ae.words[J-10]=te,te===0&&ae.length>10?ae.length-=10:ae.length-=9},ce.prototype.imulK=function(ae){ae.words[ae.length]=0,ae.words[ae.length+1]=0,ae.length+=2;for(var X=0,F=0;F<ae.length;F++){var z=ae.words[F]|0;X+=z*977,ae.words[F]=X&67108863,X=z*64+(X/67108864|0)}return ae.words[ae.length-1]===0&&(ae.length--,ae.words[ae.length-1]===0&&ae.length--),ae};function ne(){re.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(ne,re);function Y(){re.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(Y,re);function fe(){re.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S(fe,re),fe.prototype.imulK=function(ae){for(var X=0,F=0;F<ae.length;F++){var z=(ae.words[F]|0)*19+X,J=z&67108863;z>>>=26,ae.words[F]=J,X=z}return X!==0&&(ae.words[ae.length++]=X),ae},C._prime=function(ae){if(Q[ae])return Q[ae];var X;if(ae==="k256")X=new ce;else if(ae==="p224")X=new ne;else if(ae==="p192")X=new Y;else if(ae==="p25519")X=new fe;else throw new Error("Unknown prime "+ae);return Q[ae]=X,X};function ge(_e){if(typeof _e=="string"){var ae=C._prime(_e);this.m=ae.p,this.prime=ae}else E(_e.gtn(1),"modulus must be greater than 1"),this.m=_e,this.prime=null}ge.prototype._verify1=function(ae){E(ae.negative===0,"red works only with positives"),E(ae.red,"red works only with red numbers")},ge.prototype._verify2=function(ae,X){E((ae.negative|X.negative)===0,"red works only with positives"),E(ae.red&&ae.red===X.red,"red works only with red numbers")},ge.prototype.imod=function(ae){return this.prime?this.prime.ireduce(ae)._forceRed(this):ae.umod(this.m)._forceRed(this)},ge.prototype.neg=function(ae){return ae.isZero()?ae.clone():this.m.sub(ae)._forceRed(this)},ge.prototype.add=function(ae,X){this._verify2(ae,X);var F=ae.add(X);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},ge.prototype.iadd=function(ae,X){this._verify2(ae,X);var F=ae.iadd(X);return F.cmp(this.m)>=0&&F.isub(this.m),F},ge.prototype.sub=function(ae,X){this._verify2(ae,X);var F=ae.sub(X);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},ge.prototype.isub=function(ae,X){this._verify2(ae,X);var F=ae.isub(X);return F.cmpn(0)<0&&F.iadd(this.m),F},ge.prototype.shl=function(ae,X){return this._verify1(ae),this.imod(ae.ushln(X))},ge.prototype.imul=function(ae,X){return this._verify2(ae,X),this.imod(ae.imul(X))},ge.prototype.mul=function(ae,X){return this._verify2(ae,X),this.imod(ae.mul(X))},ge.prototype.isqr=function(ae){return this.imul(ae,ae.clone())},ge.prototype.sqr=function(ae){return this.mul(ae,ae)},ge.prototype.sqrt=function(ae){if(ae.isZero())return ae.clone();var X=this.m.andln(3);if(E(X%2===1),X===3){var F=this.m.add(new C(1)).iushrn(2);return this.pow(ae,F)}for(var z=this.m.subn(1),J=0;!z.isZero()&&z.andln(1)===0;)J++,z.iushrn(1);E(!z.isZero());var te=new C(1).toRed(this),se=te.redNeg(),oe=this.m.subn(1).iushrn(1),ie=this.m.bitLength();for(ie=new C(2*ie*ie).toRed(this);this.pow(ie,oe).cmp(se)!==0;)ie.redIAdd(se);for(var G=this.pow(ie,z),j=this.pow(ae,z.addn(1).iushrn(1)),ee=this.pow(ae,z),pe=J;ee.cmp(te)!==0;){for(var he=ee,Se=0;he.cmp(te)!==0;Se++)he=he.redSqr();E(Se<pe);var we=this.pow(G,new C(1).iushln(pe-Se-1));j=j.redMul(we),G=we.redSqr(),ee=ee.redMul(G),pe=Se}return j},ge.prototype.invm=function(ae){var X=ae._invmp(this.m);return X.negative!==0?(X.negative=0,this.imod(X).redNeg()):this.imod(X)},ge.prototype.pow=function(ae,X){if(X.isZero())return new C(1).toRed(this);if(X.cmpn(1)===0)return ae.clone();var F=4,z=new Array(1<<F);z[0]=new C(1).toRed(this),z[1]=ae;for(var J=2;J<z.length;J++)z[J]=this.mul(z[J-1],ae);var te=z[0],se=0,oe=0,ie=X.bitLength()%26;for(ie===0&&(ie=26),J=X.length-1;J>=0;J--){for(var G=X.words[J],j=ie-1;j>=0;j--){var ee=G>>j&1;if(te!==z[0]&&(te=this.sqr(te)),ee===0&&se===0){oe=0;continue}se<<=1,se|=ee,oe++,!(oe!==F&&(J!==0||j!==0))&&(te=this.mul(te,z[se]),oe=0,se=0)}ie=26}return te},ge.prototype.convertTo=function(ae){var X=ae.umod(this.m);return X===ae?X.clone():X},ge.prototype.convertFrom=function(ae){var X=ae.clone();return X.red=null,X},C.mont=function(ae){return new $e(ae)};function $e(_e){ge.call(this,_e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S($e,ge),$e.prototype.convertTo=function(ae){return this.imod(ae.ushln(this.shift))},$e.prototype.convertFrom=function(ae){var X=this.imod(ae.mul(this.rinv));return X.red=null,X},$e.prototype.imul=function(ae,X){if(ae.isZero()||X.isZero())return ae.words[0]=0,ae.length=1,ae;var F=ae.imul(X),z=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=F.isub(z).iushrn(this.shift),te=J;return J.cmp(this.m)>=0?te=J.isub(this.m):J.cmpn(0)<0&&(te=J.iadd(this.m)),te._forceRed(this)},$e.prototype.mul=function(ae,X){if(ae.isZero()||X.isZero())return new C(0)._forceRed(this);var F=ae.mul(X),z=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=F.isub(z).iushrn(this.shift),te=J;return J.cmp(this.m)>=0?te=J.isub(this.m):J.cmpn(0)<0&&(te=J.iadd(this.m)),te._forceRed(this)},$e.prototype.invm=function(ae){var X=this.imod(ae._invmp(this.m).mul(this.r2));return X._forceRed(this)}})(n,commonjsGlobal)})(bn$4);var bnExports$2=bn$4.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var n;brorand.exports=function(S){return n||(n=new _(null)),n.generate(S)};function _(E){this.rand=E}if(brorand.exports.Rand=_,_.prototype.generate=function(S){return this._rand(S)},_.prototype._rand=function(S){if(this.rand.getBytes)return this.rand.getBytes(S);for(var C=new Uint8Array(S),T=0;T<C.length;T++)C[T]=this.rand.getByte();return C},typeof self=="object")self.crypto&&self.crypto.getRandomValues?_.prototype._rand=function(S){var C=new Uint8Array(S);return self.crypto.getRandomValues(C),C}:self.msCrypto&&self.msCrypto.getRandomValues?_.prototype._rand=function(S){var C=new Uint8Array(S);return self.msCrypto.getRandomValues(C),C}:typeof window=="object"&&(_.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var x=requireCryptoBrowserify();if(typeof x.randomBytes!="function")throw new Error("Not supported");_.prototype._rand=function(S){return x.randomBytes(S)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var n=bnExports$2,_=requireBrorand();function x(E){this.rand=E||new _.Rand}return mr=x,x.create=function(S){return new x(S)},x.prototype._randbelow=function(S){var C=S.bitLength(),T=Math.ceil(C/8);do var A=new n(this.rand.generate(T));while(A.cmp(S)>=0);return A},x.prototype._randrange=function(S,C){var T=C.sub(S);return S.add(this._randbelow(T))},x.prototype.test=function(S,C,T){var A=S.bitLength(),B=n.mont(S),I=new n(1).toRed(B);C||(C=Math.max(1,A/48|0));for(var M=S.subn(1),O=0;!M.testn(O);O++);for(var D=S.shrn(O),L=M.toRed(B),V=!0;C>0;C--){var U=this._randrange(new n(2),M);T&&T(U);var q=U.toRed(B).redPow(D);if(!(q.cmp(I)===0||q.cmp(L)===0)){for(var H=1;H<O;H++){if(q=q.redSqr(),q.cmp(I)===0)return!1;if(q.cmp(L)===0)break}if(H===O)return!1}}return V},x.prototype.getDivisor=function(S,C){var T=S.bitLength(),A=n.mont(S),B=new n(1).toRed(A);C||(C=Math.max(1,T/48|0));for(var I=S.subn(1),M=0;!I.testn(M);M++);for(var O=S.shrn(M),D=I.toRed(A);C>0;C--){var L=this._randrange(new n(2),I),V=S.gcd(L);if(V.cmpn(1)!==0)return V;var U=L.toRed(A).redPow(O);if(!(U.cmp(B)===0||U.cmp(D)===0)){for(var q=1;q<M;q++){if(U=U.redSqr(),U.cmp(B)===0)return U.fromRed().subn(1).gcd(S);if(U.cmp(D)===0)break}if(q===M)return U=U.redSqr(),U.fromRed().subn(1).gcd(S)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var n=requireBrowser$b();generatePrime=q,q.simpleSieve=V,q.fermatTest=U;var _=bnExports$2,x=new _(24),E=requireMr(),S=new E,C=new _(1),T=new _(2),A=new _(5);new _(16),new _(8);var B=new _(10),I=new _(3);new _(7);var M=new _(11),O=new _(4);new _(12);var D=null;function L(){if(D!==null)return D;var H=1048576,W=[];W[0]=2;for(var Q=1,re=3;re<H;re+=2){for(var ce=Math.ceil(Math.sqrt(re)),ne=0;ne<Q&&W[ne]<=ce&&re%W[ne]!==0;ne++);Q!==ne&&W[ne]<=ce||(W[Q++]=re)}return D=W,W}function V(H){for(var W=L(),Q=0;Q<W.length;Q++)if(H.modn(W[Q])===0)return H.cmpn(W[Q])===0;return!0}function U(H){var W=_.mont(H);return T.toRed(W).redPow(H.subn(1)).fromRed().cmpn(1)===0}function q(H,W){if(H<16)return W===2||W===5?new _([140,123]):new _([140,39]);W=new _(W);for(var Q,re;;){for(Q=new _(n(Math.ceil(H/8)));Q.bitLength()>H;)Q.ishrn(1);if(Q.isEven()&&Q.iadd(C),Q.testn(1)||Q.iadd(T),W.cmp(T)){if(!W.cmp(A))for(;Q.mod(B).cmp(I);)Q.iadd(O)}else for(;Q.mod(x).cmp(M);)Q.iadd(O);if(re=Q.shrn(1),V(re)&&V(Q)&&U(re)&&U(Q)&&S.test(re)&&S.test(Q))return Q}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var n=bnExports$2,_=requireMr(),x=new _,E=new n(24),S=new n(11),C=new n(10),T=new n(3),A=new n(7),B=requireGeneratePrime(),I=requireBrowser$b();dh=V;function M(q,H){return H=H||"utf8",Buffer$5.isBuffer(q)||(q=new Buffer$5(q,H)),this._pub=new n(q),this}function O(q,H){return H=H||"utf8",Buffer$5.isBuffer(q)||(q=new Buffer$5(q,H)),this._priv=new n(q),this}var D={};function L(q,H){var W=H.toString("hex"),Q=[W,q.toString(16)].join("_");if(Q in D)return D[Q];var re=0;if(q.isEven()||!B.simpleSieve||!B.fermatTest(q)||!x.test(q))return re+=1,W==="02"||W==="05"?re+=8:re+=4,D[Q]=re,re;x.test(q.shrn(1))||(re+=2);var ce;switch(W){case"02":q.mod(E).cmp(S)&&(re+=8);break;case"05":ce=q.mod(C),ce.cmp(T)&&ce.cmp(A)&&(re+=8);break;default:re+=4}return D[Q]=re,re}function V(q,H,W){this.setGenerator(H),this.__prime=new n(q),this._prime=n.mont(this.__prime),this._primeLen=q.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,W?(this.setPublicKey=M,this.setPrivateKey=O):this._primeCode=8}Object.defineProperty(V.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=L(this.__prime,this.__gen)),this._primeCode}}),V.prototype.generateKeys=function(){return this._priv||(this._priv=new n(I(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},V.prototype.computeSecret=function(q){q=new n(q),q=q.toRed(this._prime);var H=q.redPow(this._priv).fromRed(),W=new Buffer$5(H.toArray()),Q=this.getPrime();if(W.length<Q.length){var re=new Buffer$5(Q.length-W.length);re.fill(0),W=Buffer$5.concat([re,W])}return W},V.prototype.getPublicKey=function(H){return U(this._pub,H)},V.prototype.getPrivateKey=function(H){return U(this._priv,H)},V.prototype.getPrime=function(q){return U(this.__prime,q)},V.prototype.getGenerator=function(q){return U(this._gen,q)},V.prototype.setGenerator=function(q,H){return H=H||"utf8",Buffer$5.isBuffer(q)||(q=new Buffer$5(q,H)),this.__gen=q,this._gen=new n(q),this};function U(q,H){var W=new Buffer$5(q.toArray());return H?W.toString(H):W}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$7;hasRequiredBrowser$4=1;var n=requireGeneratePrime(),_=require$$1$1,x=requireDh();function E(T){var A=new Buffer$5(_[T].prime,"hex"),B=new Buffer$5(_[T].gen,"hex");return new x(A,B)}var S={binary:!0,hex:!0,base64:!0};function C(T,A,B,I){return Buffer$5.isBuffer(A)||S[A]===void 0?C(T,"binary",A,B):(A=A||"binary",I=I||"binary",B=B||new Buffer$5([2]),Buffer$5.isBuffer(B)||(B=new Buffer$5(B,I)),typeof T=="number"?new x(n(T,B),B,!0):(Buffer$5.isBuffer(T)||(T=new Buffer$5(T,A)),new x(T,B,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=E,browser$7.createDiffieHellman=browser$7.DiffieHellman=C,browser$7}var sign$2={exports:{}},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(n){(function(_,x){function E(X,F){if(!X)throw new Error(F||"Assertion failed")}function S(X,F){X.super_=F;var z=function(){};z.prototype=F.prototype,X.prototype=new z,X.prototype.constructor=X}function C(X,F,z){if(C.isBN(X))return X;this.negative=0,this.words=null,this.length=0,this.red=null,X!==null&&((F==="le"||F==="be")&&(z=F,F=10),this._init(X||0,F||10,z||"be"))}typeof _=="object"?_.exports=C:x.BN=C,C.BN=C,C.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=require$$0$2.Buffer}catch{}C.isBN=function(F){return F instanceof C?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===C.wordSize&&Array.isArray(F.words)},C.max=function(F,z){return F.cmp(z)>0?F:z},C.min=function(F,z){return F.cmp(z)<0?F:z},C.prototype._init=function(F,z,J){if(typeof F=="number")return this._initNumber(F,z,J);if(typeof F=="object")return this._initArray(F,z,J);z==="hex"&&(z=16),E(z===(z|0)&&z>=2&&z<=36),F=F.toString().replace(/\s+/g,"");var te=0;F[0]==="-"&&(te++,this.negative=1),te<F.length&&(z===16?this._parseHex(F,te,J):(this._parseBase(F,z,te),J==="le"&&this._initArray(this.toArray(),z,J)))},C.prototype._initNumber=function(F,z,J){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},C.prototype._initArray=function(F,z,J){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se,oe,ie=0;if(J==="be")for(te=F.length-1,se=0;te>=0;te-=3)oe=F[te]|F[te-1]<<8|F[te-2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);else if(J==="le")for(te=0,se=0;te<F.length;te+=3)oe=F[te]|F[te+1]<<8|F[te+2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);return this._strip()};function A(X,F){var z=X.charCodeAt(F);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;E(!1,"Invalid character in "+X)}function B(X,F,z){var J=A(X,z);return z-1>=F&&(J|=A(X,z-1)<<4),J}C.prototype._parseHex=function(F,z,J){this.length=Math.ceil((F.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se=0,oe=0,ie;if(J==="be")for(te=F.length-1;te>=z;te-=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8;else{var G=F.length-z;for(te=G%2===0?z+1:z;te<F.length;te+=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8}this._strip()};function I(X,F,z,J){for(var te=0,se=0,oe=Math.min(X.length,z),ie=F;ie<oe;ie++){var G=X.charCodeAt(ie)-48;te*=J,G>=49?se=G-49+10:G>=17?se=G-17+10:se=G,E(G>=0&&se<J,"Invalid character"),te+=se}return te}C.prototype._parseBase=function(F,z,J){this.words=[0],this.length=1;for(var te=0,se=1;se<=67108863;se*=z)te++;te--,se=se/z|0;for(var oe=F.length-J,ie=oe%te,G=Math.min(oe,oe-ie)+J,j=0,ee=J;ee<G;ee+=te)j=I(F,ee,ee+te,z),this.imuln(se),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(ie!==0){var pe=1;for(j=I(F,ee,F.length,z),ee=0;ee<ie;ee++)pe*=z;this.imuln(pe),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this._strip()},C.prototype.copy=function(F){F.words=new Array(this.length);for(var z=0;z<this.length;z++)F.words[z]=this.words[z];F.length=this.length,F.negative=this.negative,F.red=this.red};function M(X,F){X.words=F.words,X.length=F.length,X.negative=F.negative,X.red=F.red}if(C.prototype._move=function(F){M(F,this)},C.prototype.clone=function(){var F=new C(null);return this.copy(F),F},C.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},C.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},C.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{C.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{C.prototype.inspect=O}else C.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];C.prototype.toString=function(F,z){F=F||10,z=z|0||1;var J;if(F===16||F==="hex"){J="";for(var te=0,se=0,oe=0;oe<this.length;oe++){var ie=this.words[oe],G=((ie<<te|se)&16777215).toString(16);se=ie>>>24-te&16777215,te+=2,te>=26&&(te-=26,oe--),se!==0||oe!==this.length-1?J=D[6-G.length]+G+J:J=G+J}for(se!==0&&(J=se.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(F===(F|0)&&F>=2&&F<=36){var j=L[F],ee=V[F];J="";var pe=this.clone();for(pe.negative=0;!pe.isZero();){var he=pe.modrn(ee).toString(F);pe=pe.idivn(ee),pe.isZero()?J=he+J:J=D[j-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}E(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},C.prototype.toJSON=function(){return this.toString(16,2)},T&&(C.prototype.toBuffer=function(F,z){return this.toArrayLike(T,F,z)}),C.prototype.toArray=function(F,z){return this.toArrayLike(Array,F,z)};var U=function(F,z){return F.allocUnsafe?F.allocUnsafe(z):new F(z)};C.prototype.toArrayLike=function(F,z,J){this._strip();var te=this.byteLength(),se=J||Math.max(1,te);E(te<=se,"byte array longer than desired length"),E(se>0,"Requested array length <= 0");var oe=U(F,se),ie=z==="le"?"LE":"BE";return this["_toArrayLike"+ie](oe,te),oe},C.prototype._toArrayLikeLE=function(F,z){for(var J=0,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J++]=ie&255,J<F.length&&(F[J++]=ie>>8&255),J<F.length&&(F[J++]=ie>>16&255),oe===6?(J<F.length&&(F[J++]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J<F.length)for(F[J++]=te;J<F.length;)F[J++]=0},C.prototype._toArrayLikeBE=function(F,z){for(var J=F.length-1,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J--]=ie&255,J>=0&&(F[J--]=ie>>8&255),J>=0&&(F[J--]=ie>>16&255),oe===6?(J>=0&&(F[J--]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J>=0)for(F[J--]=te;J>=0;)F[J--]=0},Math.clz32?C.prototype._countBits=function(F){return 32-Math.clz32(F)}:C.prototype._countBits=function(F){var z=F,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},C.prototype._zeroBits=function(F){if(F===0)return 26;var z=F,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},C.prototype.bitLength=function(){var F=this.words[this.length-1],z=this._countBits(F);return(this.length-1)*26+z};function q(X){for(var F=new Array(X.bitLength()),z=0;z<F.length;z++){var J=z/26|0,te=z%26;F[z]=X.words[J]>>>te&1}return F}C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(F+=J,J!==26)break}return F},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},C.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return this.negative!==0},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var z=0;z<F.length;z++)this.words[z]=this.words[z]|F.words[z];return this._strip()},C.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},C.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},C.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},C.prototype.iuand=function(F){var z;this.length>F.length?z=F:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&F.words[J];return this.length=z.length,this._strip()},C.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},C.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},C.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},C.prototype.iuxor=function(F){var z,J;this.length>F.length?(z=this,J=F):(z=F,J=this);for(var te=0;te<J.length;te++)this.words[te]=z.words[te]^J.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this._strip()},C.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},C.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},C.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},C.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var z=Math.ceil(F/26)|0,J=F%26;this._expand(z),J>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return J>0&&(this.words[te]=~this.words[te]&67108863>>26-J),this._strip()},C.prototype.notn=function(F){return this.clone().inotn(F)},C.prototype.setn=function(F,z){E(typeof F=="number"&&F>=0);var J=F/26|0,te=F%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<te:this.words[J]=this.words[J]&~(1<<te),this._strip()},C.prototype.iadd=function(F){var z;if(this.negative!==0&&F.negative===0)return this.negative=0,z=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,z=this.isub(F),F.negative=1,z._normSign();var J,te;this.length>F.length?(J=this,te=F):(J=F,te=this);for(var se=0,oe=0;oe<te.length;oe++)z=(J.words[oe]|0)+(te.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;for(;se!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;if(this.length=J.length,se!==0)this.words[this.length]=se,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},C.prototype.add=function(F){var z;return F.negative!==0&&this.negative===0?(F.negative=0,z=this.sub(F),F.negative^=1,z):F.negative===0&&this.negative!==0?(this.negative=0,z=F.sub(this),this.negative=1,z):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},C.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var z=this.iadd(F);return F.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var J=this.cmp(F);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,se;J>0?(te=this,se=F):(te=F,se=this);for(var oe=0,ie=0;ie<se.length;ie++)z=(te.words[ie]|0)-(se.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;for(;oe!==0&&ie<te.length;ie++)z=(te.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;if(oe===0&&ie<te.length&&te!==this)for(;ie<te.length;ie++)this.words[ie]=te.words[ie];return this.length=Math.max(this.length,ie),te!==this&&(this.negative=1),this._strip()},C.prototype.sub=function(F){return this.clone().isub(F)};function H(X,F,z){z.negative=F.negative^X.negative;var J=X.length+F.length|0;z.length=J,J=J-1|0;var te=X.words[0]|0,se=F.words[0]|0,oe=te*se,ie=oe&67108863,G=oe/67108864|0;z.words[0]=ie;for(var j=1;j<J;j++){for(var ee=G>>>26,pe=G&67108863,he=Math.min(j,F.length-1),Se=Math.max(0,j-X.length+1);Se<=he;Se++){var we=j-Se|0;te=X.words[we]|0,se=F.words[Se]|0,oe=te*se+pe,ee+=oe/67108864|0,pe=oe&67108863}z.words[j]=pe|0,G=ee|0}return G!==0?z.words[j]=G|0:z.length--,z._strip()}var W=function(F,z,J){var te=F.words,se=z.words,oe=J.words,ie=0,G,j,ee,pe=te[0]|0,he=pe&8191,Se=pe>>>13,we=te[1]|0,xe=we&8191,Ee=we>>>13,ye=te[2]|0,Ce=ye&8191,ve=ye>>>13,Be=te[3]|0,me=Be&8191,Ie=Be>>>13,Ve=te[4]|0,Me=Ve&8191,Ne=Ve>>>13,Pe=te[5]|0,He=Pe&8191,We=Pe>>>13,Ke=te[6]|0,Ge=Ke&8191,nt=Ke>>>13,ot=te[7]|0,Ze=ot&8191,Re=ot>>>13,be=te[8]|0,Ae=be&8191,Le=be>>>13,Xe=te[9]|0,Qe=Xe&8191,et=Xe>>>13,St=se[0]|0,mt=St&8191,dt=St>>>13,jt=se[1]|0,Ct=jt&8191,Rt=jt>>>13,ur=se[2]|0,Gt=ur&8191,Nt=ur>>>13,er=se[3]|0,Mt=er&8191,kt=er>>>13,tr=se[4]|0,Vt=tr&8191,Bt=tr>>>13,ar=se[5]|0,qt=ar&8191,Tt=ar>>>13,ir=se[6]|0,qe=ir&8191,Oe=ir>>>13,De=se[7]|0,ue=De&8191,ke=De>>>13,Fe=se[8]|0,Ue=Fe&8191,ze=Fe>>>13,Ye=se[9]|0,rt=Ye&8191,at=Ye>>>13;J.negative=F.negative^z.negative,J.length=19,G=Math.imul(he,mt),j=Math.imul(he,dt),j=j+Math.imul(Se,mt)|0,ee=Math.imul(Se,dt);var ct=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(xe,mt),j=Math.imul(xe,dt),j=j+Math.imul(Ee,mt)|0,ee=Math.imul(Ee,dt),G=G+Math.imul(he,Ct)|0,j=j+Math.imul(he,Rt)|0,j=j+Math.imul(Se,Ct)|0,ee=ee+Math.imul(Se,Rt)|0;var st=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(Ce,mt),j=Math.imul(Ce,dt),j=j+Math.imul(ve,mt)|0,ee=Math.imul(ve,dt),G=G+Math.imul(xe,Ct)|0,j=j+Math.imul(xe,Rt)|0,j=j+Math.imul(Ee,Ct)|0,ee=ee+Math.imul(Ee,Rt)|0,G=G+Math.imul(he,Gt)|0,j=j+Math.imul(he,Nt)|0,j=j+Math.imul(Se,Gt)|0,ee=ee+Math.imul(Se,Nt)|0;var lt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,G=Math.imul(me,mt),j=Math.imul(me,dt),j=j+Math.imul(Ie,mt)|0,ee=Math.imul(Ie,dt),G=G+Math.imul(Ce,Ct)|0,j=j+Math.imul(Ce,Rt)|0,j=j+Math.imul(ve,Ct)|0,ee=ee+Math.imul(ve,Rt)|0,G=G+Math.imul(xe,Gt)|0,j=j+Math.imul(xe,Nt)|0,j=j+Math.imul(Ee,Gt)|0,ee=ee+Math.imul(Ee,Nt)|0,G=G+Math.imul(he,Mt)|0,j=j+Math.imul(he,kt)|0,j=j+Math.imul(Se,Mt)|0,ee=ee+Math.imul(Se,kt)|0;var ht=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,G=Math.imul(Me,mt),j=Math.imul(Me,dt),j=j+Math.imul(Ne,mt)|0,ee=Math.imul(Ne,dt),G=G+Math.imul(me,Ct)|0,j=j+Math.imul(me,Rt)|0,j=j+Math.imul(Ie,Ct)|0,ee=ee+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ce,Gt)|0,j=j+Math.imul(Ce,Nt)|0,j=j+Math.imul(ve,Gt)|0,ee=ee+Math.imul(ve,Nt)|0,G=G+Math.imul(xe,Mt)|0,j=j+Math.imul(xe,kt)|0,j=j+Math.imul(Ee,Mt)|0,ee=ee+Math.imul(Ee,kt)|0,G=G+Math.imul(he,Vt)|0,j=j+Math.imul(he,Bt)|0,j=j+Math.imul(Se,Vt)|0,ee=ee+Math.imul(Se,Bt)|0;var bt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(bt>>>26)|0,bt&=67108863,G=Math.imul(He,mt),j=Math.imul(He,dt),j=j+Math.imul(We,mt)|0,ee=Math.imul(We,dt),G=G+Math.imul(Me,Ct)|0,j=j+Math.imul(Me,Rt)|0,j=j+Math.imul(Ne,Ct)|0,ee=ee+Math.imul(Ne,Rt)|0,G=G+Math.imul(me,Gt)|0,j=j+Math.imul(me,Nt)|0,j=j+Math.imul(Ie,Gt)|0,ee=ee+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ce,Mt)|0,j=j+Math.imul(Ce,kt)|0,j=j+Math.imul(ve,Mt)|0,ee=ee+Math.imul(ve,kt)|0,G=G+Math.imul(xe,Vt)|0,j=j+Math.imul(xe,Bt)|0,j=j+Math.imul(Ee,Vt)|0,ee=ee+Math.imul(Ee,Bt)|0,G=G+Math.imul(he,qt)|0,j=j+Math.imul(he,Tt)|0,j=j+Math.imul(Se,qt)|0,ee=ee+Math.imul(Se,Tt)|0;var Et=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,mt),j=Math.imul(Ge,dt),j=j+Math.imul(nt,mt)|0,ee=Math.imul(nt,dt),G=G+Math.imul(He,Ct)|0,j=j+Math.imul(He,Rt)|0,j=j+Math.imul(We,Ct)|0,ee=ee+Math.imul(We,Rt)|0,G=G+Math.imul(Me,Gt)|0,j=j+Math.imul(Me,Nt)|0,j=j+Math.imul(Ne,Gt)|0,ee=ee+Math.imul(Ne,Nt)|0,G=G+Math.imul(me,Mt)|0,j=j+Math.imul(me,kt)|0,j=j+Math.imul(Ie,Mt)|0,ee=ee+Math.imul(Ie,kt)|0,G=G+Math.imul(Ce,Vt)|0,j=j+Math.imul(Ce,Bt)|0,j=j+Math.imul(ve,Vt)|0,ee=ee+Math.imul(ve,Bt)|0,G=G+Math.imul(xe,qt)|0,j=j+Math.imul(xe,Tt)|0,j=j+Math.imul(Ee,qt)|0,ee=ee+Math.imul(Ee,Tt)|0,G=G+Math.imul(he,qe)|0,j=j+Math.imul(he,Oe)|0,j=j+Math.imul(Se,qe)|0,ee=ee+Math.imul(Se,Oe)|0;var gt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,mt),j=Math.imul(Ze,dt),j=j+Math.imul(Re,mt)|0,ee=Math.imul(Re,dt),G=G+Math.imul(Ge,Ct)|0,j=j+Math.imul(Ge,Rt)|0,j=j+Math.imul(nt,Ct)|0,ee=ee+Math.imul(nt,Rt)|0,G=G+Math.imul(He,Gt)|0,j=j+Math.imul(He,Nt)|0,j=j+Math.imul(We,Gt)|0,ee=ee+Math.imul(We,Nt)|0,G=G+Math.imul(Me,Mt)|0,j=j+Math.imul(Me,kt)|0,j=j+Math.imul(Ne,Mt)|0,ee=ee+Math.imul(Ne,kt)|0,G=G+Math.imul(me,Vt)|0,j=j+Math.imul(me,Bt)|0,j=j+Math.imul(Ie,Vt)|0,ee=ee+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ce,qt)|0,j=j+Math.imul(Ce,Tt)|0,j=j+Math.imul(ve,qt)|0,ee=ee+Math.imul(ve,Tt)|0,G=G+Math.imul(xe,qe)|0,j=j+Math.imul(xe,Oe)|0,j=j+Math.imul(Ee,qe)|0,ee=ee+Math.imul(Ee,Oe)|0,G=G+Math.imul(he,ue)|0,j=j+Math.imul(he,ke)|0,j=j+Math.imul(Se,ue)|0,ee=ee+Math.imul(Se,ke)|0;var wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,G=Math.imul(Ae,mt),j=Math.imul(Ae,dt),j=j+Math.imul(Le,mt)|0,ee=Math.imul(Le,dt),G=G+Math.imul(Ze,Ct)|0,j=j+Math.imul(Ze,Rt)|0,j=j+Math.imul(Re,Ct)|0,ee=ee+Math.imul(Re,Rt)|0,G=G+Math.imul(Ge,Gt)|0,j=j+Math.imul(Ge,Nt)|0,j=j+Math.imul(nt,Gt)|0,ee=ee+Math.imul(nt,Nt)|0,G=G+Math.imul(He,Mt)|0,j=j+Math.imul(He,kt)|0,j=j+Math.imul(We,Mt)|0,ee=ee+Math.imul(We,kt)|0,G=G+Math.imul(Me,Vt)|0,j=j+Math.imul(Me,Bt)|0,j=j+Math.imul(Ne,Vt)|0,ee=ee+Math.imul(Ne,Bt)|0,G=G+Math.imul(me,qt)|0,j=j+Math.imul(me,Tt)|0,j=j+Math.imul(Ie,qt)|0,ee=ee+Math.imul(Ie,Tt)|0,G=G+Math.imul(Ce,qe)|0,j=j+Math.imul(Ce,Oe)|0,j=j+Math.imul(ve,qe)|0,ee=ee+Math.imul(ve,Oe)|0,G=G+Math.imul(xe,ue)|0,j=j+Math.imul(xe,ke)|0,j=j+Math.imul(Ee,ue)|0,ee=ee+Math.imul(Ee,ke)|0,G=G+Math.imul(he,Ue)|0,j=j+Math.imul(he,ze)|0,j=j+Math.imul(Se,Ue)|0,ee=ee+Math.imul(Se,ze)|0;var Dt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,G=Math.imul(Qe,mt),j=Math.imul(Qe,dt),j=j+Math.imul(et,mt)|0,ee=Math.imul(et,dt),G=G+Math.imul(Ae,Ct)|0,j=j+Math.imul(Ae,Rt)|0,j=j+Math.imul(Le,Ct)|0,ee=ee+Math.imul(Le,Rt)|0,G=G+Math.imul(Ze,Gt)|0,j=j+Math.imul(Ze,Nt)|0,j=j+Math.imul(Re,Gt)|0,ee=ee+Math.imul(Re,Nt)|0,G=G+Math.imul(Ge,Mt)|0,j=j+Math.imul(Ge,kt)|0,j=j+Math.imul(nt,Mt)|0,ee=ee+Math.imul(nt,kt)|0,G=G+Math.imul(He,Vt)|0,j=j+Math.imul(He,Bt)|0,j=j+Math.imul(We,Vt)|0,ee=ee+Math.imul(We,Bt)|0,G=G+Math.imul(Me,qt)|0,j=j+Math.imul(Me,Tt)|0,j=j+Math.imul(Ne,qt)|0,ee=ee+Math.imul(Ne,Tt)|0,G=G+Math.imul(me,qe)|0,j=j+Math.imul(me,Oe)|0,j=j+Math.imul(Ie,qe)|0,ee=ee+Math.imul(Ie,Oe)|0,G=G+Math.imul(Ce,ue)|0,j=j+Math.imul(Ce,ke)|0,j=j+Math.imul(ve,ue)|0,ee=ee+Math.imul(ve,ke)|0,G=G+Math.imul(xe,Ue)|0,j=j+Math.imul(xe,ze)|0,j=j+Math.imul(Ee,Ue)|0,ee=ee+Math.imul(Ee,ze)|0,G=G+Math.imul(he,rt)|0,j=j+Math.imul(he,at)|0,j=j+Math.imul(Se,rt)|0,ee=ee+Math.imul(Se,at)|0;var Ft=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Qe,Ct),j=Math.imul(Qe,Rt),j=j+Math.imul(et,Ct)|0,ee=Math.imul(et,Rt),G=G+Math.imul(Ae,Gt)|0,j=j+Math.imul(Ae,Nt)|0,j=j+Math.imul(Le,Gt)|0,ee=ee+Math.imul(Le,Nt)|0,G=G+Math.imul(Ze,Mt)|0,j=j+Math.imul(Ze,kt)|0,j=j+Math.imul(Re,Mt)|0,ee=ee+Math.imul(Re,kt)|0,G=G+Math.imul(Ge,Vt)|0,j=j+Math.imul(Ge,Bt)|0,j=j+Math.imul(nt,Vt)|0,ee=ee+Math.imul(nt,Bt)|0,G=G+Math.imul(He,qt)|0,j=j+Math.imul(He,Tt)|0,j=j+Math.imul(We,qt)|0,ee=ee+Math.imul(We,Tt)|0,G=G+Math.imul(Me,qe)|0,j=j+Math.imul(Me,Oe)|0,j=j+Math.imul(Ne,qe)|0,ee=ee+Math.imul(Ne,Oe)|0,G=G+Math.imul(me,ue)|0,j=j+Math.imul(me,ke)|0,j=j+Math.imul(Ie,ue)|0,ee=ee+Math.imul(Ie,ke)|0,G=G+Math.imul(Ce,Ue)|0,j=j+Math.imul(Ce,ze)|0,j=j+Math.imul(ve,Ue)|0,ee=ee+Math.imul(ve,ze)|0,G=G+Math.imul(xe,rt)|0,j=j+Math.imul(xe,at)|0,j=j+Math.imul(Ee,rt)|0,ee=ee+Math.imul(Ee,at)|0;var Kt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Qe,Gt),j=Math.imul(Qe,Nt),j=j+Math.imul(et,Gt)|0,ee=Math.imul(et,Nt),G=G+Math.imul(Ae,Mt)|0,j=j+Math.imul(Ae,kt)|0,j=j+Math.imul(Le,Mt)|0,ee=ee+Math.imul(Le,kt)|0,G=G+Math.imul(Ze,Vt)|0,j=j+Math.imul(Ze,Bt)|0,j=j+Math.imul(Re,Vt)|0,ee=ee+Math.imul(Re,Bt)|0,G=G+Math.imul(Ge,qt)|0,j=j+Math.imul(Ge,Tt)|0,j=j+Math.imul(nt,qt)|0,ee=ee+Math.imul(nt,Tt)|0,G=G+Math.imul(He,qe)|0,j=j+Math.imul(He,Oe)|0,j=j+Math.imul(We,qe)|0,ee=ee+Math.imul(We,Oe)|0,G=G+Math.imul(Me,ue)|0,j=j+Math.imul(Me,ke)|0,j=j+Math.imul(Ne,ue)|0,ee=ee+Math.imul(Ne,ke)|0,G=G+Math.imul(me,Ue)|0,j=j+Math.imul(me,ze)|0,j=j+Math.imul(Ie,Ue)|0,ee=ee+Math.imul(Ie,ze)|0,G=G+Math.imul(Ce,rt)|0,j=j+Math.imul(Ce,at)|0,j=j+Math.imul(ve,rt)|0,ee=ee+Math.imul(ve,at)|0;var Ut=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,G=Math.imul(Qe,Mt),j=Math.imul(Qe,kt),j=j+Math.imul(et,Mt)|0,ee=Math.imul(et,kt),G=G+Math.imul(Ae,Vt)|0,j=j+Math.imul(Ae,Bt)|0,j=j+Math.imul(Le,Vt)|0,ee=ee+Math.imul(Le,Bt)|0,G=G+Math.imul(Ze,qt)|0,j=j+Math.imul(Ze,Tt)|0,j=j+Math.imul(Re,qt)|0,ee=ee+Math.imul(Re,Tt)|0,G=G+Math.imul(Ge,qe)|0,j=j+Math.imul(Ge,Oe)|0,j=j+Math.imul(nt,qe)|0,ee=ee+Math.imul(nt,Oe)|0,G=G+Math.imul(He,ue)|0,j=j+Math.imul(He,ke)|0,j=j+Math.imul(We,ue)|0,ee=ee+Math.imul(We,ke)|0,G=G+Math.imul(Me,Ue)|0,j=j+Math.imul(Me,ze)|0,j=j+Math.imul(Ne,Ue)|0,ee=ee+Math.imul(Ne,ze)|0,G=G+Math.imul(me,rt)|0,j=j+Math.imul(me,at)|0,j=j+Math.imul(Ie,rt)|0,ee=ee+Math.imul(Ie,at)|0;var Xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,G=Math.imul(Qe,Vt),j=Math.imul(Qe,Bt),j=j+Math.imul(et,Vt)|0,ee=Math.imul(et,Bt),G=G+Math.imul(Ae,qt)|0,j=j+Math.imul(Ae,Tt)|0,j=j+Math.imul(Le,qt)|0,ee=ee+Math.imul(Le,Tt)|0,G=G+Math.imul(Ze,qe)|0,j=j+Math.imul(Ze,Oe)|0,j=j+Math.imul(Re,qe)|0,ee=ee+Math.imul(Re,Oe)|0,G=G+Math.imul(Ge,ue)|0,j=j+Math.imul(Ge,ke)|0,j=j+Math.imul(nt,ue)|0,ee=ee+Math.imul(nt,ke)|0,G=G+Math.imul(He,Ue)|0,j=j+Math.imul(He,ze)|0,j=j+Math.imul(We,Ue)|0,ee=ee+Math.imul(We,ze)|0,G=G+Math.imul(Me,rt)|0,j=j+Math.imul(Me,at)|0,j=j+Math.imul(Ne,rt)|0,ee=ee+Math.imul(Ne,at)|0;var Zt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,G=Math.imul(Qe,qt),j=Math.imul(Qe,Tt),j=j+Math.imul(et,qt)|0,ee=Math.imul(et,Tt),G=G+Math.imul(Ae,qe)|0,j=j+Math.imul(Ae,Oe)|0,j=j+Math.imul(Le,qe)|0,ee=ee+Math.imul(Le,Oe)|0,G=G+Math.imul(Ze,ue)|0,j=j+Math.imul(Ze,ke)|0,j=j+Math.imul(Re,ue)|0,ee=ee+Math.imul(Re,ke)|0,G=G+Math.imul(Ge,Ue)|0,j=j+Math.imul(Ge,ze)|0,j=j+Math.imul(nt,Ue)|0,ee=ee+Math.imul(nt,ze)|0,G=G+Math.imul(He,rt)|0,j=j+Math.imul(He,at)|0,j=j+Math.imul(We,rt)|0,ee=ee+Math.imul(We,at)|0;var Wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Qe,qe),j=Math.imul(Qe,Oe),j=j+Math.imul(et,qe)|0,ee=Math.imul(et,Oe),G=G+Math.imul(Ae,ue)|0,j=j+Math.imul(Ae,ke)|0,j=j+Math.imul(Le,ue)|0,ee=ee+Math.imul(Le,ke)|0,G=G+Math.imul(Ze,Ue)|0,j=j+Math.imul(Ze,ze)|0,j=j+Math.imul(Re,Ue)|0,ee=ee+Math.imul(Re,ze)|0,G=G+Math.imul(Ge,rt)|0,j=j+Math.imul(Ge,at)|0,j=j+Math.imul(nt,rt)|0,ee=ee+Math.imul(nt,at)|0;var yt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(Qe,ue),j=Math.imul(Qe,ke),j=j+Math.imul(et,ue)|0,ee=Math.imul(et,ke),G=G+Math.imul(Ae,Ue)|0,j=j+Math.imul(Ae,ze)|0,j=j+Math.imul(Le,Ue)|0,ee=ee+Math.imul(Le,ze)|0,G=G+Math.imul(Ze,rt)|0,j=j+Math.imul(Ze,at)|0,j=j+Math.imul(Re,rt)|0,ee=ee+Math.imul(Re,at)|0;var xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Qe,Ue),j=Math.imul(Qe,ze),j=j+Math.imul(et,Ue)|0,ee=Math.imul(et,ze),G=G+Math.imul(Ae,rt)|0,j=j+Math.imul(Ae,at)|0,j=j+Math.imul(Le,rt)|0,ee=ee+Math.imul(Le,at)|0;var Pt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,G=Math.imul(Qe,rt),j=Math.imul(Qe,at),j=j+Math.imul(et,rt)|0,ee=Math.imul(et,at);var It=(ie+G|0)+((j&8191)<<13)|0;return ie=(ee+(j>>>13)|0)+(It>>>26)|0,It&=67108863,oe[0]=ct,oe[1]=st,oe[2]=lt,oe[3]=ht,oe[4]=bt,oe[5]=Et,oe[6]=gt,oe[7]=wt,oe[8]=Dt,oe[9]=Ft,oe[10]=Kt,oe[11]=Ut,oe[12]=Xt,oe[13]=Zt,oe[14]=Wt,oe[15]=yt,oe[16]=xt,oe[17]=Pt,oe[18]=It,ie!==0&&(oe[19]=ie,J.length++),J};Math.imul||(W=H);function Q(X,F,z){z.negative=F.negative^X.negative,z.length=X.length+F.length;for(var J=0,te=0,se=0;se<z.length-1;se++){var oe=te;te=0;for(var ie=J&67108863,G=Math.min(se,F.length-1),j=Math.max(0,se-X.length+1);j<=G;j++){var ee=se-j,pe=X.words[ee]|0,he=F.words[j]|0,Se=pe*he,we=Se&67108863;oe=oe+(Se/67108864|0)|0,we=we+ie|0,ie=we&67108863,oe=oe+(we>>>26)|0,te+=oe>>>26,oe&=67108863}z.words[se]=ie,J=oe,oe=te}return J!==0?z.words[se]=J:z.length--,z._strip()}function re(X,F,z){return Q(X,F,z)}C.prototype.mulTo=function(F,z){var J,te=this.length+F.length;return this.length===10&&F.length===10?J=W(this,F,z):te<63?J=H(this,F,z):te<1024?J=Q(this,F,z):J=re(this,F,z),J},C.prototype.mul=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),this.mulTo(F,z)},C.prototype.mulf=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),re(this,F,z)},C.prototype.imul=function(F){return this.clone().mulTo(F,this)},C.prototype.imuln=function(F){var z=F<0;z&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var J=0,te=0;te<this.length;te++){var se=(this.words[te]|0)*F,oe=(se&67108863)+(J&67108863);J>>=26,J+=se/67108864|0,J+=oe>>>26,this.words[te]=oe&67108863}return J!==0&&(this.words[te]=J,this.length++),z?this.ineg():this},C.prototype.muln=function(F){return this.clone().imuln(F)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(F){var z=q(F);if(z.length===0)return new C(1);for(var J=this,te=0;te<z.length&&z[te]===0;te++,J=J.sqr());if(++te<z.length)for(var se=J.sqr();te<z.length;te++,se=se.sqr())z[te]!==0&&(J=J.mul(se));return J},C.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=67108863>>>26-z<<26-z,se;if(z!==0){var oe=0;for(se=0;se<this.length;se++){var ie=this.words[se]&te,G=(this.words[se]|0)-ie<<z;this.words[se]=G|oe,oe=ie>>>26-z}oe&&(this.words[se]=oe,this.length++)}if(J!==0){for(se=this.length-1;se>=0;se--)this.words[se+J]=this.words[se];for(se=0;se<J;se++)this.words[se]=0;this.length+=J}return this._strip()},C.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},C.prototype.iushrn=function(F,z,J){E(typeof F=="number"&&F>=0);var te;z?te=(z-z%26)/26:te=0;var se=F%26,oe=Math.min((F-se)/26,this.length),ie=67108863^67108863>>>se<<se,G=J;if(te-=oe,te=Math.max(0,te),G){for(var j=0;j<oe;j++)G.words[j]=this.words[j];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,j=0;j<this.length;j++)this.words[j]=this.words[j+oe];else this.words[0]=0,this.length=1;var ee=0;for(j=this.length-1;j>=0&&(ee!==0||j>=te);j--){var pe=this.words[j]|0;this.words[j]=ee<<26-se|pe>>>se,ee=pe&ie}return G&&ee!==0&&(G.words[G.length++]=ee),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},C.prototype.ishrn=function(F,z,J){return E(this.negative===0),this.iushrn(F,z,J)},C.prototype.shln=function(F){return this.clone().ishln(F)},C.prototype.ushln=function(F){return this.clone().iushln(F)},C.prototype.shrn=function(F){return this.clone().ishrn(F)},C.prototype.ushrn=function(F){return this.clone().iushrn(F)},C.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return!1;var se=this.words[J];return!!(se&te)},C.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this._strip()},C.prototype.maskn=function(F){return this.clone().imaskn(F)},C.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},C.prototype._iaddn=function(F){this.words[0]+=F;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},C.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},C.prototype.addn=function(F){return this.clone().iaddn(F)},C.prototype.subn=function(F){return this.clone().isubn(F)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(F,z,J){var te=F.length+J,se;this._expand(te);var oe,ie=0;for(se=0;se<F.length;se++){oe=(this.words[se+J]|0)+ie;var G=(F.words[se]|0)*z;oe-=G&67108863,ie=(oe>>26)-(G/67108864|0),this.words[se+J]=oe&67108863}for(;se<this.length-J;se++)oe=(this.words[se+J]|0)+ie,ie=oe>>26,this.words[se+J]=oe&67108863;if(ie===0)return this._strip();for(E(ie===-1),ie=0,se=0;se<this.length;se++)oe=-(this.words[se]|0)+ie,ie=oe>>26,this.words[se]=oe&67108863;return this.negative=1,this._strip()},C.prototype._wordDiv=function(F,z){var J=this.length-F.length,te=this.clone(),se=F,oe=se.words[se.length-1]|0,ie=this._countBits(oe);J=26-ie,J!==0&&(se=se.ushln(J),te.iushln(J),oe=se.words[se.length-1]|0);var G=te.length-se.length,j;if(z!=="mod"){j=new C(null),j.length=G+1,j.words=new Array(j.length);for(var ee=0;ee<j.length;ee++)j.words[ee]=0}var pe=te.clone()._ishlnsubmul(se,1,G);pe.negative===0&&(te=pe,j&&(j.words[G]=1));for(var he=G-1;he>=0;he--){var Se=(te.words[se.length+he]|0)*67108864+(te.words[se.length+he-1]|0);for(Se=Math.min(Se/oe|0,67108863),te._ishlnsubmul(se,Se,he);te.negative!==0;)Se--,te.negative=0,te._ishlnsubmul(se,1,he),te.isZero()||(te.negative^=1);j&&(j.words[he]=Se)}return j&&j._strip(),te._strip(),z!=="div"&&J!==0&&te.iushrn(J),{div:j||null,mod:te}},C.prototype.divmod=function(F,z,J){if(E(!F.isZero()),this.isZero())return{div:new C(0),mod:new C(0)};var te,se,oe;return this.negative!==0&&F.negative===0?(oe=this.neg().divmod(F,z),z!=="mod"&&(te=oe.div.neg()),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.iadd(F)),{div:te,mod:se}):this.negative===0&&F.negative!==0?(oe=this.divmod(F.neg(),z),z!=="mod"&&(te=oe.div.neg()),{div:te,mod:oe.mod}):this.negative&F.negative?(oe=this.neg().divmod(F.neg(),z),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.isub(F)),{div:oe.div,mod:se}):F.length>this.length||this.cmp(F)<0?{div:new C(0),mod:this}:F.length===1?z==="div"?{div:this.divn(F.words[0]),mod:null}:z==="mod"?{div:null,mod:new C(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new C(this.modrn(F.words[0]))}:this._wordDiv(F,z)},C.prototype.div=function(F){return this.divmod(F,"div",!1).div},C.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},C.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},C.prototype.divRound=function(F){var z=this.divmod(F);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(F):z.mod,te=F.ushrn(1),se=F.andln(1),oe=J.cmp(te);return oe<0||se===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},C.prototype.modrn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=(1<<26)%F,te=0,se=this.length-1;se>=0;se--)te=(J*te+(this.words[se]|0))%F;return z?-te:te},C.prototype.modn=function(F){return this.modrn(F)},C.prototype.idivn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=0,te=this.length-1;te>=0;te--){var se=(this.words[te]|0)+J*67108864;this.words[te]=se/F|0,J=se%F}return this._strip(),z?this.ineg():this},C.prototype.divn=function(F){return this.clone().idivn(F)},C.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=new C(0),ie=new C(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var j=J.clone(),ee=z.clone();!z.isZero();){for(var pe=0,he=1;!(z.words[0]&he)&&pe<26;++pe,he<<=1);if(pe>0)for(z.iushrn(pe);pe-- >0;)(te.isOdd()||se.isOdd())&&(te.iadd(j),se.isub(ee)),te.iushrn(1),se.iushrn(1);for(var Se=0,we=1;!(J.words[0]&we)&&Se<26;++Se,we<<=1);if(Se>0)for(J.iushrn(Se);Se-- >0;)(oe.isOdd()||ie.isOdd())&&(oe.iadd(j),ie.isub(ee)),oe.iushrn(1),ie.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(oe),se.isub(ie)):(J.isub(z),oe.isub(te),ie.isub(se))}return{a:oe,b:ie,gcd:J.iushln(G)}},C.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var ie=0,G=1;!(z.words[0]&G)&&ie<26;++ie,G<<=1);if(ie>0)for(z.iushrn(ie);ie-- >0;)te.isOdd()&&te.iadd(oe),te.iushrn(1);for(var j=0,ee=1;!(J.words[0]&ee)&&j<26;++j,ee<<=1);if(j>0)for(J.iushrn(j);j-- >0;)se.isOdd()&&se.iadd(oe),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(se)):(J.isub(z),se.isub(te))}var pe;return z.cmpn(1)===0?pe=te:pe=se,pe.cmpn(0)<0&&pe.iadd(F),pe},C.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var z=this.clone(),J=F.clone();z.negative=0,J.negative=0;for(var te=0;z.isEven()&&J.isEven();te++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var se=z.cmp(J);if(se<0){var oe=z;z=J,J=oe}else if(se===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(te)},C.prototype.invm=function(F){return this.egcd(F).a.umod(F)},C.prototype.isEven=function(){return(this.words[0]&1)===0},C.prototype.isOdd=function(){return(this.words[0]&1)===1},C.prototype.andln=function(F){return this.words[0]&F},C.prototype.bincn=function(F){E(typeof F=="number");var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=te,this;for(var se=te,oe=J;se!==0&&oe<this.length;oe++){var ie=this.words[oe]|0;ie+=se,se=ie>>>26,ie&=67108863,this.words[oe]=ie}return se!==0&&(this.words[oe]=se,this.length++),this},C.prototype.isZero=function(){return this.length===1&&this.words[0]===0},C.prototype.cmpn=function(F){var z=F<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(F=-F),E(F<=67108863,"Number is too big");var te=this.words[0]|0;J=te===F?0:te<F?-1:1}return this.negative!==0?-J|0:J},C.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var z=this.ucmp(F);return this.negative!==0?-z|0:z},C.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var te=this.words[J]|0,se=F.words[J]|0;if(te!==se){te<se?z=-1:te>se&&(z=1);break}}return z},C.prototype.gtn=function(F){return this.cmpn(F)===1},C.prototype.gt=function(F){return this.cmp(F)===1},C.prototype.gten=function(F){return this.cmpn(F)>=0},C.prototype.gte=function(F){return this.cmp(F)>=0},C.prototype.ltn=function(F){return this.cmpn(F)===-1},C.prototype.lt=function(F){return this.cmp(F)===-1},C.prototype.lten=function(F){return this.cmpn(F)<=0},C.prototype.lte=function(F){return this.cmp(F)<=0},C.prototype.eqn=function(F){return this.cmpn(F)===0},C.prototype.eq=function(F){return this.cmp(F)===0},C.red=function(F){return new _e(F)},C.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},C.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(F){return this.red=F,this},C.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},C.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},C.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},C.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},C.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},C.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},C.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},C.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},C.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var ce={k256:null,p224:null,p192:null,p25519:null};function ne(X,F){this.name=X,this.p=new C(F,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ne.prototype._tmp=function(){var F=new C(null);return F.words=new Array(Math.ceil(this.n/13)),F},ne.prototype.ireduce=function(F){var z=F,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var te=J<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},ne.prototype.split=function(F,z){F.iushrn(this.n,0,z)},ne.prototype.imulK=function(F){return F.imul(this.k)};function Y(){ne.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Y,ne),Y.prototype.split=function(F,z){for(var J=4194303,te=Math.min(F.length,9),se=0;se<te;se++)z.words[se]=F.words[se];if(z.length=te,F.length<=9){F.words[0]=0,F.length=1;return}var oe=F.words[9];for(z.words[z.length++]=oe&J,se=10;se<F.length;se++){var ie=F.words[se]|0;F.words[se-10]=(ie&J)<<4|oe>>>22,oe=ie}oe>>>=22,F.words[se-10]=oe,oe===0&&F.length>10?F.length-=10:F.length-=9},Y.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var z=0,J=0;J<F.length;J++){var te=F.words[J]|0;z+=te*977,F.words[J]=z&67108863,z=te*64+(z/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function fe(){ne.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(fe,ne);function ge(){ne.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ge,ne);function $e(){ne.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S($e,ne),$e.prototype.imulK=function(F){for(var z=0,J=0;J<F.length;J++){var te=(F.words[J]|0)*19+z,se=te&67108863;te>>>=26,F.words[J]=se,z=te}return z!==0&&(F.words[F.length++]=z),F},C._prime=function(F){if(ce[F])return ce[F];var z;if(F==="k256")z=new Y;else if(F==="p224")z=new fe;else if(F==="p192")z=new ge;else if(F==="p25519")z=new $e;else throw new Error("Unknown prime "+F);return ce[F]=z,z};function _e(X){if(typeof X=="string"){var F=C._prime(X);this.m=F.p,this.prime=F}else E(X.gtn(1),"modulus must be greater than 1"),this.m=X,this.prime=null}_e.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},_e.prototype._verify2=function(F,z){E((F.negative|z.negative)===0,"red works only with positives"),E(F.red&&F.red===z.red,"red works only with red numbers")},_e.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(M(F,F.umod(this.m)._forceRed(this)),F)},_e.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},_e.prototype.add=function(F,z){this._verify2(F,z);var J=F.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},_e.prototype.iadd=function(F,z){this._verify2(F,z);var J=F.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},_e.prototype.sub=function(F,z){this._verify2(F,z);var J=F.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},_e.prototype.isub=function(F,z){this._verify2(F,z);var J=F.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},_e.prototype.shl=function(F,z){return this._verify1(F),this.imod(F.ushln(z))},_e.prototype.imul=function(F,z){return this._verify2(F,z),this.imod(F.imul(z))},_e.prototype.mul=function(F,z){return this._verify2(F,z),this.imod(F.mul(z))},_e.prototype.isqr=function(F){return this.imul(F,F.clone())},_e.prototype.sqr=function(F){return this.mul(F,F)},_e.prototype.sqrt=function(F){if(F.isZero())return F.clone();var z=this.m.andln(3);if(E(z%2===1),z===3){var J=this.m.add(new C(1)).iushrn(2);return this.pow(F,J)}for(var te=this.m.subn(1),se=0;!te.isZero()&&te.andln(1)===0;)se++,te.iushrn(1);E(!te.isZero());var oe=new C(1).toRed(this),ie=oe.redNeg(),G=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new C(2*j*j).toRed(this);this.pow(j,G).cmp(ie)!==0;)j.redIAdd(ie);for(var ee=this.pow(j,te),pe=this.pow(F,te.addn(1).iushrn(1)),he=this.pow(F,te),Se=se;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();E(xe<Se);var Ee=this.pow(ee,new C(1).iushln(Se-xe-1));pe=pe.redMul(Ee),ee=Ee.redSqr(),he=he.redMul(ee),Se=xe}return pe},_e.prototype.invm=function(F){var z=F._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},_e.prototype.pow=function(F,z){if(z.isZero())return new C(1).toRed(this);if(z.cmpn(1)===0)return F.clone();var J=4,te=new Array(1<<J);te[0]=new C(1).toRed(this),te[1]=F;for(var se=2;se<te.length;se++)te[se]=this.mul(te[se-1],F);var oe=te[0],ie=0,G=0,j=z.bitLength()%26;for(j===0&&(j=26),se=z.length-1;se>=0;se--){for(var ee=z.words[se],pe=j-1;pe>=0;pe--){var he=ee>>pe&1;if(oe!==te[0]&&(oe=this.sqr(oe)),he===0&&ie===0){G=0;continue}ie<<=1,ie|=he,G++,!(G!==J&&(se!==0||pe!==0))&&(oe=this.mul(oe,te[ie]),G=0,ie=0)}j=26}return oe},_e.prototype.convertTo=function(F){var z=F.umod(this.m);return z===F?z.clone():z},_e.prototype.convertFrom=function(F){var z=F.clone();return z.red=null,z},C.mont=function(F){return new ae(F)};function ae(X){_e.call(this,X),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(ae,_e),ae.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},ae.prototype.convertFrom=function(F){var z=this.imod(F.mul(this.rinv));return z.red=null,z},ae.prototype.imul=function(F,z){if(F.isZero()||z.isZero())return F.words[0]=0,F.length=1,F;var J=F.imul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.mul=function(F,z){if(F.isZero()||z.isZero())return new C(0)._forceRed(this);var J=F.mul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.invm=function(F){var z=this.imod(F._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(n,commonjsGlobal)}(bn$3)),bn$3.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var n=requireBn$1(),_=requireBrowser$b();function x(C){var T=E(C),A=T.toRed(n.mont(C.modulus)).redPow(new n(C.publicExponent)).fromRed();return{blinder:A,unblinder:T.invm(C.modulus)}}function E(C){var T=C.modulus.byteLength(),A;do A=new n(_(T));while(A.cmp(C.modulus)>=0||!A.umod(C.prime1)||!A.umod(C.prime2));return A}function S(C,T){var A=x(T),B=T.modulus.byteLength(),I=new n(C).mul(A.blinder).umod(T.modulus),M=I.toRed(n.mont(T.prime1)),O=I.toRed(n.mont(T.prime2)),D=T.coefficient,L=T.prime1,V=T.prime2,U=M.redPow(T.exponent1).fromRed(),q=O.redPow(T.exponent2).fromRed(),H=U.isub(q).imul(D).umod(L).imul(V);return q.iadd(H).imul(A.unblinder).umod(T.modulus).toArrayLike(Buffer$5,"be",B)}return S.getr=E,browserifyRsa=S,browserifyRsa}var elliptic$3={};const name$4="elliptic",version$i="6.5.4",description$1="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies$1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name:name$4,version:version$i,description:description$1,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies:dependencies$1};var utils$p={},utils$o={};(function(n){var _=n;function x(C,T){if(Array.isArray(C))return C.slice();if(!C)return[];var A=[];if(typeof C!="string"){for(var B=0;B<C.length;B++)A[B]=C[B]|0;return A}if(T==="hex"){C=C.replace(/[^a-z0-9]+/ig,""),C.length%2!==0&&(C="0"+C);for(var B=0;B<C.length;B+=2)A.push(parseInt(C[B]+C[B+1],16))}else for(var B=0;B<C.length;B++){var I=C.charCodeAt(B),M=I>>8,O=I&255;M?A.push(M,O):A.push(O)}return A}_.toArray=x;function E(C){return C.length===1?"0"+C:C}_.zero2=E;function S(C){for(var T="",A=0;A<C.length;A++)T+=E(C[A].toString(16));return T}_.toHex=S,_.encode=function(T,A){return A==="hex"?S(T):T}})(utils$o);(function(n){var _=n,x=bnExports$2,E=minimalisticAssert$1,S=utils$o;_.assert=E,_.toArray=S.toArray,_.zero2=S.zero2,_.toHex=S.toHex,_.encode=S.encode;function C(M,O,D){var L=new Array(Math.max(M.bitLength(),D)+1);L.fill(0);for(var V=1<<O+1,U=M.clone(),q=0;q<L.length;q++){var H,W=U.andln(V-1);U.isOdd()?(W>(V>>1)-1?H=(V>>1)-W:H=W,U.isubn(H)):H=0,L[q]=H,U.iushrn(1)}return L}_.getNAF=C;function T(M,O){var D=[[],[]];M=M.clone(),O=O.clone();for(var L=0,V=0,U;M.cmpn(-L)>0||O.cmpn(-V)>0;){var q=M.andln(3)+L&3,H=O.andln(3)+V&3;q===3&&(q=-1),H===3&&(H=-1);var W;q&1?(U=M.andln(7)+L&7,(U===3||U===5)&&H===2?W=-q:W=q):W=0,D[0].push(W);var Q;H&1?(U=O.andln(7)+V&7,(U===3||U===5)&&q===2?Q=-H:Q=H):Q=0,D[1].push(Q),2*L===W+1&&(L=1-L),2*V===Q+1&&(V=1-V),M.iushrn(1),O.iushrn(1)}return D}_.getJSF=T;function A(M,O,D){var L="_"+O;M.prototype[O]=function(){return this[L]!==void 0?this[L]:this[L]=D.call(this)}}_.cachedProperty=A;function B(M){return typeof M=="string"?_.toArray(M,"hex"):M}_.parseBytes=B;function I(M){return new x(M,"hex","le")}_.intFromLE=I})(utils$p);var curve={},BN$9=bnExports$2,utils$n=utils$p,getNAF$1=utils$n.getNAF,getJSF$1=utils$n.getJSF,assert$k=utils$n.assert;function BaseCurve$1(n,_){this.type=n,this.p=new BN$9(_.p,16),this.red=_.prime?BN$9.red(_.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=_.n&&new BN$9(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$3=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(_,x){assert$k(_.precomputed);var E=_._getDoubles(),S=getNAF$1(x,1,this._bitLength),C=(1<<E.step+1)-(E.step%2===0?2:1);C/=3;var T=[],A,B;for(A=0;A<S.length;A+=E.step){B=0;for(var I=A+E.step-1;I>=A;I--)B=(B<<1)+S[I];T.push(B)}for(var M=this.jpoint(null,null,null),O=this.jpoint(null,null,null),D=C;D>0;D--){for(A=0;A<T.length;A++)B=T[A],B===D?O=O.mixedAdd(E.points[A]):B===-D&&(O=O.mixedAdd(E.points[A].neg()));M=M.add(O)}return M.toP()};BaseCurve$1.prototype._wnafMul=function(_,x){var E=4,S=_._getNAFPoints(E);E=S.wnd;for(var C=S.points,T=getNAF$1(x,E,this._bitLength),A=this.jpoint(null,null,null),B=T.length-1;B>=0;B--){for(var I=0;B>=0&&T[B]===0;B--)I++;if(B>=0&&I++,A=A.dblp(I),B<0)break;var M=T[B];assert$k(M!==0),_.type==="affine"?M>0?A=A.mixedAdd(C[M-1>>1]):A=A.mixedAdd(C[-M-1>>1].neg()):M>0?A=A.add(C[M-1>>1]):A=A.add(C[-M-1>>1].neg())}return _.type==="affine"?A.toP():A};BaseCurve$1.prototype._wnafMulAdd=function(_,x,E,S,C){var T=this._wnafT1,A=this._wnafT2,B=this._wnafT3,I=0,M,O,D;for(M=0;M<S;M++){D=x[M];var L=D._getNAFPoints(_);T[M]=L.wnd,A[M]=L.points}for(M=S-1;M>=1;M-=2){var V=M-1,U=M;if(T[V]!==1||T[U]!==1){B[V]=getNAF$1(E[V],T[V],this._bitLength),B[U]=getNAF$1(E[U],T[U],this._bitLength),I=Math.max(B[V].length,I),I=Math.max(B[U].length,I);continue}var q=[x[V],null,null,x[U]];x[V].y.cmp(x[U].y)===0?(q[1]=x[V].add(x[U]),q[2]=x[V].toJ().mixedAdd(x[U].neg())):x[V].y.cmp(x[U].y.redNeg())===0?(q[1]=x[V].toJ().mixedAdd(x[U]),q[2]=x[V].add(x[U].neg())):(q[1]=x[V].toJ().mixedAdd(x[U]),q[2]=x[V].toJ().mixedAdd(x[U].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],W=getJSF$1(E[V],E[U]);for(I=Math.max(W[0].length,I),B[V]=new Array(I),B[U]=new Array(I),O=0;O<I;O++){var Q=W[0][O]|0,re=W[1][O]|0;B[V][O]=H[(Q+1)*3+(re+1)],B[U][O]=0,A[V]=q}}var ce=this.jpoint(null,null,null),ne=this._wnafT4;for(M=I;M>=0;M--){for(var Y=0;M>=0;){var fe=!0;for(O=0;O<S;O++)ne[O]=B[O][M]|0,ne[O]!==0&&(fe=!1);if(!fe)break;Y++,M--}if(M>=0&&Y++,ce=ce.dblp(Y),M<0)break;for(O=0;O<S;O++){var ge=ne[O];ge!==0&&(ge>0?D=A[O][ge-1>>1]:ge<0&&(D=A[O][-ge-1>>1].neg()),D.type==="affine"?ce=ce.mixedAdd(D):ce=ce.add(D))}}for(M=0;M<S;M++)A[M]=null;return C?ce:ce.toP()};function BasePoint$1(n,_){this.curve=n,this.type=_,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(_,x){_=utils$n.toArray(_,x);var E=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*E){_[0]===6?assert$k(_[_.length-1]%2===0):_[0]===7&&assert$k(_[_.length-1]%2===1);var S=this.point(_.slice(1,1+E),_.slice(1+E,1+2*E));return S}else if((_[0]===2||_[0]===3)&&_.length-1===E)return this.pointFromX(_.slice(1,1+E),_[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(_){return this.encode(_,!0)};BasePoint$1.prototype._encode=function(_){var x=this.curve.p.byteLength(),E=this.getX().toArray("be",x);return _?[this.getY().isEven()?2:3].concat(E):[4].concat(E,this.getY().toArray("be",x))};BasePoint$1.prototype.encode=function(_,x){return utils$n.encode(this._encode(x),_)};BasePoint$1.prototype.precompute=function(_){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,_),x.beta=this._getBeta(),this.precomputed=x,this};BasePoint$1.prototype._hasDoubles=function(_){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return x?x.points.length>=Math.ceil((_.bitLength()+1)/x.step):!1};BasePoint$1.prototype._getDoubles=function(_,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var E=[this],S=this,C=0;C<x;C+=_){for(var T=0;T<_;T++)S=S.dbl();E.push(S)}return{step:_,points:E}};BasePoint$1.prototype._getNAFPoints=function(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],E=(1<<_)-1,S=E===1?null:this.dbl(),C=1;C<E;C++)x[C]=x[C-1].add(S);return{wnd:_,points:x}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(_){for(var x=this,E=0;E<_;E++)x=x.dbl();return x};var utils$m=utils$p,BN$8=bnExports$2,inherits$5=inherits_browserExports,Base$2=base$3,assert$j=utils$m.assert;function ShortCurve$1(n){Base$2.call(this,"short",n),this.a=new BN$8(n.a,16).toRed(this.red),this.b=new BN$8(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$5(ShortCurve$1,Base$2);var short=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(_){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var x,E;if(_.beta)x=new BN$8(_.beta,16).toRed(this.red);else{var S=this._getEndoRoots(this.p);x=S[0].cmp(S[1])<0?S[0]:S[1],x=x.toRed(this.red)}if(_.lambda)E=new BN$8(_.lambda,16);else{var C=this._getEndoRoots(this.n);this.g.mul(C[0]).x.cmp(this.g.x.redMul(x))===0?E=C[0]:(E=C[1],assert$j(this.g.mul(E).x.cmp(this.g.x.redMul(x))===0))}var T;return _.basis?T=_.basis.map(function(A){return{a:new BN$8(A.a,16),b:new BN$8(A.b,16)}}):T=this._getEndoBasis(E),{beta:x,lambda:E,basis:T}}};ShortCurve$1.prototype._getEndoRoots=function(_){var x=_===this.p?this.red:BN$8.mont(_),E=new BN$8(2).toRed(x).redInvm(),S=E.redNeg(),C=new BN$8(3).toRed(x).redNeg().redSqrt().redMul(E),T=S.redAdd(C).fromRed(),A=S.redSub(C).fromRed();return[T,A]};ShortCurve$1.prototype._getEndoBasis=function(_){for(var x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),E=_,S=this.n.clone(),C=new BN$8(1),T=new BN$8(0),A=new BN$8(0),B=new BN$8(1),I,M,O,D,L,V,U,q=0,H,W;E.cmpn(0)!==0;){var Q=S.div(E);H=S.sub(Q.mul(E)),W=A.sub(Q.mul(C));var re=B.sub(Q.mul(T));if(!O&&H.cmp(x)<0)I=U.neg(),M=C,O=H.neg(),D=W;else if(O&&++q===2)break;U=H,S=E,E=H,A=C,C=W,B=T,T=re}L=H.neg(),V=W;var ce=O.sqr().add(D.sqr()),ne=L.sqr().add(V.sqr());return ne.cmp(ce)>=0&&(L=I,V=M),O.negative&&(O=O.neg(),D=D.neg()),L.negative&&(L=L.neg(),V=V.neg()),[{a:O,b:D},{a:L,b:V}]};ShortCurve$1.prototype._endoSplit=function(_){var x=this.endo.basis,E=x[0],S=x[1],C=S.b.mul(_).divRound(this.n),T=E.b.neg().mul(_).divRound(this.n),A=C.mul(E.a),B=T.mul(S.a),I=C.mul(E.b),M=T.mul(S.b),O=_.sub(A).sub(B),D=I.add(M).neg();return{k1:O,k2:D}};ShortCurve$1.prototype.pointFromX=function(_,x){_=new BN$8(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr().redMul(_).redIAdd(_.redMul(this.a)).redIAdd(this.b),S=E.redSqrt();if(S.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var C=S.fromRed().isOdd();return(x&&!C||!x&&C)&&(S=S.redNeg()),this.point(_,S)};ShortCurve$1.prototype.validate=function(_){if(_.inf)return!0;var x=_.x,E=_.y,S=this.a.redMul(x),C=x.redSqr().redMul(x).redIAdd(S).redIAdd(this.b);return E.redSqr().redISub(C).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(_,x,E){for(var S=this._endoWnafT1,C=this._endoWnafT2,T=0;T<_.length;T++){var A=this._endoSplit(x[T]),B=_[T],I=B._getBeta();A.k1.negative&&(A.k1.ineg(),B=B.neg(!0)),A.k2.negative&&(A.k2.ineg(),I=I.neg(!0)),S[T*2]=B,S[T*2+1]=I,C[T*2]=A.k1,C[T*2+1]=A.k2}for(var M=this._wnafMulAdd(1,S,C,T*2,E),O=0;O<T*2;O++)S[O]=null,C[O]=null;return M};function Point$5(n,_,x,E){Base$2.BasePoint.call(this,n,"affine"),_===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(_,16),this.y=new BN$8(x,16),E&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$5(Point$5,Base$2.BasePoint);ShortCurve$1.prototype.point=function(_,x,E){return new Point$5(this,_,x,E)};ShortCurve$1.prototype.pointFromJSON=function(_,x){return Point$5.fromJSON(this,_,x)};Point$5.prototype._getBeta=function(){if(this.curve.endo){var _=this.precomputed;if(_&&_.beta)return _.beta;var x=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(_){var E=this.curve,S=function(C){return E.point(C.x.redMul(E.endo.beta),C.y)};_.beta=x,x.precomputed={beta:null,naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(S)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(S)}}}return x}};Point$5.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$5.fromJSON=function(_,x,E){typeof x=="string"&&(x=JSON.parse(x));var S=_.point(x[0],x[1],E);if(!x[2])return S;function C(A){return _.point(A[0],A[1],E)}var T=x[2];return S.precomputed={beta:null,doubles:T.doubles&&{step:T.doubles.step,points:[S].concat(T.doubles.points.map(C))},naf:T.naf&&{wnd:T.naf.wnd,points:[S].concat(T.naf.points.map(C))}},S};Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$5.prototype.isInfinity=function(){return this.inf};Point$5.prototype.add=function(_){if(this.inf)return _;if(_.inf)return this;if(this.eq(_))return this.dbl();if(this.neg().eq(_))return this.curve.point(null,null);if(this.x.cmp(_.x)===0)return this.curve.point(null,null);var x=this.y.redSub(_.y);x.cmpn(0)!==0&&(x=x.redMul(this.x.redSub(_.x).redInvm()));var E=x.redSqr().redISub(this.x).redISub(_.x),S=x.redMul(this.x.redSub(E)).redISub(this.y);return this.curve.point(E,S)};Point$5.prototype.dbl=function(){if(this.inf)return this;var _=this.y.redAdd(this.y);if(_.cmpn(0)===0)return this.curve.point(null,null);var x=this.curve.a,E=this.x.redSqr(),S=_.redInvm(),C=E.redAdd(E).redIAdd(E).redIAdd(x).redMul(S),T=C.redSqr().redISub(this.x.redAdd(this.x)),A=C.redMul(this.x.redSub(T)).redISub(this.y);return this.curve.point(T,A)};Point$5.prototype.getX=function(){return this.x.fromRed()};Point$5.prototype.getY=function(){return this.y.fromRed()};Point$5.prototype.mul=function(_){return _=new BN$8(_,16),this.isInfinity()?this:this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve.endo?this.curve._endoWnafMulAdd([this],[_]):this.curve._wnafMul(this,_)};Point$5.prototype.mulAdd=function(_,x,E){var S=[this,x],C=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(S,C):this.curve._wnafMulAdd(1,S,C,2)};Point$5.prototype.jmulAdd=function(_,x,E){var S=[this,x],C=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(S,C,!0):this.curve._wnafMulAdd(1,S,C,2,!0)};Point$5.prototype.eq=function(_){return this===_||this.inf===_.inf&&(this.inf||this.x.cmp(_.x)===0&&this.y.cmp(_.y)===0)};Point$5.prototype.neg=function(_){if(this.inf)return this;var x=this.curve.point(this.x,this.y.redNeg());if(_&&this.precomputed){var E=this.precomputed,S=function(C){return C.neg()};x.precomputed={naf:E.naf&&{wnd:E.naf.wnd,points:E.naf.points.map(S)},doubles:E.doubles&&{step:E.doubles.step,points:E.doubles.points.map(S)}}}return x};Point$5.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var _=this.curve.jpoint(this.x,this.y,this.curve.one);return _};function JPoint$1(n,_,x,E){Base$2.BasePoint.call(this,n,"jacobian"),_===null&&x===null&&E===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(_,16),this.y=new BN$8(x,16),this.z=new BN$8(E,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$5(JPoint$1,Base$2.BasePoint);ShortCurve$1.prototype.jpoint=function(_,x,E){return new JPoint$1(this,_,x,E)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var _=this.z.redInvm(),x=_.redSqr(),E=this.x.redMul(x),S=this.y.redMul(x).redMul(_);return this.curve.point(E,S)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(_){if(this.isInfinity())return _;if(_.isInfinity())return this;var x=_.z.redSqr(),E=this.z.redSqr(),S=this.x.redMul(x),C=_.x.redMul(E),T=this.y.redMul(x.redMul(_.z)),A=_.y.redMul(E.redMul(this.z)),B=S.redSub(C),I=T.redSub(A);if(B.cmpn(0)===0)return I.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=B.redSqr(),O=M.redMul(B),D=S.redMul(M),L=I.redSqr().redIAdd(O).redISub(D).redISub(D),V=I.redMul(D.redISub(L)).redISub(T.redMul(O)),U=this.z.redMul(_.z).redMul(B);return this.curve.jpoint(L,V,U)};JPoint$1.prototype.mixedAdd=function(_){if(this.isInfinity())return _.toJ();if(_.isInfinity())return this;var x=this.z.redSqr(),E=this.x,S=_.x.redMul(x),C=this.y,T=_.y.redMul(x).redMul(this.z),A=E.redSub(S),B=C.redSub(T);if(A.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=A.redSqr(),M=I.redMul(A),O=E.redMul(I),D=B.redSqr().redIAdd(M).redISub(O).redISub(O),L=B.redMul(O.redISub(D)).redISub(C.redMul(M)),V=this.z.redMul(A);return this.curve.jpoint(D,L,V)};JPoint$1.prototype.dblp=function(_){if(_===0)return this;if(this.isInfinity())return this;if(!_)return this.dbl();var x;if(this.curve.zeroA||this.curve.threeA){var E=this;for(x=0;x<_;x++)E=E.dbl();return E}var S=this.curve.a,C=this.curve.tinv,T=this.x,A=this.y,B=this.z,I=B.redSqr().redSqr(),M=A.redAdd(A);for(x=0;x<_;x++){var O=T.redSqr(),D=M.redSqr(),L=D.redSqr(),V=O.redAdd(O).redIAdd(O).redIAdd(S.redMul(I)),U=T.redMul(D),q=V.redSqr().redISub(U.redAdd(U)),H=U.redISub(q),W=V.redMul(H);W=W.redIAdd(W).redISub(L);var Q=M.redMul(B);x+1<_&&(I=I.redMul(L)),T=q,B=Q,M=W}return this.curve.jpoint(T,M.redMul(C),B)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var _,x,E;if(this.zOne){var S=this.x.redSqr(),C=this.y.redSqr(),T=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(S).redISub(T);A=A.redIAdd(A);var B=S.redAdd(S).redIAdd(S),I=B.redSqr().redISub(A).redISub(A),M=T.redIAdd(T);M=M.redIAdd(M),M=M.redIAdd(M),_=I,x=B.redMul(A.redISub(I)).redISub(M),E=this.y.redAdd(this.y)}else{var O=this.x.redSqr(),D=this.y.redSqr(),L=D.redSqr(),V=this.x.redAdd(D).redSqr().redISub(O).redISub(L);V=V.redIAdd(V);var U=O.redAdd(O).redIAdd(O),q=U.redSqr(),H=L.redIAdd(L);H=H.redIAdd(H),H=H.redIAdd(H),_=q.redISub(V).redISub(V),x=U.redMul(V.redISub(_)).redISub(H),E=this.y.redMul(this.z),E=E.redIAdd(E)}return this.curve.jpoint(_,x,E)};JPoint$1.prototype._threeDbl=function(){var _,x,E;if(this.zOne){var S=this.x.redSqr(),C=this.y.redSqr(),T=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(S).redISub(T);A=A.redIAdd(A);var B=S.redAdd(S).redIAdd(S).redIAdd(this.curve.a),I=B.redSqr().redISub(A).redISub(A);_=I;var M=T.redIAdd(T);M=M.redIAdd(M),M=M.redIAdd(M),x=B.redMul(A.redISub(I)).redISub(M),E=this.y.redAdd(this.y)}else{var O=this.z.redSqr(),D=this.y.redSqr(),L=this.x.redMul(D),V=this.x.redSub(O).redMul(this.x.redAdd(O));V=V.redAdd(V).redIAdd(V);var U=L.redIAdd(L);U=U.redIAdd(U);var q=U.redAdd(U);_=V.redSqr().redISub(q),E=this.y.redAdd(this.z).redSqr().redISub(D).redISub(O);var H=D.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H),x=V.redMul(U.redISub(_)).redISub(H)}return this.curve.jpoint(_,x,E)};JPoint$1.prototype._dbl=function(){var _=this.curve.a,x=this.x,E=this.y,S=this.z,C=S.redSqr().redSqr(),T=x.redSqr(),A=E.redSqr(),B=T.redAdd(T).redIAdd(T).redIAdd(_.redMul(C)),I=x.redAdd(x);I=I.redIAdd(I);var M=I.redMul(A),O=B.redSqr().redISub(M.redAdd(M)),D=M.redISub(O),L=A.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var V=B.redMul(D).redISub(L),U=E.redAdd(E).redMul(S);return this.curve.jpoint(O,V,U)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr(),S=x.redSqr(),C=_.redAdd(_).redIAdd(_),T=C.redSqr(),A=this.x.redAdd(x).redSqr().redISub(_).redISub(S);A=A.redIAdd(A),A=A.redAdd(A).redIAdd(A),A=A.redISub(T);var B=A.redSqr(),I=S.redIAdd(S);I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=C.redIAdd(A).redSqr().redISub(T).redISub(B).redISub(I),O=x.redMul(M);O=O.redIAdd(O),O=O.redIAdd(O);var D=this.x.redMul(B).redISub(O);D=D.redIAdd(D),D=D.redIAdd(D);var L=this.y.redMul(M.redMul(I.redISub(M)).redISub(A.redMul(B)));L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var V=this.z.redAdd(A).redSqr().redISub(E).redISub(B);return this.curve.jpoint(D,L,V)};JPoint$1.prototype.mul=function(_,x){return _=new BN$8(_,x),this.curve._wnafMul(this,_)};JPoint$1.prototype.eq=function(_){if(_.type==="affine")return this.eq(_.toJ());if(this===_)return!0;var x=this.z.redSqr(),E=_.z.redSqr();if(this.x.redMul(E).redISub(_.x.redMul(x)).cmpn(0)!==0)return!1;var S=x.redMul(this.z),C=E.redMul(_.z);return this.y.redMul(C).redISub(_.y.redMul(S)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(_){var x=this.z.redSqr(),E=_.toRed(this.curve.red).redMul(x);if(this.x.cmp(E)===0)return!0;for(var S=_.clone(),C=this.curve.redN.redMul(x);;){if(S.iadd(this.curve.n),S.cmp(this.curve.p)>=0)return!1;if(E.redIAdd(C),this.x.cmp(E)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$7=bnExports$2,inherits$4=inherits_browserExports,Base$1=base$3,utils$l=utils$p;function MontCurve(n){Base$1.call(this,"mont",n),this.a=new BN$7(n.a,16).toRed(this.red),this.b=new BN$7(n.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$4(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(_){var x=_.normalize().x,E=x.redSqr(),S=E.redMul(x).redAdd(E.redMul(this.a)).redAdd(x),C=S.redSqrt();return C.redSqr().cmp(S)===0};function Point$4(n,_,x){Base$1.BasePoint.call(this,n,"projective"),_===null&&x===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(_,16),this.z=new BN$7(x,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$4(Point$4,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(_,x){return this.point(utils$l.toArray(_,x),1)};MontCurve.prototype.point=function(_,x){return new Point$4(this,_,x)};MontCurve.prototype.pointFromJSON=function(_){return Point$4.fromJSON(this,_)};Point$4.prototype.precompute=function(){};Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$4.fromJSON=function(_,x){return new Point$4(_,x[0],x[1]||_.one)};Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$4.prototype.dbl=function(){var _=this.x.redAdd(this.z),x=_.redSqr(),E=this.x.redSub(this.z),S=E.redSqr(),C=x.redSub(S),T=x.redMul(S),A=C.redMul(S.redAdd(this.curve.a24.redMul(C)));return this.curve.point(T,A)};Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.diffAdd=function(_,x){var E=this.x.redAdd(this.z),S=this.x.redSub(this.z),C=_.x.redAdd(_.z),T=_.x.redSub(_.z),A=T.redMul(E),B=C.redMul(S),I=x.z.redMul(A.redAdd(B).redSqr()),M=x.x.redMul(A.redISub(B).redSqr());return this.curve.point(I,M)};Point$4.prototype.mul=function(_){for(var x=_.clone(),E=this,S=this.curve.point(null,null),C=this,T=[];x.cmpn(0)!==0;x.iushrn(1))T.push(x.andln(1));for(var A=T.length-1;A>=0;A--)T[A]===0?(E=E.diffAdd(S,C),S=S.dbl()):(S=E.diffAdd(S,C),E=E.dbl());return S};Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.eq=function(_){return this.getX().cmp(_.getX())===0};Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$k=utils$p,BN$6=bnExports$2,inherits$3=inherits_browserExports,Base=base$3,assert$i=utils$k.assert;function EdwardsCurve(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",n),this.a=new BN$6(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}inherits$3(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(_){return this.mOneA?_.redNeg():this.a.redMul(_)};EdwardsCurve.prototype._mulC=function(_){return this.oneC?_:this.c.redMul(_)};EdwardsCurve.prototype.jpoint=function(_,x,E,S){return this.point(_,x,E,S)};EdwardsCurve.prototype.pointFromX=function(_,x){_=new BN$6(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),S=this.c2.redSub(this.a.redMul(E)),C=this.one.redSub(this.c2.redMul(this.d).redMul(E)),T=S.redMul(C.redInvm()),A=T.redSqrt();if(A.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");var B=A.fromRed().isOdd();return(x&&!B||!x&&B)&&(A=A.redNeg()),this.point(_,A)};EdwardsCurve.prototype.pointFromY=function(_,x){_=new BN$6(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr(),S=E.redSub(this.c2),C=E.redMul(this.d).redMul(this.c2).redSub(this.a),T=S.redMul(C.redInvm());if(T.cmp(this.zero)===0){if(x)throw new Error("invalid point");return this.point(this.zero,_)}var A=T.redSqrt();if(A.redSqr().redSub(T).cmp(this.zero)!==0)throw new Error("invalid point");return A.fromRed().isOdd()!==x&&(A=A.redNeg()),this.point(A,_)};EdwardsCurve.prototype.validate=function(_){if(_.isInfinity())return!0;_.normalize();var x=_.x.redSqr(),E=_.y.redSqr(),S=x.redMul(this.a).redAdd(E),C=this.c2.redMul(this.one.redAdd(this.d.redMul(x).redMul(E)));return S.cmp(C)===0};function Point$3(n,_,x,E,S){Base.BasePoint.call(this,n,"projective"),_===null&&x===null&&E===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(_,16),this.y=new BN$6(x,16),this.z=E?new BN$6(E,16):this.curve.one,this.t=S&&new BN$6(S,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$3(Point$3,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(_){return Point$3.fromJSON(this,_)};EdwardsCurve.prototype.point=function(_,x,E,S){return new Point$3(this,_,x,E,S)};Point$3.fromJSON=function(_,x){return new Point$3(_,x[0],x[1],x[2])};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$3.prototype._extDbl=function(){var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr();E=E.redIAdd(E);var S=this.curve._mulA(_),C=this.x.redAdd(this.y).redSqr().redISub(_).redISub(x),T=S.redAdd(x),A=T.redSub(E),B=S.redSub(x),I=C.redMul(A),M=T.redMul(B),O=C.redMul(B),D=A.redMul(T);return this.curve.point(I,M,D,O)};Point$3.prototype._projDbl=function(){var _=this.x.redAdd(this.y).redSqr(),x=this.x.redSqr(),E=this.y.redSqr(),S,C,T,A,B,I;if(this.curve.twisted){A=this.curve._mulA(x);var M=A.redAdd(E);this.zOne?(S=_.redSub(x).redSub(E).redMul(M.redSub(this.curve.two)),C=M.redMul(A.redSub(E)),T=M.redSqr().redSub(M).redSub(M)):(B=this.z.redSqr(),I=M.redSub(B).redISub(B),S=_.redSub(x).redISub(E).redMul(I),C=M.redMul(A.redSub(E)),T=M.redMul(I))}else A=x.redAdd(E),B=this.curve._mulC(this.z).redSqr(),I=A.redSub(B).redSub(B),S=this.curve._mulC(_.redISub(A)).redMul(I),C=this.curve._mulC(A).redMul(x.redISub(E)),T=A.redMul(I);return this.curve.point(S,C,T)};Point$3.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$3.prototype._extAdd=function(_){var x=this.y.redSub(this.x).redMul(_.y.redSub(_.x)),E=this.y.redAdd(this.x).redMul(_.y.redAdd(_.x)),S=this.t.redMul(this.curve.dd).redMul(_.t),C=this.z.redMul(_.z.redAdd(_.z)),T=E.redSub(x),A=C.redSub(S),B=C.redAdd(S),I=E.redAdd(x),M=T.redMul(A),O=B.redMul(I),D=T.redMul(I),L=A.redMul(B);return this.curve.point(M,O,L,D)};Point$3.prototype._projAdd=function(_){var x=this.z.redMul(_.z),E=x.redSqr(),S=this.x.redMul(_.x),C=this.y.redMul(_.y),T=this.curve.d.redMul(S).redMul(C),A=E.redSub(T),B=E.redAdd(T),I=this.x.redAdd(this.y).redMul(_.x.redAdd(_.y)).redISub(S).redISub(C),M=x.redMul(A).redMul(I),O,D;return this.curve.twisted?(O=x.redMul(B).redMul(C.redSub(this.curve._mulA(S))),D=A.redMul(B)):(O=x.redMul(B).redMul(C.redSub(S)),D=this.curve._mulC(A).redMul(B)),this.curve.point(M,O,D)};Point$3.prototype.add=function(_){return this.isInfinity()?_:_.isInfinity()?this:this.curve.extended?this._extAdd(_):this._projAdd(_)};Point$3.prototype.mul=function(_){return this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve._wnafMul(this,_)};Point$3.prototype.mulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!1)};Point$3.prototype.jmulAdd=function(_,x,E){return this.curve._wnafMulAdd(1,[this,x],[_,E],2,!0)};Point$3.prototype.normalize=function(){if(this.zOne)return this;var _=this.z.redInvm();return this.x=this.x.redMul(_),this.y=this.y.redMul(_),this.t&&(this.t=this.t.redMul(_)),this.z=this.curve.one,this.zOne=!0,this};Point$3.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$3.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point$3.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point$3.prototype.eq=function(_){return this===_||this.getX().cmp(_.getX())===0&&this.getY().cmp(_.getY())===0};Point$3.prototype.eqXToP=function(_){var x=_.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(x)===0)return!0;for(var E=_.clone(),S=this.curve.redN.redMul(this.z);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(S),this.x.cmp(x)===0)return!0}};Point$3.prototype.toP=Point$3.prototype.normalize;Point$3.prototype.mixedAdd=Point$3.prototype.add;(function(n){var _=n;_.base=base$3,_.short=short,_.mont=mont,_.edwards=edwards})(curve);var curves$1={},hash$4={},utils$j={},assert$h=minimalisticAssert$1,inherits$2=inherits_browserExports;utils$j.inherits=inherits$2;function isSurrogatePair(n,_){return(n.charCodeAt(_)&64512)!==55296||_<0||_+1>=n.length?!1:(n.charCodeAt(_+1)&64512)===56320}function toArray$1(n,_){if(Array.isArray(n))return n.slice();if(!n)return[];var x=[];if(typeof n=="string")if(_){if(_==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),S=0;S<n.length;S+=2)x.push(parseInt(n[S]+n[S+1],16))}else for(var E=0,S=0;S<n.length;S++){var C=n.charCodeAt(S);C<128?x[E++]=C:C<2048?(x[E++]=C>>6|192,x[E++]=C&63|128):isSurrogatePair(n,S)?(C=65536+((C&1023)<<10)+(n.charCodeAt(++S)&1023),x[E++]=C>>18|240,x[E++]=C>>12&63|128,x[E++]=C>>6&63|128,x[E++]=C&63|128):(x[E++]=C>>12|224,x[E++]=C>>6&63|128,x[E++]=C&63|128)}else for(S=0;S<n.length;S++)x[S]=n[S]|0;return x}utils$j.toArray=toArray$1;function toHex$1(n){for(var _="",x=0;x<n.length;x++)_+=zero2(n[x].toString(16));return _}utils$j.toHex=toHex$1;function htonl(n){var _=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return _>>>0}utils$j.htonl=htonl;function toHex32(n,_){for(var x="",E=0;E<n.length;E++){var S=n[E];_==="little"&&(S=htonl(S)),x+=zero8(S.toString(16))}return x}utils$j.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$j.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$j.zero8=zero8;function join32(n,_,x,E){var S=x-_;assert$h(S%4===0);for(var C=new Array(S/4),T=0,A=_;T<C.length;T++,A+=4){var B;E==="big"?B=n[A]<<24|n[A+1]<<16|n[A+2]<<8|n[A+3]:B=n[A+3]<<24|n[A+2]<<16|n[A+1]<<8|n[A],C[T]=B>>>0}return C}utils$j.join32=join32;function split32(n,_){for(var x=new Array(n.length*4),E=0,S=0;E<n.length;E++,S+=4){var C=n[E];_==="big"?(x[S]=C>>>24,x[S+1]=C>>>16&255,x[S+2]=C>>>8&255,x[S+3]=C&255):(x[S+3]=C>>>24,x[S+2]=C>>>16&255,x[S+1]=C>>>8&255,x[S]=C&255)}return x}utils$j.split32=split32;function rotr32$1(n,_){return n>>>_|n<<32-_}utils$j.rotr32=rotr32$1;function rotl32$2(n,_){return n<<_|n>>>32-_}utils$j.rotl32=rotl32$2;function sum32$3(n,_){return n+_>>>0}utils$j.sum32=sum32$3;function sum32_3$1(n,_,x){return n+_+x>>>0}utils$j.sum32_3=sum32_3$1;function sum32_4$2(n,_,x,E){return n+_+x+E>>>0}utils$j.sum32_4=sum32_4$2;function sum32_5$2(n,_,x,E,S){return n+_+x+E+S>>>0}utils$j.sum32_5=sum32_5$2;function sum64$1(n,_,x,E){var S=n[_],C=n[_+1],T=E+C>>>0,A=(T<E?1:0)+x+S;n[_]=A>>>0,n[_+1]=T}utils$j.sum64=sum64$1;function sum64_hi$1(n,_,x,E){var S=_+E>>>0,C=(S<_?1:0)+n+x;return C>>>0}utils$j.sum64_hi=sum64_hi$1;function sum64_lo$1(n,_,x,E){var S=_+E;return S>>>0}utils$j.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,_,x,E,S,C,T,A){var B=0,I=_;I=I+E>>>0,B+=I<_?1:0,I=I+C>>>0,B+=I<C?1:0,I=I+A>>>0,B+=I<A?1:0;var M=n+x+S+T+B;return M>>>0}utils$j.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,_,x,E,S,C,T,A){var B=_+E+C+A;return B>>>0}utils$j.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,_,x,E,S,C,T,A,B,I){var M=0,O=_;O=O+E>>>0,M+=O<_?1:0,O=O+C>>>0,M+=O<C?1:0,O=O+A>>>0,M+=O<A?1:0,O=O+I>>>0,M+=O<I?1:0;var D=n+x+S+T+B+M;return D>>>0}utils$j.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,_,x,E,S,C,T,A,B,I){var M=_+E+C+A+I;return M>>>0}utils$j.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,_,x){var E=_<<32-x|n>>>x;return E>>>0}utils$j.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,_,x){var E=n<<32-x|_>>>x;return E>>>0}utils$j.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,_,x){return n>>>x}utils$j.shr64_hi=shr64_hi$1;function shr64_lo$1(n,_,x){var E=n<<32-x|_>>>x;return E>>>0}utils$j.shr64_lo=shr64_lo$1;var common$6={},utils$i=utils$j,assert$g=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(_,x){if(_=utils$i.toArray(_,x),this.pending?this.pending=this.pending.concat(_):this.pending=_,this.pendingTotal+=_.length,this.pending.length>=this._delta8){_=this.pending;var E=_.length%this._delta8;this.pending=_.slice(_.length-E,_.length),this.pending.length===0&&(this.pending=null),_=utils$i.join32(_,0,_.length-E,this.endian);for(var S=0;S<_.length;S+=this._delta32)this._update(_,S,S+this._delta32)}return this};BlockHash$4.prototype.digest=function(_){return this.update(this._pad()),assert$g(this.pending===null),this._digest(_)};BlockHash$4.prototype._pad=function(){var _=this.pendingTotal,x=this._delta8,E=x-(_+this.padLength)%x,S=new Array(E+this.padLength);S[0]=128;for(var C=1;C<E;C++)S[C]=0;if(_<<=3,this.endian==="big"){for(var T=8;T<this.padLength;T++)S[C++]=0;S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=_>>>24&255,S[C++]=_>>>16&255,S[C++]=_>>>8&255,S[C++]=_&255}else for(S[C++]=_&255,S[C++]=_>>>8&255,S[C++]=_>>>16&255,S[C++]=_>>>24&255,S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0,T=8;T<this.padLength;T++)S[C++]=0;return S};var sha$2={},common$5={},utils$h=utils$j,rotr32=utils$h.rotr32;function ft_1$1(n,_,x,E){if(n===0)return ch32$1(_,x,E);if(n===1||n===3)return p32(_,x,E);if(n===2)return maj32$1(_,x,E)}common$5.ft_1=ft_1$1;function ch32$1(n,_,x){return n&_^~n&x}common$5.ch32=ch32$1;function maj32$1(n,_,x){return n&_^n&x^_&x}common$5.maj32=maj32$1;function p32(n,_,x){return n^_^x}common$5.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$5.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$5.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$5.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$5.g1_256=g1_256$1;var utils$g=utils$j,common$4=common$6,shaCommon$1=common$5,rotl32$1=utils$g.rotl32,sum32$2=utils$g.sum32,sum32_5$1=utils$g.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$4.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$g.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(_,x){for(var E=this.W,S=0;S<16;S++)E[S]=_[x+S];for(;S<E.length;S++)E[S]=rotl32$1(E[S-3]^E[S-8]^E[S-14]^E[S-16],1);var C=this.h[0],T=this.h[1],A=this.h[2],B=this.h[3],I=this.h[4];for(S=0;S<E.length;S++){var M=~~(S/20),O=sum32_5$1(rotl32$1(C,5),ft_1(M,T,A,B),I,E[S],sha1_K[M]);I=B,B=A,A=rotl32$1(T,30),T=C,C=O}this.h[0]=sum32$2(this.h[0],C),this.h[1]=sum32$2(this.h[1],T),this.h[2]=sum32$2(this.h[2],A),this.h[3]=sum32$2(this.h[3],B),this.h[4]=sum32$2(this.h[4],I)};SHA1.prototype._digest=function(_){return _==="hex"?utils$g.toHex32(this.h,"big"):utils$g.split32(this.h,"big")};var utils$f=utils$j,common$3=common$6,shaCommon=common$5,assert$f=minimalisticAssert$1,sum32$1=utils$f.sum32,sum32_4$1=utils$f.sum32_4,sum32_5=utils$f.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$3.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$f.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(_,x){for(var E=this.W,S=0;S<16;S++)E[S]=_[x+S];for(;S<E.length;S++)E[S]=sum32_4$1(g1_256(E[S-2]),E[S-7],g0_256(E[S-15]),E[S-16]);var C=this.h[0],T=this.h[1],A=this.h[2],B=this.h[3],I=this.h[4],M=this.h[5],O=this.h[6],D=this.h[7];for(assert$f(this.k.length===E.length),S=0;S<E.length;S++){var L=sum32_5(D,s1_256(I),ch32(I,M,O),this.k[S],E[S]),V=sum32$1(s0_256(C),maj32(C,T,A));D=O,O=M,M=I,I=sum32$1(B,L),B=A,A=T,T=C,C=sum32$1(L,V)}this.h[0]=sum32$1(this.h[0],C),this.h[1]=sum32$1(this.h[1],T),this.h[2]=sum32$1(this.h[2],A),this.h[3]=sum32$1(this.h[3],B),this.h[4]=sum32$1(this.h[4],I),this.h[5]=sum32$1(this.h[5],M),this.h[6]=sum32$1(this.h[6],O),this.h[7]=sum32$1(this.h[7],D)};SHA256$1.prototype._digest=function(_){return _==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$j,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$e.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(_){return _==="hex"?utils$e.toHex32(this.h.slice(0,7),"big"):utils$e.split32(this.h.slice(0,7),"big")};var utils$d=utils$j,common$2=common$6,assert$e=minimalisticAssert$1,rotr64_hi=utils$d.rotr64_hi,rotr64_lo=utils$d.rotr64_lo,shr64_hi=utils$d.shr64_hi,shr64_lo=utils$d.shr64_lo,sum64=utils$d.sum64,sum64_hi=utils$d.sum64_hi,sum64_lo=utils$d.sum64_lo,sum64_4_hi=utils$d.sum64_4_hi,sum64_4_lo=utils$d.sum64_4_lo,sum64_5_hi=utils$d.sum64_5_hi,sum64_5_lo=utils$d.sum64_5_lo,BlockHash$1=common$2.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$d.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(_,x){for(var E=this.W,S=0;S<32;S++)E[S]=_[x+S];for(;S<E.length;S+=2){var C=g1_512_hi(E[S-4],E[S-3]),T=g1_512_lo(E[S-4],E[S-3]),A=E[S-14],B=E[S-13],I=g0_512_hi(E[S-30],E[S-29]),M=g0_512_lo(E[S-30],E[S-29]),O=E[S-32],D=E[S-31];E[S]=sum64_4_hi(C,T,A,B,I,M,O,D),E[S+1]=sum64_4_lo(C,T,A,B,I,M,O,D)}};SHA512$1.prototype._update=function(_,x){this._prepareBlock(_,x);var E=this.W,S=this.h[0],C=this.h[1],T=this.h[2],A=this.h[3],B=this.h[4],I=this.h[5],M=this.h[6],O=this.h[7],D=this.h[8],L=this.h[9],V=this.h[10],U=this.h[11],q=this.h[12],H=this.h[13],W=this.h[14],Q=this.h[15];assert$e(this.k.length===E.length);for(var re=0;re<E.length;re+=2){var ce=W,ne=Q,Y=s1_512_hi(D,L),fe=s1_512_lo(D,L),ge=ch64_hi(D,L,V,U,q),$e=ch64_lo(D,L,V,U,q,H),_e=this.k[re],ae=this.k[re+1],X=E[re],F=E[re+1],z=sum64_5_hi(ce,ne,Y,fe,ge,$e,_e,ae,X,F),J=sum64_5_lo(ce,ne,Y,fe,ge,$e,_e,ae,X,F);ce=s0_512_hi(S,C),ne=s0_512_lo(S,C),Y=maj64_hi(S,C,T,A,B),fe=maj64_lo(S,C,T,A,B,I);var te=sum64_hi(ce,ne,Y,fe),se=sum64_lo(ce,ne,Y,fe);W=q,Q=H,q=V,H=U,V=D,U=L,D=sum64_hi(M,O,z,J),L=sum64_lo(O,O,z,J),M=B,O=I,B=T,I=A,T=S,A=C,S=sum64_hi(z,J,te,se),C=sum64_lo(z,J,te,se)}sum64(this.h,0,S,C),sum64(this.h,2,T,A),sum64(this.h,4,B,I),sum64(this.h,6,M,O),sum64(this.h,8,D,L),sum64(this.h,10,V,U),sum64(this.h,12,q,H),sum64(this.h,14,W,Q)};SHA512$1.prototype._digest=function(_){return _==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};function ch64_hi(n,_,x,E,S){var C=n&x^~n&S;return C<0&&(C+=4294967296),C}function ch64_lo(n,_,x,E,S,C){var T=_&E^~_&C;return T<0&&(T+=4294967296),T}function maj64_hi(n,_,x,E,S){var C=n&x^n&S^x&S;return C<0&&(C+=4294967296),C}function maj64_lo(n,_,x,E,S,C){var T=_&E^_&C^E&C;return T<0&&(T+=4294967296),T}function s0_512_hi(n,_){var x=rotr64_hi(n,_,28),E=rotr64_hi(_,n,2),S=rotr64_hi(_,n,7),C=x^E^S;return C<0&&(C+=4294967296),C}function s0_512_lo(n,_){var x=rotr64_lo(n,_,28),E=rotr64_lo(_,n,2),S=rotr64_lo(_,n,7),C=x^E^S;return C<0&&(C+=4294967296),C}function s1_512_hi(n,_){var x=rotr64_hi(n,_,14),E=rotr64_hi(n,_,18),S=rotr64_hi(_,n,9),C=x^E^S;return C<0&&(C+=4294967296),C}function s1_512_lo(n,_){var x=rotr64_lo(n,_,14),E=rotr64_lo(n,_,18),S=rotr64_lo(_,n,9),C=x^E^S;return C<0&&(C+=4294967296),C}function g0_512_hi(n,_){var x=rotr64_hi(n,_,1),E=rotr64_hi(n,_,8),S=shr64_hi(n,_,7),C=x^E^S;return C<0&&(C+=4294967296),C}function g0_512_lo(n,_){var x=rotr64_lo(n,_,1),E=rotr64_lo(n,_,8),S=shr64_lo(n,_,7),C=x^E^S;return C<0&&(C+=4294967296),C}function g1_512_hi(n,_){var x=rotr64_hi(n,_,19),E=rotr64_hi(_,n,29),S=shr64_hi(n,_,6),C=x^E^S;return C<0&&(C+=4294967296),C}function g1_512_lo(n,_){var x=rotr64_lo(n,_,19),E=rotr64_lo(_,n,29),S=shr64_lo(n,_,6),C=x^E^S;return C<0&&(C+=4294967296),C}var utils$c=utils$j,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$c.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(_){return _==="hex"?utils$c.toHex32(this.h.slice(0,12),"big"):utils$c.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={},utils$b=utils$j,common$1=common$6,rotl32=utils$b.rotl32,sum32=utils$b.sum32,sum32_3=utils$b.sum32_3,sum32_4=utils$b.sum32_4,BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$b.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(_,x){for(var E=this.h[0],S=this.h[1],C=this.h[2],T=this.h[3],A=this.h[4],B=E,I=S,M=C,O=T,D=A,L=0;L<80;L++){var V=sum32(rotl32(sum32_4(E,f(L,S,C,T),_[r[L]+x],K(L)),s$2[L]),A);E=A,A=T,T=rotl32(C,10),C=S,S=V,V=sum32(rotl32(sum32_4(B,f(79-L,I,M,O),_[rh[L]+x],Kh(L)),sh[L]),D),B=D,D=O,O=rotl32(M,10),M=I,I=V}V=sum32_3(this.h[1],C,O),this.h[1]=sum32_3(this.h[2],T,D),this.h[2]=sum32_3(this.h[3],A,B),this.h[3]=sum32_3(this.h[4],E,I),this.h[4]=sum32_3(this.h[0],S,M),this.h[0]=V};RIPEMD160.prototype._digest=function(_){return _==="hex"?utils$b.toHex32(this.h,"little"):utils$b.split32(this.h,"little")};function f(n,_,x,E){return n<=15?_^x^E:n<=31?_&x|~_&E:n<=47?(_|~x)^E:n<=63?_&E|x&~E:_^(x|~E)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$a=utils$j,assert$d=minimalisticAssert$1;function Hmac(n,_,x){if(!(this instanceof Hmac))return new Hmac(n,_,x);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils$a.toArray(_,x))}var hmac=Hmac;Hmac.prototype._init=function(_){_.length>this.blockSize&&(_=new this.Hash().update(_).digest()),assert$d(_.length<=this.blockSize);for(var x=_.length;x<this.blockSize;x++)_.push(0);for(x=0;x<_.length;x++)_[x]^=54;for(this.inner=new this.Hash().update(_),x=0;x<_.length;x++)_[x]^=106;this.outer=new this.Hash().update(_)};Hmac.prototype.update=function(_,x){return this.inner.update(_,x),this};Hmac.prototype.digest=function(_){return this.outer.update(this.inner.digest()),this.outer.digest(_)};(function(n){var _=n;_.utils=utils$j,_.common=common$6,_.sha=sha$2,_.ripemd=ripemd,_.hmac=hmac,_.sha1=_.sha.sha1,_.sha256=_.sha.sha256,_.sha224=_.sha.sha224,_.sha384=_.sha.sha384,_.sha512=_.sha.sha512,_.ripemd160=_.ripemd.ripemd160})(hash$4);const hash$3=getDefaultExportFromCjs(hash$4);var secp256k1$2,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$2}(function(n){var _=n,x=hash$4,E=curve,S=utils$p,C=S.assert;function T(I){I.type==="short"?this.curve=new E.short(I):I.type==="edwards"?this.curve=new E.edwards(I):this.curve=new E.mont(I),this.g=this.curve.g,this.n=this.curve.n,this.hash=I.hash,C(this.g.validate(),"Invalid curve"),C(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}_.PresetCurve=T;function A(I,M){Object.defineProperty(_,I,{configurable:!0,enumerable:!0,get:function(){var O=new T(M);return Object.defineProperty(_,I,{configurable:!0,enumerable:!0,value:O}),O}})}A("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:x.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),A("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:x.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),A("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:x.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),A("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:x.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),A("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:x.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),A("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["9"]}),A("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:x.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var B;try{B=requireSecp256k1()}catch{B=void 0}A("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:x.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",B]})})(curves$1);var hash$2=hash$4,utils$9=utils$o,assert$c=minimalisticAssert$1;function HmacDRBG$1(n){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var _=utils$9.toArray(n.entropy,n.entropyEnc||"hex"),x=utils$9.toArray(n.nonce,n.nonceEnc||"hex"),E=utils$9.toArray(n.pers,n.persEnc||"hex");assert$c(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(_,x,E)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(_,x,E){var S=_.concat(x).concat(E);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var C=0;C<this.V.length;C++)this.K[C]=0,this.V[C]=1;this._update(S),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function(){return new hash$2.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function(_){var x=this._hmac().update(this.V).update([0]);_&&(x=x.update(_)),this.K=x.digest(),this.V=this._hmac().update(this.V).digest(),_&&(this.K=this._hmac().update(this.V).update([1]).update(_).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function(_,x,E,S){typeof x!="string"&&(S=E,E=x,x=null),_=utils$9.toArray(_,x),E=utils$9.toArray(E,S),assert$c(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(_.concat(E||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function(_,x,E,S){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof x!="string"&&(S=E,E=x,x=null),E&&(E=utils$9.toArray(E,S||"hex"),this._update(E));for(var C=[];C.length<_;)this.V=this._hmac().update(this.V).digest(),C=C.concat(this.V);var T=C.slice(0,_);return this._update(E),this._reseed++,utils$9.encode(T,x)};var BN$5=bnExports$2,utils$8=utils$p,assert$b=utils$8.assert;function KeyPair$3(n,_){this.ec=n,this.priv=null,this.pub=null,_.priv&&this._importPrivate(_.priv,_.privEnc),_.pub&&this._importPublic(_.pub,_.pubEnc)}var key$2=KeyPair$3;KeyPair$3.fromPublic=function(_,x,E){return x instanceof KeyPair$3?x:new KeyPair$3(_,{pub:x,pubEnc:E})};KeyPair$3.fromPrivate=function(_,x,E){return x instanceof KeyPair$3?x:new KeyPair$3(_,{priv:x,privEnc:E})};KeyPair$3.prototype.validate=function(){var _=this.getPublic();return _.isInfinity()?{result:!1,reason:"Invalid public key"}:_.validate()?_.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function(_,x){return typeof _=="string"&&(x=_,_=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,_):this.pub};KeyPair$3.prototype.getPrivate=function(_){return _==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function(_,x){this.priv=new BN$5(_,x||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function(_,x){if(_.x||_.y){this.ec.curve.type==="mont"?assert$b(_.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$b(_.x&&_.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(_.x,_.y);return}this.pub=this.ec.curve.decodePoint(_,x)};KeyPair$3.prototype.derive=function(_){return _.validate()||assert$b(_.validate(),"public point not validated"),_.mul(this.priv).getX()};KeyPair$3.prototype.sign=function(_,x,E){return this.ec.sign(_,this,x,E)};KeyPair$3.prototype.verify=function(_,x){return this.ec.verify(_,x,this)};KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$2,utils$7=utils$p,assert$a=utils$7.assert;function Signature$5(n,_){if(n instanceof Signature$5)return n;this._importDER(n,_)||(assert$a(n.r&&n.s,"Signature without r or s"),this.r=new BN$4(n.r,16),this.s=new BN$4(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature$2=Signature$5;function Position$1(){this.place=0}function getLength$1(n,_){var x=n[_.place++];if(!(x&128))return x;var E=x&15;if(E===0||E>4)return!1;for(var S=0,C=0,T=_.place;C<E;C++,T++)S<<=8,S|=n[T],S>>>=0;return S<=127?!1:(_.place=T,S)}function rmPadding$1(n){for(var _=0,x=n.length-1;!n[_]&&!(n[_+1]&128)&&_<x;)_++;return _===0?n:n.slice(_)}Signature$5.prototype._importDER=function(_,x){_=utils$7.toArray(_,x);var E=new Position$1;if(_[E.place++]!==48)return!1;var S=getLength$1(_,E);if(S===!1||S+E.place!==_.length||_[E.place++]!==2)return!1;var C=getLength$1(_,E);if(C===!1)return!1;var T=_.slice(E.place,C+E.place);if(E.place+=C,_[E.place++]!==2)return!1;var A=getLength$1(_,E);if(A===!1||_.length!==A+E.place)return!1;var B=_.slice(E.place,A+E.place);if(T[0]===0)if(T[1]&128)T=T.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new BN$4(T),this.s=new BN$4(B),this.recoveryParam=null,!0};function constructLength$1(n,_){if(_<128){n.push(_);return}var x=1+(Math.log(_)/Math.LN2>>>3);for(n.push(x|128);--x;)n.push(_>>>(x<<3)&255);n.push(_)}Signature$5.prototype.toDER=function(_){var x=this.r.toArray(),E=this.s.toArray();for(x[0]&128&&(x=[0].concat(x)),E[0]&128&&(E=[0].concat(E)),x=rmPadding$1(x),E=rmPadding$1(E);!E[0]&&!(E[1]&128);)E=E.slice(1);var S=[2];constructLength$1(S,x.length),S=S.concat(x),S.push(2),constructLength$1(S,E.length);var C=S.concat(E),T=[48];return constructLength$1(T,C.length),T=T.concat(C),utils$7.encode(T,_)};var ec$3,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$3;hasRequiredEc=1;var n=bnExports$2,_=hmacDrbg$1,x=utils$p,E=curves$1,S=requireBrorand(),C=x.assert,T=key$2,A=signature$2;function B(I){if(!(this instanceof B))return new B(I);typeof I=="string"&&(C(Object.prototype.hasOwnProperty.call(E,I),"Unknown curve "+I),I=E[I]),I instanceof E.PresetCurve&&(I={curve:I}),this.curve=I.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=I.curve.g,this.g.precompute(I.curve.n.bitLength()+1),this.hash=I.hash||I.curve.hash}return ec$3=B,B.prototype.keyPair=function(M){return new T(this,M)},B.prototype.keyFromPrivate=function(M,O){return T.fromPrivate(this,M,O)},B.prototype.keyFromPublic=function(M,O){return T.fromPublic(this,M,O)},B.prototype.genKeyPair=function(M){M||(M={});for(var O=new _({hash:this.hash,pers:M.pers,persEnc:M.persEnc||"utf8",entropy:M.entropy||S(this.hash.hmacStrength),entropyEnc:M.entropy&&M.entropyEnc||"utf8",nonce:this.n.toArray()}),D=this.n.byteLength(),L=this.n.sub(new n(2));;){var V=new n(O.generate(D));if(!(V.cmp(L)>0))return V.iaddn(1),this.keyFromPrivate(V)}},B.prototype._truncateToN=function(M,O){var D=M.byteLength()*8-this.n.bitLength();return D>0&&(M=M.ushrn(D)),!O&&M.cmp(this.n)>=0?M.sub(this.n):M},B.prototype.sign=function(M,O,D,L){typeof D=="object"&&(L=D,D=null),L||(L={}),O=this.keyFromPrivate(O,D),M=this._truncateToN(new n(M,16));for(var V=this.n.byteLength(),U=O.getPrivate().toArray("be",V),q=M.toArray("be",V),H=new _({hash:this.hash,entropy:U,nonce:q,pers:L.pers,persEnc:L.persEnc||"utf8"}),W=this.n.sub(new n(1)),Q=0;;Q++){var re=L.k?L.k(Q):new n(H.generate(this.n.byteLength()));if(re=this._truncateToN(re,!0),!(re.cmpn(1)<=0||re.cmp(W)>=0)){var ce=this.g.mul(re);if(!ce.isInfinity()){var ne=ce.getX(),Y=ne.umod(this.n);if(Y.cmpn(0)!==0){var fe=re.invm(this.n).mul(Y.mul(O.getPrivate()).iadd(M));if(fe=fe.umod(this.n),fe.cmpn(0)!==0){var ge=(ce.getY().isOdd()?1:0)|(ne.cmp(Y)!==0?2:0);return L.canonical&&fe.cmp(this.nh)>0&&(fe=this.n.sub(fe),ge^=1),new A({r:Y,s:fe,recoveryParam:ge})}}}}}},B.prototype.verify=function(M,O,D,L){M=this._truncateToN(new n(M,16)),D=this.keyFromPublic(D,L),O=new A(O,"hex");var V=O.r,U=O.s;if(V.cmpn(1)<0||V.cmp(this.n)>=0||U.cmpn(1)<0||U.cmp(this.n)>=0)return!1;var q=U.invm(this.n),H=q.mul(M).umod(this.n),W=q.mul(V).umod(this.n),Q;return this.curve._maxwellTrick?(Q=this.g.jmulAdd(H,D.getPublic(),W),Q.isInfinity()?!1:Q.eqXToP(V)):(Q=this.g.mulAdd(H,D.getPublic(),W),Q.isInfinity()?!1:Q.getX().umod(this.n).cmp(V)===0)},B.prototype.recoverPubKey=function(I,M,O,D){C((3&O)===O,"The recovery param is more than two bits"),M=new A(M,D);var L=this.n,V=new n(I),U=M.r,q=M.s,H=O&1,W=O>>1;if(U.cmp(this.curve.p.umod(this.curve.n))>=0&&W)throw new Error("Unable to find sencond key candinate");W?U=this.curve.pointFromX(U.add(this.curve.n),H):U=this.curve.pointFromX(U,H);var Q=M.r.invm(L),re=L.sub(V).mul(Q).umod(L),ce=q.mul(Q).umod(L);return this.g.mulAdd(re,U,ce)},B.prototype.getKeyRecoveryParam=function(I,M,O,D){if(M=new A(M,D),M.recoveryParam!==null)return M.recoveryParam;for(var L=0;L<4;L++){var V;try{V=this.recoverPubKey(I,M,L)}catch{continue}if(V.eq(O))return L}throw new Error("Unable to find valid recovery factor")},ec$3}var utils$6=utils$p,assert$9=utils$6.assert,parseBytes$2=utils$6.parseBytes,cachedProperty$1=utils$6.cachedProperty;function KeyPair$2(n,_){this.eddsa=n,this._secret=parseBytes$2(_.secret),n.isPoint(_.pub)?this._pub=_.pub:this._pubBytes=parseBytes$2(_.pub)}KeyPair$2.fromPublic=function(_,x){return x instanceof KeyPair$2?x:new KeyPair$2(_,{pub:x})};KeyPair$2.fromSecret=function(_,x){return x instanceof KeyPair$2?x:new KeyPair$2(_,{secret:x})};KeyPair$2.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$2,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$2,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$2,"privBytes",function(){var _=this.eddsa,x=this.hash(),E=_.encodingLength-1,S=x.slice(0,_.encodingLength);return S[0]&=248,S[E]&=127,S[E]|=64,S});cachedProperty$1(KeyPair$2,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$2,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$2,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$2.prototype.sign=function(_){return assert$9(this._secret,"KeyPair can only verify"),this.eddsa.sign(_,this)};KeyPair$2.prototype.verify=function(_,x){return this.eddsa.verify(_,x,this)};KeyPair$2.prototype.getSecret=function(_){return assert$9(this._secret,"KeyPair is public only"),utils$6.encode(this.secret(),_)};KeyPair$2.prototype.getPublic=function(_){return utils$6.encode(this.pubBytes(),_)};var key$1=KeyPair$2,BN$3=bnExports$2,utils$5=utils$p,assert$8=utils$5.assert,cachedProperty=utils$5.cachedProperty,parseBytes$1=utils$5.parseBytes;function Signature$4(n,_){this.eddsa=n,typeof _!="object"&&(_=parseBytes$1(_)),Array.isArray(_)&&(_={R:_.slice(0,n.encodingLength),S:_.slice(n.encodingLength)}),assert$8(_.R&&_.S,"Signature without R or S"),n.isPoint(_.R)&&(this._R=_.R),_.S instanceof BN$3&&(this._S=_.S),this._Rencoded=Array.isArray(_.R)?_.R:_.Rencoded,this._Sencoded=Array.isArray(_.S)?_.S:_.Sencoded}cachedProperty(Signature$4,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$4,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$4,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$4,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$4.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$4.prototype.toHex=function(){return utils$5.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$4,hash$1=hash$4,curves=curves$1,utils$4=utils$p,assert$7=utils$4.assert,parseBytes=utils$4.parseBytes,KeyPair$1=key$1,Signature$3=signature$1;function EDDSA(n){if(assert$7(n==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(n);n=curves[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=hash$1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(_,x){_=parseBytes(_);var E=this.keyFromSecret(x),S=this.hashInt(E.messagePrefix(),_),C=this.g.mul(S),T=this.encodePoint(C),A=this.hashInt(T,E.pubBytes(),_).mul(E.priv()),B=S.add(A).umod(this.curve.n);return this.makeSignature({R:C,S:B,Rencoded:T})};EDDSA.prototype.verify=function(_,x,E){_=parseBytes(_),x=this.makeSignature(x);var S=this.keyFromPublic(E),C=this.hashInt(x.Rencoded(),S.pubBytes(),_),T=this.g.mul(x.S()),A=x.R().add(S.pub().mul(C));return A.eq(T)};EDDSA.prototype.hashInt=function(){for(var _=this.hash(),x=0;x<arguments.length;x++)_.update(arguments[x]);return utils$4.intFromLE(_.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(_){return KeyPair$1.fromPublic(this,_)};EDDSA.prototype.keyFromSecret=function(_){return KeyPair$1.fromSecret(this,_)};EDDSA.prototype.makeSignature=function(_){return _ instanceof Signature$3?_:new Signature$3(this,_)};EDDSA.prototype.encodePoint=function(_){var x=_.getY().toArray("le",this.encodingLength);return x[this.encodingLength-1]|=_.getX().isOdd()?128:0,x};EDDSA.prototype.decodePoint=function(_){_=utils$4.parseBytes(_);var x=_.length-1,E=_.slice(0,x).concat(_[x]&-129),S=(_[x]&128)!==0,C=utils$4.intFromLE(E);return this.curve.pointFromY(C,S)};EDDSA.prototype.encodeInt=function(_){return _.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(_){return utils$4.intFromLE(_)};EDDSA.prototype.isPoint=function(_){return _ instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(n){var _=n;_.version=require$$0.version,_.utils=utils$p,_.rand=requireBrorand(),_.curve=curve,_.curves=curves$1,_.ec=requireEc(),_.eddsa=eddsa}(elliptic$3)),elliptic$3}var bn$2={exports:{}};bn$2.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(n){(function(_,x){function E(X,F){if(!X)throw new Error(F||"Assertion failed")}function S(X,F){X.super_=F;var z=function(){};z.prototype=F.prototype,X.prototype=new z,X.prototype.constructor=X}function C(X,F,z){if(C.isBN(X))return X;this.negative=0,this.words=null,this.length=0,this.red=null,X!==null&&((F==="le"||F==="be")&&(z=F,F=10),this._init(X||0,F||10,z||"be"))}typeof _=="object"?_.exports=C:x.BN=C,C.BN=C,C.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=require$$0$2.Buffer}catch{}C.isBN=function(F){return F instanceof C?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===C.wordSize&&Array.isArray(F.words)},C.max=function(F,z){return F.cmp(z)>0?F:z},C.min=function(F,z){return F.cmp(z)<0?F:z},C.prototype._init=function(F,z,J){if(typeof F=="number")return this._initNumber(F,z,J);if(typeof F=="object")return this._initArray(F,z,J);z==="hex"&&(z=16),E(z===(z|0)&&z>=2&&z<=36),F=F.toString().replace(/\s+/g,"");var te=0;F[0]==="-"&&(te++,this.negative=1),te<F.length&&(z===16?this._parseHex(F,te,J):(this._parseBase(F,z,te),J==="le"&&this._initArray(this.toArray(),z,J)))},C.prototype._initNumber=function(F,z,J){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},C.prototype._initArray=function(F,z,J){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se,oe,ie=0;if(J==="be")for(te=F.length-1,se=0;te>=0;te-=3)oe=F[te]|F[te-1]<<8|F[te-2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);else if(J==="le")for(te=0,se=0;te<F.length;te+=3)oe=F[te]|F[te+1]<<8|F[te+2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);return this._strip()};function A(X,F){var z=X.charCodeAt(F);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;E(!1,"Invalid character in "+X)}function B(X,F,z){var J=A(X,z);return z-1>=F&&(J|=A(X,z-1)<<4),J}C.prototype._parseHex=function(F,z,J){this.length=Math.ceil((F.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se=0,oe=0,ie;if(J==="be")for(te=F.length-1;te>=z;te-=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8;else{var G=F.length-z;for(te=G%2===0?z+1:z;te<F.length;te+=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8}this._strip()};function I(X,F,z,J){for(var te=0,se=0,oe=Math.min(X.length,z),ie=F;ie<oe;ie++){var G=X.charCodeAt(ie)-48;te*=J,G>=49?se=G-49+10:G>=17?se=G-17+10:se=G,E(G>=0&&se<J,"Invalid character"),te+=se}return te}C.prototype._parseBase=function(F,z,J){this.words=[0],this.length=1;for(var te=0,se=1;se<=67108863;se*=z)te++;te--,se=se/z|0;for(var oe=F.length-J,ie=oe%te,G=Math.min(oe,oe-ie)+J,j=0,ee=J;ee<G;ee+=te)j=I(F,ee,ee+te,z),this.imuln(se),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(ie!==0){var pe=1;for(j=I(F,ee,F.length,z),ee=0;ee<ie;ee++)pe*=z;this.imuln(pe),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this._strip()},C.prototype.copy=function(F){F.words=new Array(this.length);for(var z=0;z<this.length;z++)F.words[z]=this.words[z];F.length=this.length,F.negative=this.negative,F.red=this.red};function M(X,F){X.words=F.words,X.length=F.length,X.negative=F.negative,X.red=F.red}if(C.prototype._move=function(F){M(F,this)},C.prototype.clone=function(){var F=new C(null);return this.copy(F),F},C.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},C.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},C.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{C.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{C.prototype.inspect=O}else C.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];C.prototype.toString=function(F,z){F=F||10,z=z|0||1;var J;if(F===16||F==="hex"){J="";for(var te=0,se=0,oe=0;oe<this.length;oe++){var ie=this.words[oe],G=((ie<<te|se)&16777215).toString(16);se=ie>>>24-te&16777215,te+=2,te>=26&&(te-=26,oe--),se!==0||oe!==this.length-1?J=D[6-G.length]+G+J:J=G+J}for(se!==0&&(J=se.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(F===(F|0)&&F>=2&&F<=36){var j=L[F],ee=V[F];J="";var pe=this.clone();for(pe.negative=0;!pe.isZero();){var he=pe.modrn(ee).toString(F);pe=pe.idivn(ee),pe.isZero()?J=he+J:J=D[j-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}E(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},C.prototype.toJSON=function(){return this.toString(16,2)},T&&(C.prototype.toBuffer=function(F,z){return this.toArrayLike(T,F,z)}),C.prototype.toArray=function(F,z){return this.toArrayLike(Array,F,z)};var U=function(F,z){return F.allocUnsafe?F.allocUnsafe(z):new F(z)};C.prototype.toArrayLike=function(F,z,J){this._strip();var te=this.byteLength(),se=J||Math.max(1,te);E(te<=se,"byte array longer than desired length"),E(se>0,"Requested array length <= 0");var oe=U(F,se),ie=z==="le"?"LE":"BE";return this["_toArrayLike"+ie](oe,te),oe},C.prototype._toArrayLikeLE=function(F,z){for(var J=0,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J++]=ie&255,J<F.length&&(F[J++]=ie>>8&255),J<F.length&&(F[J++]=ie>>16&255),oe===6?(J<F.length&&(F[J++]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J<F.length)for(F[J++]=te;J<F.length;)F[J++]=0},C.prototype._toArrayLikeBE=function(F,z){for(var J=F.length-1,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J--]=ie&255,J>=0&&(F[J--]=ie>>8&255),J>=0&&(F[J--]=ie>>16&255),oe===6?(J>=0&&(F[J--]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J>=0)for(F[J--]=te;J>=0;)F[J--]=0},Math.clz32?C.prototype._countBits=function(F){return 32-Math.clz32(F)}:C.prototype._countBits=function(F){var z=F,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},C.prototype._zeroBits=function(F){if(F===0)return 26;var z=F,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},C.prototype.bitLength=function(){var F=this.words[this.length-1],z=this._countBits(F);return(this.length-1)*26+z};function q(X){for(var F=new Array(X.bitLength()),z=0;z<F.length;z++){var J=z/26|0,te=z%26;F[z]=X.words[J]>>>te&1}return F}C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(F+=J,J!==26)break}return F},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},C.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return this.negative!==0},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var z=0;z<F.length;z++)this.words[z]=this.words[z]|F.words[z];return this._strip()},C.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},C.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},C.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},C.prototype.iuand=function(F){var z;this.length>F.length?z=F:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&F.words[J];return this.length=z.length,this._strip()},C.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},C.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},C.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},C.prototype.iuxor=function(F){var z,J;this.length>F.length?(z=this,J=F):(z=F,J=this);for(var te=0;te<J.length;te++)this.words[te]=z.words[te]^J.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this._strip()},C.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},C.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},C.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},C.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var z=Math.ceil(F/26)|0,J=F%26;this._expand(z),J>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return J>0&&(this.words[te]=~this.words[te]&67108863>>26-J),this._strip()},C.prototype.notn=function(F){return this.clone().inotn(F)},C.prototype.setn=function(F,z){E(typeof F=="number"&&F>=0);var J=F/26|0,te=F%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<te:this.words[J]=this.words[J]&~(1<<te),this._strip()},C.prototype.iadd=function(F){var z;if(this.negative!==0&&F.negative===0)return this.negative=0,z=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,z=this.isub(F),F.negative=1,z._normSign();var J,te;this.length>F.length?(J=this,te=F):(J=F,te=this);for(var se=0,oe=0;oe<te.length;oe++)z=(J.words[oe]|0)+(te.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;for(;se!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;if(this.length=J.length,se!==0)this.words[this.length]=se,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},C.prototype.add=function(F){var z;return F.negative!==0&&this.negative===0?(F.negative=0,z=this.sub(F),F.negative^=1,z):F.negative===0&&this.negative!==0?(this.negative=0,z=F.sub(this),this.negative=1,z):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},C.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var z=this.iadd(F);return F.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var J=this.cmp(F);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,se;J>0?(te=this,se=F):(te=F,se=this);for(var oe=0,ie=0;ie<se.length;ie++)z=(te.words[ie]|0)-(se.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;for(;oe!==0&&ie<te.length;ie++)z=(te.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;if(oe===0&&ie<te.length&&te!==this)for(;ie<te.length;ie++)this.words[ie]=te.words[ie];return this.length=Math.max(this.length,ie),te!==this&&(this.negative=1),this._strip()},C.prototype.sub=function(F){return this.clone().isub(F)};function H(X,F,z){z.negative=F.negative^X.negative;var J=X.length+F.length|0;z.length=J,J=J-1|0;var te=X.words[0]|0,se=F.words[0]|0,oe=te*se,ie=oe&67108863,G=oe/67108864|0;z.words[0]=ie;for(var j=1;j<J;j++){for(var ee=G>>>26,pe=G&67108863,he=Math.min(j,F.length-1),Se=Math.max(0,j-X.length+1);Se<=he;Se++){var we=j-Se|0;te=X.words[we]|0,se=F.words[Se]|0,oe=te*se+pe,ee+=oe/67108864|0,pe=oe&67108863}z.words[j]=pe|0,G=ee|0}return G!==0?z.words[j]=G|0:z.length--,z._strip()}var W=function(F,z,J){var te=F.words,se=z.words,oe=J.words,ie=0,G,j,ee,pe=te[0]|0,he=pe&8191,Se=pe>>>13,we=te[1]|0,xe=we&8191,Ee=we>>>13,ye=te[2]|0,Ce=ye&8191,ve=ye>>>13,Be=te[3]|0,me=Be&8191,Ie=Be>>>13,Ve=te[4]|0,Me=Ve&8191,Ne=Ve>>>13,Pe=te[5]|0,He=Pe&8191,We=Pe>>>13,Ke=te[6]|0,Ge=Ke&8191,nt=Ke>>>13,ot=te[7]|0,Ze=ot&8191,Re=ot>>>13,be=te[8]|0,Ae=be&8191,Le=be>>>13,Xe=te[9]|0,Qe=Xe&8191,et=Xe>>>13,St=se[0]|0,mt=St&8191,dt=St>>>13,jt=se[1]|0,Ct=jt&8191,Rt=jt>>>13,ur=se[2]|0,Gt=ur&8191,Nt=ur>>>13,er=se[3]|0,Mt=er&8191,kt=er>>>13,tr=se[4]|0,Vt=tr&8191,Bt=tr>>>13,ar=se[5]|0,qt=ar&8191,Tt=ar>>>13,ir=se[6]|0,qe=ir&8191,Oe=ir>>>13,De=se[7]|0,ue=De&8191,ke=De>>>13,Fe=se[8]|0,Ue=Fe&8191,ze=Fe>>>13,Ye=se[9]|0,rt=Ye&8191,at=Ye>>>13;J.negative=F.negative^z.negative,J.length=19,G=Math.imul(he,mt),j=Math.imul(he,dt),j=j+Math.imul(Se,mt)|0,ee=Math.imul(Se,dt);var ct=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(xe,mt),j=Math.imul(xe,dt),j=j+Math.imul(Ee,mt)|0,ee=Math.imul(Ee,dt),G=G+Math.imul(he,Ct)|0,j=j+Math.imul(he,Rt)|0,j=j+Math.imul(Se,Ct)|0,ee=ee+Math.imul(Se,Rt)|0;var st=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(Ce,mt),j=Math.imul(Ce,dt),j=j+Math.imul(ve,mt)|0,ee=Math.imul(ve,dt),G=G+Math.imul(xe,Ct)|0,j=j+Math.imul(xe,Rt)|0,j=j+Math.imul(Ee,Ct)|0,ee=ee+Math.imul(Ee,Rt)|0,G=G+Math.imul(he,Gt)|0,j=j+Math.imul(he,Nt)|0,j=j+Math.imul(Se,Gt)|0,ee=ee+Math.imul(Se,Nt)|0;var lt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,G=Math.imul(me,mt),j=Math.imul(me,dt),j=j+Math.imul(Ie,mt)|0,ee=Math.imul(Ie,dt),G=G+Math.imul(Ce,Ct)|0,j=j+Math.imul(Ce,Rt)|0,j=j+Math.imul(ve,Ct)|0,ee=ee+Math.imul(ve,Rt)|0,G=G+Math.imul(xe,Gt)|0,j=j+Math.imul(xe,Nt)|0,j=j+Math.imul(Ee,Gt)|0,ee=ee+Math.imul(Ee,Nt)|0,G=G+Math.imul(he,Mt)|0,j=j+Math.imul(he,kt)|0,j=j+Math.imul(Se,Mt)|0,ee=ee+Math.imul(Se,kt)|0;var ht=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,G=Math.imul(Me,mt),j=Math.imul(Me,dt),j=j+Math.imul(Ne,mt)|0,ee=Math.imul(Ne,dt),G=G+Math.imul(me,Ct)|0,j=j+Math.imul(me,Rt)|0,j=j+Math.imul(Ie,Ct)|0,ee=ee+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ce,Gt)|0,j=j+Math.imul(Ce,Nt)|0,j=j+Math.imul(ve,Gt)|0,ee=ee+Math.imul(ve,Nt)|0,G=G+Math.imul(xe,Mt)|0,j=j+Math.imul(xe,kt)|0,j=j+Math.imul(Ee,Mt)|0,ee=ee+Math.imul(Ee,kt)|0,G=G+Math.imul(he,Vt)|0,j=j+Math.imul(he,Bt)|0,j=j+Math.imul(Se,Vt)|0,ee=ee+Math.imul(Se,Bt)|0;var bt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(bt>>>26)|0,bt&=67108863,G=Math.imul(He,mt),j=Math.imul(He,dt),j=j+Math.imul(We,mt)|0,ee=Math.imul(We,dt),G=G+Math.imul(Me,Ct)|0,j=j+Math.imul(Me,Rt)|0,j=j+Math.imul(Ne,Ct)|0,ee=ee+Math.imul(Ne,Rt)|0,G=G+Math.imul(me,Gt)|0,j=j+Math.imul(me,Nt)|0,j=j+Math.imul(Ie,Gt)|0,ee=ee+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ce,Mt)|0,j=j+Math.imul(Ce,kt)|0,j=j+Math.imul(ve,Mt)|0,ee=ee+Math.imul(ve,kt)|0,G=G+Math.imul(xe,Vt)|0,j=j+Math.imul(xe,Bt)|0,j=j+Math.imul(Ee,Vt)|0,ee=ee+Math.imul(Ee,Bt)|0,G=G+Math.imul(he,qt)|0,j=j+Math.imul(he,Tt)|0,j=j+Math.imul(Se,qt)|0,ee=ee+Math.imul(Se,Tt)|0;var Et=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,mt),j=Math.imul(Ge,dt),j=j+Math.imul(nt,mt)|0,ee=Math.imul(nt,dt),G=G+Math.imul(He,Ct)|0,j=j+Math.imul(He,Rt)|0,j=j+Math.imul(We,Ct)|0,ee=ee+Math.imul(We,Rt)|0,G=G+Math.imul(Me,Gt)|0,j=j+Math.imul(Me,Nt)|0,j=j+Math.imul(Ne,Gt)|0,ee=ee+Math.imul(Ne,Nt)|0,G=G+Math.imul(me,Mt)|0,j=j+Math.imul(me,kt)|0,j=j+Math.imul(Ie,Mt)|0,ee=ee+Math.imul(Ie,kt)|0,G=G+Math.imul(Ce,Vt)|0,j=j+Math.imul(Ce,Bt)|0,j=j+Math.imul(ve,Vt)|0,ee=ee+Math.imul(ve,Bt)|0,G=G+Math.imul(xe,qt)|0,j=j+Math.imul(xe,Tt)|0,j=j+Math.imul(Ee,qt)|0,ee=ee+Math.imul(Ee,Tt)|0,G=G+Math.imul(he,qe)|0,j=j+Math.imul(he,Oe)|0,j=j+Math.imul(Se,qe)|0,ee=ee+Math.imul(Se,Oe)|0;var gt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,mt),j=Math.imul(Ze,dt),j=j+Math.imul(Re,mt)|0,ee=Math.imul(Re,dt),G=G+Math.imul(Ge,Ct)|0,j=j+Math.imul(Ge,Rt)|0,j=j+Math.imul(nt,Ct)|0,ee=ee+Math.imul(nt,Rt)|0,G=G+Math.imul(He,Gt)|0,j=j+Math.imul(He,Nt)|0,j=j+Math.imul(We,Gt)|0,ee=ee+Math.imul(We,Nt)|0,G=G+Math.imul(Me,Mt)|0,j=j+Math.imul(Me,kt)|0,j=j+Math.imul(Ne,Mt)|0,ee=ee+Math.imul(Ne,kt)|0,G=G+Math.imul(me,Vt)|0,j=j+Math.imul(me,Bt)|0,j=j+Math.imul(Ie,Vt)|0,ee=ee+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ce,qt)|0,j=j+Math.imul(Ce,Tt)|0,j=j+Math.imul(ve,qt)|0,ee=ee+Math.imul(ve,Tt)|0,G=G+Math.imul(xe,qe)|0,j=j+Math.imul(xe,Oe)|0,j=j+Math.imul(Ee,qe)|0,ee=ee+Math.imul(Ee,Oe)|0,G=G+Math.imul(he,ue)|0,j=j+Math.imul(he,ke)|0,j=j+Math.imul(Se,ue)|0,ee=ee+Math.imul(Se,ke)|0;var wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,G=Math.imul(Ae,mt),j=Math.imul(Ae,dt),j=j+Math.imul(Le,mt)|0,ee=Math.imul(Le,dt),G=G+Math.imul(Ze,Ct)|0,j=j+Math.imul(Ze,Rt)|0,j=j+Math.imul(Re,Ct)|0,ee=ee+Math.imul(Re,Rt)|0,G=G+Math.imul(Ge,Gt)|0,j=j+Math.imul(Ge,Nt)|0,j=j+Math.imul(nt,Gt)|0,ee=ee+Math.imul(nt,Nt)|0,G=G+Math.imul(He,Mt)|0,j=j+Math.imul(He,kt)|0,j=j+Math.imul(We,Mt)|0,ee=ee+Math.imul(We,kt)|0,G=G+Math.imul(Me,Vt)|0,j=j+Math.imul(Me,Bt)|0,j=j+Math.imul(Ne,Vt)|0,ee=ee+Math.imul(Ne,Bt)|0,G=G+Math.imul(me,qt)|0,j=j+Math.imul(me,Tt)|0,j=j+Math.imul(Ie,qt)|0,ee=ee+Math.imul(Ie,Tt)|0,G=G+Math.imul(Ce,qe)|0,j=j+Math.imul(Ce,Oe)|0,j=j+Math.imul(ve,qe)|0,ee=ee+Math.imul(ve,Oe)|0,G=G+Math.imul(xe,ue)|0,j=j+Math.imul(xe,ke)|0,j=j+Math.imul(Ee,ue)|0,ee=ee+Math.imul(Ee,ke)|0,G=G+Math.imul(he,Ue)|0,j=j+Math.imul(he,ze)|0,j=j+Math.imul(Se,Ue)|0,ee=ee+Math.imul(Se,ze)|0;var Dt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,G=Math.imul(Qe,mt),j=Math.imul(Qe,dt),j=j+Math.imul(et,mt)|0,ee=Math.imul(et,dt),G=G+Math.imul(Ae,Ct)|0,j=j+Math.imul(Ae,Rt)|0,j=j+Math.imul(Le,Ct)|0,ee=ee+Math.imul(Le,Rt)|0,G=G+Math.imul(Ze,Gt)|0,j=j+Math.imul(Ze,Nt)|0,j=j+Math.imul(Re,Gt)|0,ee=ee+Math.imul(Re,Nt)|0,G=G+Math.imul(Ge,Mt)|0,j=j+Math.imul(Ge,kt)|0,j=j+Math.imul(nt,Mt)|0,ee=ee+Math.imul(nt,kt)|0,G=G+Math.imul(He,Vt)|0,j=j+Math.imul(He,Bt)|0,j=j+Math.imul(We,Vt)|0,ee=ee+Math.imul(We,Bt)|0,G=G+Math.imul(Me,qt)|0,j=j+Math.imul(Me,Tt)|0,j=j+Math.imul(Ne,qt)|0,ee=ee+Math.imul(Ne,Tt)|0,G=G+Math.imul(me,qe)|0,j=j+Math.imul(me,Oe)|0,j=j+Math.imul(Ie,qe)|0,ee=ee+Math.imul(Ie,Oe)|0,G=G+Math.imul(Ce,ue)|0,j=j+Math.imul(Ce,ke)|0,j=j+Math.imul(ve,ue)|0,ee=ee+Math.imul(ve,ke)|0,G=G+Math.imul(xe,Ue)|0,j=j+Math.imul(xe,ze)|0,j=j+Math.imul(Ee,Ue)|0,ee=ee+Math.imul(Ee,ze)|0,G=G+Math.imul(he,rt)|0,j=j+Math.imul(he,at)|0,j=j+Math.imul(Se,rt)|0,ee=ee+Math.imul(Se,at)|0;var Ft=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Qe,Ct),j=Math.imul(Qe,Rt),j=j+Math.imul(et,Ct)|0,ee=Math.imul(et,Rt),G=G+Math.imul(Ae,Gt)|0,j=j+Math.imul(Ae,Nt)|0,j=j+Math.imul(Le,Gt)|0,ee=ee+Math.imul(Le,Nt)|0,G=G+Math.imul(Ze,Mt)|0,j=j+Math.imul(Ze,kt)|0,j=j+Math.imul(Re,Mt)|0,ee=ee+Math.imul(Re,kt)|0,G=G+Math.imul(Ge,Vt)|0,j=j+Math.imul(Ge,Bt)|0,j=j+Math.imul(nt,Vt)|0,ee=ee+Math.imul(nt,Bt)|0,G=G+Math.imul(He,qt)|0,j=j+Math.imul(He,Tt)|0,j=j+Math.imul(We,qt)|0,ee=ee+Math.imul(We,Tt)|0,G=G+Math.imul(Me,qe)|0,j=j+Math.imul(Me,Oe)|0,j=j+Math.imul(Ne,qe)|0,ee=ee+Math.imul(Ne,Oe)|0,G=G+Math.imul(me,ue)|0,j=j+Math.imul(me,ke)|0,j=j+Math.imul(Ie,ue)|0,ee=ee+Math.imul(Ie,ke)|0,G=G+Math.imul(Ce,Ue)|0,j=j+Math.imul(Ce,ze)|0,j=j+Math.imul(ve,Ue)|0,ee=ee+Math.imul(ve,ze)|0,G=G+Math.imul(xe,rt)|0,j=j+Math.imul(xe,at)|0,j=j+Math.imul(Ee,rt)|0,ee=ee+Math.imul(Ee,at)|0;var Kt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Qe,Gt),j=Math.imul(Qe,Nt),j=j+Math.imul(et,Gt)|0,ee=Math.imul(et,Nt),G=G+Math.imul(Ae,Mt)|0,j=j+Math.imul(Ae,kt)|0,j=j+Math.imul(Le,Mt)|0,ee=ee+Math.imul(Le,kt)|0,G=G+Math.imul(Ze,Vt)|0,j=j+Math.imul(Ze,Bt)|0,j=j+Math.imul(Re,Vt)|0,ee=ee+Math.imul(Re,Bt)|0,G=G+Math.imul(Ge,qt)|0,j=j+Math.imul(Ge,Tt)|0,j=j+Math.imul(nt,qt)|0,ee=ee+Math.imul(nt,Tt)|0,G=G+Math.imul(He,qe)|0,j=j+Math.imul(He,Oe)|0,j=j+Math.imul(We,qe)|0,ee=ee+Math.imul(We,Oe)|0,G=G+Math.imul(Me,ue)|0,j=j+Math.imul(Me,ke)|0,j=j+Math.imul(Ne,ue)|0,ee=ee+Math.imul(Ne,ke)|0,G=G+Math.imul(me,Ue)|0,j=j+Math.imul(me,ze)|0,j=j+Math.imul(Ie,Ue)|0,ee=ee+Math.imul(Ie,ze)|0,G=G+Math.imul(Ce,rt)|0,j=j+Math.imul(Ce,at)|0,j=j+Math.imul(ve,rt)|0,ee=ee+Math.imul(ve,at)|0;var Ut=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,G=Math.imul(Qe,Mt),j=Math.imul(Qe,kt),j=j+Math.imul(et,Mt)|0,ee=Math.imul(et,kt),G=G+Math.imul(Ae,Vt)|0,j=j+Math.imul(Ae,Bt)|0,j=j+Math.imul(Le,Vt)|0,ee=ee+Math.imul(Le,Bt)|0,G=G+Math.imul(Ze,qt)|0,j=j+Math.imul(Ze,Tt)|0,j=j+Math.imul(Re,qt)|0,ee=ee+Math.imul(Re,Tt)|0,G=G+Math.imul(Ge,qe)|0,j=j+Math.imul(Ge,Oe)|0,j=j+Math.imul(nt,qe)|0,ee=ee+Math.imul(nt,Oe)|0,G=G+Math.imul(He,ue)|0,j=j+Math.imul(He,ke)|0,j=j+Math.imul(We,ue)|0,ee=ee+Math.imul(We,ke)|0,G=G+Math.imul(Me,Ue)|0,j=j+Math.imul(Me,ze)|0,j=j+Math.imul(Ne,Ue)|0,ee=ee+Math.imul(Ne,ze)|0,G=G+Math.imul(me,rt)|0,j=j+Math.imul(me,at)|0,j=j+Math.imul(Ie,rt)|0,ee=ee+Math.imul(Ie,at)|0;var Xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,G=Math.imul(Qe,Vt),j=Math.imul(Qe,Bt),j=j+Math.imul(et,Vt)|0,ee=Math.imul(et,Bt),G=G+Math.imul(Ae,qt)|0,j=j+Math.imul(Ae,Tt)|0,j=j+Math.imul(Le,qt)|0,ee=ee+Math.imul(Le,Tt)|0,G=G+Math.imul(Ze,qe)|0,j=j+Math.imul(Ze,Oe)|0,j=j+Math.imul(Re,qe)|0,ee=ee+Math.imul(Re,Oe)|0,G=G+Math.imul(Ge,ue)|0,j=j+Math.imul(Ge,ke)|0,j=j+Math.imul(nt,ue)|0,ee=ee+Math.imul(nt,ke)|0,G=G+Math.imul(He,Ue)|0,j=j+Math.imul(He,ze)|0,j=j+Math.imul(We,Ue)|0,ee=ee+Math.imul(We,ze)|0,G=G+Math.imul(Me,rt)|0,j=j+Math.imul(Me,at)|0,j=j+Math.imul(Ne,rt)|0,ee=ee+Math.imul(Ne,at)|0;var Zt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,G=Math.imul(Qe,qt),j=Math.imul(Qe,Tt),j=j+Math.imul(et,qt)|0,ee=Math.imul(et,Tt),G=G+Math.imul(Ae,qe)|0,j=j+Math.imul(Ae,Oe)|0,j=j+Math.imul(Le,qe)|0,ee=ee+Math.imul(Le,Oe)|0,G=G+Math.imul(Ze,ue)|0,j=j+Math.imul(Ze,ke)|0,j=j+Math.imul(Re,ue)|0,ee=ee+Math.imul(Re,ke)|0,G=G+Math.imul(Ge,Ue)|0,j=j+Math.imul(Ge,ze)|0,j=j+Math.imul(nt,Ue)|0,ee=ee+Math.imul(nt,ze)|0,G=G+Math.imul(He,rt)|0,j=j+Math.imul(He,at)|0,j=j+Math.imul(We,rt)|0,ee=ee+Math.imul(We,at)|0;var Wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Qe,qe),j=Math.imul(Qe,Oe),j=j+Math.imul(et,qe)|0,ee=Math.imul(et,Oe),G=G+Math.imul(Ae,ue)|0,j=j+Math.imul(Ae,ke)|0,j=j+Math.imul(Le,ue)|0,ee=ee+Math.imul(Le,ke)|0,G=G+Math.imul(Ze,Ue)|0,j=j+Math.imul(Ze,ze)|0,j=j+Math.imul(Re,Ue)|0,ee=ee+Math.imul(Re,ze)|0,G=G+Math.imul(Ge,rt)|0,j=j+Math.imul(Ge,at)|0,j=j+Math.imul(nt,rt)|0,ee=ee+Math.imul(nt,at)|0;var yt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(Qe,ue),j=Math.imul(Qe,ke),j=j+Math.imul(et,ue)|0,ee=Math.imul(et,ke),G=G+Math.imul(Ae,Ue)|0,j=j+Math.imul(Ae,ze)|0,j=j+Math.imul(Le,Ue)|0,ee=ee+Math.imul(Le,ze)|0,G=G+Math.imul(Ze,rt)|0,j=j+Math.imul(Ze,at)|0,j=j+Math.imul(Re,rt)|0,ee=ee+Math.imul(Re,at)|0;var xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Qe,Ue),j=Math.imul(Qe,ze),j=j+Math.imul(et,Ue)|0,ee=Math.imul(et,ze),G=G+Math.imul(Ae,rt)|0,j=j+Math.imul(Ae,at)|0,j=j+Math.imul(Le,rt)|0,ee=ee+Math.imul(Le,at)|0;var Pt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,G=Math.imul(Qe,rt),j=Math.imul(Qe,at),j=j+Math.imul(et,rt)|0,ee=Math.imul(et,at);var It=(ie+G|0)+((j&8191)<<13)|0;return ie=(ee+(j>>>13)|0)+(It>>>26)|0,It&=67108863,oe[0]=ct,oe[1]=st,oe[2]=lt,oe[3]=ht,oe[4]=bt,oe[5]=Et,oe[6]=gt,oe[7]=wt,oe[8]=Dt,oe[9]=Ft,oe[10]=Kt,oe[11]=Ut,oe[12]=Xt,oe[13]=Zt,oe[14]=Wt,oe[15]=yt,oe[16]=xt,oe[17]=Pt,oe[18]=It,ie!==0&&(oe[19]=ie,J.length++),J};Math.imul||(W=H);function Q(X,F,z){z.negative=F.negative^X.negative,z.length=X.length+F.length;for(var J=0,te=0,se=0;se<z.length-1;se++){var oe=te;te=0;for(var ie=J&67108863,G=Math.min(se,F.length-1),j=Math.max(0,se-X.length+1);j<=G;j++){var ee=se-j,pe=X.words[ee]|0,he=F.words[j]|0,Se=pe*he,we=Se&67108863;oe=oe+(Se/67108864|0)|0,we=we+ie|0,ie=we&67108863,oe=oe+(we>>>26)|0,te+=oe>>>26,oe&=67108863}z.words[se]=ie,J=oe,oe=te}return J!==0?z.words[se]=J:z.length--,z._strip()}function re(X,F,z){return Q(X,F,z)}C.prototype.mulTo=function(F,z){var J,te=this.length+F.length;return this.length===10&&F.length===10?J=W(this,F,z):te<63?J=H(this,F,z):te<1024?J=Q(this,F,z):J=re(this,F,z),J},C.prototype.mul=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),this.mulTo(F,z)},C.prototype.mulf=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),re(this,F,z)},C.prototype.imul=function(F){return this.clone().mulTo(F,this)},C.prototype.imuln=function(F){var z=F<0;z&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var J=0,te=0;te<this.length;te++){var se=(this.words[te]|0)*F,oe=(se&67108863)+(J&67108863);J>>=26,J+=se/67108864|0,J+=oe>>>26,this.words[te]=oe&67108863}return J!==0&&(this.words[te]=J,this.length++),z?this.ineg():this},C.prototype.muln=function(F){return this.clone().imuln(F)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(F){var z=q(F);if(z.length===0)return new C(1);for(var J=this,te=0;te<z.length&&z[te]===0;te++,J=J.sqr());if(++te<z.length)for(var se=J.sqr();te<z.length;te++,se=se.sqr())z[te]!==0&&(J=J.mul(se));return J},C.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=67108863>>>26-z<<26-z,se;if(z!==0){var oe=0;for(se=0;se<this.length;se++){var ie=this.words[se]&te,G=(this.words[se]|0)-ie<<z;this.words[se]=G|oe,oe=ie>>>26-z}oe&&(this.words[se]=oe,this.length++)}if(J!==0){for(se=this.length-1;se>=0;se--)this.words[se+J]=this.words[se];for(se=0;se<J;se++)this.words[se]=0;this.length+=J}return this._strip()},C.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},C.prototype.iushrn=function(F,z,J){E(typeof F=="number"&&F>=0);var te;z?te=(z-z%26)/26:te=0;var se=F%26,oe=Math.min((F-se)/26,this.length),ie=67108863^67108863>>>se<<se,G=J;if(te-=oe,te=Math.max(0,te),G){for(var j=0;j<oe;j++)G.words[j]=this.words[j];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,j=0;j<this.length;j++)this.words[j]=this.words[j+oe];else this.words[0]=0,this.length=1;var ee=0;for(j=this.length-1;j>=0&&(ee!==0||j>=te);j--){var pe=this.words[j]|0;this.words[j]=ee<<26-se|pe>>>se,ee=pe&ie}return G&&ee!==0&&(G.words[G.length++]=ee),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},C.prototype.ishrn=function(F,z,J){return E(this.negative===0),this.iushrn(F,z,J)},C.prototype.shln=function(F){return this.clone().ishln(F)},C.prototype.ushln=function(F){return this.clone().iushln(F)},C.prototype.shrn=function(F){return this.clone().ishrn(F)},C.prototype.ushrn=function(F){return this.clone().iushrn(F)},C.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return!1;var se=this.words[J];return!!(se&te)},C.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this._strip()},C.prototype.maskn=function(F){return this.clone().imaskn(F)},C.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},C.prototype._iaddn=function(F){this.words[0]+=F;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},C.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},C.prototype.addn=function(F){return this.clone().iaddn(F)},C.prototype.subn=function(F){return this.clone().isubn(F)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(F,z,J){var te=F.length+J,se;this._expand(te);var oe,ie=0;for(se=0;se<F.length;se++){oe=(this.words[se+J]|0)+ie;var G=(F.words[se]|0)*z;oe-=G&67108863,ie=(oe>>26)-(G/67108864|0),this.words[se+J]=oe&67108863}for(;se<this.length-J;se++)oe=(this.words[se+J]|0)+ie,ie=oe>>26,this.words[se+J]=oe&67108863;if(ie===0)return this._strip();for(E(ie===-1),ie=0,se=0;se<this.length;se++)oe=-(this.words[se]|0)+ie,ie=oe>>26,this.words[se]=oe&67108863;return this.negative=1,this._strip()},C.prototype._wordDiv=function(F,z){var J=this.length-F.length,te=this.clone(),se=F,oe=se.words[se.length-1]|0,ie=this._countBits(oe);J=26-ie,J!==0&&(se=se.ushln(J),te.iushln(J),oe=se.words[se.length-1]|0);var G=te.length-se.length,j;if(z!=="mod"){j=new C(null),j.length=G+1,j.words=new Array(j.length);for(var ee=0;ee<j.length;ee++)j.words[ee]=0}var pe=te.clone()._ishlnsubmul(se,1,G);pe.negative===0&&(te=pe,j&&(j.words[G]=1));for(var he=G-1;he>=0;he--){var Se=(te.words[se.length+he]|0)*67108864+(te.words[se.length+he-1]|0);for(Se=Math.min(Se/oe|0,67108863),te._ishlnsubmul(se,Se,he);te.negative!==0;)Se--,te.negative=0,te._ishlnsubmul(se,1,he),te.isZero()||(te.negative^=1);j&&(j.words[he]=Se)}return j&&j._strip(),te._strip(),z!=="div"&&J!==0&&te.iushrn(J),{div:j||null,mod:te}},C.prototype.divmod=function(F,z,J){if(E(!F.isZero()),this.isZero())return{div:new C(0),mod:new C(0)};var te,se,oe;return this.negative!==0&&F.negative===0?(oe=this.neg().divmod(F,z),z!=="mod"&&(te=oe.div.neg()),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.iadd(F)),{div:te,mod:se}):this.negative===0&&F.negative!==0?(oe=this.divmod(F.neg(),z),z!=="mod"&&(te=oe.div.neg()),{div:te,mod:oe.mod}):this.negative&F.negative?(oe=this.neg().divmod(F.neg(),z),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.isub(F)),{div:oe.div,mod:se}):F.length>this.length||this.cmp(F)<0?{div:new C(0),mod:this}:F.length===1?z==="div"?{div:this.divn(F.words[0]),mod:null}:z==="mod"?{div:null,mod:new C(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new C(this.modrn(F.words[0]))}:this._wordDiv(F,z)},C.prototype.div=function(F){return this.divmod(F,"div",!1).div},C.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},C.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},C.prototype.divRound=function(F){var z=this.divmod(F);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(F):z.mod,te=F.ushrn(1),se=F.andln(1),oe=J.cmp(te);return oe<0||se===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},C.prototype.modrn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=(1<<26)%F,te=0,se=this.length-1;se>=0;se--)te=(J*te+(this.words[se]|0))%F;return z?-te:te},C.prototype.modn=function(F){return this.modrn(F)},C.prototype.idivn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=0,te=this.length-1;te>=0;te--){var se=(this.words[te]|0)+J*67108864;this.words[te]=se/F|0,J=se%F}return this._strip(),z?this.ineg():this},C.prototype.divn=function(F){return this.clone().idivn(F)},C.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=new C(0),ie=new C(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var j=J.clone(),ee=z.clone();!z.isZero();){for(var pe=0,he=1;!(z.words[0]&he)&&pe<26;++pe,he<<=1);if(pe>0)for(z.iushrn(pe);pe-- >0;)(te.isOdd()||se.isOdd())&&(te.iadd(j),se.isub(ee)),te.iushrn(1),se.iushrn(1);for(var Se=0,we=1;!(J.words[0]&we)&&Se<26;++Se,we<<=1);if(Se>0)for(J.iushrn(Se);Se-- >0;)(oe.isOdd()||ie.isOdd())&&(oe.iadd(j),ie.isub(ee)),oe.iushrn(1),ie.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(oe),se.isub(ie)):(J.isub(z),oe.isub(te),ie.isub(se))}return{a:oe,b:ie,gcd:J.iushln(G)}},C.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var ie=0,G=1;!(z.words[0]&G)&&ie<26;++ie,G<<=1);if(ie>0)for(z.iushrn(ie);ie-- >0;)te.isOdd()&&te.iadd(oe),te.iushrn(1);for(var j=0,ee=1;!(J.words[0]&ee)&&j<26;++j,ee<<=1);if(j>0)for(J.iushrn(j);j-- >0;)se.isOdd()&&se.iadd(oe),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(se)):(J.isub(z),se.isub(te))}var pe;return z.cmpn(1)===0?pe=te:pe=se,pe.cmpn(0)<0&&pe.iadd(F),pe},C.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var z=this.clone(),J=F.clone();z.negative=0,J.negative=0;for(var te=0;z.isEven()&&J.isEven();te++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var se=z.cmp(J);if(se<0){var oe=z;z=J,J=oe}else if(se===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(te)},C.prototype.invm=function(F){return this.egcd(F).a.umod(F)},C.prototype.isEven=function(){return(this.words[0]&1)===0},C.prototype.isOdd=function(){return(this.words[0]&1)===1},C.prototype.andln=function(F){return this.words[0]&F},C.prototype.bincn=function(F){E(typeof F=="number");var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=te,this;for(var se=te,oe=J;se!==0&&oe<this.length;oe++){var ie=this.words[oe]|0;ie+=se,se=ie>>>26,ie&=67108863,this.words[oe]=ie}return se!==0&&(this.words[oe]=se,this.length++),this},C.prototype.isZero=function(){return this.length===1&&this.words[0]===0},C.prototype.cmpn=function(F){var z=F<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(F=-F),E(F<=67108863,"Number is too big");var te=this.words[0]|0;J=te===F?0:te<F?-1:1}return this.negative!==0?-J|0:J},C.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var z=this.ucmp(F);return this.negative!==0?-z|0:z},C.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var te=this.words[J]|0,se=F.words[J]|0;if(te!==se){te<se?z=-1:te>se&&(z=1);break}}return z},C.prototype.gtn=function(F){return this.cmpn(F)===1},C.prototype.gt=function(F){return this.cmp(F)===1},C.prototype.gten=function(F){return this.cmpn(F)>=0},C.prototype.gte=function(F){return this.cmp(F)>=0},C.prototype.ltn=function(F){return this.cmpn(F)===-1},C.prototype.lt=function(F){return this.cmp(F)===-1},C.prototype.lten=function(F){return this.cmpn(F)<=0},C.prototype.lte=function(F){return this.cmp(F)<=0},C.prototype.eqn=function(F){return this.cmpn(F)===0},C.prototype.eq=function(F){return this.cmp(F)===0},C.red=function(F){return new _e(F)},C.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},C.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(F){return this.red=F,this},C.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},C.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},C.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},C.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},C.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},C.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},C.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},C.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},C.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var ce={k256:null,p224:null,p192:null,p25519:null};function ne(X,F){this.name=X,this.p=new C(F,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ne.prototype._tmp=function(){var F=new C(null);return F.words=new Array(Math.ceil(this.n/13)),F},ne.prototype.ireduce=function(F){var z=F,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var te=J<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},ne.prototype.split=function(F,z){F.iushrn(this.n,0,z)},ne.prototype.imulK=function(F){return F.imul(this.k)};function Y(){ne.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Y,ne),Y.prototype.split=function(F,z){for(var J=4194303,te=Math.min(F.length,9),se=0;se<te;se++)z.words[se]=F.words[se];if(z.length=te,F.length<=9){F.words[0]=0,F.length=1;return}var oe=F.words[9];for(z.words[z.length++]=oe&J,se=10;se<F.length;se++){var ie=F.words[se]|0;F.words[se-10]=(ie&J)<<4|oe>>>22,oe=ie}oe>>>=22,F.words[se-10]=oe,oe===0&&F.length>10?F.length-=10:F.length-=9},Y.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var z=0,J=0;J<F.length;J++){var te=F.words[J]|0;z+=te*977,F.words[J]=z&67108863,z=te*64+(z/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function fe(){ne.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(fe,ne);function ge(){ne.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ge,ne);function $e(){ne.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S($e,ne),$e.prototype.imulK=function(F){for(var z=0,J=0;J<F.length;J++){var te=(F.words[J]|0)*19+z,se=te&67108863;te>>>=26,F.words[J]=se,z=te}return z!==0&&(F.words[F.length++]=z),F},C._prime=function(F){if(ce[F])return ce[F];var z;if(F==="k256")z=new Y;else if(F==="p224")z=new fe;else if(F==="p192")z=new ge;else if(F==="p25519")z=new $e;else throw new Error("Unknown prime "+F);return ce[F]=z,z};function _e(X){if(typeof X=="string"){var F=C._prime(X);this.m=F.p,this.prime=F}else E(X.gtn(1),"modulus must be greater than 1"),this.m=X,this.prime=null}_e.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},_e.prototype._verify2=function(F,z){E((F.negative|z.negative)===0,"red works only with positives"),E(F.red&&F.red===z.red,"red works only with red numbers")},_e.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(M(F,F.umod(this.m)._forceRed(this)),F)},_e.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},_e.prototype.add=function(F,z){this._verify2(F,z);var J=F.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},_e.prototype.iadd=function(F,z){this._verify2(F,z);var J=F.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},_e.prototype.sub=function(F,z){this._verify2(F,z);var J=F.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},_e.prototype.isub=function(F,z){this._verify2(F,z);var J=F.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},_e.prototype.shl=function(F,z){return this._verify1(F),this.imod(F.ushln(z))},_e.prototype.imul=function(F,z){return this._verify2(F,z),this.imod(F.imul(z))},_e.prototype.mul=function(F,z){return this._verify2(F,z),this.imod(F.mul(z))},_e.prototype.isqr=function(F){return this.imul(F,F.clone())},_e.prototype.sqr=function(F){return this.mul(F,F)},_e.prototype.sqrt=function(F){if(F.isZero())return F.clone();var z=this.m.andln(3);if(E(z%2===1),z===3){var J=this.m.add(new C(1)).iushrn(2);return this.pow(F,J)}for(var te=this.m.subn(1),se=0;!te.isZero()&&te.andln(1)===0;)se++,te.iushrn(1);E(!te.isZero());var oe=new C(1).toRed(this),ie=oe.redNeg(),G=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new C(2*j*j).toRed(this);this.pow(j,G).cmp(ie)!==0;)j.redIAdd(ie);for(var ee=this.pow(j,te),pe=this.pow(F,te.addn(1).iushrn(1)),he=this.pow(F,te),Se=se;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();E(xe<Se);var Ee=this.pow(ee,new C(1).iushln(Se-xe-1));pe=pe.redMul(Ee),ee=Ee.redSqr(),he=he.redMul(ee),Se=xe}return pe},_e.prototype.invm=function(F){var z=F._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},_e.prototype.pow=function(F,z){if(z.isZero())return new C(1).toRed(this);if(z.cmpn(1)===0)return F.clone();var J=4,te=new Array(1<<J);te[0]=new C(1).toRed(this),te[1]=F;for(var se=2;se<te.length;se++)te[se]=this.mul(te[se-1],F);var oe=te[0],ie=0,G=0,j=z.bitLength()%26;for(j===0&&(j=26),se=z.length-1;se>=0;se--){for(var ee=z.words[se],pe=j-1;pe>=0;pe--){var he=ee>>pe&1;if(oe!==te[0]&&(oe=this.sqr(oe)),he===0&&ie===0){G=0;continue}ie<<=1,ie|=he,G++,!(G!==J&&(se!==0||pe!==0))&&(oe=this.mul(oe,te[ie]),G=0,ie=0)}j=26}return oe},_e.prototype.convertTo=function(F){var z=F.umod(this.m);return z===F?z.clone():z},_e.prototype.convertFrom=function(F){var z=F.clone();return z.red=null,z},C.mont=function(F){return new ae(F)};function ae(X){_e.call(this,X),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(ae,_e),ae.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},ae.prototype.convertFrom=function(F){var z=this.imod(F.mul(this.rinv));return z.red=null,z},ae.prototype.imul=function(F,z){if(F.isZero()||z.isZero())return F.words[0]=0,F.length=1,F;var J=F.imul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.mul=function(F,z){if(F.isZero()||z.isZero())return new C(0)._forceRed(this);var J=F.mul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.invm=function(F){var z=this.imod(F._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(n,commonjsGlobal)}(bn$2)),bn$2.exports}var asn1$3={},asn1$2={},api$1={},encoders={},safer_1,hasRequiredSafer;function requireSafer(){if(hasRequiredSafer)return safer_1;hasRequiredSafer=1;var n=buffer$3,_=n.Buffer,x={},E;for(E in n)n.hasOwnProperty(E)&&(E==="SlowBuffer"||E==="Buffer"||(x[E]=n[E]));var S=x.Buffer={};for(E in _)_.hasOwnProperty(E)&&(E==="allocUnsafe"||E==="allocUnsafeSlow"||(S[E]=_[E]));if(x.Buffer.prototype=_.prototype,(!S.from||S.from===Uint8Array.from)&&(S.from=function(C,T,A){if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof C);if(C&&typeof C.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);return _(C,T,A)}),S.alloc||(S.alloc=function(C,T,A){if(typeof C!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof C);if(C<0||C>=2*(1<<30))throw new RangeError('The value "'+C+'" is invalid for option "size"');var B=_(C);return!T||T.length===0?B.fill(0):typeof A=="string"?B.fill(T,A):B.fill(T),B}),!x.kStringMaxLength)try{x.kStringMaxLength=browser$1$1.binding("buffer").kStringMaxLength}catch{}return x.constants||(x.constants={MAX_LENGTH:x.kMaxLength},x.kStringMaxLength&&(x.constants.MAX_STRING_LENGTH=x.kStringMaxLength)),safer_1=x,safer_1}var reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;const n=inherits_browserExports;function _(E){this._reporterState={obj:null,path:[],options:E||{},errors:[]}}reporter.Reporter=_,_.prototype.isError=function(S){return S instanceof x},_.prototype.save=function(){const S=this._reporterState;return{obj:S.obj,pathLen:S.path.length}},_.prototype.restore=function(S){const C=this._reporterState;C.obj=S.obj,C.path=C.path.slice(0,S.pathLen)},_.prototype.enterKey=function(S){return this._reporterState.path.push(S)},_.prototype.exitKey=function(S){const C=this._reporterState;C.path=C.path.slice(0,S-1)},_.prototype.leaveKey=function(S,C,T){const A=this._reporterState;this.exitKey(S),A.obj!==null&&(A.obj[C]=T)},_.prototype.path=function(){return this._reporterState.path.join("/")},_.prototype.enterObject=function(){const S=this._reporterState,C=S.obj;return S.obj={},C},_.prototype.leaveObject=function(S){const C=this._reporterState,T=C.obj;return C.obj=S,T},_.prototype.error=function(S){let C;const T=this._reporterState,A=S instanceof x;if(A?C=S:C=new x(T.path.map(function(B){return"["+JSON.stringify(B)+"]"}).join(""),S.message||S,S.stack),!T.options.partial)throw C;return A||T.errors.push(C),C},_.prototype.wrapResult=function(S){const C=this._reporterState;return C.options.partial?{result:this.isError(S)?null:S,errors:C.errors}:S};function x(E,S){this.path=E,this.rethrow(S)}return n(x,Error),x.prototype.rethrow=function(S){if(this.message=S+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,x),!this.stack)try{throw new Error(this.message)}catch(C){this.stack=C.stack}return this},reporter}var buffer$1={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer$1;hasRequiredBuffer=1;const n=inherits_browserExports,_=requireReporter().Reporter,x=requireSafer().Buffer;function E(C,T){if(_.call(this,T),!x.isBuffer(C)){this.error("Input not Buffer");return}this.base=C,this.offset=0,this.length=C.length}n(E,_),buffer$1.DecoderBuffer=E,E.isDecoderBuffer=function(T){return T instanceof E?!0:typeof T=="object"&&x.isBuffer(T.base)&&T.constructor.name==="DecoderBuffer"&&typeof T.offset=="number"&&typeof T.length=="number"&&typeof T.save=="function"&&typeof T.restore=="function"&&typeof T.isEmpty=="function"&&typeof T.readUInt8=="function"&&typeof T.skip=="function"&&typeof T.raw=="function"},E.prototype.save=function(){return{offset:this.offset,reporter:_.prototype.save.call(this)}},E.prototype.restore=function(T){const A=new E(this.base);return A.offset=T.offset,A.length=this.offset,this.offset=T.offset,_.prototype.restore.call(this,T.reporter),A},E.prototype.isEmpty=function(){return this.offset===this.length},E.prototype.readUInt8=function(T){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(T||"DecoderBuffer overrun")},E.prototype.skip=function(T,A){if(!(this.offset+T<=this.length))return this.error(A||"DecoderBuffer overrun");const B=new E(this.base);return B._reporterState=this._reporterState,B.offset=this.offset,B.length=this.offset+T,this.offset+=T,B},E.prototype.raw=function(T){return this.base.slice(T?T.offset:this.offset,this.length)};function S(C,T){if(Array.isArray(C))this.length=0,this.value=C.map(function(A){return S.isEncoderBuffer(A)||(A=new S(A,T)),this.length+=A.length,A},this);else if(typeof C=="number"){if(!(0<=C&&C<=255))return T.error("non-byte EncoderBuffer value");this.value=C,this.length=1}else if(typeof C=="string")this.value=C,this.length=x.byteLength(C);else if(x.isBuffer(C))this.value=C,this.length=C.length;else return T.error("Unsupported type: "+typeof C)}return buffer$1.EncoderBuffer=S,S.isEncoderBuffer=function(T){return T instanceof S?!0:typeof T=="object"&&T.constructor.name==="EncoderBuffer"&&typeof T.length=="number"&&typeof T.join=="function"},S.prototype.join=function(T,A){return T||(T=x.alloc(this.length)),A||(A=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(B){B.join(T,A),A+=B.length}):(typeof this.value=="number"?T[A]=this.value:typeof this.value=="string"?T.write(this.value,A):x.isBuffer(this.value)&&this.value.copy(T,A),A+=this.length)),T},buffer$1}var node$1,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node$1;hasRequiredNode=1;const n=requireReporter().Reporter,_=requireBuffer().EncoderBuffer,x=requireBuffer().DecoderBuffer,E=minimalisticAssert$1,S=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],C=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(S),T=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function A(I,M,O){const D={};this._baseState=D,D.name=O,D.enc=I,D.parent=M||null,D.children=null,D.tag=null,D.args=null,D.reverseArgs=null,D.choice=null,D.optional=!1,D.any=!1,D.obj=!1,D.use=null,D.useDecoder=null,D.key=null,D.default=null,D.explicit=null,D.implicit=null,D.contains=null,D.parent||(D.children=[],this._wrap())}node$1=A;const B=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return A.prototype.clone=function(){const M=this._baseState,O={};B.forEach(function(L){O[L]=M[L]});const D=new this.constructor(O.parent);return D._baseState=O,D},A.prototype._wrap=function(){const M=this._baseState;C.forEach(function(O){this[O]=function(){const L=new this.constructor(this);return M.children.push(L),L[O].apply(L,arguments)}},this)},A.prototype._init=function(M){const O=this._baseState;E(O.parent===null),M.call(this),O.children=O.children.filter(function(D){return D._baseState.parent===this},this),E.equal(O.children.length,1,"Root node can have only one child")},A.prototype._useArgs=function(M){const O=this._baseState,D=M.filter(function(L){return L instanceof this.constructor},this);M=M.filter(function(L){return!(L instanceof this.constructor)},this),D.length!==0&&(E(O.children===null),O.children=D,D.forEach(function(L){L._baseState.parent=this},this)),M.length!==0&&(E(O.args===null),O.args=M,O.reverseArgs=M.map(function(L){if(typeof L!="object"||L.constructor!==Object)return L;const V={};return Object.keys(L).forEach(function(U){U==(U|0)&&(U|=0);const q=L[U];V[q]=U}),V}))},T.forEach(function(I){A.prototype[I]=function(){const O=this._baseState;throw new Error(I+" not implemented for encoding: "+O.enc)}}),S.forEach(function(I){A.prototype[I]=function(){const O=this._baseState,D=Array.prototype.slice.call(arguments);return E(O.tag===null),O.tag=I,this._useArgs(D),this}}),A.prototype.use=function(M){E(M);const O=this._baseState;return E(O.use===null),O.use=M,this},A.prototype.optional=function(){const M=this._baseState;return M.optional=!0,this},A.prototype.def=function(M){const O=this._baseState;return E(O.default===null),O.default=M,O.optional=!0,this},A.prototype.explicit=function(M){const O=this._baseState;return E(O.explicit===null&&O.implicit===null),O.explicit=M,this},A.prototype.implicit=function(M){const O=this._baseState;return E(O.explicit===null&&O.implicit===null),O.implicit=M,this},A.prototype.obj=function(){const M=this._baseState,O=Array.prototype.slice.call(arguments);return M.obj=!0,O.length!==0&&this._useArgs(O),this},A.prototype.key=function(M){const O=this._baseState;return E(O.key===null),O.key=M,this},A.prototype.any=function(){const M=this._baseState;return M.any=!0,this},A.prototype.choice=function(M){const O=this._baseState;return E(O.choice===null),O.choice=M,this._useArgs(Object.keys(M).map(function(D){return M[D]})),this},A.prototype.contains=function(M){const O=this._baseState;return E(O.use===null),O.contains=M,this},A.prototype._decode=function(M,O){const D=this._baseState;if(D.parent===null)return M.wrapResult(D.children[0]._decode(M,O));let L=D.default,V=!0,U=null;if(D.key!==null&&(U=M.enterKey(D.key)),D.optional){let H=null;if(D.explicit!==null?H=D.explicit:D.implicit!==null?H=D.implicit:D.tag!==null&&(H=D.tag),H===null&&!D.any){const W=M.save();try{D.choice===null?this._decodeGeneric(D.tag,M,O):this._decodeChoice(M,O),V=!0}catch{V=!1}M.restore(W)}else if(V=this._peekTag(M,H,D.any),M.isError(V))return V}let q;if(D.obj&&V&&(q=M.enterObject()),V){if(D.explicit!==null){const W=this._decodeTag(M,D.explicit);if(M.isError(W))return W;M=W}const H=M.offset;if(D.use===null&&D.choice===null){let W;D.any&&(W=M.save());const Q=this._decodeTag(M,D.implicit!==null?D.implicit:D.tag,D.any);if(M.isError(Q))return Q;D.any?L=M.raw(W):M=Q}if(O&&O.track&&D.tag!==null&&O.track(M.path(),H,M.length,"tagged"),O&&O.track&&D.tag!==null&&O.track(M.path(),M.offset,M.length,"content"),D.any||(D.choice===null?L=this._decodeGeneric(D.tag,M,O):L=this._decodeChoice(M,O)),M.isError(L))return L;if(!D.any&&D.choice===null&&D.children!==null&&D.children.forEach(function(Q){Q._decode(M,O)}),D.contains&&(D.tag==="octstr"||D.tag==="bitstr")){const W=new x(L);L=this._getUse(D.contains,M._reporterState.obj)._decode(W,O)}}return D.obj&&V&&(L=M.leaveObject(q)),D.key!==null&&(L!==null||V===!0)?M.leaveKey(U,D.key,L):U!==null&&M.exitKey(U),L},A.prototype._decodeGeneric=function(M,O,D){const L=this._baseState;return M==="seq"||M==="set"?null:M==="seqof"||M==="setof"?this._decodeList(O,M,L.args[0],D):/str$/.test(M)?this._decodeStr(O,M,D):M==="objid"&&L.args?this._decodeObjid(O,L.args[0],L.args[1],D):M==="objid"?this._decodeObjid(O,null,null,D):M==="gentime"||M==="utctime"?this._decodeTime(O,M,D):M==="null_"?this._decodeNull(O,D):M==="bool"?this._decodeBool(O,D):M==="objDesc"?this._decodeStr(O,M,D):M==="int"||M==="enum"?this._decodeInt(O,L.args&&L.args[0],D):L.use!==null?this._getUse(L.use,O._reporterState.obj)._decode(O,D):O.error("unknown tag: "+M)},A.prototype._getUse=function(M,O){const D=this._baseState;return D.useDecoder=this._use(M,O),E(D.useDecoder._baseState.parent===null),D.useDecoder=D.useDecoder._baseState.children[0],D.implicit!==D.useDecoder._baseState.implicit&&(D.useDecoder=D.useDecoder.clone(),D.useDecoder._baseState.implicit=D.implicit),D.useDecoder},A.prototype._decodeChoice=function(M,O){const D=this._baseState;let L=null,V=!1;return Object.keys(D.choice).some(function(U){const q=M.save(),H=D.choice[U];try{const W=H._decode(M,O);if(M.isError(W))return!1;L={type:U,value:W},V=!0}catch{return M.restore(q),!1}return!0},this),V?L:M.error("Choice not matched")},A.prototype._createEncoderBuffer=function(M){return new _(M,this.reporter)},A.prototype._encode=function(M,O,D){const L=this._baseState;if(L.default!==null&&L.default===M)return;const V=this._encodeValue(M,O,D);if(V!==void 0&&!this._skipDefault(V,O,D))return V},A.prototype._encodeValue=function(M,O,D){const L=this._baseState;if(L.parent===null)return L.children[0]._encode(M,O||new n);let V=null;if(this.reporter=O,L.optional&&M===void 0)if(L.default!==null)M=L.default;else return;let U=null,q=!1;if(L.any)V=this._createEncoderBuffer(M);else if(L.choice)V=this._encodeChoice(M,O);else if(L.contains)U=this._getUse(L.contains,D)._encode(M,O),q=!0;else if(L.children)U=L.children.map(function(H){if(H._baseState.tag==="null_")return H._encode(null,O,M);if(H._baseState.key===null)return O.error("Child should have a key");const W=O.enterKey(H._baseState.key);if(typeof M!="object")return O.error("Child expected, but input is not object");const Q=H._encode(M[H._baseState.key],O,M);return O.leaveKey(W),Q},this).filter(function(H){return H}),U=this._createEncoderBuffer(U);else if(L.tag==="seqof"||L.tag==="setof"){if(!(L.args&&L.args.length===1))return O.error("Too many args for : "+L.tag);if(!Array.isArray(M))return O.error("seqof/setof, but data is not Array");const H=this.clone();H._baseState.implicit=null,U=this._createEncoderBuffer(M.map(function(W){const Q=this._baseState;return this._getUse(Q.args[0],M)._encode(W,O)},H))}else L.use!==null?V=this._getUse(L.use,D)._encode(M,O):(U=this._encodePrimitive(L.tag,M),q=!0);if(!L.any&&L.choice===null){const H=L.implicit!==null?L.implicit:L.tag,W=L.implicit===null?"universal":"context";H===null?L.use===null&&O.error("Tag could be omitted only for .use()"):L.use===null&&(V=this._encodeComposite(H,q,W,U))}return L.explicit!==null&&(V=this._encodeComposite(L.explicit,!1,"context",V)),V},A.prototype._encodeChoice=function(M,O){const D=this._baseState,L=D.choice[M.type];return L||E(!1,M.type+" not found in "+JSON.stringify(Object.keys(D.choice))),L._encode(M.value,O)},A.prototype._encodePrimitive=function(M,O){const D=this._baseState;if(/str$/.test(M))return this._encodeStr(O,M);if(M==="objid"&&D.args)return this._encodeObjid(O,D.reverseArgs[0],D.args[1]);if(M==="objid")return this._encodeObjid(O,null,null);if(M==="gentime"||M==="utctime")return this._encodeTime(O,M);if(M==="null_")return this._encodeNull();if(M==="int"||M==="enum")return this._encodeInt(O,D.args&&D.reverseArgs[0]);if(M==="bool")return this._encodeBool(O);if(M==="objDesc")return this._encodeStr(O,M);throw new Error("Unsupported tag: "+M)},A.prototype._isNumstr=function(M){return/^[0-9 ]*$/.test(M)},A.prototype._isPrintstr=function(M){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(M)},node$1}var der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(n){function _(x){const E={};return Object.keys(x).forEach(function(S){(S|0)==S&&(S=S|0);const C=x[S];E[C]=S}),E}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=_(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=_(n.tag)}(der)),der}var der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;const n=inherits_browserExports,_=requireSafer().Buffer,x=requireNode(),E=requireDer$2();function S(B){this.enc="der",this.name=B.name,this.entity=B,this.tree=new C,this.tree._init(B.body)}der_1$1=S,S.prototype.encode=function(I,M){return this.tree._encode(I,M).join()};function C(B){x.call(this,"der",B)}n(C,x),C.prototype._encodeComposite=function(I,M,O,D){const L=A(I,M,O,this.reporter);if(D.length<128){const q=_.alloc(2);return q[0]=L,q[1]=D.length,this._createEncoderBuffer([q,D])}let V=1;for(let q=D.length;q>=256;q>>=8)V++;const U=_.alloc(1+1+V);U[0]=L,U[1]=128|V;for(let q=1+V,H=D.length;H>0;q--,H>>=8)U[q]=H&255;return this._createEncoderBuffer([U,D])},C.prototype._encodeStr=function(I,M){if(M==="bitstr")return this._createEncoderBuffer([I.unused|0,I.data]);if(M==="bmpstr"){const O=_.alloc(I.length*2);for(let D=0;D<I.length;D++)O.writeUInt16BE(I.charCodeAt(D),D*2);return this._createEncoderBuffer(O)}else return M==="numstr"?this._isNumstr(I)?this._createEncoderBuffer(I):this.reporter.error("Encoding of string type: numstr supports only digits and space"):M==="printstr"?this._isPrintstr(I)?this._createEncoderBuffer(I):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(M)?this._createEncoderBuffer(I):M==="objDesc"?this._createEncoderBuffer(I):this.reporter.error("Encoding of string type: "+M+" unsupported")},C.prototype._encodeObjid=function(I,M,O){if(typeof I=="string"){if(!M)return this.reporter.error("string objid given, but no values map found");if(!M.hasOwnProperty(I))return this.reporter.error("objid not found in values map");I=M[I].split(/[\s.]+/g);for(let U=0;U<I.length;U++)I[U]|=0}else if(Array.isArray(I)){I=I.slice();for(let U=0;U<I.length;U++)I[U]|=0}if(!Array.isArray(I))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(I));if(!O){if(I[1]>=40)return this.reporter.error("Second objid identifier OOB");I.splice(0,2,I[0]*40+I[1])}let D=0;for(let U=0;U<I.length;U++){let q=I[U];for(D++;q>=128;q>>=7)D++}const L=_.alloc(D);let V=L.length-1;for(let U=I.length-1;U>=0;U--){let q=I[U];for(L[V--]=q&127;(q>>=7)>0;)L[V--]=128|q&127}return this._createEncoderBuffer(L)};function T(B){return B<10?"0"+B:B}C.prototype._encodeTime=function(I,M){let O;const D=new Date(I);return M==="gentime"?O=[T(D.getUTCFullYear()),T(D.getUTCMonth()+1),T(D.getUTCDate()),T(D.getUTCHours()),T(D.getUTCMinutes()),T(D.getUTCSeconds()),"Z"].join(""):M==="utctime"?O=[T(D.getUTCFullYear()%100),T(D.getUTCMonth()+1),T(D.getUTCDate()),T(D.getUTCHours()),T(D.getUTCMinutes()),T(D.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+M+" time is not supported yet"),this._encodeStr(O,"octstr")},C.prototype._encodeNull=function(){return this._createEncoderBuffer("")},C.prototype._encodeInt=function(I,M){if(typeof I=="string"){if(!M)return this.reporter.error("String int or enum given, but no values map");if(!M.hasOwnProperty(I))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(I));I=M[I]}if(typeof I!="number"&&!_.isBuffer(I)){const L=I.toArray();!I.sign&&L[0]&128&&L.unshift(0),I=_.from(L)}if(_.isBuffer(I)){let L=I.length;I.length===0&&L++;const V=_.alloc(L);return I.copy(V),I.length===0&&(V[0]=0),this._createEncoderBuffer(V)}if(I<128)return this._createEncoderBuffer(I);if(I<256)return this._createEncoderBuffer([0,I]);let O=1;for(let L=I;L>=256;L>>=8)O++;const D=new Array(O);for(let L=D.length-1;L>=0;L--)D[L]=I&255,I>>=8;return D[0]&128&&D.unshift(0),this._createEncoderBuffer(_.from(D))},C.prototype._encodeBool=function(I){return this._createEncoderBuffer(I?255:0)},C.prototype._use=function(I,M){return typeof I=="function"&&(I=I(M)),I._getEncoder("der").tree},C.prototype._skipDefault=function(I,M,O){const D=this._baseState;let L;if(D.default===null)return!1;const V=I.join();if(D.defaultBuffer===void 0&&(D.defaultBuffer=this._encodeValue(D.default,M,O).join()),V.length!==D.defaultBuffer.length)return!1;for(L=0;L<V.length;L++)if(V[L]!==D.defaultBuffer[L])return!1;return!0};function A(B,I,M,O){let D;if(B==="seqof"?B="seq":B==="setof"&&(B="set"),E.tagByName.hasOwnProperty(B))D=E.tagByName[B];else if(typeof B=="number"&&(B|0)===B)D=B;else return O.error("Unknown tag: "+B);return D>=31?O.error("Multi-octet tag encoding unsupported"):(I||(D|=32),D|=E.tagClassByName[M||"universal"]<<6,D)}return der_1$1}var pem$2,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$2;hasRequiredPem$1=1;const n=inherits_browserExports,_=requireDer$1();function x(E){_.call(this,E),this.enc="pem"}return n(x,_),pem$2=x,x.prototype.encode=function(S,C){const A=_.prototype.encode.call(this,S).toString("base64"),B=["-----BEGIN "+C.label+"-----"];for(let I=0;I<A.length;I+=64)B.push(A.slice(I,I+64));return B.push("-----END "+C.label+"-----"),B.join(`
`)},pem$2}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(n){const _=n;_.der=requireDer$1(),_.pem=requirePem$1()}(encoders)),encoders}var decoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;const n=inherits_browserExports,_=bnExports$2,x=requireBuffer().DecoderBuffer,E=requireNode(),S=requireDer$2();function C(I){this.enc="der",this.name=I.name,this.entity=I,this.tree=new T,this.tree._init(I.body)}der_1=C,C.prototype.decode=function(M,O){return x.isDecoderBuffer(M)||(M=new x(M,O)),this.tree._decode(M,O)};function T(I){E.call(this,"der",I)}n(T,E),T.prototype._peekTag=function(M,O,D){if(M.isEmpty())return!1;const L=M.save(),V=A(M,'Failed to peek tag: "'+O+'"');return M.isError(V)?V:(M.restore(L),V.tag===O||V.tagStr===O||V.tagStr+"of"===O||D)},T.prototype._decodeTag=function(M,O,D){const L=A(M,'Failed to decode tag of "'+O+'"');if(M.isError(L))return L;let V=B(M,L.primitive,'Failed to get length of "'+O+'"');if(M.isError(V))return V;if(!D&&L.tag!==O&&L.tagStr!==O&&L.tagStr+"of"!==O)return M.error('Failed to match tag: "'+O+'"');if(L.primitive||V!==null)return M.skip(V,'Failed to match body of: "'+O+'"');const U=M.save(),q=this._skipUntilEnd(M,'Failed to skip indefinite length body: "'+this.tag+'"');return M.isError(q)?q:(V=M.offset-U.offset,M.restore(U),M.skip(V,'Failed to match body of: "'+O+'"'))},T.prototype._skipUntilEnd=function(M,O){for(;;){const D=A(M,O);if(M.isError(D))return D;const L=B(M,D.primitive,O);if(M.isError(L))return L;let V;if(D.primitive||L!==null?V=M.skip(L):V=this._skipUntilEnd(M,O),M.isError(V))return V;if(D.tagStr==="end")break}},T.prototype._decodeList=function(M,O,D,L){const V=[];for(;!M.isEmpty();){const U=this._peekTag(M,"end");if(M.isError(U))return U;const q=D.decode(M,"der",L);if(M.isError(q)&&U)break;V.push(q)}return V},T.prototype._decodeStr=function(M,O){if(O==="bitstr"){const D=M.readUInt8();return M.isError(D)?D:{unused:D,data:M.raw()}}else if(O==="bmpstr"){const D=M.raw();if(D.length%2===1)return M.error("Decoding of string type: bmpstr length mismatch");let L="";for(let V=0;V<D.length/2;V++)L+=String.fromCharCode(D.readUInt16BE(V*2));return L}else if(O==="numstr"){const D=M.raw().toString("ascii");return this._isNumstr(D)?D:M.error("Decoding of string type: numstr unsupported characters")}else{if(O==="octstr")return M.raw();if(O==="objDesc")return M.raw();if(O==="printstr"){const D=M.raw().toString("ascii");return this._isPrintstr(D)?D:M.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(O)?M.raw().toString():M.error("Decoding of string type: "+O+" unsupported")}},T.prototype._decodeObjid=function(M,O,D){let L;const V=[];let U=0,q=0;for(;!M.isEmpty();)q=M.readUInt8(),U<<=7,U|=q&127,q&128||(V.push(U),U=0);q&128&&V.push(U);const H=V[0]/40|0,W=V[0]%40;if(D?L=V:L=[H,W].concat(V.slice(1)),O){let Q=O[L.join(" ")];Q===void 0&&(Q=O[L.join(".")]),Q!==void 0&&(L=Q)}return L},T.prototype._decodeTime=function(M,O){const D=M.raw().toString();let L,V,U,q,H,W;if(O==="gentime")L=D.slice(0,4)|0,V=D.slice(4,6)|0,U=D.slice(6,8)|0,q=D.slice(8,10)|0,H=D.slice(10,12)|0,W=D.slice(12,14)|0;else if(O==="utctime")L=D.slice(0,2)|0,V=D.slice(2,4)|0,U=D.slice(4,6)|0,q=D.slice(6,8)|0,H=D.slice(8,10)|0,W=D.slice(10,12)|0,L<70?L=2e3+L:L=1900+L;else return M.error("Decoding "+O+" time is not supported yet");return Date.UTC(L,V-1,U,q,H,W,0)},T.prototype._decodeNull=function(){return null},T.prototype._decodeBool=function(M){const O=M.readUInt8();return M.isError(O)?O:O!==0},T.prototype._decodeInt=function(M,O){const D=M.raw();let L=new _(D);return O&&(L=O[L.toString(10)]||L),L},T.prototype._use=function(M,O){return typeof M=="function"&&(M=M(O)),M._getDecoder("der").tree};function A(I,M){let O=I.readUInt8(M);if(I.isError(O))return O;const D=S.tagClass[O>>6],L=(O&32)===0;if((O&31)===31){let U=O;for(O=0;(U&128)===128;){if(U=I.readUInt8(M),I.isError(U))return U;O<<=7,O|=U&127}}else O&=31;const V=S.tag[O];return{cls:D,primitive:L,tag:O,tagStr:V}}function B(I,M,O){let D=I.readUInt8(O);if(I.isError(D))return D;if(!M&&D===128)return null;if(!(D&128))return D;const L=D&127;if(L>4)return I.error("length octect is too long");D=0;for(let V=0;V<L;V++){D<<=8;const U=I.readUInt8(O);if(I.isError(U))return U;D|=U}return D}return der_1}var pem$1,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem$1;hasRequiredPem=1;const n=inherits_browserExports,_=requireSafer().Buffer,x=requireDer();function E(S){x.call(this,S),this.enc="pem"}return n(E,x),pem$1=E,E.prototype.decode=function(C,T){const A=C.toString().split(/[\r\n]+/g),B=T.label.toUpperCase(),I=/^-----(BEGIN|END) ([^-]+)-----$/;let M=-1,O=-1;for(let V=0;V<A.length;V++){const U=A[V].match(I);if(U!==null&&U[2]===B)if(M===-1){if(U[1]!=="BEGIN")break;M=V}else{if(U[1]!=="END")break;O=V;break}}if(M===-1||O===-1)throw new Error("PEM section not found for: "+B);const D=A.slice(M+1,O).join("");D.replace(/[^a-z0-9+/=]+/gi,"");const L=_.from(D,"base64");return x.prototype.decode.call(this,L,T)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(n){const _=n;_.der=requireDer(),_.pem=requirePem()}(decoders)),decoders}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(n){const _=requireEncoders(),x=requireDecoders(),E=inherits_browserExports,S=n;S.define=function(A,B){return new C(A,B)};function C(T,A){this.name=T,this.body=A,this.decoders={},this.encoders={}}C.prototype._createNamed=function(A){const B=this.name;function I(M){this._initNamed(M,B)}return E(I,A),I.prototype._initNamed=function(O,D){A.call(this,O,D)},new I(this)},C.prototype._getDecoder=function(A){return A=A||"der",this.decoders.hasOwnProperty(A)||(this.decoders[A]=this._createNamed(x[A])),this.decoders[A]},C.prototype.decode=function(A,B,I){return this._getDecoder(B).decode(A,I)},C.prototype._getEncoder=function(A){return A=A||"der",this.encoders.hasOwnProperty(A)||(this.encoders[A]=this._createNamed(_[A])),this.encoders[A]},C.prototype.encode=function(A,B,I){return this._getEncoder(B).encode(A,I)}}(api$1)),api$1}var base$2={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(n){const _=n;_.Reporter=requireReporter().Reporter,_.DecoderBuffer=requireBuffer().DecoderBuffer,_.EncoderBuffer=requireBuffer().EncoderBuffer,_.Node=requireNode()}(base$2)),base$2}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(n){const _=n;_._reverse=function(E){const S={};return Object.keys(E).forEach(function(C){(C|0)==C&&(C=C|0);const T=E[C];S[T]=C}),S},_.der=requireDer$2()}(constants)),constants}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(n){const _=n;_.bignum=bnExports$2,_.define=requireApi().define,_.base=requireBase(),_.constants=requireConstants(),_.decoders=requireDecoders(),_.encoders=requireEncoders()}(asn1$2)),asn1$2}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var n=requireAsn1$1(),_=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),x=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),E=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),S=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(E),this.key("subjectPublicKey").bitstr())}),C=n.define("RelativeDistinguishedName",function(){this.setof(x)}),T=n.define("RDNSequence",function(){this.seqof(C)}),A=n.define("Name",function(){this.choice({rdnSequence:this.use(T)})}),B=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(_),this.key("notAfter").use(_))}),I=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),M=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(E),this.key("issuer").use(A),this.key("validity").use(B),this.key("subject").use(A),this.key("subjectPublicKeyInfo").use(S),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(I).optional())}),O=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(M),this.key("signatureAlgorithm").use(E),this.key("signatureValue").bitstr())});return certificate=O,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$3;hasRequiredAsn1=1;var n=requireAsn1$1();asn1$3.certificate=requireCertificate();var _=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=_;var x=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=x;var E=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(S),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=E;var S=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),C=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(S),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=C;var T=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=T;var A=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=A,asn1$3.DSAparam=n.define("DSAparam",function(){this.int()});var B=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(I),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=B;var I=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return asn1$3.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$3}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,x=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,E=requireEvp_bytestokey(),S=requireBrowser$6(),C=safeBufferExports.Buffer;return fixProc=function(T,A){var B=T.toString(),I=B.match(n),M;if(I){var D="aes"+I[1],L=C.from(I[2],"hex"),V=C.from(I[3].replace(/[\r\n]/g,""),"base64"),U=E(A,L.slice(0,8),parseInt(I[1],10)).key,q=[],H=S.createDecipheriv(D,U,L);q.push(H.update(V)),q.push(H.final()),M=C.concat(q)}else{var O=B.match(x);M=C.from(O[2].replace(/[\r\n]/g,""),"base64")}var W=B.match(_)[1];return{tag:W,data:M}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var n=requireAsn1(),_=require$$1,x=requireFixProc(),E=requireBrowser$6(),S=requireBrowser$7(),C=safeBufferExports.Buffer;parseAsn1=T;function T(B){var I;typeof B=="object"&&!C.isBuffer(B)&&(I=B.passphrase,B=B.key),typeof B=="string"&&(B=C.from(B));var M=x(B,I),O=M.tag,D=M.data,L,V;switch(O){case"CERTIFICATE":V=n.certificate.decode(D,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(V||(V=n.PublicKey.decode(D,"der")),L=V.algorithm.algorithm.join("."),L){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(V.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return V.subjectPrivateKey=V.subjectPublicKey,{type:"ec",data:V};case"1.2.840.10040.4.1":return V.algorithm.params.pub_key=n.DSAparam.decode(V.subjectPublicKey.data,"der"),{type:"dsa",data:V.algorithm.params};default:throw new Error("unknown key id "+L)}case"ENCRYPTED PRIVATE KEY":D=n.EncryptedPrivateKey.decode(D,"der"),D=A(D,I);case"PRIVATE KEY":switch(V=n.PrivateKey.decode(D,"der"),L=V.algorithm.algorithm.join("."),L){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(V.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:V.algorithm.curve,privateKey:n.ECPrivateKey.decode(V.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return V.algorithm.params.priv_key=n.DSAparam.decode(V.subjectPrivateKey,"der"),{type:"dsa",params:V.algorithm.params};default:throw new Error("unknown key id "+L)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(D,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(D,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(D,"der")};case"EC PRIVATE KEY":return D=n.ECPrivateKey.decode(D,"der"),{curve:D.parameters.value,privateKey:D.privateKey};default:throw new Error("unknown key type "+O)}}T.signature=n.signature;function A(B,I){var M=B.algorithm.decrypt.kde.kdeparams.salt,O=parseInt(B.algorithm.decrypt.kde.kdeparams.iters.toString(),10),D=_[B.algorithm.decrypt.cipher.algo.join(".")],L=B.algorithm.decrypt.cipher.iv,V=B.subjectPrivateKey,U=parseInt(D.split("-")[1],10)/8,q=S.pbkdf2Sync(I,M,O,U,"sha1"),H=E.createDecipheriv(D,q,L),W=[];return W.push(H.update(V)),W.push(H.final()),C.concat(W)}return parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$2.exports;hasRequiredSign=1;var n=safeBufferExports.Buffer,_=requireBrowser$8(),x=requireBrowserifyRsa(),E=requireElliptic().ec,S=requireBn(),C=requireParseAsn1(),T=require$$4;function A(q,H,W,Q,re){var ce=C(H);if(ce.curve){if(Q!=="ecdsa"&&Q!=="ecdsa/rsa")throw new Error("wrong private key type");return B(q,ce)}else if(ce.type==="dsa"){if(Q!=="dsa")throw new Error("wrong private key type");return I(q,ce,W)}else if(Q!=="rsa"&&Q!=="ecdsa/rsa")throw new Error("wrong private key type");q=n.concat([re,q]);for(var ne=ce.modulus.byteLength(),Y=[0,1];q.length+Y.length+1<ne;)Y.push(255);Y.push(0);for(var fe=-1;++fe<q.length;)Y.push(q[fe]);var ge=x(Y,ce);return ge}function B(q,H){var W=T[H.curve.join(".")];if(!W)throw new Error("unknown curve "+H.curve.join("."));var Q=new E(W),re=Q.keyFromPrivate(H.privateKey),ce=re.sign(q);return n.from(ce.toDER())}function I(q,H,W){for(var Q=H.params.priv_key,re=H.params.p,ce=H.params.q,ne=H.params.g,Y=new S(0),fe,ge=D(q,ce).mod(ce),$e=!1,_e=O(Q,ce,q,W);$e===!1;)fe=V(ce,_e,W),Y=U(ne,fe,re,ce),$e=fe.invm(ce).imul(ge.add(Q.mul(Y))).mod(ce),$e.cmpn(0)===0&&($e=!1,Y=new S(0));return M(Y,$e)}function M(q,H){q=q.toArray(),H=H.toArray(),q[0]&128&&(q=[0].concat(q)),H[0]&128&&(H=[0].concat(H));var W=q.length+H.length+4,Q=[48,W,2,q.length];return Q=Q.concat(q,[2,H.length],H),n.from(Q)}function O(q,H,W,Q){if(q=n.from(q.toArray()),q.length<H.byteLength()){var re=n.alloc(H.byteLength()-q.length);q=n.concat([re,q])}var ce=W.length,ne=L(W,H),Y=n.alloc(ce);Y.fill(1);var fe=n.alloc(ce);return fe=_(Q,fe).update(Y).update(n.from([0])).update(q).update(ne).digest(),Y=_(Q,fe).update(Y).digest(),fe=_(Q,fe).update(Y).update(n.from([1])).update(q).update(ne).digest(),Y=_(Q,fe).update(Y).digest(),{k:fe,v:Y}}function D(q,H){var W=new S(q),Q=(q.length<<3)-H.bitLength();return Q>0&&W.ishrn(Q),W}function L(q,H){q=D(q,H),q=q.mod(H);var W=n.from(q.toArray());if(W.length<H.byteLength()){var Q=n.alloc(H.byteLength()-W.length);W=n.concat([Q,W])}return W}function V(q,H,W){var Q,re;do{for(Q=n.alloc(0);Q.length*8<q.bitLength();)H.v=_(W,H.k).update(H.v).digest(),Q=n.concat([Q,H.v]);re=D(Q,q),H.k=_(W,H.k).update(H.v).update(n.from([0])).digest(),H.v=_(W,H.k).update(H.v).digest()}while(re.cmp(q)!==-1);return re}function U(q,H,W,Q){return q.toRed(S.mont(W)).redPow(H).fromRed().mod(Q)}return sign$2.exports=A,sign$2.exports.getKey=O,sign$2.exports.makeKey=V,sign$2.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var n=safeBufferExports.Buffer,_=requireBn(),x=requireElliptic().ec,E=requireParseAsn1(),S=require$$4;function C(I,M,O,D,L){var V=E(O);if(V.type==="ec"){if(D!=="ecdsa"&&D!=="ecdsa/rsa")throw new Error("wrong public key type");return T(I,M,V)}else if(V.type==="dsa"){if(D!=="dsa")throw new Error("wrong public key type");return A(I,M,V)}else if(D!=="rsa"&&D!=="ecdsa/rsa")throw new Error("wrong public key type");M=n.concat([L,M]);for(var U=V.modulus.byteLength(),q=[1],H=0;M.length+q.length+2<U;)q.push(255),H++;q.push(0);for(var W=-1;++W<M.length;)q.push(M[W]);q=n.from(q);var Q=_.mont(V.modulus);I=new _(I).toRed(Q),I=I.redPow(new _(V.publicExponent)),I=n.from(I.fromRed().toArray());var re=H<8?1:0;for(U=Math.min(I.length,q.length),I.length!==q.length&&(re=1),W=-1;++W<U;)re|=I[W]^q[W];return re===0}function T(I,M,O){var D=S[O.data.algorithm.curve.join(".")];if(!D)throw new Error("unknown curve "+O.data.algorithm.curve.join("."));var L=new x(D),V=O.data.subjectPrivateKey.data;return L.verify(M,I,V)}function A(I,M,O){var D=O.data.p,L=O.data.q,V=O.data.g,U=O.data.pub_key,q=E.signature.decode(I,"der"),H=q.s,W=q.r;B(H,L),B(W,L);var Q=_.mont(D),re=H.invm(L),ce=V.toRed(Q).redPow(new _(M).mul(re).mod(L)).fromRed().mul(U.toRed(Q).redPow(W.mul(re).mod(L)).fromRed()).mod(D).mod(L);return ce.cmp(W)===0}function B(I,M){if(I.cmpn(0)<=0)throw new Error("invalid sig");if(I.cmp(M)>=M)throw new Error("invalid sig")}return verify_1=C,verify_1}var browser$6,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$6;hasRequiredBrowser$3=1;var n=safeBufferExports.Buffer,_=requireBrowser$9(),x=requireReadableBrowser(),E=inherits_browserExports,S=requireSign(),C=requireVerify(),T=require$$6;Object.keys(T).forEach(function(O){T[O].id=n.from(T[O].id,"hex"),T[O.toLowerCase()]=T[O]});function A(O){x.Writable.call(this);var D=T[O];if(!D)throw new Error("Unknown message digest");this._hashType=D.hash,this._hash=_(D.hash),this._tag=D.id,this._signType=D.sign}E(A,x.Writable),A.prototype._write=function(D,L,V){this._hash.update(D),V()},A.prototype.update=function(D,L){return typeof D=="string"&&(D=n.from(D,L)),this._hash.update(D),this},A.prototype.sign=function(D,L){this.end();var V=this._hash.digest(),U=S(V,D,this._hashType,this._signType,this._tag);return L?U.toString(L):U};function B(O){x.Writable.call(this);var D=T[O];if(!D)throw new Error("Unknown message digest");this._hash=_(D.hash),this._tag=D.id,this._signType=D.sign}E(B,x.Writable),B.prototype._write=function(D,L,V){this._hash.update(D),V()},B.prototype.update=function(D,L){return typeof D=="string"&&(D=n.from(D,L)),this._hash.update(D),this},B.prototype.verify=function(D,L,V){typeof L=="string"&&(L=n.from(L,V)),this.end();var U=this._hash.digest();return C(L,U,D,this._signType,this._tag)};function I(O){return new A(O)}function M(O){return new B(O)}return browser$6={Sign:I,Verify:M,createSign:I,createVerify:M},browser$6}var browser$5,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$5;hasRequiredBrowser$2=1;var n=requireElliptic(),_=bnExports$2;browser$5=function(T){return new E(T)};var x={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};x.p224=x.secp224r1,x.p256=x.secp256r1=x.prime256v1,x.p192=x.secp192r1=x.prime192v1,x.p384=x.secp384r1,x.p521=x.secp521r1;function E(C){this.curveType=x[C],this.curveType||(this.curveType={name:C}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}E.prototype.generateKeys=function(C,T){return this.keys=this.curve.genKeyPair(),this.getPublicKey(C,T)},E.prototype.computeSecret=function(C,T,A){T=T||"utf8",Buffer$5.isBuffer(C)||(C=new Buffer$5(C,T));var B=this.curve.keyFromPublic(C).getPublic(),I=B.mul(this.keys.getPrivate()).getX();return S(I,A,this.curveType.byteLength)},E.prototype.getPublicKey=function(C,T){var A=this.keys.getPublic(T==="compressed",!0);return T==="hybrid"&&(A[A.length-1]%2?A[0]=7:A[0]=6),S(A,C)},E.prototype.getPrivateKey=function(C){return S(this.keys.getPrivate(),C)},E.prototype.setPublicKey=function(C,T){return T=T||"utf8",Buffer$5.isBuffer(C)||(C=new Buffer$5(C,T)),this.keys._importPublic(C),this},E.prototype.setPrivateKey=function(C,T){T=T||"utf8",Buffer$5.isBuffer(C)||(C=new Buffer$5(C,T));var A=new _(C);return A=A.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(A),this};function S(C,T,A){Array.isArray(C)||(C=C.toArray());var B=new Buffer$5(C);if(A&&B.length<A){var I=new Buffer$5(A-B.length);I.fill(0),B=Buffer$5.concat([I,B])}return T?B.toString(T):B}return browser$5}var browser$4={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var n=requireBrowser$9(),_=safeBufferExports.Buffer;mgf=function(E,S){for(var C=_.alloc(0),T=0,A;C.length<S;)A=x(T++),C=_.concat([C,n("sha1").update(E).update(A).digest()]);return C.slice(0,S)};function x(E){var S=_.allocUnsafe(4);return S.writeUInt32BE(E,0),S}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(_,x){for(var E=_.length,S=-1;++S<E;)_[S]^=x[S];return _}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var n=bnExports$2,_=safeBufferExports.Buffer;function x(E,S){return _.from(E.toRed(n.mont(S.modulus)).redPow(new n(S.publicExponent)).fromRed().toArray())}return withPublic_1=x,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var n=requireParseAsn1(),_=requireBrowser$b(),x=requireBrowser$9(),E=requireMgf(),S=requireXor(),C=bnExports$2,T=requireWithPublic(),A=requireBrowserifyRsa(),B=safeBufferExports.Buffer;publicEncrypt=function(L,V,U){var q;L.padding?q=L.padding:U?q=1:q=4;var H=n(L),W;if(q===4)W=I(H,V);else if(q===1)W=M(H,V,U);else if(q===3){if(W=new C(V),W.cmp(H.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return U?A(W,H):T(W,H)};function I(D,L){var V=D.modulus.byteLength(),U=L.length,q=x("sha1").update(B.alloc(0)).digest(),H=q.length,W=2*H;if(U>V-W-2)throw new Error("message too long");var Q=B.alloc(V-U-W-2),re=V-H-1,ce=_(H),ne=S(B.concat([q,Q,B.alloc(1,1),L],re),E(ce,re)),Y=S(ce,E(ne,H));return new C(B.concat([B.alloc(1),Y,ne],V))}function M(D,L,V){var U=L.length,q=D.modulus.byteLength();if(U>q-11)throw new Error("message too long");var H;return V?H=B.alloc(q-U-3,255):H=O(q-U-3),new C(B.concat([B.from([0,V?1:2]),H,B.alloc(1),L],q))}function O(D){for(var L=B.allocUnsafe(D),V=0,U=_(D*2),q=0,H;V<D;)q===U.length&&(U=_(D*2),q=0),H=U[q++],H&&(L[V++]=H);return L}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var n=requireParseAsn1(),_=requireMgf(),x=requireXor(),E=bnExports$2,S=requireBrowserifyRsa(),C=requireBrowser$9(),T=requireWithPublic(),A=safeBufferExports.Buffer;privateDecrypt=function(D,L,V){var U;D.padding?U=D.padding:V?U=1:U=4;var q=n(D),H=q.modulus.byteLength();if(L.length>H||new E(L).cmp(q.modulus)>=0)throw new Error("decryption error");var W;V?W=T(new E(L),q):W=S(L,q);var Q=A.alloc(H-W.length);if(W=A.concat([Q,W],H),U===4)return B(q,W);if(U===1)return I(q,W,V);if(U===3)return W;throw new Error("unknown padding")};function B(O,D){var L=O.modulus.byteLength(),V=C("sha1").update(A.alloc(0)).digest(),U=V.length;if(D[0]!==0)throw new Error("decryption error");var q=D.slice(1,U+1),H=D.slice(U+1),W=x(q,_(H,U)),Q=x(H,_(W,L-U-1));if(M(V,Q.slice(0,U)))throw new Error("decryption error");for(var re=U;Q[re]===0;)re++;if(Q[re++]!==1)throw new Error("decryption error");return Q.slice(re)}function I(O,D,L){for(var V=D.slice(0,2),U=2,q=0;D[U++]!==0;)if(U>=D.length){q++;break}var H=D.slice(2,U-1);if((V.toString("hex")!=="0002"&&!L||V.toString("hex")!=="0001"&&L)&&q++,H.length<8&&q++,q)throw new Error("decryption error");return D.slice(U)}function M(O,D){O=A.from(O),D=A.from(D);var L=0,V=O.length;O.length!==D.length&&(L++,V=Math.min(O.length,D.length));for(var U=-1;++U<V;)L+=O[U]^D[U];return L}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(n){n.publicEncrypt=requirePublicEncrypt(),n.privateDecrypt=requirePrivateDecrypt(),n.privateEncrypt=function(x,E){return n.publicEncrypt(x,E,!0)},n.publicDecrypt=function(x,E){return n.privateDecrypt(x,E,!0)}}(browser$4)),browser$4}var browser$3={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$3;hasRequiredBrowser=1;function n(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var _=safeBufferExports,x=requireBrowser$b(),E=_.Buffer,S=_.kMaxLength,C=commonjsGlobal.crypto||commonjsGlobal.msCrypto,T=Math.pow(2,32)-1;function A(D,L){if(typeof D!="number"||D!==D)throw new TypeError("offset must be a number");if(D>T||D<0)throw new TypeError("offset must be a uint32");if(D>S||D>L)throw new RangeError("offset out of range")}function B(D,L,V){if(typeof D!="number"||D!==D)throw new TypeError("size must be a number");if(D>T||D<0)throw new TypeError("size must be a uint32");if(D+L>V||D>S)throw new RangeError("buffer too small")}C&&C.getRandomValues||!browser$1$1.browser?(browser$3.randomFill=I,browser$3.randomFillSync=O):(browser$3.randomFill=n,browser$3.randomFillSync=n);function I(D,L,V,U){if(!E.isBuffer(D)&&!(D instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof L=="function")U=L,L=0,V=D.length;else if(typeof V=="function")U=V,V=D.length-L;else if(typeof U!="function")throw new TypeError('"cb" argument must be a function');return A(L,D.length),B(V,L,D.length),M(D,L,V,U)}function M(D,L,V,U){if(browser$1$1.browser){var q=D.buffer,H=new Uint8Array(q,L,V);if(C.getRandomValues(H),U){browser$1$1.nextTick(function(){U(null,D)});return}return D}if(U){x(V,function(Q,re){if(Q)return U(Q);re.copy(D,L),U(null,D)});return}var W=x(V);return W.copy(D,L),D}function O(D,L,V){if(typeof L>"u"&&(L=0),!E.isBuffer(D)&&!(D instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return A(L,D.length),V===void 0&&(V=D.length-L),B(V,L,D.length),M(D,L,V)}return browser$3}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var n=requireAlgos(),_=Object.keys(n),x=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(_);cryptoBrowserify.getHashes=function(){return x};var E=requireBrowser$7();cryptoBrowserify.pbkdf2=E.pbkdf2,cryptoBrowserify.pbkdf2Sync=E.pbkdf2Sync;var S=requireBrowser$5();cryptoBrowserify.Cipher=S.Cipher,cryptoBrowserify.createCipher=S.createCipher,cryptoBrowserify.Cipheriv=S.Cipheriv,cryptoBrowserify.createCipheriv=S.createCipheriv,cryptoBrowserify.Decipher=S.Decipher,cryptoBrowserify.createDecipher=S.createDecipher,cryptoBrowserify.Decipheriv=S.Decipheriv,cryptoBrowserify.createDecipheriv=S.createDecipheriv,cryptoBrowserify.getCiphers=S.getCiphers,cryptoBrowserify.listCiphers=S.listCiphers;var C=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=C.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=C.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=C.getDiffieHellman,cryptoBrowserify.createDiffieHellman=C.createDiffieHellman,cryptoBrowserify.DiffieHellman=C.DiffieHellman;var T=requireBrowser$3();cryptoBrowserify.createSign=T.createSign,cryptoBrowserify.Sign=T.Sign,cryptoBrowserify.createVerify=T.createVerify,cryptoBrowserify.Verify=T.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var A=requireBrowser$1();cryptoBrowserify.publicEncrypt=A.publicEncrypt,cryptoBrowserify.privateEncrypt=A.privateEncrypt,cryptoBrowserify.publicDecrypt=A.publicDecrypt,cryptoBrowserify.privateDecrypt=A.privateDecrypt;var B=requireBrowser();return cryptoBrowserify.randomFill=B.randomFill,cryptoBrowserify.randomFillSync=B.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$4;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$4=requireCryptoBrowserify());var pbkdf2$2=forge$c.pbkdf2=pkcs5.pbkdf2=function(n,_,x,E,S,C){if(typeof S=="function"&&(C=S,S=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$4.pbkdf2&&(S===null||typeof S!="object")&&(crypto$4.pbkdf2Sync.length>4||!S||S==="sha1"))return typeof S!="string"&&(S="sha1"),n=Buffer$5.from(n,"binary"),_=Buffer$5.from(_,"binary"),C?crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2(n,_,x,E,function(Q,re){if(Q)return C(Q);C(null,re.toString("binary"))}):crypto$4.pbkdf2(n,_,x,E,S,function(Q,re){if(Q)return C(Q);C(null,re.toString("binary"))}):crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2Sync(n,_,x,E).toString("binary"):crypto$4.pbkdf2Sync(n,_,x,E,S).toString("binary");if((typeof S>"u"||S===null)&&(S="sha1"),typeof S=="string"){if(!(S in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+S);S=forge$c.md[S].create()}var T=S.digestLength;if(E>4294967295*T){var A=new Error("Derived key is too long.");if(C)return C(A);throw A}var B=Math.ceil(E/T),I=E-(B-1)*T,M=forge$c.hmac.create();M.start(S,n);var O="",D,L,V;if(!C){for(var U=1;U<=B;++U){M.start(null,null),M.update(_),M.update(forge$c.util.int32ToBytes(U)),D=V=M.digest().getBytes();for(var q=2;q<=x;++q)M.start(null,null),M.update(V),L=M.digest().getBytes(),D=forge$c.util.xorBytes(D,L,T),V=L;O+=U<B?D:D.substr(0,I)}return O}var U=1,q;function H(){if(U>B)return C(null,O);M.start(null,null),M.update(_),M.update(forge$c.util.int32ToBytes(U)),D=V=M.digest().getBytes(),q=2,W()}function W(){if(q<=x)return M.start(null,null),M.update(V),L=M.digest().getBytes(),D=forge$c.util.xorBytes(D,L,T),V=L,++q,forge$c.util.setImmediate(W);O+=U<B?D:D.substr(0,I),++U,H()}H()};const forgePbkdf2=getDefaultExportFromCjs(pbkdf2$2);var forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(n,_){_=_||{};var x="-----BEGIN "+n.type+`-----\r
`,E;if(n.procType&&(E={name:"Proc-Type",values:[String(n.procType.version),n.procType.type]},x+=foldHeader(E)),n.contentDomain&&(E={name:"Content-Domain",values:[n.contentDomain]},x+=foldHeader(E)),n.dekInfo&&(E={name:"DEK-Info",values:[n.dekInfo.algorithm]},n.dekInfo.parameters&&E.values.push(n.dekInfo.parameters),x+=foldHeader(E)),n.headers)for(var S=0;S<n.headers.length;++S)x+=foldHeader(n.headers[S]);return n.procType&&(x+=`\r
`),x+=forge$b.util.encode64(n.body,_.maxline||64)+`\r
`,x+="-----END "+n.type+`-----\r
`,x};pem.decode=function(n){for(var _=[],x=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,E=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,S=/\r?\n/,C;C=x.exec(n),!!C;){var T=C[1];T==="NEW CERTIFICATE REQUEST"&&(T="CERTIFICATE REQUEST");var A={type:T,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(C[3])};if(_.push(A),!!C[2]){for(var B=C[2].split(S),I=0;C&&I<B.length;){for(var M=B[I].replace(/\s+$/,""),O=I+1;O<B.length;++O){var D=B[O];if(!/\s/.test(D[0]))break;M+=D,I=O}if(C=M.match(E),C){for(var L={name:C[1],values:[]},V=C[2].split(","),U=0;U<V.length;++U)L.values.push(ltrim(V[U]));if(A.procType)if(!A.contentDomain&&L.name==="Content-Domain")A.contentDomain=V[0]||"";else if(!A.dekInfo&&L.name==="DEK-Info"){if(L.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');A.dekInfo={algorithm:V[0],parameters:V[1]||null}}else A.headers.push(L);else{if(L.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(L.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');A.procType={version:V[0],type:V[1]}}}++I}if(A.procType==="ENCRYPTED"&&!A.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(_.length===0)throw new Error("Invalid PEM formatted message.");return _};function foldHeader(n){for(var _=n.name+": ",x=[],E=function(B,I){return" "+I},S=0;S<n.values.length;++S)x.push(n.values[S].replace(/^(\S+\r\n)/,E));_+=x.join(",")+`\r
`;for(var C=0,T=-1,S=0;S<_.length;++S,++C)if(C>65&&T!==-1){var A=_[T];A===","?(++T,_=_.substr(0,T)+`\r
 `+_.substr(T)):_=_.substr(0,T)+`\r
`+A+_.substr(T+1),C=S-T-1,T=-1,++S}else(_[S]===" "||_[S]==="	"||_[S]===",")&&(T=S);return _}function ltrim(n){return n.replace(/^\s+/,"")}var forge$a=forge$m,sha256$7=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256$7;sha256$7.create=function(){_initialized$2||_init$2();var n=null,_=forge$a.util.createBuffer(),x=new Array(64),E={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return E.start=function(){E.messageLength=0,E.fullMessageLength=E.messageLength64=[];for(var S=E.messageLengthSize/4,C=0;C<S;++C)E.fullMessageLength.push(0);return _=forge$a.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},E},E.start(),E.update=function(S,C){C==="utf8"&&(S=forge$a.util.encodeUtf8(S));var T=S.length;E.messageLength+=T,T=[T/4294967296>>>0,T>>>0];for(var A=E.fullMessageLength.length-1;A>=0;--A)E.fullMessageLength[A]+=T[1],T[1]=T[0]+(E.fullMessageLength[A]/4294967296>>>0),E.fullMessageLength[A]=E.fullMessageLength[A]>>>0,T[0]=T[1]/4294967296>>>0;return _.putBytes(S),_update$2(n,x,_),(_.read>2048||_.length()===0)&&_.compact(),E},E.digest=function(){var S=forge$a.util.createBuffer();S.putBytes(_.bytes());var C=E.fullMessageLength[E.fullMessageLength.length-1]+E.messageLengthSize,T=C&E.blockLength-1;S.putBytes(_padding$2.substr(0,E.blockLength-T));for(var A,B,I=E.fullMessageLength[0]*8,M=0;M<E.fullMessageLength.length-1;++M)A=E.fullMessageLength[M+1]*8,B=A/4294967296>>>0,I+=B,S.putInt32(I>>>0),I=A>>>0;S.putInt32(I);var O={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};_update$2(O,x,S);var D=forge$a.util.createBuffer();return D.putInt32(O.h0),D.putInt32(O.h1),D.putInt32(O.h2),D.putInt32(O.h3),D.putInt32(O.h4),D.putInt32(O.h5),D.putInt32(O.h6),D.putInt32(O.h7),D},E};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(n,_,x){for(var E,S,C,T,A,B,I,M,O,D,L,V,U,q,H,W=x.length();W>=64;){for(I=0;I<16;++I)_[I]=x.getInt32();for(;I<64;++I)E=_[I-2],E=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10,S=_[I-15],S=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3,_[I]=E+_[I-7]+S+_[I-16]|0;for(M=n.h0,O=n.h1,D=n.h2,L=n.h3,V=n.h4,U=n.h5,q=n.h6,H=n.h7,I=0;I<64;++I)T=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),A=q^V&(U^q),C=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),B=M&O|D&(M^O),E=H+T+A+_k$1[I]+_[I],S=C+B,H=q,q=U,U=V,V=L+E>>>0,L=D,D=O,O=M,M=E+S>>>0;n.h0=n.h0+M|0,n.h1=n.h1+O|0,n.h2=n.h2+D|0,n.h3=n.h3+L|0,n.h4=n.h4+V|0,n.h5=n.h5+U|0,n.h6=n.h6+q|0,n.h7=n.h7+H|0,W-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!browser$1$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$9.prng=forge$9.prng||{};prng.create=function(n){for(var _={plugin:n,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},x=n.md,E=new Array(32),S=0;S<32;++S)E[S]=x.create();_.pools=E,_.pool=0,_.generate=function(I,M){if(!M)return _.generateSync(I);var O=_.plugin.cipher,D=_.plugin.increment,L=_.plugin.formatKey,V=_.plugin.formatSeed,U=forge$9.util.createBuffer();_.key=null,q();function q(H){if(H)return M(H);if(U.length()>=I)return M(null,U.getBytes(I));if(_.generated>1048575&&(_.key=null),_.key===null)return forge$9.util.nextTick(function(){C(q)});var W=O(_.key,_.seed);_.generated+=W.length,U.putBytes(W),_.key=L(O(_.key,D(_.seed))),_.seed=V(O(_.key,_.seed)),forge$9.util.setImmediate(q)}},_.generateSync=function(I){var M=_.plugin.cipher,O=_.plugin.increment,D=_.plugin.formatKey,L=_.plugin.formatSeed;_.key=null;for(var V=forge$9.util.createBuffer();V.length()<I;){_.generated>1048575&&(_.key=null),_.key===null&&T();var U=M(_.key,_.seed);_.generated+=U.length,V.putBytes(U),_.key=D(M(_.key,O(_.seed))),_.seed=L(M(_.key,_.seed))}return V.getBytes(I)};function C(I){if(_.pools[0].messageLength>=32)return A(),I();var M=32-_.pools[0].messageLength<<5;_.seedFile(M,function(O,D){if(O)return I(O);_.collect(D),A(),I()})}function T(){if(_.pools[0].messageLength>=32)return A();var I=32-_.pools[0].messageLength<<5;_.collect(_.seedFileSync(I)),A()}function A(){_.reseeds=_.reseeds===4294967295?0:_.reseeds+1;var I=_.plugin.md.create();I.update(_.keyBytes);for(var M=1,O=0;O<32;++O)_.reseeds%M===0&&(I.update(_.pools[O].digest().getBytes()),_.pools[O].start()),M=M<<1;_.keyBytes=I.digest().getBytes(),I.start(),I.update(_.keyBytes);var D=I.digest().getBytes();_.key=_.plugin.formatKey(_.keyBytes),_.seed=_.plugin.formatSeed(D),_.generated=0}function B(I){var M=null,O=forge$9.util.globalScope,D=O.crypto||O.msCrypto;D&&D.getRandomValues&&(M=function(ce){return D.getRandomValues(ce)});var L=forge$9.util.createBuffer();if(M)for(;L.length()<I;){var V=Math.max(1,Math.min(I-L.length(),65536)/4),U=new Uint32Array(Math.floor(V));try{M(U);for(var q=0;q<U.length;++q)L.putInt32(U[q])}catch(ce){if(!(typeof QuotaExceededError<"u"&&ce instanceof QuotaExceededError))throw ce}}if(L.length()<I)for(var H,W,Q,re=Math.floor(Math.random()*65536);L.length()<I;){W=16807*(re&65535),H=16807*(re>>16),W+=(H&32767)<<16,W+=H>>15,W=(W&2147483647)+(W>>31),re=W&4294967295;for(var q=0;q<3;++q)Q=re>>>(q<<3),Q^=Math.floor(Math.random()*256),L.putByte(Q&255)}return L.getBytes(I)}return _crypto$1?(_.seedFile=function(I,M){_crypto$1.randomBytes(I,function(O,D){if(O)return M(O);M(null,D.toString())})},_.seedFileSync=function(I){return _crypto$1.randomBytes(I).toString()}):(_.seedFile=function(I,M){try{M(null,B(I))}catch(O){M(O)}},_.seedFileSync=B),_.collect=function(I){for(var M=I.length,O=0;O<M;++O)_.pools[_.pool].update(I.substr(O,1)),_.pool=_.pool===31?0:_.pool+1},_.collectInt=function(I,M){for(var O="",D=0;D<M;D+=8)O+=String.fromCharCode(I>>D&255);_.collect(O)},_.registerWorker=function(I){if(I===self)_.seedFile=function(O,D){function L(V){var U=V.data;U.forge&&U.forge.prng&&(self.removeEventListener("message",L),D(U.forge.prng.err,U.forge.prng.bytes))}self.addEventListener("message",L),self.postMessage({forge:{prng:{needed:O}}})};else{var M=function(O){var D=O.data;D.forge&&D.forge.prng&&_.seedFile(D.forge.prng.needed,function(L,V){I.postMessage({forge:{prng:{err:L,bytes:V}}})})};I.addEventListener("message",M)}},_};var forge$8=forge$m;(function(){if(forge$8.random&&forge$8.random.getBytes){forge$8.random;return}(function(n){var _={},x=new Array(4),E=forge$8.util.createBuffer();_.formatKey=function(O){var D=forge$8.util.createBuffer(O);return O=new Array(4),O[0]=D.getInt32(),O[1]=D.getInt32(),O[2]=D.getInt32(),O[3]=D.getInt32(),forge$8.aes._expandKey(O,!1)},_.formatSeed=function(O){var D=forge$8.util.createBuffer(O);return O=new Array(4),O[0]=D.getInt32(),O[1]=D.getInt32(),O[2]=D.getInt32(),O[3]=D.getInt32(),O},_.cipher=function(O,D){return forge$8.aes._updateBlock(O,D,x,!1),E.putInt32(x[0]),E.putInt32(x[1]),E.putInt32(x[2]),E.putInt32(x[3]),E.getBytes()},_.increment=function(O){return++O[3],O},_.md=forge$8.md.sha256;function S(){var O=forge$8.prng.create(_);return O.getBytes=function(D,L){return O.generate(D,L)},O.getBytesSync=function(D){return O.generate(D)},O}var C=S(),T=null,A=forge$8.util.globalScope,B=A.crypto||A.msCrypto;if(B&&B.getRandomValues&&(T=function(O){return B.getRandomValues(O)}),forge$8.options.usePureJavaScript||!forge$8.util.isNodejs&&!T){if(C.collectInt(+new Date,32),typeof navigator<"u"){var I="";for(var M in navigator)try{typeof navigator[M]=="string"&&(I+=navigator[M])}catch{}C.collect(I),I=null}n&&(n().mousemove(function(O){C.collectInt(O.clientX,16),C.collectInt(O.clientY,16)}),n().keypress(function(O){C.collectInt(O.charCode,8)}))}if(!forge$8.random)forge$8.random=C;else for(var M in C)forge$8.random[M]=C[M];forge$8.random.createInstance=S,forge$8.random})(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s$1=[1,2,3,5],rol=function(n,_){return n<<_&65535|(n&65535)>>16-_},ror=function(n,_){return(n&65535)>>_|n<<16-_&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(n,_){typeof n=="string"&&(n=forge$7.util.createBuffer(n)),_=_||128;var x=n,E=n.length(),S=_,C=Math.ceil(S/8),T=255>>(S&7),A;for(A=E;A<128;A++)x.putByte(piTable[x.at(A-1)+x.at(A-E)&255]);for(x.setAt(128-C,piTable[x.at(128-C)&T]),A=127-C;A>=0;A--)x.setAt(A,piTable[x.at(A+1)^x.at(A+C)]);return x};var createCipher=function(n,_,x){var E=!1,S=null,C=null,T=null,A,B,I,M,O=[];for(n=forge$7.rc2.expandKey(n,_),I=0;I<64;I++)O.push(n.getInt16Le());x?(A=function(V){for(I=0;I<4;I++)V[I]+=O[M]+(V[(I+3)%4]&V[(I+2)%4])+(~V[(I+3)%4]&V[(I+1)%4]),V[I]=rol(V[I],s$1[I]),M++},B=function(V){for(I=0;I<4;I++)V[I]+=O[V[(I+3)%4]&63]}):(A=function(V){for(I=3;I>=0;I--)V[I]=ror(V[I],s$1[I]),V[I]-=O[M]+(V[(I+3)%4]&V[(I+2)%4])+(~V[(I+3)%4]&V[(I+1)%4]),M--},B=function(V){for(I=3;I>=0;I--)V[I]-=O[V[(I+3)%4]&63]});var D=function(V){var U=[];for(I=0;I<4;I++){var q=S.getInt16Le();T!==null&&(x?q^=T.getInt16Le():T.putInt16Le(q)),U.push(q&65535)}M=x?0:63;for(var H=0;H<V.length;H++)for(var W=0;W<V[H][0];W++)V[H][1](U);for(I=0;I<4;I++)T!==null&&(x?T.putInt16Le(U[I]):U[I]^=T.getInt16Le()),C.putInt16Le(U[I])},L=null;return L={start:function(V,U){V&&typeof V=="string"&&(V=forge$7.util.createBuffer(V)),E=!1,S=forge$7.util.createBuffer(),C=U||new forge$7.util.createBuffer,T=V,L.output=C},update:function(V){for(E||S.putBuffer(V);S.length()>=8;)D([[5,A],[1,B],[6,A],[1,B],[5,A]])},finish:function(V){var U=!0;if(x)if(V)U=V(8,S,!x);else{var q=S.length()===8?8:8-S.length();S.fillWithByte(q,q)}if(U&&(E=!0,L.update()),!x&&(U=S.length()===0,U))if(V)U=V(8,C,!x);else{var H=C.length(),W=C.at(H-1);W>H?U=!1:C.truncate(W)}return U}},L};forge$7.rc2.startEncrypting=function(n,_,x){var E=forge$7.rc2.createEncryptionCipher(n,128);return E.start(_,x),E};forge$7.rc2.createEncryptionCipher=function(n,_){return createCipher(n,_,!0)};forge$7.rc2.startDecrypting=function(n,_,x){var E=forge$7.rc2.createDecryptionCipher(n,128);return E.start(_,x),E};forge$7.rc2.createDecryptionCipher=function(n,_){return createCipher(n,_,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(n,_,x){this.data=[],n!=null&&(typeof n=="number"?this.fromNumber(n,_,x):_==null&&typeof n!="string"?this.fromString(n,256):this.fromString(n,_))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(n,_,x,E,S,C){for(;--C>=0;){var T=_*this.data[n++]+x.data[E]+S;S=Math.floor(T/67108864),x.data[E++]=T&67108863}return S}function am2(n,_,x,E,S,C){for(var T=_&32767,A=_>>15;--C>=0;){var B=this.data[n]&32767,I=this.data[n++]>>15,M=A*B+I*T;B=T*B+((M&32767)<<15)+x.data[E]+(S&1073741823),S=(B>>>30)+(M>>>15)+A*I+(S>>>30),x.data[E++]=B&1073741823}return S}function am3(n,_,x,E,S,C){for(var T=_&16383,A=_>>14;--C>=0;){var B=this.data[n]&16383,I=this.data[n++]>>14,M=A*B+I*T;B=T*B+((M&16383)<<14)+x.data[E]+S,S=(B>>28)+(M>>14)+A*I,x.data[E++]=B&268435455}return S}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(n,_){var x=BI_RC[n.charCodeAt(_)];return x??-1}function bnpCopyTo(n){for(var _=this.t-1;_>=0;--_)n.data[_]=this.data[_];n.t=this.t,n.s=this.s}function bnpFromInt(n){this.t=1,this.s=n<0?-1:0,n>0?this.data[0]=n:n<-1?this.data[0]=n+this.DV:this.t=0}function nbv(n){var _=nbi();return _.fromInt(n),_}function bnpFromString(n,_){var x;if(_==16)x=4;else if(_==8)x=3;else if(_==256)x=8;else if(_==2)x=1;else if(_==32)x=5;else if(_==4)x=2;else{this.fromRadix(n,_);return}this.t=0,this.s=0;for(var E=n.length,S=!1,C=0;--E>=0;){var T=x==8?n[E]&255:intAt(n,E);if(T<0){n.charAt(E)=="-"&&(S=!0);continue}S=!1,C==0?this.data[this.t++]=T:C+x>this.DB?(this.data[this.t-1]|=(T&(1<<this.DB-C)-1)<<C,this.data[this.t++]=T>>this.DB-C):this.data[this.t-1]|=T<<C,C+=x,C>=this.DB&&(C-=this.DB)}x==8&&n[0]&128&&(this.s=-1,C>0&&(this.data[this.t-1]|=(1<<this.DB-C)-1<<C)),this.clamp(),S&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var n=this.s&this.DM;this.t>0&&this.data[this.t-1]==n;)--this.t}function bnToString(n){if(this.s<0)return"-"+this.negate().toString(n);var _;if(n==16)_=4;else if(n==8)_=3;else if(n==2)_=1;else if(n==32)_=5;else if(n==4)_=2;else return this.toRadix(n);var x=(1<<_)-1,E,S=!1,C="",T=this.t,A=this.DB-T*this.DB%_;if(T-- >0)for(A<this.DB&&(E=this.data[T]>>A)>0&&(S=!0,C=int2char(E));T>=0;)A<_?(E=(this.data[T]&(1<<A)-1)<<_-A,E|=this.data[--T]>>(A+=this.DB-_)):(E=this.data[T]>>(A-=_)&x,A<=0&&(A+=this.DB,--T)),E>0&&(S=!0),S&&(C+=int2char(E));return S?C:"0"}function bnNegate(){var n=nbi();return BigInteger$2.ZERO.subTo(this,n),n}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(n){var _=this.s-n.s;if(_!=0)return _;var x=this.t;if(_=x-n.t,_!=0)return this.s<0?-_:_;for(;--x>=0;)if((_=this.data[x]-n.data[x])!=0)return _;return 0}function nbits(n){var _=1,x;return(x=n>>>16)!=0&&(n=x,_+=16),(x=n>>8)!=0&&(n=x,_+=8),(x=n>>4)!=0&&(n=x,_+=4),(x=n>>2)!=0&&(n=x,_+=2),(x=n>>1)!=0&&(n=x,_+=1),_}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,_){var x;for(x=this.t-1;x>=0;--x)_.data[x+n]=this.data[x];for(x=n-1;x>=0;--x)_.data[x]=0;_.t=this.t+n,_.s=this.s}function bnpDRShiftTo(n,_){for(var x=n;x<this.t;++x)_.data[x-n]=this.data[x];_.t=Math.max(this.t-n,0),_.s=this.s}function bnpLShiftTo(n,_){var x=n%this.DB,E=this.DB-x,S=(1<<E)-1,C=Math.floor(n/this.DB),T=this.s<<x&this.DM,A;for(A=this.t-1;A>=0;--A)_.data[A+C+1]=this.data[A]>>E|T,T=(this.data[A]&S)<<x;for(A=C-1;A>=0;--A)_.data[A]=0;_.data[C]=T,_.t=this.t+C+1,_.s=this.s,_.clamp()}function bnpRShiftTo(n,_){_.s=this.s;var x=Math.floor(n/this.DB);if(x>=this.t){_.t=0;return}var E=n%this.DB,S=this.DB-E,C=(1<<E)-1;_.data[0]=this.data[x]>>E;for(var T=x+1;T<this.t;++T)_.data[T-x-1]|=(this.data[T]&C)<<S,_.data[T-x]=this.data[T]>>E;E>0&&(_.data[this.t-x-1]|=(this.s&C)<<S),_.t=this.t-x,_.clamp()}function bnpSubTo(n,_){for(var x=0,E=0,S=Math.min(n.t,this.t);x<S;)E+=this.data[x]-n.data[x],_.data[x++]=E&this.DM,E>>=this.DB;if(n.t<this.t){for(E-=n.s;x<this.t;)E+=this.data[x],_.data[x++]=E&this.DM,E>>=this.DB;E+=this.s}else{for(E+=this.s;x<n.t;)E-=n.data[x],_.data[x++]=E&this.DM,E>>=this.DB;E-=n.s}_.s=E<0?-1:0,E<-1?_.data[x++]=this.DV+E:E>0&&(_.data[x++]=E),_.t=x,_.clamp()}function bnpMultiplyTo(n,_){var x=this.abs(),E=n.abs(),S=x.t;for(_.t=S+E.t;--S>=0;)_.data[S]=0;for(S=0;S<E.t;++S)_.data[S+x.t]=x.am(0,E.data[S],_,S,0,x.t);_.s=0,_.clamp(),this.s!=n.s&&BigInteger$2.ZERO.subTo(_,_)}function bnpSquareTo(n){for(var _=this.abs(),x=n.t=2*_.t;--x>=0;)n.data[x]=0;for(x=0;x<_.t-1;++x){var E=_.am(x,_.data[x],n,2*x,0,1);(n.data[x+_.t]+=_.am(x+1,2*_.data[x],n,2*x+1,E,_.t-x-1))>=_.DV&&(n.data[x+_.t]-=_.DV,n.data[x+_.t+1]=1)}n.t>0&&(n.data[n.t-1]+=_.am(x,_.data[x],n,2*x,0,1)),n.s=0,n.clamp()}function bnpDivRemTo(n,_,x){var E=n.abs();if(!(E.t<=0)){var S=this.abs();if(S.t<E.t){_?.fromInt(0),x!=null&&this.copyTo(x);return}x==null&&(x=nbi());var C=nbi(),T=this.s,A=n.s,B=this.DB-nbits(E.data[E.t-1]);B>0?(E.lShiftTo(B,C),S.lShiftTo(B,x)):(E.copyTo(C),S.copyTo(x));var I=C.t,M=C.data[I-1];if(M!=0){var O=M*(1<<this.F1)+(I>1?C.data[I-2]>>this.F2:0),D=this.FV/O,L=(1<<this.F1)/O,V=1<<this.F2,U=x.t,q=U-I,H=_??nbi();for(C.dlShiftTo(q,H),x.compareTo(H)>=0&&(x.data[x.t++]=1,x.subTo(H,x)),BigInteger$2.ONE.dlShiftTo(I,H),H.subTo(C,C);C.t<I;)C.data[C.t++]=0;for(;--q>=0;){var W=x.data[--U]==M?this.DM:Math.floor(x.data[U]*D+(x.data[U-1]+V)*L);if((x.data[U]+=C.am(0,W,x,q,0,I))<W)for(C.dlShiftTo(q,H),x.subTo(H,x);x.data[U]<--W;)x.subTo(H,x)}_!=null&&(x.drShiftTo(I,_),T!=A&&BigInteger$2.ZERO.subTo(_,_)),x.t=I,x.clamp(),B>0&&x.rShiftTo(B,x),T<0&&BigInteger$2.ZERO.subTo(x,x)}}}function bnMod(n){var _=nbi();return this.abs().divRemTo(n,null,_),this.s<0&&_.compareTo(BigInteger$2.ZERO)>0&&n.subTo(_,_),_}function Classic(n){this.m=n}function cConvert(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n}function cRevert(n){return n}function cReduce(n){n.divRemTo(this.m,null,n)}function cMulTo(n,_,x){n.multiplyTo(_,x),this.reduce(x)}function cSqrTo(n,_){n.squareTo(_),this.reduce(_)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var n=this.data[0];if(!(n&1))return 0;var _=n&3;return _=_*(2-(n&15)*_)&15,_=_*(2-(n&255)*_)&255,_=_*(2-((n&65535)*_&65535))&65535,_=_*(2-n*_%this.DV)%this.DV,_>0?this.DV-_:-_}function Montgomery(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function montConvert(n){var _=nbi();return n.abs().dlShiftTo(this.m.t,_),_.divRemTo(this.m,null,_),n.s<0&&_.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(_,_),_}function montRevert(n){var _=nbi();return n.copyTo(_),this.reduce(_),_}function montReduce(n){for(;n.t<=this.mt2;)n.data[n.t++]=0;for(var _=0;_<this.m.t;++_){var x=n.data[_]&32767,E=x*this.mpl+((x*this.mph+(n.data[_]>>15)*this.mpl&this.um)<<15)&n.DM;for(x=_+this.m.t,n.data[x]+=this.m.am(0,E,n,_,0,this.m.t);n.data[x]>=n.DV;)n.data[x]-=n.DV,n.data[++x]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function montSqrTo(n,_){n.squareTo(_),this.reduce(_)}function montMulTo(n,_,x){n.multiplyTo(_,x),this.reduce(x)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(n,_){if(n>4294967295||n<1)return BigInteger$2.ONE;var x=nbi(),E=nbi(),S=_.convert(this),C=nbits(n)-1;for(S.copyTo(x);--C>=0;)if(_.sqrTo(x,E),(n&1<<C)>0)_.mulTo(E,S,x);else{var T=x;x=E,E=T}return _.revert(x)}function bnModPowInt(n,_){var x;return n<256||_.isEven()?x=new Classic(_):x=new Montgomery(_),this.exp(n,x)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var n=nbi();return this.copyTo(n),n}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(n){return Math.floor(Math.LN2*this.DB/Math.log(n))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var _=this.chunkSize(n),x=Math.pow(n,_),E=nbv(x),S=nbi(),C=nbi(),T="";for(this.divRemTo(E,S,C);S.signum()>0;)T=(x+C.intValue()).toString(n).substr(1)+T,S.divRemTo(E,S,C);return C.intValue().toString(n)+T}function bnpFromRadix(n,_){this.fromInt(0),_==null&&(_=10);for(var x=this.chunkSize(_),E=Math.pow(_,x),S=!1,C=0,T=0,A=0;A<n.length;++A){var B=intAt(n,A);if(B<0){n.charAt(A)=="-"&&this.signum()==0&&(S=!0);continue}T=_*T+B,++C>=x&&(this.dMultiply(E),this.dAddOffset(T,0),C=0,T=0)}C>0&&(this.dMultiply(Math.pow(_,C)),this.dAddOffset(T,0)),S&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(n,_,x){if(typeof _=="number")if(n<2)this.fromInt(1);else for(this.fromNumber(n,x),this.testBit(n-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_);)this.dAddOffset(2,0),this.bitLength()>n&&this.subTo(BigInteger$2.ONE.shiftLeft(n-1),this);else{var E=new Array,S=n&7;E.length=(n>>3)+1,_.nextBytes(E),S>0?E[0]&=(1<<S)-1:E[0]=0,this.fromString(E,256)}}function bnToByteArray(){var n=this.t,_=new Array;_[0]=this.s;var x=this.DB-n*this.DB%8,E,S=0;if(n-- >0)for(x<this.DB&&(E=this.data[n]>>x)!=(this.s&this.DM)>>x&&(_[S++]=E|this.s<<this.DB-x);n>=0;)x<8?(E=(this.data[n]&(1<<x)-1)<<8-x,E|=this.data[--n]>>(x+=this.DB-8)):(E=this.data[n]>>(x-=8)&255,x<=0&&(x+=this.DB,--n)),E&128&&(E|=-256),S==0&&(this.s&128)!=(E&128)&&++S,(S>0||E!=this.s)&&(_[S++]=E);return _}function bnEquals(n){return this.compareTo(n)==0}function bnMin(n){return this.compareTo(n)<0?this:n}function bnMax(n){return this.compareTo(n)>0?this:n}function bnpBitwiseTo(n,_,x){var E,S,C=Math.min(n.t,this.t);for(E=0;E<C;++E)x.data[E]=_(this.data[E],n.data[E]);if(n.t<this.t){for(S=n.s&this.DM,E=C;E<this.t;++E)x.data[E]=_(this.data[E],S);x.t=this.t}else{for(S=this.s&this.DM,E=C;E<n.t;++E)x.data[E]=_(S,n.data[E]);x.t=n.t}x.s=_(this.s,n.s),x.clamp()}function op_and(n,_){return n&_}function bnAnd(n){var _=nbi();return this.bitwiseTo(n,op_and,_),_}function op_or(n,_){return n|_}function bnOr(n){var _=nbi();return this.bitwiseTo(n,op_or,_),_}function op_xor(n,_){return n^_}function bnXor(n){var _=nbi();return this.bitwiseTo(n,op_xor,_),_}function op_andnot(n,_){return n&~_}function bnAndNot(n){var _=nbi();return this.bitwiseTo(n,op_andnot,_),_}function bnNot(){for(var n=nbi(),_=0;_<this.t;++_)n.data[_]=this.DM&~this.data[_];return n.t=this.t,n.s=~this.s,n}function bnShiftLeft(n){var _=nbi();return n<0?this.rShiftTo(-n,_):this.lShiftTo(n,_),_}function bnShiftRight(n){var _=nbi();return n<0?this.lShiftTo(-n,_):this.rShiftTo(n,_),_}function lbit(n){if(n==0)return-1;var _=0;return n&65535||(n>>=16,_+=16),n&255||(n>>=8,_+=8),n&15||(n>>=4,_+=4),n&3||(n>>=2,_+=2),n&1||++_,_}function bnGetLowestSetBit(){for(var n=0;n<this.t;++n)if(this.data[n]!=0)return n*this.DB+lbit(this.data[n]);return this.s<0?this.t*this.DB:-1}function cbit(n){for(var _=0;n!=0;)n&=n-1,++_;return _}function bnBitCount(){for(var n=0,_=this.s&this.DM,x=0;x<this.t;++x)n+=cbit(this.data[x]^_);return n}function bnTestBit(n){var _=Math.floor(n/this.DB);return _>=this.t?this.s!=0:(this.data[_]&1<<n%this.DB)!=0}function bnpChangeBit(n,_){var x=BigInteger$2.ONE.shiftLeft(n);return this.bitwiseTo(x,_,x),x}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(n,_){for(var x=0,E=0,S=Math.min(n.t,this.t);x<S;)E+=this.data[x]+n.data[x],_.data[x++]=E&this.DM,E>>=this.DB;if(n.t<this.t){for(E+=n.s;x<this.t;)E+=this.data[x],_.data[x++]=E&this.DM,E>>=this.DB;E+=this.s}else{for(E+=this.s;x<n.t;)E+=n.data[x],_.data[x++]=E&this.DM,E>>=this.DB;E+=n.s}_.s=E<0?-1:0,E>0?_.data[x++]=E:E<-1&&(_.data[x++]=this.DV+E),_.t=x,_.clamp()}function bnAdd(n){var _=nbi();return this.addTo(n,_),_}function bnSubtract(n){var _=nbi();return this.subTo(n,_),_}function bnMultiply(n){var _=nbi();return this.multiplyTo(n,_),_}function bnDivide(n){var _=nbi();return this.divRemTo(n,_,null),_}function bnRemainder(n){var _=nbi();return this.divRemTo(n,null,_),_}function bnDivideAndRemainder(n){var _=nbi(),x=nbi();return this.divRemTo(n,_,x),new Array(_,x)}function bnpDMultiply(n){this.data[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(n,_){if(n!=0){for(;this.t<=_;)this.data[this.t++]=0;for(this.data[_]+=n;this.data[_]>=this.DV;)this.data[_]-=this.DV,++_>=this.t&&(this.data[this.t++]=0),++this.data[_]}}function NullExp(){}function nNop(n){return n}function nMulTo(n,_,x){n.multiplyTo(_,x)}function nSqrTo(n,_){n.squareTo(_)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(n){return this.exp(n,new NullExp)}function bnpMultiplyLowerTo(n,_,x){var E=Math.min(this.t+n.t,_);for(x.s=0,x.t=E;E>0;)x.data[--E]=0;var S;for(S=x.t-this.t;E<S;++E)x.data[E+this.t]=this.am(0,n.data[E],x,E,0,this.t);for(S=Math.min(n.t,_);E<S;++E)this.am(0,n.data[E],x,E,0,_-E);x.clamp()}function bnpMultiplyUpperTo(n,_,x){--_;var E=x.t=this.t+n.t-_;for(x.s=0;--E>=0;)x.data[E]=0;for(E=Math.max(_-this.t,0);E<n.t;++E)x.data[this.t+E-_]=this.am(_-E,n.data[E],x,0,0,this.t+E-_);x.clamp(),x.drShiftTo(1,x)}function Barrett(n){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function barrettConvert(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var _=nbi();return n.copyTo(_),this.reduce(_),_}function barrettRevert(n){return n}function barrettReduce(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)}function barrettSqrTo(n,_){n.squareTo(_),this.reduce(_)}function barrettMulTo(n,_,x){n.multiplyTo(_,x),this.reduce(x)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(n,_){var x=n.bitLength(),E,S=nbv(1),C;if(x<=0)return S;x<18?E=1:x<48?E=3:x<144?E=4:x<768?E=5:E=6,x<8?C=new Classic(_):_.isEven()?C=new Barrett(_):C=new Montgomery(_);var T=new Array,A=3,B=E-1,I=(1<<E)-1;if(T[1]=C.convert(this),E>1){var M=nbi();for(C.sqrTo(T[1],M);A<=I;)T[A]=nbi(),C.mulTo(M,T[A-2],T[A]),A+=2}var O=n.t-1,D,L=!0,V=nbi(),U;for(x=nbits(n.data[O])-1;O>=0;){for(x>=B?D=n.data[O]>>x-B&I:(D=(n.data[O]&(1<<x+1)-1)<<B-x,O>0&&(D|=n.data[O-1]>>this.DB+x-B)),A=E;!(D&1);)D>>=1,--A;if((x-=A)<0&&(x+=this.DB,--O),L)T[D].copyTo(S),L=!1;else{for(;A>1;)C.sqrTo(S,V),C.sqrTo(V,S),A-=2;A>0?C.sqrTo(S,V):(U=S,S=V,V=U),C.mulTo(V,T[D],S)}for(;O>=0&&!(n.data[O]&1<<x);)C.sqrTo(S,V),U=S,S=V,V=U,--x<0&&(x=this.DB-1,--O)}return C.revert(S)}function bnGCD(n){var _=this.s<0?this.negate():this.clone(),x=n.s<0?n.negate():n.clone();if(_.compareTo(x)<0){var E=_;_=x,x=E}var S=_.getLowestSetBit(),C=x.getLowestSetBit();if(C<0)return _;for(S<C&&(C=S),C>0&&(_.rShiftTo(C,_),x.rShiftTo(C,x));_.signum()>0;)(S=_.getLowestSetBit())>0&&_.rShiftTo(S,_),(S=x.getLowestSetBit())>0&&x.rShiftTo(S,x),_.compareTo(x)>=0?(_.subTo(x,_),_.rShiftTo(1,_)):(x.subTo(_,x),x.rShiftTo(1,x));return C>0&&x.lShiftTo(C,x),x}function bnpModInt(n){if(n<=0)return 0;var _=this.DV%n,x=this.s<0?n-1:0;if(this.t>0)if(_==0)x=this.data[0]%n;else for(var E=this.t-1;E>=0;--E)x=(_*x+this.data[E])%n;return x}function bnModInverse(n){var _=n.isEven();if(this.isEven()&&_||n.signum()==0)return BigInteger$2.ZERO;for(var x=n.clone(),E=this.clone(),S=nbv(1),C=nbv(0),T=nbv(0),A=nbv(1);x.signum()!=0;){for(;x.isEven();)x.rShiftTo(1,x),_?((!S.isEven()||!C.isEven())&&(S.addTo(this,S),C.subTo(n,C)),S.rShiftTo(1,S)):C.isEven()||C.subTo(n,C),C.rShiftTo(1,C);for(;E.isEven();)E.rShiftTo(1,E),_?((!T.isEven()||!A.isEven())&&(T.addTo(this,T),A.subTo(n,A)),T.rShiftTo(1,T)):A.isEven()||A.subTo(n,A),A.rShiftTo(1,A);x.compareTo(E)>=0?(x.subTo(E,x),_&&S.subTo(T,S),C.subTo(A,C)):(E.subTo(x,E),_&&T.subTo(S,T),A.subTo(C,A))}if(E.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(A.compareTo(n)>=0)return A.subtract(n);if(A.signum()<0)A.addTo(n,A);else return A;return A.signum()<0?A.add(n):A}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(n){var _,x=this.abs();if(x.t==1&&x.data[0]<=lowprimes[lowprimes.length-1]){for(_=0;_<lowprimes.length;++_)if(x.data[0]==lowprimes[_])return!0;return!1}if(x.isEven())return!1;for(_=1;_<lowprimes.length;){for(var E=lowprimes[_],S=_+1;S<lowprimes.length&&E<lplim;)E*=lowprimes[S++];for(E=x.modInt(E);_<S;)if(E%lowprimes[_++]==0)return!1}return x.millerRabin(n)}function bnpMillerRabin(n){var _=this.subtract(BigInteger$2.ONE),x=_.getLowestSetBit();if(x<=0)return!1;for(var E=_.shiftRight(x),S=bnGetPrng(),C,T=0;T<n;++T){do C=new BigInteger$2(this.bitLength(),S);while(C.compareTo(BigInteger$2.ONE)<=0||C.compareTo(_)>=0);var A=C.modPow(E,this);if(A.compareTo(BigInteger$2.ONE)!=0&&A.compareTo(_)!=0){for(var B=1;B++<x&&A.compareTo(_)!=0;)if(A=A.modPowInt(2,this),A.compareTo(BigInteger$2.ONE)==0)return!1;if(A.compareTo(_)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(n){for(var _=0;_<n.length;++_)n[_]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var n=null,_=forge$5.util.createBuffer(),x=new Array(80),E={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return E.start=function(){E.messageLength=0,E.fullMessageLength=E.messageLength64=[];for(var S=E.messageLengthSize/4,C=0;C<S;++C)E.fullMessageLength.push(0);return _=forge$5.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},E},E.start(),E.update=function(S,C){C==="utf8"&&(S=forge$5.util.encodeUtf8(S));var T=S.length;E.messageLength+=T,T=[T/4294967296>>>0,T>>>0];for(var A=E.fullMessageLength.length-1;A>=0;--A)E.fullMessageLength[A]+=T[1],T[1]=T[0]+(E.fullMessageLength[A]/4294967296>>>0),E.fullMessageLength[A]=E.fullMessageLength[A]>>>0,T[0]=T[1]/4294967296>>>0;return _.putBytes(S),_update$1(n,x,_),(_.read>2048||_.length()===0)&&_.compact(),E},E.digest=function(){var S=forge$5.util.createBuffer();S.putBytes(_.bytes());var C=E.fullMessageLength[E.fullMessageLength.length-1]+E.messageLengthSize,T=C&E.blockLength-1;S.putBytes(_padding$1.substr(0,E.blockLength-T));for(var A,B,I=E.fullMessageLength[0]*8,M=0;M<E.fullMessageLength.length-1;++M)A=E.fullMessageLength[M+1]*8,B=A/4294967296>>>0,I+=B,S.putInt32(I>>>0),I=A>>>0;S.putInt32(I);var O={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4};_update$1(O,x,S);var D=forge$5.util.createBuffer();return D.putInt32(O.h0),D.putInt32(O.h1),D.putInt32(O.h2),D.putInt32(O.h3),D.putInt32(O.h4),D},E};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(n,_,x){for(var E,S,C,T,A,B,I,M,O=x.length();O>=64;){for(S=n.h0,C=n.h1,T=n.h2,A=n.h3,B=n.h4,M=0;M<16;++M)E=x.getInt32(),_[M]=E,I=A^C&(T^A),E=(S<<5|S>>>27)+I+B+1518500249+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;for(;M<20;++M)E=_[M-3]^_[M-8]^_[M-14]^_[M-16],E=E<<1|E>>>31,_[M]=E,I=A^C&(T^A),E=(S<<5|S>>>27)+I+B+1518500249+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;for(;M<32;++M)E=_[M-3]^_[M-8]^_[M-14]^_[M-16],E=E<<1|E>>>31,_[M]=E,I=C^T^A,E=(S<<5|S>>>27)+I+B+1859775393+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;for(;M<40;++M)E=_[M-6]^_[M-16]^_[M-28]^_[M-32],E=E<<2|E>>>30,_[M]=E,I=C^T^A,E=(S<<5|S>>>27)+I+B+1859775393+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;for(;M<60;++M)E=_[M-6]^_[M-16]^_[M-28]^_[M-32],E=E<<2|E>>>30,_[M]=E,I=C&T|A&(C^T),E=(S<<5|S>>>27)+I+B+2400959708+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;for(;M<80;++M)E=_[M-6]^_[M-16]^_[M-28]^_[M-32],E=E<<2|E>>>30,_[M]=E,I=C^T^A,E=(S<<5|S>>>27)+I+B+3395469782+E,B=A,A=T,T=(C<<30|C>>>2)>>>0,C=S,S=E;n.h0=n.h0+S|0,n.h1=n.h1+C|0,n.h2=n.h2+T|0,n.h3=n.h3+A|0,n.h4=n.h4+B|0,O-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(n,_,x){var E,S,C,T;typeof x=="string"?(E=x,S=arguments[3]||void 0,C=arguments[4]||void 0):x&&(E=x.label||void 0,S=x.seed||void 0,C=x.md||void 0,x.mgf1&&x.mgf1.md&&(T=x.mgf1.md)),C?C.start():C=forge$4.md.sha1.create(),T||(T=C);var A=Math.ceil(n.n.bitLength()/8),B=A-2*C.digestLength-2;if(_.length>B){var I=new Error("RSAES-OAEP input message length is too long.");throw I.length=_.length,I.maxLength=B,I}E||(E=""),C.update(E,"raw");for(var M=C.digest(),O="",D=B-_.length,L=0;L<D;L++)O+="\0";var V=M.getBytes()+O+""+_;if(!S)S=forge$4.random.getBytes(C.digestLength);else if(S.length!==C.digestLength){var I=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw I.seedLength=S.length,I.digestLength=C.digestLength,I}var U=rsa_mgf1(S,A-C.digestLength-1,T),q=forge$4.util.xorBytes(V,U,V.length),H=rsa_mgf1(q,C.digestLength,T),W=forge$4.util.xorBytes(S,H,S.length);return"\0"+W+q};pkcs1.decode_rsa_oaep=function(n,_,x){var E,S,C;typeof x=="string"?(E=x,S=arguments[3]||void 0):x&&(E=x.label||void 0,S=x.md||void 0,x.mgf1&&x.mgf1.md&&(C=x.mgf1.md));var T=Math.ceil(n.n.bitLength()/8);if(_.length!==T){var q=new Error("RSAES-OAEP encoded message length is invalid.");throw q.length=_.length,q.expectedLength=T,q}if(S===void 0?S=forge$4.md.sha1.create():S.start(),C||(C=S),T<2*S.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");E||(E=""),S.update(E,"raw");for(var A=S.digest().getBytes(),B=_.charAt(0),I=_.substring(1,S.digestLength+1),M=_.substring(1+S.digestLength),O=rsa_mgf1(M,S.digestLength,C),D=forge$4.util.xorBytes(I,O,I.length),L=rsa_mgf1(D,T-S.digestLength-1,C),V=forge$4.util.xorBytes(M,L,M.length),U=V.substring(0,S.digestLength),q=B!=="\0",H=0;H<S.digestLength;++H)q|=A.charAt(H)!==U.charAt(H);for(var W=1,Q=S.digestLength,re=S.digestLength;re<V.length;re++){var ce=V.charCodeAt(re),ne=ce&1^1,Y=W?65534:0;q|=ce&Y,W=W&ne,Q+=W}if(q||V.charCodeAt(Q)!==1)throw new Error("Invalid RSAES-OAEP padding.");return V.substring(Q+1)};function rsa_mgf1(n,_,x){x||(x=forge$4.md.sha1.create());for(var E="",S=Math.ceil(_/x.digestLength),C=0;C<S;++C){var T=String.fromCharCode(C>>24&255,C>>16&255,C>>8&255,C&255);x.start(),x.update(n+T),E+=x.digest().getBytes()}return E.substring(0,_)}var forge$3=forge$m;(function(){if(forge$3.prime){forge$3.prime;return}var n=forge$3.prime=forge$3.prime||{},_=forge$3.jsbn.BigInteger,x=[6,4,2,4,2,4,6,2],E=new _(null);E.fromInt(30);var S=function(O,D){return O|D};n.generateProbablePrime=function(O,D,L){typeof D=="function"&&(L=D,D={}),D=D||{};var V=D.algorithm||"PRIMEINC";typeof V=="string"&&(V={name:V}),V.options=V.options||{};var U=D.prng||forge$3.random,q={nextBytes:function(H){for(var W=U.getBytesSync(H.length),Q=0;Q<H.length;++Q)H[Q]=W.charCodeAt(Q)}};if(V.name==="PRIMEINC")return C(O,q,V.options,L);throw new Error("Invalid prime generation algorithm: "+V.name)};function C(O,D,L,V){return"workers"in L?B(O,D,L,V):T(O,D,L,V)}function T(O,D,L,V){var U=I(O,D),q=0,H=M(U.bitLength());"millerRabinTests"in L&&(H=L.millerRabinTests);var W=10;"maxBlockTime"in L&&(W=L.maxBlockTime),A(U,O,D,q,H,W,V)}function A(O,D,L,V,U,q,H){var W=+new Date;do{if(O.bitLength()>D&&(O=I(D,L)),O.isProbablePrime(U))return H(null,O);O.dAddOffset(x[V++%8],0)}while(q<0||+new Date-W<q);forge$3.util.setImmediate(function(){A(O,D,L,V,U,q,H)})}function B(O,D,L,V){if(typeof Worker>"u")return T(O,D,L,V);var U=I(O,D),q=L.workers,H=L.workLoad||100,W=H*30/8,Q=L.workerScript||"forge/prime.worker.js";if(q===-1)return forge$3.util.estimateCores(function(ce,ne){ce&&(ne=2),q=ne-1,re()});re();function re(){q=Math.max(1,q);for(var ce=[],ne=0;ne<q;++ne)ce[ne]=new Worker(Q);for(var ne=0;ne<q;++ne)ce[ne].addEventListener("message",fe);var Y=!1;function fe(ge){if(!Y){var $e=ge.data;if($e.found){for(var _e=0;_e<ce.length;++_e)ce[_e].terminate();return Y=!0,V(null,new _($e.prime,16))}U.bitLength()>O&&(U=I(O,D));var ae=U.toString(16);ge.target.postMessage({hex:ae,workLoad:H}),U.dAddOffset(W,0)}}}}function I(O,D){var L=new _(O,D),V=O-1;return L.testBit(V)||L.bitwiseTo(_.ONE.shiftLeft(V),S,L),L.dAddOffset(31-L.mod(E).byteValue(),0),L}function M(O){return O<=100?27:O<=150?18:O<=200?15:O<=250?12:O<=300?9:O<=350?8:O<=400?7:O<=500?6:O<=600?5:O<=800?4:O<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?requireCryptoBrowserify():null,asn1$1=forge$2.asn1,util$6=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(n){var _;if(n.algorithm in pki$1.oids)_=pki$1.oids[n.algorithm];else{var x=new Error("Unknown message digest algorithm.");throw x.algorithm=n.algorithm,x}var E=asn1$1.oidToDer(_).getBytes(),S=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),C=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);C.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,E)),C.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var T=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,n.digest().getBytes());return S.value.push(C),S.value.push(T),asn1$1.toDer(S).getBytes()},_modPow=function(n,_,x){if(x)return n.modPow(_.e,_.n);if(!_.p||!_.q)return n.modPow(_.d,_.n);_.dP||(_.dP=_.d.mod(_.p.subtract(BigInteger$1.ONE))),_.dQ||(_.dQ=_.d.mod(_.q.subtract(BigInteger$1.ONE))),_.qInv||(_.qInv=_.q.modInverse(_.p));var E;do E=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(_.n.bitLength()/8)),16);while(E.compareTo(_.n)>=0||!E.gcd(_.n).equals(BigInteger$1.ONE));n=n.multiply(E.modPow(_.e,_.n)).mod(_.n);for(var S=n.mod(_.p).modPow(_.dP,_.p),C=n.mod(_.q).modPow(_.dQ,_.q);S.compareTo(C)<0;)S=S.add(_.p);var T=S.subtract(C).multiply(_.qInv).mod(_.p).multiply(_.q).add(C);return T=T.multiply(E.modInverse(_.n)).mod(_.n),T};pki$1.rsa.encrypt=function(n,_,x){var E=x,S,C=Math.ceil(_.n.bitLength()/8);x!==!1&&x!==!0?(E=x===2,S=_encodePkcs1_v1_5(n,_,x)):(S=forge$2.util.createBuffer(),S.putBytes(n));for(var T=new BigInteger$1(S.toHex(),16),A=_modPow(T,_,E),B=A.toString(16),I=forge$2.util.createBuffer(),M=C-Math.ceil(B.length/2);M>0;)I.putByte(0),--M;return I.putBytes(forge$2.util.hexToBytes(B)),I.getBytes()};pki$1.rsa.decrypt=function(n,_,x,E){var S=Math.ceil(_.n.bitLength()/8);if(n.length!==S){var C=new Error("Encrypted message length is invalid.");throw C.length=n.length,C.expected=S,C}var T=new BigInteger$1(forge$2.util.createBuffer(n).toHex(),16);if(T.compareTo(_.n)>=0)throw new Error("Encrypted message is invalid.");for(var A=_modPow(T,_,x),B=A.toString(16),I=forge$2.util.createBuffer(),M=S-Math.ceil(B.length/2);M>0;)I.putByte(0),--M;return I.putBytes(forge$2.util.hexToBytes(B)),E!==!1?_decodePkcs1_v1_5(I.getBytes(),_,x):I.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(n,_,x){typeof n=="string"&&(n=parseInt(n,10)),n=n||2048,x=x||{};var E=x.prng||forge$2.random,S={nextBytes:function(A){for(var B=E.getBytesSync(A.length),I=0;I<A.length;++I)A[I]=B.charCodeAt(I)}},C=x.algorithm||"PRIMEINC",T;if(C==="PRIMEINC")T={algorithm:C,state:0,bits:n,rng:S,eInt:_||65537,e:new BigInteger$1(null),p:null,q:null,qBits:n>>1,pBits:n-(n>>1),pqState:0,num:null,keys:null},T.e.fromInt(T.eInt);else throw new Error("Invalid key generation algorithm: "+C);return T};pki$1.rsa.stepKeyPairGenerationState=function(n,_){"algorithm"in n||(n.algorithm="PRIMEINC");var x=new BigInteger$1(null);x.fromInt(30);for(var E=0,S=function(O,D){return O|D},C=+new Date,T,A=0;n.keys===null&&(_<=0||A<_);){if(n.state===0){var B=n.p===null?n.pBits:n.qBits,I=B-1;n.pqState===0?(n.num=new BigInteger$1(B,n.rng),n.num.testBit(I)||n.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(I),S,n.num),n.num.dAddOffset(31-n.num.mod(x).byteValue(),0),E=0,++n.pqState):n.pqState===1?n.num.bitLength()>B?n.pqState=0:n.num.isProbablePrime(_getMillerRabinTests(n.num.bitLength()))?++n.pqState:n.num.dAddOffset(GCD_30_DELTA[E++%8],0):n.pqState===2?n.pqState=n.num.subtract(BigInteger$1.ONE).gcd(n.e).compareTo(BigInteger$1.ONE)===0?3:0:n.pqState===3&&(n.pqState=0,n.p===null?n.p=n.num:n.q=n.num,n.p!==null&&n.q!==null&&++n.state,n.num=null)}else if(n.state===1)n.p.compareTo(n.q)<0&&(n.num=n.p,n.p=n.q,n.q=n.num),++n.state;else if(n.state===2)n.p1=n.p.subtract(BigInteger$1.ONE),n.q1=n.q.subtract(BigInteger$1.ONE),n.phi=n.p1.multiply(n.q1),++n.state;else if(n.state===3)n.phi.gcd(n.e).compareTo(BigInteger$1.ONE)===0?++n.state:(n.p=null,n.q=null,n.state=0);else if(n.state===4)n.n=n.p.multiply(n.q),n.n.bitLength()===n.bits?++n.state:(n.q=null,n.state=0);else if(n.state===5){var M=n.e.modInverse(n.phi);n.keys={privateKey:pki$1.rsa.setPrivateKey(n.n,n.e,M,n.p,n.q,M.mod(n.p1),M.mod(n.q1),n.q.modInverse(n.p)),publicKey:pki$1.rsa.setPublicKey(n.n,n.e)}}T=+new Date,A+=T-C,C=T}return n.keys!==null};pki$1.rsa.generateKeyPair=function(n,_,x,E){if(arguments.length===1?typeof n=="object"?(x=n,n=void 0):typeof n=="function"&&(E=n,n=void 0):arguments.length===2?typeof n=="number"?typeof _=="function"?(E=_,_=void 0):typeof _!="number"&&(x=_,_=void 0):(x=n,E=_,n=void 0,_=void 0):arguments.length===3&&(typeof _=="number"?typeof x=="function"&&(E=x,x=void 0):(E=x,x=_,_=void 0)),x=x||{},n===void 0&&(n=x.bits||2048),_===void 0&&(_=x.e||65537),!forge$2.options.usePureJavaScript&&!x.prng&&n>=256&&n<=16384&&(_===65537||_===3)){if(E){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:n,publicExponent:_,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(A,B,I){if(A)return E(A);E(null,{privateKey:pki$1.privateKeyFromPem(I),publicKey:pki$1.publicKeyFromPem(B)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$6.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:_intToUint8Array(_),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(A){return util$6.globalScope.crypto.subtle.exportKey("pkcs8",A.privateKey)}).then(void 0,function(A){E(A)}).then(function(A){if(A){var B=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(A)));E(null,{privateKey:B,publicKey:pki$1.setRsaPublicKey(B.n,B.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var S=util$6.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:_intToUint8Array(_),hash:{name:"SHA-256"}},!0,["sign","verify"]);S.oncomplete=function(A){var B=A.target.result,I=util$6.globalScope.msCrypto.subtle.exportKey("pkcs8",B.privateKey);I.oncomplete=function(M){var O=M.target.result,D=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(O)));E(null,{privateKey:D,publicKey:pki$1.setRsaPublicKey(D.n,D.e)})},I.onerror=function(M){E(M)}},S.onerror=function(A){E(A)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var C=_crypto.generateKeyPairSync("rsa",{modulusLength:n,publicExponent:_,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(C.privateKey),publicKey:pki$1.publicKeyFromPem(C.publicKey)}}}var T=pki$1.rsa.createKeyPairGenerationState(n,_,x);if(!E)return pki$1.rsa.stepKeyPairGenerationState(T,0),T.keys;_generateKeyPair(T,x,E)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(n,_){var x={n,e:_};return x.encrypt=function(E,S,C){if(typeof S=="string"?S=S.toUpperCase():S===void 0&&(S="RSAES-PKCS1-V1_5"),S==="RSAES-PKCS1-V1_5")S={encode:function(A,B,I){return _encodePkcs1_v1_5(A,B,2).getBytes()}};else if(S==="RSA-OAEP"||S==="RSAES-OAEP")S={encode:function(A,B){return forge$2.pkcs1.encode_rsa_oaep(B,A,C)}};else if(["RAW","NONE","NULL",null].indexOf(S)!==-1)S={encode:function(A){return A}};else if(typeof S=="string")throw new Error('Unsupported encryption scheme: "'+S+'".');var T=S.encode(E,x,!0);return pki$1.rsa.encrypt(T,x,!0)},x.verify=function(E,S,C,T){typeof C=="string"?C=C.toUpperCase():C===void 0&&(C="RSASSA-PKCS1-V1_5"),T===void 0&&(T={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in T||(T._parseAllDigestBytes=!0),C==="RSASSA-PKCS1-V1_5"?C={verify:function(B,I){I=_decodePkcs1_v1_5(I,x,!0);var M=asn1$1.fromDer(I,{parseAllBytes:T._parseAllDigestBytes}),O={},D=[];if(!asn1$1.validate(M,digestInfoValidator,O,D)){var L=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw L.errors=D,L}var V=asn1$1.derToOid(O.algorithmIdentifier);if(!(V===forge$2.oids.md2||V===forge$2.oids.md5||V===forge$2.oids.sha1||V===forge$2.oids.sha224||V===forge$2.oids.sha256||V===forge$2.oids.sha384||V===forge$2.oids.sha512||V===forge$2.oids["sha512-224"]||V===forge$2.oids["sha512-256"])){var L=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw L.oid=V,L}if((V===forge$2.oids.md2||V===forge$2.oids.md5)&&!("parameters"in O))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return B===O.digest}}:(C==="NONE"||C==="NULL"||C===null)&&(C={verify:function(B,I){return I=_decodePkcs1_v1_5(I,x,!0),B===I}});var A=pki$1.rsa.decrypt(S,x,!0,!1);return C.verify(E,A,x.n.bitLength())},x};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(n,_,x,E,S,C,T,A){var B={n,e:_,d:x,p:E,q:S,dP:C,dQ:T,qInv:A};return B.decrypt=function(I,M,O){typeof M=="string"?M=M.toUpperCase():M===void 0&&(M="RSAES-PKCS1-V1_5");var D=pki$1.rsa.decrypt(I,B,!1,!1);if(M==="RSAES-PKCS1-V1_5")M={decode:_decodePkcs1_v1_5};else if(M==="RSA-OAEP"||M==="RSAES-OAEP")M={decode:function(L,V){return forge$2.pkcs1.decode_rsa_oaep(V,L,O)}};else if(["RAW","NONE","NULL",null].indexOf(M)!==-1)M={decode:function(L){return L}};else throw new Error('Unsupported encryption scheme: "'+M+'".');return M.decode(D,B,!1)},B.sign=function(I,M){var O=!1;typeof M=="string"&&(M=M.toUpperCase()),M===void 0||M==="RSASSA-PKCS1-V1_5"?(M={encode:emsaPkcs1v15encode},O=1):(M==="NONE"||M==="NULL"||M===null)&&(M={encode:function(){return I}},O=1);var D=M.encode(I,B.n.bitLength());return pki$1.rsa.encrypt(D,B,O)},B};pki$1.wrapRsaPrivateKey=function(n){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(n).getBytes())])};pki$1.privateKeyFromAsn1=function(n){var _={},x=[];if(asn1$1.validate(n,privateKeyValidator,_,x)&&(n=asn1$1.fromDer(forge$2.util.createBuffer(_.privateKey))),_={},x=[],!asn1$1.validate(n,rsaPrivateKeyValidator,_,x)){var E=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw E.errors=x,E}var S,C,T,A,B,I,M,O;return S=forge$2.util.createBuffer(_.privateKeyModulus).toHex(),C=forge$2.util.createBuffer(_.privateKeyPublicExponent).toHex(),T=forge$2.util.createBuffer(_.privateKeyPrivateExponent).toHex(),A=forge$2.util.createBuffer(_.privateKeyPrime1).toHex(),B=forge$2.util.createBuffer(_.privateKeyPrime2).toHex(),I=forge$2.util.createBuffer(_.privateKeyExponent1).toHex(),M=forge$2.util.createBuffer(_.privateKeyExponent2).toHex(),O=forge$2.util.createBuffer(_.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(S,16),new BigInteger$1(C,16),new BigInteger$1(T,16),new BigInteger$1(A,16),new BigInteger$1(B,16),new BigInteger$1(I,16),new BigInteger$1(M,16),new BigInteger$1(O,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(n){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.qInv))])};pki$1.publicKeyFromAsn1=function(n){var _={},x=[];if(asn1$1.validate(n,publicKeyValidator,_,x)){var E=asn1$1.derToOid(_.publicKeyOid);if(E!==pki$1.oids.rsaEncryption){var S=new Error("Cannot read public key. Unknown OID.");throw S.oid=E,S}n=_.rsaPublicKey}if(x=[],!asn1$1.validate(n,rsaPublicKeyValidator,_,x)){var S=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw S.errors=x,S}var C=forge$2.util.createBuffer(_.publicKeyModulus).toHex(),T=forge$2.util.createBuffer(_.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(C,16),new BigInteger$1(T,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(n){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(n)])])};pki$1.publicKeyToRSAPublicKey=function(n){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(n.e))])};function _encodePkcs1_v1_5(n,_,x){var E=forge$2.util.createBuffer(),S=Math.ceil(_.n.bitLength()/8);if(n.length>S-11){var C=new Error("Message is too long for PKCS#1 v1.5 padding.");throw C.length=n.length,C.max=S-11,C}E.putByte(0),E.putByte(x);var T=S-3-n.length,A;if(x===0||x===1){A=x===0?0:255;for(var B=0;B<T;++B)E.putByte(A)}else for(;T>0;){for(var I=0,M=forge$2.random.getBytes(T),B=0;B<T;++B)A=M.charCodeAt(B),A===0?++I:E.putByte(A);T=I}return E.putByte(0),E.putBytes(n),E}function _decodePkcs1_v1_5(n,_,x,E){var S=Math.ceil(_.n.bitLength()/8),C=forge$2.util.createBuffer(n),T=C.getByte(),A=C.getByte();if(T!==0||x&&A!==0&&A!==1||!x&&A!=2||x&&A===0&&typeof E>"u")throw new Error("Encryption block is invalid.");var B=0;if(A===0){B=S-3-E;for(var I=0;I<B;++I)if(C.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(A===1)for(B=0;C.length()>1;){if(C.getByte()!==255){--C.read;break}++B}else if(A===2)for(B=0;C.length()>1;){if(C.getByte()===0){--C.read;break}++B}var M=C.getByte();if(M!==0||B!==S-3-C.length())throw new Error("Encryption block is invalid.");return C.getBytes()}function _generateKeyPair(n,_,x){typeof _=="function"&&(x=_,_={}),_=_||{};var E={algorithm:{name:_.algorithm||"PRIMEINC",options:{workers:_.workers||2,workLoad:_.workLoad||100,workerScript:_.workerScript}}};"prng"in _&&(E.prng=_.prng),S();function S(){C(n.pBits,function(A,B){if(A)return x(A);if(n.p=B,n.q!==null)return T(A,n.q);C(n.qBits,T)})}function C(A,B){forge$2.prime.generateProbablePrime(A,E,B)}function T(A,B){if(A)return x(A);if(n.q=B,n.p.compareTo(n.q)<0){var I=n.p;n.p=n.q,n.q=I}if(n.p.subtract(BigInteger$1.ONE).gcd(n.e).compareTo(BigInteger$1.ONE)!==0){n.p=null,S();return}if(n.q.subtract(BigInteger$1.ONE).gcd(n.e).compareTo(BigInteger$1.ONE)!==0){n.q=null,C(n.qBits,T);return}if(n.p1=n.p.subtract(BigInteger$1.ONE),n.q1=n.q.subtract(BigInteger$1.ONE),n.phi=n.p1.multiply(n.q1),n.phi.gcd(n.e).compareTo(BigInteger$1.ONE)!==0){n.p=n.q=null,S();return}if(n.n=n.p.multiply(n.q),n.n.bitLength()!==n.bits){n.q=null,C(n.qBits,T);return}var M=n.e.modInverse(n.phi);n.keys={privateKey:pki$1.rsa.setPrivateKey(n.n,n.e,M,n.p,n.q,M.mod(n.p1),M.mod(n.q1),n.q.modInverse(n.p)),publicKey:pki$1.rsa.setPublicKey(n.n,n.e)},x(null,n.keys)}}function _bnToBytes(n){var _=n.toString(16);_[0]>="8"&&(_="00"+_);var x=forge$2.util.hexToBytes(_);return x.length>1&&(x.charCodeAt(0)===0&&!(x.charCodeAt(1)&128)||x.charCodeAt(0)===255&&(x.charCodeAt(1)&128)===128)?x.substr(1):x}function _getMillerRabinTests(n){return n<=100?27:n<=150?18:n<=200?15:n<=250?12:n<=300?9:n<=350?8:n<=400?7:n<=500?6:n<=600?5:n<=800?4:n<=1250?3:2}function _detectNodeCrypto(n){return forge$2.util.isNodejs&&typeof _crypto[n]=="function"}function _detectSubtleCrypto(n){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.crypto=="object"&&typeof util$6.globalScope.crypto.subtle=="object"&&typeof util$6.globalScope.crypto.subtle[n]=="function"}function _detectSubtleMsCrypto(n){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.msCrypto=="object"&&typeof util$6.globalScope.msCrypto.subtle=="object"&&typeof util$6.globalScope.msCrypto.subtle[n]=="function"}function _intToUint8Array(n){for(var _=forge$2.util.hexToBytes(n.toString(16)),x=new Uint8Array(_.length),E=0;E<_.length;++E)x[E]=_.charCodeAt(E);return x}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(n,_,x){x=x||{},x.saltSize=x.saltSize||8,x.count=x.count||2048,x.algorithm=x.algorithm||"aes128",x.prfAlgorithm=x.prfAlgorithm||"sha1";var E=forge$1.random.getBytesSync(x.saltSize),S=x.count,C=asn1.integerToDer(S),T,A,B;if(x.algorithm.indexOf("aes")===0||x.algorithm==="des"){var I,M,O;switch(x.algorithm){case"aes128":T=16,I=16,M=oids["aes128-CBC"],O=forge$1.aes.createEncryptionCipher;break;case"aes192":T=24,I=16,M=oids["aes192-CBC"],O=forge$1.aes.createEncryptionCipher;break;case"aes256":T=32,I=16,M=oids["aes256-CBC"],O=forge$1.aes.createEncryptionCipher;break;case"des":T=8,I=8,M=oids.desCBC,O=forge$1.des.createEncryptionCipher;break;default:var D=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw D.algorithm=x.algorithm,D}var L="hmacWith"+x.prfAlgorithm.toUpperCase(),V=prfAlgorithmToMessageDigest(L),U=forge$1.pkcs5.pbkdf2(_,E,S,T,V),q=forge$1.random.getBytesSync(I),H=O(U);H.start(q),H.update(asn1.toDer(n)),H.finish(),B=H.output.getBytes();var W=createPbkdf2Params(E,C,T,L);A=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),W]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(M).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,q)])])])}else if(x.algorithm==="3des"){T=24;var Q=new forge$1.util.ByteBuffer(E),U=pki.pbe.generatePkcs12Key(_,Q,1,S,T),q=pki.pbe.generatePkcs12Key(_,Q,2,S,T),H=forge$1.des.createEncryptionCipher(U);H.start(q),H.update(asn1.toDer(n)),H.finish(),B=H.output.getBytes(),A=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,E),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,C.getBytes())])])}else{var D=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw D.algorithm=x.algorithm,D}var re=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[A,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,B)]);return re};pki.decryptPrivateKeyInfo=function(n,_){var x=null,E={},S=[];if(!asn1.validate(n,encryptedPrivateKeyValidator,E,S)){var C=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw C.errors=S,C}var T=asn1.derToOid(E.encryptionOid),A=pki.pbe.getCipher(T,E.encryptionParams,_),B=forge$1.util.createBuffer(E.encryptedData);return A.update(B),A.finish()&&(x=asn1.fromDer(A.output)),x};pki.encryptedPrivateKeyToPem=function(n,_){var x={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(n).getBytes()};return forge$1.pem.encode(x,{maxline:_})};pki.encryptedPrivateKeyFromPem=function(n){var _=forge$1.pem.decode(n)[0];if(_.type!=="ENCRYPTED PRIVATE KEY"){var x=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw x.headerType=_.type,x}if(_.procType&&_.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(_.body)};pki.encryptRsaPrivateKey=function(n,_,x){if(x=x||{},!x.legacy){var E=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(n));return E=pki.encryptPrivateKeyInfo(E,_,x),pki.encryptedPrivateKeyToPem(E)}var S,C,T,A;switch(x.algorithm){case"aes128":S="AES-128-CBC",T=16,C=forge$1.random.getBytesSync(16),A=forge$1.aes.createEncryptionCipher;break;case"aes192":S="AES-192-CBC",T=24,C=forge$1.random.getBytesSync(16),A=forge$1.aes.createEncryptionCipher;break;case"aes256":S="AES-256-CBC",T=32,C=forge$1.random.getBytesSync(16),A=forge$1.aes.createEncryptionCipher;break;case"3des":S="DES-EDE3-CBC",T=24,C=forge$1.random.getBytesSync(8),A=forge$1.des.createEncryptionCipher;break;case"des":S="DES-CBC",T=8,C=forge$1.random.getBytesSync(8),A=forge$1.des.createEncryptionCipher;break;default:var B=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+x.algorithm+'".');throw B.algorithm=x.algorithm,B}var I=forge$1.pbe.opensslDeriveBytes(_,C.substr(0,8),T),M=A(I);M.start(C),M.update(asn1.toDer(pki.privateKeyToAsn1(n))),M.finish();var O={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:S,parameters:forge$1.util.bytesToHex(C).toUpperCase()},body:M.output.getBytes()};return forge$1.pem.encode(O)};pki.decryptRsaPrivateKey=function(n,_){var x=null,E=forge$1.pem.decode(n)[0];if(E.type!=="ENCRYPTED PRIVATE KEY"&&E.type!=="PRIVATE KEY"&&E.type!=="RSA PRIVATE KEY"){var S=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw S.headerType=S,S}if(E.procType&&E.procType.type==="ENCRYPTED"){var C,T;switch(E.dekInfo.algorithm){case"DES-CBC":C=8,T=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":C=24,T=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":C=16,T=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":C=24,T=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":C=32,T=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":C=5,T=function(O){return forge$1.rc2.createDecryptionCipher(O,40)};break;case"RC2-64-CBC":C=8,T=function(O){return forge$1.rc2.createDecryptionCipher(O,64)};break;case"RC2-128-CBC":C=16,T=function(O){return forge$1.rc2.createDecryptionCipher(O,128)};break;default:var S=new Error('Could not decrypt private key; unsupported encryption algorithm "'+E.dekInfo.algorithm+'".');throw S.algorithm=E.dekInfo.algorithm,S}var A=forge$1.util.hexToBytes(E.dekInfo.parameters),B=forge$1.pbe.opensslDeriveBytes(_,A.substr(0,8),C),I=T(B);if(I.start(A),I.update(forge$1.util.createBuffer(E.body)),I.finish())x=I.output.getBytes();else return x}else x=E.body;return E.type==="ENCRYPTED PRIVATE KEY"?x=pki.decryptPrivateKeyInfo(asn1.fromDer(x),_):x=asn1.fromDer(x),x!==null&&(x=pki.privateKeyFromAsn1(x)),x};pki.pbe.generatePkcs12Key=function(n,_,x,E,S,C){var T,A;if(typeof C>"u"||C===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');C=forge$1.md.sha1.create()}var B=C.digestLength,I=C.blockLength,M=new forge$1.util.ByteBuffer,O=new forge$1.util.ByteBuffer;if(n!=null){for(A=0;A<n.length;A++)O.putInt16(n.charCodeAt(A));O.putInt16(0)}var D=O.length(),L=_.length(),V=new forge$1.util.ByteBuffer;V.fillWithByte(x,I);var U=I*Math.ceil(L/I),q=new forge$1.util.ByteBuffer;for(A=0;A<U;A++)q.putByte(_.at(A%L));var H=I*Math.ceil(D/I),W=new forge$1.util.ByteBuffer;for(A=0;A<H;A++)W.putByte(O.at(A%D));var Q=q;Q.putBuffer(W);for(var re=Math.ceil(S/B),ce=1;ce<=re;ce++){var ne=new forge$1.util.ByteBuffer;ne.putBytes(V.bytes()),ne.putBytes(Q.bytes());for(var Y=0;Y<E;Y++)C.start(),C.update(ne.getBytes()),ne=C.digest();var fe=new forge$1.util.ByteBuffer;for(A=0;A<I;A++)fe.putByte(ne.at(A%B));var ge=Math.ceil(L/I)+Math.ceil(D/I),$e=new forge$1.util.ByteBuffer;for(T=0;T<ge;T++){var _e=new forge$1.util.ByteBuffer(Q.getBytes(I)),ae=511;for(A=fe.length()-1;A>=0;A--)ae=ae>>8,ae+=fe.at(A)+_e.at(A),_e.setAt(A,ae&255);$e.putBuffer(_e)}Q=$e,M.putBuffer(ne)}return M.truncate(M.length()-S),M};pki.pbe.getCipher=function(n,_,x){switch(n){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(n,_,x);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(n,_,x);default:var E=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw E.oid=n,E.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],E}};pki.pbe.getCipherForPBES2=function(n,_,x){var E={},S=[];if(!asn1.validate(_,PBES2AlgorithmsValidator,E,S)){var C=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw C.errors=S,C}if(n=asn1.derToOid(E.kdfOid),n!==pki.oids.pkcs5PBKDF2){var C=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw C.oid=n,C.supportedOids=["pkcs5PBKDF2"],C}if(n=asn1.derToOid(E.encOid),n!==pki.oids["aes128-CBC"]&&n!==pki.oids["aes192-CBC"]&&n!==pki.oids["aes256-CBC"]&&n!==pki.oids["des-EDE3-CBC"]&&n!==pki.oids.desCBC){var C=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw C.oid=n,C.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],C}var T=E.kdfSalt,A=forge$1.util.createBuffer(E.kdfIterationCount);A=A.getInt(A.length()<<3);var B,I;switch(pki.oids[n]){case"aes128-CBC":B=16,I=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":B=24,I=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":B=32,I=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":B=24,I=forge$1.des.createDecryptionCipher;break;case"desCBC":B=8,I=forge$1.des.createDecryptionCipher;break}var M=prfOidToMessageDigest(E.prfOid),O=forge$1.pkcs5.pbkdf2(x,T,A,B,M),D=E.encIv,L=I(O);return L.start(D),L};pki.pbe.getCipherForPKCS12PBE=function(n,_,x){var E={},S=[];if(!asn1.validate(_,pkcs12PbeParamsValidator,E,S)){var C=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw C.errors=S,C}var T=forge$1.util.createBuffer(E.salt),A=forge$1.util.createBuffer(E.iterations);A=A.getInt(A.length()<<3);var B,I,M;switch(n){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:B=24,I=8,M=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:B=5,I=8,M=function(U,q){var H=forge$1.rc2.createDecryptionCipher(U,40);return H.start(q,null),H};break;default:var C=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw C.oid=n,C}var O=prfOidToMessageDigest(E.prfOid),D=pki.pbe.generatePkcs12Key(x,T,1,A,B,O);O.start();var L=pki.pbe.generatePkcs12Key(x,T,2,A,I,O);return M(D,L)};pki.pbe.opensslDeriveBytes=function(n,_,x,E){if(typeof E>"u"||E===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');E=forge$1.md.md5.create()}_===null&&(_="");for(var S=[hash(E,n+_)],C=16,T=1;C<x;++T,C+=16)S.push(hash(E,S[T-1]+n+_));return S.join("").substr(0,x)};function hash(n,_){return n.start().update(_).digest().getBytes()}function prfOidToMessageDigest(n){var _;if(!n)_="hmacWithSHA1";else if(_=pki.oids[asn1.derToOid(n)],!_){var x=new Error("Unsupported PRF OID.");throw x.oid=n,x.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],x}return prfAlgorithmToMessageDigest(_)}function prfAlgorithmToMessageDigest(n){var _=forge$1.md;switch(n){case"hmacWithSHA224":_=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":n=n.substr(8).toLowerCase();break;default:var x=new Error("Unsupported PRF algorithm.");throw x.algorithm=n,x.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],x}if(!_||!(n in _))throw new Error("Unknown hash algorithm: "+n);return _[n].create()}function createPbkdf2Params(n,_,x,E){var S=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,_.getBytes())]);return E!=="hmacWithSHA1"&&S.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(x.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[E]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),S}function base$1(n,_){if(n.length>=255)throw new TypeError("Alphabet too long");for(var x=new Uint8Array(256),E=0;E<x.length;E++)x[E]=255;for(var S=0;S<n.length;S++){var C=n.charAt(S),T=C.charCodeAt(0);if(x[T]!==255)throw new TypeError(C+" is ambiguous");x[T]=S}var A=n.length,B=n.charAt(0),I=Math.log(A)/Math.log(256),M=Math.log(256)/Math.log(A);function O(V){if(V instanceof Uint8Array||(ArrayBuffer.isView(V)?V=new Uint8Array(V.buffer,V.byteOffset,V.byteLength):Array.isArray(V)&&(V=Uint8Array.from(V))),!(V instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(V.length===0)return"";for(var U=0,q=0,H=0,W=V.length;H!==W&&V[H]===0;)H++,U++;for(var Q=(W-H)*M+1>>>0,re=new Uint8Array(Q);H!==W;){for(var ce=V[H],ne=0,Y=Q-1;(ce!==0||ne<q)&&Y!==-1;Y--,ne++)ce+=256*re[Y]>>>0,re[Y]=ce%A>>>0,ce=ce/A>>>0;if(ce!==0)throw new Error("Non-zero carry");q=ne,H++}for(var fe=Q-q;fe!==Q&&re[fe]===0;)fe++;for(var ge=B.repeat(U);fe<Q;++fe)ge+=n.charAt(re[fe]);return ge}function D(V){if(typeof V!="string")throw new TypeError("Expected String");if(V.length===0)return new Uint8Array;var U=0;if(V[U]!==" "){for(var q=0,H=0;V[U]===B;)q++,U++;for(var W=(V.length-U)*I+1>>>0,Q=new Uint8Array(W);V[U];){var re=x[V.charCodeAt(U)];if(re===255)return;for(var ce=0,ne=W-1;(re!==0||ce<H)&&ne!==-1;ne--,ce++)re+=A*Q[ne]>>>0,Q[ne]=re%256>>>0,re=re/256>>>0;if(re!==0)throw new Error("Non-zero carry");H=ce,U++}if(V[U]!==" "){for(var Y=W-H;Y!==W&&Q[Y]===0;)Y++;for(var fe=new Uint8Array(q+(W-Y)),ge=q;Y!==W;)fe[ge++]=Q[Y++];return fe}}}function L(V){var U=D(V);if(U)return U;throw new Error(`Non-${_} character`)}return{encode:O,decodeUnsafe:D,decode:L}}var src$1=base$1,_brrp__multiformats_scope_baseX=src$1;const coerce=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$1=class{constructor(_,x,E){this.name=_,this.prefix=x,this.baseEncode=E}encode(_){if(_ instanceof Uint8Array)return`${this.prefix}${this.baseEncode(_)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(_,x,E){if(this.name=_,this.prefix=x,x.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x.codePointAt(0),this.baseDecode=E}decode(_){if(typeof _=="string"){if(_.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(_)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(_.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(_){return or(this,_)}};class ComposedDecoder{constructor(_){this.decoders=_}or(_){return or(this,_)}decode(_){const x=_[0],E=this.decoders[x];if(E)return E.decode(_);throw RangeError(`Unable to decode multibase string ${JSON.stringify(_)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(n,_)=>new ComposedDecoder({...n.decoders||{[n.prefix]:n},..._.decoders||{[_.prefix]:_}});let Codec$1=class{constructor(_,x,E,S){this.name=_,this.prefix=x,this.baseEncode=E,this.baseDecode=S,this.encoder=new Encoder$1(_,x,E),this.decoder=new Decoder$1(_,x,S)}encode(_){return this.encoder.encode(_)}decode(_){return this.decoder.decode(_)}};const from$2=({name:n,prefix:_,encode:x,decode:E})=>new Codec$1(n,_,x,E),baseX=({prefix:n,name:_,alphabet:x})=>{const{encode:E,decode:S}=_brrp__multiformats_scope_baseX(x,_);return from$2({prefix:n,name:_,encode:E,decode:C=>coerce(S(C))})},decode$a=(n,_,x,E)=>{const S={};for(let M=0;M<_.length;++M)S[_[M]]=M;let C=n.length;for(;n[C-1]==="=";)--C;const T=new Uint8Array(C*x/8|0);let A=0,B=0,I=0;for(let M=0;M<C;++M){const O=S[n[M]];if(O===void 0)throw new SyntaxError(`Non-${E} character`);B=B<<x|O,A+=x,A>=8&&(A-=8,T[I++]=255&B>>A)}if(A>=x||255&B<<8-A)throw new SyntaxError("Unexpected end of data");return T},encode$f=(n,_,x)=>{const E=_[_.length-1]==="=",S=(1<<x)-1;let C="",T=0,A=0;for(let B=0;B<n.length;++B)for(A=A<<8|n[B],T+=8;T>x;)T-=x,C+=_[S&A>>T];if(T&&(C+=_[S&A<<x-T]),E)for(;C.length*x&7;)C+="=";return C},rfc4648=({name:n,prefix:_,bitsPerChar:x,alphabet:E})=>from$2({prefix:_,name:n,encode(S){return encode$f(S,E,x)},decode(S){return decode$a(S,E,x,n)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$2=encode$e,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$e(n,_,x){_=_||[],x=x||0;for(var E=x;n>=INT;)_[x++]=n&255|MSB,n/=128;for(;n&MSBALL;)_[x++]=n&255|MSB,n>>>=7;return _[x]=n|0,encode$e.bytes=x-E+1,_}var decode$9=read$2,MSB$1=128,REST$1=127;function read$2(n,E){var x=0,E=E||0,S=0,C=E,T,A=n.length;do{if(C>=A)throw read$2.bytes=0,new RangeError("Could not decode varint");T=n[C++],x+=S<28?(T&REST$1)<<S:(T&REST$1)*Math.pow(2,S),S+=7}while(T>=MSB$1);return read$2.bytes=C-E,x}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(n){return n<N1?1:n<N2?2:n<N3?3:n<N4?4:n<N5?5:n<N6?6:n<N7?7:n<N8?8:n<N9?9:10},varint={encode:encode_1$2,decode:decode$9,encodingLength:length},_brrp_varint=varint;const encodeTo=(n,_,x=0)=>(_brrp_varint.encode(n,_,x),_),encodingLength=n=>_brrp_varint.encodingLength(n),create$3=(n,_)=>{const x=_.byteLength,E=encodingLength(n),S=E+encodingLength(x),C=new Uint8Array(S+x);return encodeTo(n,C,0),encodeTo(x,C,E),C.set(_,S),new Digest(n,x,_,C)};class Digest{constructor(_,x,E,S){this.code=_,this.size=x,this.digest=E,this.bytes=S}}const code$5=0,name$3="identity",encode$d=coerce,digest$1=n=>create$3(code$5,encode$d(n)),identity$4={code:code$5,name:name$3,encode:encode$d,digest:digest$1},from$1=({name:n,code:_,encode:x})=>new Hasher$1(n,_,x);let Hasher$1=class{constructor(_,x,E){this.name=_,this.code=x,this.encode=E}digest(_){if(_ instanceof Uint8Array){const x=this.encode(_);return x instanceof Uint8Array?create$3(this.code,x):x.then(E=>create$3(this.code,E))}else throw Error("Unknown type, must be binary type")}};const sha$1=n=>async _=>new Uint8Array(await crypto.subtle.digest(n,_)),sha256$6=from$1({name:"sha2-256",code:18,encode:sha$1("SHA-256")});function equals(n,_){if(n===_)return!0;if(n.byteLength!==_.byteLength)return!1;for(let x=0;x<n.byteLength;x++)if(n[x]!==_[x])return!1;return!0}var cryptoBrowserifyExports=requireCryptoBrowserify();const index=getDefaultExportFromCjs(cryptoBrowserifyExports),nodeCrypto=_mergeNamespaces({__proto__:null,default:index},[cryptoBrowserifyExports]);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_8n$1=BigInt(8),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE$1=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256$1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(_,x,E,S){this.x=_,this.y=x,this.z=E,this.t=S}static fromAffine(_){if(!(_ instanceof Point$2))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return _.equals(Point$2.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(_.x,_.y,_1n$1,mod$1(_.x*_.y))}static toAffineBatch(_){const x=invertBatch$1(_.map(E=>E.z));return _.map((E,S)=>E.toAffine(x[S]))}static normalizeZ(_){return this.toAffineBatch(_).map(this.fromAffine)}equals(_){assertExtPoint(_);const{x,y:E,z:S}=this,{x:C,y:T,z:A}=_,B=mod$1(x*A),I=mod$1(C*S),M=mod$1(E*A),O=mod$1(T*S);return B===I&&M===O}negate(){return new ExtendedPoint(mod$1(-this.x),this.y,this.z,mod$1(-this.t))}double(){const{x:_,y:x,z:E}=this,{a:S}=CURVE$1,C=mod$1(_*_),T=mod$1(x*x),A=mod$1(_2n$1*mod$1(E*E)),B=mod$1(S*C),I=_+x,M=mod$1(mod$1(I*I)-C-T),O=B+T,D=O-A,L=B-T,V=mod$1(M*D),U=mod$1(O*L),q=mod$1(M*L),H=mod$1(D*O);return new ExtendedPoint(V,U,H,q)}add(_){assertExtPoint(_);const{x,y:E,z:S,t:C}=this,{x:T,y:A,z:B,t:I}=_,M=mod$1((E-x)*(A+T)),O=mod$1((E+x)*(A-T)),D=mod$1(O-M);if(D===_0n$1)return this.double();const L=mod$1(S*_2n$1*I),V=mod$1(C*_2n$1*B),U=V+L,q=O+M,H=V-L,W=mod$1(U*D),Q=mod$1(q*H),re=mod$1(U*H),ce=mod$1(D*q);return new ExtendedPoint(W,Q,ce,re)}subtract(_){return this.add(_.negate())}precomputeWindow(_){const x=1+256/_,E=[];let S=this,C=S;for(let T=0;T<x;T++){C=S,E.push(C);for(let A=1;A<2**(_-1);A++)C=C.add(S),E.push(C);S=C.double()}return E}wNAF(_,x){!x&&this.equals(ExtendedPoint.BASE)&&(x=Point$2.BASE);const E=x&&x._WINDOW_SIZE||1;if(256%E)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let S=x&&pointPrecomputes$1.get(x);S||(S=this.precomputeWindow(E),x&&E!==1&&(S=ExtendedPoint.normalizeZ(S),pointPrecomputes$1.set(x,S)));let C=ExtendedPoint.ZERO,T=ExtendedPoint.BASE;const A=1+256/E,B=2**(E-1),I=BigInt(2**E-1),M=2**E,O=BigInt(E);for(let D=0;D<A;D++){const L=D*B;let V=Number(_&I);_>>=O,V>B&&(V-=M,_+=_1n$1);const U=L,q=L+Math.abs(V)-1,H=D%2!==0,W=V<0;V===0?T=T.add(constTimeNegate$1(H,S[U])):C=C.add(constTimeNegate$1(W,S[q]))}return ExtendedPoint.normalizeZ([C,T])[0]}multiply(_,x){return this.wNAF(normalizeScalar$1(_,CURVE$1.l),x)}multiplyUnsafe(_){let x=normalizeScalar$1(_,CURVE$1.l,!1);const E=ExtendedPoint.BASE,S=ExtendedPoint.ZERO;if(x===_0n$1)return S;if(this.equals(S)||x===_1n$1)return this;if(this.equals(E))return this.wNAF(x);let C=S,T=this;for(;x>_0n$1;)x&_1n$1&&(C=C.add(T)),T=T.double(),x>>=_1n$1;return C}isSmallOrder(){return this.multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){let _=this.multiplyUnsafe(CURVE$1.l/_2n$1).double();return CURVE$1.l%_2n$1&&(_=_.add(this)),_.equals(ExtendedPoint.ZERO)}toAffine(_){const{x,y:E,z:S}=this,C=this.equals(ExtendedPoint.ZERO);_==null&&(_=C?_8n$1:invert$1(S));const T=mod$1(x*_),A=mod$1(E*_),B=mod$1(S*_);if(C)return Point$2.ZERO;if(B!==_1n$1)throw new Error("invZ was invalid");return new Point$2(T,A)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}ExtendedPoint.BASE=new ExtendedPoint(CURVE$1.Gx,CURVE$1.Gy,_1n$1,mod$1(CURVE$1.Gx*CURVE$1.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n$1,_1n$1,_1n$1,_0n$1);function constTimeNegate$1(n,_){const x=_.negate();return n?x:_}function assertExtPoint(n){if(!(n instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(n){if(!(n instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(_){this.ep=_}static calcElligatorRistrettoMap(_){const{d:x}=CURVE$1,E=mod$1(SQRT_M1*_*_),S=mod$1((E+_1n$1)*ONE_MINUS_D_SQ);let C=BigInt(-1);const T=mod$1((C-x*E)*mod$1(E+x));let{isValid:A,value:B}=uvRatio(S,T),I=mod$1(B*_);edIsNegative(I)||(I=mod$1(-I)),A||(B=I),A||(C=E);const M=mod$1(C*(E-_1n$1)*D_MINUS_ONE_SQ-T),O=B*B,D=mod$1((B+B)*T),L=mod$1(M*SQRT_AD_MINUS_ONE),V=mod$1(_1n$1-O),U=mod$1(_1n$1+O);return new ExtendedPoint(mod$1(D*U),mod$1(V*L),mod$1(L*U),mod$1(D*V))}static hashToCurve(_){_=ensureBytes$1(_,64);const x=bytes255ToNumberLE(_.slice(0,32)),E=this.calcElligatorRistrettoMap(x),S=bytes255ToNumberLE(_.slice(32,64)),C=this.calcElligatorRistrettoMap(S);return new RistrettoPoint(E.add(C))}static fromHex(_){_=ensureBytes$1(_,32);const{a:x,d:E}=CURVE$1,S="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",C=bytes255ToNumberLE(_);if(!equalBytes(numberTo32BytesLE(C),_)||edIsNegative(C))throw new Error(S);const T=mod$1(C*C),A=mod$1(_1n$1+x*T),B=mod$1(_1n$1-x*T),I=mod$1(A*A),M=mod$1(B*B),O=mod$1(x*E*I-M),{isValid:D,value:L}=invertSqrt(mod$1(O*M)),V=mod$1(L*B),U=mod$1(L*V*O);let q=mod$1((C+C)*V);edIsNegative(q)&&(q=mod$1(-q));const H=mod$1(A*U),W=mod$1(q*H);if(!D||edIsNegative(W)||H===_0n$1)throw new Error(S);return new RistrettoPoint(new ExtendedPoint(q,H,_1n$1,W))}toRawBytes(){let{x:_,y:x,z:E,t:S}=this.ep;const C=mod$1(mod$1(E+x)*mod$1(E-x)),T=mod$1(_*x),A=mod$1(T*T),{value:B}=invertSqrt(mod$1(C*A)),I=mod$1(B*C),M=mod$1(B*T),O=mod$1(I*M*S);let D;if(edIsNegative(S*O)){let V=mod$1(x*SQRT_M1),U=mod$1(_*SQRT_M1);_=V,x=U,D=mod$1(I*INVSQRT_A_MINUS_D)}else D=M;edIsNegative(_*O)&&(x=mod$1(-x));let L=mod$1((E-x)*D);return edIsNegative(L)&&(L=mod$1(-L)),numberTo32BytesLE(L)}toHex(){return bytesToHex$2(this.toRawBytes())}toString(){return this.toHex()}equals(_){assertRstPoint(_);const x=this.ep,E=_.ep,S=mod$1(x.x*E.y)===mod$1(x.y*E.x),C=mod$1(x.y*E.y)===mod$1(x.x*E.x);return S||C}add(_){return assertRstPoint(_),new RistrettoPoint(this.ep.add(_.ep))}subtract(_){return assertRstPoint(_),new RistrettoPoint(this.ep.subtract(_.ep))}multiply(_){return new RistrettoPoint(this.ep.multiply(_))}multiplyUnsafe(_){return new RistrettoPoint(this.ep.multiplyUnsafe(_))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes$1=new WeakMap;let Point$2=class qs{constructor(_,x){this.x=_,this.y=x}_setWindowSize(_){this._WINDOW_SIZE=_,pointPrecomputes$1.delete(this)}static fromHex(_,x=!0){const{d:E,P:S}=CURVE$1;_=ensureBytes$1(_,32);const C=_.slice();C[31]=_[31]&-129;const T=bytesToNumberLE(C);if(x&&T>=S)throw new Error("Expected 0 < hex < P");if(!x&&T>=POW_2_256$1)throw new Error("Expected 0 < hex < 2**256");const A=mod$1(T*T),B=mod$1(A-_1n$1),I=mod$1(E*A+_1n$1);let{isValid:M,value:O}=uvRatio(B,I);if(!M)throw new Error("Point.fromHex: invalid y coordinate");const D=(O&_1n$1)===_1n$1;return(_[31]&128)!==0!==D&&(O=mod$1(-O)),new qs(O,T)}static async fromPrivateKey(_){return(await getExtendedPublicKey(_)).point}toRawBytes(){const _=numberTo32BytesLE(this.y);return _[31]|=this.x&_1n$1?128:0,_}toHex(){return bytesToHex$2(this.toRawBytes())}toX25519(){const{y:_}=this,x=mod$1((_1n$1+_)*invert$1(_1n$1-_));return numberTo32BytesLE(x)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(_){return this.x===_.x&&this.y===_.y}negate(){return new qs(mod$1(-this.x),this.y)}add(_){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(_)).toAffine()}subtract(_){return this.add(_.negate())}multiply(_){return ExtendedPoint.fromAffine(this).multiply(_,this).toAffine()}};Point$2.BASE=new Point$2(CURVE$1.Gx,CURVE$1.Gy);Point$2.ZERO=new Point$2(_0n$1,_1n$1);let Signature$2=class ul{constructor(_,x){this.r=_,this.s=x,this.assertValidity()}static fromHex(_){const x=ensureBytes$1(_,64),E=Point$2.fromHex(x.slice(0,32),!1),S=bytesToNumberLE(x.slice(32,64));return new ul(E,S)}assertValidity(){const{r:_,s:x}=this;if(!(_ instanceof Point$2))throw new Error("Expected Point instance");return normalizeScalar$1(x,CURVE$1.l,!1),this}toRawBytes(){const _=new Uint8Array(64);return _.set(this.r.toRawBytes()),_.set(numberTo32BytesLE(this.s),32),_}toHex(){return bytesToHex$2(this.toRawBytes())}};function concatBytes$1(...n){if(!n.every(E=>E instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(n.length===1)return n[0];const _=n.reduce((E,S)=>E+S.length,0),x=new Uint8Array(_);for(let E=0,S=0;E<n.length;E++){const C=n[E];x.set(C,S),S+=C.length}return x}const hexes$1=Array.from({length:256},(n,_)=>_.toString(16).padStart(2,"0"));function bytesToHex$2(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let _="";for(let x=0;x<n.length;x++)_+=hexes$1[n[x]];return _}function hexToBytes$2(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const _=new Uint8Array(n.length/2);for(let x=0;x<_.length;x++){const E=x*2,S=n.slice(E,E+2),C=Number.parseInt(S,16);if(Number.isNaN(C)||C<0)throw new Error("Invalid byte sequence");_[x]=C}return _}function numberTo32BytesBE(n){const x=n.toString(16).padStart(64,"0");return hexToBytes$2(x)}function numberTo32BytesLE(n){return numberTo32BytesBE(n).reverse()}function edIsNegative(n){return(mod$1(n)&_1n$1)===_1n$1}function bytesToNumberLE(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex$2(Uint8Array.from(n).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(n){return mod$1(bytesToNumberLE(n)&MAX_255B)}function mod$1(n,_=CURVE$1.P){const x=n%_;return x>=_0n$1?x:_+x}function invert$1(n,_=CURVE$1.P){if(n===_0n$1||_<=_0n$1)throw new Error(`invert: expected positive integers, got n=${n} mod=${_}`);let x=mod$1(n,_),E=_,S=_0n$1,C=_1n$1;for(;x!==_0n$1;){const A=E/x,B=E%x,I=S-C*A;E=x,x=B,S=C,C=I}if(E!==_1n$1)throw new Error("invert: does not exist");return mod$1(S,_)}function invertBatch$1(n,_=CURVE$1.P){const x=new Array(n.length),E=n.reduce((C,T,A)=>T===_0n$1?C:(x[A]=C,mod$1(C*T,_)),_1n$1),S=invert$1(E,_);return n.reduceRight((C,T,A)=>T===_0n$1?C:(x[A]=mod$1(C*x[A],_),mod$1(C*T,_)),S),x}function pow2$1(n,_){const{P:x}=CURVE$1;let E=n;for(;_-- >_0n$1;)E*=E,E%=x;return E}function pow_2_252_3(n){const{P:_}=CURVE$1,x=BigInt(5),E=BigInt(10),S=BigInt(20),C=BigInt(40),T=BigInt(80),B=n*n%_*n%_,I=pow2$1(B,_2n$1)*B%_,M=pow2$1(I,_1n$1)*n%_,O=pow2$1(M,x)*M%_,D=pow2$1(O,E)*O%_,L=pow2$1(D,S)*D%_,V=pow2$1(L,C)*L%_,U=pow2$1(V,T)*V%_,q=pow2$1(U,T)*V%_,H=pow2$1(q,E)*O%_;return{pow_p_5_8:pow2$1(H,_2n$1)*n%_,b2:B}}function uvRatio(n,_){const x=mod$1(_*_*_),E=mod$1(x*x*_),S=pow_2_252_3(n*E).pow_p_5_8;let C=mod$1(n*x*S);const T=mod$1(_*C*C),A=C,B=mod$1(C*SQRT_M1),I=T===n,M=T===mod$1(-n),O=T===mod$1(-n*SQRT_M1);return I&&(C=A),(M||O)&&(C=B),edIsNegative(C)&&(C=mod$1(-C)),{isValid:I||M,value:C}}function invertSqrt(n){return uvRatio(_1n$1,n)}function modlLE(n){return mod$1(bytesToNumberLE(n),CURVE$1.l)}function equalBytes(n,_){if(n.length!==_.length)return!1;for(let x=0;x<n.length;x++)if(n[x]!==_[x])return!1;return!0}function ensureBytes$1(n,_){const x=n instanceof Uint8Array?Uint8Array.from(n):hexToBytes$2(n);if(typeof _=="number"&&x.length!==_)throw new Error(`Expected ${_} bytes`);return x}function normalizeScalar$1(n,_,x=!0){if(!_)throw new TypeError("Specify max value");if(typeof n=="number"&&Number.isSafeInteger(n)&&(n=BigInt(n)),typeof n=="bigint"&&n<_){if(x){if(_0n$1<n)return n}else if(_0n$1<=n)return n}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function checkPrivateKey(n){if(n=typeof n=="bigint"||typeof n=="number"?numberTo32BytesBE(normalizeScalar$1(n,POW_2_256$1)):ensureBytes$1(n),n.length!==32)throw new Error("Expected 32 bytes");return n}function getKeyFromHash(n){const _=adjustBytes25519(n.slice(0,32)),x=n.slice(32,64),E=modlLE(_),S=Point$2.BASE.multiply(E),C=S.toRawBytes();return{head:_,prefix:x,scalar:E,point:S,pointBytes:C}}let _sha512Sync;async function getExtendedPublicKey(n){return getKeyFromHash(await utils$3.sha512(checkPrivateKey(n)))}async function getPublicKey$1(n){return(await getExtendedPublicKey(n)).pointBytes}async function sign$1(n,_){n=ensureBytes$1(n);const{prefix:x,scalar:E,pointBytes:S}=await getExtendedPublicKey(_),C=modlLE(await utils$3.sha512(x,n)),T=Point$2.BASE.multiply(C),A=modlLE(await utils$3.sha512(T.toRawBytes(),S,n)),B=mod$1(C+A*E,CURVE$1.l);return new Signature$2(T,B).toRawBytes()}function prepareVerification(n,_,x){_=ensureBytes$1(_),x instanceof Point$2||(x=Point$2.fromHex(x,!1));const{r:E,s:S}=n instanceof Signature$2?n.assertValidity():Signature$2.fromHex(n),C=ExtendedPoint.BASE.multiplyUnsafe(S);return{r:E,s:S,SB:C,pub:x,msg:_}}function finishVerification(n,_,x,E){const S=modlLE(E),C=ExtendedPoint.fromAffine(n).multiplyUnsafe(S);return ExtendedPoint.fromAffine(_).add(C).subtract(x).multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}async function verify$3(n,_,x){const{r:E,SB:S,msg:C,pub:T}=prepareVerification(n,_,x),A=await utils$3.sha512(E.toRawBytes(),T.toRawBytes(),C);return finishVerification(T,E,S,A)}Point$2.BASE._setWindowSize(8);const crypto$3={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$3={bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,concatBytes:concatBytes$1,getExtendedPublicKey,mod:mod$1,invert:invert$1,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:n=>{if(n=ensureBytes$1(n),n.length<40||n.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod$1(bytesToNumberLE(n),CURVE$1.l-_1n$1)+_1n$1},randomBytes:(n=32)=>{if(crypto$3.web)return crypto$3.web.getRandomValues(new Uint8Array(n));if(crypto$3.node){const{randomBytes:_}=crypto$3.node;return new Uint8Array(_(n).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$3.randomBytes(32),sha512:async(...n)=>{const _=concatBytes$1(...n);if(crypto$3.web){const x=await crypto$3.web.subtle.digest("SHA-512",_.buffer);return new Uint8Array(x)}else{if(crypto$3.node)return Uint8Array.from(crypto$3.node.createHash("sha512").update(_).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(n=8,_=Point$2.BASE){const x=_.equals(Point$2.BASE)?_:new Point$2(_.x,_.y);return x._setWindowSize(n),x.multiply(_2n$1),x},sha512Sync:void 0};Object.defineProperties(utils$3,{sha512Sync:{configurable:!1,get(){return _sha512Sync},set(n){_sha512Sync||(_sha512Sync=n)}}});const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;async function generateKey$2(){const n=utils$3.randomPrivateKey(),_=await getPublicKey$1(n);return{privateKey:concatKeys(n,_),publicKey:_}}async function generateKeyFromSeed(n){if(n.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(n instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const _=n,x=await getPublicKey$1(_);return{privateKey:concatKeys(_,x),publicKey:x}}async function hashAndSign$2(n,_){const x=n.subarray(0,KEYS_BYTE_LENGTH);return sign$1(_,x)}async function hashAndVerify$2(n,_,x){return verify$3(_,x,n)}function concatKeys(n,_){const x=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let E=0;E<KEYS_BYTE_LENGTH;E++)x[E]=n[E],x[KEYS_BYTE_LENGTH+E]=_[E];return x}const base64$5=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$2(n){const _=n?.algorithm??"AES-GCM";let x=n?.keyLength??16;const E=n?.nonceLength??12,S=n?.digest??"SHA-256",C=n?.saltLength??16,T=n?.iterations??32767,A=webcrypto.get();x*=8;async function B(O,D){const L=A.getRandomValues(new Uint8Array(C)),V=A.getRandomValues(new Uint8Array(E)),U={name:_,iv:V};typeof D=="string"&&(D=fromString$3(D));let q;if(D.length===0){q=await A.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const W={name:"PBKDF2",salt:L,iterations:T,hash:{name:S}},Q=await A.subtle.importKey("raw",D,{name:"PBKDF2"},!1,["deriveKey"]);q=await A.subtle.deriveKey(W,Q,{name:_,length:x},!0,["encrypt"])}catch{q=await A.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const W={name:"PBKDF2",salt:L,iterations:T,hash:{name:S}},Q=await A.subtle.importKey("raw",D,{name:"PBKDF2"},!1,["deriveKey"]);q=await A.subtle.deriveKey(W,Q,{name:_,length:x},!0,["encrypt"])}const H=await A.subtle.encrypt(U,q,O);return concat$5([L,U.iv,new Uint8Array(H)])}async function I(O,D){const L=O.subarray(0,C),V=O.subarray(C,C+E),U=O.subarray(C+E),q={name:_,iv:V};typeof D=="string"&&(D=fromString$3(D));let H;if(D.length===0)try{const Q={name:"PBKDF2",salt:L,iterations:T,hash:{name:S}},re=await A.subtle.importKey("raw",D,{name:"PBKDF2"},!1,["deriveKey"]);H=await A.subtle.deriveKey(Q,re,{name:_,length:x},!0,["decrypt"])}catch{H=await A.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const Q={name:"PBKDF2",salt:L,iterations:T,hash:{name:S}},re=await A.subtle.importKey("raw",D,{name:"PBKDF2"},!1,["deriveKey"]);H=await A.subtle.deriveKey(Q,re,{name:_,length:x},!0,["decrypt"])}const W=await A.subtle.decrypt(q,H,U);return new Uint8Array(W)}return{encrypt:B,decrypt:I}}async function exporter(n,_){const E=await create$2().encrypt(n,_);return base64$5.encode(E)}var minimal={},aspromise=asPromise;function asPromise(n,_){for(var x=new Array(arguments.length-1),E=0,S=2,C=!0;S<arguments.length;)x[E++]=arguments[S++];return new Promise(function(A,B){x[E]=function(M){if(C)if(C=!1,M)B(M);else{for(var O=new Array(arguments.length-1),D=0;D<O.length;)O[D++]=arguments[D];A.apply(null,O)}};try{n.apply(_||null,x)}catch(I){C&&(C=!1,B(I))}})}var base64$4={};(function(n){var _=n;_.length=function(A){var B=A.length;if(!B)return 0;for(var I=0;--B%4>1&&A.charAt(B)==="=";)++I;return Math.ceil(A.length*3)/4-I};for(var x=new Array(64),E=new Array(123),S=0;S<64;)E[x[S]=S<26?S+65:S<52?S+71:S<62?S-4:S-59|43]=S++;_.encode=function(A,B,I){for(var M=null,O=[],D=0,L=0,V;B<I;){var U=A[B++];switch(L){case 0:O[D++]=x[U>>2],V=(U&3)<<4,L=1;break;case 1:O[D++]=x[V|U>>4],V=(U&15)<<2,L=2;break;case 2:O[D++]=x[V|U>>6],O[D++]=x[U&63],L=0;break}D>8191&&((M||(M=[])).push(String.fromCharCode.apply(String,O)),D=0)}return L&&(O[D++]=x[V],O[D++]=61,L===1&&(O[D++]=61)),M?(D&&M.push(String.fromCharCode.apply(String,O.slice(0,D))),M.join("")):String.fromCharCode.apply(String,O.slice(0,D))};var C="invalid encoding";_.decode=function(A,B,I){for(var M=I,O=0,D,L=0;L<A.length;){var V=A.charCodeAt(L++);if(V===61&&O>1)break;if((V=E[V])===void 0)throw Error(C);switch(O){case 0:D=V,O=1;break;case 1:B[I++]=D<<2|(V&48)>>4,D=V,O=2;break;case 2:B[I++]=(D&15)<<4|(V&60)>>2,D=V,O=3;break;case 3:B[I++]=(D&3)<<6|V,O=0;break}}if(O===1)throw Error(C);return I-M},_.test=function(A){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(A)}})(base64$4);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(_,x,E){return(this._listeners[_]||(this._listeners[_]=[])).push({fn:x,ctx:E||this}),this};EventEmitter.prototype.off=function(_,x){if(_===void 0)this._listeners={};else if(x===void 0)this._listeners[_]=[];else for(var E=this._listeners[_],S=0;S<E.length;)E[S].fn===x?E.splice(S,1):++S;return this};EventEmitter.prototype.emit=function(_){var x=this._listeners[_];if(x){for(var E=[],S=1;S<arguments.length;)E.push(arguments[S++]);for(S=0;S<x.length;)x[S].fn.apply(x[S++].ctx,E)}return this};var float=factory(factory);function factory(n){return typeof Float32Array<"u"?function(){var _=new Float32Array([-0]),x=new Uint8Array(_.buffer),E=x[3]===128;function S(B,I,M){_[0]=B,I[M]=x[0],I[M+1]=x[1],I[M+2]=x[2],I[M+3]=x[3]}function C(B,I,M){_[0]=B,I[M]=x[3],I[M+1]=x[2],I[M+2]=x[1],I[M+3]=x[0]}n.writeFloatLE=E?S:C,n.writeFloatBE=E?C:S;function T(B,I){return x[0]=B[I],x[1]=B[I+1],x[2]=B[I+2],x[3]=B[I+3],_[0]}function A(B,I){return x[3]=B[I],x[2]=B[I+1],x[1]=B[I+2],x[0]=B[I+3],_[0]}n.readFloatLE=E?T:A,n.readFloatBE=E?A:T}():function(){function _(E,S,C,T){var A=S<0?1:0;if(A&&(S=-S),S===0)E(1/S>0?0:2147483648,C,T);else if(isNaN(S))E(2143289344,C,T);else if(S>34028234663852886e22)E((A<<31|2139095040)>>>0,C,T);else if(S<11754943508222875e-54)E((A<<31|Math.round(S/1401298464324817e-60))>>>0,C,T);else{var B=Math.floor(Math.log(S)/Math.LN2),I=Math.round(S*Math.pow(2,-B)*8388608)&8388607;E((A<<31|B+127<<23|I)>>>0,C,T)}}n.writeFloatLE=_.bind(null,writeUintLE$1),n.writeFloatBE=_.bind(null,writeUintBE$1);function x(E,S,C){var T=E(S,C),A=(T>>31)*2+1,B=T>>>23&255,I=T&8388607;return B===255?I?NaN:A*(1/0):B===0?A*1401298464324817e-60*I:A*Math.pow(2,B-150)*(I+8388608)}n.readFloatLE=x.bind(null,readUintLE$1),n.readFloatBE=x.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var _=new Float64Array([-0]),x=new Uint8Array(_.buffer),E=x[7]===128;function S(B,I,M){_[0]=B,I[M]=x[0],I[M+1]=x[1],I[M+2]=x[2],I[M+3]=x[3],I[M+4]=x[4],I[M+5]=x[5],I[M+6]=x[6],I[M+7]=x[7]}function C(B,I,M){_[0]=B,I[M]=x[7],I[M+1]=x[6],I[M+2]=x[5],I[M+3]=x[4],I[M+4]=x[3],I[M+5]=x[2],I[M+6]=x[1],I[M+7]=x[0]}n.writeDoubleLE=E?S:C,n.writeDoubleBE=E?C:S;function T(B,I){return x[0]=B[I],x[1]=B[I+1],x[2]=B[I+2],x[3]=B[I+3],x[4]=B[I+4],x[5]=B[I+5],x[6]=B[I+6],x[7]=B[I+7],_[0]}function A(B,I){return x[7]=B[I],x[6]=B[I+1],x[5]=B[I+2],x[4]=B[I+3],x[3]=B[I+4],x[2]=B[I+5],x[1]=B[I+6],x[0]=B[I+7],_[0]}n.readDoubleLE=E?T:A,n.readDoubleBE=E?A:T}():function(){function _(E,S,C,T,A,B){var I=T<0?1:0;if(I&&(T=-T),T===0)E(0,A,B+S),E(1/T>0?0:2147483648,A,B+C);else if(isNaN(T))E(0,A,B+S),E(2146959360,A,B+C);else if(T>17976931348623157e292)E(0,A,B+S),E((I<<31|2146435072)>>>0,A,B+C);else{var M;if(T<22250738585072014e-324)M=T/5e-324,E(M>>>0,A,B+S),E((I<<31|M/4294967296)>>>0,A,B+C);else{var O=Math.floor(Math.log(T)/Math.LN2);O===1024&&(O=1023),M=T*Math.pow(2,-O),E(M*4503599627370496>>>0,A,B+S),E((I<<31|O+1023<<20|M*1048576&1048575)>>>0,A,B+C)}}}n.writeDoubleLE=_.bind(null,writeUintLE$1,0,4),n.writeDoubleBE=_.bind(null,writeUintBE$1,4,0);function x(E,S,C,T,A){var B=E(T,A+S),I=E(T,A+C),M=(I>>31)*2+1,O=I>>>20&2047,D=4294967296*(I&1048575)+B;return O===2047?D?NaN:M*(1/0):O===0?M*5e-324*D:M*Math.pow(2,O-1075)*(D+4503599627370496)}n.readDoubleLE=x.bind(null,readUintLE$1,0,4),n.readDoubleBE=x.bind(null,readUintBE$1,4,0)}(),n}function writeUintLE$1(n,_,x){_[x]=n&255,_[x+1]=n>>>8&255,_[x+2]=n>>>16&255,_[x+3]=n>>>24}function writeUintBE$1(n,_,x){_[x]=n>>>24,_[x+1]=n>>>16&255,_[x+2]=n>>>8&255,_[x+3]=n&255}function readUintLE$1(n,_){return(n[_]|n[_+1]<<8|n[_+2]<<16|n[_+3]<<24)>>>0}function readUintBE$1(n,_){return(n[_]<<24|n[_+1]<<16|n[_+2]<<8|n[_+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}var utf8$5={};(function(n){var _=n;_.length=function(E){for(var S=0,C=0,T=0;T<E.length;++T)C=E.charCodeAt(T),C<128?S+=1:C<2048?S+=2:(C&64512)===55296&&(E.charCodeAt(T+1)&64512)===56320?(++T,S+=4):S+=3;return S},_.read=function(E,S,C){var T=C-S;if(T<1)return"";for(var A=null,B=[],I=0,M;S<C;)M=E[S++],M<128?B[I++]=M:M>191&&M<224?B[I++]=(M&31)<<6|E[S++]&63:M>239&&M<365?(M=((M&7)<<18|(E[S++]&63)<<12|(E[S++]&63)<<6|E[S++]&63)-65536,B[I++]=55296+(M>>10),B[I++]=56320+(M&1023)):B[I++]=(M&15)<<12|(E[S++]&63)<<6|E[S++]&63,I>8191&&((A||(A=[])).push(String.fromCharCode.apply(String,B)),I=0);return A?(I&&A.push(String.fromCharCode.apply(String,B.slice(0,I))),A.join("")):String.fromCharCode.apply(String,B.slice(0,I))},_.write=function(E,S,C){for(var T=C,A,B,I=0;I<E.length;++I)A=E.charCodeAt(I),A<128?S[C++]=A:A<2048?(S[C++]=A>>6|192,S[C++]=A&63|128):(A&64512)===55296&&((B=E.charCodeAt(I+1))&64512)===56320?(A=65536+((A&1023)<<10)+(B&1023),++I,S[C++]=A>>18|240,S[C++]=A>>12&63|128,S[C++]=A>>6&63|128,S[C++]=A&63|128):(S[C++]=A>>12|224,S[C++]=A>>6&63|128,S[C++]=A&63|128);return C-T}})(utf8$5);var pool_1=pool;function pool(n,_,x){var E=x||8192,S=E>>>1,C=null,T=E;return function(B){if(B<1||B>S)return n(B);T+B>E&&(C=n(E),T=0);var I=_.call(C,T,T+=B);return T&7&&(T=(T|7)+1),I}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=_;var n=requireMinimal();function _(C,T){this.lo=C>>>0,this.hi=T>>>0}var x=_.zero=new _(0,0);x.toNumber=function(){return 0},x.zzEncode=x.zzDecode=function(){return this},x.length=function(){return 1};var E=_.zeroHash="\0\0\0\0\0\0\0\0";_.fromNumber=function(T){if(T===0)return x;var A=T<0;A&&(T=-T);var B=T>>>0,I=(T-B)/4294967296>>>0;return A&&(I=~I>>>0,B=~B>>>0,++B>4294967295&&(B=0,++I>4294967295&&(I=0))),new _(B,I)},_.from=function(T){if(typeof T=="number")return _.fromNumber(T);if(n.isString(T))if(n.Long)T=n.Long.fromString(T);else return _.fromNumber(parseInt(T,10));return T.low||T.high?new _(T.low>>>0,T.high>>>0):x},_.prototype.toNumber=function(T){if(!T&&this.hi>>>31){var A=~this.lo+1>>>0,B=~this.hi>>>0;return A||(B=B+1>>>0),-(A+B*4294967296)}return this.lo+this.hi*4294967296},_.prototype.toLong=function(T){return n.Long?new n.Long(this.lo|0,this.hi|0,!!T):{low:this.lo|0,high:this.hi|0,unsigned:!!T}};var S=String.prototype.charCodeAt;return _.fromHash=function(T){return T===E?x:new _((S.call(T,0)|S.call(T,1)<<8|S.call(T,2)<<16|S.call(T,3)<<24)>>>0,(S.call(T,4)|S.call(T,5)<<8|S.call(T,6)<<16|S.call(T,7)<<24)>>>0)},_.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},_.prototype.zzEncode=function(){var T=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^T)>>>0,this.lo=(this.lo<<1^T)>>>0,this},_.prototype.zzDecode=function(){var T=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^T)>>>0,this.hi=(this.hi>>>1^T)>>>0,this},_.prototype.length=function(){var T=this.lo,A=(this.lo>>>28|this.hi<<4)>>>0,B=this.hi>>>24;return B===0?A===0?T<16384?T<128?1:2:T<2097152?3:4:A<16384?A<128?5:6:A<2097152?7:8:B<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(n){var _=n;_.asPromise=aspromise,_.base64=base64$4,_.EventEmitter=eventemitter,_.float=float,_.inquire=inquire_1,_.utf8=utf8$5,_.pool=pool_1,_.LongBits=requireLongbits(),_.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),_.global=_.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,_.emptyArray=Object.freeze?Object.freeze([]):[],_.emptyObject=Object.freeze?Object.freeze({}):{},_.isInteger=Number.isInteger||function(C){return typeof C=="number"&&isFinite(C)&&Math.floor(C)===C},_.isString=function(C){return typeof C=="string"||C instanceof String},_.isObject=function(C){return C&&typeof C=="object"},_.isset=_.isSet=function(C,T){var A=C[T];return A!=null&&C.hasOwnProperty(T)?typeof A!="object"||(Array.isArray(A)?A.length:Object.keys(A).length)>0:!1},_.Buffer=function(){try{var S=_.inquire("buffer").Buffer;return S.prototype.utf8Write?S:null}catch{return null}}(),_._Buffer_from=null,_._Buffer_allocUnsafe=null,_.newBuffer=function(C){return typeof C=="number"?_.Buffer?_._Buffer_allocUnsafe(C):new _.Array(C):_.Buffer?_._Buffer_from(C):typeof Uint8Array>"u"?C:new Uint8Array(C)},_.Array=typeof Uint8Array<"u"?Uint8Array:Array,_.Long=_.global.dcodeIO&&_.global.dcodeIO.Long||_.global.Long||_.inquire("long"),_.key2Re=/^true|false|0|1$/,_.key32Re=/^-?(?:0|[1-9][0-9]*)$/,_.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,_.longToHash=function(C){return C?_.LongBits.from(C).toHash():_.LongBits.zeroHash},_.longFromHash=function(C,T){var A=_.LongBits.fromHash(C);return _.Long?_.Long.fromBits(A.lo,A.hi,T):A.toNumber(!!T)};function x(S,C,T){for(var A=Object.keys(C),B=0;B<A.length;++B)(S[A[B]]===void 0||!T)&&(S[A[B]]=C[A[B]]);return S}_.merge=x,_.lcFirst=function(C){return C.charAt(0).toLowerCase()+C.substring(1)};function E(S){function C(T,A){if(!(this instanceof C))return new C(T,A);Object.defineProperty(this,"message",{get:function(){return T}}),Error.captureStackTrace?Error.captureStackTrace(this,C):Object.defineProperty(this,"stack",{value:new Error().stack||""}),A&&x(this,A)}return C.prototype=Object.create(Error.prototype,{constructor:{value:C,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return S},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),C}_.newError=E,_.ProtocolError=E("ProtocolError"),_.oneOfGetter=function(C){for(var T={},A=0;A<C.length;++A)T[C[A]]=1;return function(){for(var B=Object.keys(this),I=B.length-1;I>-1;--I)if(T[B[I]]===1&&this[B[I]]!==void 0&&this[B[I]]!==null)return B[I]}},_.oneOfSetter=function(C){return function(T){for(var A=0;A<C.length;++A)C[A]!==T&&delete this[C[A]]}},_.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},_._configure=function(){var S=_.Buffer;if(!S){_._Buffer_from=_._Buffer_allocUnsafe=null;return}_._Buffer_from=S.from!==Uint8Array.from&&S.from||function(T,A){return new S(T,A)},_._Buffer_allocUnsafe=S.allocUnsafe||function(T){return new S(T)}}}(minimal)),minimal}var reader$1=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$4=util$5.utf8;function indexOutOfRange(n,_){return RangeError("index out of range: "+n.pos+" + "+(_||1)+" > "+n.len)}function Reader$1(n){this.buf=n,this.pos=0,this.len=n.length}var create_array=typeof Uint8Array<"u"?function n(_){if(_ instanceof Uint8Array||Array.isArray(_))return new Reader$1(_);throw Error("illegal buffer")}:function n(_){if(Array.isArray(_))return new Reader$1(_);throw Error("illegal buffer")},create$1=function n(){return util$5.Buffer?function(x){return(Reader$1.create=function(S){return util$5.Buffer.isBuffer(S)?new BufferReader$1(S):create_array(S)})(x)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function n(){var _=4294967295;return function(){if(_=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_=(_|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return _}}();Reader$1.prototype.int32=function n(){return this.uint32()|0};Reader$1.prototype.sint32=function n(){var _=this.uint32();return _>>>1^-(_&1)|0};function readLongVarint(){var n=new LongBits$1(0,0),_=0;if(this.len-this.pos>4){for(;_<4;++_)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;_=0}else{for(;_<3;++_){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<_*7)>>>0,n}if(this.len-this.pos>4){for(;_<5;++_)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;_<5;++_){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function n(){return this.uint32()!==0};function readFixed32_end(n,_){return(n[_-4]|n[_-3]<<8|n[_-2]<<16|n[_-1]<<24)>>>0}Reader$1.prototype.fixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var _=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_};Reader$1.prototype.double=function n(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var _=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_};Reader$1.prototype.bytes=function n(){var _=this.uint32(),x=this.pos,E=this.pos+_;if(E>this.len)throw indexOutOfRange(this,_);if(this.pos+=_,Array.isArray(this.buf))return this.buf.slice(x,E);if(x===E){var S=util$5.Buffer;return S?S.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,x,E)};Reader$1.prototype.string=function n(){var _=this.bytes();return utf8$4.read(_,0,_.length)};Reader$1.prototype.skip=function n(_){if(typeof _=="number"){if(this.pos+_>this.len)throw indexOutOfRange(this,_);this.pos+=_}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};Reader$1._configure=function(n){BufferReader$1=n,Reader$1.create=create$1(),BufferReader$1._configure();var _=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[_](!1)},uint64:function(){return readLongVarint.call(this)[_](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[_](!1)},fixed64:function(){return readFixed64.call(this)[_](!0)},sfixed64:function(){return readFixed64.call(this)[_](!1)}})};const ReaderClass=getDefaultExportFromCjs(reader$1);var reader_buffer=BufferReader,Reader=reader$1;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(n){Reader.call(this,n)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function n(){var _=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+_,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+_,this.len))};BufferReader._configure();const ReaderBufferClass=getDefaultExportFromCjs(reader_buffer);var minimalExports=requireMinimal();const util$3=getDefaultExportFromCjs(minimalExports);var writer$1=Writer$1,util$2=requireMinimal(),BufferWriter$1,LongBits=util$2.LongBits,base64$3=util$2.base64,utf8$3=util$2.utf8;function Op(n,_,x){this.fn=n,this.len=_,this.next=void 0,this.val=x}function noop$2(){}function State(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create=function n(){return util$2.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create();Writer$1.alloc=function n(_){return new util$2.Array(_)};util$2.Array!==Array&&(Writer$1.alloc=util$2.pool(Writer$1.alloc,util$2.Array.prototype.subarray));Writer$1.prototype._push=function n(_,x,E){return this.tail=this.tail.next=new Op(_,x,E),this.len+=x,this};function writeByte(n,_,x){_[x]=n&255}function writeVarint32(n,_,x){for(;n>127;)_[x++]=n&127|128,n>>>=7;_[x]=n}function VarintOp(n,_){this.len=n,this.next=void 0,this.val=_}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function n(_){return this.len+=(this.tail=this.tail.next=new VarintOp((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this};Writer$1.prototype.int32=function n(_){return _<0?this._push(writeVarint64,10,LongBits.fromNumber(_)):this.uint32(_)};Writer$1.prototype.sint32=function n(_){return this.uint32((_<<1^_>>31)>>>0)};function writeVarint64(n,_,x){for(;n.hi;)_[x++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)_[x++]=n.lo&127|128,n.lo=n.lo>>>7;_[x++]=n.lo}Writer$1.prototype.uint64=function n(_){var x=LongBits.from(_);return this._push(writeVarint64,x.length(),x)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function n(_){var x=LongBits.from(_).zzEncode();return this._push(writeVarint64,x.length(),x)};Writer$1.prototype.bool=function n(_){return this._push(writeByte,1,_?1:0)};function writeFixed32(n,_,x){_[x]=n&255,_[x+1]=n>>>8&255,_[x+2]=n>>>16&255,_[x+3]=n>>>24}Writer$1.prototype.fixed32=function n(_){return this._push(writeFixed32,4,_>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function n(_){var x=LongBits.from(_);return this._push(writeFixed32,4,x.lo)._push(writeFixed32,4,x.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function n(_){return this._push(util$2.float.writeFloatLE,4,_)};Writer$1.prototype.double=function n(_){return this._push(util$2.float.writeDoubleLE,8,_)};var writeBytes=util$2.Array.prototype.set?function n(_,x,E){x.set(_,E)}:function n(_,x,E){for(var S=0;S<_.length;++S)x[E+S]=_[S]};Writer$1.prototype.bytes=function n(_){var x=_.length>>>0;if(!x)return this._push(writeByte,1,0);if(util$2.isString(_)){var E=Writer$1.alloc(x=base64$3.length(_));base64$3.decode(_,E,0),_=E}return this.uint32(x)._push(writeBytes,x,_)};Writer$1.prototype.string=function n(_){var x=utf8$3.length(_);return x?this.uint32(x)._push(utf8$3.write,x,_):this._push(writeByte,1,0)};Writer$1.prototype.fork=function n(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function n(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function n(){var _=this.head,x=this.tail,E=this.len;return this.reset().uint32(E),E&&(this.tail.next=_.next,this.tail=x,this.len+=E),this};Writer$1.prototype.finish=function n(){for(var _=this.head.next,x=this.constructor.alloc(this.len),E=0;_;)_.fn(_.val,x,E),E+=_.len,_=_.next;return x};Writer$1._configure=function(n){BufferWriter$1=n,Writer$1.create=create(),BufferWriter$1._configure()};const WriterClass=getDefaultExportFromCjs(writer$1);var writer_buffer=BufferWriter,Writer=writer$1;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$1=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$1._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$1.Buffer&&util$1.Buffer.prototype instanceof Uint8Array&&util$1.Buffer.prototype.set.name==="set"?function(_,x,E){x.set(_,E)}:function(_,x,E){if(_.copy)_.copy(x,E,0,_.length);else for(var S=0;S<_.length;)x[E++]=_[S++]}};BufferWriter.prototype.bytes=function n(_){util$1.isString(_)&&(_=util$1._Buffer_from(_,"base64"));var x=_.length>>>0;return this.uint32(x),x&&this._push(BufferWriter.writeBytesBuffer,x,_),this};function writeStringBuffer(n,_,x){n.length<40?util$1.utf8.write(n,_,x):_.utf8Write?_.utf8Write(n,x):_.write(n,x)}BufferWriter.prototype.string=function n(_){var x=util$1.Buffer.byteLength(_);return this.uint32(x),x&&this._push(writeStringBuffer,x,_),this};BufferWriter._configure();const WriterBufferClass=getDefaultExportFromCjs(writer_buffer);function configure(){util$3._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(n){for(const _ of methods){if(n[_]==null)continue;const x=n[_];n[_]=function(){return BigInt(x.call(this).toString())}}return n}function reader(n){return patchReader(new ReaderClass(n))}function patchWriter(n){for(const _ of methods){if(n[_]==null)continue;const x=n[_];n[_]=function(E){return x.call(this,E.toString())}}return n}function writer(){return patchWriter(WriterClass.create())}function decodeMessage(n,_){const x=reader(n instanceof Uint8Array?n:n.subarray());return _.decode(x)}function encodeMessage(n,_){const x=writer();return _.encode(n,x,{lengthDelimited:!1}),x.finish()}var CODEC_TYPES;(function(n){n[n.VARINT=0]="VARINT",n[n.BIT64=1]="BIT64",n[n.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",n[n.START_GROUP=3]="START_GROUP",n[n.END_GROUP=4]="END_GROUP",n[n.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$3(n,_,x,E){return{name:n,type:_,encode:x,decode:E}}function enumeration(n){function _(S){if(n[S.toString()]==null)throw new Error("Invalid enum value");return n[S]}const x=function(C,T){const A=_(C);T.int32(A)},E=function(C){const T=C.int32();return _(T)};return createCodec$3("enum",CODEC_TYPES.VARINT,x,E)}function message(n,_){return createCodec$3("message",CODEC_TYPES.LENGTH_DELIMITED,n,_)}var KeyType$1;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues)})(KeyType$1||(KeyType$1={}));var PublicKey;(function(n){let _;n.codec=()=>(_==null&&(_=message((x,E,S={})=>{S.lengthDelimited!==!1&&E.fork(),x.Type!=null&&(E.uint32(8),KeyType$1.codec().encode(x.Type,E)),x.Data!=null&&(E.uint32(18),E.bytes(x.Data)),S.lengthDelimited!==!1&&E.ldelim()},(x,E)=>{const S={},C=E==null?x.len:x.pos+E;for(;x.pos<C;){const T=x.uint32();switch(T>>>3){case 1:S.Type=KeyType$1.codec().decode(x);break;case 2:S.Data=x.bytes();break;default:x.skipType(T&7);break}}return S})),_),n.encode=x=>encodeMessage(x,n.codec()),n.decode=x=>decodeMessage(x,n.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(n){let _;n.codec=()=>(_==null&&(_=message((x,E,S={})=>{S.lengthDelimited!==!1&&E.fork(),x.Type!=null&&(E.uint32(8),KeyType$1.codec().encode(x.Type,E)),x.Data!=null&&(E.uint32(18),E.bytes(x.Data)),S.lengthDelimited!==!1&&E.ldelim()},(x,E)=>{const S={},C=E==null?x.len:x.pos+E;for(;x.pos<C;){const T=x.uint32();switch(T>>>3){case 1:S.Type=KeyType$1.codec().decode(x);break;case 2:S.Data=x.bytes();break;default:x.skipType(T&7);break}}return S})),_),n.encode=x=>encodeMessage(x,n.codec()),n.decode=x=>decodeMessage(x,n.codec())})(PrivateKey||(PrivateKey={}));class Ed25519PublicKey{constructor(_){$t(this,"_key");this._key=ensureKey(_,PUBLIC_KEY_BYTE_LENGTH)}async verify(_,x){return hashAndVerify$2(this._key,x,_)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}}class Ed25519PrivateKey{constructor(_,x){$t(this,"_key");$t(this,"_publicKey");this._key=ensureKey(_,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(x,PUBLIC_KEY_BYTE_LENGTH)}async sign(_){return hashAndSign$2(this._key,_)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}async id(){const _=identity$4.digest(this.public.bytes);return base58btc.encode(_.bytes).substring(1)}async export(_,x="libp2p-key"){if(x==="libp2p-key")return exporter(this.bytes,_);throw new CodeError(`export format '${x}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(n){if(n.length>PRIVATE_KEY_BYTE_LENGTH){n=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const E=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),S=n.subarray(PRIVATE_KEY_BYTE_LENGTH,n.length);return new Ed25519PrivateKey(E,S)}n=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH);const _=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),x=n.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(_,x)}function unmarshalEd25519PublicKey(n){return n=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(n)}async function generateKeyPair$3(){const{privateKey:n,publicKey:_}=await generateKey$2();return new Ed25519PrivateKey(n,_)}async function generateKeyPairFromSeed(n){const{privateKey:_,publicKey:x}=await generateKeyFromSeed(n);return new Ed25519PrivateKey(_,x)}function ensureKey(n,_){if(n=Uint8Array.from(n??[]),n.length!==_)throw new CodeError(`Key must be a Uint8Array of length ${_}, got ${n.length}`,"ERR_INVALID_KEY_TYPE");return n}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$3,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"}));function bigIntegerToUintBase64url(n,_){let x=Uint8Array.from(n.abs().toByteArray());if(x=x[0]===0?x.subarray(1):x,_!=null){if(x.length>_)throw new Error("byte array longer than desired length");x=concat$5([new Uint8Array(_-x.length),x])}return toString$7(x,"base64url")}function base64urlToBigInteger(n){const _=base64urlToBuffer(n);return new forge$n.jsbn.BigInteger(toString$7(_,"base16"),16)}function base64urlToBuffer(n,_){let x=fromString$3(n,"base64urlpad");if(_!=null){if(x.length>_)throw new Error("byte array longer than desired length");x=concat$5([new Uint8Array(_-x.length),x])}return x}const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");async function importer(n,_){const x=base64$5.decode(n);return create$2().decrypt(x,_)}var forge=forge$m,sha512$1=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512$1;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512$1.create=function(n){if(_initialized||_init(),typeof n>"u"&&(n="SHA-512"),!(n in _states))throw new Error("Invalid SHA-512 algorithm: "+n);for(var _=_states[n],x=null,E=forge.util.createBuffer(),S=new Array(80),C=0;C<80;++C)S[C]=new Array(2);var T=64;switch(n){case"SHA-384":T=48;break;case"SHA-512/256":T=32;break;case"SHA-512/224":T=28;break}var A={algorithm:n.replace("-","").toLowerCase(),blockLength:128,digestLength:T,messageLength:0,fullMessageLength:null,messageLengthSize:16};return A.start=function(){A.messageLength=0,A.fullMessageLength=A.messageLength128=[];for(var B=A.messageLengthSize/4,I=0;I<B;++I)A.fullMessageLength.push(0);E=forge.util.createBuffer(),x=new Array(_.length);for(var I=0;I<_.length;++I)x[I]=_[I].slice(0);return A},A.start(),A.update=function(B,I){I==="utf8"&&(B=forge.util.encodeUtf8(B));var M=B.length;A.messageLength+=M,M=[M/4294967296>>>0,M>>>0];for(var O=A.fullMessageLength.length-1;O>=0;--O)A.fullMessageLength[O]+=M[1],M[1]=M[0]+(A.fullMessageLength[O]/4294967296>>>0),A.fullMessageLength[O]=A.fullMessageLength[O]>>>0,M[0]=M[1]/4294967296>>>0;return E.putBytes(B),_update(x,S,E),(E.read>2048||E.length()===0)&&E.compact(),A},A.digest=function(){var B=forge.util.createBuffer();B.putBytes(E.bytes());var I=A.fullMessageLength[A.fullMessageLength.length-1]+A.messageLengthSize,M=I&A.blockLength-1;B.putBytes(_padding.substr(0,A.blockLength-M));for(var O,D,L=A.fullMessageLength[0]*8,V=0;V<A.fullMessageLength.length-1;++V)O=A.fullMessageLength[V+1]*8,D=O/4294967296>>>0,L+=D,B.putInt32(L>>>0),L=O>>>0;B.putInt32(L);for(var U=new Array(x.length),V=0;V<x.length;++V)U[V]=x[V].slice(0);_update(U,S,B);var q=forge.util.createBuffer(),H;n==="SHA-512"?H=U.length:n==="SHA-384"?H=U.length-2:H=U.length-4;for(var V=0;V<H;++V)q.putInt32(U[V][0]),(V!==H-1||n!=="SHA-512/224")&&q.putInt32(U[V][1]);return q},A};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(n,_,x){for(var E,S,C,T,A,B,I,M,O,D,L,V,U,q,H,W,Q,re,ce,ne,Y,fe,ge,$e,_e,ae,X,F,z,J,te,se,oe,ie,G,j=x.length();j>=128;){for(z=0;z<16;++z)_[z][0]=x.getInt32()>>>0,_[z][1]=x.getInt32()>>>0;for(;z<80;++z)se=_[z-2],J=se[0],te=se[1],E=((J>>>19|te<<13)^(te>>>29|J<<3)^J>>>6)>>>0,S=((J<<13|te>>>19)^(te<<3|J>>>29)^(J<<26|te>>>6))>>>0,ie=_[z-15],J=ie[0],te=ie[1],C=((J>>>1|te<<31)^(J>>>8|te<<24)^J>>>7)>>>0,T=((J<<31|te>>>1)^(J<<24|te>>>8)^(J<<25|te>>>7))>>>0,oe=_[z-7],G=_[z-16],te=S+oe[1]+T+G[1],_[z][0]=E+oe[0]+C+G[0]+(te/4294967296>>>0)>>>0,_[z][1]=te>>>0;for(U=n[0][0],q=n[0][1],H=n[1][0],W=n[1][1],Q=n[2][0],re=n[2][1],ce=n[3][0],ne=n[3][1],Y=n[4][0],fe=n[4][1],ge=n[5][0],$e=n[5][1],_e=n[6][0],ae=n[6][1],X=n[7][0],F=n[7][1],z=0;z<80;++z)I=((Y>>>14|fe<<18)^(Y>>>18|fe<<14)^(fe>>>9|Y<<23))>>>0,M=((Y<<18|fe>>>14)^(Y<<14|fe>>>18)^(fe<<23|Y>>>9))>>>0,O=(_e^Y&(ge^_e))>>>0,D=(ae^fe&($e^ae))>>>0,A=((U>>>28|q<<4)^(q>>>2|U<<30)^(q>>>7|U<<25))>>>0,B=((U<<4|q>>>28)^(q<<30|U>>>2)^(q<<25|U>>>7))>>>0,L=(U&H|Q&(U^H))>>>0,V=(q&W|re&(q^W))>>>0,te=F+M+D+_k[z][1]+_[z][1],E=X+I+O+_k[z][0]+_[z][0]+(te/4294967296>>>0)>>>0,S=te>>>0,te=B+V,C=A+L+(te/4294967296>>>0)>>>0,T=te>>>0,X=_e,F=ae,_e=ge,ae=$e,ge=Y,$e=fe,te=ne+S,Y=ce+E+(te/4294967296>>>0)>>>0,fe=te>>>0,ce=Q,ne=re,Q=H,re=W,H=U,W=q,te=S+T,U=E+C+(te/4294967296>>>0)>>>0,q=te>>>0;te=n[0][1]+q,n[0][0]=n[0][0]+U+(te/4294967296>>>0)>>>0,n[0][1]=te>>>0,te=n[1][1]+W,n[1][0]=n[1][0]+H+(te/4294967296>>>0)>>>0,n[1][1]=te>>>0,te=n[2][1]+re,n[2][0]=n[2][0]+Q+(te/4294967296>>>0)>>>0,n[2][1]=te>>>0,te=n[3][1]+ne,n[3][0]=n[3][0]+ce+(te/4294967296>>>0)>>>0,n[3][1]=te>>>0,te=n[4][1]+fe,n[4][0]=n[4][0]+Y+(te/4294967296>>>0)>>>0,n[4][1]=te>>>0,te=n[5][1]+$e,n[5][0]=n[5][0]+ge+(te/4294967296>>>0)>>>0,n[5][1]=te>>>0,te=n[6][1]+ae,n[6][0]=n[6][0]+_e+(te/4294967296>>>0)>>>0,n[6][1]=te>>>0,te=n[7][1]+F,n[7][0]=n[7][0]+X+(te/4294967296>>>0)>>>0,n[7][1]=te>>>0,j-=128}}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(n,_)=>(n+_/_2n)/_,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(n){const{n:_}=CURVE,x=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),E=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),S=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),C=x,T=BigInt("0x100000000000000000000000000000000"),A=divNearest(C*n,_),B=divNearest(-E*n,_);let I=mod(n-A*x-B*S,_),M=mod(-A*E-B*C,_);const O=I>T,D=M>T;if(O&&(I=_-I),D&&(M=_-M),I>T||M>T)throw new Error("splitScalarEndo: Endomorphism failed, k="+n);return{k1neg:O,k1:I,k2neg:D,k2:M}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(n){const{a:_,b:x}=CURVE,E=mod(n*n),S=mod(E*n);return mod(S+_*n+x)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(_){super(_)}}function assertJacPoint(n){if(!(n instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(_,x,E){this.x=_,this.y=x,this.z=E}static fromAffine(_){if(!(_ instanceof Point$1))throw new TypeError("JacobianPoint#fromAffine: expected Point");return _.equals(Point$1.ZERO)?JacobianPoint.ZERO:new JacobianPoint(_.x,_.y,_1n)}static toAffineBatch(_){const x=invertBatch(_.map(E=>E.z));return _.map((E,S)=>E.toAffine(x[S]))}static normalizeZ(_){return JacobianPoint.toAffineBatch(_).map(JacobianPoint.fromAffine)}equals(_){assertJacPoint(_);const{x,y:E,z:S}=this,{x:C,y:T,z:A}=_,B=mod(S*S),I=mod(A*A),M=mod(x*I),O=mod(C*B),D=mod(mod(E*A)*I),L=mod(mod(T*S)*B);return M===O&&D===L}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:_,y:x,z:E}=this,S=mod(_*_),C=mod(x*x),T=mod(C*C),A=_+C,B=mod(_2n*(mod(A*A)-S-T)),I=mod(_3n*S),M=mod(I*I),O=mod(M-_2n*B),D=mod(I*(B-O)-_8n*T),L=mod(_2n*x*E);return new JacobianPoint(O,D,L)}add(_){assertJacPoint(_);const{x,y:E,z:S}=this,{x:C,y:T,z:A}=_;if(C===_0n||T===_0n)return this;if(x===_0n||E===_0n)return _;const B=mod(S*S),I=mod(A*A),M=mod(x*I),O=mod(C*B),D=mod(mod(E*A)*I),L=mod(mod(T*S)*B),V=mod(O-M),U=mod(L-D);if(V===_0n)return U===_0n?this.double():JacobianPoint.ZERO;const q=mod(V*V),H=mod(V*q),W=mod(M*q),Q=mod(U*U-H-_2n*W),re=mod(U*(W-Q)-D*H),ce=mod(S*A*V);return new JacobianPoint(Q,re,ce)}subtract(_){return this.add(_.negate())}multiplyUnsafe(_){const x=JacobianPoint.ZERO;if(typeof _=="bigint"&&_===_0n)return x;let E=normalizeScalar(_);if(E===_1n)return this;if(!USE_ENDOMORPHISM){let O=x,D=this;for(;E>_0n;)E&_1n&&(O=O.add(D)),D=D.double(),E>>=_1n;return O}let{k1neg:S,k1:C,k2neg:T,k2:A}=endo.splitScalar(E),B=x,I=x,M=this;for(;C>_0n||A>_0n;)C&_1n&&(B=B.add(M)),A&_1n&&(I=I.add(M)),M=M.double(),C>>=_1n,A>>=_1n;return S&&(B=B.negate()),T&&(I=I.negate()),I=new JacobianPoint(mod(I.x*endo.beta),I.y,I.z),B.add(I)}precomputeWindow(_){const x=USE_ENDOMORPHISM?128/_+1:256/_+1,E=[];let S=this,C=S;for(let T=0;T<x;T++){C=S,E.push(C);for(let A=1;A<2**(_-1);A++)C=C.add(S),E.push(C);S=C.double()}return E}wNAF(_,x){!x&&this.equals(JacobianPoint.BASE)&&(x=Point$1.BASE);const E=x&&x._WINDOW_SIZE||1;if(256%E)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let S=x&&pointPrecomputes.get(x);S||(S=this.precomputeWindow(E),x&&E!==1&&(S=JacobianPoint.normalizeZ(S),pointPrecomputes.set(x,S)));let C=JacobianPoint.ZERO,T=JacobianPoint.BASE;const A=1+(USE_ENDOMORPHISM?128/E:256/E),B=2**(E-1),I=BigInt(2**E-1),M=2**E,O=BigInt(E);for(let D=0;D<A;D++){const L=D*B;let V=Number(_&I);_>>=O,V>B&&(V-=M,_+=_1n);const U=L,q=L+Math.abs(V)-1,H=D%2!==0,W=V<0;V===0?T=T.add(constTimeNegate(H,S[U])):C=C.add(constTimeNegate(W,S[q]))}return{p:C,f:T}}multiply(_,x){let E=normalizeScalar(_),S,C;if(USE_ENDOMORPHISM){const{k1neg:T,k1:A,k2neg:B,k2:I}=endo.splitScalar(E);let{p:M,f:O}=this.wNAF(A,x),{p:D,f:L}=this.wNAF(I,x);M=constTimeNegate(T,M),D=constTimeNegate(B,D),D=new JacobianPoint(mod(D.x*endo.beta),D.y,D.z),S=M.add(D),C=O.add(L)}else{const{p:T,f:A}=this.wNAF(E,x);S=T,C=A}return JacobianPoint.normalizeZ([S,C])[0]}toAffine(_){const{x,y:E,z:S}=this,C=this.equals(JacobianPoint.ZERO);_==null&&(_=C?_8n:invert(S));const T=_,A=mod(T*T),B=mod(A*T),I=mod(x*A),M=mod(E*B),O=mod(S*T);if(C)return Point$1.ZERO;if(O!==_1n)throw new Error("invZ was invalid");return new Point$1(I,M)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n);JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);function constTimeNegate(n,_){const x=_.negate();return n?x:_}const pointPrecomputes=new WeakMap;let Point$1=class oi{constructor(_,x){this.x=_,this.y=x}_setWindowSize(_){this._WINDOW_SIZE=_,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(_){const x=_.length===32,E=bytesToNumber(x?_:_.subarray(1));if(!isValidFieldElement(E))throw new Error("Point is not on curve");const S=weierstrass(E);let C=sqrtMod(S);const T=(C&_1n)===_1n;x?T&&(C=mod(-C)):(_[0]&1)===1!==T&&(C=mod(-C));const A=new oi(E,C);return A.assertValidity(),A}static fromUncompressedHex(_){const x=bytesToNumber(_.subarray(1,fieldLen+1)),E=bytesToNumber(_.subarray(fieldLen+1,fieldLen*2+1)),S=new oi(x,E);return S.assertValidity(),S}static fromHex(_){const x=ensureBytes(_),E=x.length,S=x[0];if(E===fieldLen)return this.fromCompressedHex(x);if(E===compressedLen&&(S===2||S===3))return this.fromCompressedHex(x);if(E===uncompressedLen&&S===4)return this.fromUncompressedHex(x);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${E}`)}static fromPrivateKey(_){return oi.BASE.multiply(normalizePrivateKey(_))}static fromSignature(_,x,E){const{r:S,s:C}=normalizeSignature(x);if(![0,1,2,3].includes(E))throw new Error("Cannot recover: invalid recovery bit");const T=truncateHash(ensureBytes(_)),{n:A}=CURVE,B=E===2||E===3?S+A:S,I=invert(B,A),M=mod(-T*I,A),O=mod(C*I,A),D=E&1?"03":"02",L=oi.fromHex(D+numTo32bStr(B)),V=oi.BASE.multiplyAndAddUnsafe(L,M,O);if(!V)throw new Error("Cannot recover signature: point at infinify");return V.assertValidity(),V}toRawBytes(_=!1){return hexToBytes$1(this.toHex(_))}toHex(_=!1){const x=numTo32bStr(this.x);return _?`${this.hasEvenY()?"02":"03"}${x}`:`04${x}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const _="Point is not on elliptic curve",{x,y:E}=this;if(!isValidFieldElement(x)||!isValidFieldElement(E))throw new Error(_);const S=mod(E*E),C=weierstrass(x);if(mod(S-C)!==_0n)throw new Error(_)}equals(_){return this.x===_.x&&this.y===_.y}negate(){return new oi(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(_){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(_)).toAffine()}subtract(_){return this.add(_.negate())}multiply(_){return JacobianPoint.fromAffine(this).multiply(_,this).toAffine()}multiplyAndAddUnsafe(_,x,E){const S=JacobianPoint.fromAffine(this),C=x===_0n||x===_1n||this!==oi.BASE?S.multiplyUnsafe(x):S.multiply(x),T=JacobianPoint.fromAffine(_).multiplyUnsafe(E),A=C.add(T);return A.equals(JacobianPoint.ZERO)?void 0:A.toAffine()}};Point$1.BASE=new Point$1(CURVE.Gx,CURVE.Gy);Point$1.ZERO=new Point$1(_0n,_0n);function sliceDER(n){return Number.parseInt(n[0],16)>=8?"00"+n:n}function parseDERInt(n){if(n.length<2||n[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$1(n)}`);const _=n[1],x=n.subarray(2,_+2);if(!_||x.length!==_)throw new Error("Invalid signature integer: wrong length");if(x[0]===0&&x[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(x),left:n.subarray(_+2)}}function parseDERSignature(n){if(n.length<2||n[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$1(n)}`);if(n[1]!==n.length-2)throw new Error("Invalid signature: incorrect length");const{data:_,left:x}=parseDERInt(n.subarray(2)),{data:E,left:S}=parseDERInt(x);if(S.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$1(S)}`);return{r:_,s:E}}let Signature$1=class Ra{constructor(_,x){this.r=_,this.s=x,this.assertValidity()}static fromCompact(_){const x=_ instanceof Uint8Array,E="Signature.fromCompact";if(typeof _!="string"&&!x)throw new TypeError(`${E}: Expected string or Uint8Array`);const S=x?bytesToHex$1(_):_;if(S.length!==128)throw new Error(`${E}: Expected 64-byte hex`);return new Ra(hexToNumber(S.slice(0,64)),hexToNumber(S.slice(64,128)))}static fromDER(_){const x=_ instanceof Uint8Array;if(typeof _!="string"&&!x)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:E,s:S}=parseDERSignature(x?_:hexToBytes$1(_));return new Ra(E,S)}static fromHex(_){return this.fromDER(_)}assertValidity(){const{r:_,s:x}=this;if(!isWithinCurveOrder(_))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(x))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const _=CURVE.n>>_1n;return this.s>_}normalizeS(){return this.hasHighS()?new Ra(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes$1(this.toDERHex())}toDERHex(){const _=sliceDER(numberToHexUnpadded(this.s)),x=sliceDER(numberToHexUnpadded(this.r)),E=_.length/2,S=x.length/2,C=numberToHexUnpadded(E),T=numberToHexUnpadded(S);return`30${numberToHexUnpadded(S+E+4)}02${T}${x}02${C}${_}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$1(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes(...n){if(!n.every(E=>E instanceof Uint8Array))throw new Error("Uint8Array list expected");if(n.length===1)return n[0];const _=n.reduce((E,S)=>E+S.length,0),x=new Uint8Array(_);for(let E=0,S=0;E<n.length;E++){const C=n[E];x.set(C,S),S+=C.length}return x}const hexes=Array.from({length:256},(n,_)=>_.toString(16).padStart(2,"0"));function bytesToHex$1(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");let _="";for(let x=0;x<n.length;x++)_+=hexes[n[x]];return _}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(n){if(typeof n!="bigint")throw new Error("Expected bigint");if(!(_0n<=n&&n<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return n.toString(16).padStart(64,"0")}function numTo32b(n){const _=hexToBytes$1(numTo32bStr(n));if(_.length!==32)throw new Error("Error: expected 32 bytes");return _}function numberToHexUnpadded(n){const _=n.toString(16);return _.length&1?`0${_}`:_}function hexToNumber(n){if(typeof n!="string")throw new TypeError("hexToNumber: expected string, got "+typeof n);return BigInt(`0x${n}`)}function hexToBytes$1(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+n.length);const _=new Uint8Array(n.length/2);for(let x=0;x<_.length;x++){const E=x*2,S=n.slice(E,E+2),C=Number.parseInt(S,16);if(Number.isNaN(C)||C<0)throw new Error("Invalid byte sequence");_[x]=C}return _}function bytesToNumber(n){return hexToNumber(bytesToHex$1(n))}function ensureBytes(n){return n instanceof Uint8Array?Uint8Array.from(n):hexToBytes$1(n)}function normalizeScalar(n){if(typeof n=="number"&&Number.isSafeInteger(n)&&n>0)return BigInt(n);if(typeof n=="bigint"&&isWithinCurveOrder(n))return n;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(n,_=CURVE.P){const x=n%_;return x>=_0n?x:_+x}function pow2(n,_){const{P:x}=CURVE;let E=n;for(;_-- >_0n;)E*=E,E%=x;return E}function sqrtMod(n){const{P:_}=CURVE,x=BigInt(6),E=BigInt(11),S=BigInt(22),C=BigInt(23),T=BigInt(44),A=BigInt(88),B=n*n*n%_,I=B*B*n%_,M=pow2(I,_3n)*I%_,O=pow2(M,_3n)*I%_,D=pow2(O,_2n)*B%_,L=pow2(D,E)*D%_,V=pow2(L,S)*L%_,U=pow2(V,T)*V%_,q=pow2(U,A)*U%_,H=pow2(q,T)*V%_,W=pow2(H,_3n)*I%_,Q=pow2(W,C)*L%_,re=pow2(Q,x)*B%_,ce=pow2(re,_2n);if(ce*ce%_!==n)throw new Error("Cannot find square root");return ce}function invert(n,_=CURVE.P){if(n===_0n||_<=_0n)throw new Error(`invert: expected positive integers, got n=${n} mod=${_}`);let x=mod(n,_),E=_,S=_0n,C=_1n;for(;x!==_0n;){const A=E/x,B=E%x,I=S-C*A;E=x,x=B,S=C,C=I}if(E!==_1n)throw new Error("invert: does not exist");return mod(S,_)}function invertBatch(n,_=CURVE.P){const x=new Array(n.length),E=n.reduce((C,T,A)=>T===_0n?C:(x[A]=C,mod(C*T,_)),_1n),S=invert(E,_);return n.reduceRight((C,T,A)=>T===_0n?C:(x[A]=mod(C*x[A],_),mod(C*T,_)),S),x}function bits2int_2(n){const _=n.length*8-groupLen*8,x=bytesToNumber(n);return _>0?x>>BigInt(_):x}function truncateHash(n,_=!1){const x=bits2int_2(n);if(_)return x;const{n:E}=CURVE;return x>=E?x-E:x}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(_,x){if(this.hashLen=_,this.qByteLen=x,typeof _!="number"||_<2)throw new Error("hashLen must be a number");if(typeof x!="number"||x<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(_).fill(1),this.k=new Uint8Array(_).fill(0),this.counter=0}hmac(..._){return utils$2.hmacSha256(this.k,..._)}hmacSync(..._){return _hmacSha256Sync(this.k,..._)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(_=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),_),this.v=await this.hmac(this.v),_.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),_),this.v=await this.hmac(this.v))}reseedSync(_=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),_),this.v=this.hmacSync(this.v),_.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),_),this.v=this.hmacSync(this.v))}async generate(){this.incr();let _=0;const x=[];for(;_<this.qByteLen;){this.v=await this.hmac(this.v);const E=this.v.slice();x.push(E),_+=this.v.length}return concatBytes(...x)}generateSync(){this.checkSync(),this.incr();let _=0;const x=[];for(;_<this.qByteLen;){this.v=this.hmacSync(this.v);const E=this.v.slice();x.push(E),_+=this.v.length}return concatBytes(...x)}}function isWithinCurveOrder(n){return _0n<n&&n<CURVE.n}function isValidFieldElement(n){return _0n<n&&n<CURVE.P}function kmdToSig(n,_,x,E=!0){const{n:S}=CURVE,C=truncateHash(n,!0);if(!isWithinCurveOrder(C))return;const T=invert(C,S),A=Point$1.BASE.multiply(C),B=mod(A.x,S);if(B===_0n)return;const I=mod(T*mod(_+x*B,S),S);if(I===_0n)return;let M=new Signature$1(B,I),O=(A.x===M.r?0:2)|Number(A.y&_1n);return E&&M.hasHighS()&&(M=M.normalizeS(),O^=1),{sig:M,recovery:O}}function normalizePrivateKey(n){let _;if(typeof n=="bigint")_=n;else if(typeof n=="number"&&Number.isSafeInteger(n)&&n>0)_=BigInt(n);else if(typeof n=="string"){if(n.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");_=hexToNumber(n)}else if(n instanceof Uint8Array){if(n.length!==groupLen)throw new Error("Expected 32 bytes of private key");_=bytesToNumber(n)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(_))throw new Error("Expected private key: 0 < key < n");return _}function normalizePublicKey(n){return n instanceof Point$1?(n.assertValidity(),n):Point$1.fromHex(n)}function normalizeSignature(n){if(n instanceof Signature$1)return n.assertValidity(),n;try{return Signature$1.fromDER(n)}catch{return Signature$1.fromCompact(n)}}function getPublicKey(n,_=!1){return Point$1.fromPrivateKey(n).toRawBytes(_)}function bits2int(n){const _=n.length>fieldLen?n.slice(0,fieldLen):n;return bytesToNumber(_)}function bits2octets(n){const _=bits2int(n),x=mod(_,CURVE.n);return int2octets(x<_0n?_:x)}function int2octets(n){return numTo32b(n)}function initSigArgs(n,_,x){if(n==null)throw new Error(`sign: expected valid message hash, not "${n}"`);const E=ensureBytes(n),S=normalizePrivateKey(_),C=[int2octets(S),bits2octets(E)];if(x!=null){x===!0&&(x=utils$2.randomBytes(fieldLen));const B=ensureBytes(x);if(B.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);C.push(B)}const T=concatBytes(...C),A=bits2int(E);return{seed:T,m:A,d:S}}function finalizeSig(n,_){const{sig:x,recovery:E}=n,{der:S,recovered:C}=Object.assign({canonical:!0,der:!0},_),T=S?x.toDERRawBytes():x.toCompactRawBytes();return C?[T,E]:T}async function sign(n,_,x={}){const{seed:E,m:S,d:C}=initSigArgs(n,_,x.extraEntropy),T=new HmacDrbg(hashLen,groupLen);await T.reseed(E);let A;for(;!(A=kmdToSig(await T.generate(),S,C,x.canonical));)await T.reseed();return finalizeSig(A,x)}const vopts={strict:!0};function verify$2(n,_,x,E=vopts){let S;try{S=normalizeSignature(n),_=ensureBytes(_)}catch{return!1}const{r:C,s:T}=S;if(E.strict&&S.hasHighS())return!1;const A=truncateHash(_);let B;try{B=normalizePublicKey(x)}catch{return!1}const{n:I}=CURVE,M=invert(T,I),O=mod(A*M,I),D=mod(C*M,I),L=Point$1.BASE.multiplyAndAddUnsafe(B,O,D);return L?mod(L.x,I)===C:!1}Point$1.BASE._setWindowSize(8);const crypto$2={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$2={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes$1,concatBytes,mod,invert,isValidPrivateKey(n){try{return normalizePrivateKey(n),!0}catch{return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:n=>{n=ensureBytes(n);const _=groupLen+8;if(n.length<_||n.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const x=mod(bytesToNumber(n),CURVE.n-_1n)+_1n;return numTo32b(x)},randomBytes:(n=32)=>{if(crypto$2.web)return crypto$2.web.getRandomValues(new Uint8Array(n));if(crypto$2.node){const{randomBytes:_}=crypto$2.node;return Uint8Array.from(_(n))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$2.hashToPrivateKey(utils$2.randomBytes(groupLen+8)),precompute(n=8,_=Point$1.BASE){const x=_===Point$1.BASE?_:new Point$1(_.x,_.y);return x._setWindowSize(n),x.multiply(_3n),x},sha256:async(...n)=>{if(crypto$2.web){const _=await crypto$2.web.subtle.digest("SHA-256",concatBytes(...n));return new Uint8Array(_)}else if(crypto$2.node){const{createHash:_}=crypto$2.node,x=_("sha256");return n.forEach(E=>x.update(E)),Uint8Array.from(x.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(n,..._)=>{if(crypto$2.web){const x=await crypto$2.web.subtle.importKey("raw",n,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),E=concatBytes(..._),S=await crypto$2.web.subtle.sign("HMAC",x,E);return new Uint8Array(S)}else if(crypto$2.node){const{createHmac:x}=crypto$2.node,E=x("sha256",n);return _.forEach(S=>E.update(S)),Uint8Array.from(E.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(n,..._)=>{let x=TAGGED_HASH_PREFIXES[n];if(x===void 0){const E=await utils$2.sha256(Uint8Array.from(n,S=>S.charCodeAt(0)));x=concatBytes(E,E),TAGGED_HASH_PREFIXES[n]=x}return utils$2.sha256(x,..._)},taggedHashSync:(n,..._)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let x=TAGGED_HASH_PREFIXES[n];if(x===void 0){const E=_sha256Sync(Uint8Array.from(n,S=>S.charCodeAt(0)));x=concatBytes(E,E),TAGGED_HASH_PREFIXES[n]=x}return _sha256Sync(x,..._)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$2,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(n){_sha256Sync||(_sha256Sync=n)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(n){_hmacSha256Sync||(_hmacSha256Sync=n)}}});function randomBytes$1(n){if(isNaN(n)||n<=0)throw new CodeError("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return utils$2.randomBytes(n)}function convert$1(n,_){return _.map(x=>base64urlToBigInteger(n[x]))}function jwk2priv(n){return forge$n.pki.setRsaPrivateKey(...convert$1(n,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(n){return forge$n.pki.setRsaPublicKey(...convert$1(n,["n","e"]))}function pkcs1ToJwk(n){const _=forge$n.asn1.fromDer(toString$7(n,"ascii")),x=forge$n.pki.privateKeyFromAsn1(_);return{kty:"RSA",n:bigIntegerToUintBase64url(x.n),e:bigIntegerToUintBase64url(x.e),d:bigIntegerToUintBase64url(x.d),p:bigIntegerToUintBase64url(x.p),q:bigIntegerToUintBase64url(x.q),dp:bigIntegerToUintBase64url(x.dP),dq:bigIntegerToUintBase64url(x.dQ),qi:bigIntegerToUintBase64url(x.qInv),alg:"RS256"}}function jwkToPkcs1(n){if(n.n==null||n.e==null||n.d==null||n.p==null||n.q==null||n.dp==null||n.dq==null||n.qi==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const _=forge$n.pki.privateKeyToAsn1({n:base64urlToBigInteger(n.n),e:base64urlToBigInteger(n.e),d:base64urlToBigInteger(n.d),p:base64urlToBigInteger(n.p),q:base64urlToBigInteger(n.q),dP:base64urlToBigInteger(n.dp),dQ:base64urlToBigInteger(n.dq),qInv:base64urlToBigInteger(n.qi)});return fromString$3(forge$n.asn1.toDer(_).getBytes(),"ascii")}function pkixToJwk(n){const _=forge$n.asn1.fromDer(toString$7(n,"ascii")),x=forge$n.pki.publicKeyFromAsn1(_);return{kty:"RSA",n:bigIntegerToUintBase64url(x.n),e:bigIntegerToUintBase64url(x.e)}}function jwkToPkix(n){if(n.n==null||n.e==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const _=forge$n.pki.publicKeyToAsn1({n:base64urlToBigInteger(n.n),e:base64urlToBigInteger(n.e)});return fromString$3(forge$n.asn1.toDer(_).getBytes(),"ascii")}async function generateKey$1(n){const _=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),x=await exportKey(_);return{privateKey:x[0],publicKey:x[1]}}async function unmarshalPrivateKey$1(n){const x=[await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(n)],E=await exportKey({privateKey:x[0],publicKey:x[1]});return{privateKey:E[0],publicKey:E[1]}}async function hashAndSign$1(n,_){const x=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),E=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},x,Uint8Array.from(_));return new Uint8Array(E,0,E.byteLength)}async function hashAndVerify$1(n,_,x){const E=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},E,_,x)}async function exportKey(n){if(n.privateKey==null||n.publicKey==null)throw new CodeError("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto.get().subtle.exportKey("jwk",n.privateKey),webcrypto.get().subtle.exportKey("jwk",n.publicKey)])}async function derivePublicFromPrivate(n){return webcrypto.get().subtle.importKey("jwk",{kty:n.kty,n:n.n,e:n.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(n,_,x,E){const S=_?jwk2pub(n):jwk2priv(n),C=toString$7(Uint8Array.from(x),"ascii"),T=E(C,S);return fromString$3(T,"ascii")}function encrypt$2(n,_){return convertKey(n,!0,_,(x,E)=>E.encrypt(x))}function decrypt$3(n,_){return convertKey(n,!1,_,(x,E)=>E.decrypt(x))}class RsaPublicKey{constructor(_){$t(this,"_key");this._key=_}async verify(_,x){return hashAndVerify$1(this._key,x,_)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(_){return encrypt$2(this._key,_)}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}}class RsaPrivateKey{constructor(_,x){$t(this,"_key");$t(this,"_publicKey");this._key=_,this._publicKey=x}genSecret(){return randomBytes$1(16)}async sign(_){return hashAndSign$1(this._key,_)}get public(){if(this._publicKey==null)throw new CodeError("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(_){return decrypt$3(this._key,_)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}async id(){const _=await this.public.hash();return toString$7(_,"base58btc")}async export(_,x="pkcs-8"){if(x==="pkcs-8"){const E=new forge$n.util.ByteBuffer(this.marshal()),S=forge$n.asn1.fromDer(E),C=forge$n.pki.privateKeyFromAsn1(S),T={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$n.pki.encryptRsaPrivateKey(C,_,T)}else{if(x==="libp2p-key")return exporter(this.bytes,_);throw new CodeError(`export format '${x}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(n){const _=pkcs1ToJwk(n),x=await unmarshalPrivateKey$1(_);return new RsaPrivateKey(x.privateKey,x.publicKey)}function unmarshalRsaPublicKey(n){const _=pkixToJwk(n);return new RsaPublicKey(_)}async function fromJwk(n){const _=await unmarshalPrivateKey$1(n);return new RsaPrivateKey(_.privateKey,_.publicKey)}async function generateKeyPair$2(n){const _=await generateKey$1(n);return new RsaPrivateKey(_.privateKey,_.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$2,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return utils$2.randomPrivateKey()}async function hashAndSign(n,_){const{digest:x}=await sha256$6.digest(_);try{return await sign(x,n)}catch(E){throw new CodeError(String(E),"ERR_INVALID_INPUT")}}async function hashAndVerify(n,_,x){try{const{digest:E}=await sha256$6.digest(x);return verify$2(_,E,n)}catch(E){throw new CodeError(String(E),"ERR_INVALID_INPUT")}}function compressPublicKey(n){return Point$1.fromHex(n).toRawBytes(!0)}function validatePrivateKey(n){try{getPublicKey(n,!0)}catch(_){throw new CodeError(String(_),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(n){try{Point$1.fromHex(n)}catch(_){throw new CodeError(String(_),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(n){try{return getPublicKey(n,!0)}catch(_){throw new CodeError(String(_),"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(_){$t(this,"_key");validatePublicKey(_),this._key=_}async verify(_,x){return hashAndVerify(this._key,x,_)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}}class Secp256k1PrivateKey{constructor(_,x){$t(this,"_key");$t(this,"_publicKey");this._key=_,this._publicKey=x??computePublicKey$1(_),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}async sign(_){return hashAndSign(this._key,_)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(_){return equals(this.bytes,_.bytes)}async hash(){const{bytes:_}=await sha256$6.digest(this.bytes);return _}async id(){const _=await this.public.hash();return toString$7(_,"base58btc")}async export(_,x="libp2p-key"){if(x==="libp2p-key")return exporter(this.bytes,_);throw new CodeError(`export format '${x}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(n){return new Secp256k1PrivateKey(n)}function unmarshalSecp256k1PublicKey(n){return new Secp256k1PublicKey(n)}async function generateKeyPair$1(){const n=generateKey();return new Secp256k1PrivateKey(n)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair:generateKeyPair$1,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(n){const _=Object.keys(supportedKeys).join(" / ");return new CodeError(`invalid or unsupported key type ${n}. Must be ${_}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(n){if(n=n.toLowerCase(),n==="rsa"||n==="ed25519"||n==="secp256k1")return supportedKeys[n];throw unsupportedKey(n)}async function generateKeyPair(n,_){return typeToKey(n).generateKeyPair(_??2048)}function unmarshalPublicKey(n){const _=PublicKey.decode(n),x=_.Data??new Uint8Array;switch(_.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(x);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(x);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(x);default:throw unsupportedKey(_.Type??"RSA")}}function marshalPublicKey(n,_){return _=(_??"rsa").toLowerCase(),typeToKey(_),n.bytes}async function unmarshalPrivateKey(n){const _=PrivateKey.decode(n),x=_.Data??new Uint8Array;switch(_.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(x);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(x);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(x);default:throw unsupportedKey(_.Type??"RSA")}}function marshalPrivateKey(n,_){return _=(_??"rsa").toLowerCase(),typeToKey(_),n.bytes}async function importKey(n,_){try{const S=await importer(n,_);return await unmarshalPrivateKey(S)}catch{}const x=forge$n.pki.decryptRsaPrivateKey(n,_);if(x===null)throw new CodeError("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let E=forge$n.asn1.toDer(forge$n.pki.privateKeyToAsn1(x));return E=fromString$3(E.getBytes(),"ascii"),supportedKeys.rsa.unmarshalRsaPrivateKey(E)}const errors$1={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function assert$6(n,_){if(!n)throw new Error(_)}function isUint8Array(n,_,x){if(assert$6(_ instanceof Uint8Array,`Expected ${n} to be an Uint8Array`),x!==void 0)if(Array.isArray(x)){const E=x.join(", "),S=`Expected ${n} to be an Uint8Array with length [${E}]`;assert$6(x.includes(_.length),S)}else{const E=`Expected ${n} to be an Uint8Array with length ${x}`;assert$6(_.length===x,E)}}function isCompressed(n){assert$6(toTypeString(n)==="Boolean","Expected compressed to be a Boolean")}function getAssertedOutput(n=x=>new Uint8Array(x),_){return typeof n=="function"&&(n=n(_)),isUint8Array("output",n,_),n}function toTypeString(n){return Object.prototype.toString.call(n).slice(8,-1)}var lib$1=n=>({contextRandomize(_){switch(assert$6(_===null||_ instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),_!==null&&isUint8Array("seed",_,32),n.contextRandomize(_)){case 1:throw new Error(errors$1.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(_){return isUint8Array("private key",_,32),n.privateKeyVerify(_)===0},privateKeyNegate(_){switch(isUint8Array("private key",_,32),n.privateKeyNegate(_)){case 0:return _;case 1:throw new Error(errors$1.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(_,x){switch(isUint8Array("private key",_,32),isUint8Array("tweak",x,32),n.privateKeyTweakAdd(_,x)){case 0:return _;case 1:throw new Error(errors$1.TWEAK_ADD)}},privateKeyTweakMul(_,x){switch(isUint8Array("private key",_,32),isUint8Array("tweak",x,32),n.privateKeyTweakMul(_,x)){case 0:return _;case 1:throw new Error(errors$1.TWEAK_MUL)}},publicKeyVerify(_){return isUint8Array("public key",_,[33,65]),n.publicKeyVerify(_)===0},publicKeyCreate(_,x=!0,E){switch(isUint8Array("private key",_,32),isCompressed(x),E=getAssertedOutput(E,x?33:65),n.publicKeyCreate(E,_)){case 0:return E;case 1:throw new Error(errors$1.SECKEY_INVALID);case 2:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyConvert(_,x=!0,E){switch(isUint8Array("public key",_,[33,65]),isCompressed(x),E=getAssertedOutput(E,x?33:65),n.publicKeyConvert(E,_)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyNegate(_,x=!0,E){switch(isUint8Array("public key",_,[33,65]),isCompressed(x),E=getAssertedOutput(E,x?33:65),n.publicKeyNegate(E,_)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE);case 3:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyCombine(_,x=!0,E){assert$6(Array.isArray(_),"Expected public keys to be an Array"),assert$6(_.length>0,"Expected public keys array will have more than zero items");for(const S of _)isUint8Array("public key",S,[33,65]);switch(isCompressed(x),E=getAssertedOutput(E,x?33:65),n.publicKeyCombine(E,_)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.PUBKEY_COMBINE);case 3:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(_,x,E=!0,S){switch(isUint8Array("public key",_,[33,65]),isUint8Array("tweak",x,32),isCompressed(E),S=getAssertedOutput(S,E?33:65),n.publicKeyTweakAdd(S,_,x)){case 0:return S;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.TWEAK_ADD)}},publicKeyTweakMul(_,x,E=!0,S){switch(isUint8Array("public key",_,[33,65]),isUint8Array("tweak",x,32),isCompressed(E),S=getAssertedOutput(S,E?33:65),n.publicKeyTweakMul(S,_,x)){case 0:return S;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.TWEAK_MUL)}},signatureNormalize(_){switch(isUint8Array("signature",_,64),n.signatureNormalize(_)){case 0:return _;case 1:throw new Error(errors$1.SIG_PARSE)}},signatureExport(_,x){isUint8Array("signature",_,64),x=getAssertedOutput(x,72);const E={output:x,outputlen:72};switch(n.signatureExport(E,_)){case 0:return x.slice(0,E.outputlen);case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},signatureImport(_,x){switch(isUint8Array("signature",_),x=getAssertedOutput(x,64),n.signatureImport(x,_)){case 0:return x;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdsaSign(_,x,E={},S){isUint8Array("message",_,32),isUint8Array("private key",x,32),assert$6(toTypeString(E)==="Object","Expected options to be an Object"),E.data!==void 0&&isUint8Array("options.data",E.data),E.noncefn!==void 0&&assert$6(toTypeString(E.noncefn)==="Function","Expected options.noncefn to be a Function"),S=getAssertedOutput(S,64);const C={signature:S,recid:null};switch(n.ecdsaSign(C,_,x,E.data,E.noncefn)){case 0:return C;case 1:throw new Error(errors$1.SIGN);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdsaVerify(_,x,E){switch(isUint8Array("signature",_,64),isUint8Array("message",x,32),isUint8Array("public key",E,[33,65]),n.ecdsaVerify(_,x,E)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.PUBKEY_PARSE)}},ecdsaRecover(_,x,E,S=!0,C){switch(isUint8Array("signature",_,64),assert$6(toTypeString(x)==="Number"&&x>=0&&x<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",E,32),isCompressed(S),C=getAssertedOutput(C,S?33:65),n.ecdsaRecover(C,_,x,E)){case 0:return C;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.RECOVER);case 3:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdh(_,x,E={},S){switch(isUint8Array("public key",_,[33,65]),isUint8Array("private key",x,32),assert$6(toTypeString(E)==="Object","Expected options to be an Object"),E.data!==void 0&&isUint8Array("options.data",E.data),E.hashfn!==void 0?(assert$6(toTypeString(E.hashfn)==="Function","Expected options.hashfn to be a Function"),E.xbuf!==void 0&&isUint8Array("options.xbuf",E.xbuf,32),E.ybuf!==void 0&&isUint8Array("options.ybuf",E.ybuf,32),isUint8Array("output",S)):S=getAssertedOutput(S,32),n.ecdh(S,_,x,E.data,E.hashfn,E.xbuf,E.ybuf)){case 0:return S;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.ECDH)}}});const EC$5=requireElliptic().ec,ec$2=new EC$5("secp256k1"),ecparams=ec$2.curve,BN$2=ecparams.n.constructor;function loadCompressedPublicKey(n,_){let x=new BN$2(_);if(x.cmp(ecparams.p)>=0)return null;x=x.toRed(ecparams.red);let E=x.redSqr().redIMul(x).redIAdd(ecparams.b).redSqrt();return n===3!==E.isOdd()&&(E=E.redNeg()),ec$2.keyPair({pub:{x,y:E}})}function loadUncompressedPublicKey(n,_,x){let E=new BN$2(_),S=new BN$2(x);if(E.cmp(ecparams.p)>=0||S.cmp(ecparams.p)>=0||(E=E.toRed(ecparams.red),S=S.toRed(ecparams.red),(n===6||n===7)&&S.isOdd()!==(n===7)))return null;const C=E.redSqr().redIMul(E);return S.redSqr().redISub(C.redIAdd(ecparams.b)).isZero()?ec$2.keyPair({pub:{x:E,y:S}}):null}function loadPublicKey(n){const _=n[0];switch(_){case 2:case 3:return n.length!==33?null:loadCompressedPublicKey(_,n.subarray(1,33));case 4:case 6:case 7:return n.length!==65?null:loadUncompressedPublicKey(_,n.subarray(1,33),n.subarray(33,65));default:return null}}function savePublicKey(n,_){const x=_.encode(null,n.length===33);for(let E=0;E<n.length;++E)n[E]=x[E]}var elliptic$2={contextRandomize(){return 0},privateKeyVerify(n){const _=new BN$2(n);return _.cmp(ecparams.n)<0&&!_.isZero()?0:1},privateKeyNegate(n){const _=new BN$2(n),x=ecparams.n.sub(_).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return n.set(x),0},privateKeyTweakAdd(n,_){const x=new BN$2(_);if(x.cmp(ecparams.n)>=0||(x.iadd(new BN$2(n)),x.cmp(ecparams.n)>=0&&x.isub(ecparams.n),x.isZero()))return 1;const E=x.toArrayLike(Uint8Array,"be",32);return n.set(E),0},privateKeyTweakMul(n,_){let x=new BN$2(_);if(x.cmp(ecparams.n)>=0||x.isZero())return 1;x.imul(new BN$2(n)),x.cmp(ecparams.n)>=0&&(x=x.umod(ecparams.n));const E=x.toArrayLike(Uint8Array,"be",32);return n.set(E),0},publicKeyVerify(n){return loadPublicKey(n)===null?1:0},publicKeyCreate(n,_){const x=new BN$2(_);if(x.cmp(ecparams.n)>=0||x.isZero())return 1;const E=ec$2.keyFromPrivate(_).getPublic();return savePublicKey(n,E),0},publicKeyConvert(n,_){const x=loadPublicKey(_);if(x===null)return 1;const E=x.getPublic();return savePublicKey(n,E),0},publicKeyNegate(n,_){const x=loadPublicKey(_);if(x===null)return 1;const E=x.getPublic();return E.y=E.y.redNeg(),savePublicKey(n,E),0},publicKeyCombine(n,_){const x=new Array(_.length);for(let S=0;S<_.length;++S)if(x[S]=loadPublicKey(_[S]),x[S]===null)return 1;let E=x[0].getPublic();for(let S=1;S<x.length;++S)E=E.add(x[S].pub);return E.isInfinity()?2:(savePublicKey(n,E),0)},publicKeyTweakAdd(n,_,x){const E=loadPublicKey(_);if(E===null)return 1;if(x=new BN$2(x),x.cmp(ecparams.n)>=0)return 2;const S=E.getPublic().add(ecparams.g.mul(x));return S.isInfinity()?2:(savePublicKey(n,S),0)},publicKeyTweakMul(n,_,x){const E=loadPublicKey(_);if(E===null)return 1;if(x=new BN$2(x),x.cmp(ecparams.n)>=0||x.isZero())return 2;const S=E.getPublic().mul(x);return savePublicKey(n,S),0},signatureNormalize(n){const _=new BN$2(n.subarray(0,32)),x=new BN$2(n.subarray(32,64));return _.cmp(ecparams.n)>=0||x.cmp(ecparams.n)>=0?1:(x.cmp(ec$2.nh)===1&&n.set(ecparams.n.sub(x).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(n,_){const x=_.subarray(0,32),E=_.subarray(32,64);if(new BN$2(x).cmp(ecparams.n)>=0||new BN$2(E).cmp(ecparams.n)>=0)return 1;const{output:S}=n;let C=S.subarray(4,4+33);C[0]=0,C.set(x,1);let T=33,A=0;for(;T>1&&C[A]===0&&!(C[A+1]&128);--T,++A);if(C=C.subarray(A),C[0]&128||T>1&&C[0]===0&&!(C[1]&128))return 1;let B=S.subarray(6+33,6+33+33);B[0]=0,B.set(E,1);let I=33,M=0;for(;I>1&&B[M]===0&&!(B[M+1]&128);--I,++M);return B=B.subarray(M),B[0]&128||I>1&&B[0]===0&&!(B[1]&128)?1:(n.outputlen=6+T+I,S[0]=48,S[1]=n.outputlen-2,S[2]=2,S[3]=C.length,S.set(C,4),S[4+T]=2,S[5+T]=B.length,S.set(B,6+T),0)},signatureImport(n,_){if(_.length<8||_.length>72||_[0]!==48||_[1]!==_.length-2||_[2]!==2)return 1;const x=_[3];if(x===0||5+x>=_.length||_[4+x]!==2)return 1;const E=_[5+x];if(E===0||6+x+E!==_.length||_[4]&128||x>1&&_[4]===0&&!(_[5]&128)||_[x+6]&128||E>1&&_[x+6]===0&&!(_[x+7]&128))return 1;let S=_.subarray(4,4+x);if(S.length===33&&S[0]===0&&(S=S.subarray(1)),S.length>32)return 1;let C=_.subarray(6+x);if(C.length===33&&C[0]===0&&(C=C.slice(1)),C.length>32)throw new Error("S length is too long");let T=new BN$2(S);T.cmp(ecparams.n)>=0&&(T=new BN$2(0));let A=new BN$2(_.subarray(6+x));return A.cmp(ecparams.n)>=0&&(A=new BN$2(0)),n.set(T.toArrayLike(Uint8Array,"be",32),0),n.set(A.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(n,_,x,E,S){if(S){const A=S;S=B=>{const I=A(_,x,null,E,B);if(!(I instanceof Uint8Array&&I.length===32))throw new Error("This is the way");return new BN$2(I)}}const C=new BN$2(x);if(C.cmp(ecparams.n)>=0||C.isZero())return 1;let T;try{T=ec$2.sign(_,x,{canonical:!0,k:S,pers:E})}catch{return 1}return n.signature.set(T.r.toArrayLike(Uint8Array,"be",32),0),n.signature.set(T.s.toArrayLike(Uint8Array,"be",32),32),n.recid=T.recoveryParam,0},ecdsaVerify(n,_,x){const E={r:n.subarray(0,32),s:n.subarray(32,64)},S=new BN$2(E.r),C=new BN$2(E.s);if(S.cmp(ecparams.n)>=0||C.cmp(ecparams.n)>=0)return 1;if(C.cmp(ec$2.nh)===1||S.isZero()||C.isZero())return 3;const T=loadPublicKey(x);if(T===null)return 2;const A=T.getPublic();return ec$2.verify(_,E,A)?0:3},ecdsaRecover(n,_,x,E){const S={r:_.slice(0,32),s:_.slice(32,64)},C=new BN$2(S.r),T=new BN$2(S.s);if(C.cmp(ecparams.n)>=0||T.cmp(ecparams.n)>=0)return 1;if(C.isZero()||T.isZero())return 2;let A;try{A=ec$2.recoverPubKey(E,S,x)}catch{return 2}return savePublicKey(n,A),0},ecdh(n,_,x,E,S,C,T){const A=loadPublicKey(_);if(A===null)return 1;const B=new BN$2(x);if(B.cmp(ecparams.n)>=0||B.isZero())return 2;const I=A.getPublic().mul(B);if(S===void 0){const M=I.encode(null,!0),O=ec$2.hash().update(M).digest();for(let D=0;D<32;++D)n[D]=O[D]}else{C||(C=new Uint8Array(32));const M=I.getX().toArray("be",32);for(let V=0;V<32;++V)C[V]=M[V];T||(T=new Uint8Array(32));const O=I.getY().toArray("be",32);for(let V=0;V<32;++V)T[V]=O[V];const D=S(C,T,E);if(!(D instanceof Uint8Array&&D.length===n.length))return 2;n.set(D)}return 0}},elliptic$1=lib$1(elliptic$2);const secp256k1$1=getDefaultExportFromCjs(elliptic$1);var events=eventsExports,inherits$1=inherits_browserExports,lru=LRU;function LRU(n){if(!(this instanceof LRU))return new LRU(n);typeof n=="number"&&(n={max:n}),n||(n={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=n.max||1e3,this.maxAge=n.maxAge||0}inherits$1(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var _=this.cache[n];return delete this.cache[n],this._unlink(n,_.prev,_.next),_.value}};LRU.prototype._unlink=function(n,_,x){this.length--,this.length===0?this.head=this.tail=null:this.head===n?(this.head=_,this.cache[this.head].next=null):this.tail===n?(this.tail=x,this.cache[this.tail].prev=null):(this.cache[_].next=x,this.cache[x].prev=_)};LRU.prototype.peek=function(n){if(this.cache.hasOwnProperty(n)){var _=this.cache[n];if(this._checkAge(n,_))return _.value}};LRU.prototype.set=function(n,_){typeof n!="string"&&(n=""+n);var x;if(this.cache.hasOwnProperty(n)){if(x=this.cache[n],x.value=_,this.maxAge&&(x.modified=Date.now()),n===this.head)return _;this._unlink(n,x.prev,x.next)}else x={value:_,modified:0,next:null,prev:null},this.maxAge&&(x.modified=Date.now()),this.cache[n]=x,this.length===this.max&&this.evict();return this.length++,x.next=null,x.prev=this.head,this.head&&(this.cache[this.head].next=n),this.head=n,this.tail||(this.tail=n),_};LRU.prototype._checkAge=function(n,_){return this.maxAge&&Date.now()-_.modified>this.maxAge?(this.remove(n),this.emit("evict",{key:n,value:_.value}),!1):!0};LRU.prototype.get=function(n){if(typeof n!="string"&&(n=""+n),!!this.cache.hasOwnProperty(n)){var _=this.cache[n];if(this._checkAge(n,_))return this.head!==n&&(n===this.tail?(this.tail=_.next,this.cache[this.tail].prev=null):this.cache[_.prev].next=_.next,this.cache[_.next].prev=_.prev,this.cache[this.head].next=n,_.prev=this.head,_.next=null,this.head=n),_.value}};LRU.prototype.evict=function(){if(this.tail){var n=this.tail,_=this.remove(this.tail);this.emit("evict",{key:n,value:_})}};const LRU$1=getDefaultExportFromCjs(lru);var ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs(ellipticExports),{ec:EC$4}=elliptic,verify$1=async(n,_,x)=>{if(!n)throw new Error("No signature given");if(!_)throw new Error("Given publicKey was undefined");if(!x)throw new Error("Given input data was undefined");let E=!1;const S=new EC$4("secp256k1"),C=S.keyPair({pub:_,pubEnc:"hex"});try{E=S.verify(x,n,C)}catch{}return Promise.resolve(E)},v0=Object.freeze(Object.defineProperty({__proto__:null,verify:verify$1},Symbol.toStringTag,{value:"Module"})),unmarshal$1=supportedKeys.secp256k1.unmarshalSecp256k1PublicKey,verify=async(n,_,x)=>{if(!n)throw new Error("No signature given");if(!_)throw new Error("Given publicKey was undefined");if(!x)throw new Error("Given input data was undefined");safeBufferExports.Buffer.isBuffer(x)||(x=safeBufferExports.Buffer.from(x));const E=(C,T,A)=>C.verify(T,A);let S=!1;try{const C=unmarshal$1(safeBufferExports.Buffer.from(_,"hex"));S=await E(C,x,safeBufferExports.Buffer.from(n,"hex"))}catch{}return Promise.resolve(S)},v1=Object.freeze(Object.defineProperty({__proto__:null,verify},Symbol.toStringTag,{value:"Module"})),verifiers$1={v0,v1},verifier=n=>verifiers$1[n],{ec:EC$3}=elliptic,ec$1=new EC$3("secp256k1"),unmarshal=supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey;function createStore(n="./keystore"){return globSourceImport&&globSourceImport.mkdirSync&&globSourceImport.mkdirSync(n,{recursive:!0}),new Level(n,{})}const verifiedCache=new LRU$1(1e3);class Keystore{constructor(_={}){typeof _=="string"?this._store=createStore(_):typeof _.open=="function"?this._store=_:typeof _.store=="string"?this._store=createStore(_.store):this._store=_.store||createStore(),this._cache=_.cache||new LRU$1(100)}async open(){if(!this._store)throw new Error("Keystore: No store found to open");await this._store.open()}async close(){this._store&&await this._store.close()}async hasKey(_){if(!_)throw new Error("id needed to check a key");if(this._store.status&&this._store.status!=="open")return null;let x=!1;try{const E=this._cache.get(_)||await this._store.get(_);x=E!=null}catch{console.error("Error: ENOENT: no such file or directory")}return x}async createKey(_,{entropy:x}={}){if(!_)throw new Error("id needed to create a key");if(this._store.status&&this._store.status!=="open")return null;const E=ec$1.genKeyPair({entropy:x}).getPrivate().toArrayLike(safeBufferExports.Buffer),S=safeBufferExports.Buffer.alloc(32);E.copy(S,S.length-E.length);const C=await unmarshal(S),T=C.public.marshal(),A=secp256k1$1.publicKeyConvert(safeBufferExports.Buffer.from(T),!1),B={publicKey:safeBufferExports.Buffer.from(A).toString("hex"),privateKey:safeBufferExports.Buffer.from(C.marshal()).toString("hex")};try{await this._store.put(_,JSON.stringify(B))}catch(I){console.log(I)}return this._cache.set(_,B),C}async getKey(_){if(!_)throw new Error("id needed to get a key");if(this._store||await this.open(),this._store.status&&this._store.status!=="open")return null;const x=this._cache.get(_);let E;try{E=x||await this._store.get(_)}catch{}if(!E)return;const S=x||JSON.parse(E);if(S)return x||this._cache.set(_,S),unmarshal(safeBufferExports.Buffer.from(S.privateKey,"hex"))}async sign(_,x){if(!_)throw new Error("No signing key given");if(!x)throw new Error("Given input data was undefined");return safeBufferExports.Buffer.isBuffer(x)||(x=safeBufferExports.Buffer.from(x)),safeBufferExports.Buffer.from(await _.sign(x)).toString("hex")}getPublic(_,x={}){const E=["hex","buffer"],S=typeof x.decompress>"u"?!0:x.decompress,C=x.format||"hex";if(E.indexOf(C)===-1)throw new Error("Supported formats are `hex` and `buffer`");let T=_.public.marshal();return S&&(T=secp256k1$1.publicKeyConvert(safeBufferExports.Buffer.from(T),!1)),T=safeBufferExports.Buffer.from(T),C==="buffer"?T:T.toString("hex")}async verify(_,x,E,S="v1"){return Keystore.verify(_,x,E,S)}static async verify(_,x,E,S="v1"){const C=verifiedCache.get(_);let T=!1;if(C){const A=(B,I,M)=>{let O;return M==="v0"?O=safeBufferExports.Buffer.compare(safeBufferExports.Buffer.alloc(30,B),safeBufferExports.Buffer.alloc(30,I))===0:O=safeBufferExports.Buffer.isBuffer(I)?safeBufferExports.Buffer.compare(B,I)===0:B===I,O};T=C.publicKey===x&&A(C.data,E,S)}else{const A=await verifier(S).verify(_,x,E);T=A,A&&verifiedCache.set(_,{publicKey:x,data:E})}return T}}const isDefined$1=n=>n!=null;class Identity{constructor(_,x,E,S,C,T){if(!isDefined$1(_))throw new Error("Identity id is required");if(!isDefined$1(x))throw new Error("Invalid public key");if(!isDefined$1(E))throw new Error("Signature of the id (idSignature) is required");if(!isDefined$1(S))throw new Error("Signature of (publicKey + idSignature) is required");if(!isDefined$1(C))throw new Error("Identity type is required");if(!isDefined$1(T))throw new Error("Identity provider is required");this._id=_,this._publicKey=x,this._signatures=Object.assign({},{id:E},{publicKey:S}),this._type=C,this._provider=T}get id(){return this._id}get publicKey(){return this._publicKey}get signatures(){return this._signatures}get type(){return this._type}get provider(){return this._provider}toJSON(){return{id:this.id,publicKey:this.publicKey,signatures:this.signatures,type:this.type}}static isIdentity(_){return _.id!==void 0&&_.publicKey!==void 0&&_.signatures!==void 0&&_.signatures.id!==void 0&&_.signatures.publicKey!==void 0&&_.type!==void 0}static toJSON(_){return{id:_.id,publicKey:_.publicKey,signatures:_.signatures,type:_.type}}}class IdentityProvider{async getId(_){}async signIdentity(_,x){}static async verifyIdentity(_){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}}const type$4="orbitdb";class OrbitDBIdentityProvider extends IdentityProvider{constructor(_){if(super(),!_)throw new Error("OrbitDBIdentityProvider requires a keystore");this._keystore=_}static get type(){return type$4}async getId(_={}){const x=_.id;if(!x)throw new Error("id is required");const E=this._keystore,S=await E.getKey(x)||await E.createKey(x);return Buffer$5.from(S.public.marshal()).toString("hex")}async signIdentity(_,x={}){const E=x.id;if(!E)throw new Error("id is required");const S=this._keystore,C=await S.getKey(E);if(!C)throw new Error(`Signing key for '${E}' not found`);return S.sign(C,_)}static async verifyIdentity(_){return Keystore.verify(_.signatures.publicKey,_.id,_.publicKey+_.signatures.id)}}function _catch(n,_){try{var x=n()}catch(E){return _(E)}return x&&x.then?x.then(void 0,_):x}function inMemoryCache(){const n=new Map;return function(_,x){try{let S=function(T){if(E)return T;const A=n.get(_.didUrl);return A!==void 0?A:Promise.resolve(x()).then(function(B){var I;return((I=B.didResolutionMetadata)==null?void 0:I.error)!=="notFound"&&n.set(_.didUrl,B),B})},E;const C=function(){if(_.params&&_.params["no-cache"]==="true")return Promise.resolve(x()).then(function(T){return E=1,T})}();return Promise.resolve(C&&C.then?C.then(S):S(C))}catch(E){return Promise.reject(E)}}}function noCache(n,_){return _()}const PCT_ENCODED="(?:%[0-9a-fA-F]{2})",ID_CHAR=`(?:[a-zA-Z0-9._-]|${PCT_ENCODED})`,METHOD="([a-z0-9]+)",METHOD_ID=`((?:${ID_CHAR}*:)*(${ID_CHAR}+))`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse$1(n){if(n===""||!n)return null;const _=n.match(DID_MATCHER);if(_){const x={did:`did:${_[1]}:${_[2]}`,method:_[1],id:_[2],didUrl:n};if(_[4]){const E=_[4].slice(1).split(";");x.params={};for(const S of E){const C=S.split("=");x.params[C[0]]=C[1]}}return _[6]&&(x.path=_[6]),_[7]&&(x.query=_[7].slice(1)),_[8]&&(x.fragment=_[8].slice(1)),x}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(n){return function(_,x,E){try{return Promise.resolve(_catch(function(){return Promise.resolve(n(_,x,E)).then(function(S){return{...EMPTY_RESULT,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:S}})},function(S){return{...EMPTY_RESULT,didResolutionMetadata:{error:"notFound",message:S.toString()}}}))}catch(S){return Promise.reject(S)}}}class Resolver{constructor(_={},x={}){this.registry=void 0,this.cache=void 0,this.registry=_,this.cache=x.cache===!0?inMemoryCache():x.cache||noCache,x.legacyResolvers&&Object.keys(x.legacyResolvers).map(E=>{this.registry[E]||(this.registry[E]=wrapLegacyResolver(x.legacyResolvers[E]))})}resolve(_,x={}){try{const E=this,S=parse$1(_);if(S===null)return Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"invalidDid"}});const C=E.registry[S.method];return C?Promise.resolve(E.cache(S,()=>C(S.did,S,E,x))):Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(E){return Promise.reject(E)}}}function asUint8Array$1(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function allocUnsafe$1(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function concat$3(n,_){_||(_=n.reduce((S,C)=>S+C.length,0));const x=allocUnsafe$1(_);let E=0;for(const S of n)x.set(S,E),E+=S.length;return asUint8Array$1(x)}const identity$3=from$9({prefix:"\0",name:"identity",encode:n=>toString$a(n),decode:n=>fromString$6(n)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$5({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$5({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$5({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$5({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$5({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX$5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$5({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$5({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$5({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$5({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((n,_,x)=>(n[x]=_,n),[]),alphabetCharsToBytes=alphabet.reduce((n,_,x)=>(n[_.codePointAt(0)]=x,n),[]);function encode$c(n){return n.reduce((_,x)=>(_+=alphabetBytesToChars[x],_),"")}function decode$8(n){const _=[];for(const x of n){const E=alphabetCharsToBytes[x.codePointAt(0)];if(E===void 0)throw new Error(`Non-base256emoji character: ${x}`);_.push(E)}return new Uint8Array(_)}const base256emoji=from$9({prefix:"",name:"base256emoji",encode:encode$c,decode:decode$8}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),from=({name:n,code:_,encode:x})=>new Hasher(n,_,x);class Hasher{constructor(_,x,E){this.name=_,this.code=x,this.encode=E}digest(_){if(_ instanceof Uint8Array){const x=this.encode(_);return x instanceof Uint8Array?create$7(this.code,x):x.then(E=>create$7(this.code,E))}else throw Error("Unknown type, must be binary type")}}const sha=n=>async _=>new Uint8Array(await crypto.subtle.digest(n,_)),sha256$5=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),code$4=0,name$2="identity",encode$b=coerce$5,digest=n=>create$7(code$4,encode$b(n)),identity$2={code:code$4,name:name$2,encode:encode$b,digest};new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$6,...base36$1,...base58$1,...base64$2,...base256emoji$1};function createCodec$2(n,_,x,E){return{name:n,prefix:_,encoder:{name:n,prefix:_,encode:x},decoder:{decode:E}}}const string$1=createCodec$2("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),ascii$1=createCodec$2("ascii","a",n=>{let _="a";for(let x=0;x<n.length;x++)_+=String.fromCharCode(n[x]);return _},n=>{n=n.substring(1);const _=allocUnsafe$1(n.length);for(let x=0;x<n.length;x++)_[x]=n.charCodeAt(x);return _}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases};function fromString$2(n,_="utf8"){const x=BASES$1[_];if(!x)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(n,"utf-8")):x.decoder.decode(`${x.prefix}${n}`)}function toString$6(n,_="utf8"){const x=BASES$1[_];if(!x)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):x.encoder.encode(n).substring(1)}var sha256$4={},binary={},int={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function _(A,B){var I=A>>>16&65535,M=A&65535,O=B>>>16&65535,D=B&65535;return M*D+(I*D+M*O<<16>>>0)|0}n.mul=Math.imul||_;function x(A,B){return A+B|0}n.add=x;function E(A,B){return A-B|0}n.sub=E;function S(A,B){return A<<B|A>>>32-B}n.rotl=S;function C(A,B){return A<<32-B|A>>>B}n.rotr=C;function T(A){return typeof A=="number"&&isFinite(A)&&Math.floor(A)===A}n.isInteger=Number.isInteger||T,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(A){return n.isInteger(A)&&A>=-n.MAX_SAFE_INTEGER&&A<=n.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(n,_){return _===void 0&&(_=0),(n[_+0]<<8|n[_+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(n,_){return _===void 0&&(_=0),(n[_+0]<<8|n[_+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(n,_){return _===void 0&&(_=0),(n[_+1]<<8|n[_])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(n,_){return _===void 0&&(_=0),(n[_+1]<<8|n[_])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(n,_,x){return _===void 0&&(_=new Uint8Array(2)),x===void 0&&(x=0),_[x+0]=n>>>8,_[x+1]=n>>>0,_}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(n,_,x){return _===void 0&&(_=new Uint8Array(2)),x===void 0&&(x=0),_[x+0]=n>>>0,_[x+1]=n>>>8,_}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(n,_){return _===void 0&&(_=0),n[_]<<24|n[_+1]<<16|n[_+2]<<8|n[_+3]}binary.readInt32BE=readInt32BE;function readUint32BE(n,_){return _===void 0&&(_=0),(n[_]<<24|n[_+1]<<16|n[_+2]<<8|n[_+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(n,_){return _===void 0&&(_=0),n[_+3]<<24|n[_+2]<<16|n[_+1]<<8|n[_]}binary.readInt32LE=readInt32LE;function readUint32LE(n,_){return _===void 0&&(_=0),(n[_+3]<<24|n[_+2]<<16|n[_+1]<<8|n[_])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(n,_,x){return _===void 0&&(_=new Uint8Array(4)),x===void 0&&(x=0),_[x+0]=n>>>24,_[x+1]=n>>>16,_[x+2]=n>>>8,_[x+3]=n>>>0,_}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(n,_,x){return _===void 0&&(_=new Uint8Array(4)),x===void 0&&(x=0),_[x+0]=n>>>0,_[x+1]=n>>>8,_[x+2]=n>>>16,_[x+3]=n>>>24,_}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE$1(n,_){_===void 0&&(_=0);var x=readInt32BE(n,_),E=readInt32BE(n,_+4);return x*4294967296+E-(E>>31)*4294967296}binary.readInt64BE=readInt64BE$1;function readUint64BE(n,_){_===void 0&&(_=0);var x=readUint32BE(n,_),E=readUint32BE(n,_+4);return x*4294967296+E}binary.readUint64BE=readUint64BE;function readInt64LE(n,_){_===void 0&&(_=0);var x=readInt32LE(n,_),E=readInt32LE(n,_+4);return E*4294967296+x-(x>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(n,_){_===void 0&&(_=0);var x=readUint32LE(n,_),E=readUint32LE(n,_+4);return E*4294967296+x}binary.readUint64LE=readUint64LE;function writeUint64BE(n,_,x){return _===void 0&&(_=new Uint8Array(8)),x===void 0&&(x=0),writeUint32BE$1(n/4294967296>>>0,_,x),writeUint32BE$1(n>>>0,_,x+4),_}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(n,_,x){return _===void 0&&(_=new Uint8Array(8)),x===void 0&&(x=0),writeUint32LE(n>>>0,_,x),writeUint32LE(n/4294967296>>>0,_,x+4),_}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(n,_,x){if(x===void 0&&(x=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>_.length-x)throw new Error("readUintBE: array is too short for the given bitLength");for(var E=0,S=1,C=n/8+x-1;C>=x;C--)E+=_[C]*S,S*=256;return E}binary.readUintBE=readUintBE;function readUintLE(n,_,x){if(x===void 0&&(x=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>_.length-x)throw new Error("readUintLE: array is too short for the given bitLength");for(var E=0,S=1,C=x;C<x+n/8;C++)E+=_[C]*S,S*=256;return E}binary.readUintLE=readUintLE;function writeUintBE(n,_,x,E){if(x===void 0&&(x=new Uint8Array(n/8)),E===void 0&&(E=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(_))throw new Error("writeUintBE value must be an integer");for(var S=1,C=n/8+E-1;C>=E;C--)x[C]=_/S&255,S*=256;return x}binary.writeUintBE=writeUintBE;function writeUintLE(n,_,x,E){if(x===void 0&&(x=new Uint8Array(n/8)),E===void 0&&(E=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(_))throw new Error("writeUintLE value must be an integer");for(var S=1,C=E;C<E+n/8;C++)x[C]=_/S&255,S*=256;return x}binary.writeUintLE=writeUintLE;function readFloat32BE(n,_){_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.getFloat32(_)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(n,_){_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.getFloat32(_,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(n,_){_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.getFloat64(_)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(n,_){_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.getFloat64(_,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(n,_,x){_===void 0&&(_=new Uint8Array(4)),x===void 0&&(x=0);var E=new DataView(_.buffer,_.byteOffset,_.byteLength);return E.setFloat32(x,n),_}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(n,_,x){_===void 0&&(_=new Uint8Array(4)),x===void 0&&(x=0);var E=new DataView(_.buffer,_.byteOffset,_.byteLength);return E.setFloat32(x,n,!0),_}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(n,_,x){_===void 0&&(_=new Uint8Array(8)),x===void 0&&(x=0);var E=new DataView(_.buffer,_.byteOffset,_.byteLength);return E.setFloat64(x,n),_}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(n,_,x){_===void 0&&(_=new Uint8Array(8)),x===void 0&&(x=0);var E=new DataView(_.buffer,_.byteOffset,_.byteLength);return E.setFloat64(x,n,!0),_}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(n){for(var _=0;_<n.length;_++)n[_]=0;return n}wipe$1.wipe=wipe;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var _=binary,x=wipe$1;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var E=function(){function A(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return A.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},A.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},A.prototype.clean=function(){x.wipe(this._buffer),x.wipe(this._temp),this.reset()},A.prototype.update=function(B,I){if(I===void 0&&(I=B.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var M=0;if(this._bytesHashed+=I,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&I>0;)this._buffer[this._bufferLength++]=B[M++],I--;this._bufferLength===this.blockSize&&(C(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(I>=this.blockSize&&(M=C(this._temp,this._state,B,M,I),I%=this.blockSize);I>0;)this._buffer[this._bufferLength++]=B[M++],I--;return this},A.prototype.finish=function(B){if(!this._finished){var I=this._bytesHashed,M=this._bufferLength,O=I/536870912|0,D=I<<3,L=I%64<56?64:128;this._buffer[M]=128;for(var V=M+1;V<L-8;V++)this._buffer[V]=0;_.writeUint32BE(O,this._buffer,L-8),_.writeUint32BE(D,this._buffer,L-4),C(this._temp,this._state,this._buffer,0,L),this._finished=!0}for(var V=0;V<this.digestLength/4;V++)_.writeUint32BE(this._state[V],B,V*4);return this},A.prototype.digest=function(){var B=new Uint8Array(this.digestLength);return this.finish(B),B},A.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},A.prototype.restoreState=function(B){return this._state.set(B.state),this._bufferLength=B.bufferLength,B.buffer&&this._buffer.set(B.buffer),this._bytesHashed=B.bytesHashed,this._finished=!1,this},A.prototype.cleanSavedState=function(B){x.wipe(B.state),B.buffer&&x.wipe(B.buffer),B.bufferLength=0,B.bytesHashed=0},A}();n.SHA256=E;var S=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function C(A,B,I,M,O){for(;O>=64;){for(var D=B[0],L=B[1],V=B[2],U=B[3],q=B[4],H=B[5],W=B[6],Q=B[7],re=0;re<16;re++){var ce=M+re*4;A[re]=_.readUint32BE(I,ce)}for(var re=16;re<64;re++){var ne=A[re-2],Y=(ne>>>17|ne<<32-17)^(ne>>>19|ne<<32-19)^ne>>>10;ne=A[re-15];var fe=(ne>>>7|ne<<32-7)^(ne>>>18|ne<<32-18)^ne>>>3;A[re]=(Y+A[re-7]|0)+(fe+A[re-16]|0)}for(var re=0;re<64;re++){var Y=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&H^~q&W)|0)+(Q+(S[re]+A[re]|0)|0)|0,fe=((D>>>2|D<<32-2)^(D>>>13|D<<32-13)^(D>>>22|D<<32-22))+(D&L^D&V^L&V)|0;Q=W,W=H,H=q,q=U+Y|0,U=V,V=L,L=D,D=Y+fe|0}B[0]+=D,B[1]+=L,B[2]+=V,B[3]+=U,B[4]+=q,B[5]+=H,B[6]+=W,B[7]+=Q,M+=64,O-=64}return M}function T(A){var B=new E;B.update(A);var I=B.digest();return B.clean(),I}n.hash=T})(sha256$4);var sha3$1={exports:{}};(function(n){(function(){var _="input is invalid type",x="finalize already called",E=typeof window=="object",S=E?window:{};S.JS_SHA3_NO_WINDOW&&(E=!1);var C=!E&&typeof self=="object",T=!S.JS_SHA3_NO_NODE_JS&&typeof browser$1$1=="object"&&browser$1$1.versions&&browser$1$1.versions.node;T?S=commonjsGlobal:C&&(S=self);var A=!S.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,B=!S.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",I="0123456789abcdef".split(""),M=[31,7936,2031616,520093696],O=[4,1024,262144,67108864],D=[1,256,65536,16777216],L=[6,1536,393216,100663296],V=[0,8,16,24],U=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],q=[224,256,384,512],H=[128,256],W=["hex","buffer","arrayBuffer","array","digest"],Q={128:168,256:136};(S.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(he){return Object.prototype.toString.call(he)==="[object Array]"}),B&&(S.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(he){return typeof he=="object"&&he.buffer&&he.buffer.constructor===ArrayBuffer});for(var re=function(he,Se,we){return function(xe){return new j(he,Se,he).update(xe)[we]()}},ce=function(he,Se,we){return function(xe,Ee){return new j(he,Se,Ee).update(xe)[we]()}},ne=function(he,Se,we){return function(xe,Ee,ye,Ce){return F["cshake"+he].update(xe,Ee,ye,Ce)[we]()}},Y=function(he,Se,we){return function(xe,Ee,ye,Ce){return F["kmac"+he].update(xe,Ee,ye,Ce)[we]()}},fe=function(he,Se,we,xe){for(var Ee=0;Ee<W.length;++Ee){var ye=W[Ee];he[ye]=Se(we,xe,ye)}return he},ge=function(he,Se){var we=re(he,Se,"hex");return we.create=function(){return new j(he,Se,he)},we.update=function(xe){return we.create().update(xe)},fe(we,re,he,Se)},$e=function(he,Se){var we=ce(he,Se,"hex");return we.create=function(xe){return new j(he,Se,xe)},we.update=function(xe,Ee){return we.create(Ee).update(xe)},fe(we,ce,he,Se)},_e=function(he,Se){var we=Q[he],xe=ne(he,Se,"hex");return xe.create=function(Ee,ye,Ce){return!ye&&!Ce?F["shake"+he].create(Ee):new j(he,Se,Ee).bytepad([ye,Ce],we)},xe.update=function(Ee,ye,Ce,ve){return xe.create(ye,Ce,ve).update(Ee)},fe(xe,ne,he,Se)},ae=function(he,Se){var we=Q[he],xe=Y(he,Se,"hex");return xe.create=function(Ee,ye,Ce){return new ee(he,Se,ye).bytepad(["KMAC",Ce],we).bytepad([Ee],we)},xe.update=function(Ee,ye,Ce,ve){return xe.create(Ee,Ce,ve).update(ye)},fe(xe,Y,he,Se)},X=[{name:"keccak",padding:D,bits:q,createMethod:ge},{name:"sha3",padding:L,bits:q,createMethod:ge},{name:"shake",padding:M,bits:H,createMethod:$e},{name:"cshake",padding:O,bits:H,createMethod:_e},{name:"kmac",padding:O,bits:H,createMethod:ae}],F={},z=[],J=0;J<X.length;++J)for(var te=X[J],se=te.bits,oe=0;oe<se.length;++oe){var ie=te.name+"_"+se[oe];if(z.push(ie),F[ie]=te.createMethod(se[oe],te.padding),te.name!=="sha3"){var G=te.name+se[oe];z.push(G),F[G]=F[ie]}}function j(he,Se,we){this.blocks=[],this.s=[],this.padding=Se,this.outputBits=we,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(he<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=we>>5,this.extraBytes=(we&31)>>3;for(var xe=0;xe<50;++xe)this.s[xe]=0}j.prototype.update=function(he){if(this.finalized)throw new Error(x);var Se,we=typeof he;if(we!=="string"){if(we==="object"){if(he===null)throw new Error(_);if(B&&he.constructor===ArrayBuffer)he=new Uint8Array(he);else if(!Array.isArray(he)&&(!B||!ArrayBuffer.isView(he)))throw new Error(_)}else throw new Error(_);Se=!0}for(var xe=this.blocks,Ee=this.byteCount,ye=he.length,Ce=this.blockCount,ve=0,Be=this.s,me,Ie;ve<ye;){if(this.reset)for(this.reset=!1,xe[0]=this.block,me=1;me<Ce+1;++me)xe[me]=0;if(Se)for(me=this.start;ve<ye&&me<Ee;++ve)xe[me>>2]|=he[ve]<<V[me++&3];else for(me=this.start;ve<ye&&me<Ee;++ve)Ie=he.charCodeAt(ve),Ie<128?xe[me>>2]|=Ie<<V[me++&3]:Ie<2048?(xe[me>>2]|=(192|Ie>>6)<<V[me++&3],xe[me>>2]|=(128|Ie&63)<<V[me++&3]):Ie<55296||Ie>=57344?(xe[me>>2]|=(224|Ie>>12)<<V[me++&3],xe[me>>2]|=(128|Ie>>6&63)<<V[me++&3],xe[me>>2]|=(128|Ie&63)<<V[me++&3]):(Ie=65536+((Ie&1023)<<10|he.charCodeAt(++ve)&1023),xe[me>>2]|=(240|Ie>>18)<<V[me++&3],xe[me>>2]|=(128|Ie>>12&63)<<V[me++&3],xe[me>>2]|=(128|Ie>>6&63)<<V[me++&3],xe[me>>2]|=(128|Ie&63)<<V[me++&3]);if(this.lastByteIndex=me,me>=Ee){for(this.start=me-Ee,this.block=xe[Ce],me=0;me<Ce;++me)Be[me]^=xe[me];pe(Be),this.reset=!0}else this.start=me}return this},j.prototype.encode=function(he,Se){var we=he&255,xe=1,Ee=[we];for(he=he>>8,we=he&255;we>0;)Ee.unshift(we),he=he>>8,we=he&255,++xe;return Se?Ee.push(xe):Ee.unshift(xe),this.update(Ee),Ee.length},j.prototype.encodeString=function(he){var Se,we=typeof he;if(we!=="string"){if(we==="object"){if(he===null)throw new Error(_);if(B&&he.constructor===ArrayBuffer)he=new Uint8Array(he);else if(!Array.isArray(he)&&(!B||!ArrayBuffer.isView(he)))throw new Error(_)}else throw new Error(_);Se=!0}var xe=0,Ee=he.length;if(Se)xe=Ee;else for(var ye=0;ye<he.length;++ye){var Ce=he.charCodeAt(ye);Ce<128?xe+=1:Ce<2048?xe+=2:Ce<55296||Ce>=57344?xe+=3:(Ce=65536+((Ce&1023)<<10|he.charCodeAt(++ye)&1023),xe+=4)}return xe+=this.encode(xe*8),this.update(he),xe},j.prototype.bytepad=function(he,Se){for(var we=this.encode(Se),xe=0;xe<he.length;++xe)we+=this.encodeString(he[xe]);var Ee=Se-we%Se,ye=[];return ye.length=Ee,this.update(ye),this},j.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var he=this.blocks,Se=this.lastByteIndex,we=this.blockCount,xe=this.s;if(he[Se>>2]|=this.padding[Se&3],this.lastByteIndex===this.byteCount)for(he[0]=he[we],Se=1;Se<we+1;++Se)he[Se]=0;for(he[we-1]|=2147483648,Se=0;Se<we;++Se)xe[Se]^=he[Se];pe(xe)}},j.prototype.toString=j.prototype.hex=function(){this.finalize();for(var he=this.blockCount,Se=this.s,we=this.outputBlocks,xe=this.extraBytes,Ee=0,ye=0,Ce="",ve;ye<we;){for(Ee=0;Ee<he&&ye<we;++Ee,++ye)ve=Se[Ee],Ce+=I[ve>>4&15]+I[ve&15]+I[ve>>12&15]+I[ve>>8&15]+I[ve>>20&15]+I[ve>>16&15]+I[ve>>28&15]+I[ve>>24&15];ye%he===0&&(pe(Se),Ee=0)}return xe&&(ve=Se[Ee],Ce+=I[ve>>4&15]+I[ve&15],xe>1&&(Ce+=I[ve>>12&15]+I[ve>>8&15]),xe>2&&(Ce+=I[ve>>20&15]+I[ve>>16&15])),Ce},j.prototype.arrayBuffer=function(){this.finalize();var he=this.blockCount,Se=this.s,we=this.outputBlocks,xe=this.extraBytes,Ee=0,ye=0,Ce=this.outputBits>>3,ve;xe?ve=new ArrayBuffer(we+1<<2):ve=new ArrayBuffer(Ce);for(var Be=new Uint32Array(ve);ye<we;){for(Ee=0;Ee<he&&ye<we;++Ee,++ye)Be[ye]=Se[Ee];ye%he===0&&pe(Se)}return xe&&(Be[Ee]=Se[Ee],ve=ve.slice(0,Ce)),ve},j.prototype.buffer=j.prototype.arrayBuffer,j.prototype.digest=j.prototype.array=function(){this.finalize();for(var he=this.blockCount,Se=this.s,we=this.outputBlocks,xe=this.extraBytes,Ee=0,ye=0,Ce=[],ve,Be;ye<we;){for(Ee=0;Ee<he&&ye<we;++Ee,++ye)ve=ye<<2,Be=Se[Ee],Ce[ve]=Be&255,Ce[ve+1]=Be>>8&255,Ce[ve+2]=Be>>16&255,Ce[ve+3]=Be>>24&255;ye%he===0&&pe(Se)}return xe&&(ve=ye<<2,Be=Se[Ee],Ce[ve]=Be&255,xe>1&&(Ce[ve+1]=Be>>8&255),xe>2&&(Ce[ve+2]=Be>>16&255)),Ce};function ee(he,Se,we){j.call(this,he,Se,we)}ee.prototype=new j,ee.prototype.finalize=function(){return this.encode(this.outputBits,!0),j.prototype.finalize.call(this)};var pe=function(he){var Se,we,xe,Ee,ye,Ce,ve,Be,me,Ie,Ve,Me,Ne,Pe,He,We,Ke,Ge,nt,ot,Ze,Re,be,Ae,Le,Xe,Qe,et,St,mt,dt,jt,Ct,Rt,ur,Gt,Nt,er,Mt,kt,tr,Vt,Bt,ar,qt,Tt,ir,qe,Oe,De,ue,ke,Fe,Ue,ze,Ye,rt,at,ct,st,lt,ht,bt;for(xe=0;xe<48;xe+=2)Ee=he[0]^he[10]^he[20]^he[30]^he[40],ye=he[1]^he[11]^he[21]^he[31]^he[41],Ce=he[2]^he[12]^he[22]^he[32]^he[42],ve=he[3]^he[13]^he[23]^he[33]^he[43],Be=he[4]^he[14]^he[24]^he[34]^he[44],me=he[5]^he[15]^he[25]^he[35]^he[45],Ie=he[6]^he[16]^he[26]^he[36]^he[46],Ve=he[7]^he[17]^he[27]^he[37]^he[47],Me=he[8]^he[18]^he[28]^he[38]^he[48],Ne=he[9]^he[19]^he[29]^he[39]^he[49],Se=Me^(Ce<<1|ve>>>31),we=Ne^(ve<<1|Ce>>>31),he[0]^=Se,he[1]^=we,he[10]^=Se,he[11]^=we,he[20]^=Se,he[21]^=we,he[30]^=Se,he[31]^=we,he[40]^=Se,he[41]^=we,Se=Ee^(Be<<1|me>>>31),we=ye^(me<<1|Be>>>31),he[2]^=Se,he[3]^=we,he[12]^=Se,he[13]^=we,he[22]^=Se,he[23]^=we,he[32]^=Se,he[33]^=we,he[42]^=Se,he[43]^=we,Se=Ce^(Ie<<1|Ve>>>31),we=ve^(Ve<<1|Ie>>>31),he[4]^=Se,he[5]^=we,he[14]^=Se,he[15]^=we,he[24]^=Se,he[25]^=we,he[34]^=Se,he[35]^=we,he[44]^=Se,he[45]^=we,Se=Be^(Me<<1|Ne>>>31),we=me^(Ne<<1|Me>>>31),he[6]^=Se,he[7]^=we,he[16]^=Se,he[17]^=we,he[26]^=Se,he[27]^=we,he[36]^=Se,he[37]^=we,he[46]^=Se,he[47]^=we,Se=Ie^(Ee<<1|ye>>>31),we=Ve^(ye<<1|Ee>>>31),he[8]^=Se,he[9]^=we,he[18]^=Se,he[19]^=we,he[28]^=Se,he[29]^=we,he[38]^=Se,he[39]^=we,he[48]^=Se,he[49]^=we,Pe=he[0],He=he[1],Tt=he[11]<<4|he[10]>>>28,ir=he[10]<<4|he[11]>>>28,et=he[20]<<3|he[21]>>>29,St=he[21]<<3|he[20]>>>29,st=he[31]<<9|he[30]>>>23,lt=he[30]<<9|he[31]>>>23,Vt=he[40]<<18|he[41]>>>14,Bt=he[41]<<18|he[40]>>>14,Rt=he[2]<<1|he[3]>>>31,ur=he[3]<<1|he[2]>>>31,We=he[13]<<12|he[12]>>>20,Ke=he[12]<<12|he[13]>>>20,qe=he[22]<<10|he[23]>>>22,Oe=he[23]<<10|he[22]>>>22,mt=he[33]<<13|he[32]>>>19,dt=he[32]<<13|he[33]>>>19,ht=he[42]<<2|he[43]>>>30,bt=he[43]<<2|he[42]>>>30,Ue=he[5]<<30|he[4]>>>2,ze=he[4]<<30|he[5]>>>2,Gt=he[14]<<6|he[15]>>>26,Nt=he[15]<<6|he[14]>>>26,Ge=he[25]<<11|he[24]>>>21,nt=he[24]<<11|he[25]>>>21,De=he[34]<<15|he[35]>>>17,ue=he[35]<<15|he[34]>>>17,jt=he[45]<<29|he[44]>>>3,Ct=he[44]<<29|he[45]>>>3,Ae=he[6]<<28|he[7]>>>4,Le=he[7]<<28|he[6]>>>4,Ye=he[17]<<23|he[16]>>>9,rt=he[16]<<23|he[17]>>>9,er=he[26]<<25|he[27]>>>7,Mt=he[27]<<25|he[26]>>>7,ot=he[36]<<21|he[37]>>>11,Ze=he[37]<<21|he[36]>>>11,ke=he[47]<<24|he[46]>>>8,Fe=he[46]<<24|he[47]>>>8,ar=he[8]<<27|he[9]>>>5,qt=he[9]<<27|he[8]>>>5,Xe=he[18]<<20|he[19]>>>12,Qe=he[19]<<20|he[18]>>>12,at=he[29]<<7|he[28]>>>25,ct=he[28]<<7|he[29]>>>25,kt=he[38]<<8|he[39]>>>24,tr=he[39]<<8|he[38]>>>24,Re=he[48]<<14|he[49]>>>18,be=he[49]<<14|he[48]>>>18,he[0]=Pe^~We&Ge,he[1]=He^~Ke&nt,he[10]=Ae^~Xe&et,he[11]=Le^~Qe&St,he[20]=Rt^~Gt&er,he[21]=ur^~Nt&Mt,he[30]=ar^~Tt&qe,he[31]=qt^~ir&Oe,he[40]=Ue^~Ye&at,he[41]=ze^~rt&ct,he[2]=We^~Ge&ot,he[3]=Ke^~nt&Ze,he[12]=Xe^~et&mt,he[13]=Qe^~St&dt,he[22]=Gt^~er&kt,he[23]=Nt^~Mt&tr,he[32]=Tt^~qe&De,he[33]=ir^~Oe&ue,he[42]=Ye^~at&st,he[43]=rt^~ct&lt,he[4]=Ge^~ot&Re,he[5]=nt^~Ze&be,he[14]=et^~mt&jt,he[15]=St^~dt&Ct,he[24]=er^~kt&Vt,he[25]=Mt^~tr&Bt,he[34]=qe^~De&ke,he[35]=Oe^~ue&Fe,he[44]=at^~st&ht,he[45]=ct^~lt&bt,he[6]=ot^~Re&Pe,he[7]=Ze^~be&He,he[16]=mt^~jt&Ae,he[17]=dt^~Ct&Le,he[26]=kt^~Vt&Rt,he[27]=tr^~Bt&ur,he[36]=De^~ke&ar,he[37]=ue^~Fe&qt,he[46]=st^~ht&Ue,he[47]=lt^~bt&ze,he[8]=Re^~Pe&We,he[9]=be^~He&Ke,he[18]=jt^~Ae&Xe,he[19]=Ct^~Le&Qe,he[28]=Vt^~Rt&Gt,he[29]=Bt^~ur&Nt,he[38]=ke^~ar&Tt,he[39]=Fe^~qt&ir,he[48]=ht^~Ue&Ye,he[49]=bt^~ze&rt,he[0]^=U[xe],he[1]^=U[xe+1]};if(A)n.exports=F;else for(J=0;J<z.length;++J)S[z[J]]=F[z[J]]})()})(sha3$1);var sha3Exports=sha3$1.exports;const sha3=getDefaultExportFromCjs(sha3Exports);var ed25519={},random={},system={},browser$2={};Object.defineProperty(browser$2,"__esModule",{value:!0});browser$2.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const _=typeof self<"u"?self.crypto||self.msCrypto:null;_&&_.getRandomValues!==void 0&&(this._crypto=_,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(_){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const x=new Uint8Array(_);for(let E=0;E<x.length;E+=QUOTA)this._crypto.getRandomValues(x.subarray(E,E+Math.min(x.length-E,QUOTA)));return x}}browser$2.BrowserRandomSource=BrowserRandomSource;var node={};Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$2=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const _=requireCryptoBrowserify();_&&_.randomBytes&&(this._crypto=_,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(_){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let x=this._crypto.randomBytes(_);if(x.length!==_)throw new Error("NodeRandomSource: got fewer bytes than requested");const E=new Uint8Array(_);for(let S=0;S<E.length;S++)E[S]=x[S];return(0,wipe_1$2.wipe)(x),E}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$2,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(_){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(_)}}system.SystemRandomSource=SystemRandomSource;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const _=system,x=binary,E=wipe$1;n.defaultRandomSource=new _.SystemRandomSource;function S(I,M=n.defaultRandomSource){return M.randomBytes(I)}n.randomBytes=S;function C(I=n.defaultRandomSource){const M=S(4,I),O=(0,x.readUint32LE)(M);return(0,E.wipe)(M),O}n.randomUint32=C;const T="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function A(I,M=T,O=n.defaultRandomSource){if(M.length<2)throw new Error("randomString charset is too short");if(M.length>256)throw new Error("randomString charset is too long");let D="";const L=M.length,V=256-256%L;for(;I>0;){const U=S(Math.ceil(I*256/V),O);for(let q=0;q<U.length&&I>0;q++){const H=U[q];H<V&&(D+=M.charAt(H%L),I--)}(0,E.wipe)(U)}return D}n.randomString=A;function B(I,M=T,O=n.defaultRandomSource){const D=Math.ceil(I/(Math.log(M.length)/Math.LN2));return A(D,M,O)}n.randomStringForEntropy=B})(random);var sha512={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var _=binary,x=wipe$1;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var E=function(){function A(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return A.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},A.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},A.prototype.clean=function(){x.wipe(this._buffer),x.wipe(this._tempHi),x.wipe(this._tempLo),this.reset()},A.prototype.update=function(B,I){if(I===void 0&&(I=B.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var M=0;if(this._bytesHashed+=I,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&I>0;)this._buffer[this._bufferLength++]=B[M++],I--;this._bufferLength===this.blockSize&&(C(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(I>=this.blockSize&&(M=C(this._tempHi,this._tempLo,this._stateHi,this._stateLo,B,M,I),I%=this.blockSize);I>0;)this._buffer[this._bufferLength++]=B[M++],I--;return this},A.prototype.finish=function(B){if(!this._finished){var I=this._bytesHashed,M=this._bufferLength,O=I/536870912|0,D=I<<3,L=I%128<112?128:256;this._buffer[M]=128;for(var V=M+1;V<L-8;V++)this._buffer[V]=0;_.writeUint32BE(O,this._buffer,L-8),_.writeUint32BE(D,this._buffer,L-4),C(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,L),this._finished=!0}for(var V=0;V<this.digestLength/8;V++)_.writeUint32BE(this._stateHi[V],B,V*8),_.writeUint32BE(this._stateLo[V],B,V*8+4);return this},A.prototype.digest=function(){var B=new Uint8Array(this.digestLength);return this.finish(B),B},A.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},A.prototype.restoreState=function(B){return this._stateHi.set(B.stateHi),this._stateLo.set(B.stateLo),this._bufferLength=B.bufferLength,B.buffer&&this._buffer.set(B.buffer),this._bytesHashed=B.bytesHashed,this._finished=!1,this},A.prototype.cleanSavedState=function(B){x.wipe(B.stateHi),x.wipe(B.stateLo),B.buffer&&x.wipe(B.buffer),B.bufferLength=0,B.bytesHashed=0},A}();n.SHA512=E;var S=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function C(A,B,I,M,O,D,L){for(var V=I[0],U=I[1],q=I[2],H=I[3],W=I[4],Q=I[5],re=I[6],ce=I[7],ne=M[0],Y=M[1],fe=M[2],ge=M[3],$e=M[4],_e=M[5],ae=M[6],X=M[7],F,z,J,te,se,oe,ie,G;L>=128;){for(var j=0;j<16;j++){var ee=8*j+D;A[j]=_.readUint32BE(O,ee),B[j]=_.readUint32BE(O,ee+4)}for(var j=0;j<80;j++){var pe=V,he=U,Se=q,we=H,xe=W,Ee=Q,ye=re,Ce=ce,ve=ne,Be=Y,me=fe,Ie=ge,Ve=$e,Me=_e,Ne=ae,Pe=X;if(F=ce,z=X,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=(W>>>14|$e<<32-14)^(W>>>18|$e<<32-18)^($e>>>41-32|W<<32-(41-32)),z=($e>>>14|W<<32-14)^($e>>>18|W<<32-18)^(W>>>41-32|$e<<32-(41-32)),se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,F=W&Q^~W&re,z=$e&_e^~$e&ae,se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,F=S[j*2],z=S[j*2+1],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,F=A[j%16],z=B[j%16],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,J=ie&65535|G<<16,te=se&65535|oe<<16,F=J,z=te,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=(V>>>28|ne<<32-28)^(ne>>>34-32|V<<32-(34-32))^(ne>>>39-32|V<<32-(39-32)),z=(ne>>>28|V<<32-28)^(V>>>34-32|ne<<32-(34-32))^(V>>>39-32|ne<<32-(39-32)),se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,F=V&U^V&q^U&q,z=ne&Y^ne&fe^Y&fe,se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,Ce=ie&65535|G<<16,Pe=se&65535|oe<<16,F=we,z=Ie,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=J,z=te,se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,we=ie&65535|G<<16,Ie=se&65535|oe<<16,U=pe,q=he,H=Se,W=we,Q=xe,re=Ee,ce=ye,V=Ce,Y=ve,fe=Be,ge=me,$e=Ie,_e=Ve,ae=Me,X=Ne,ne=Pe,j%16===15)for(var ee=0;ee<16;ee++)F=A[ee],z=B[ee],se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=A[(ee+9)%16],z=B[(ee+9)%16],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,J=A[(ee+1)%16],te=B[(ee+1)%16],F=(J>>>1|te<<32-1)^(J>>>8|te<<32-8)^J>>>7,z=(te>>>1|J<<32-1)^(te>>>8|J<<32-8)^(te>>>7|J<<32-7),se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,J=A[(ee+14)%16],te=B[(ee+14)%16],F=(J>>>19|te<<32-19)^(te>>>61-32|J<<32-(61-32))^J>>>6,z=(te>>>19|J<<32-19)^(J>>>61-32|te<<32-(61-32))^(te>>>6|J<<32-6),se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,A[ee]=ie&65535|G<<16,B[ee]=se&65535|oe<<16}F=V,z=ne,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[0],z=M[0],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[0]=V=ie&65535|G<<16,M[0]=ne=se&65535|oe<<16,F=U,z=Y,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[1],z=M[1],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[1]=U=ie&65535|G<<16,M[1]=Y=se&65535|oe<<16,F=q,z=fe,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[2],z=M[2],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[2]=q=ie&65535|G<<16,M[2]=fe=se&65535|oe<<16,F=H,z=ge,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[3],z=M[3],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[3]=H=ie&65535|G<<16,M[3]=ge=se&65535|oe<<16,F=W,z=$e,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[4],z=M[4],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[4]=W=ie&65535|G<<16,M[4]=$e=se&65535|oe<<16,F=Q,z=_e,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[5],z=M[5],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[5]=Q=ie&65535|G<<16,M[5]=_e=se&65535|oe<<16,F=re,z=ae,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[6],z=M[6],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[6]=re=ie&65535|G<<16,M[6]=ae=se&65535|oe<<16,F=ce,z=X,se=z&65535,oe=z>>>16,ie=F&65535,G=F>>>16,F=I[7],z=M[7],se+=z&65535,oe+=z>>>16,ie+=F&65535,G+=F>>>16,oe+=se>>>16,ie+=oe>>>16,G+=ie>>>16,I[7]=ce=ie&65535|G<<16,M[7]=X=se&65535|oe<<16,D+=128,L-=128}return D}function T(A){var B=new E;B.update(A);var I=B.digest();return B.clean(),I}n.hash=T})(sha512);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const _=random,x=sha512,E=wipe$1;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function S(we){const xe=new Float64Array(16);if(we)for(let Ee=0;Ee<we.length;Ee++)xe[Ee]=we[Ee];return xe}const C=new Uint8Array(32);C[0]=9;const T=S(),A=S([1]),B=S([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),I=S([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),M=S([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=S([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=S([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function L(we,xe){for(let Ee=0;Ee<16;Ee++)we[Ee]=xe[Ee]|0}function V(we){let xe=1;for(let Ee=0;Ee<16;Ee++){let ye=we[Ee]+xe+65535;xe=Math.floor(ye/65536),we[Ee]=ye-xe*65536}we[0]+=xe-1+37*(xe-1)}function U(we,xe,Ee){const ye=~(Ee-1);for(let Ce=0;Ce<16;Ce++){const ve=ye&(we[Ce]^xe[Ce]);we[Ce]^=ve,xe[Ce]^=ve}}function q(we,xe){const Ee=S(),ye=S();for(let Ce=0;Ce<16;Ce++)ye[Ce]=xe[Ce];V(ye),V(ye),V(ye);for(let Ce=0;Ce<2;Ce++){Ee[0]=ye[0]-65517;for(let Be=1;Be<15;Be++)Ee[Be]=ye[Be]-65535-(Ee[Be-1]>>16&1),Ee[Be-1]&=65535;Ee[15]=ye[15]-32767-(Ee[14]>>16&1);const ve=Ee[15]>>16&1;Ee[14]&=65535,U(ye,Ee,1-ve)}for(let Ce=0;Ce<16;Ce++)we[2*Ce]=ye[Ce]&255,we[2*Ce+1]=ye[Ce]>>8}function H(we,xe){let Ee=0;for(let ye=0;ye<32;ye++)Ee|=we[ye]^xe[ye];return(1&Ee-1>>>8)-1}function W(we,xe){const Ee=new Uint8Array(32),ye=new Uint8Array(32);return q(Ee,we),q(ye,xe),H(Ee,ye)}function Q(we){const xe=new Uint8Array(32);return q(xe,we),xe[0]&1}function re(we,xe){for(let Ee=0;Ee<16;Ee++)we[Ee]=xe[2*Ee]+(xe[2*Ee+1]<<8);we[15]&=32767}function ce(we,xe,Ee){for(let ye=0;ye<16;ye++)we[ye]=xe[ye]+Ee[ye]}function ne(we,xe,Ee){for(let ye=0;ye<16;ye++)we[ye]=xe[ye]-Ee[ye]}function Y(we,xe,Ee){let ye,Ce,ve=0,Be=0,me=0,Ie=0,Ve=0,Me=0,Ne=0,Pe=0,He=0,We=0,Ke=0,Ge=0,nt=0,ot=0,Ze=0,Re=0,be=0,Ae=0,Le=0,Xe=0,Qe=0,et=0,St=0,mt=0,dt=0,jt=0,Ct=0,Rt=0,ur=0,Gt=0,Nt=0,er=Ee[0],Mt=Ee[1],kt=Ee[2],tr=Ee[3],Vt=Ee[4],Bt=Ee[5],ar=Ee[6],qt=Ee[7],Tt=Ee[8],ir=Ee[9],qe=Ee[10],Oe=Ee[11],De=Ee[12],ue=Ee[13],ke=Ee[14],Fe=Ee[15];ye=xe[0],ve+=ye*er,Be+=ye*Mt,me+=ye*kt,Ie+=ye*tr,Ve+=ye*Vt,Me+=ye*Bt,Ne+=ye*ar,Pe+=ye*qt,He+=ye*Tt,We+=ye*ir,Ke+=ye*qe,Ge+=ye*Oe,nt+=ye*De,ot+=ye*ue,Ze+=ye*ke,Re+=ye*Fe,ye=xe[1],Be+=ye*er,me+=ye*Mt,Ie+=ye*kt,Ve+=ye*tr,Me+=ye*Vt,Ne+=ye*Bt,Pe+=ye*ar,He+=ye*qt,We+=ye*Tt,Ke+=ye*ir,Ge+=ye*qe,nt+=ye*Oe,ot+=ye*De,Ze+=ye*ue,Re+=ye*ke,be+=ye*Fe,ye=xe[2],me+=ye*er,Ie+=ye*Mt,Ve+=ye*kt,Me+=ye*tr,Ne+=ye*Vt,Pe+=ye*Bt,He+=ye*ar,We+=ye*qt,Ke+=ye*Tt,Ge+=ye*ir,nt+=ye*qe,ot+=ye*Oe,Ze+=ye*De,Re+=ye*ue,be+=ye*ke,Ae+=ye*Fe,ye=xe[3],Ie+=ye*er,Ve+=ye*Mt,Me+=ye*kt,Ne+=ye*tr,Pe+=ye*Vt,He+=ye*Bt,We+=ye*ar,Ke+=ye*qt,Ge+=ye*Tt,nt+=ye*ir,ot+=ye*qe,Ze+=ye*Oe,Re+=ye*De,be+=ye*ue,Ae+=ye*ke,Le+=ye*Fe,ye=xe[4],Ve+=ye*er,Me+=ye*Mt,Ne+=ye*kt,Pe+=ye*tr,He+=ye*Vt,We+=ye*Bt,Ke+=ye*ar,Ge+=ye*qt,nt+=ye*Tt,ot+=ye*ir,Ze+=ye*qe,Re+=ye*Oe,be+=ye*De,Ae+=ye*ue,Le+=ye*ke,Xe+=ye*Fe,ye=xe[5],Me+=ye*er,Ne+=ye*Mt,Pe+=ye*kt,He+=ye*tr,We+=ye*Vt,Ke+=ye*Bt,Ge+=ye*ar,nt+=ye*qt,ot+=ye*Tt,Ze+=ye*ir,Re+=ye*qe,be+=ye*Oe,Ae+=ye*De,Le+=ye*ue,Xe+=ye*ke,Qe+=ye*Fe,ye=xe[6],Ne+=ye*er,Pe+=ye*Mt,He+=ye*kt,We+=ye*tr,Ke+=ye*Vt,Ge+=ye*Bt,nt+=ye*ar,ot+=ye*qt,Ze+=ye*Tt,Re+=ye*ir,be+=ye*qe,Ae+=ye*Oe,Le+=ye*De,Xe+=ye*ue,Qe+=ye*ke,et+=ye*Fe,ye=xe[7],Pe+=ye*er,He+=ye*Mt,We+=ye*kt,Ke+=ye*tr,Ge+=ye*Vt,nt+=ye*Bt,ot+=ye*ar,Ze+=ye*qt,Re+=ye*Tt,be+=ye*ir,Ae+=ye*qe,Le+=ye*Oe,Xe+=ye*De,Qe+=ye*ue,et+=ye*ke,St+=ye*Fe,ye=xe[8],He+=ye*er,We+=ye*Mt,Ke+=ye*kt,Ge+=ye*tr,nt+=ye*Vt,ot+=ye*Bt,Ze+=ye*ar,Re+=ye*qt,be+=ye*Tt,Ae+=ye*ir,Le+=ye*qe,Xe+=ye*Oe,Qe+=ye*De,et+=ye*ue,St+=ye*ke,mt+=ye*Fe,ye=xe[9],We+=ye*er,Ke+=ye*Mt,Ge+=ye*kt,nt+=ye*tr,ot+=ye*Vt,Ze+=ye*Bt,Re+=ye*ar,be+=ye*qt,Ae+=ye*Tt,Le+=ye*ir,Xe+=ye*qe,Qe+=ye*Oe,et+=ye*De,St+=ye*ue,mt+=ye*ke,dt+=ye*Fe,ye=xe[10],Ke+=ye*er,Ge+=ye*Mt,nt+=ye*kt,ot+=ye*tr,Ze+=ye*Vt,Re+=ye*Bt,be+=ye*ar,Ae+=ye*qt,Le+=ye*Tt,Xe+=ye*ir,Qe+=ye*qe,et+=ye*Oe,St+=ye*De,mt+=ye*ue,dt+=ye*ke,jt+=ye*Fe,ye=xe[11],Ge+=ye*er,nt+=ye*Mt,ot+=ye*kt,Ze+=ye*tr,Re+=ye*Vt,be+=ye*Bt,Ae+=ye*ar,Le+=ye*qt,Xe+=ye*Tt,Qe+=ye*ir,et+=ye*qe,St+=ye*Oe,mt+=ye*De,dt+=ye*ue,jt+=ye*ke,Ct+=ye*Fe,ye=xe[12],nt+=ye*er,ot+=ye*Mt,Ze+=ye*kt,Re+=ye*tr,be+=ye*Vt,Ae+=ye*Bt,Le+=ye*ar,Xe+=ye*qt,Qe+=ye*Tt,et+=ye*ir,St+=ye*qe,mt+=ye*Oe,dt+=ye*De,jt+=ye*ue,Ct+=ye*ke,Rt+=ye*Fe,ye=xe[13],ot+=ye*er,Ze+=ye*Mt,Re+=ye*kt,be+=ye*tr,Ae+=ye*Vt,Le+=ye*Bt,Xe+=ye*ar,Qe+=ye*qt,et+=ye*Tt,St+=ye*ir,mt+=ye*qe,dt+=ye*Oe,jt+=ye*De,Ct+=ye*ue,Rt+=ye*ke,ur+=ye*Fe,ye=xe[14],Ze+=ye*er,Re+=ye*Mt,be+=ye*kt,Ae+=ye*tr,Le+=ye*Vt,Xe+=ye*Bt,Qe+=ye*ar,et+=ye*qt,St+=ye*Tt,mt+=ye*ir,dt+=ye*qe,jt+=ye*Oe,Ct+=ye*De,Rt+=ye*ue,ur+=ye*ke,Gt+=ye*Fe,ye=xe[15],Re+=ye*er,be+=ye*Mt,Ae+=ye*kt,Le+=ye*tr,Xe+=ye*Vt,Qe+=ye*Bt,et+=ye*ar,St+=ye*qt,mt+=ye*Tt,dt+=ye*ir,jt+=ye*qe,Ct+=ye*Oe,Rt+=ye*De,ur+=ye*ue,Gt+=ye*ke,Nt+=ye*Fe,ve+=38*be,Be+=38*Ae,me+=38*Le,Ie+=38*Xe,Ve+=38*Qe,Me+=38*et,Ne+=38*St,Pe+=38*mt,He+=38*dt,We+=38*jt,Ke+=38*Ct,Ge+=38*Rt,nt+=38*ur,ot+=38*Gt,Ze+=38*Nt,Ce=1,ye=ve+Ce+65535,Ce=Math.floor(ye/65536),ve=ye-Ce*65536,ye=Be+Ce+65535,Ce=Math.floor(ye/65536),Be=ye-Ce*65536,ye=me+Ce+65535,Ce=Math.floor(ye/65536),me=ye-Ce*65536,ye=Ie+Ce+65535,Ce=Math.floor(ye/65536),Ie=ye-Ce*65536,ye=Ve+Ce+65535,Ce=Math.floor(ye/65536),Ve=ye-Ce*65536,ye=Me+Ce+65535,Ce=Math.floor(ye/65536),Me=ye-Ce*65536,ye=Ne+Ce+65535,Ce=Math.floor(ye/65536),Ne=ye-Ce*65536,ye=Pe+Ce+65535,Ce=Math.floor(ye/65536),Pe=ye-Ce*65536,ye=He+Ce+65535,Ce=Math.floor(ye/65536),He=ye-Ce*65536,ye=We+Ce+65535,Ce=Math.floor(ye/65536),We=ye-Ce*65536,ye=Ke+Ce+65535,Ce=Math.floor(ye/65536),Ke=ye-Ce*65536,ye=Ge+Ce+65535,Ce=Math.floor(ye/65536),Ge=ye-Ce*65536,ye=nt+Ce+65535,Ce=Math.floor(ye/65536),nt=ye-Ce*65536,ye=ot+Ce+65535,Ce=Math.floor(ye/65536),ot=ye-Ce*65536,ye=Ze+Ce+65535,Ce=Math.floor(ye/65536),Ze=ye-Ce*65536,ye=Re+Ce+65535,Ce=Math.floor(ye/65536),Re=ye-Ce*65536,ve+=Ce-1+37*(Ce-1),Ce=1,ye=ve+Ce+65535,Ce=Math.floor(ye/65536),ve=ye-Ce*65536,ye=Be+Ce+65535,Ce=Math.floor(ye/65536),Be=ye-Ce*65536,ye=me+Ce+65535,Ce=Math.floor(ye/65536),me=ye-Ce*65536,ye=Ie+Ce+65535,Ce=Math.floor(ye/65536),Ie=ye-Ce*65536,ye=Ve+Ce+65535,Ce=Math.floor(ye/65536),Ve=ye-Ce*65536,ye=Me+Ce+65535,Ce=Math.floor(ye/65536),Me=ye-Ce*65536,ye=Ne+Ce+65535,Ce=Math.floor(ye/65536),Ne=ye-Ce*65536,ye=Pe+Ce+65535,Ce=Math.floor(ye/65536),Pe=ye-Ce*65536,ye=He+Ce+65535,Ce=Math.floor(ye/65536),He=ye-Ce*65536,ye=We+Ce+65535,Ce=Math.floor(ye/65536),We=ye-Ce*65536,ye=Ke+Ce+65535,Ce=Math.floor(ye/65536),Ke=ye-Ce*65536,ye=Ge+Ce+65535,Ce=Math.floor(ye/65536),Ge=ye-Ce*65536,ye=nt+Ce+65535,Ce=Math.floor(ye/65536),nt=ye-Ce*65536,ye=ot+Ce+65535,Ce=Math.floor(ye/65536),ot=ye-Ce*65536,ye=Ze+Ce+65535,Ce=Math.floor(ye/65536),Ze=ye-Ce*65536,ye=Re+Ce+65535,Ce=Math.floor(ye/65536),Re=ye-Ce*65536,ve+=Ce-1+37*(Ce-1),we[0]=ve,we[1]=Be,we[2]=me,we[3]=Ie,we[4]=Ve,we[5]=Me,we[6]=Ne,we[7]=Pe,we[8]=He,we[9]=We,we[10]=Ke,we[11]=Ge,we[12]=nt,we[13]=ot,we[14]=Ze,we[15]=Re}function fe(we,xe){Y(we,xe,xe)}function ge(we,xe){const Ee=S();let ye;for(ye=0;ye<16;ye++)Ee[ye]=xe[ye];for(ye=253;ye>=0;ye--)fe(Ee,Ee),ye!==2&&ye!==4&&Y(Ee,Ee,xe);for(ye=0;ye<16;ye++)we[ye]=Ee[ye]}function $e(we,xe){const Ee=S();let ye;for(ye=0;ye<16;ye++)Ee[ye]=xe[ye];for(ye=250;ye>=0;ye--)fe(Ee,Ee),ye!==1&&Y(Ee,Ee,xe);for(ye=0;ye<16;ye++)we[ye]=Ee[ye]}function _e(we,xe){const Ee=S(),ye=S(),Ce=S(),ve=S(),Be=S(),me=S(),Ie=S(),Ve=S(),Me=S();ne(Ee,we[1],we[0]),ne(Me,xe[1],xe[0]),Y(Ee,Ee,Me),ce(ye,we[0],we[1]),ce(Me,xe[0],xe[1]),Y(ye,ye,Me),Y(Ce,we[3],xe[3]),Y(Ce,Ce,I),Y(ve,we[2],xe[2]),ce(ve,ve,ve),ne(Be,ye,Ee),ne(me,ve,Ce),ce(Ie,ve,Ce),ce(Ve,ye,Ee),Y(we[0],Be,me),Y(we[1],Ve,Ie),Y(we[2],Ie,me),Y(we[3],Be,Ve)}function ae(we,xe,Ee){for(let ye=0;ye<4;ye++)U(we[ye],xe[ye],Ee)}function X(we,xe){const Ee=S(),ye=S(),Ce=S();ge(Ce,xe[2]),Y(Ee,xe[0],Ce),Y(ye,xe[1],Ce),q(we,ye),we[31]^=Q(Ee)<<7}function F(we,xe,Ee){L(we[0],T),L(we[1],A),L(we[2],A),L(we[3],T);for(let ye=255;ye>=0;--ye){const Ce=Ee[ye/8|0]>>(ye&7)&1;ae(we,xe,Ce),_e(xe,we),_e(we,we),ae(we,xe,Ce)}}function z(we,xe){const Ee=[S(),S(),S(),S()];L(Ee[0],M),L(Ee[1],O),L(Ee[2],A),Y(Ee[3],M,O),F(we,Ee,xe)}function J(we){if(we.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const xe=(0,x.hash)(we);xe[0]&=248,xe[31]&=127,xe[31]|=64;const Ee=new Uint8Array(32),ye=[S(),S(),S(),S()];z(ye,xe),X(Ee,ye);const Ce=new Uint8Array(64);return Ce.set(we),Ce.set(Ee,32),{publicKey:Ee,secretKey:Ce}}n.generateKeyPairFromSeed=J;function te(we){const xe=(0,_.randomBytes)(32,we),Ee=J(xe);return(0,E.wipe)(xe),Ee}n.generateKeyPair=te;function se(we){if(we.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(we.subarray(32))}n.extractPublicKeyFromSecretKey=se;const oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(we,xe){let Ee,ye,Ce,ve;for(ye=63;ye>=32;--ye){for(Ee=0,Ce=ye-32,ve=ye-12;Ce<ve;++Ce)xe[Ce]+=Ee-16*xe[ye]*oe[Ce-(ye-32)],Ee=Math.floor((xe[Ce]+128)/256),xe[Ce]-=Ee*256;xe[Ce]+=Ee,xe[ye]=0}for(Ee=0,Ce=0;Ce<32;Ce++)xe[Ce]+=Ee-(xe[31]>>4)*oe[Ce],Ee=xe[Ce]>>8,xe[Ce]&=255;for(Ce=0;Ce<32;Ce++)xe[Ce]-=Ee*oe[Ce];for(ye=0;ye<32;ye++)xe[ye+1]+=xe[ye]>>8,we[ye]=xe[ye]&255}function G(we){const xe=new Float64Array(64);for(let Ee=0;Ee<64;Ee++)xe[Ee]=we[Ee];for(let Ee=0;Ee<64;Ee++)we[Ee]=0;ie(we,xe)}function j(we,xe){const Ee=new Float64Array(64),ye=[S(),S(),S(),S()],Ce=(0,x.hash)(we.subarray(0,32));Ce[0]&=248,Ce[31]&=127,Ce[31]|=64;const ve=new Uint8Array(64);ve.set(Ce.subarray(32),32);const Be=new x.SHA512;Be.update(ve.subarray(32)),Be.update(xe);const me=Be.digest();Be.clean(),G(me),z(ye,me),X(ve,ye),Be.reset(),Be.update(ve.subarray(0,32)),Be.update(we.subarray(32)),Be.update(xe);const Ie=Be.digest();G(Ie);for(let Ve=0;Ve<32;Ve++)Ee[Ve]=me[Ve];for(let Ve=0;Ve<32;Ve++)for(let Me=0;Me<32;Me++)Ee[Ve+Me]+=Ie[Ve]*Ce[Me];return ie(ve.subarray(32),Ee),ve}n.sign=j;function ee(we,xe){const Ee=S(),ye=S(),Ce=S(),ve=S(),Be=S(),me=S(),Ie=S();return L(we[2],A),re(we[1],xe),fe(Ce,we[1]),Y(ve,Ce,B),ne(Ce,Ce,we[2]),ce(ve,we[2],ve),fe(Be,ve),fe(me,Be),Y(Ie,me,Be),Y(Ee,Ie,Ce),Y(Ee,Ee,ve),$e(Ee,Ee),Y(Ee,Ee,Ce),Y(Ee,Ee,ve),Y(Ee,Ee,ve),Y(we[0],Ee,ve),fe(ye,we[0]),Y(ye,ye,ve),W(ye,Ce)&&Y(we[0],we[0],D),fe(ye,we[0]),Y(ye,ye,ve),W(ye,Ce)?-1:(Q(we[0])===xe[31]>>7&&ne(we[0],T,we[0]),Y(we[3],we[0],we[1]),0)}function pe(we,xe,Ee){const ye=new Uint8Array(32),Ce=[S(),S(),S(),S()],ve=[S(),S(),S(),S()];if(Ee.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ee(ve,we))return!1;const Be=new x.SHA512;Be.update(Ee.subarray(0,32)),Be.update(we),Be.update(xe);const me=Be.digest();return G(me),F(Ce,ve,me),z(ve,Ee.subarray(32)),_e(Ce,ve),X(ye,Ce),!H(Ee,ye)}n.verify=pe;function he(we){let xe=[S(),S(),S(),S()];if(ee(xe,we))throw new Error("Ed25519: invalid public key");let Ee=S(),ye=S(),Ce=xe[1];ce(Ee,A,Ce),ne(ye,A,Ce),ge(ye,ye),Y(Ee,Ee,ye);let ve=new Uint8Array(32);return q(ve,Ee),ve}n.convertPublicKeyToX25519=he;function Se(we){const xe=(0,x.hash)(we.subarray(0,32));xe[0]&=248,xe[31]&=127,xe[31]|=64;const Ee=new Uint8Array(xe.subarray(0,32));return(0,E.wipe)(xe),Ee}n.convertSecretKeyToX25519=Se})(ed25519);var dist={};Object.defineProperty(dist,"__esModule",{value:!0});dist.bech32m=bech32=dist.bech32=void 0;const ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let n=0;n<ALPHABET$1.length;n++){const _=ALPHABET$1.charAt(n);ALPHABET_MAP[_]=n}function polymodStep(n){const _=n>>25;return(n&33554431)<<5^-(_>>0&1)&996825010^-(_>>1&1)&642813549^-(_>>2&1)&513874426^-(_>>3&1)&1027748829^-(_>>4&1)&705979059}function prefixChk(n){let _=1;for(let x=0;x<n.length;++x){const E=n.charCodeAt(x);if(E<33||E>126)return"Invalid prefix ("+n+")";_=polymodStep(_)^E>>5}_=polymodStep(_);for(let x=0;x<n.length;++x){const E=n.charCodeAt(x);_=polymodStep(_)^E&31}return _}function convert(n,_,x,E){let S=0,C=0;const T=(1<<x)-1,A=[];for(let B=0;B<n.length;++B)for(S=S<<_|n[B],C+=_;C>=x;)C-=x,A.push(S>>C&T);if(E)C>0&&A.push(S<<x-C&T);else{if(C>=_)return"Excess padding";if(S<<x-C&T)return"Non-zero padding"}return A}function toWords(n){return convert(n,8,5,!0)}function fromWordsUnsafe(n){const _=convert(n,5,8,!1);if(Array.isArray(_))return _}function fromWords(n){const _=convert(n,5,8,!1);if(Array.isArray(_))return _;throw new Error(_)}function getLibraryFromEncoding(n){let _;n==="bech32"?_=1:_=734539939;function x(T,A,B){if(B=B||90,T.length+7+A.length>B)throw new TypeError("Exceeds length limit");T=T.toLowerCase();let I=prefixChk(T);if(typeof I=="string")throw new Error(I);let M=T+"1";for(let O=0;O<A.length;++O){const D=A[O];if(D>>5)throw new Error("Non 5-bit word");I=polymodStep(I)^D,M+=ALPHABET$1.charAt(D)}for(let O=0;O<6;++O)I=polymodStep(I);I^=_;for(let O=0;O<6;++O){const D=I>>(5-O)*5&31;M+=ALPHABET$1.charAt(D)}return M}function E(T,A){if(A=A||90,T.length<8)return T+" too short";if(T.length>A)return"Exceeds length limit";const B=T.toLowerCase(),I=T.toUpperCase();if(T!==B&&T!==I)return"Mixed-case string "+T;T=B;const M=T.lastIndexOf("1");if(M===-1)return"No separator character for "+T;if(M===0)return"Missing prefix for "+T;const O=T.slice(0,M),D=T.slice(M+1);if(D.length<6)return"Data too short";let L=prefixChk(O);if(typeof L=="string")return L;const V=[];for(let U=0;U<D.length;++U){const q=D.charAt(U),H=ALPHABET_MAP[q];if(H===void 0)return"Unknown character "+q;L=polymodStep(L)^H,!(U+6>=D.length)&&V.push(H)}return L!==_?"Invalid checksum for "+T:{prefix:O,words:V}}function S(T,A){const B=E(T,A);if(typeof B=="object")return B}function C(T,A){const B=E(T,A);if(typeof B=="object")return B;throw new Error(B)}return{decodeUnsafe:S,decode:C,encode:x,toWords,fromWordsUnsafe,fromWords}}var bech32=dist.bech32=getLibraryFromEncoding("bech32");dist.bech32m=getLibraryFromEncoding("bech32m");var x25519={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const _=random,x=wipe$1;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function E(re){const ce=new Float64Array(16);if(re)for(let ne=0;ne<re.length;ne++)ce[ne]=re[ne];return ce}const S=new Uint8Array(32);S[0]=9;const C=E([56129,1]);function T(re){let ce=1;for(let ne=0;ne<16;ne++){let Y=re[ne]+ce+65535;ce=Math.floor(Y/65536),re[ne]=Y-ce*65536}re[0]+=ce-1+37*(ce-1)}function A(re,ce,ne){const Y=~(ne-1);for(let fe=0;fe<16;fe++){const ge=Y&(re[fe]^ce[fe]);re[fe]^=ge,ce[fe]^=ge}}function B(re,ce){const ne=E(),Y=E();for(let fe=0;fe<16;fe++)Y[fe]=ce[fe];T(Y),T(Y),T(Y);for(let fe=0;fe<2;fe++){ne[0]=Y[0]-65517;for(let $e=1;$e<15;$e++)ne[$e]=Y[$e]-65535-(ne[$e-1]>>16&1),ne[$e-1]&=65535;ne[15]=Y[15]-32767-(ne[14]>>16&1);const ge=ne[15]>>16&1;ne[14]&=65535,A(Y,ne,1-ge)}for(let fe=0;fe<16;fe++)re[2*fe]=Y[fe]&255,re[2*fe+1]=Y[fe]>>8}function I(re,ce){for(let ne=0;ne<16;ne++)re[ne]=ce[2*ne]+(ce[2*ne+1]<<8);re[15]&=32767}function M(re,ce,ne){for(let Y=0;Y<16;Y++)re[Y]=ce[Y]+ne[Y]}function O(re,ce,ne){for(let Y=0;Y<16;Y++)re[Y]=ce[Y]-ne[Y]}function D(re,ce,ne){let Y,fe,ge=0,$e=0,_e=0,ae=0,X=0,F=0,z=0,J=0,te=0,se=0,oe=0,ie=0,G=0,j=0,ee=0,pe=0,he=0,Se=0,we=0,xe=0,Ee=0,ye=0,Ce=0,ve=0,Be=0,me=0,Ie=0,Ve=0,Me=0,Ne=0,Pe=0,He=ne[0],We=ne[1],Ke=ne[2],Ge=ne[3],nt=ne[4],ot=ne[5],Ze=ne[6],Re=ne[7],be=ne[8],Ae=ne[9],Le=ne[10],Xe=ne[11],Qe=ne[12],et=ne[13],St=ne[14],mt=ne[15];Y=ce[0],ge+=Y*He,$e+=Y*We,_e+=Y*Ke,ae+=Y*Ge,X+=Y*nt,F+=Y*ot,z+=Y*Ze,J+=Y*Re,te+=Y*be,se+=Y*Ae,oe+=Y*Le,ie+=Y*Xe,G+=Y*Qe,j+=Y*et,ee+=Y*St,pe+=Y*mt,Y=ce[1],$e+=Y*He,_e+=Y*We,ae+=Y*Ke,X+=Y*Ge,F+=Y*nt,z+=Y*ot,J+=Y*Ze,te+=Y*Re,se+=Y*be,oe+=Y*Ae,ie+=Y*Le,G+=Y*Xe,j+=Y*Qe,ee+=Y*et,pe+=Y*St,he+=Y*mt,Y=ce[2],_e+=Y*He,ae+=Y*We,X+=Y*Ke,F+=Y*Ge,z+=Y*nt,J+=Y*ot,te+=Y*Ze,se+=Y*Re,oe+=Y*be,ie+=Y*Ae,G+=Y*Le,j+=Y*Xe,ee+=Y*Qe,pe+=Y*et,he+=Y*St,Se+=Y*mt,Y=ce[3],ae+=Y*He,X+=Y*We,F+=Y*Ke,z+=Y*Ge,J+=Y*nt,te+=Y*ot,se+=Y*Ze,oe+=Y*Re,ie+=Y*be,G+=Y*Ae,j+=Y*Le,ee+=Y*Xe,pe+=Y*Qe,he+=Y*et,Se+=Y*St,we+=Y*mt,Y=ce[4],X+=Y*He,F+=Y*We,z+=Y*Ke,J+=Y*Ge,te+=Y*nt,se+=Y*ot,oe+=Y*Ze,ie+=Y*Re,G+=Y*be,j+=Y*Ae,ee+=Y*Le,pe+=Y*Xe,he+=Y*Qe,Se+=Y*et,we+=Y*St,xe+=Y*mt,Y=ce[5],F+=Y*He,z+=Y*We,J+=Y*Ke,te+=Y*Ge,se+=Y*nt,oe+=Y*ot,ie+=Y*Ze,G+=Y*Re,j+=Y*be,ee+=Y*Ae,pe+=Y*Le,he+=Y*Xe,Se+=Y*Qe,we+=Y*et,xe+=Y*St,Ee+=Y*mt,Y=ce[6],z+=Y*He,J+=Y*We,te+=Y*Ke,se+=Y*Ge,oe+=Y*nt,ie+=Y*ot,G+=Y*Ze,j+=Y*Re,ee+=Y*be,pe+=Y*Ae,he+=Y*Le,Se+=Y*Xe,we+=Y*Qe,xe+=Y*et,Ee+=Y*St,ye+=Y*mt,Y=ce[7],J+=Y*He,te+=Y*We,se+=Y*Ke,oe+=Y*Ge,ie+=Y*nt,G+=Y*ot,j+=Y*Ze,ee+=Y*Re,pe+=Y*be,he+=Y*Ae,Se+=Y*Le,we+=Y*Xe,xe+=Y*Qe,Ee+=Y*et,ye+=Y*St,Ce+=Y*mt,Y=ce[8],te+=Y*He,se+=Y*We,oe+=Y*Ke,ie+=Y*Ge,G+=Y*nt,j+=Y*ot,ee+=Y*Ze,pe+=Y*Re,he+=Y*be,Se+=Y*Ae,we+=Y*Le,xe+=Y*Xe,Ee+=Y*Qe,ye+=Y*et,Ce+=Y*St,ve+=Y*mt,Y=ce[9],se+=Y*He,oe+=Y*We,ie+=Y*Ke,G+=Y*Ge,j+=Y*nt,ee+=Y*ot,pe+=Y*Ze,he+=Y*Re,Se+=Y*be,we+=Y*Ae,xe+=Y*Le,Ee+=Y*Xe,ye+=Y*Qe,Ce+=Y*et,ve+=Y*St,Be+=Y*mt,Y=ce[10],oe+=Y*He,ie+=Y*We,G+=Y*Ke,j+=Y*Ge,ee+=Y*nt,pe+=Y*ot,he+=Y*Ze,Se+=Y*Re,we+=Y*be,xe+=Y*Ae,Ee+=Y*Le,ye+=Y*Xe,Ce+=Y*Qe,ve+=Y*et,Be+=Y*St,me+=Y*mt,Y=ce[11],ie+=Y*He,G+=Y*We,j+=Y*Ke,ee+=Y*Ge,pe+=Y*nt,he+=Y*ot,Se+=Y*Ze,we+=Y*Re,xe+=Y*be,Ee+=Y*Ae,ye+=Y*Le,Ce+=Y*Xe,ve+=Y*Qe,Be+=Y*et,me+=Y*St,Ie+=Y*mt,Y=ce[12],G+=Y*He,j+=Y*We,ee+=Y*Ke,pe+=Y*Ge,he+=Y*nt,Se+=Y*ot,we+=Y*Ze,xe+=Y*Re,Ee+=Y*be,ye+=Y*Ae,Ce+=Y*Le,ve+=Y*Xe,Be+=Y*Qe,me+=Y*et,Ie+=Y*St,Ve+=Y*mt,Y=ce[13],j+=Y*He,ee+=Y*We,pe+=Y*Ke,he+=Y*Ge,Se+=Y*nt,we+=Y*ot,xe+=Y*Ze,Ee+=Y*Re,ye+=Y*be,Ce+=Y*Ae,ve+=Y*Le,Be+=Y*Xe,me+=Y*Qe,Ie+=Y*et,Ve+=Y*St,Me+=Y*mt,Y=ce[14],ee+=Y*He,pe+=Y*We,he+=Y*Ke,Se+=Y*Ge,we+=Y*nt,xe+=Y*ot,Ee+=Y*Ze,ye+=Y*Re,Ce+=Y*be,ve+=Y*Ae,Be+=Y*Le,me+=Y*Xe,Ie+=Y*Qe,Ve+=Y*et,Me+=Y*St,Ne+=Y*mt,Y=ce[15],pe+=Y*He,he+=Y*We,Se+=Y*Ke,we+=Y*Ge,xe+=Y*nt,Ee+=Y*ot,ye+=Y*Ze,Ce+=Y*Re,ve+=Y*be,Be+=Y*Ae,me+=Y*Le,Ie+=Y*Xe,Ve+=Y*Qe,Me+=Y*et,Ne+=Y*St,Pe+=Y*mt,ge+=38*he,$e+=38*Se,_e+=38*we,ae+=38*xe,X+=38*Ee,F+=38*ye,z+=38*Ce,J+=38*ve,te+=38*Be,se+=38*me,oe+=38*Ie,ie+=38*Ve,G+=38*Me,j+=38*Ne,ee+=38*Pe,fe=1,Y=ge+fe+65535,fe=Math.floor(Y/65536),ge=Y-fe*65536,Y=$e+fe+65535,fe=Math.floor(Y/65536),$e=Y-fe*65536,Y=_e+fe+65535,fe=Math.floor(Y/65536),_e=Y-fe*65536,Y=ae+fe+65535,fe=Math.floor(Y/65536),ae=Y-fe*65536,Y=X+fe+65535,fe=Math.floor(Y/65536),X=Y-fe*65536,Y=F+fe+65535,fe=Math.floor(Y/65536),F=Y-fe*65536,Y=z+fe+65535,fe=Math.floor(Y/65536),z=Y-fe*65536,Y=J+fe+65535,fe=Math.floor(Y/65536),J=Y-fe*65536,Y=te+fe+65535,fe=Math.floor(Y/65536),te=Y-fe*65536,Y=se+fe+65535,fe=Math.floor(Y/65536),se=Y-fe*65536,Y=oe+fe+65535,fe=Math.floor(Y/65536),oe=Y-fe*65536,Y=ie+fe+65535,fe=Math.floor(Y/65536),ie=Y-fe*65536,Y=G+fe+65535,fe=Math.floor(Y/65536),G=Y-fe*65536,Y=j+fe+65535,fe=Math.floor(Y/65536),j=Y-fe*65536,Y=ee+fe+65535,fe=Math.floor(Y/65536),ee=Y-fe*65536,Y=pe+fe+65535,fe=Math.floor(Y/65536),pe=Y-fe*65536,ge+=fe-1+37*(fe-1),fe=1,Y=ge+fe+65535,fe=Math.floor(Y/65536),ge=Y-fe*65536,Y=$e+fe+65535,fe=Math.floor(Y/65536),$e=Y-fe*65536,Y=_e+fe+65535,fe=Math.floor(Y/65536),_e=Y-fe*65536,Y=ae+fe+65535,fe=Math.floor(Y/65536),ae=Y-fe*65536,Y=X+fe+65535,fe=Math.floor(Y/65536),X=Y-fe*65536,Y=F+fe+65535,fe=Math.floor(Y/65536),F=Y-fe*65536,Y=z+fe+65535,fe=Math.floor(Y/65536),z=Y-fe*65536,Y=J+fe+65535,fe=Math.floor(Y/65536),J=Y-fe*65536,Y=te+fe+65535,fe=Math.floor(Y/65536),te=Y-fe*65536,Y=se+fe+65535,fe=Math.floor(Y/65536),se=Y-fe*65536,Y=oe+fe+65535,fe=Math.floor(Y/65536),oe=Y-fe*65536,Y=ie+fe+65535,fe=Math.floor(Y/65536),ie=Y-fe*65536,Y=G+fe+65535,fe=Math.floor(Y/65536),G=Y-fe*65536,Y=j+fe+65535,fe=Math.floor(Y/65536),j=Y-fe*65536,Y=ee+fe+65535,fe=Math.floor(Y/65536),ee=Y-fe*65536,Y=pe+fe+65535,fe=Math.floor(Y/65536),pe=Y-fe*65536,ge+=fe-1+37*(fe-1),re[0]=ge,re[1]=$e,re[2]=_e,re[3]=ae,re[4]=X,re[5]=F,re[6]=z,re[7]=J,re[8]=te,re[9]=se,re[10]=oe,re[11]=ie,re[12]=G,re[13]=j,re[14]=ee,re[15]=pe}function L(re,ce){D(re,ce,ce)}function V(re,ce){const ne=E();for(let Y=0;Y<16;Y++)ne[Y]=ce[Y];for(let Y=253;Y>=0;Y--)L(ne,ne),Y!==2&&Y!==4&&D(ne,ne,ce);for(let Y=0;Y<16;Y++)re[Y]=ne[Y]}function U(re,ce){const ne=new Uint8Array(32),Y=new Float64Array(80),fe=E(),ge=E(),$e=E(),_e=E(),ae=E(),X=E();for(let te=0;te<31;te++)ne[te]=re[te];ne[31]=re[31]&127|64,ne[0]&=248,I(Y,ce);for(let te=0;te<16;te++)ge[te]=Y[te];fe[0]=_e[0]=1;for(let te=254;te>=0;--te){const se=ne[te>>>3]>>>(te&7)&1;A(fe,ge,se),A($e,_e,se),M(ae,fe,$e),O(fe,fe,$e),M($e,ge,_e),O(ge,ge,_e),L(_e,ae),L(X,fe),D(fe,$e,fe),D($e,ge,ae),M(ae,fe,$e),O(fe,fe,$e),L(ge,fe),O($e,_e,X),D(fe,$e,C),M(fe,fe,_e),D($e,$e,fe),D(fe,_e,X),D(_e,ge,Y),L(ge,ae),A(fe,ge,se),A($e,_e,se)}for(let te=0;te<16;te++)Y[te+16]=fe[te],Y[te+32]=$e[te],Y[te+48]=ge[te],Y[te+64]=_e[te];const F=Y.subarray(32),z=Y.subarray(16);V(F,F),D(z,z,F);const J=new Uint8Array(32);return B(J,z),J}n.scalarMult=U;function q(re){return U(re,S)}n.scalarMultBase=q;function H(re){if(re.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const ce=new Uint8Array(re);return{publicKey:q(ce),secretKey:ce}}n.generateKeyPairFromSeed=H;function W(re){const ce=(0,_.randomBytes)(32,re),ne=H(ce);return(0,x.wipe)(ce),ne}n.generateKeyPair=W;function Q(re,ce,ne=!1){if(re.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(ce.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const Y=U(re,ce);if(ne){let fe=0;for(let ge=0;ge<Y.length;ge++)fe|=Y[ge];if(fe===0)throw new Error("X25519: invalid shared key")}return Y}n.sharedKey=Q})(x25519);var xchacha20poly1305={},xchacha20={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core$4(n,_,x){for(var E=1634760805,S=857760878,C=2036477234,T=1797285236,A=x[3]<<24|x[2]<<16|x[1]<<8|x[0],B=x[7]<<24|x[6]<<16|x[5]<<8|x[4],I=x[11]<<24|x[10]<<16|x[9]<<8|x[8],M=x[15]<<24|x[14]<<16|x[13]<<8|x[12],O=x[19]<<24|x[18]<<16|x[17]<<8|x[16],D=x[23]<<24|x[22]<<16|x[21]<<8|x[20],L=x[27]<<24|x[26]<<16|x[25]<<8|x[24],V=x[31]<<24|x[30]<<16|x[29]<<8|x[28],U=_[3]<<24|_[2]<<16|_[1]<<8|_[0],q=_[7]<<24|_[6]<<16|_[5]<<8|_[4],H=_[11]<<24|_[10]<<16|_[9]<<8|_[8],W=_[15]<<24|_[14]<<16|_[13]<<8|_[12],Q=E,re=S,ce=C,ne=T,Y=A,fe=B,ge=I,$e=M,_e=O,ae=D,X=L,F=V,z=U,J=q,te=H,se=W,oe=0;oe<ROUNDS$1;oe+=2)Q=Q+Y|0,z^=Q,z=z>>>32-16|z<<16,_e=_e+z|0,Y^=_e,Y=Y>>>32-12|Y<<12,re=re+fe|0,J^=re,J=J>>>32-16|J<<16,ae=ae+J|0,fe^=ae,fe=fe>>>32-12|fe<<12,ce=ce+ge|0,te^=ce,te=te>>>32-16|te<<16,X=X+te|0,ge^=X,ge=ge>>>32-12|ge<<12,ne=ne+$e|0,se^=ne,se=se>>>32-16|se<<16,F=F+se|0,$e^=F,$e=$e>>>32-12|$e<<12,ce=ce+ge|0,te^=ce,te=te>>>32-8|te<<8,X=X+te|0,ge^=X,ge=ge>>>32-7|ge<<7,ne=ne+$e|0,se^=ne,se=se>>>32-8|se<<8,F=F+se|0,$e^=F,$e=$e>>>32-7|$e<<7,re=re+fe|0,J^=re,J=J>>>32-8|J<<8,ae=ae+J|0,fe^=ae,fe=fe>>>32-7|fe<<7,Q=Q+Y|0,z^=Q,z=z>>>32-8|z<<8,_e=_e+z|0,Y^=_e,Y=Y>>>32-7|Y<<7,Q=Q+fe|0,se^=Q,se=se>>>32-16|se<<16,X=X+se|0,fe^=X,fe=fe>>>32-12|fe<<12,re=re+ge|0,z^=re,z=z>>>32-16|z<<16,F=F+z|0,ge^=F,ge=ge>>>32-12|ge<<12,ce=ce+$e|0,J^=ce,J=J>>>32-16|J<<16,_e=_e+J|0,$e^=_e,$e=$e>>>32-12|$e<<12,ne=ne+Y|0,te^=ne,te=te>>>32-16|te<<16,ae=ae+te|0,Y^=ae,Y=Y>>>32-12|Y<<12,ce=ce+$e|0,J^=ce,J=J>>>32-8|J<<8,_e=_e+J|0,$e^=_e,$e=$e>>>32-7|$e<<7,ne=ne+Y|0,te^=ne,te=te>>>32-8|te<<8,ae=ae+te|0,Y^=ae,Y=Y>>>32-7|Y<<7,re=re+ge|0,z^=re,z=z>>>32-8|z<<8,F=F+z|0,ge^=F,ge=ge>>>32-7|ge<<7,Q=Q+fe|0,se^=Q,se=se>>>32-8|se<<8,X=X+se|0,fe^=X,fe=fe>>>32-7|fe<<7;binary_1$1.writeUint32LE(Q+E|0,n,0),binary_1$1.writeUint32LE(re+S|0,n,4),binary_1$1.writeUint32LE(ce+C|0,n,8),binary_1$1.writeUint32LE(ne+T|0,n,12),binary_1$1.writeUint32LE(Y+A|0,n,16),binary_1$1.writeUint32LE(fe+B|0,n,20),binary_1$1.writeUint32LE(ge+I|0,n,24),binary_1$1.writeUint32LE($e+M|0,n,28),binary_1$1.writeUint32LE(_e+O|0,n,32),binary_1$1.writeUint32LE(ae+D|0,n,36),binary_1$1.writeUint32LE(X+L|0,n,40),binary_1$1.writeUint32LE(F+V|0,n,44),binary_1$1.writeUint32LE(z+U|0,n,48),binary_1$1.writeUint32LE(J+q|0,n,52),binary_1$1.writeUint32LE(te+H|0,n,56),binary_1$1.writeUint32LE(se+W|0,n,60)}function streamXOR$1(n,_,x,E,S){if(S===void 0&&(S=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(E.length<x.length)throw new Error("ChaCha: destination is shorter than source");var C,T;if(S===0){if(_.length!==8&&_.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");C=new Uint8Array(16),T=C.length-_.length,C.set(_,T)}else{if(_.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");C=_,T=S}for(var A=new Uint8Array(64),B=0;B<x.length;B+=64){core$4(A,C,n);for(var I=B;I<B+64&&I<x.length;I++)E[I]=x[I]^A[I-B];incrementCounter(C,0,T)}return wipe_1$1.wipe(A),S===0&&wipe_1$1.wipe(C),E}chacha.streamXOR=streamXOR$1;function stream$1(n,_,x,E){return E===void 0&&(E=0),wipe_1$1.wipe(x),streamXOR$1(n,_,x,x,E)}chacha.stream=stream$1;function incrementCounter(n,_,x){for(var E=1;x--;)E=E+(n[_]&255)|0,n[_]=E&255,E>>>=8,_++;if(E>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(n,_,x,E){if(_.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var S=hchacha(n,_.subarray(0,16),new Uint8Array(32)),C=new Uint8Array(12);C.set(_.subarray(16),4);var T=chacha_1.streamXOR(S,C,x,E);return wipe_1.wipe(S),T}xchacha20.streamXOR=streamXOR;function stream(n,_,x){return wipe_1.wipe(x),streamXOR(n,_,x,x)}xchacha20.stream=stream;function hchacha(n,_,x){for(var E=1634760805,S=857760878,C=2036477234,T=1797285236,A=n[3]<<24|n[2]<<16|n[1]<<8|n[0],B=n[7]<<24|n[6]<<16|n[5]<<8|n[4],I=n[11]<<24|n[10]<<16|n[9]<<8|n[8],M=n[15]<<24|n[14]<<16|n[13]<<8|n[12],O=n[19]<<24|n[18]<<16|n[17]<<8|n[16],D=n[23]<<24|n[22]<<16|n[21]<<8|n[20],L=n[27]<<24|n[26]<<16|n[25]<<8|n[24],V=n[31]<<24|n[30]<<16|n[29]<<8|n[28],U=_[3]<<24|_[2]<<16|_[1]<<8|_[0],q=_[7]<<24|_[6]<<16|_[5]<<8|_[4],H=_[11]<<24|_[10]<<16|_[9]<<8|_[8],W=_[15]<<24|_[14]<<16|_[13]<<8|_[12],Q=E,re=S,ce=C,ne=T,Y=A,fe=B,ge=I,$e=M,_e=O,ae=D,X=L,F=V,z=U,J=q,te=H,se=W,oe=0;oe<ROUNDS;oe+=2)Q=Q+Y|0,z^=Q,z=z>>>32-16|z<<16,_e=_e+z|0,Y^=_e,Y=Y>>>32-12|Y<<12,re=re+fe|0,J^=re,J=J>>>32-16|J<<16,ae=ae+J|0,fe^=ae,fe=fe>>>32-12|fe<<12,ce=ce+ge|0,te^=ce,te=te>>>32-16|te<<16,X=X+te|0,ge^=X,ge=ge>>>32-12|ge<<12,ne=ne+$e|0,se^=ne,se=se>>>32-16|se<<16,F=F+se|0,$e^=F,$e=$e>>>32-12|$e<<12,ce=ce+ge|0,te^=ce,te=te>>>32-8|te<<8,X=X+te|0,ge^=X,ge=ge>>>32-7|ge<<7,ne=ne+$e|0,se^=ne,se=se>>>32-8|se<<8,F=F+se|0,$e^=F,$e=$e>>>32-7|$e<<7,re=re+fe|0,J^=re,J=J>>>32-8|J<<8,ae=ae+J|0,fe^=ae,fe=fe>>>32-7|fe<<7,Q=Q+Y|0,z^=Q,z=z>>>32-8|z<<8,_e=_e+z|0,Y^=_e,Y=Y>>>32-7|Y<<7,Q=Q+fe|0,se^=Q,se=se>>>32-16|se<<16,X=X+se|0,fe^=X,fe=fe>>>32-12|fe<<12,re=re+ge|0,z^=re,z=z>>>32-16|z<<16,F=F+z|0,ge^=F,ge=ge>>>32-12|ge<<12,ce=ce+$e|0,J^=ce,J=J>>>32-16|J<<16,_e=_e+J|0,$e^=_e,$e=$e>>>32-12|$e<<12,ne=ne+Y|0,te^=ne,te=te>>>32-16|te<<16,ae=ae+te|0,Y^=ae,Y=Y>>>32-12|Y<<12,ce=ce+$e|0,J^=ce,J=J>>>32-8|J<<8,_e=_e+J|0,$e^=_e,$e=$e>>>32-7|$e<<7,ne=ne+Y|0,te^=ne,te=te>>>32-8|te<<8,ae=ae+te|0,Y^=ae,Y=Y>>>32-7|Y<<7,re=re+ge|0,z^=re,z=z>>>32-8|z<<8,F=F+z|0,ge^=F,ge=ge>>>32-7|ge<<7,Q=Q+fe|0,se^=Q,se=se>>>32-8|se<<8,X=X+se|0,fe^=X,fe=fe>>>32-7|fe<<7;return binary_1.writeUint32LE(Q,x,0),binary_1.writeUint32LE(re,x,4),binary_1.writeUint32LE(ce,x,8),binary_1.writeUint32LE(ne,x,12),binary_1.writeUint32LE(z,x,16),binary_1.writeUint32LE(J,x,20),binary_1.writeUint32LE(te,x,24),binary_1.writeUint32LE(se,x,28),x}xchacha20.hchacha=hchacha;var chacha20poly1305={},poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(n,_,x){return~(n-1)&_|n-1&x}constantTime.select=select;function lessOrEqual(n,_){return(n|0)-(_|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare$1(n,_){if(n.length!==_.length)return 0;for(var x=0,E=0;E<n.length;E++)x|=n[E]^_[E];return 1&x-1>>>8}constantTime.compare=compare$1;function equal$3(n,_){return n.length===0||_.length===0?!1:compare$1(n,_)!==0}constantTime.equal=equal$3;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var _=constantTime,x=wipe$1;n.DIGEST_LENGTH=16;var E=function(){function T(A){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var B=A[0]|A[1]<<8;this._r[0]=B&8191;var I=A[2]|A[3]<<8;this._r[1]=(B>>>13|I<<3)&8191;var M=A[4]|A[5]<<8;this._r[2]=(I>>>10|M<<6)&7939;var O=A[6]|A[7]<<8;this._r[3]=(M>>>7|O<<9)&8191;var D=A[8]|A[9]<<8;this._r[4]=(O>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var L=A[10]|A[11]<<8;this._r[6]=(D>>>14|L<<2)&8191;var V=A[12]|A[13]<<8;this._r[7]=(L>>>11|V<<5)&8065;var U=A[14]|A[15]<<8;this._r[8]=(V>>>8|U<<8)&8191,this._r[9]=U>>>5&127,this._pad[0]=A[16]|A[17]<<8,this._pad[1]=A[18]|A[19]<<8,this._pad[2]=A[20]|A[21]<<8,this._pad[3]=A[22]|A[23]<<8,this._pad[4]=A[24]|A[25]<<8,this._pad[5]=A[26]|A[27]<<8,this._pad[6]=A[28]|A[29]<<8,this._pad[7]=A[30]|A[31]<<8}return T.prototype._blocks=function(A,B,I){for(var M=this._fin?0:2048,O=this._h[0],D=this._h[1],L=this._h[2],V=this._h[3],U=this._h[4],q=this._h[5],H=this._h[6],W=this._h[7],Q=this._h[8],re=this._h[9],ce=this._r[0],ne=this._r[1],Y=this._r[2],fe=this._r[3],ge=this._r[4],$e=this._r[5],_e=this._r[6],ae=this._r[7],X=this._r[8],F=this._r[9];I>=16;){var z=A[B+0]|A[B+1]<<8;O+=z&8191;var J=A[B+2]|A[B+3]<<8;D+=(z>>>13|J<<3)&8191;var te=A[B+4]|A[B+5]<<8;L+=(J>>>10|te<<6)&8191;var se=A[B+6]|A[B+7]<<8;V+=(te>>>7|se<<9)&8191;var oe=A[B+8]|A[B+9]<<8;U+=(se>>>4|oe<<12)&8191,q+=oe>>>1&8191;var ie=A[B+10]|A[B+11]<<8;H+=(oe>>>14|ie<<2)&8191;var G=A[B+12]|A[B+13]<<8;W+=(ie>>>11|G<<5)&8191;var j=A[B+14]|A[B+15]<<8;Q+=(G>>>8|j<<8)&8191,re+=j>>>5|M;var ee=0,pe=ee;pe+=O*ce,pe+=D*(5*F),pe+=L*(5*X),pe+=V*(5*ae),pe+=U*(5*_e),ee=pe>>>13,pe&=8191,pe+=q*(5*$e),pe+=H*(5*ge),pe+=W*(5*fe),pe+=Q*(5*Y),pe+=re*(5*ne),ee+=pe>>>13,pe&=8191;var he=ee;he+=O*ne,he+=D*ce,he+=L*(5*F),he+=V*(5*X),he+=U*(5*ae),ee=he>>>13,he&=8191,he+=q*(5*_e),he+=H*(5*$e),he+=W*(5*ge),he+=Q*(5*fe),he+=re*(5*Y),ee+=he>>>13,he&=8191;var Se=ee;Se+=O*Y,Se+=D*ne,Se+=L*ce,Se+=V*(5*F),Se+=U*(5*X),ee=Se>>>13,Se&=8191,Se+=q*(5*ae),Se+=H*(5*_e),Se+=W*(5*$e),Se+=Q*(5*ge),Se+=re*(5*fe),ee+=Se>>>13,Se&=8191;var we=ee;we+=O*fe,we+=D*Y,we+=L*ne,we+=V*ce,we+=U*(5*F),ee=we>>>13,we&=8191,we+=q*(5*X),we+=H*(5*ae),we+=W*(5*_e),we+=Q*(5*$e),we+=re*(5*ge),ee+=we>>>13,we&=8191;var xe=ee;xe+=O*ge,xe+=D*fe,xe+=L*Y,xe+=V*ne,xe+=U*ce,ee=xe>>>13,xe&=8191,xe+=q*(5*F),xe+=H*(5*X),xe+=W*(5*ae),xe+=Q*(5*_e),xe+=re*(5*$e),ee+=xe>>>13,xe&=8191;var Ee=ee;Ee+=O*$e,Ee+=D*ge,Ee+=L*fe,Ee+=V*Y,Ee+=U*ne,ee=Ee>>>13,Ee&=8191,Ee+=q*ce,Ee+=H*(5*F),Ee+=W*(5*X),Ee+=Q*(5*ae),Ee+=re*(5*_e),ee+=Ee>>>13,Ee&=8191;var ye=ee;ye+=O*_e,ye+=D*$e,ye+=L*ge,ye+=V*fe,ye+=U*Y,ee=ye>>>13,ye&=8191,ye+=q*ne,ye+=H*ce,ye+=W*(5*F),ye+=Q*(5*X),ye+=re*(5*ae),ee+=ye>>>13,ye&=8191;var Ce=ee;Ce+=O*ae,Ce+=D*_e,Ce+=L*$e,Ce+=V*ge,Ce+=U*fe,ee=Ce>>>13,Ce&=8191,Ce+=q*Y,Ce+=H*ne,Ce+=W*ce,Ce+=Q*(5*F),Ce+=re*(5*X),ee+=Ce>>>13,Ce&=8191;var ve=ee;ve+=O*X,ve+=D*ae,ve+=L*_e,ve+=V*$e,ve+=U*ge,ee=ve>>>13,ve&=8191,ve+=q*fe,ve+=H*Y,ve+=W*ne,ve+=Q*ce,ve+=re*(5*F),ee+=ve>>>13,ve&=8191;var Be=ee;Be+=O*F,Be+=D*X,Be+=L*ae,Be+=V*_e,Be+=U*$e,ee=Be>>>13,Be&=8191,Be+=q*ge,Be+=H*fe,Be+=W*Y,Be+=Q*ne,Be+=re*ce,ee+=Be>>>13,Be&=8191,ee=(ee<<2)+ee|0,ee=ee+pe|0,pe=ee&8191,ee=ee>>>13,he+=ee,O=pe,D=he,L=Se,V=we,U=xe,q=Ee,H=ye,W=Ce,Q=ve,re=Be,B+=16,I-=16}this._h[0]=O,this._h[1]=D,this._h[2]=L,this._h[3]=V,this._h[4]=U,this._h[5]=q,this._h[6]=H,this._h[7]=W,this._h[8]=Q,this._h[9]=re},T.prototype.finish=function(A,B){B===void 0&&(B=0);var I=new Uint16Array(10),M,O,D,L;if(this._leftover){for(L=this._leftover,this._buffer[L++]=1;L<16;L++)this._buffer[L]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(M=this._h[1]>>>13,this._h[1]&=8191,L=2;L<10;L++)this._h[L]+=M,M=this._h[L]>>>13,this._h[L]&=8191;for(this._h[0]+=M*5,M=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=M,M=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=M,I[0]=this._h[0]+5,M=I[0]>>>13,I[0]&=8191,L=1;L<10;L++)I[L]=this._h[L]+M,M=I[L]>>>13,I[L]&=8191;for(I[9]-=8192,O=(M^1)-1,L=0;L<10;L++)I[L]&=O;for(O=~O,L=0;L<10;L++)this._h[L]=this._h[L]&O|I[L];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,L=1;L<8;L++)D=(this._h[L]+this._pad[L]|0)+(D>>>16)|0,this._h[L]=D&65535;return A[B+0]=this._h[0]>>>0,A[B+1]=this._h[0]>>>8,A[B+2]=this._h[1]>>>0,A[B+3]=this._h[1]>>>8,A[B+4]=this._h[2]>>>0,A[B+5]=this._h[2]>>>8,A[B+6]=this._h[3]>>>0,A[B+7]=this._h[3]>>>8,A[B+8]=this._h[4]>>>0,A[B+9]=this._h[4]>>>8,A[B+10]=this._h[5]>>>0,A[B+11]=this._h[5]>>>8,A[B+12]=this._h[6]>>>0,A[B+13]=this._h[6]>>>8,A[B+14]=this._h[7]>>>0,A[B+15]=this._h[7]>>>8,this._finished=!0,this},T.prototype.update=function(A){var B=0,I=A.length,M;if(this._leftover){M=16-this._leftover,M>I&&(M=I);for(var O=0;O<M;O++)this._buffer[this._leftover+O]=A[B+O];if(I-=M,B+=M,this._leftover+=M,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(I>=16&&(M=I-I%16,this._blocks(A,B,M),B+=M,I-=M),I){for(var O=0;O<I;O++)this._buffer[this._leftover+O]=A[B+O];this._leftover+=I}return this},T.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var A=new Uint8Array(16);return this.finish(A),A},T.prototype.clean=function(){return x.wipe(this._buffer),x.wipe(this._r),x.wipe(this._h),x.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},T}();n.Poly1305=E;function S(T,A){var B=new E(T);B.update(A);var I=B.digest();return B.clean(),I}n.oneTimeAuth=S;function C(T,A){return T.length!==n.DIGEST_LENGTH||A.length!==n.DIGEST_LENGTH?!1:_.equal(T,A)}n.equal=C})(poly1305);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var _=chacha,x=poly1305,E=wipe$1,S=binary,C=constantTime;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var T=new Uint8Array(16),A=function(){function B(I){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,I.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(I)}return B.prototype.seal=function(I,M,O,D){if(I.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var L=new Uint8Array(16);L.set(I,L.length-I.length);var V=new Uint8Array(32);_.stream(this._key,L,V,4);var U=M.length+this.tagLength,q;if(D){if(D.length!==U)throw new Error("ChaCha20Poly1305: incorrect destination length");q=D}else q=new Uint8Array(U);return _.streamXOR(this._key,L,M,q,4),this._authenticate(q.subarray(q.length-this.tagLength,q.length),V,q.subarray(0,q.length-this.tagLength),O),E.wipe(L),q},B.prototype.open=function(I,M,O,D){if(I.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(M.length<this.tagLength)return null;var L=new Uint8Array(16);L.set(I,L.length-I.length);var V=new Uint8Array(32);_.stream(this._key,L,V,4);var U=new Uint8Array(this.tagLength);if(this._authenticate(U,V,M.subarray(0,M.length-this.tagLength),O),!C.equal(U,M.subarray(M.length-this.tagLength,M.length)))return null;var q=M.length-this.tagLength,H;if(D){if(D.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");H=D}else H=new Uint8Array(q);return _.streamXOR(this._key,L,M.subarray(0,M.length-this.tagLength),H,4),E.wipe(L),H},B.prototype.clean=function(){return E.wipe(this._key),this},B.prototype._authenticate=function(I,M,O,D){var L=new x.Poly1305(M);D&&(L.update(D),D.length%16>0&&L.update(T.subarray(D.length%16))),L.update(O),O.length%16>0&&L.update(T.subarray(O.length%16));var V=new Uint8Array(8);D&&S.writeUint64LE(D.length,V),L.update(V),S.writeUint64LE(O.length,V),L.update(V);for(var U=L.digest(),q=0;q<U.length;q++)I[q]=U[q];L.clean(),E.wipe(U),E.wipe(V)},B}();n.ChaCha20Poly1305=A})(chacha20poly1305);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var _=xchacha20,x=chacha20poly1305,E=wipe$1;n.KEY_LENGTH=32,n.NONCE_LENGTH=24,n.TAG_LENGTH=16;var S=function(){function C(T){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,T.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(T)}return C.prototype.seal=function(T,A,B,I){if(T.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var M=_.hchacha(this._key,T.subarray(0,16),new Uint8Array(32)),O=new Uint8Array(12);O.set(T.subarray(16),4);var D=new x.ChaCha20Poly1305(M),L=D.seal(O,A,B,I);return E.wipe(M),E.wipe(O),D.clean(),L},C.prototype.open=function(T,A,B,I){if(T.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(A.length<this.tagLength)return null;var M=_.hchacha(this._key,T.subarray(0,16),new Uint8Array(32)),O=new Uint8Array(12);O.set(T.subarray(16),4);var D=new x.ChaCha20Poly1305(M),L=D.open(O,A,B,I);return E.wipe(M),E.wipe(O),D.clean(),L},C.prototype.clean=function(){return E.wipe(this._key),this},C}();n.XChaCha20Poly1305=S})(xchacha20poly1305);function bytesToBase64url(n){return toString$6(n,"base64url")}function base64ToBytes(n){const _=n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString$2(_,"base64url")}function base58ToBytes(n){return fromString$2(n,"base58btc")}function bytesToBase58(n){return toString$6(n,"base58btc")}function hexToBytes(n){const _=n.startsWith("0x")?n.substring(2):n;return fromString$2(_.toLowerCase(),"base16")}function encodeBase64url(n){return bytesToBase64url(fromString$2(n))}function decodeBase64url(n){return toString$6(base64ToBytes(n))}function bytesToHex(n){return toString$6(n,"base16")}function stringToBytes(n){return fromString$2(n)}const zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function rotl(n,_){return n<<_|n>>>32-_}function fn1(n,_,x,E,S,C,T,A){return rotl(n+(_^x^E)+C+T|0,A)+S|0}function fn2(n,_,x,E,S,C,T,A){return rotl(n+(_&x|~_&E)+C+T|0,A)+S|0}function fn3(n,_,x,E,S,C,T,A){return rotl(n+((_|~x)^E)+C+T|0,A)+S|0}function fn4(n,_,x,E,S,C,T,A){return rotl(n+(_&E|x&~E)+C+T|0,A)+S|0}function fn5(n,_,x,E,S,C,T,A){return rotl(n+(_^(x|~E))+C+T|0,A)+S|0}class Ripemd160{constructor(_=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=x=>{if(this._finalized)throw new Error("Digest already called");const E=this._block;let S=0;for(;this._blockOffset+x.length-S>=this._blockSize;){for(let C=this._blockOffset;C<this._blockSize;)E[C++]=x[S++];this._update(),this._blockOffset=0}for(;S<x.length;)E[this._blockOffset++]=x[S++];for(let C=0,T=x.length*8;T>0;++C)this._length[C]+=T,T=this._length[C]/4294967296|0,T>0&&(this._length[C]-=4294967296*T);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const x=this._digest();this._block.fill(0),this._blockOffset=0;for(let E=0;E<4;++E)this._length[E]=0;return x},this._update=()=>{const x=new Array(16),E=new DataView(this._block.buffer);for(let U=0;U<16;++U)x[U]=x[U]=E.getInt32(U*4,!0);let S=this._a|0,C=this._b|0,T=this._c|0,A=this._d|0,B=this._e|0,I=this._a|0,M=this._b|0,O=this._c|0,D=this._d|0,L=this._e|0;for(let U=0;U<80;U+=1){let q,H;U<16?(q=fn1(S,C,T,A,B,x[zl[U]],hl[0],sl[U]),H=fn5(I,M,O,D,L,x[zr[U]],hr[0],sr[U])):U<32?(q=fn2(S,C,T,A,B,x[zl[U]],hl[1],sl[U]),H=fn4(I,M,O,D,L,x[zr[U]],hr[1],sr[U])):U<48?(q=fn3(S,C,T,A,B,x[zl[U]],hl[2],sl[U]),H=fn3(I,M,O,D,L,x[zr[U]],hr[2],sr[U])):U<64?(q=fn4(S,C,T,A,B,x[zl[U]],hl[3],sl[U]),H=fn2(I,M,O,D,L,x[zr[U]],hr[3],sr[U])):(q=fn5(S,C,T,A,B,x[zl[U]],hl[4],sl[U]),H=fn1(I,M,O,D,L,x[zr[U]],hr[4],sr[U])),S=B,B=A,A=rotl(T,10),T=C,C=q,I=L,L=D,D=rotl(O,10),O=M,M=H}const V=this._b+T+D|0;this._b=this._c+A+L|0,this._c=this._d+B+I|0,this._d=this._e+S+M|0,this._e=this._a+C+O|0,this._a=V},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const x=new DataView(this._block.buffer);x.setUint32(56,this._length[0],!0),x.setUint32(60,this._length[1],!0),this._block=new Uint8Array(x.buffer),this._update();const E=new DataView(new Uint8Array(20).buffer);return E.setInt32(0,this._a,!0),E.setInt32(4,this._b,!0),E.setInt32(8,this._c,!0),E.setInt32(12,this._d,!0),E.setInt32(16,this._e,!0),new Uint8Array(E.buffer)},this._block=new Uint8Array(_),this._blockSize=_,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}function sha256$3(n){const _=typeof n=="string"?fromString$2(n):n;return sha256$4.hash(_)}function keccak(n){return new Uint8Array(sha3.keccak_256.arrayBuffer(n))}function toEthereumAddress(n){const _=fromString$2(n.slice(2),"base16");return`0x${toString$6(keccak(_).slice(-20),"base16")}`}function ripemd160$1(n){return new Ripemd160().update(n).digest()}function writeUint32BE(n,_=new Uint8Array(4)){const x=fromString$2(n.toString(),"base10");return _.set(x,4-x.length),_}const lengthAndInput=n=>concat$3([writeUint32BE(n.length),n]);function concatKDF(n,_,x,E,S){if(_!==256)throw new Error(`Unsupported key length: ${_}`);const C=concat$3([lengthAndInput(fromString$2(x)),lengthAndInput(typeof E>"u"?new Uint8Array(0):E),lengthAndInput(typeof S>"u"?new Uint8Array(0):S),writeUint32BE(_)]);return sha256$3(concat$3([writeUint32BE(1),n,C]))}new elliptic.ec("secp256k1");new elliptic.ec("p256");const publicKeyToAddress$1=(n,_)=>{const x=toString$6(base58ToBytes(_).slice(0,1),"hex"),E=fromString$2(n,"hex"),S=ripemd160$1(sha256$3(E)),C=x+toString$6(S,"hex"),T=sha256$3(fromString$2(C,"hex")),A=sha256$3(T),B=toString$6(A,"hex").substring(0,8),I=C+B;return bytesToBase58(fromString$2(I,"hex"))},EC$2=elliptic.ec,publicKeyToAddress=(n,_)=>{const E=new EC$2("secp256k1").keyFromPublic(n,"hex").getPublic().encode("hex",!0),S=fromString$2(E,"hex"),C=ripemd160$1(sha256$3(S)),T=bech32.toWords(C);return bech32.encode(_,T).replace(_,"")},verifyBlockchainAccountId=(n,_)=>{if(_){const x=_.split(":");switch(x[0]){case"bip122":x[x.length-1]=publicKeyToAddress$1(n,x[x.length-1]);break;case"cosmos":x[x.length-1]=publicKeyToAddress(n,x[1]);break;case"eip155":x[x.length-1]=toEthereumAddress(n);break;default:return!1}return x.join(":").toLowerCase()===_.toLowerCase()}return!1},secp256k1=new elliptic.ec("secp256k1"),secp256r1=new elliptic.ec("p256");function toSignatureObject(n,_=!1){const x=base64ToBytes(n);if(x.length!==(_?65:64))throw new Error("wrong signature length");const E=bytesToHex(x.slice(0,32)),S=bytesToHex(x.slice(32,64)),C={r:E,s:S};return _&&(C.recoveryParam=x[64]),C}function extractPublicKeyBytes(n){if(n.publicKeyBase58)return base58ToBytes(n.publicKeyBase58);if(n.publicKeyBase64)return base64ToBytes(n.publicKeyBase64);if(n.publicKeyHex)return hexToBytes(n.publicKeyHex);if(n.publicKeyJwk&&n.publicKeyJwk.crv==="secp256k1"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(n.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.crv==="P-256"&&n.publicKeyJwk.x&&n.publicKeyJwk.y)return hexToBytes(secp256r1.keyFromPublic({x:bytesToHex(base64ToBytes(n.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(n.publicKeyJwk.y))}).getPublic("hex"));if(n.publicKeyJwk&&n.publicKeyJwk.kty==="OKP"&&n.publicKeyJwk.crv==="Ed25519"&&n.publicKeyJwk.x)return base64ToBytes(n.publicKeyJwk.x);if(n.publicKeyMultibase){const{base16:_,base58btc:x,base64:E,base64url:S}=bases;return _.decoder.or(x.decoder.or(E.decoder.or(S.decoder))).decode(n.publicKeyMultibase)}return new Uint8Array}function verifyES256(n,_,x){const E=sha256$3(n),S=toSignatureObject(_),T=x.filter(({ethereumAddress:A,blockchainAccountId:B})=>typeof A>"u"&&typeof B>"u").find(A=>{try{const B=extractPublicKeyBytes(A);return secp256r1.keyFromPublic(B).verify(E,S)}catch{return!1}});if(!T)throw new Error("invalid_signature: Signature invalid for JWT");return T}function verifyES256K(n,_,x){const E=sha256$3(n),S=toSignatureObject(_),C=x.filter(({ethereumAddress:B,blockchainAccountId:I})=>typeof B>"u"&&typeof I>"u"),T=x.filter(({ethereumAddress:B,blockchainAccountId:I})=>typeof B<"u"||typeof I<"u");let A=C.find(B=>{try{const I=extractPublicKeyBytes(B);return secp256k1.keyFromPublic(I).verify(E,S)}catch{return!1}});if(!A&&T.length>0&&(A=verifyRecoverableES256K(n,_,T)),!A)throw new Error("invalid_signature: Signature invalid for JWT");return A}function verifyRecoverableES256K(n,_,x){let E;if(_.length>86)E=[toSignatureObject(_,!0)];else{const T=toSignatureObject(_,!1);E=[{...T,recoveryParam:0},{...T,recoveryParam:1}]}const S=T=>{const A=sha256$3(n),B=secp256k1.recoverPubKey(A,T,T.recoveryParam),I=B.encode("hex"),M=B.encode("hex",!0),O=toEthereumAddress(I).toLowerCase();return x.find(L=>{var V,U,q;const H=bytesToHex(extractPublicKeyBytes(L));return H===I||H===M||((V=L.ethereumAddress)==null?void 0:V.toLowerCase())===O||((U=L.blockchainAccountId)==null||(q=U.split("@eip155"))==null?void 0:q[0].toLowerCase())===O||verifyBlockchainAccountId(I,L.blockchainAccountId)})},C=E.map(S).filter(T=>typeof T<"u");if(C.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return C[0]}function verifyEd25519(n,_,x){const E=stringToBytes(n),S=base64ToBytes(_),C=x.find(T=>ed25519.verify(extractPublicKeyBytes(T),E,S));if(!C)throw new Error("invalid_signature: Signature invalid for JWT");return C}const algorithms={ES256:verifyES256,ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(n){const _=algorithms[n];if(!_)throw new Error(`not_supported: Unsupported algorithm ${n}`);return _}VerifierAlgorithm.toSignatureObject=toSignatureObject;function decodeJWS(n){const _=n.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(_)return{header:JSON.parse(decodeBase64url(_[1])),payload:_[2],signature:_[3],data:`${_[1]}.${_[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function verifyJWSDecoded({header:n,data:_,signature:x},E){return Array.isArray(E)||(E=[E]),VerifierAlgorithm(n.alg)(_,x,E)}function verifyJWS(n,_){const x=decodeJWS(n);return verifyJWSDecoded(x,_)}const _iteratorSymbol=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(n,_,x){if(!n.s){if(x instanceof _Pact)if(x.s)_&1&&(_=x.s),x=x.v;else{x.o=_settle.bind(null,n,_);return}if(x&&x.then){x.then(_settle.bind(null,n,_),_settle.bind(null,n,2));return}n.s=_,n.v=x;const E=n.o;E&&E(n)}}const _Pact=function(){function n(){}return n.prototype.then=function(_,x){const E=new n,S=this.s;if(S){const C=S&1?_:x;if(C){try{_settle(E,1,C(this.v))}catch(T){_settle(E,2,T)}return E}else return this}return this.o=function(C){try{const T=C.v;C.s&1?_settle(E,1,_?_(T):T):x?_settle(E,1,x(T)):_settle(E,2,T)}catch(T){_settle(E,2,T)}},E},n}();function _isSettledPact(n){return n instanceof _Pact&&n.s&1}function _forTo(n,_,x){var E=-1,S,C;function T(A){try{for(;++E<n.length&&(!x||!x());)if(A=_(E),A&&A.then)if(_isSettledPact(A))A=A.v;else{A.then(T,C||(C=_settle.bind(null,S=new _Pact,2)));return}S?_settle(S,1,A):S=A}catch(B){_settle(S||(S=new _Pact),2,B)}}return T(),S}function _forOf(n,_,x){if(typeof n[_iteratorSymbol]=="function"){let M=function(O){try{for(;!(S=E.next()).done&&(!x||!x());)if(O=_(S.value),O&&O.then)if(_isSettledPact(O))O=O.v;else{O.then(M,T||(T=_settle.bind(null,C=new _Pact,2)));return}C?_settle(C,1,O):C=O}catch(D){_settle(C||(C=new _Pact),2,D)}};var E=n[_iteratorSymbol](),S,C,T;if(M(),E.return){var A=function(O){try{S.done||E.return()}catch{}return O};if(C&&C.then)return C.then(A,function(O){throw A(O)});A()}return C}if(!("length"in n))throw new TypeError("Object is not iterable");for(var B=[],I=0;I<n.length;I++)B.push(n[I]);return _forTo(B,function(M){return _(B[M])},x)}function encodeJWE({ciphertext:n,tag:_,iv:x,protectedHeader:E,recipient:S},C){const T={protected:E,iv:bytesToBase64url(x),ciphertext:bytesToBase64url(n),tag:bytesToBase64url(_)};return C&&(T.aad=bytesToBase64url(C)),S&&(T.recipients=[S]),T}const createJWE=function(n,_,x={},E){try{if(_[0].alg==="dir"){if(_.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(_[0].encrypt(n,x,E)).then(function(S){return encodeJWE(S,E)})}else{const S=_[0].enc;if(!_.reduce((B,I)=>B&&I.enc===S,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let C,T;const A=_forOf(_,function(B){const I=function(){return C?Promise.resolve(B.encryptCek==null?void 0:B.encryptCek(C)).then(function(M){if(M){var O,D;(O=T)==null||(D=O.recipients)==null||D.push(M)}}):Promise.resolve(B.encrypt(n,x,E)).then(function(M){C=M.cek,T=encodeJWE(M,E)})}();if(I&&I.then)return I.then(function(){})});return Promise.resolve(A&&A.then?A.then(function(){return T}):T)}}catch(S){return Promise.reject(S)}},resolveX25519Encrypters=function(n,_){try{const x=function(S,C=[]){try{return Promise.resolve(_.resolve(S)).then(function({didResolutionMetadata:T,didDocument:A}){function B(){var O,D;const L=(O=A.keyAgreement)==null||(D=O.map(U=>typeof U=="string"?[...A.publicKey||[],...A.verificationMethod||[]].find(q=>q.id===U):U))==null?void 0:D.filter(U=>typeof U<"u"),V=L?.filter(U=>U.type==="X25519KeyAgreementKey2019"&&!!U.publicKeyBase58)||[];if(!V.length&&!I.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${S}`);return V.map(U=>x25519Encrypter(base58ToBytes(U.publicKeyBase58),U.id)).concat(...I)}if(C.push(S),T!=null&&T.error||A==null)throw new Error(`resolver_error: Could not resolve ${S}: ${T.error}, ${T.message}`);let I=[];if(!A.controller&&!A.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${S}`);const M=function(){if(A.controller){let O=Array.isArray(A.controller)?A.controller:[A.controller];O=O.filter(L=>!C.includes(L));const D=O.map(L=>x(L,C).catch(()=>[]));return Promise.resolve(Promise.all(D)).then(function(L){I=[].concat(...L)})}}();return M&&M.then?M.then(B):B(M)})}catch(T){return Promise.reject(T)}},E=n.map(S=>x(S));return Promise.resolve(Promise.all(E)).then(function(S){return[].concat(...S)})}catch(x){return Promise.reject(x)}};function xc20pEncrypter(n){const _=new xchacha20poly1305.XChaCha20Poly1305(n);return(x,E)=>{const S=random.randomBytes(_.nonceLength),C=_.seal(S,x,E);return{ciphertext:C.subarray(0,C.length-_.tagLength),tag:C.subarray(C.length-_.tagLength),iv:S}}}function xc20pDirEncrypter(n){const _=function(C,T={},A){try{const B=encodeBase64url(JSON.stringify(Object.assign({alg:S},T,{enc:E}))),I=fromString$2(A?`${B}.${bytesToBase64url(A)}`:B);return Promise.resolve({...x(C,I),protectedHeader:B})}catch(B){return Promise.reject(B)}},x=xc20pEncrypter(n),E="XC20P",S="dir";return{alg:S,enc:E,encrypt:_}}function x25519Encrypter(n,_){const x=function(A,B={},I){try{Object.assign(B,{alg:void 0});const M=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(M).encrypt(A,B,I)).then(function(O){return Promise.resolve(E(M)).then(function(D){return{...O,recipient:D,cek:M}})})}catch(M){return Promise.reject(M)}},E=function(A){try{const B=x25519.generateKeyPair(),I=x25519.sharedKey(B.secretKey,n),M=concatKDF(I,C,S),O=xc20pEncrypter(M)(A),D={encrypted_key:bytesToBase64url(O.ciphertext),header:{alg:S,iv:bytesToBase64url(O.iv),tag:bytesToBase64url(O.tag),epk:{kty:"OKP",crv:T,x:bytesToBase64url(B.publicKey)}}};return _&&(D.header.kid=_),Promise.resolve(D)}catch(B){return Promise.reject(B)}},S="ECDH-ES+XC20PKW",C=256,T="X25519";return{alg:S,enc:"XC20P",encrypt:x,encryptCek:E}}const readonly=({enumerable:n=!0,configurable:_=!1}={})=>({enumerable:n,configurable:_,writable:!1}),links=function*(n,_){if(n!=null&&!(n instanceof Uint8Array))for(const[x,E]of Object.entries(n)){const S=[..._,x];if(E!=null&&typeof E=="object")if(Array.isArray(E))for(const[C,T]of E.entries()){const A=[...S,C],B=CID$3.asCID(T);B?yield[A.join("/"),B]:typeof T=="object"&&(yield*links(T,A))}else{const C=CID$3.asCID(E);C?yield[S.join("/"),C]:yield*links(E,S)}}},tree=function*(n,_){if(n!=null)for(const[x,E]of Object.entries(n)){const S=[..._,x];if(yield S.join("/"),E!=null&&!(E instanceof Uint8Array)&&typeof E=="object"&&!CID$3.asCID(E))if(Array.isArray(E))for(const[C,T]of E.entries()){const A=[...S,C];yield A.join("/"),typeof T=="object"&&!CID$3.asCID(T)&&(yield*tree(T,A))}else yield*tree(E,S)}},get$1=(n,_)=>{let x=n;for(const[E,S]of _.entries()){if(x=x[S],x==null)throw new Error(`Object has no property at ${_.slice(0,E+1).map(T=>`[${JSON.stringify(T)}]`).join("")}`);const C=CID$3.asCID(x);if(C)return{value:C,remaining:_.slice(E+1).join("/")}}return{value:x}};class Block{constructor({cid:_,bytes:x,value:E}){if(!_||!x||typeof E>"u")throw new Error("Missing required argument");this.cid=_,this.bytes=x,this.value=E,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(_="/"){return get$1(this.value,_.split("/").filter(Boolean))}}const encode$a=async({value:n,codec:_,hasher:x})=>{if(typeof n>"u")throw new Error('Missing required argument "value"');if(!_||!x)throw new Error("Missing required argument: codec or hasher");const E=_.encode(n),S=await x.digest(E),C=CID$3.create(1,_.code,S);return new Block({value:n,bytes:E,cid:C})},decode$7=async({bytes:n,codec:_,hasher:x})=>{if(!n)throw new Error('Missing required argument "bytes"');if(!_||!x)throw new Error("Missing required argument: codec or hasher");const E=_.decode(n),S=await x.digest(n),C=CID$3.create(1,_.code,S);return new Block({value:E,bytes:n,cid:C})},typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(n){if(n===null)return"null";if(n===void 0)return"undefined";if(n===!0||n===!1)return"boolean";const _=typeof n;if(typeofs.includes(_))return _;if(_==="function")return"Function";if(Array.isArray(n))return"Array";if(isBuffer$3(n))return"Buffer";const x=getObjectType(n);return x||"Object"}function isBuffer$3(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}function getObjectType(n){const _=Object.prototype.toString.call(n).slice(8,-1);if(objectTypeNames.includes(_))return _}class Type{constructor(_,x,E){this.major=_,this.majorEncoded=_<<5,this.name=x,this.terminal=E}toString(){return`Type[${this.major}].${this.name}`}compare(_){return this.major<_.major?-1:this.major>_.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(_,x,E){this.type=_,this.value=x,this.encodedLength=E,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder=new TextDecoder,textEncoder=new TextEncoder;function isBuffer$2(n){return useBuffer&&globalThis.Buffer.isBuffer(n)}function asU8A(n){return n instanceof Uint8Array?isBuffer$2(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}const toString$5=useBuffer?(n,_,x)=>x-_>64?globalThis.Buffer.from(n.subarray(_,x)).toString("utf8"):utf8Slice(n,_,x):(n,_,x)=>x-_>64?textDecoder.decode(n.subarray(_,x)):utf8Slice(n,_,x),fromString$1=useBuffer?n=>n.length>64?globalThis.Buffer.from(n):utf8ToBytes(n):n=>n.length>64?textEncoder.encode(n):utf8ToBytes(n),fromArray=n=>Uint8Array.from(n),slice$1=useBuffer?(n,_,x)=>isBuffer$2(n)?new Uint8Array(n.subarray(_,x)):n.slice(_,x):(n,_,x)=>n.slice(_,x),concat$2=useBuffer?(n,_)=>(n=n.map(x=>x instanceof Uint8Array?x:globalThis.Buffer.from(x)),asU8A(globalThis.Buffer.concat(n,_))):(n,_)=>{const x=new Uint8Array(_);let E=0;for(let S of n)E+S.length>x.length&&(S=S.subarray(0,x.length-E)),x.set(S,E),E+=S.length;return x},alloc=useBuffer?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function compare(n,_){if(isBuffer$2(n)&&isBuffer$2(_))return n.compare(_);for(let x=0;x<n.length;x++)if(n[x]!==_[x])return n[x]<_[x]?-1:1;return 0}function utf8ToBytes(n,_=1/0){let x;const E=n.length;let S=null;const C=[];for(let T=0;T<E;++T){if(x=n.charCodeAt(T),x>55295&&x<57344){if(!S){if(x>56319){(_-=3)>-1&&C.push(239,191,189);continue}else if(T+1===E){(_-=3)>-1&&C.push(239,191,189);continue}S=x;continue}if(x<56320){(_-=3)>-1&&C.push(239,191,189),S=x;continue}x=(S-55296<<10|x-56320)+65536}else S&&(_-=3)>-1&&C.push(239,191,189);if(S=null,x<128){if((_-=1)<0)break;C.push(x)}else if(x<2048){if((_-=2)<0)break;C.push(x>>6|192,x&63|128)}else if(x<65536){if((_-=3)<0)break;C.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((_-=4)<0)break;C.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return C}function utf8Slice(n,_,x){const E=[];for(;_<x;){const S=n[_];let C=null,T=S>239?4:S>223?3:S>191?2:1;if(_+T<=x){let A,B,I,M;switch(T){case 1:S<128&&(C=S);break;case 2:A=n[_+1],(A&192)===128&&(M=(S&31)<<6|A&63,M>127&&(C=M));break;case 3:A=n[_+1],B=n[_+2],(A&192)===128&&(B&192)===128&&(M=(S&15)<<12|(A&63)<<6|B&63,M>2047&&(M<55296||M>57343)&&(C=M));break;case 4:A=n[_+1],B=n[_+2],I=n[_+3],(A&192)===128&&(B&192)===128&&(I&192)===128&&(M=(S&15)<<18|(A&63)<<12|(B&63)<<6|I&63,M>65535&&M<1114112&&(C=M))}}C===null?(C=65533,T=1):C>65535&&(C-=65536,E.push(C>>>10&1023|55296),C=56320|C&1023),E.push(C),_+=T}return decodeCodePointsArray(E)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(n){const _=n.length;if(_<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,n);let x="",E=0;for(;E<_;)x+=String.fromCharCode.apply(String,n.slice(E,E+=MAX_ARGUMENTS_LENGTH));return x}const defaultChunkSize=256;class Bl{constructor(_=defaultChunkSize){this.chunkSize=_,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(_){let x=this.chunks[this.chunks.length-1];if(this.cursor+_.length<=this.maxCursor+1){const S=x.length-(this.maxCursor-this.cursor)-1;x.set(_,S)}else{if(x){const S=x.length-(this.maxCursor-this.cursor)-1;S<x.length&&(this.chunks[this.chunks.length-1]=x.subarray(0,S),this.maxCursor=this.cursor-1)}_.length<64&&_.length<this.chunkSize?(x=alloc(this.chunkSize),this.chunks.push(x),this.maxCursor+=x.length,this._initReuseChunk===null&&(this._initReuseChunk=x),x.set(_,0)):(this.chunks.push(_),this.maxCursor+=_.length)}this.cursor+=_.length}toBytes(_=!1){let x;if(this.chunks.length===1){const E=this.chunks[0];_&&this.cursor>E.length/2?(x=this.cursor===E.length?E:E.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):x=slice$1(E,0,this.cursor)}else x=concat$2(this.chunks,this.cursor);return _&&this.reset(),x}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(n,_,x){if(n.length-_<x)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(n,_,x){assertEnoughData(n,_,1);const E=n[_];if(x.strict===!0&&E<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint16(n,_,x){assertEnoughData(n,_,2);const E=n[_]<<8|n[_+1];if(x.strict===!0&&E<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint32(n,_,x){assertEnoughData(n,_,4);const E=n[_]*16777216+(n[_+1]<<16)+(n[_+2]<<8)+n[_+3];if(x.strict===!0&&E<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return E}function readUint64(n,_,x){assertEnoughData(n,_,8);const E=n[_]*16777216+(n[_+1]<<16)+(n[_+2]<<8)+n[_+3],S=n[_+4]*16777216+(n[_+5]<<16)+(n[_+6]<<8)+n[_+7],C=(BigInt(E)<<BigInt(32))+BigInt(S);if(x.strict===!0&&C<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(C<=Number.MAX_SAFE_INTEGER)return Number(C);if(x.allowBigInt===!0)return C;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(n,_,x,E){return new Token(Type.uint,readUint8(n,_+1,E),2)}function decodeUint16(n,_,x,E){return new Token(Type.uint,readUint16(n,_+1,E),3)}function decodeUint32(n,_,x,E){return new Token(Type.uint,readUint32(n,_+1,E),5)}function decodeUint64(n,_,x,E){return new Token(Type.uint,readUint64(n,_+1,E),9)}function encodeUint(n,_){return encodeUintValue(n,0,_.value)}function encodeUintValue(n,_,x){if(x<uintBoundaries[0]){const E=Number(x);n.push([_|E])}else if(x<uintBoundaries[1]){const E=Number(x);n.push([_|24,E])}else if(x<uintBoundaries[2]){const E=Number(x);n.push([_|25,E>>>8,E&255])}else if(x<uintBoundaries[3]){const E=Number(x);n.push([_|26,E>>>24&255,E>>>16&255,E>>>8&255,E&255])}else{const E=BigInt(x);if(E<uintBoundaries[4]){const S=[_|27,0,0,0,0,0,0,0];let C=Number(E&BigInt(4294967295)),T=Number(E>>BigInt(32)&BigInt(4294967295));S[8]=C&255,C=C>>8,S[7]=C&255,C=C>>8,S[6]=C&255,C=C>>8,S[5]=C&255,S[4]=T&255,T=T>>8,S[3]=T&255,T=T>>8,S[2]=T&255,T=T>>8,S[1]=T&255,n.push(S)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function n(_){return encodeUintValue.encodedSize(_.value)};encodeUintValue.encodedSize=function n(_){return _<uintBoundaries[0]?1:_<uintBoundaries[1]?2:_<uintBoundaries[2]?3:_<uintBoundaries[3]?5:9};encodeUint.compareTokens=function n(_,x){return _.value<x.value?-1:_.value>x.value?1:0};function decodeNegint8(n,_,x,E){return new Token(Type.negint,-1-readUint8(n,_+1,E),2)}function decodeNegint16(n,_,x,E){return new Token(Type.negint,-1-readUint16(n,_+1,E),3)}function decodeNegint32(n,_,x,E){return new Token(Type.negint,-1-readUint32(n,_+1,E),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(n,_,x,E){const S=readUint64(n,_+1,E);if(typeof S!="bigint"){const C=-1-S;if(C>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,C,9)}if(E.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(S),9)}function encodeNegint(n,_){const x=_.value,E=typeof x=="bigint"?x*neg1b-pos1b:x*-1-1;encodeUintValue(n,_.type.majorEncoded,E)}encodeNegint.encodedSize=function n(_){const x=_.value,E=typeof x=="bigint"?x*neg1b-pos1b:x*-1-1;return E<uintBoundaries[0]?1:E<uintBoundaries[1]?2:E<uintBoundaries[2]?3:E<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function n(_,x){return _.value<x.value?1:_.value>x.value?-1:0};function toToken$3(n,_,x,E){assertEnoughData(n,_,x+E);const S=slice$1(n,_+x,_+x+E);return new Token(Type.bytes,S,x+E)}function decodeBytesCompact(n,_,x,E){return toToken$3(n,_,1,x)}function decodeBytes8(n,_,x,E){return toToken$3(n,_,2,readUint8(n,_+1,E))}function decodeBytes16(n,_,x,E){return toToken$3(n,_,3,readUint16(n,_+1,E))}function decodeBytes32(n,_,x,E){return toToken$3(n,_,5,readUint32(n,_+1,E))}function decodeBytes64(n,_,x,E){const S=readUint64(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(n,_,9,S)}function tokenBytes(n){return n.encodedBytes===void 0&&(n.encodedBytes=n.type===Type.string?fromString$1(n.value):n.value),n.encodedBytes}function encodeBytes(n,_){const x=tokenBytes(_);encodeUintValue(n,_.type.majorEncoded,x.length),n.push(x)}encodeBytes.encodedSize=function n(_){const x=tokenBytes(_);return encodeUintValue.encodedSize(x.length)+x.length};encodeBytes.compareTokens=function n(_,x){return compareBytes(tokenBytes(_),tokenBytes(x))};function compareBytes(n,_){return n.length<_.length?-1:n.length>_.length?1:compare(n,_)}function toToken$2(n,_,x,E,S){const C=x+E;assertEnoughData(n,_,C);const T=new Token(Type.string,toString$5(n,_+x,_+C),C);return S.retainStringBytes===!0&&(T.byteValue=slice$1(n,_+x,_+C)),T}function decodeStringCompact(n,_,x,E){return toToken$2(n,_,1,x,E)}function decodeString8(n,_,x,E){return toToken$2(n,_,2,readUint8(n,_+1,E),E)}function decodeString16(n,_,x,E){return toToken$2(n,_,3,readUint16(n,_+1,E),E)}function decodeString32(n,_,x,E){return toToken$2(n,_,5,readUint32(n,_+1,E),E)}function decodeString64(n,_,x,E){const S=readUint64(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(n,_,9,S,E)}const encodeString=encodeBytes;function toToken$1(n,_,x,E){return new Token(Type.array,E,x)}function decodeArrayCompact(n,_,x,E){return toToken$1(n,_,1,x)}function decodeArray8(n,_,x,E){return toToken$1(n,_,2,readUint8(n,_+1,E))}function decodeArray16(n,_,x,E){return toToken$1(n,_,3,readUint16(n,_+1,E))}function decodeArray32(n,_,x,E){return toToken$1(n,_,5,readUint32(n,_+1,E))}function decodeArray64(n,_,x,E){const S=readUint64(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(n,_,9,S)}function decodeArrayIndefinite(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(n,_,1,1/0)}function encodeArray(n,_){encodeUintValue(n,Type.array.majorEncoded,_.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function n(_){return encodeUintValue.encodedSize(_.value)};function toToken(n,_,x,E){return new Token(Type.map,E,x)}function decodeMapCompact(n,_,x,E){return toToken(n,_,1,x)}function decodeMap8(n,_,x,E){return toToken(n,_,2,readUint8(n,_+1,E))}function decodeMap16(n,_,x,E){return toToken(n,_,3,readUint16(n,_+1,E))}function decodeMap32(n,_,x,E){return toToken(n,_,5,readUint32(n,_+1,E))}function decodeMap64(n,_,x,E){const S=readUint64(n,_+1,E);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(n,_,9,S)}function decodeMapIndefinite(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(n,_,1,1/0)}function encodeMap(n,_){encodeUintValue(n,Type.map.majorEncoded,_.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function n(_){return encodeUintValue.encodedSize(_.value)};function decodeTagCompact(n,_,x,E){return new Token(Type.tag,x,1)}function decodeTag8(n,_,x,E){return new Token(Type.tag,readUint8(n,_+1,E),2)}function decodeTag16(n,_,x,E){return new Token(Type.tag,readUint16(n,_+1,E),3)}function decodeTag32(n,_,x,E){return new Token(Type.tag,readUint32(n,_+1,E),5)}function decodeTag64(n,_,x,E){return new Token(Type.tag,readUint64(n,_+1,E),9)}function encodeTag(n,_){encodeUintValue(n,Type.tag.majorEncoded,_.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function n(_){return encodeUintValue.encodedSize(_.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(n,_,x,E){if(E.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return E.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(n,_,x,E){if(E.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(n,_,x){if(x){if(x.allowNaN===!1&&Number.isNaN(n))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(x.allowInfinity===!1&&(n===1/0||n===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,n,_)}function decodeFloat16(n,_,x,E){return createToken(readFloat16(n,_+1),3,E)}function decodeFloat32(n,_,x,E){return createToken(readFloat32(n,_+1),5,E)}function decodeFloat64(n,_,x,E){return createToken(readFloat64(n,_+1),9,E)}function encodeFloat(n,_,x){const E=_.value;if(E===!1)n.push([Type.float.majorEncoded|MINOR_FALSE]);else if(E===!0)n.push([Type.float.majorEncoded|MINOR_TRUE]);else if(E===null)n.push([Type.float.majorEncoded|MINOR_NULL]);else if(E===void 0)n.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let S,C=!1;(!x||x.float64!==!0)&&(encodeFloat16(E),S=readFloat16(ui8a,1),E===S||Number.isNaN(E)?(ui8a[0]=249,n.push(ui8a.slice(0,3)),C=!0):(encodeFloat32(E),S=readFloat32(ui8a,1),E===S&&(ui8a[0]=250,n.push(ui8a.slice(0,5)),C=!0))),C||(encodeFloat64(E),S=readFloat64(ui8a,1),ui8a[0]=251,n.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function n(_,x){const E=_.value;if(E===!1||E===!0||E===null||E===void 0)return 1;if(!x||x.float64!==!0){encodeFloat16(E);let S=readFloat16(ui8a,1);if(E===S||Number.isNaN(E))return 3;if(encodeFloat32(E),S=readFloat32(ui8a,1),E===S)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(n){if(n===1/0)dataView.setUint16(0,31744,!1);else if(n===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(n))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,n);const _=dataView.getUint32(0),x=(_&2139095040)>>23,E=_&8388607;if(x===255)dataView.setUint16(0,31744,!1);else if(x===0)dataView.setUint16(0,(n&2147483648)>>16|E>>13,!1);else{const S=x-127;S<-24?dataView.setUint16(0,0):S<-14?dataView.setUint16(0,(_&2147483648)>>16|1<<24+S,!1):dataView.setUint16(0,(_&2147483648)>>16|S+15<<10|E>>13,!1)}}}function readFloat16(n,_){if(n.length-_<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const x=(n[_]<<8)+n[_+1];if(x===31744)return 1/0;if(x===64512)return-1/0;if(x===32256)return NaN;const E=x>>10&31,S=x&1023;let C;return E===0?C=S*2**-24:E!==31?C=(S+1024)*2**(E-25):C=S===0?1/0:NaN,x&32768?-C:C}function encodeFloat32(n){dataView.setFloat32(0,n,!1)}function readFloat32(n,_){if(n.length-_<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const x=(n.byteOffset||0)+_;return new DataView(n.buffer,x,4).getFloat32(0,!1)}function encodeFloat64(n){dataView.setFloat64(0,n,!1)}function readFloat64(n,_){if(n.length-_<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const x=(n.byteOffset||0)+_;return new DataView(n.buffer,x,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(n,_,x){throw new Error(`${decodeErrPrefix} encountered invalid minor (${x}) for major ${n[_]>>>5}`)}function errorer(n){return()=>{throw new Error(`${decodeErrPrefix} ${n}`)}}const jump=[];for(let n=0;n<=23;n++)jump[n]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let n=32;n<=55;n++)jump[n]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let n=64;n<=87;n++)jump[n]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)jump[n]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)jump[n]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let n=160;n<=183;n++)jump[n]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let n=192;n<=215;n++)jump[n]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let n=224;n<=243;n++)jump[n]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let n=0;n<24;n++)quick[n]=new Token(Type.uint,n,1);for(let n=-1;n>=-24;n--)quick[31-n]=new Token(Type.negint,n,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(n){switch(n.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return n.value.length?void 0:fromArray([64]);case Type.string:return n.value===""?fromArray([96]):void 0;case Type.array:return n.value===0?fromArray([128]):void 0;case Type.map:return n.value===0?fromArray([160]):void 0;case Type.uint:return n.value<24?fromArray([Number(n.value)]):void 0;case Type.negint:if(n.value>=-24)return fromArray([31-Number(n.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const n=[];return n[Type.uint.major]=encodeUint,n[Type.negint.major]=encodeNegint,n[Type.bytes.major]=encodeBytes,n[Type.string.major]=encodeString,n[Type.array.major]=encodeArray,n[Type.map.major]=encodeMap,n[Type.tag.major]=encodeTag,n[Type.float.major]=encodeFloat,n}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(_,x){this.obj=_,this.parent=x}includes(_){let x=this;do if(x.obj===_)return!0;while(x=x.parent);return!1}static createCheck(_,x){if(_&&_.includes(x))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(x,_)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(n,_,x,E){return!Number.isInteger(n)||!Number.isSafeInteger(n)?new Token(Type.float,n):n>=0?new Token(Type.uint,n):new Token(Type.negint,n)},bigint(n,_,x,E){return n>=BigInt(0)?new Token(Type.uint,n):new Token(Type.negint,n)},Uint8Array(n,_,x,E){return new Token(Type.bytes,n)},string(n,_,x,E){return new Token(Type.string,n)},boolean(n,_,x,E){return n?simpleTokens.true:simpleTokens.false},null(n,_,x,E){return simpleTokens.null},undefined(n,_,x,E){return simpleTokens.undefined},ArrayBuffer(n,_,x,E){return new Token(Type.bytes,new Uint8Array(n))},DataView(n,_,x,E){return new Token(Type.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))},Array(n,_,x,E){if(!n.length)return x.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;E=Ref.createCheck(E,n);const S=[];let C=0;for(const T of n)S[C++]=objectToTokens(T,x,E);return x.addBreakTokens?[new Token(Type.array,n.length),S,new Token(Type.break)]:[new Token(Type.array,n.length),S]},Object(n,_,x,E){const S=_!=="Object",C=S?n.keys():Object.keys(n),T=S?n.size:C.length;if(!T)return x.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;E=Ref.createCheck(E,n);const A=[];let B=0;for(const I of C)A[B++]=[objectToTokens(I,x,E),objectToTokens(S?n.get(I):n[I],x,E)];return sortMapEntries(A,x),x.addBreakTokens?[new Token(Type.map,T),A,new Token(Type.break)]:[new Token(Type.map,T),A]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${n}Array`]=typeEncoders.DataView;function objectToTokens(n,_={},x){const E=is$1(n),S=_&&_.typeEncoders&&_.typeEncoders[E]||typeEncoders[E];if(typeof S=="function"){const T=S(n,E,_,x);if(T!=null)return T}const C=typeEncoders[E];if(!C)throw new Error(`${encodeErrPrefix} unsupported type: ${E}`);return C(n,E,_,x)}function sortMapEntries(n,_){_.mapSorter&&n.sort(_.mapSorter)}function mapSorter(n,_){const x=Array.isArray(n[0])?n[0][0]:n[0],E=Array.isArray(_[0])?_[0][0]:_[0];if(x.type!==E.type)return x.type.compare(E.type);const S=x.type.major,C=cborEncoders[S].compareTokens(x,E);return C===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),C}function tokensToEncoded(n,_,x,E){if(Array.isArray(_))for(const S of _)tokensToEncoded(n,S,x,E);else x[_.type.major](n,_,E)}function encodeCustom(n,_,x){const E=objectToTokens(n,x);if(!Array.isArray(E)&&x.quickEncodeToken){const S=x.quickEncodeToken(E);if(S)return S;const C=_[E.type.major];if(C.encodedSize){const T=C.encodedSize(E,x),A=new Bl(T);if(C(A,E,x),A.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${E} was wrong`);return asU8A(A.chunks[0])}}return buf.reset(),tokensToEncoded(buf,E,_,x),buf.toBytes(!0)}function encode$9(n,_){return _=Object.assign({},defaultEncodeOptions,_),encodeCustom(n,cborEncoders,_)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(_,x={}){this.pos=0,this.data=_,this.options=x}done(){return this.pos>=this.data.length}next(){const _=this.data[this.pos];let x=quick[_];if(x===void 0){const E=jump[_];if(!E)throw new Error(`${decodeErrPrefix} no decoder for major type ${_>>>5} (byte 0x${_.toString(16).padStart(2,"0")})`);const S=_&31;x=E(this.data,this.pos,S,this.options)}return this.pos+=x.encodedLength,x}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(n,_,x){const E=[];for(let S=0;S<n.value;S++){const C=tokensToObject(_,x);if(C===BREAK){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(C===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${S}, expected ${n.value})`);E[S]=C}return E}function tokenToMap(n,_,x){const E=x.useMaps===!0,S=E?void 0:{},C=E?new Map:void 0;for(let T=0;T<n.value;T++){const A=tokensToObject(_,x);if(A===BREAK){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(A===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${T} [no key], expected ${n.value})`);if(E!==!0&&typeof A!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof A})`);if(x.rejectDuplicateMapKeys===!0&&(E&&C.has(A)||!E&&A in S))throw new Error(`${decodeErrPrefix} found repeat map key "${A}"`);const B=tokensToObject(_,x);if(B===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${T} [no value], expected ${n.value})`);E?C.set(A,B):S[A]=B}return E?C:S}function tokensToObject(n,_){if(n.done())return DONE;const x=n.next();if(x.type===Type.break)return BREAK;if(x.type.terminal)return x.value;if(x.type===Type.array)return tokenToArray(x,n,_);if(x.type===Type.map)return tokenToMap(x,n,_);if(x.type===Type.tag){if(_.tags&&typeof _.tags[x.value]=="function"){const E=tokensToObject(n,_);return _.tags[x.value](E)}throw new Error(`${decodeErrPrefix} tag not supported (${x.value})`)}throw new Error("unsupported")}function decode$6(n,_){if(!(n instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);_=Object.assign({},defaultDecodeOptions,_);const x=_.tokenizer||new Tokeniser(n,_),E=tokensToObject(x,_);if(E===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(E===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!x.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return E}const CID_CBOR_TAG$1=42;function cidEncoder$1(n){if(n.asCID!==n)return null;const _=CID$3.asCID(n);if(!_)return null;const x=new Uint8Array(_.bytes.byteLength+1);return x.set(_.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,x)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(n.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$1="dag-cbor",code$3=113,encode$8=n=>encode$9(n,encodeOptions$1),decode$5=n=>decode$6(n,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$5,encode:encode$8,name:name$1},Symbol.toStringTag,{value:"Module"})),ENC_BLOCK_SIZE=24;async function encodePayload(n){const _=await encode$a({value:n,codec:dagCBOR,hasher:sha256$5});return{cid:_.cid,linkedBlock:_.bytes}}function pad(n,_=ENC_BLOCK_SIZE){const x=(_-n.length%_)%_,E=new Uint8Array(n.length+x);return E.set(n,0),E}async function encodeIdentityCID(n){return(await encode$a({value:n,codec:dagCBOR,hasher:identity$2})).cid}function decodeIdentityCID(n){if(n=CID$3.asCID(n),n.code!==code$3)throw new Error("CID codec must be dag-cbor");if(n.multihash.code!==identity$2.code)throw new Error("CID must use identity multihash");return decode$5(n.multihash.digest)}async function prepareCleartext(n,_){return pad((await encodeIdentityCID(n)).bytes,_)}function decodeCleartext(n){return decodeIdentityCID(CID$3.decodeFirst(n)[0])}const abortedReasonSymbol=Symbol("aborted");function abortable(n,_){if(_.aborted)return Promise.reject(abortedReasonSymbol);let x;const E=new Promise((S,C)=>{x=C});return _.addEventListener("abort",()=>{x(abortedReasonSymbol)}),Promise.race([n,E])}let nanoid=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((_,x)=>(x&=63,x<36?_+=x.toString(36):x<62?_+=(x-26).toString(36).toUpperCase():x>62?_+="-":_+="_",_),"");const ABORT_REQUEST_METHOD="utils_abort_request";var ERROR_CODE;(function(n){n[n.PARSE_ERROR=-32700]="PARSE_ERROR",n[n.INVALID_REQUEST=-32600]="INVALID_REQUEST",n[n.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",n[n.INVALID_PARAMS=-32602]="INVALID_PARAMS",n[n.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));const ERROR_MESSAGE={[ERROR_CODE.PARSE_ERROR]:"Parse error",[ERROR_CODE.INVALID_REQUEST]:"Invalid request",[ERROR_CODE.METHOD_NOT_FOUND]:"Method not found",[ERROR_CODE.INVALID_PARAMS]:"Invalid params",[ERROR_CODE.INTERNAL_ERROR]:"Internal error"};function isServerError(n){return-32e3>=n&&n>=-32099}function getErrorMessage(n){return ERROR_MESSAGE[n.toString()]??(isServerError(n)?"Server error":"Application error")}class RPCError extends Error{static fromObject(_){return new RPCError(_.code,_.message,_.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(_,x,E){super(),Object.setPrototypeOf(this,RPCError.prototype),this.code=_,this.data=E,this.message=x??getErrorMessage(_)}}function createErrorFactory(n){const _=ERROR_MESSAGE[n];return function(E){return new RPCError(n,_,E)}}createErrorFactory(ERROR_CODE.PARSE_ERROR);createErrorFactory(ERROR_CODE.INVALID_REQUEST);createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND);createErrorFactory(ERROR_CODE.INVALID_PARAMS);createErrorFactory(ERROR_CODE.INTERNAL_ERROR);function _checkPrivateRedeclaration(n,_){if(_.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(n,_){return _.get?_.get.call(n):_.value}function _classApplyDescriptorSet(n,_,x){if(_.set)_.set.call(n,x);else{if(!_.writable)throw new TypeError("attempted to set read only private field");_.value=x}}function _classExtractFieldDescriptor(n,_,x){if(!_.has(n))throw new TypeError("attempted to "+x+" private field on non-instance");return _.get(n)}function _classPrivateFieldGet(n,_){var x=_classExtractFieldDescriptor(n,_,"get");return _classApplyDescriptorGet(n,x)}function _classPrivateFieldInit(n,_,x){_checkPrivateRedeclaration(n,_),_.set(n,x)}function _classPrivateFieldSet(n,_,x){var E=_classExtractFieldDescriptor(n,_,"set");return _classApplyDescriptorSet(n,E,x),x}var _connection=new WeakMap;class RPCClient{get connection(){return _classPrivateFieldGet(this,_connection)}createID(){return nanoid()}request(_,x=void 0,E={}){const{signal:S}=E;if(S?.aborted)return Promise.reject(abortedReasonSymbol);const C=this.createID(),T=_classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",id:C,method:_,params:x}).then(A=>{if(A==null)throw new Error("Missing response");if(A.error!=null)throw RPCError.fromObject(A.error);return A.result});return S==null?T:(S.addEventListener("abort",()=>{this.notify(ABORT_REQUEST_METHOD,{id:C})}),abortable(T,S))}async notify(_,x=void 0){await _classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",method:_,params:x})}constructor(_){_classPrivateFieldInit(this,_connection,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_connection,_)}}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){return hasRequiredIdentifiers||(hasRequiredIdentifiers=1,identifiers={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}),identifiers}var utilities={},style,hasRequiredStyle;function requireStyle(){return hasRequiredStyle||(hasRequiredStyle=1,style={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}),style}var converter={},transformers={},hasRequiredTransformers;function requireTransformers(){return hasRequiredTransformers||(hasRequiredTransformers=1,function(n){"use strict;";const{Buffer:_}=buffer$3,x=4294967292,E=4294967293,S=4294967294,C=4294967295,T=[0,1,3,7,15,31,63,127,255,511,1023],A=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),I=[];B.forEach(D=>{I.push(D.charCodeAt(0))}),n.utf8={encode(D){const L=[];return D.forEach(V=>{if(V>=0&&V<=127)L.push(V);else if(V<=2047)L.push(192+(V>>6&T[5])),L.push(128+(V&T[6]));else if(V<55296||V>57343&&V<=65535)L.push(224+(V>>12&T[4])),L.push(128+(V>>6&T[6])),L.push(128+(V&T[6]));else if(V>=65536&&V<=1114111){const U=V>>16&T[5];L.push(240+(U>>2)),L.push(128+((U&T[2])<<4)+(V>>12&T[4])),L.push(128+(V>>6&T[6])),L.push(128+(V&T[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${V}`)}),_.from(L)},decode(D,L){function V($e,_e){if((_e&192)!==128)return E;const ae=(($e&T[5])<<6)+(_e&T[6]);return ae<128?x:ae}function U($e,_e,ae){if((ae&192)!==128||(_e&192)!==128)return E;const X=(($e&T[4])<<12)+((_e&T[6])<<6)+(ae&T[6]);return X<2048?x:X>=55296&&X<=57343?S:X}function q($e,_e,ae,X){if((X&192)!==128||(ae&192)!==128||(_e&192)!==128)return E;const F=((($e&T[3])<<2)+(_e>>4&T[2])<<16)+((_e&T[4])<<12)+((ae&T[6])<<6)+(X&T[6]);return F<65536?x:F>1114111?S:F}let H,W,Q,re,ce,ne;const Y=D.length;let fe=L?3:0;const ge=[];for(;fe<Y;){W=D[fe],H=C;const $e=!0;for(;$e;){if(W>=0&&W<=127){H=W,ne=1;break}if(Q=fe+1,Q<Y&&W>=194&&W<=223){H=V(W,D[Q]),ne=2;break}if(re=fe+2,re<Y&&W>=224&&W<=239){H=U(W,D[Q],D[re]),ne=3;break}if(ce=fe+3,ce<Y&&W>=240&&W<=244){H=q(W,D[Q],D[re],D[ce]),ne=4;break}break}if(H>1114111){const _e=`byte[${fe}]`;throw H===C?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${_e}`):H===E?new RangeError(`utf8.decode: illegal trailing byte found at: ${_e}`):H===S?new RangeError(`utf8.decode: code point out of range found at: ${_e}`):H===x?new RangeError(`utf8.decode: non-shortest form found at: ${_e}`):new RangeError(`utf8.decode: unrecognized error found at: ${_e}`)}ge.push(H),fe+=ne}return ge}},n.utf16be={encode(D){const L=[];let V,U,q;for(let H=0;H<D.length;H+=1)if(V=D[H],V>=0&&V<=55295||V>=57344&&V<=65535)L.push(V>>8&T[8]),L.push(V&T[8]);else if(V>=65536&&V<=1114111)q=V-65536,U=55296+(q>>10),q=56320+(q&T[10]),L.push(U>>8&T[8]),L.push(U&T[8]),L.push(q>>8&T[8]),L.push(q&T[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${H}]: ${V}`);return _.from(L)},decode(D,L){if(D.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${D.length}`);const V=[],U=D.length;let q=L?2:0,H=0,W,Q,re,ce,ne,Y;for(;q<U;){for(;;){if(re=q+1,re<U){if(ne=(D[q]<<8)+D[re],ne<55296||ne>57343){W=ne,Q=2;break}if(ce=q+3,ce<U&&(Y=(D[q+2]<<8)+D[ce],ne<=56319&&Y>=56320&&Y<=57343)){W=65536+(ne-55296<<10)+(Y-56320),Q=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${q}]`)}V[H++]=W,q+=Q}return V}},n.utf16le={encode(D){const L=[];let V,U,q;for(let H=0;H<D.length;H+=1)if(V=D[H],V>=0&&V<=55295||V>=57344&&V<=65535)L.push(V&T[8]),L.push(V>>8&T[8]);else if(V>=65536&&V<=1114111)q=V-65536,U=55296+(q>>10),q=56320+(q&T[10]),L.push(U&T[8]),L.push(U>>8&T[8]),L.push(q&T[8]),L.push(q>>8&T[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${H}]: ${V}`);return _.from(L)},decode(D,L){if(D.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${D.length}`);const V=[],U=D.length;let q=L?2:0,H=0,W,Q,re,ce,ne,Y;for(;q<U;){for(;;){if(re=q+1,re<U){if(ne=(D[re]<<8)+D[q],ne<55296||ne>57343){W=ne,Q=2;break}if(ce=q+3,ce<U&&(Y=(D[ce]<<8)+D[q+2],ne<=56319&&Y>=56320&&Y<=57343)){W=65536+(ne-55296<<10)+(Y-56320),Q=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${q}]`)}V[H++]=W,q+=Q}return V}},n.utf32be={encode(D){const L=_.alloc(D.length*4);let V=0;return D.forEach(U=>{if(U>=55296&&U<=57343||U>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${V/4}]: ${U}`);L[V++]=U>>24&T[8],L[V++]=U>>16&T[8],L[V++]=U>>8&T[8],L[V++]=U&T[8]}),L},decode(D,L){if(D.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${D.length}`);const V=[];let U=L?4:0;for(;U<D.length;U+=4){const q=(D[U]<<24)+(D[U+1]<<16)+(D[U+2]<<8)+D[U+3];if(q>=55296&&q<=57343||q>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${U/4}]: ${q}`);V.push(q)}return V}},n.utf32le={encode(D){const L=_.alloc(D.length*4);let V=0;return D.forEach(U=>{if(U>=55296&&U<=57343||U>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${V/4}]: ${U}`);L[V++]=U&T[8],L[V++]=U>>8&T[8],L[V++]=U>>16&T[8],L[V++]=U>>24&T[8]}),L},decode(D,L){if(D.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${D.length}`);const V=[];let U=L?4:0;for(;U<D.length;U+=4){const q=(D[U+3]<<24)+(D[U+2]<<16)+(D[U+1]<<8)+D[U];if(q>=55296&&q<=57343||q>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${U/4}]: ${q}`);V.push(q)}return V}},n.uint7={encode(D){const L=_.alloc(D.length);for(let V=0;V<D.length;V+=1){if(D[V]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${V}]: ${D[V]}`);L[V]=D[V]}return L},decode(D){const L=[];for(let V=0;V<D.length;V+=1){if(D[V]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${V}]: ${D[V]}`);L[V]=D[V]}return L}},n.uint8={encode(D){const L=_.alloc(D.length);for(let V=0;V<D.length;V+=1){if(D[V]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${V}]: ${D[V]}`);L[V]=D[V]}return L},decode(D){const L=[];for(let V=0;V<D.length;V+=1)L[V]=D[V];return L}},n.uint16be={encode(D){const L=_.alloc(D.length*2);let V=0;return D.forEach(U=>{if(U>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${V/2}]: ${U}`);L[V++]=U>>8&T[8],L[V++]=U&T[8]}),L},decode(D){if(D.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${D.length}`);const L=[];for(let V=0;V<D.length;V+=2)L.push((D[V]<<8)+D[V+1]);return L}},n.uint16le={encode(D){const L=_.alloc(D.length*2);let V=0;return D.forEach(U=>{if(U>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${V/2}]: ${U}`);L[V++]=U&T[8],L[V++]=U>>8&T[8]}),L},decode(D){if(D.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${D.length}`);const L=[];for(let V=0;V<D.length;V+=2)L.push((D[V+1]<<8)+D[V]);return L}},n.uint32be={encode(D){const L=_.alloc(D.length*4);let V=0;return D.forEach(U=>{L[V++]=U>>24&T[8],L[V++]=U>>16&T[8],L[V++]=U>>8&T[8],L[V++]=U&T[8]}),L},decode(D){if(D.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${D.length}`);const L=[];for(let V=0;V<D.length;V+=4)L.push((D[V]<<24)+(D[V+1]<<16)+(D[V+2]<<8)+D[V+3]);return L}},n.uint32le={encode(D){const L=_.alloc(D.length*4);let V=0;return D.forEach(U=>{L[V++]=U&T[8],L[V++]=U>>8&T[8],L[V++]=U>>16&T[8],L[V++]=U>>24&T[8]}),L},decode(D){if(D.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${D.length}`);const L=[];for(let V=0;V<D.length;V+=4)L.push((D[V+3]<<24)+(D[V+2]<<16)+(D[V+1]<<8)+D[V]);return L}},n.string={encode(D){return n.utf16le.encode(D).toString("utf16le")},decode(D){return n.utf16le.decode(_.from(D,"utf16le"),0)}},n.escaped={encode(D){const L=[];for(let V=0;V<D.length;V+=1){const U=D[V];if(U===96)L.push(U),L.push(U);else if(U===10)L.push(U);else if(U>=32&&U<=126)L.push(U);else{let q="";if(U>=0&&U<=31)q+=`\`x${A[U]}`;else if(U>=127&&U<=255)q+=`\`x${A[U]}`;else if(U>=256&&U<=65535)q+=`\`u${A[U>>8&T[8]]}${A[U&T[8]]}`;else if(U>=65536&&U<=4294967295){q+="`u{";const W=U>>24&T[8];W>0&&(q+=A[W]),q+=`${A[U>>16&T[8]]+A[U>>8&T[8]]+A[U&T[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");_.from(q).forEach(W=>{L.push(W)})}}return _.from(L)},decode(D){function L(Y){return Y>=48&&Y<=57||Y>=65&&Y<=70||Y>=97&&Y<=102}function V(Y,fe,ge){const $e={char:null,nexti:Y+2,error:!0};if(Y+1<fe&&L(ge[Y])&&L(ge[Y+1])){const _e=String.fromCodePoint(ge[Y],ge[Y+1]);$e.char=parseInt(_e,16),Number.isNaN($e.char)||($e.error=!1)}return $e}function U(Y,fe,ge){const $e={char:null,nexti:Y+4,error:!0};if(Y+3<fe&&L(ge[Y])&&L(ge[Y+1])&&L(ge[Y+2])&&L(ge[Y+3])){const _e=String.fromCodePoint(ge[Y],ge[Y+1],ge[Y+2],ge[Y+3]);$e.char=parseInt(_e,16),Number.isNaN($e.char)||($e.error=!1)}return $e}function q(Y,fe,ge){const $e={char:null,nexti:Y+4,error:!0};let _e="";for(;Y<fe&&L(ge[Y]);)_e+=String.fromCodePoint(ge[Y]),Y+=1;return $e.char=parseInt(_e,16),ge[Y]===125&&!Number.isNaN($e.char)&&($e.error=!1),$e.nexti=Y+1,$e}const H=[],W=D.length;let Q,re,ce,ne=0;for(;ne<W;){for(;;){if(ce=!0,D[ne]!==96){H.push(D[ne]),ne+=1,ce=!1;break}if(Q=ne+1,Q>=W)break;if(D[Q]===96){H.push(96),ne+=2,ce=!1;break}if(D[Q]===120){if(re=V(Q+1,W,D),re.error)break;H.push(re.char),ne=re.nexti,ce=!1;break}if(D[Q]===117){if(D[Q+1]===123){if(re=q(Q+2,W,D),re.error)break;H.push(re.char),ne=re.nexti,ce=!1;break}if(re=U(Q+1,W,D),re.error)break;H.push(re.char),ne=re.nexti,ce=!1;break}break}if(ce)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${ne}]`)}return H}};const M=13,O=10;n.lineEnds={crlf(D){const L=[];let V=0;for(;V<D.length;)switch(D[V]){case M:V+1<D.length&&D[V+1]===O?V+=2:V+=1,L.push(M),L.push(O);break;case O:L.push(M),L.push(O),V+=1;break;default:L.push(D[V]),V+=1;break}return L.length>0&&L[L.length-1]!==O&&(L.push(M),L.push(O)),L},lf(D){const L=[];let V=0;for(;V<D.length;)switch(D[V]){case M:V+1<D.length&&D[V+1]===O?V+=2:V+=1,L.push(O);break;case O:L.push(O),V+=1;break;default:L.push(D[V]),V+=1;break}return L.length>0&&L[L.length-1]!==O&&L.push(O),L}},n.base64={encode(D){if(D.length===0)return _.alloc(0);let L,V,U,q=D.length%3;q=q>0?3-q:0;let H=(D.length+q)/3;const W=_.alloc(H*4);q>0&&(H-=1),L=0,V=0;for(let Q=0;Q<H;Q+=1)U=D[L++]<<16,U+=D[L++]<<8,U+=D[L++],W[V++]=I[U>>18&T[6]],W[V++]=I[U>>12&T[6]],W[V++]=I[U>>6&T[6]],W[V++]=I[U&T[6]];if(q===0)return W;if(q===1)return U=D[L++]<<16,U+=D[L]<<8,W[V++]=I[U>>18&T[6]],W[V++]=I[U>>12&T[6]],W[V++]=I[U>>6&T[6]],W[V]=I[64],W;if(q===2)return U=D[L]<<16,W[V++]=I[U>>18&T[6]],W[V++]=I[U>>12&T[6]],W[V++]=I[64],W[V]=I[64],W},decode(D){function L(ne){const Y=[];let fe=0;for(let ge=0;ge<ne.length;ge+=1){const $e=ne[ge],_e=!0;for(;_e&&!($e===32||$e===9||$e===10||$e===13);){if($e>=65&&$e<=90){Y.push($e-65);break}if($e>=97&&$e<=122){Y.push($e-71);break}if($e>=48&&$e<=57){Y.push($e+4);break}if($e===43){Y.push(62);break}if($e===47){Y.push(63);break}if($e===61){Y.push(64),fe+=1;break}throw new RangeError(`base64.decode: invalid character buf[${ge}]: ${$e}`)}}if(Y.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${Y.length}`);switch(fe){case 0:break;case 1:if(Y[Y.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(Y[Y.length-1]!==64||Y[Y.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${fe}`)}return{tail:fe,buf:_.from(Y)}}if(D.length===0)return _.alloc(0);const V=L(D),{tail:U}=V,q=V.buf;let H,W,Q,re=q.length/4;const ce=_.alloc(re*3-U);U>0&&(re-=1),W=0,H=0;for(let ne=0;ne<re;ne+=1)Q=q[H++]<<18,Q+=q[H++]<<12,Q+=q[H++]<<6,Q+=q[H++],ce[W++]=Q>>16&T[8],ce[W++]=Q>>8&T[8],ce[W++]=Q&T[8];return U===1&&(Q=q[H++]<<18,Q+=q[H++]<<12,Q+=q[H]<<6,ce[W++]=Q>>16&T[8],ce[W]=Q>>8&T[8]),U===2&&(Q=q[H++]<<18,Q+=q[H++]<<12,ce[W]=Q>>16&T[8]),ce},toString(D){if(D.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${D.length}`);let L="",V=0;function U(H,W,Q,re){switch(V){case 76:L+=`\r
${H}${W}${Q}${re}`,V=4;break;case 75:L+=`${H}\r
${W}${Q}${re}`,V=3;break;case 74:L+=`${H+W}\r
${Q}${re}`,V=2;break;case 73:L+=`${H+W+Q}\r
${re}`,V=1;break;default:L+=H+W+Q+re,V+=4;break}}function q(H){return H>=65&&H<=90||H>=97&&H<=122||H>=48&&H<=57||H===43||H===47||H===61}for(let H=0;H<D.length;H+=4){for(let W=H;W<H+4;W+=1)if(!q(D[W]))throw new RangeError(`base64.toString: buf[${W}]: ${D[W]} : not valid base64 character code`);U(String.fromCharCode(D[H]),String.fromCharCode(D[H+1]),String.fromCharCode(D[H+2]),String.fromCharCode(D[H+3]))}return L}}}(transformers)),transformers}var hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(n){"use strict;";const{Buffer:_}=buffer$3,x=requireTransformers(),E="UTF8",S="UTF16",C="UTF16BE",T="UTF16LE",A="UTF32",B="UTF32BE",I="UTF32LE",M="UINT7",O="ASCII",D="BINARY",L="UINT8",V="UINT16",U="UINT16LE",q="UINT16BE",H="UINT32",W="UINT32LE",Q="UINT32BE",re="ESCAPED",ce="STRING",ne=function(z){z.type=E;const J=z.data;z.bom=0,J.length>=3&&J[0]===239&&J[1]===187&&J[2]===191&&(z.bom=3)},Y=function(z){const J=z.data;switch(z.bom=0,z.type){case S:z.type=C,J.length>=2&&(J[0]===254&&J[1]===255?z.bom=2:J[0]===255&&J[1]===254&&(z.type=T,z.bom=2));break;case C:if(z.type=C,J.length>=2){if(J[0]===254&&J[1]===255)z.bom=2;else if(J[0]===255&&J[1]===254)throw new TypeError(`src type: "${C}" specified but BOM is for "${T}"`)}break;case T:if(z.type=T,J.length>=0){if(J[0]===254&&J[1]===255)throw new TypeError(`src type: "${T}" specified but BOM is for "${C}"`);J[0]===255&&J[1]===254&&(z.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${z.type}" unrecognized`)}},fe=function(z){const J=z.data;switch(z.bom=0,z.type){case A:z.type=B,J.length>=4&&(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255&&(z.bom=4),J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0&&(z.type=I,z.bom=4));break;case B:if(z.type=B,J.length>=4&&(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255&&(z.bom=4),J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0))throw new TypeError(`src type: ${B} specified but BOM is for ${I}"`);break;case I:if(z.type=I,J.length>=4){if(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255)throw new TypeError(`src type: "${I}" specified but BOM is for "${B}"`);J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0&&(z.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${z.type}" unrecognized`)}},ge=function(z,J){function te(oe){const ie={type:"",base64:!1},j=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(oe);return j&&(j[2]&&(ie.type=j[2].toUpperCase()),j[1]&&(ie.base64=!0)),ie}const se=te(z.toUpperCase());if(se.base64){if(se.type===ce)throw new TypeError(`type: "${z} "BASE64:" prefix not allowed with type ${ce}`);if(_.isBuffer(J))se.data=x.base64.decode(J);else if(typeof J=="string"){const oe=_.from(J,"ascii");se.data=x.base64.decode(oe)}else throw new TypeError(`type: "${z} unrecognized data type: typeof(data): ${typeof J}`)}else se.data=J;switch(se.type){case E:ne(se);break;case S:case C:case T:Y(se);break;case A:case B:case I:fe(se);break;case V:se.type=q;break;case H:se.type=Q;break;case O:se.type=M;break;case D:se.type=L;break;case M:case L:case U:case q:case W:case Q:case ce:case re:break;default:throw new TypeError(`type: "${z}" not recognized`)}if(se.type===ce){if(typeof se.data!="string")throw new TypeError(`type: "${z}" but data is not a string`)}else if(!_.isBuffer(se.data))throw new TypeError(`type: "${z}" but data is not a Buffer`);return se},$e=function(z,J){function te(oe){let ie,G;const j={crlf:!1,lf:!1,base64:!1,type:""},ee=!0;for(;ee;){if(G=oe,ie=oe.slice(0,5),ie==="CRLF:"){j.crlf=!0,G=oe.slice(5);break}if(ie=oe.slice(0,3),ie==="LF:"){j.lf=!0,G=oe.slice(3);break}break}return ie=G.split(":"),ie.length===1?j.type=ie[0]:ie.length===2&&ie[1]==="BASE64"&&(j.base64=!0,j.type=ie[0]),j}if(!Array.isArray(J))throw new TypeError(`dst chars: not array: "${typeof J}`);if(typeof z!="string")throw new TypeError(`dst type: not string: "${typeof z}`);const se=te(z.toUpperCase());switch(se.type){case E:case C:case T:case B:case I:case M:case L:case U:case q:case W:case Q:case re:break;case ce:if(se.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${ce}`);break;case O:se.type=M;break;case D:se.type=L;break;case S:se.type=C;break;case A:se.type=B;break;case V:se.type=q;break;case H:se.type=Q;break;default:throw new TypeError(`dst type unrecognized: "${z}" : must have form [crlf:|lf:]type[:base64]`)}return se},_e=function(z,J){switch(z){case E:return x.utf8.encode(J);case C:return x.utf16be.encode(J);case T:return x.utf16le.encode(J);case B:return x.utf32be.encode(J);case I:return x.utf32le.encode(J);case M:return x.uint7.encode(J);case L:return x.uint8.encode(J);case q:return x.uint16be.encode(J);case U:return x.uint16le.encode(J);case Q:return x.uint32be.encode(J);case W:return x.uint32le.encode(J);case ce:return x.string.encode(J);case re:return x.escaped.encode(J);default:throw new TypeError(`encode type "${z}" not recognized`)}},ae=function(z){switch(z.type){case E:return x.utf8.decode(z.data,z.bom);case T:return x.utf16le.decode(z.data,z.bom);case C:return x.utf16be.decode(z.data,z.bom);case B:return x.utf32be.decode(z.data,z.bom);case I:return x.utf32le.decode(z.data,z.bom);case M:return x.uint7.decode(z.data);case L:return x.uint8.decode(z.data);case q:return x.uint16be.decode(z.data);case U:return x.uint16le.decode(z.data);case Q:return x.uint32be.decode(z.data);case W:return x.uint32le.decode(z.data);case ce:return x.string.decode(z.data);case re:return x.escaped.decode(z.data);default:throw new TypeError(`decode type "${z.type}" not recognized`)}};n.decode=function(z,J){const te=ge(z,J);return ae(te)},n.encode=function(z,J){let te,se;const oe=$e(z,J);return oe.crlf?(te=x.lineEnds.crlf(J),se=_e(oe.type,te)):oe.lf?(te=x.lineEnds.lf(J),se=_e(oe.type,te)):se=_e(oe.type,J),oe.base64&&(se=x.base64.encode(se)),se};const X=function(z,J,te){return n.encode(te,n.decode(z,J))};n.convert=X}(converter)),converter}var emitcss,hasRequiredEmitcss;function requireEmitcss(){return hasRequiredEmitcss||(hasRequiredEmitcss=1,emitcss=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}),emitcss}var hasRequiredUtilities;function requireUtilities(){return hasRequiredUtilities||(hasRequiredUtilities=1,function(n){const _=requireStyle(),x=requireConverter(),E=requireEmitcss(),S=requireIdentifiers(),C="utilities.js: ",T=function(B,I,M){let O,D=I;const L=!0;for(;L;){if(B<=0){D=0,O=0;break}if(typeof D!="number"){D=0,O=B;break}if(D>=B){D=B,O=B;break}if(typeof M!="number"){O=B;break}if(O=D+M,O>B){O=B;break}break}return{beg:D,end:O}};n.htmlToPage=function(B,I){let M;if(typeof B!="string")throw new Error(`${C}htmlToPage: input HTML is not a string`);typeof I!="string"?M="htmlToPage":M=I;let O="";return O+=`<!DOCTYPE html>
`,O+=`<html lang="en">
`,O+=`<head>
`,O+=`<meta charset="utf-8">
`,O+=`<title>${M}</title>
`,O+=`<style>
`,O+=E(),O+=`</style>
`,O+=`</head>
<body>
`,O+=`<p>${new Date}</p>
`,O+=B,O+=`</body>
</html>
`,O},n.parserResultToHtml=function(B,I){let M=null;typeof I=="string"&&I!==""&&(M=I);let O,D;B.success===!0?O=`<span class="${_.CLASS_MATCH}">true</span>`:O=`<span class="${_.CLASS_NOMATCH}">false</span>`,B.state===S.EMPTY?D=`<span class="${_.CLASS_EMPTY}">EMPTY</span>`:B.state===S.MATCH?D=`<span class="${_.CLASS_MATCH}">MATCH</span>`:B.state===S.NOMATCH?D=`<span class="${_.CLASS_NOMATCH}">NOMATCH</span>`:D=`<span class="${_.CLASS_NOMATCH}">unrecognized</span>`;let L="";return L+=`<table class="${_.CLASS_STATE}">
`,M&&(L+=`<caption>${M}</caption>
`),L+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,L+=`<tr><td>parser success</td><td>${O}</td>
`,L+=`<td><span class="${_.CLASS_MATCH}">true</span> if the parse succeeded,
`,L+=` <span class="${_.CLASS_NOMATCH}">false</span> otherwise`,L+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,L+=`<tr><td>parser state</td><td>${D}</td>
`,L+=`<td><span class="${_.CLASS_EMPTY}">EMPTY</span>, `,L+=`<span class="${_.CLASS_MATCH}">MATCH</span> or 
`,L+=`<span class="${_.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,L+=`<tr><td>string length</td><td>${B.length}</td><td>length of the input (sub)string</td></tr>
`,L+=`<tr><td>matched length</td><td>${B.matched}</td><td>number of input string characters matched</td></tr>
`,L+=`<tr><td>max matched</td><td>${B.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,L+=`<tr><td>max tree depth</td><td>${B.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,L+=`<tr><td>node hits</td><td>${B.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,L+=`<tr><td>input length</td><td>${B.inputLength}</td><td>length of full input string</td></tr>
`,L+=`<tr><td>sub-string begin</td><td>${B.subBegin}</td><td>sub-string first character index</td></tr>
`,L+=`<tr><td>sub-string end</td><td>${B.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,L+=`<tr><td>sub-string length</td><td>${B.subLength}</td><td>sub-string length</td></tr>
`,L+=`</table>
`,L},n.charsToString=function(B,I,M){let O,D;if(typeof I=="number"){if(I>=B.length)return"";O=I<0?0:I}else O=0;if(typeof M=="number"){if(M<=0)return"";D=M>B.length-O?B.length:O+M}else D=B.length;return O<D?x.encode("UTF16LE",B.slice(O,D)).toString("utf16le"):""},n.stringToChars=function(B){return x.decode("STRING",B)},n.opcodeToString=function(B){let I="unknown";switch(B){case S.ALT:I="ALT";break;case S.CAT:I="CAT";break;case S.RNM:I="RNM";break;case S.UDT:I="UDT";break;case S.AND:I="AND";break;case S.NOT:I="NOT";break;case S.REP:I="REP";break;case S.TRG:I="TRG";break;case S.TBS:I="TBS";break;case S.TLS:I="TLS";break;case S.BKR:I="BKR";break;case S.BKA:I="BKA";break;case S.BKN:I="BKN";break;case S.ABG:I="ABG";break;case S.AEN:I="AEN";break;default:throw new Error("unrecognized opcode")}return I},n.stateToString=function(B){let I="unknown";switch(B){case S.ACTIVE:I="ACTIVE";break;case S.MATCH:I="MATCH";break;case S.EMPTY:I="EMPTY";break;case S.NOMATCH:I="NOMATCH";break;default:throw new Error("unrecognized state")}return I},n.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],n.charToHex=function(B){let I=B.toString(16).toUpperCase();switch(I.length){case 1:case 3:case 7:I=`0${I}`;break;case 2:case 6:I=`00${I}`;break;case 4:break;case 5:I=`000${I}`;break;default:throw new Error("unrecognized option")}return I},n.charsToDec=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToDec: input must be an array of integers`);const D=T(B.length,I,M);if(D.end>D.beg){O+=B[D.beg];for(let L=D.beg+1;L<D.end;L+=1)O+=`,${B[L]}`}return O},n.charsToHex=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToHex: input must be an array of integers`);const D=T(B.length,I,M);if(D.end>D.beg){O+=`\\x${n.charToHex(B[D.beg])}`;for(let L=D.beg+1;L<D.end;L+=1)O+=`,\\x${n.charToHex(B[L])}`}return O},n.charsToHtmlEntities=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToHex: input must be an array of integers`);const D=T(B.length,I,M);if(D.end>D.beg)for(let L=D.beg;L<D.end;L+=1)O+=`&#x${B[L].toString(16)};`;return O};function A(B){return!(B>=55296&&B<=57343||B>1114111)}n.charsToUnicode=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToUnicode: input must be an array of integers`);const D=T(B.length,I,M);if(D.end>D.beg)for(let L=D.beg;L<D.end;L+=1)A(B[L])?O+=`&#${B[L]};`:O+=` U+${n.charToHex(B[L])}`;return O},n.charsToJsUnicode=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToJsUnicode: input must be an array of integers`);const D=T(B.length,I,M);if(D.end>D.beg){O+=`\\u${n.charToHex(B[D.beg])}`;for(let L=D.beg+1;L<D.end;L+=1)O+=`,\\u${n.charToHex(B[L])}`}return O},n.charsToAscii=function(B,I,M){let O="";if(!Array.isArray(B))throw new Error(`${C}charsToAscii: input must be an array of integers`);const D=T(B.length,I,M);for(let L=D.beg;L<D.end;L+=1){const V=B[L];V>=32&&V<=126?O+=String.fromCharCode(V):O+=`\\x${n.charToHex(V)}`}return O},n.charsToAsciiHtml=function(B,I,M){if(!Array.isArray(B))throw new Error(`${C}charsToAsciiHtml: input must be an array of integers`);let O="",D;const L=T(B.length,I,M);for(let V=L.beg;V<L.end;V+=1)D=B[V],D<32||D===127?O+=`<span class="${_.CLASS_CTRLCHAR}">${n.asciiChars[D]}</span>`:D>127?O+=`<span class="${_.CLASS_CTRLCHAR}">U+${n.charToHex(D)}</span>`:O+=n.asciiChars[D];return O},n.stringToAsciiHtml=function(B){const I=x.decode("STRING",B);return this.charsToAsciiHtml(I)}}(utilities)),utilities}var ast,hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,ast=function(){const _=requireIdentifiers(),x=requireUtilities(),E="ast.js: ",S=this;let C=null,T=null,A=null,B=0;const I=[],M=[],O=[],D=[];this.callbacks=[],this.astObject="astObject",this.init=function(U,q,H){O.length=0,D.length=0,I.length=0,B=0,C=U,T=q,A=H;let W;const Q=[];for(W=0;W<C.length;W+=1)Q.push(C[W].lower);for(W=0;W<T.length;W+=1)Q.push(T[W].lower);for(B=C.length+T.length,W=0;W<B;W+=1)I[W]=!1,M[W]=null;for(const re in S.callbacks){const ce=re.toLowerCase();if(W=Q.indexOf(ce),W<0)throw new Error(`${E}init: node '${re}' not a rule or udt name`);typeof S.callbacks[re]=="function"&&(I[W]=!0,M[W]=S.callbacks[re]),S.callbacks[re]===!0&&(I[W]=!0)}},this.ruleDefined=function(U){return I[U]!==!1},this.udtDefined=function(U){return I[C.length+U]!==!1},this.down=function(U,q){const H=D.length;return O.push(H),D.push({name:q,thisIndex:H,thatIndex:null,state:_.SEM_PRE,callbackIndex:U,phraseIndex:null,phraseLength:null,stack:O.length}),H},this.up=function(U,q,H,W){const Q=D.length,re=O.pop();return D.push({name:q,thisIndex:Q,thatIndex:re,state:_.SEM_POST,callbackIndex:U,phraseIndex:H,phraseLength:W,stack:O.length}),D[re].thatIndex=Q,D[re].phraseIndex=H,D[re].phraseLength=W,Q},this.translate=function(U){let q,H,W;for(let Q=0;Q<D.length;Q+=1)W=D[Q],H=M[W.callbackIndex],W.state===_.SEM_PRE?H!==null&&(q=H(_.SEM_PRE,A,W.phraseIndex,W.phraseLength,U),q===_.SEM_SKIP&&(Q=W.thatIndex)):H!==null&&H(_.SEM_POST,A,W.phraseIndex,W.phraseLength,U)},this.setLength=function(U){D.length=U,U>0?O.length=D[U-1].stack:O.length=0},this.getLength=function(){return D.length};function L(V){let U="";for(let q=0;q<V;q+=1)U+=" ";return U}this.toXml=function(U){let q=x.charsToDec,H="decimal integer character codes";if(typeof U=="string"&&U.length>=3){const re=U.slice(0,3).toLowerCase();re==="asc"?(q=x.charsToAscii,H="ASCII for printing characters, hex for non-printing"):re==="hex"?(q=x.charsToHex,H="hexadecimal integer character codes"):re==="uni"&&(q=x.charsToUnicode,H="Unicode UTF-32 integer character codes")}let W="",Q=0;return W+=`<?xml version="1.0" encoding="utf-8"?>
`,W+=`<root nodes="${D.length/2}" characters="${A.length}">
`,W+=`<!-- input string, ${H} -->
`,W+=L(Q+2),W+=q(A),W+=`
`,D.forEach(re=>{re.state===_.SEM_PRE?(Q+=1,W+=L(Q),W+=`<node name="${re.name}" index="${re.phraseIndex}" length="${re.phraseLength}">
`,W+=L(Q+2),W+=q(A,re.phraseIndex,re.phraseLength),W+=`
`):(W+=L(Q),W+=`</node><!-- name="${re.name}" -->
`,Q-=1)}),W+=`</root>
`,W},this.phrases=function(){const U={};let q,H;for(q=0;q<D.length;q+=1)H=D[q],H.state===_.SEM_PRE&&(Array.isArray(U[H.name])||(U[H.name]=[]),U[H.name].push({index:H.phraseIndex,length:H.phraseLength}));return U}}),ast}var circularBuffer,hasRequiredCircularBuffer;function requireCircularBuffer(){return hasRequiredCircularBuffer||(hasRequiredCircularBuffer=1,circularBuffer=function(){"use strict;";const _="circular-buffer.js: ";let x=-1,E=0;this.init=function(C){if(typeof C!="number"||C<=0)throw new Error(`${_}init: circular buffer size must an integer > 0`);E=Math.ceil(C),x=-1},this.increment=function(){return x+=1,(x+E)%E},this.maxSize=function(){return E},this.items=function(){return x+1},this.getListIndex=function(C){return x===-1||C<0||C>x||x-C>=E?-1:(C+E)%E},this.forEach=function(C){if(x!==-1){if(x<E){for(let T=0;T<=x;T+=1)C(T,T);return}for(let T=x-E+1;T<=x;T+=1){const A=(T+E)%E;C(A,T)}}}}),circularBuffer}var parser$1,hasRequiredParser$1;function requireParser$1(){return hasRequiredParser$1||(hasRequiredParser$1=1,parser$1=function(){const _=requireIdentifiers(),x=requireUtilities(),E="parser.js: ",S=this;let C;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let T=null,A=null,B,I,M,O,D=0,L=0,V=0,U=null,q=null,H=null,W=null,Q=null,re=0,ce=1/0,ne=1/0;const Y=function(Re,be,Ae){const Le=`${E}evaluateRule(): `;if(Re>=H.length)throw new Error(`${Le}rule index: ${Re} out of range`);if(be>=M)throw new Error(`${Le}phrase index: ${be} out of range`);const{length:Xe}=T;T.push({type:_.RNM,index:Re}),C(Xe,be,Ae),T.pop()},fe=function(Ze,Re,be){const Ae=`${E}evaluateUdt(): `;if(Ze>=W.length)throw new Error(`${Ae}udt index: ${Ze} out of range`);if(Re>=M)throw new Error(`${Ae}phrase index: ${Re} out of range`);const{length:Le}=T;T.push({type:_.UDT,empty:W[Ze].empty,index:Ze}),C(Le,Re,be),T.pop()},ge=function(){D=0,L=0,V=0,re=0,O=[{lookAround:_.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],H=null,W=null,A=null,B=0,I=0,M=0,U=null,q=null,Q=null,T=null},$e=function(){const Ze=[],Re=function(){const Ae={};H.forEach(Le=>{Le.isBkr&&(Ae[Le.lower]=null)}),W.length>0&&W.forEach(Le=>{Le.isBkr&&(Ae[Le.lower]=null)}),Ze.push(Ae)},be=function(){const Ae=Ze[Ze.length-1],Le={};for(const Xe in Ae)Le[Xe]=Ae[Xe];return Le};this.push=function(){Ze.push(be())},this.pop=function(Le){let Xe=Le;if(Xe||(Xe=Ze.length-1),Xe<1||Xe>Ze.length)throw new Error(`${E}backRef.pop(): bad length: ${Xe}`);return Ze.length=Xe,Ze[Ze.length-1]},this.length=function(){return Ze.length},this.savePhrase=function(Le,Xe,Qe){Ze[Ze.length-1][Le]={phraseIndex:Xe,phraseLength:Qe}},this.getPhrase=function(Ae){return Ze[Ze.length-1][Ae]},Re()},_e=function(){const Re=this;this.state=_.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=O[O.length-1],this.uFrame=new $e,this.pFrame=new $e,this.evaluateRule=Y,this.evaluateUdt=fe,this.refresh=function(){Re.state=_.ACTIVE,Re.phraseLength=0,Re.lookAround=O[O.length-1]}},ae=function(){return O[O.length-1]},X=function(){return O.length>1},F=function(){return O[O.length-1].lookAround===_.LOOKAROUND_BEHIND},z=function(){const Ze=`${E}initializeAst(): `,Re=!0;for(;Re;){if(S.ast===void 0){S.ast=null;break}if(S.ast===null)break;if(S.ast.astObject!=="astObject")throw new Error(`${Ze}ast object not recognized`);break}S.ast!==null&&S.ast.init(H,W,A)},J=function(){const Ze=`${E}initializeTrace(): `,Re=!0;for(;Re;){if(S.trace===void 0){S.trace=null;break}if(S.trace===null)break;if(S.trace.traceObject!=="traceObject")throw new Error(`${Ze}trace object not recognized`);break}S.trace!==null&&S.trace.init(H,W,A)},te=function(){const Ze=`${E}initializeStats(): `,Re=!0;for(;Re;){if(S.stats===void 0){S.stats=null;break}if(S.stats===null)break;if(S.stats.statsObject!=="statsObject")throw new Error(`${Ze}stats object not recognized`);break}S.stats!==null&&S.stats.init(H,W)},se=function(Ze){const Re=`${E}initializeGrammar(): `;if(!Ze)throw new Error(`${Re}grammar object undefined`);if(Ze.grammarObject!=="grammarObject")throw new Error(`${Re}bad grammar object`);H=Ze.rules,W=Ze.udts},oe=function(Ze){const Re=`${E}initializeStartRule(): `;let be=null;if(typeof Ze=="number"){if(Ze>=H.length)throw new Error(`${Re}start rule index too large: max: ${H.length}: index: ${Ze}`);be=Ze}else if(typeof Ze=="string"){const Ae=Ze.toLowerCase();for(let Le=0;Le<H.length;Le+=1)if(Ae===H[Le].lower){be=H[Le].index;break}if(be===null)throw new Error(`${Re}start rule name '${Ze}' not recognized`)}else throw new Error(`${Re}type of start rule '${typeof Ze}' not recognized`);return be},ie=function(Re,be,Ae){const Le=`${E}initializeInputChars(): `;let Xe=Re,Qe=be,et=Ae;if(Xe===void 0)throw new Error(`${Le}input string is undefined`);if(Xe===null)throw new Error(`${Le}input string is null`);if(typeof Xe=="string")Xe=x.stringToChars(Xe);else if(!Array.isArray(Xe))throw new Error(`${Le}input string is not a string or array`);if(Xe.length>0&&typeof Xe[0]!="number")throw new Error(`${Le}input string not an array of integers`);if(typeof Qe!="number")Qe=0;else if(Qe=Math.floor(Qe),Qe<0||Qe>Xe.length)throw new Error(`${Le}input beginning index out of range: ${Qe}`);if(typeof et!="number")et=Xe.length-Qe;else if(et=Math.floor(et),et<0||et>Xe.length-Qe)throw new Error(`${Le}input length out of range: ${et}`);A=Xe,B=Qe,I=et,M=B+I},G=function(){const Ze=`${E}initializeCallbacks(): `;let Re;for(U=[],q=[],Re=0;Re<H.length;Re+=1)U[Re]=null;for(Re=0;Re<W.length;Re+=1)q[Re]=null;let be;const Ae=[];for(Re=0;Re<H.length;Re+=1)Ae.push(H[Re].lower);for(Re=0;Re<W.length;Re+=1)Ae.push(W[Re].lower);for(const Le in S.callbacks){if(Re=Ae.indexOf(Le.toLowerCase()),Re<0)throw new Error(`${Ze}syntax callback '${Le}' not a rule or udt name`);if(be=S.callbacks[Le],be||(be=null),typeof be=="function"||be===null)Re<H.length?U[Re]=be:q[Re-H.length]=be;else throw new Error(`${Ze}syntax callback[${Le}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(Re=0;Re<W.length;Re+=1)if(q[Re]===null)throw new Error(`${Ze}all UDT callbacks must be defined. UDT callback[${W[Re].lower}] not a function reference`)};this.setMaxTreeDepth=function(Ze){if(typeof Ze!="number")throw new Error(`parser: max tree depth must be integer > 0: ${Ze}`);if(ce=Math.floor(Ze),ce<=0)throw new Error(`parser: max tree depth must be integer > 0: ${Ze}`)},this.setMaxNodeHits=function(Ze){if(typeof Ze!="number")throw new Error(`parser: max node hits must be integer > 0: ${Ze}`);if(ne=Math.floor(Ze),ne<=0)throw new Error(`parser: max node hits must be integer > 0: ${Ze}`)};const j=function(Ze,Re,be){let Ae;const Le=`${E}parse(): `;se(Ze);const Xe=oe(Re);G(),J(),te(),z();const Qe=new _e;switch(be!=null&&(Q=be),T=[{type:_.RNM,index:Xe}],C(0,B,Qe),T=null,Qe.state){case _.ACTIVE:throw new Error(`${Le}final state should never be 'ACTIVE'`);case _.NOMATCH:Ae=!1;break;case _.EMPTY:case _.MATCH:Qe.phraseLength===I?Ae=!0:Ae=!1;break;default:throw new Error("unrecognized state")}return{success:Ae,state:Qe.state,length:I,matched:Qe.phraseLength,maxMatched:re,maxTreeDepth:L,nodeHits:V,inputLength:A.length,subBegin:B,subEnd:M,subLength:I}};this.parseSubstring=function(Re,be,Ae,Le,Xe,Qe){return ge(),ie(Ae,Le,Xe),j(Re,be,Qe)},this.parse=function(Re,be,Ae,Le){return ge(),ie(Ae,0,Ae.length),j(Re,be,Le)};const ee=function(Ze,Re,be){const Ae=T[Ze];for(let Le=0;Le<Ae.children.length&&(C(Ae.children[Le],Re,be),be.state===_.NOMATCH);Le+=1);},pe=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze],St=be.uFrame.length(),mt=be.pFrame.length();S.ast&&(Le=S.ast.getLength()),Ae=!0,Xe=Re,Qe=0;for(let dt=0;dt<et.children.length;dt+=1)if(C(et.children[dt],Xe,be),be.state===_.NOMATCH){Ae=!1;break}else Xe+=be.phraseLength,Qe+=be.phraseLength;Ae?(be.state=Qe===0?_.EMPTY:_.MATCH,be.phraseLength=Qe):(be.state=_.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(mt),S.ast&&S.ast.setLength(Le))},he=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze];Le=Re,Xe=0,Qe=0;const St=be.uFrame.length(),mt=be.pFrame.length();S.ast&&(Ae=S.ast.getLength());const dt=!0;for(;dt&&!(Le>=M||(C(Ze+1,Le,be),be.state===_.NOMATCH)||be.state===_.EMPTY||(Qe+=1,Xe+=be.phraseLength,Le+=be.phraseLength,Qe===et.max)););be.state===_.EMPTY||Qe>=et.min?(be.state=Xe===0?_.EMPTY:_.MATCH,be.phraseLength=Xe):(be.state=_.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(mt),S.ast&&S.ast.setLength(Ae))},Se=function(Ze,Re,be,Ae){if(Re.phraseLength>be){let Le=`${E}opRNM(${Ze.name}): callback function error: `;throw Le+=`sysData.phraseLength: ${Re.phraseLength}`,Le+=` must be <= remaining chars: ${be}`,new Error(Le)}switch(Re.state){case _.ACTIVE:if(Ae!==!0)throw new Error(`${E}opRNM(${Ze.name}): callback function return error. ACTIVE state not allowed.`);break;case _.EMPTY:Re.phraseLength=0;break;case _.MATCH:Re.phraseLength===0&&(Re.state=_.EMPTY);break;case _.NOMATCH:Re.phraseLength=0;break;default:throw new Error(`${E}opRNM(${Ze.name}): callback function return error. Unrecognized return state: ${Re.state}`)}},we=function(Ze,Re,be){let Ae,Le,Xe,Qe,et,St;const mt=T[Ze],dt=H[mt.index],jt=U[dt.index],Ct=!X();if(Ct&&(Le=S.ast&&S.ast.ruleDefined(mt.index),Le&&(Ae=S.ast.getLength(),S.ast.down(mt.index,H[mt.index].name)),Qe=be.uFrame.length(),et=be.pFrame.length(),be.uFrame.push(),be.pFrame.push(),St=be.pFrame,be.pFrame=new $e),jt===null)Xe=T,T=dt.opcodes,C(0,Re,be),T=Xe;else{const Rt=M-Re;be.ruleIndex=dt.index,jt(be,A,Re,Q),Se(dt,be,Rt,!0),be.state===_.ACTIVE&&(Xe=T,T=dt.opcodes,C(0,Re,be),T=Xe,be.ruleIndex=dt.index,jt(be,A,Re,Q),Se(dt,be,Rt,!1))}Ct&&(Le&&(be.state===_.NOMATCH?S.ast.setLength(Ae):S.ast.up(mt.index,dt.name,Re,be.phraseLength)),be.pFrame=St,be.state===_.NOMATCH?(be.uFrame.pop(Qe),be.pFrame.pop(et)):dt.isBkr&&(be.pFrame.savePhrase(dt.lower,Re,be.phraseLength),be.uFrame.savePhrase(dt.lower,Re,be.phraseLength)))},xe=function(Ze,Re,be){if(Re.phraseLength>be){let Ae=`${E}opUDT(${Ze.name}): callback function error: `;throw Ae+=`sysData.phraseLength: ${Re.phraseLength}`,Ae+=` must be <= remaining chars: ${be}`,new Error(Ae)}switch(Re.state){case _.ACTIVE:throw new Error(`${E}opUDT(${Ze.name}): callback function return error. ACTIVE state not allowed.`);case _.EMPTY:if(Ze.empty===!1)throw new Error(`${E}opUDT(${Ze.name}): callback function return error. May not return EMPTY.`);Re.phraseLength=0;break;case _.MATCH:if(Re.phraseLength===0){if(Ze.empty===!1)throw new Error(`${E}opUDT(${Ze.name}): callback function return error. May not return EMPTY.`);Re.state=_.EMPTY}break;case _.NOMATCH:Re.phraseLength=0;break;default:throw new Error(`${E}opUDT(${Ze.name}): callback function return error. Unrecognized return state: ${Re.state}`)}},Ee=function(Ze,Re,be){let Ae,Le,Xe,Qe,et,St;const mt=T[Ze],dt=W[mt.index];be.UdtIndex=dt.index;const jt=!X();jt&&(Xe=S.ast&&S.ast.udtDefined(mt.index),Xe&&(Le=H.length+mt.index,Ae=S.ast.getLength(),S.ast.down(Le,dt.name)),Qe=be.uFrame.length(),et=be.pFrame.length(),be.uFrame.push(),be.pFrame.push(),St=be.pFrame,be.pFrame=new $e);const Ct=M-Re;q[mt.index](be,A,Re,Q),xe(dt,be,Ct),jt&&(Xe&&(be.state===_.NOMATCH?S.ast.setLength(Ae):S.ast.up(Le,dt.name,Re,be.phraseLength)),be.pFrame=St,be.state===_.NOMATCH?(be.uFrame.pop(Qe),be.pFrame.pop(et)):dt.isBkr&&(be.pFrame.savePhrase(dt.lower,Re,be.phraseLength),be.uFrame.savePhrase(dt.lower,Re,be.phraseLength)))},ye=function(Ze,Re,be){O.push({lookAround:_.LOOKAROUND_AHEAD,anchor:Re,charsEnd:M,charsLength:I}),M=A.length,I=A.length-B,C(Ze+1,Re,be);const Ae=O.pop();switch(M=Ae.charsEnd,I=Ae.charsLength,be.phraseLength=0,be.state){case _.EMPTY:be.state=_.EMPTY;break;case _.MATCH:be.state=_.EMPTY;break;case _.NOMATCH:be.state=_.NOMATCH;break;default:throw new Error(`opAND: invalid state ${be.state}`)}},Ce=function(Ze,Re,be){O.push({lookAround:_.LOOKAROUND_AHEAD,anchor:Re,charsEnd:M,charsLength:I}),M=A.length,I=A.length-B,C(Ze+1,Re,be);const Ae=O.pop();switch(M=Ae.charsEnd,I=Ae.charsLength,be.phraseLength=0,be.state){case _.EMPTY:case _.MATCH:be.state=_.NOMATCH;break;case _.NOMATCH:be.state=_.EMPTY;break;default:throw new Error(`opNOT: invalid state ${be.state}`)}},ve=function(Ze,Re,be){const Ae=T[Ze];be.state=_.NOMATCH,Re<M&&Ae.min<=A[Re]&&A[Re]<=Ae.max&&(be.state=_.MATCH,be.phraseLength=1)},Be=function(Ze,Re,be){let Ae;const Le=T[Ze],Xe=Le.string.length;if(be.state=_.NOMATCH,Re+Xe<=M){for(Ae=0;Ae<Xe;Ae+=1)if(A[Re+Ae]!==Le.string[Ae])return;be.state=_.MATCH,be.phraseLength=Xe}},me=function(Ze,Re,be){let Ae,Le;const Xe=T[Ze];be.state=_.NOMATCH;const Qe=Xe.string.length;if(Qe===0){be.state=_.EMPTY;return}if(Re+Qe<=M){for(Ae=0;Ae<Qe;Ae+=1)if(Le=A[Re+Ae],Le>=65&&Le<=90&&(Le+=32),Le!==Xe.string[Ae])return;be.state=_.MATCH,be.phraseLength=Qe}},Ie=function(Ze,Re,be){be.state=_.NOMATCH,be.phraseLength=0,be.state=Re===0?_.EMPTY:_.NOMATCH},Ve=function(Ze,Re,be){be.state=_.NOMATCH,be.phraseLength=0,be.state=Re===A.length?_.EMPTY:_.NOMATCH},Me=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze];be.state=_.NOMATCH,et.index<H.length?Qe=H[et.index].lower:Qe=W[et.index-H.length].lower;const St=et.bkrMode===_.BKR_MODE_PM?be.pFrame.getPhrase(Qe):be.uFrame.getPhrase(Qe),mt=et.bkrCase===_.BKR_MODE_CI;if(St===null)return;const dt=St.phraseIndex,jt=St.phraseLength;if(jt===0){be.state=_.EMPTY;return}if(Re+jt<=M){if(mt){for(Ae=0;Ae<jt;Ae+=1)if(Le=A[Re+Ae],Xe=A[dt+Ae],Le>=65&&Le<=90&&(Le+=32),Xe>=65&&Xe<=90&&(Xe+=32),Le!==Xe)return;be.state=_.MATCH,be.phraseLength=jt}else for(Ae=0;Ae<jt;Ae+=1)if(Le=A[Re+Ae],Xe=A[dt+Ae],Le!==Xe)return;be.state=_.MATCH,be.phraseLength=jt}},Ne=function(Ze,Re,be){switch(O.push({lookAround:_.LOOKAROUND_BEHIND,anchor:Re}),C(Ze+1,Re,be),O.pop(),be.phraseLength=0,be.state){case _.EMPTY:be.state=_.EMPTY;break;case _.MATCH:be.state=_.EMPTY;break;case _.NOMATCH:be.state=_.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${be.state}`)}},Pe=function(Ze,Re,be){switch(O.push({lookAround:_.LOOKAROUND_BEHIND,anchor:Re}),C(Ze+1,Re,be),O.pop(),be.phraseLength=0,be.state){case _.EMPTY:case _.MATCH:be.state=_.NOMATCH;break;case _.NOMATCH:be.state=_.EMPTY;break;default:throw new Error(`opBKN: invalid state ${be.state}`)}},He=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze],St=be.uFrame.length(),mt=be.pFrame.length();S.ast&&(Le=S.ast.getLength()),Ae=!0,Xe=Re,Qe=0;for(let dt=et.children.length-1;dt>=0;dt-=1)if(C(et.children[dt],Xe,be),Xe-=be.phraseLength,Qe+=be.phraseLength,be.state===_.NOMATCH){Ae=!1;break}Ae?(be.state=Qe===0?_.EMPTY:_.MATCH,be.phraseLength=Qe):(be.state=_.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(mt),S.ast&&S.ast.setLength(Le))},We=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze];Le=Re,Xe=0,Qe=0;const St=be.uFrame.length(),mt=be.pFrame.length();S.ast&&(Ae=S.ast.getLength());const dt=!0;for(;dt&&!(Le<=0||(C(Ze+1,Le,be),be.state===_.NOMATCH)||be.state===_.EMPTY||(Qe+=1,Xe+=be.phraseLength,Le-=be.phraseLength,Qe===et.max)););be.state===_.EMPTY||Qe>=et.min?(be.state=Xe===0?_.EMPTY:_.MATCH,be.phraseLength=Xe):(be.state=_.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(mt),S.ast&&S.ast.setLength(Ae))},Ke=function(Ze,Re,be){const Ae=T[Ze];if(be.state=_.NOMATCH,be.phraseLength=0,Re>0){const Le=A[Re-1];Ae.min<=Le&&Le<=Ae.max&&(be.state=_.MATCH,be.phraseLength=1)}},Ge=function(Ze,Re,be){let Ae;const Le=T[Ze];be.state=_.NOMATCH;const Xe=Le.string.length,Qe=Re-Xe;if(Qe>=0){for(Ae=0;Ae<Xe;Ae+=1)if(A[Qe+Ae]!==Le.string[Ae])return;be.state=_.MATCH,be.phraseLength=Xe}},nt=function(Ze,Re,be){let Ae;const Le=T[Ze];be.state=_.NOMATCH;const Xe=Le.string.length;if(Xe===0){be.state=_.EMPTY;return}const Qe=Re-Xe;if(Qe>=0){for(let et=0;et<Xe;et+=1)if(Ae=A[Qe+et],Ae>=65&&Ae<=90&&(Ae+=32),Ae!==Le.string[et])return;be.state=_.MATCH,be.phraseLength=Xe}},ot=function(Ze,Re,be){let Ae,Le,Xe,Qe;const et=T[Ze];be.state=_.NOMATCH,be.phraseLength=0,et.index<H.length?Qe=H[et.index].lower:Qe=W[et.index-H.length].lower;const St=et.bkrMode===_.BKR_MODE_PM?be.pFrame.getPhrase(Qe):be.uFrame.getPhrase(Qe),mt=et.bkrCase===_.BKR_MODE_CI;if(St===null)return;const dt=St.phraseIndex,jt=St.phraseLength;if(jt===0){be.state=_.EMPTY,be.phraseLength=0;return}const Ct=Re-jt;if(Ct>=0){if(mt){for(Ae=0;Ae<jt;Ae+=1)if(Le=A[Ct+Ae],Xe=A[dt+Ae],Le>=65&&Le<=90&&(Le+=32),Xe>=65&&Xe<=90&&(Xe+=32),Le!==Xe)return;be.state=_.MATCH,be.phraseLength=jt}else for(Ae=0;Ae<jt;Ae+=1)if(Le=A[Ct+Ae],Xe=A[dt+Ae],Le!==Xe)return;be.state=_.MATCH,be.phraseLength=jt}};C=function(Re,be,Ae){let Le=!0;const Xe=T[Re];if(V+=1,V>ne)throw new Error(`parser: maximum number of node hits exceeded: ${ne}`);if(D+=1,D>L&&(L=D,L>ce))throw new Error(`parser: maximum parse tree depth exceeded: ${ce}`);if(Ae.refresh(),S.trace!==null){const Qe=ae();S.trace.down(Xe,Ae.state,be,Ae.phraseLength,Qe.anchor,Qe.lookAround)}if(F())switch(Xe.type){case _.ALT:ee(Re,be,Ae);break;case _.CAT:He(Re,be,Ae);break;case _.REP:We(Re,be,Ae);break;case _.RNM:we(Re,be,Ae);break;case _.UDT:Ee(Re,be,Ae);break;case _.AND:ye(Re,be,Ae);break;case _.NOT:Ce(Re,be,Ae);break;case _.TRG:Ke(Re,be,Ae);break;case _.TBS:Ge(Re,be,Ae);break;case _.TLS:nt(Re,be,Ae);break;case _.BKR:ot(Re,be,Ae);break;case _.BKA:Ne(Re,be,Ae);break;case _.BKN:Pe(Re,be,Ae);break;case _.ABG:Ie(Re,be,Ae);break;case _.AEN:Ve(Re,be,Ae);break;default:Le=!1;break}else switch(Xe.type){case _.ALT:ee(Re,be,Ae);break;case _.CAT:pe(Re,be,Ae);break;case _.REP:he(Re,be,Ae);break;case _.RNM:we(Re,be,Ae);break;case _.UDT:Ee(Re,be,Ae);break;case _.AND:ye(Re,be,Ae);break;case _.NOT:Ce(Re,be,Ae);break;case _.TRG:ve(Re,be,Ae);break;case _.TBS:Be(Re,be,Ae);break;case _.TLS:me(Re,be,Ae);break;case _.BKR:Me(Re,be,Ae);break;case _.BKA:Ne(Re,be,Ae);break;case _.BKN:Pe(Re,be,Ae);break;case _.ABG:Ie(Re,be,Ae);break;case _.AEN:Ve(Re,be,Ae);break;default:Le=!1;break}if(!X()&&be+Ae.phraseLength>re&&(re=be+Ae.phraseLength),S.stats!==null&&S.stats.collect(Xe,Ae),S.trace!==null){const Qe=ae();S.trace.up(Xe,Ae.state,be,Ae.phraseLength,Qe.anchor,Qe.lookAround)}return D-=1,Le}}),parser$1}var stats,hasRequiredStats;function requireStats(){return hasRequiredStats||(hasRequiredStats=1,stats=function(){const _=requireIdentifiers(),x=requireUtilities(),E=requireStyle(),S="stats.js: ";let C=[],T=[];const A=[];let B;const I=[],M=[];this.statsObject="statsObject";const O="stats",D=function(ne,Y){return ne.lower<Y.lower?-1:ne.lower>Y.lower?1:0},L=function(ne,Y){return ne.total<Y.total?1:ne.total>Y.total?-1:D(ne,Y)},V=function(ne,Y){return ne.index<Y.index?-1:ne.index>Y.index?1:0},U=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},q=function(){A.length=0,B=new U,A[_.ALT]=new U,A[_.CAT]=new U,A[_.REP]=new U,A[_.RNM]=new U,A[_.TRG]=new U,A[_.TBS]=new U,A[_.TLS]=new U,A[_.UDT]=new U,A[_.AND]=new U,A[_.NOT]=new U,A[_.BKR]=new U,A[_.BKA]=new U,A[_.BKN]=new U,A[_.ABG]=new U,A[_.AEN]=new U,I.length=0;for(let ne=0;ne<C.length;ne+=1)I.push({empty:0,match:0,nomatch:0,total:0,name:C[ne].name,lower:C[ne].lower,index:C[ne].index});if(T.length>0){M.length=0;for(let ne=0;ne<T.length;ne+=1)M.push({empty:0,match:0,nomatch:0,total:0,name:T[ne].name,lower:T[ne].lower,index:T[ne].index})}},H=function(ne,Y){switch(ne.total+=1,Y){case _.EMPTY:ne.empty+=1;break;case _.MATCH:ne.match+=1;break;case _.NOMATCH:ne.nomatch+=1;break;default:throw new Error(`${S}collect(): incStat(): unrecognized state: ${Y}`)}},W=function(ne,Y){let fe="";return fe+="<tr>",fe+=`<td class="${E.CLASS_ACTIVE}">${ne}</td>`,fe+=`<td class="${E.CLASS_EMPTY}">${Y.empty}</td>`,fe+=`<td class="${E.CLASS_MATCH}">${Y.match}</td>`,fe+=`<td class="${E.CLASS_NOMATCH}">${Y.nomatch}</td>`,fe+=`<td class="${E.CLASS_ACTIVE}">${Y.total}</td>`,fe+=`</tr>
`,fe},Q=function(){let ne="";return ne+=W("ALT",A[_.ALT]),ne+=W("CAT",A[_.CAT]),ne+=W("REP",A[_.REP]),ne+=W("RNM",A[_.RNM]),ne+=W("TRG",A[_.TRG]),ne+=W("TBS",A[_.TBS]),ne+=W("TLS",A[_.TLS]),ne+=W("UDT",A[_.UDT]),ne+=W("AND",A[_.AND]),ne+=W("NOT",A[_.NOT]),ne+=W("BKR",A[_.BKR]),ne+=W("BKA",A[_.BKA]),ne+=W("BKN",A[_.BKN]),ne+=W("ABG",A[_.ABG]),ne+=W("AEN",A[_.AEN]),ne+=W("totals",B),ne},re=function(){let ne="";ne+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,ne+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let Y=0;Y<C.length;Y+=1)I[Y].total>0&&(ne+="<tr>",ne+=`<td class="${E.CLASS_ACTIVE}">${I[Y].name}</td>`,ne+=`<td class="${E.CLASS_EMPTY}">${I[Y].empty}</td>`,ne+=`<td class="${E.CLASS_MATCH}">${I[Y].match}</td>`,ne+=`<td class="${E.CLASS_NOMATCH}">${I[Y].nomatch}</td>`,ne+=`<td class="${E.CLASS_ACTIVE}">${I[Y].total}</td>`,ne+=`</tr>
`);if(T.length>0){ne+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,ne+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let Y=0;Y<T.length;Y+=1)M[Y].total>0&&(ne+="<tr>",ne+=`<td class="${E.CLASS_ACTIVE}">${M[Y].name}</td>`,ne+=`<td class="${E.CLASS_EMPTY}">${M[Y].empty}</td>`,ne+=`<td class="${E.CLASS_MATCH}">${M[Y].match}</td>`,ne+=`<td class="${E.CLASS_NOMATCH}">${M[Y].nomatch}</td>`,ne+=`<td class="${E.CLASS_ACTIVE}">${M[Y].total}</td>`,ne+=`</tr>
`)}return ne};this.validate=function(ne){let Y=!1;return typeof ne=="string"&&O===ne&&(Y=!0),Y},this.init=function(ne,Y){C=ne,T=Y,q()},this.collect=function(ne,Y){H(B,Y.state,Y.phraseLength),H(A[ne.type],Y.state,Y.phraseLength),ne.type===_.RNM&&H(I[ne.index],Y.state,Y.phraseLength),ne.type===_.UDT&&H(M[ne.index],Y.state,Y.phraseLength)},this.toHtml=function(ne,Y){let fe="";fe+=`<table class="${E.CLASS_STATS}">
`,typeof Y=="string"&&(fe+=`<caption>${Y}</caption>
`),fe+=`<tr><th class="${E.CLASS_ACTIVE}">ops</th>
`,fe+=`<th class="${E.CLASS_EMPTY}">EMPTY</th>
`,fe+=`<th class="${E.CLASS_MATCH}">MATCH</th>
`,fe+=`<th class="${E.CLASS_NOMATCH}">NOMATCH</th>
`,fe+=`<th class="${E.CLASS_ACTIVE}">totals</th></tr>
`;const ge=!0;for(;ge;){if(ne===void 0){fe+=Q();break}if(ne===null){fe+=Q();break}if(ne==="ops"){fe+=Q();break}if(ne==="index"){I.sort(V),M.length>0&&M.sort(V),fe+=Q(),fe+=re();break}if(ne==="hits"){I.sort(L),M.length>0&&M.sort(V),fe+=Q(),fe+=re();break}if(ne==="alpha"){I.sort(D),M.length>0&&M.sort(D),fe+=Q(),fe+=re();break}break}return fe+=`</table>
`,fe},this.toHtmlPage=function(ne,Y,fe){return x.htmlToPage(this.toHtml(ne,Y),fe)}}),stats}var trace,hasRequiredTrace;function requireTrace(){return hasRequiredTrace||(hasRequiredTrace=1,trace=function(){const _=requireUtilities(),x=requireStyle(),E=new(requireCircularBuffer()),S=requireIdentifiers(),C="trace.js: ",T=this,A=16,B=10,I=8,M=32,O=80,D=5,L=[];let V=5e3,U=-1,q=0,H=0;const W=[];let Q=null,re=null,ce=null;const ne=[],Y=[],fe=`<span class="${x.CLASS_LINEEND}">&bull;</span>`,ge=`<span class="${x.CLASS_LINEEND}">&hellip;</span>`,$e=`<span class="${x.CLASS_EMPTY}">&#120634;</span>`,_e=function(){const xe=function(ye){ne[S.ALT]=ye,ne[S.CAT]=ye,ne[S.REP]=ye,ne[S.TLS]=ye,ne[S.TBS]=ye,ne[S.TRG]=ye,ne[S.AND]=ye,ne[S.NOT]=ye,ne[S.BKR]=ye,ne[S.BKA]=ye,ne[S.BKN]=ye,ne[S.ABG]=ye,ne[S.AEN]=ye};let Ee=0;for(const ye in T.filter.operators)Ee+=1;if(Ee===0){xe(!1);return}for(const ye in T.filter.operators){const Ce=ye.toUpperCase();if(Ce==="<ALL>"){xe(!0);return}if(Ce==="<NONE>"){xe(!1);return}}xe(!1);for(const ye in T.filter.operators){const Ce=ye.toUpperCase();if(Ce==="ALT")ne[S.ALT]=T.filter.operators[ye]===!0;else if(Ce==="CAT")ne[S.CAT]=T.filter.operators[ye]===!0;else if(Ce==="REP")ne[S.REP]=T.filter.operators[ye]===!0;else if(Ce==="AND")ne[S.AND]=T.filter.operators[ye]===!0;else if(Ce==="NOT")ne[S.NOT]=T.filter.operators[ye]===!0;else if(Ce==="TLS")ne[S.TLS]=T.filter.operators[ye]===!0;else if(Ce==="TBS")ne[S.TBS]=T.filter.operators[ye]===!0;else if(Ce==="TRG")ne[S.TRG]=T.filter.operators[ye]===!0;else if(Ce==="BKR")ne[S.BKR]=T.filter.operators[ye]===!0;else if(Ce==="BKA")ne[S.BKA]=T.filter.operators[ye]===!0;else if(Ce==="BKN")ne[S.BKN]=T.filter.operators[ye]===!0;else if(Ce==="ABG")ne[S.ABG]=T.filter.operators[ye]===!0;else if(Ce==="AEN")ne[S.AEN]=T.filter.operators[ye]===!0;else throw new Error(`${C}initOpratorFilter: '${ye}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},ae=function(){const xe=function(ve){ne[S.RNM]=ve,ne[S.UDT]=ve;const Be=re.length+ce.length;Y.length=0;for(let me=0;me<Be;me+=1)Y.push(ve)};let Ee,ye;const Ce=[];for(ye=0;ye<re.length;ye+=1)Ce.push(re[ye].lower);for(ye=0;ye<ce.length;ye+=1)Ce.push(ce[ye].lower);Y.length=0,Ee=0;for(const ve in T.filter.rules)Ee+=1;if(Ee===0){xe(!0);return}for(const ve in T.filter.rules){const Be=ve.toLowerCase();if(Be==="<all>"){xe(!0);return}if(Be==="<none>"){xe(!1);return}}xe(!1),ne[S.RNM]=!0,ne[S.UDT]=!0;for(const ve in T.filter.rules){const Be=ve.toLowerCase();if(ye=Ce.indexOf(Be),ye<0)throw new Error(`${C}initRuleFilter: '${ve}' not a valid rule or udt name`);Y[ye]=T.filter.rules[ve]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(xe,Ee){if(U=-1,typeof xe=="number"&&xe>0)V=Math.ceil(xe);else{V=0;return}typeof Ee=="number"&&(U=Math.floor(Ee),U<0&&(U=-1))},this.getMaxRecords=function(){return V},this.getLastRecord=function(){return U},this.init=function(xe,Ee,ye){L.length=0,W.length=0,q=0,H=0,Q=ye,re=xe,ce=Ee,_e(),ae(),E.init(V)};const X=function(xe){let Ee=!1;return xe.type===S.RNM?ne[xe.type]&&Y[xe.index]?Ee=!0:Ee=!1:xe.type===S.UDT?ne[xe.type]&&Y[re.length+xe.index]?Ee=!0:Ee=!1:Ee=ne[xe.type],Ee},F=function(xe){return U===-1||xe<=U};this.down=function(xe,Ee,ye,Ce,ve,Be){F(q)&&X(xe)&&(W.push(q),L[E.increment()]={dirUp:!1,depth:H,thisLine:q,thatLine:void 0,opcode:xe,state:Ee,phraseIndex:ye,phraseLength:Ce,lookAnchor:ve,lookAround:Be},q+=1,H+=1)},this.up=function(xe,Ee,ye,Ce,ve,Be){if(F(q)&&X(xe)){const me=q,Ie=W.pop(),Ve=E.getListIndex(Ie);Ve!==-1&&(L[Ve].thatLine=me),H-=1,L[E.increment()]={dirUp:!0,depth:H,thisLine:me,thatLine:Ie,opcode:xe,state:Ee,phraseIndex:ye,phraseLength:Ce,lookAnchor:ve,lookAround:Be},q+=1}};const z=function(){function xe(be,Ae){let Le,Xe,Qe;if(Ae)switch(be.op={id:Ae.type,name:_.opcodeToString(Ae.type)},be.opData=void 0,Ae.type){case S.RNM:be.opData=re[Ae.index].name;break;case S.UDT:be.opData=ce[Ae.index].name;break;case S.BKR:Ae.index<re.length?Le=re[Ae.index].name:Le=ce[Ae.index-re.length].name,Xe=Ae.bkrCase===S.BKR_MODE_CI?"%i":"%s",Qe=Ae.bkrMode===S.BKR_MODE_UM?"%u":"%p",be.opData=`\\\\${Xe}${Qe}${Le}`;break;case S.TLS:be.opData=[];for(let et=0;et<Ae.string.length;et+=1)be.opData.push(Ae.string[et]);break;case S.TBS:be.opData=[];for(let et=0;et<Ae.string.length;et+=1)be.opData.push(Ae.string[et]);break;case S.TRG:be.opData=[Ae.min,Ae.max];break;case S.REP:be.opData=[Ae.min,Ae.max];break;default:throw new Error("unrecognized opcode")}else be.op={id:void 0,name:void 0},be.opData=void 0}function Ee(be,Ae,Le){return be===S.MATCH?{index:Ae,length:Le}:be===S.NOMATCH?{index:Ae,length:0}:be===S.EMPTY?{index:Ae,length:0}:null}let ye=-1;function Ce(be,Ae,Le){const Xe={id:ye++,branch:-1,parent:be,up:!1,down:!1,depth:Le,children:[]};return Ae?(Xe.down=!0,Xe.state={id:Ae.state,name:_.stateToString(Ae.state)},Xe.phrase=null,xe(Xe,Ae.opcode)):(Xe.state={id:void 0,name:void 0},Xe.phrase=Ee(),xe(Xe,void 0)),Xe}function ve(be,Ae){Ae&&(be.up=!0,be.state={id:Ae.state,name:_.stateToString(Ae.state)},be.phrase=Ee(Ae.state,Ae.phraseIndex,Ae.phraseLength),be.down||xe(be,Ae.opcode))}let Be=0,me=-1,Ie=1;function Ve(be){if(me+=1,be.branch=Ie,me>H&&(H=me),be.children.length===0)Be+=1;else for(let Ae=0;Ae<be.children.length;Ae+=1)Ae>0&&(Ie+=1),be.children[Ae].leftMost=!1,be.children[Ae].rightMost=!1,be.leftMost&&(be.children[Ae].leftMost=Ae===0),be.rightMost&&(be.children[Ae].rightMost=Ae===be.children.length-1),Ve(be.children[Ae]);me-=1}function Me(be,Ae){let Le;const Xe={};if(Xe.id=be.id,Xe.branch=be.branch,Xe.leftMost=be.leftMost,Xe.rightMost=be.rightMost,Le=be.state.name?be.state.name:"ACTIVE",Xe.state={id:be.state.id,name:Le},Le=be.op.name?be.op.name:"?",Xe.op={id:be.op.id,name:Le},typeof be.opData=="string")Xe.opData=be.opData;else if(Array.isArray(be.opData)){Xe.opData=[];for(let Qe=0;Qe<be.opData.length;Qe+=1)Xe.opData[Qe]=be.opData[Qe]}else Xe.opData=void 0;be.phrase?Xe.phrase={index:be.phrase.index,length:be.phrase.length}:Xe.phrase=null,Xe.depth=be.depth,Xe.children=[];for(let Qe=0;Qe<be.children.length;Qe+=1)be.children.length-1,Xe.children[Qe]=Me(be.children[Qe]);return Xe}const Ne=[];let Pe,He,We,Ke,Ge=!0;const nt=Ce(null,null,-1);for(Ne.push(nt),He=nt,E.forEach(be=>{if(Ke=L[be],Ge&&(Ge=!1,Ke.depth>0)){const Ae=Ke.dirUp?Ke.depth+1:Ke.depth;for(let Le=0;Le<Ae;Le+=1)We=He,He=Ce(He,null,Le),Ne.push(He),We.children.push(He)}Ke.dirUp?(He=Ne.pop(),ve(He,Ke),He=Ne[Ne.length-1]):(We=He,He=Ce(He,Ke,Ke.depth),Ne.push(He),We.children.push(He))});Ne.length>1;)He=Ne.pop(),ve(He,null);if(nt.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(Ne.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");Pe=nt.children[0];let ot=Pe;for(;Pe&&!Pe.down&&!Pe.up;)ot=Pe,Pe=Pe.children[0];Pe=ot,Pe.leftMost=!0,Pe.rightMost=!0,Ve(Pe),Pe.branch=0;const Ze={};Ze.string=[];for(let be=0;be<Q.length;be+=1)Ze.string[be]=Q[be];Ze.rules=[];for(let be=0;be<re.length;be+=1)Ze.rules[be]=re[be].name;Ze.udts=[];for(let be=0;be<ce.length;be+=1)Ze.udts[be]=ce[be].name;Ze.id={},Ze.id.ALT={id:S.ALT,name:"ALT"},Ze.id.CAT={id:S.CAT,name:"CAT"},Ze.id.REP={id:S.REP,name:"REP"},Ze.id.RNM={id:S.RNM,name:"RNM"},Ze.id.TLS={id:S.TLS,name:"TLS"},Ze.id.TBS={id:S.TBS,name:"TBS"},Ze.id.TRG={id:S.TRG,name:"TRG"},Ze.id.UDT={id:S.UDT,name:"UDT"},Ze.id.AND={id:S.AND,name:"AND"},Ze.id.NOT={id:S.NOT,name:"NOT"},Ze.id.BKR={id:S.BKR,name:"BKR"},Ze.id.BKA={id:S.BKA,name:"BKA"},Ze.id.BKN={id:S.BKN,name:"BKN"},Ze.id.ABG={id:S.ABG,name:"ABG"},Ze.id.AEN={id:S.AEN,name:"AEN"},Ze.id.ACTIVE={id:S.ACTIVE,name:"ACTIVE"},Ze.id.MATCH={id:S.MATCH,name:"MATCH"},Ze.id.EMPTY={id:S.EMPTY,name:"EMPTY"},Ze.id.NOMATCH={id:S.NOMATCH,name:"NOMATCH"},Ze.treeDepth=H,Ze.leafNodes=Be;let Re;return Pe.down?Pe.up?Re="none":Re="right":Pe.up?Re="left":Re="both",Ze.branchesIncomplete=Re,Ze.tree=Me(Pe,Pe.depth),Ze};this.toTree=function(xe){const Ee=z();return xe?JSON.stringify(Ee):Ee},this.toHtmlPage=function(xe,Ee,ye){return _.htmlToPage(this.toHtml(xe,Ee),ye)};const J=function(xe,Ee){let ye;switch(xe){case A:ye="hexadecimal";break;case B:ye="decimal";break;case I:ye="ASCII";break;case M:ye="UNICODE";break;default:throw new Error(`${C}htmlHeader: unrecognized mode: ${xe}`)}let Ce="";return Ce+=`<p>display mode: ${ye}</p>
`,Ce+=`<table class="${x.CLASS_TRACE}">
`,typeof Ee=="string"&&(Ce+=`<caption>${Ee}</caption>`),Ce},te=function(){let xe="";return xe+=`</table>
`,xe+=`<p class="${x.CLASS_MONOSPACE}">legend:<br>
`,xe+=`(a)&nbsp;-&nbsp;line number<br>
`,xe+=`(b)&nbsp;-&nbsp;matching line number<br>
`,xe+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,xe+=`(d)&nbsp;-&nbsp;phrase length<br>
`,xe+=`(e)&nbsp;-&nbsp;tree depth<br>
`,xe+=`(f)&nbsp;-&nbsp;operator state<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,xe+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,xe+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${O} characters of the phrase being matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_MATCH}">matched characters</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${x.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${$e} empty string<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${fe} end of input string<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ge} input string display truncated<br>
`,xe+=`</p>
`,xe+=`<p class="${x.CLASS_MONOSPACE}">
`,xe+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,xe+=`ALT - alternation<br>
`,xe+=`CAT - concatenation<br>
`,xe+=`REP - repetition<br>
`,xe+=`RNM - rule name<br>
`,xe+=`TRG - terminal range<br>
`,xe+=`TLS - terminal literal string (case insensitive)<br>
`,xe+=`TBS - terminal binary string (case sensitive)<br>
`,xe+=`<br>
`,xe+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,xe+=`UDT - user-defined terminal<br>
`,xe+=`AND - positive look ahead<br>
`,xe+=`NOT - negative look ahead<br>
`,xe+=`BKA - positive look behind<br>
`,xe+=`BKN - negative look behind<br>
`,xe+=`BKR - back reference<br>
`,xe+=`ABG - anchor - begin of input string<br>
`,xe+=`AEN - anchor - end of input string<br>
`,xe+=`</p>
`,xe};this.indent=function(xe){let Ee="";for(let ye=0;ye<xe;ye+=1)Ee+=".";return Ee};const se=function(xe,Ee){let ye="";if(Ee.type===S.TRG)if(xe===A||xe===M){let Ce=Ee.min.toString(16).toUpperCase();Ce.length%2!==0&&(Ce=`0${Ce}`),ye+=xe===A?"%x":"U+",ye+=Ce,Ce=Ee.max.toString(16).toUpperCase(),Ce.length%2!==0&&(Ce=`0${Ce}`),ye+=`&ndash;${Ce}`}else ye=`%d${Ee.min.toString(10)}&ndash;${Ee.max.toString(10)}`;return ye},oe=function(xe,Ee){let ye="";if(Ee.type===S.REP)if(xe===A){let Ce=Ee.min.toString(16).toUpperCase();Ce.length%2!==0&&(Ce=`0${Ce}`),ye=`x${Ce}`,Ee.max<1/0?(Ce=Ee.max.toString(16).toUpperCase(),Ce.length%2!==0&&(Ce=`0${Ce}`)):Ce="inf",ye+=`&ndash;${Ce}`}else Ee.max<1/0?ye=`${Ee.min.toString(10)}&ndash;${Ee.max.toString(10)}`:ye=`${Ee.min.toString(10)}&ndash;inf`;return ye},ie=function(xe,Ee){let ye="";if(Ee.type===S.TBS){const Ce=Math.min(Ee.string.length,D*2);if(xe===A||xe===M){ye+=xe===A?"%x":"U+";for(let ve=0;ve<Ce;ve+=1){let Be;ve>0&&(ye+="."),Be=Ee.string[ve].toString(16).toUpperCase(),Be.length%2!==0&&(Be=`0${Be}`),ye+=Be}}else{ye="%d";for(let ve=0;ve<Ce;ve+=1)ve>0&&(ye+="."),ye+=Ee.string[ve].toString(10)}Ce<Ee.string.length&&(ye+=ge)}return ye},G=function(xe,Ee){let ye="";if(Ee.type===S.TLS){const Ce=Math.min(Ee.string.length,D);if(xe===A||xe===B){let ve,Be,me;xe===A?(ye="%x",me=16):(ye="%d",me=10);for(let Ie=0;Ie<Ce;Ie+=1)Ie>0&&(ye+="."),Be=Ee.string[Ie],Be>=97&&Be<=122?(ve=Be-32,ye+=`${ve.toString(me)}/${Be.toString(me)}`.toUpperCase()):Be>=65&&Be<=90?(ve=Be,Be+=32,ye+=`${ve.toString(me)}/${Be.toString(me)}`.toUpperCase()):ye+=Be.toString(me).toUpperCase();Ce<Ee.string.length&&(ye+=ge)}else{ye='"';for(let ve=0;ve<Ce;ve+=1)ye+=_.asciiChars[Ee.string[ve]];Ce<Ee.string.length&&(ye+=ge),ye+='"'}}return ye},j=function(xe,Ee,ye,Ce,ve){if(Ce===0)return"";let Be="";const me=ve?",":"";switch(xe){case A:Be=me+_.charsToHex(Ee,ye,Ce);break;case B:if(ve)return`,${_.charsToDec(Ee,ye,Ce)}`;Be=me+_.charsToDec(Ee,ye,Ce);break;case M:Be=_.charsToUnicode(Ee,ye,Ce);break;case I:default:Be=_.charsToAsciiHtml(Ee,ye,Ce);break}return Be},ee=function(xe,Ee,ye,Ce,ve,Be){let me="",Ie,Ve,Me,Ne,Pe=fe;const He=`<span class="${x.CLASS_LOOKBEHIND}">`,We=`<span class="${x.CLASS_REMAINDER}">`,Ke="</span>";let Ge=!1;switch(ye){case S.EMPTY:me+=$e;case S.NOMATCH:case S.MATCH:case S.ACTIVE:Ie=Ce-ve,Ve=Be-Ie,Me=Be,Ne=Ee.length-Me;break;default:throw new Error("unrecognized state")}return Pe=fe,Ve>O?(Ve=O,Pe=ge,Ne=0):Ve+Ne>O&&(Pe=ge,Ne=O-Ve),Ve>0&&(me+=He,me+=j(xe,Ee,Ie,Ve,Ge),me+=Ke,Ge=!0),Ne>0&&(me+=We,me+=j(xe,Ee,Me,Ne,Ge),me+=Ke),me+Pe},pe=function(xe,Ee,ye,Ce,ve,Be){let me="",Ie,Ve,Me,Ne,Pe=fe;const He=`<span class="${x.CLASS_REMAINDER}">`,We="</span>";let Ke=!1;switch(ye){case S.EMPTY:me+=$e;case S.NOMATCH:case S.ACTIVE:Ie=Ce,Ve=0,Me=Ce,Ne=Ee.length-Me;break;case S.MATCH:Ie=Ce,Ve=ve,Me=Ce+Ve,Ne=Ee.length-Me;break;default:throw new Error("unrecognized state")}return Pe=fe,Ve>O?(Ve=O,Pe=ge,Ne=0):Ve+Ne>O&&(Pe=ge,Ne=O-Ve),Ve>0&&(me+=Be,me+=j(xe,Ee,Ie,Ve,Ke),me+=We,Ke=!0),Ne>0&&(me+=He,me+=j(xe,Ee,Me,Ne,Ke),me+=We),me+Pe},he=function(xe,Ee,ye,Ce,ve){const Be=`<span class="${x.CLASS_LOOKAHEAD}">`;return pe(xe,Ee,ye,Ce,ve,Be)},Se=function(xe,Ee,ye,Ce,ve){const Be=`<span class="${x.CLASS_MATCH}">`;return pe(xe,Ee,ye,Ce,ve,Be)},we=function(xe){if(re===null)return"";let Ee="",ye,Ce,ve,Be,me,Ie;return Ee+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",Ee+=`<th>operator</th><th>phrase</th></tr>
`,E.forEach(Ve=>{const Me=L[Ve];switch(ye=Me.thisLine,Ce=Me.thatLine!==void 0?Me.thatLine:"--",ve=!1,Be=!1,me=!1,Me.lookAround===S.LOOKAROUND_AHEAD&&(ve=!0,me=!0,Ie=Me.lookAnchor),(Me.opcode.type===S.AND||Me.opcode.type===S.NOT)&&(ve=!0,me=!0,Ie=Me.phraseIndex),Me.lookAround===S.LOOKAROUND_BEHIND&&(Be=!0,me=!0,Ie=Me.lookAnchor),(Me.opcode.type===S.BKA||Me.opcode.type===S.BKN)&&(Be=!0,me=!0,Ie=Me.phraseIndex),Ee+="<tr>",Ee+=`<td>${ye}</td><td>${Ce}</td>`,Ee+=`<td>${Me.phraseIndex}</td>`,Ee+=`<td>${Me.phraseLength}</td>`,Ee+=`<td>${Me.depth}</td>`,Ee+="<td>",Me.state){case S.ACTIVE:Ee+=`<span class="${x.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case S.MATCH:Ee+=`<span class="${x.CLASS_MATCH}">&uarr;M</span>`;break;case S.NOMATCH:Ee+=`<span class="${x.CLASS_NOMATCH}">&uarr;N</span>`;break;case S.EMPTY:Ee+=`<span class="${x.CLASS_EMPTY}">&uarr;E</span>`;break;default:Ee+=`<span class="${x.CLASS_ACTIVE}">--</span>`;break}if(Ee+="</td>",Ee+="<td>",Ee+=T.indent(Me.depth),ve?Ee+=`<span class="${x.CLASS_LOOKAHEAD}">`:Be&&(Ee+=`<span class="${x.CLASS_LOOKBEHIND}">`),Ee+=_.opcodeToString(Me.opcode.type),Me.opcode.type===S.RNM&&(Ee+=`(${re[Me.opcode.index].name}) `),Me.opcode.type===S.BKR){const Ne=Me.opcode.bkrCase===S.BKR_MODE_CI?"%i":"%s",Pe=Me.opcode.bkrMode===S.BKR_MODE_UM?"%u":"%p";Ee+=`(\\${Ne}${Pe}${re[Me.opcode.index].name}) `}Me.opcode.type===S.UDT&&(Ee+=`(${ce[Me.opcode.index].name}) `),Me.opcode.type===S.TRG&&(Ee+=`(${se(xe,Me.opcode)}) `),Me.opcode.type===S.TBS&&(Ee+=`(${ie(xe,Me.opcode)}) `),Me.opcode.type===S.TLS&&(Ee+=`(${G(xe,Me.opcode)}) `),Me.opcode.type===S.REP&&(Ee+=`(${oe(xe,Me.opcode)}) `),me&&(Ee+="</span>"),Ee+="</td>",Ee+="<td>",Be?Ee+=ee(xe,Q,Me.state,Me.phraseIndex,Me.phraseLength,Ie):ve?Ee+=he(xe,Q,Me.state,Me.phraseIndex,Me.phraseLength):Ee+=Se(xe,Q,Me.state,Me.phraseIndex,Me.phraseLength),Ee+=`</td></tr>
`}),Ee+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",Ee+=`<th>operator</th><th>phrase</th></tr>
`,Ee+=`</table>
`,Ee};this.toHtml=function(xe,Ee){let ye=I;if(typeof xe=="string"&&xe.length>=3){const ve=xe.toLowerCase().slice(0,3);ve==="hex"?ye=A:ve==="dec"?ye=B:ve==="uni"&&(ye=M)}let Ce="";return Ce+=J(ye,Ee),Ce+=we(ye),Ce+=te(),Ce}}),trace}var nodeExports,hasRequiredNodeExports;function requireNodeExports(){return hasRequiredNodeExports||(hasRequiredNodeExports=1,nodeExports={ast:requireAst(),circular:requireCircularBuffer(),ids:requireIdentifiers(),parser:requireParser$1(),stats:requireStats(),trace:requireTrace(),utils:requireUtilities(),emitcss:requireEmitcss(),style:requireStyle()}),nodeExports}var scannerGrammar,hasRequiredScannerGrammar;function requireScannerGrammar(){return hasRequiredScannerGrammar||(hasRequiredScannerGrammar=1,scannerGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let x="";return x+=`file = *line [last-line]
`,x+=`line = line-text end
`,x+=`line-text = *(valid/invalid)
`,x+=`last-line = 1*(valid/invalid)
`,x+=`valid = %d32-126 / %d9
`,x+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,x+=`end = CRLF / LF / CR
`,x+=`CRLF = %d13.10
`,x+=`LF = %d10
`,x+=`CR = %d13
`,x}}),scannerGrammar}var scannerCallbacks={},hasRequiredScannerCallbacks;function requireScannerCallbacks(){if(hasRequiredScannerCallbacks)return scannerCallbacks;hasRequiredScannerCallbacks=1;const n=requireIdentifiers(),_=requireUtilities();function x(O,D,L,V,U){return O===n.SEM_PRE?(U.endLength=0,U.textLength=0,U.invalidCount=0):U.lines.push({lineNo:U.lines.length,beginChar:L,length:V,textLength:U.textLength,endType:U.endType,invalidChars:U.invalidCount}),n.SEM_OK}function E(O,D,L,V,U){return O===n.SEM_PRE&&(U.textLength=V),n.SEM_OK}function S(O,D,L,V,U){return O===n.SEM_PRE?(U.endLength=0,U.textLength=0,U.invalidCount=0):U.strict?(U.lines.push({lineNo:U.lines.length,beginChar:L,length:V,textLength:V,endType:"none",invalidChars:U.invalidCount}),U.errors.push({line:U.lineNo,char:L+V,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(D.push(10),U.lines.push({lineNo:U.lines.length,beginChar:L,length:V+1,textLength:V,endType:"LF",invalidChars:U.invalidCount})),n.SEM_OK}function C(O,D,L,V,U){return O===n.SEM_PRE&&U.errors.push({line:U.lineNo,char:L,msg:`invalid character found '\\x${_.charToHex(D[L])}'`}),n.SEM_OK}function T(O,D,L,V,U){return O===n.SEM_POST&&(U.lineNo+=1),n.SEM_OK}function A(O,D,L,V,U){return O===n.SEM_PRE&&(U.endType="LF",U.strict&&U.errors.push({line:U.lineNo,char:L,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function B(O,D,L,V,U){return O===n.SEM_PRE&&(U.endType="CR",U.strict&&U.errors.push({line:U.lineNo,char:L,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),n.SEM_OK}function I(O,D,L,V,U){return O===n.SEM_PRE&&(U.endType="CRLF"),n.SEM_OK}const M=[];return M.line=x,M["line-text"]=E,M["last-line"]=S,M.invalid=C,M.end=T,M.lf=A,M.cr=B,M.crlf=I,scannerCallbacks.callbacks=M,scannerCallbacks}var scanner,hasRequiredScanner;function requireScanner(){return hasRequiredScanner||(hasRequiredScanner=1,scanner=function(_,x,E,S){const C="scanner.js: ",T=requireNodeExports(),A=new(requireScannerGrammar()),{callbacks:B}=requireScannerCallbacks(),I=[],M=new T.parser;if(M.ast=new T.ast,M.ast.callbacks=B,S){if(S.traceObject!=="traceObject")throw new TypeError(`${C}trace argument is not a trace object`);M.trace=S}if(M.parse(A,"file",_).success!==!0){x.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const D={lines:I,lineNo:0,errors:x,strict:!!E};return M.ast.translate(D),I}),scanner}var syntaxCallbacks,hasRequiredSyntaxCallbacks;function requireSyntaxCallbacks(){return hasRequiredSyntaxCallbacks||(hasRequiredSyntaxCallbacks=1,syntaxCallbacks=function(){const _="syntax-callbacks.js: ",x=requireNodeExports(),E=x.ids;let S;const C=function(G,j,ee,pe){switch(G.state){case E.ACTIVE:pe.altStack=[],pe.repCount=0;break;case E.EMPTY:pe.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case E.MATCH:pe.ruleCount===0&&pe.errors.push({line:0,char:0,msg:"no rules defined"});break;case E.NOMATCH:throw new Error(`${_}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${_}synFile: unrecognized case.`)}},T=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:ee.altStack.length=0,S={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},ee.altStack.push(S);break;case E.EMPTY:throw new Error(`${_}synRule: EMPTY: rule cannot be empty`);case E.NOMATCH:break;case E.MATCH:ee.ruleCount+=1;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},A=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},B=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},I=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},M=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},O=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},D=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},L=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},V=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},U=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},q=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:if(ee.strict){const pe=x.utils.charsToString(G,j,ie.phraseLength);ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:`Back reference operator(${pe}) found - strict ABNF specified.`})}break;default:throw new Error(`${_}synFile: unrecognized case.`)}},H=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:if(ee.strict){const pe=x.utils.charsToString(G,j,ie.phraseLength);ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:`UDT operator found(${pe}) - strict ABNF specified.`})}break;default:throw new Error(`${_}synFile: unrecognized case.`)}},W=function(ie,G,j){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S.tlsOpen=j;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},Q=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:ee.stringTabChar=!1;break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.stringTabChar!==!1&&ee.errors.push({line:ee.findLine(ee.lines,ee.stringTabChar),char:ee.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},re=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.stringTabChar=j;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},ce=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.errors.push({line:ee.findLine(ee.lines,S.tlsOpen),char:S.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),S.basicError=!0,S.tlsOpen=null;break;case E.MATCH:S.tlsOpen=null;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},ne=function(ie,G,j){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S.clsOpen=j;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},Y=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:ee.stringTabChar=!1;break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.stringTabChar!==!1&&ee.errors.push({line:ee.findLine(ee.lines,ee.stringTabChar),char:ee.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},fe=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.errors.push({line:ee.findLine(ee.lines,S.clsOpen),char:S.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),S.clsOpen=null,S.basicError=!0;break;case E.MATCH:ee.strict&&ee.errors.push({line:ee.findLine(ee.lines,S.clsOpen),char:S.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),S.clsOpen=null;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},ge=function(ie,G,j){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S.prosValOpen=j;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},$e=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:ee.stringTabChar=!1;break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.stringTabChar!==!1&&ee.errors.push({line:ee.findLine(ee.lines,ee.stringTabChar),char:ee.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},_e=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.errors.push({line:ee.findLine(ee.lines,S.prosValOpen),char:S.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),S.basicError=!0,S.prosValOpen=null;break;case E.MATCH:ee.errors.push({line:ee.findLine(ee.lines,S.prosValOpen),char:S.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),S.prosValOpen=null;break;default:throw new Error(`${_}synFile: unrecognized case.`)}},ae=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S={groupOpen:j,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},ee.altStack.push(S);break;default:throw new Error(`${_}synFile: unrecognized case.`)}},X=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.errors.push({line:ee.findLine(ee.lines,S.groupOpen),char:S.groupOpen,msg:'Group "(...)" opened but not closed.'}),S=ee.altStack.pop(),S.groupError=!0;break;case E.MATCH:S=ee.altStack.pop();break;default:throw new Error(`${_}synFile: unrecognized case.`)}},F=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S={groupOpen:null,groupError:!1,optionOpen:j,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},ee.altStack.push(S);break;default:throw new Error(`${_}synFile: unrecognized case.`)}},z=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.errors.push({line:ee.findLine(ee.lines,S.optionOpen),char:S.optionOpen,msg:'Option "[...]" opened but not closed.'}),S=ee.altStack.pop(),S.optionError=!0;break;case E.MATCH:S=ee.altStack.pop();break;default:throw new Error(`${_}synFile: unrecognized case.`)}},J=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:S.basicError===!1&&ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},te=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:if(ie.phraseLength===1&&ee.strict){const pe=G[j]===13?"CR":"LF";ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:`Line end '${pe}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${_}synFile: unrecognized case.`)}},se=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:break;case E.MATCH:ee.errors.push({line:ee.findLine(ee.lines,j,ee.charsLength),char:j,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${_}synFile: unrecognized case.`)}},oe=function(ie,G,j,ee){switch(ie.state){case E.ACTIVE:break;case E.EMPTY:break;case E.NOMATCH:ee.repCount+=1;break;case E.MATCH:ee.repCount+=1;break;default:throw new Error(`${_}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=M,this.callbacks.basicelementerr=J,this.callbacks.clsclose=fe,this.callbacks.clsopen=ne,this.callbacks.clsstring=Y,this.callbacks.definedaserror=I,this.callbacks.file=C,this.callbacks.groupclose=X,this.callbacks.groupopen=ae,this.callbacks.lineenderror=se,this.callbacks.lineend=te,this.callbacks.notop=O,this.callbacks.optionclose=z,this.callbacks.optionopen=F,this.callbacks.prosvalclose=_e,this.callbacks.prosvalopen=ge,this.callbacks.prosvalstring=$e,this.callbacks.repetition=oe,this.callbacks.rule=T,this.callbacks.ruleerror=A,this.callbacks.rulenameerror=B,this.callbacks.stringtab=re,this.callbacks.tlsclose=ce,this.callbacks.tlsopen=W,this.callbacks.tlsstring=Q,this.callbacks.udtop=H,this.callbacks.bkaop=D,this.callbacks.bknop=L,this.callbacks.bkrop=q,this.callbacks.abgop=V,this.callbacks.aenop=U}),syntaxCallbacks}var semanticCallbacks,hasRequiredSemanticCallbacks;function requireSemanticCallbacks(){return hasRequiredSemanticCallbacks||(hasRequiredSemanticCallbacks=1,semanticCallbacks=function(){const _=requireNodeExports(),x=_.ids,E=function(){this.names=[],this.add=function(Me){let Ne=-1;return this.get(Me)===-1&&(Ne={name:Me,lower:Me.toLowerCase(),index:this.names.length},this.names.push(Ne)),Ne},this.get=function(Me){let Ne=-1;const Pe=Me.toLowerCase();for(let He=0;He<this.names.length;He+=1)if(this.names[He].lower===Pe){Ne=this.names[He];break}return Ne}},S=function(Ve,Me,Ne){let Pe=0;for(let He=Me;He<Me+Ne;He+=1)Pe=10*Pe+Ve[He]-48;return Pe},C=function(Ve,Me,Ne){let Pe=0;for(let He=Me;He<Me+Ne;He+=1)Pe=2*Pe+Ve[He]-48;return Pe},T=function(Ve,Me,Ne){let Pe=0;for(let He=Me;He<Me+Ne;He+=1){let We=Ve[He];if(We>=48&&We<=57)We-=48;else if(We>=65&&We<=70)We-=55;else if(We>=97&&We<=102)We-=87;else throw new Error("hexnum out of range");Pe=16*Pe+We}return Pe};function A(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;if(Ie===x.SEM_PRE)Pe.ruleNames=new E,Pe.udtNames=new E,Pe.rules=[],Pe.udts=[],Pe.rulesLineMap=[],Pe.opcodes=[],Pe.altStack=[],Pe.topStack=null,Pe.topRule=null;else if(Ie===x.SEM_POST){let We;Pe.rules.forEach(Ke=>{Ke.isBkr=!1,Ke.opcodes.forEach(Ge=>{Ge.type===x.RNM&&(We=Pe.ruleNames.get(Ge.index.name),We===-1?(Pe.errors.push({line:Pe.findLine(Pe.lines,Ge.index.phraseIndex,Pe.charsLength),char:Ge.index.phraseIndex,msg:`Rule name '${Ge.index.name}' used but not defined.`}),Ge.index=-1):Ge.index=We.index)})}),Pe.udts.forEach(Ke=>{Ke.isBkr=!1}),Pe.rules.forEach(Ke=>{Ke.opcodes.forEach(Ge=>{Ge.type===x.BKR&&(Ke.hasBkr=!0,We=Pe.ruleNames.get(Ge.index.name),We!==-1?(Pe.rules[We.index].isBkr=!0,Ge.index=We.index):(We=Pe.udtNames.get(Ge.index.name),We!==-1?(Pe.udts[We.index].isBkr=!0,Ge.index=Pe.rules.length+We.index):(Pe.errors.push({line:Pe.findLine(Pe.lines,Ge.index.phraseIndex,Pe.charsLength),char:Ge.index.phraseIndex,msg:`Back reference name '${Ge.index.name}' refers to undefined rule or unamed UDT.`}),Ge.index=-1)))})})}return He}function B(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE&&(Pe.altStack.length=0,Pe.topStack=null,Pe.rulesLineMap.push({line:Pe.findLine(Pe.lines,Me,Pe.charsLength),char:Me})),He}function I(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;if(Ie===x.SEM_PRE)Pe.ruleName="",Pe.definedas="";else if(Ie===x.SEM_POST){let We;Pe.definedas==="="?(We=Pe.ruleNames.add(Pe.ruleName),We===-1?(Pe.definedas=null,Pe.errors.push({line:Pe.findLine(Pe.lines,Me,Pe.charsLength),char:Me,msg:`Rule name '${Pe.ruleName}' previously defined.`})):(Pe.topRule={name:We.name,lower:We.lower,opcodes:[],index:We.index},Pe.rules.push(Pe.topRule),Pe.opcodes=Pe.topRule.opcodes)):(We=Pe.ruleNames.get(Pe.ruleName),We===-1?(Pe.definedas=null,Pe.errors.push({line:Pe.findLine(Pe.lines,Me,Pe.charsLength),char:Me,msg:`Rule name '${Pe.ruleName}' for incremental alternate not previously defined.`})):(Pe.topRule=Pe.rules[We.index],Pe.opcodes=Pe.topRule.opcodes))}return He}function M(Ie,Ve,Me,Ne,Pe){let He=x.SEM_OK;if(Ie===x.SEM_PRE)for(;;){if(Pe.definedas===null){He=x.SEM_SKIP;break}if(Pe.topStack===null){if(Pe.definedas==="="){Pe.topStack={alt:{type:x.ALT,children:[]},cat:null},Pe.altStack.push(Pe.topStack),Pe.opcodes.push(Pe.topStack.alt);break}Pe.topStack={alt:Pe.opcodes[0],cat:null},Pe.altStack.push(Pe.topStack);break}Pe.topStack={alt:{type:x.ALT,children:[]},cat:null},Pe.altStack.push(Pe.topStack),Pe.opcodes.push(Pe.topStack.alt);break}else Ie===x.SEM_POST&&(Pe.altStack.pop(),Pe.altStack.length>0?Pe.topStack=Pe.altStack[Pe.altStack.length-1]:Pe.topStack=null);return He}function O(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE?(Pe.topStack.alt.children.push(Pe.opcodes.length),Pe.topStack.cat={type:x.CAT,children:[]},Pe.opcodes.push(Pe.topStack.cat)):Ie===x.SEM_POST&&(Pe.topStack.cat=null),He}function D(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE&&Pe.topStack.cat.children.push(Pe.opcodes.length),He}function L(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.REP,min:0,max:1,char:Me}),He}function V(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE&&(Pe.ruleName=_.utils.charsToString(Ve,Me,Ne)),He}function U(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.definedas="="),He}function q(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.definedas="=/"),He}function H(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE?(Pe.min=0,Pe.max=1/0,Pe.topRep={type:x.REP,min:0,max:1/0},Pe.opcodes.push(Pe.topRep)):Ie===x.SEM_POST&&(Pe.min>Pe.max&&Pe.errors.push({line:Pe.findLine(Pe.lines,Me,Pe.charsLength),char:Me,msg:`repetition min cannot be greater than max: min: ${Pe.min}: max: ${Pe.max}`}),Pe.topRep.min=Pe.min,Pe.topRep.max=Pe.max),He}function W(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.min=S(Ve,Me,Ne)),He}function Q(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.max=S(Ve,Me,Ne)),He}function re(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.max=S(Ve,Me,Ne),Pe.min=Pe.max),He}function ce(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.AND}),He}function ne(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.NOT}),He}function Y(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.RNM,index:{phraseIndex:Me,name:_.utils.charsToString(Ve,Me,Ne)}}),He}function fe(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.ABG}),He}function ge(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.AEN}),He}function $e(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.BKA}),He}function _e(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.opcodes.push({type:x.BKN}),He}function ae(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE?(Pe.ci=!0,Pe.cs=!1,Pe.um=!0,Pe.pm=!1):Ie===x.SEM_POST&&Pe.opcodes.push({type:x.BKR,bkrCase:Pe.cs===!0?x.BKR_MODE_CS:x.BKR_MODE_CI,bkrMode:Pe.pm===!0?x.BKR_MODE_PM:x.BKR_MODE_UM,index:{phraseIndex:Pe.bkrname.phraseIndex,name:_.utils.charsToString(Ve,Pe.bkrname.phraseIndex,Pe.bkrname.phraseLength)}}),He}function X(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.ci=!0),He}function F(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.cs=!0),He}function z(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.um=!0),He}function J(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.pm=!0),He}function te(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.bkrname={phraseIndex:Me,phraseLength:Ne}),He}function se(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;if(Ie===x.SEM_POST){const We=_.utils.charsToString(Ve,Me,Ne);let Ke=Pe.udtNames.add(We);if(Ke===-1){if(Ke=Pe.udtNames.get(We),Ke===-1)throw new Error("semUdtEmpty: name look up error")}else Pe.udts.push({name:Ke.name,lower:Ke.lower,index:Ke.index,empty:!0});Pe.opcodes.push({type:x.UDT,empty:!0,index:Ke.index})}return He}function oe(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;if(Ie===x.SEM_POST){const We=_.utils.charsToString(Ve,Me,Ne);let Ke=Pe.udtNames.add(We);if(Ke===-1){if(Ke=Pe.udtNames.get(We),Ke===-1)throw new Error("semUdtNonEmpty: name look up error")}else Pe.udts.push({name:Ke.name,lower:Ke.lower,index:Ke.index,empty:!1});Pe.opcodes.push({type:x.UDT,empty:!1,index:Ke.index,syntax:null,semantic:null})}return He}function ie(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE&&(Pe.tlscase=!0),He}function G(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Ne>0&&(Ve[Me+1]===83||Ve[Me+1]===115)&&(Pe.tlscase=!1),He}function j(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;if(Ie===x.SEM_POST)if(Pe.tlscase){const We=Ve.slice(Me,Me+Ne);for(let Ke=0;Ke<We.length;Ke+=1)We[Ke]>=65&&We[Ke]<=90&&(We[Ke]+=32);Pe.opcodes.push({type:x.TLS,string:We})}else Pe.opcodes.push({type:x.TBS,string:Ve.slice(Me,Me+Ne)});return He}function ee(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Ne<=2?Pe.opcodes.push({type:x.TLS,string:[]}):Pe.opcodes.push({type:x.TBS,string:Ve.slice(Me+1,Me+Ne-1)})),He}function pe(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE?Pe.tbsstr=[]:Ie===x.SEM_POST&&Pe.opcodes.push({type:x.TBS,string:Pe.tbsstr}),He}function he(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_PRE?(Pe.min=0,Pe.max=0):Ie===x.SEM_POST&&(Pe.min>Pe.max&&Pe.errors.push({line:Pe.findLine(Pe.lines,Me,Pe.charsLength),char:Me,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${Pe.min}: max: ${Pe.max}`}),Pe.opcodes.push({type:x.TRG,min:Pe.min,max:Pe.max})),He}function Se(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.min=S(Ve,Me,Ne)),He}function we(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.max=S(Ve,Me,Ne)),He}function xe(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.min=C(Ve,Me,Ne)),He}function Ee(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.max=C(Ve,Me,Ne)),He}function ye(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.min=T(Ve,Me,Ne)),He}function Ce(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&(Pe.max=T(Ve,Me,Ne)),He}function ve(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.tbsstr.push(S(Ve,Me,Ne)),He}function Be(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.tbsstr.push(C(Ve,Me,Ne)),He}function me(Ie,Ve,Me,Ne,Pe){const He=x.SEM_OK;return Ie===x.SEM_POST&&Pe.tbsstr.push(T(Ve,Me,Ne)),He}this.callbacks=[],this.callbacks.abgop=fe,this.callbacks.aenop=ge,this.callbacks.alternation=M,this.callbacks.andop=ce,this.callbacks.bmax=Ee,this.callbacks.bmin=xe,this.callbacks.bkaop=$e,this.callbacks.bknop=_e,this.callbacks.bkrop=ae,this.callbacks["bkr-name"]=te,this.callbacks.bstring=Be,this.callbacks.clsop=ee,this.callbacks.ci=X,this.callbacks.cs=F,this.callbacks.um=z,this.callbacks.pm=J,this.callbacks.concatenation=O,this.callbacks.defined=U,this.callbacks.dmax=we,this.callbacks.dmin=Se,this.callbacks.dstring=ve,this.callbacks.file=A,this.callbacks.incalt=q,this.callbacks.notop=ne,this.callbacks.optionopen=L,this.callbacks["rep-max"]=Q,this.callbacks["rep-min"]=W,this.callbacks["rep-min-max"]=re,this.callbacks.repetition=D,this.callbacks.repop=H,this.callbacks.rnmop=Y,this.callbacks.rule=B,this.callbacks.rulelookup=I,this.callbacks.rulename=V,this.callbacks.tbsop=pe,this.callbacks.tlscase=G,this.callbacks.tlsstring=j,this.callbacks.tlsop=ie,this.callbacks.trgop=he,this.callbacks["udt-empty"]=se,this.callbacks["udt-non-empty"]=oe,this.callbacks.xmax=Ce,this.callbacks.xmin=ye,this.callbacks.xstring=me}),semanticCallbacks}var sabnfGrammar,hasRequiredSabnfGrammar;function requireSabnfGrammar(){return hasRequiredSabnfGrammar||(hasRequiredSabnfGrammar=1,sabnfGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let x="";return x+=`;
`,x+=`; ABNF for JavaScript APG 2.0 SABNF
`,x+=`; RFC 5234 with some restrictions and additions.
`,x+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,x+=`;  - accepts %s"string" as a case-sensitive string
`,x+=`;  - accepts %i"string" as a case-insensitive string
`,x+=`;  - accepts "string" as a case-insensitive string
`,x+=`;
`,x+=`; Some restrictions:
`,x+=`;   1. Rules must begin at first character of each line.
`,x+=`;      Indentations on first rule and rules thereafter are not allowed.
`,x+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,x+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,x+=`;      However, a working parser cannot be generated from them.
`,x+=`;
`,x+=`; Super set (SABNF) additions:
`,x+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,x+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,x+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,x+=`;      e.g. &%d13 or &rule or !(A / B)
`,x+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,x+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,x+=`;      u_name may be used as an element but no rule definition is given.
`,x+=`;      e.g. rule = A / u_myUdt
`,x+=`;           A = "a"
`,x+=`;      would be a valid grammar.
`,x+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,x+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,x+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,x+=`; New 12/26/2015
`,x+=`;   4. Look-behind operators are accepted as element prefixes.
`,x+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,x+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,x+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,x+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,x+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,x+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,x+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,x+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,x+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,x+=`;      Back reference modifiers can be used to specify case and mode.
`,x+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,x+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,x+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,x+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,x+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,x+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,x+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,x+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,x+=`;
`,x+=`File            = *(BlankLine / Rule / RuleError)
`,x+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,x+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,x+=`                / (LineEndError LineEnd))
`,x+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,x+=`RuleNameTest    = RuleName/RuleNameError
`,x+=`RuleName        = alphanum
`,x+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,x+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,x+=`DefinedAsError  = 1*2%d33-126
`,x+=`DefinedAs       = IncAlt / Defined
`,x+=`Defined         = %d61
`,x+=`IncAlt          = %d61.47
`,x+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,x+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,x+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,x+=`Concatenation   = Repetition *(CatOp Repetition)
`,x+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,x+=`Modifier        = (Predicate [RepOp])
`,x+=`                / RepOp
`,x+=`Predicate       = BkaOp
`,x+=`                / BknOp
`,x+=`                / AndOp
`,x+=`                / NotOp
`,x+=`BasicElement    = UdtOp
`,x+=`                / RnmOp
`,x+=`                / TrgOp
`,x+=`                / TbsOp
`,x+=`                / TlsOp
`,x+=`                / ClsOp
`,x+=`                / BkrOp
`,x+=`                / AbgOp
`,x+=`                / AenOp
`,x+=`                / ProsVal
`,x+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,x+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,x+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,x+=`GroupOpen       = %d40 owsp
`,x+=`GroupClose      = owsp %d41
`,x+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,x+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,x+=`OptionOpen      = %d91 owsp
`,x+=`OptionClose     = owsp %d93
`,x+=`RnmOp           = alphanum
`,x+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,x+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,x+=`cs              = '%s'
`,x+=`ci              = '%i'
`,x+=`um              = '%u'
`,x+=`pm              = '%p'
`,x+=`bkr-name        = uname / ename / rname
`,x+=`rname           = alphanum
`,x+=`uname           = %d117.95 alphanum
`,x+=`ename           = %d101.95 alphanum
`,x+=`UdtOp           = udt-empty
`,x+=`                / udt-non-empty
`,x+=`udt-non-empty   = %d117.95 alphanum
`,x+=`udt-empty       = %d101.95 alphanum
`,x+=`RepOp           = (rep-min StarOp rep-max)
`,x+=`                / (rep-min StarOp)
`,x+=`                / (StarOp rep-max)
`,x+=`                / StarOp
`,x+=`                / rep-min-max
`,x+=`AltOp           = %d47 owsp
`,x+=`CatOp           = wsp
`,x+=`StarOp          = %d42
`,x+=`AndOp           = %d38
`,x+=`NotOp           = %d33
`,x+=`BkaOp           = %d38.38
`,x+=`BknOp           = %d33.33
`,x+=`AbgOp           = %d37.94
`,x+=`AenOp           = %d37.36
`,x+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,x+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,x+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,x+=`TlsCase         = ["%i" / "%s"]
`,x+=`TlsOpen         = %d34
`,x+=`TlsClose        = %d34
`,x+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,x+=`StringTab       = %d9
`,x+=`ClsOp           = ClsOpen ClsString ClsClose
`,x+=`ClsOpen         = %d39
`,x+=`ClsClose        = %d39
`,x+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,x+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,x+=`ProsValOpen     = %d60
`,x+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,x+=`ProsValClose    = %d62
`,x+=`rep-min         = rep-num
`,x+=`rep-min-max     = rep-num
`,x+=`rep-max         = rep-num
`,x+=`rep-num         = 1*(%d48-57)
`,x+=`dString         = dnum
`,x+=`xString         = xnum
`,x+=`bString         = bnum
`,x+=`Dec             = (%d68/%d100)
`,x+=`Hex             = (%d88/%d120)
`,x+=`Bin             = (%d66/%d98)
`,x+=`dmin            = dnum
`,x+=`dmax            = dnum
`,x+=`bmin            = bnum
`,x+=`bmax            = bnum
`,x+=`xmin            = xnum
`,x+=`xmax            = xnum
`,x+=`dnum            = 1*(%d48-57)
`,x+=`bnum            = 1*%d48-49
`,x+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,x+=`;
`,x+=`; Basics
`,x+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,x+=`owsp            = *space
`,x+=`wsp             = 1*space
`,x+=`space           = %d32
`,x+=`                / %d9
`,x+=`                / comment
`,x+=`                / LineContinue
`,x+=`comment         = %d59 *(%d32-126 / %d9)
`,x+=`LineEnd         = %d13.10
`,x+=`                / %d10
`,x+=`                / %d13
`,x+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,x}}),sabnfGrammar}var parser,hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser=function(){const _="parser: ",x=requireNodeExports(),E=x.ids,S=new(requireSyntaxCallbacks()),C=new(requireSemanticCallbacks()),T=new(requireSabnfGrammar()),A=new x.parser;A.ast=new x.ast,A.callbacks=S.callbacks,A.ast.callbacks=C.callbacks;const B=function(D,L,V){if(L<0||L>=V)return-1;for(let U=0;U<D.length;U+=1)if(L>=D[U].beginChar&&L<D[U].beginChar+D[U].length)return U;return-1},I=function(D,L){let V=-1;if(L<D.length){for(let U=L;U<D.length;U+=1)if(D[U]!==null){V=D[U];break}}return V},M=function(D){D.forEach(L=>{const V=[],U=[];let q=0;L.opcodes.forEach(H=>{H.type===E.ALT&&H.children.length===1||H.type===E.CAT&&H.children.length===1||H.type===E.REP&&H.min===1&&H.max===1?U.push(null):(U.push(q),V.push(H),q+=1)}),U.push(q),V.forEach(H=>{if(H.type===E.ALT||H.type===E.CAT)for(let W=0;W<H.children.length;W+=1)H.children[W]=I(U,H.children[W])}),L.opcodes=V})};this.syntax=function(D,L,V,U,q){if(q){if(q.traceObject!=="traceObject")throw new TypeError(`${_}trace argument is not a trace object`);A.trace=q}const H={};H.errors=V,H.strict=!!U,H.lines=L,H.findLine=B,H.charsLength=D.length,H.ruleCount=0,A.parse(T,"file",D,H).success||V.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(D,L,V){const U={};return U.errors=V,U.lines=L,U.findLine=B,U.charsLength=D.length,A.ast.translate(U),V.length?null:(M(U.rules),{rules:U.rules,udts:U.udts,lineMap:U.rulesLineMap})},this.generateSource=function(D,L,V,U,q){let H="",W,Q,re,ce=0,ne=1/0,Y=0;const fe=[],ge=[];let $e=0,_e=0,ae=0,X=0,F=0,z=0,J=0,te=0,se=0,oe=0,ie=0,G=0,j=0,ee=0,pe=0;V.forEach(we=>{fe.push(we.lower),ce+=we.opcodes.length,we.opcodes.forEach(xe=>{switch(xe.type){case E.ALT:$e+=1;break;case E.CAT:_e+=1;break;case E.RNM:ae+=1;break;case E.UDT:X+=1;break;case E.REP:F+=1;break;case E.AND:z+=1;break;case E.NOT:J+=1;break;case E.BKA:G+=1;break;case E.BKN:j+=1;break;case E.BKR:ie+=1;break;case E.ABG:ee+=1;break;case E.AEN:pe+=1;break;case E.TLS:for(te+=1,W=0;W<xe.string.length;W+=1)xe.string[W]<ne&&(ne=xe.string[W]),xe.string[W]>Y&&(Y=xe.string[W]);break;case E.TBS:for(se+=1,W=0;W<xe.string.length;W+=1)xe.string[W]<ne&&(ne=xe.string[W]),xe.string[W]>Y&&(Y=xe.string[W]);break;case E.TRG:oe+=1,xe.min<ne&&(ne=xe.min),xe.max>Y&&(Y=xe.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),fe.sort(),U.length>0&&(U.forEach(we=>{ge.push(we.lower)}),ge.sort());let he="module.exports";q&&typeof q=="string"&&(he=`let ${q}`),H+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,H+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,H+=`//
`,H+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,H+=`${he} = function grammar(){
`,H+="  // ```\n",H+=`  // SUMMARY
`,H+=`  //      rules = ${V.length}
`,H+=`  //       udts = ${U.length}
`,H+=`  //    opcodes = ${ce}
`,H+=`  //        ---   ABNF original opcodes
`,H+=`  //        ALT = ${$e}
`,H+=`  //        CAT = ${_e}
`,H+=`  //        REP = ${F}
`,H+=`  //        RNM = ${ae}
`,H+=`  //        TLS = ${te}
`,H+=`  //        TBS = ${se}
`,H+=`  //        TRG = ${oe}
`,H+=`  //        ---   SABNF superset opcodes
`,H+=`  //        UDT = ${X}
`,H+=`  //        AND = ${z}
`,H+=`  //        NOT = ${J}
`,H+=`  //        BKA = ${G}
`,H+=`  //        BKN = ${j}
`,H+=`  //        BKR = ${ie}
`,H+=`  //        ABG = ${ee}
`,H+=`  //        AEN = ${pe}
`,H+="  // characters = [",te+se+oe===0?H+=" none defined ]":H+=`${ne} - ${Y}]`,X>0&&(H+=" + user defined"),H+=`
`,H+="  // ```\n",H+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,H+=`  this.grammarObject = 'grammarObject';
`,H+=`
`,H+=`  /* RULES */
`,H+=`  this.rules = [];
`,V.forEach((we,xe)=>{let Ee="  this.rules[";Ee+=xe,Ee+="] = {name: '",Ee+=we.name,Ee+="', lower: '",Ee+=we.lower,Ee+="', index: ",Ee+=we.index,Ee+=", isBkr: ",Ee+=we.isBkr,Ee+=`};
`,H+=Ee}),H+=`
`,H+=`  /* UDTS */
`,H+=`  this.udts = [];
`,U.length>0&&U.forEach((we,xe)=>{let Ee="  this.udts[";Ee+=xe,Ee+="] = {name: '",Ee+=we.name,Ee+="', lower: '",Ee+=we.lower,Ee+="', index: ",Ee+=we.index,Ee+=", empty: ",Ee+=we.empty,Ee+=", isBkr: ",Ee+=we.isBkr,Ee+=`};
`,H+=Ee}),H+=`
`,H+=`  /* OPCODES */
`,V.forEach((we,xe)=>{xe>0&&(H+=`
`),H+=`  /* ${we.name} */
`,H+=`  this.rules[${xe}].opcodes = [];
`,we.opcodes.forEach((Ee,ye)=>{let Ce;switch(Ee.type){case E.ALT:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, children: [${Ee.children.toString()}]};// ALT
`;break;case E.CAT:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, children: [${Ee.children.toString()}]};// CAT
`;break;case E.RNM:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, index: ${Ee.index}};// RNM(${V[Ee.index].name})
`;break;case E.BKR:Ee.index>=V.length?(Q=U[Ee.index-V.length].name,re=U[Ee.index-V.length].lower):(Q=V[Ee.index].name,re=V[Ee.index].lower),Ce="%i",Ee.bkrCase===E.BKR_MODE_CS&&(Ce="%s"),Ee.bkrMode===E.BKR_MODE_UM?Ce+="%u":Ce+="%p",Q=Ce+Q,H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, index: ${Ee.index}, lower: '${re}', bkrCase: ${Ee.bkrCase}, bkrMode: ${Ee.bkrMode}};// BKR(\\${Q})
`;break;case E.UDT:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, empty: ${Ee.empty}, index: ${Ee.index}};// UDT(${U[Ee.index].name})
`;break;case E.REP:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, min: ${Ee.min}, max: ${Ee.max}};// REP
`;break;case E.AND:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// AND
`;break;case E.NOT:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// NOT
`;break;case E.ABG:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// ABG(%^)
`;break;case E.AEN:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// AEN(%$)
`;break;case E.BKA:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// BKA
`;break;case E.BKN:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}};// BKN
`;break;case E.TLS:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, string: [${Ee.string.toString()}]};// TLS
`;break;case E.TBS:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, string: [${Ee.string.toString()}]};// TBS
`;break;case E.TRG:H+=`  this.rules[${xe}].opcodes[${ye}] = {type: ${Ee.type}, min: ${Ee.min}, max: ${Ee.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),H+=`
`,H+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",H+=`  this.toString = function toString(){
`,H+=`    let str = "";
`;let Se;return L.forEach(we=>{const xe=we.beginChar+we.length;Se="",H+='    str += "';for(let Ee=we.beginChar;Ee<xe;Ee+=1){switch(D[Ee]){case 9:Se=" ";break;case 10:Se="\\n";break;case 13:Se="\\r";break;case 34:Se='\\"';break;case 92:Se="\\\\";break;default:Se=String.fromCharCode(D[Ee]);break}H+=Se}H+=`";
`}),H+=`    return str;
`,H+=`  }
`,H+=`}
`,H},this.generateObject=function(D,L,V){const U={},q=[],H=[],W=D.slice(0);return U.grammarObject="grammarObject",L.forEach(Q=>{q.push(Q.lower)}),q.sort(),V.length>0&&(V.forEach(Q=>{H.push(Q.lower)}),H.sort()),U.callbacks=[],q.forEach(Q=>{U.callbacks[Q]=!1}),V.length>0&&H.forEach(Q=>{U.callbacks[Q]=!1}),U.rules=L,U.udts=V,U.toString=function(){return W},U}}),parser}var ruleAttributes,hasRequiredRuleAttributes;function requireRuleAttributes(){return hasRequiredRuleAttributes||(hasRequiredRuleAttributes=1,ruleAttributes=function(){const _=requireIdentifiers(),x="rule-attributes.js";let E=null;function S($e){return $e.left||$e.nested||$e.right||$e.cyclic?!1:$e.empty}function C($e){return!!($e.left||$e.nested||$e.right||$e.cyclic)}function T($e,_e){let ae=0,X=0,F=0;for(ae=0;ae<_e;ae+=1)if($e[ae].nested)return!0;for(ae=0;ae<_e;ae+=1)if($e[ae].right&&!$e[ae].leaf){for(X=ae+1;X<_e;X+=1)if(!S($e[X]))return!0}for(ae=_e-1;ae>=0;ae-=1)if($e[ae].left&&!$e[ae].leaf){for(X=ae-1;X>=0;X-=1)if(!S($e[X]))return!0}for(ae=0;ae<_e;ae+=1)if(!$e[ae].empty&&!C($e[ae])){for(X=ae+1;X<_e;X+=1)if(C($e[X])){for(F=X+1;F<_e;F+=1)if(!$e[F].empty&&!C($e[F]))return!0}}return!1}function A($e,_e){for(let ae=0;ae<_e;ae+=1)if(!$e[ae].cyclic)return!1;return!0}function B($e,_e){for(let ae=0;ae<_e;ae+=1){if($e[ae].left)return!0;if(!$e[ae].empty)return!1}return!1}function I($e,_e){for(let ae=_e-1;ae>=0;ae-=1){if($e[ae].right)return!0;if(!$e[ae].empty)return!1}return!1}function M($e,_e){for(let ae=0;ae<_e;ae+=1)if(!$e[ae].empty)return!1;return!0}function O($e,_e){for(let ae=0;ae<_e;ae+=1)if(!$e[ae].finite)return!1;return!0}function D($e,_e,ae,X){let F=0;const z=_e[ae],J=z.children.length,te=[];for(F=0;F<J;F+=1)te.push($e.attrGen());for(F=0;F<J;F+=1)U($e,_e,z.children[F],te[F]);X.left=B(te,J),X.right=I(te,J),X.nested=T(te,J),X.empty=M(te,J),X.finite=O(te,J),X.cyclic=A(te,J)}function L($e,_e,ae,X){let F=0;const z=_e[ae],J=z.children.length,te=[];for(F=0;F<J;F+=1)te.push($e.attrGen());for(F=0;F<J;F+=1)U($e,_e,z.children[F],te[F]);for(X.left=!1,X.right=!1,X.nested=!1,X.empty=!1,X.finite=!1,X.cyclic=!1,F=0;F<J;F+=1)te[F].left&&(X.left=!0),te[F].nested&&(X.nested=!0),te[F].right&&(X.right=!0),te[F].empty&&(X.empty=!0),te[F].finite&&(X.finite=!0),te[F].cyclic&&(X.cyclic=!0)}function V($e,_e,ae,X){const F=_e[ae];F.index>=$e.ruleCount?(X.empty=$e.udts[F.index-$e.ruleCount].empty,X.finite=!0):(q($e,F.index,X),X.left=!1,X.nested=!1,X.right=!1,X.cyclic=!1)}function U($e,_e,ae,X){$e.attrInit(X);const F=_e[ae];switch(F.type){case _.ALT:L($e,_e,ae,X);break;case _.CAT:D($e,_e,ae,X);break;case _.REP:U($e,_e,ae+1,X),F.min===0&&(X.empty=!0,X.finite=!0);break;case _.RNM:q($e,_e[ae].index,X);break;case _.BKR:V($e,_e,ae,X);break;case _.AND:case _.NOT:case _.BKA:case _.BKN:U($e,_e,ae+1,X),X.empty=!0;break;case _.TLS:X.empty=!_e[ae].string.length,X.finite=!0,X.cyclic=!1;break;case _.TBS:case _.TRG:X.empty=!1,X.finite=!0,X.cyclic=!1;break;case _.UDT:X.empty=F.empty,X.finite=!0,X.cyclic=!1;break;case _.ABG:case _.AEN:X.empty=!0,X.finite=!0,X.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${F}`)}}function q($e,_e,ae){const X=$e.attrsWorking[_e];X.isComplete?$e.attrCopy(ae,X):X.isOpen?_e===$e.startRule?_e===$e.startRule&&(ae.left=!0,ae.right=!0,ae.cyclic=!0,ae.leaf=!0):ae.finite=!0:(X.isOpen=!0,U($e,X.rule.opcodes,0,ae),X.left=ae.left,X.right=ae.right,X.nested=ae.nested,X.empty=ae.empty,X.finite=ae.finite,X.cyclic=ae.cyclic,X.leaf=!1,X.isOpen=!1,X.isComplete=!0)}const H=$e=>{E=$e;let _e=0,ae=0;const X=E.attrGen();for(_e=0;_e<E.ruleCount;_e+=1){for(ae=0;ae<E.ruleCount;ae+=1)E.attrInit(E.attrsWorking[ae]);E.startRule=_e,q(E,_e,X),E.attrCopy(E.attrs[_e],E.attrsWorking[_e])}E.attributesComplete=!0;let F=null;for(_e=0;_e<E.ruleCount;_e+=1)if(F=E.attrs[_e],F.left||!F.finite||F.cyclic){const z=E.attrGen(F.rule);E.attrCopy(z,F),E.attrsErrors.push(z),E.attrsErrorCount+=1}},W=$e=>$e?"t":"f",Q=$e=>$e?"e":"f",re=$e=>$e?"t":"e",ce=($e,_e,ae,X)=>{let F=`${$e}:${_e}:`;return F+=`${Q(ae.left)} `,F+=`${W(ae.nested)} `,F+=`${W(ae.right)} `,F+=`${Q(ae.cyclic)} `,F+=`${re(ae.finite)} `,F+=`${W(ae.empty)}:`,F+=`${E.typeToString(X.recursiveType)}:`,F+=X.recursiveType===_.ATTR_MR?X.groupNumber:"-",F+=`:${ae.rule.name}
`,F},ne=()=>{let $e=`LEGEND - t=true, f=false, e=error
`;return $e+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,$e},Y=()=>{let $e=null,_e=null,ae="";if(ae+=`RULE ATTRIBUTES WITH ERRORS
`,ae+=ne(),E.attrsErrorCount)for(let X=0;X<E.attrsErrorCount;X+=1)$e=E.attrsErrors[X],_e=E.ruleDeps[$e.rule.index],ae+=ce(X,$e.rule.index,$e,_e);else ae+=`<none>
`;return ae},fe=$e=>{let _e=0,ae=0,X=null,F=null,z="",{ruleIndexes:J}=E;for($e===97?J=E.ruleAlphaIndexes:$e===116&&(J=E.ruleTypeIndexes),_e=0;_e<E.ruleCount;_e+=1)ae=J[_e],X=E.attrs[ae],F=E.ruleDeps[ae],z+=ce(_e,ae,X,F);return z};return{ruleAttributes:H,showAttributes:($e="index")=>{if(!E.attributesComplete)throw new Error(`${x}:showAttributes: attributes not available`);let _e="";const ae=`RULE ATTRIBUTES
`;return $e.charCodeAt(0)===97?(_e+=`alphabetical by rule name
`,_e+=ae,_e+=ne(),_e+=fe(97)):$e.charCodeAt(0)===116?(_e+=`ordered by rule type
`,_e+=ae,_e+=ne(),_e+=fe(116)):(_e+=`ordered by rule index
`,_e+=ae,_e+=ne(),_e+=fe()),_e},showAttributeErrors:Y}}()),ruleAttributes}var ruleDependencies,hasRequiredRuleDependencies;function requireRuleDependencies(){return hasRequiredRuleDependencies||(hasRequiredRuleDependencies=1,ruleDependencies=(()=>{const n=requireIdentifiers();let _=null;const x=(T,A,B,I)=>{let M=0,O=0;const D=A[B];I[B]=!0;const L=D.rule.opcodes;for(M=0;M<L.length;M+=1){const V=L[M];if(V.type===n.RNM)for(D.refersTo[V.index]=!0,I[V.index]||x(T,A,V.index,I),O=0;O<T;O+=1)A[V.index].refersTo[O]&&(D.refersTo[O]=!0);else V.type===n.UDT?D.refersToUdt[V.index]=!0:V.type===n.BKR&&(V.index<T?(D.refersTo[V.index]=!0,I[V.index]||x(T,A,V.index,I)):D.refersToUdt[T-V.index]=!0)}},E=T=>{_=T;let A=0,B=0,I=0,M=null,O=null,D=!1;_.dependenciesComplete=!1;const L=_.falseArray(_.ruleCount);for(A=0;A<_.ruleCount;A+=1)_.falsifyArray(L),x(_.ruleCount,_.ruleDeps,A,L);for(A=0;A<_.ruleCount;A+=1)for(B=0;B<_.ruleCount;B+=1)A!==B&&_.ruleDeps[B].refersTo[A]&&(_.ruleDeps[A].referencedBy[B]=!0);for(A=0;A<_.ruleCount;A+=1)_.ruleDeps[A].recursiveType=n.ATTR_N,_.ruleDeps[A].refersTo[A]&&(_.ruleDeps[A].recursiveType=n.ATTR_R);for(I=-1,A=0;A<_.ruleCount;A+=1)if(M=_.ruleDeps[A],M.recursiveType===n.ATTR_R)for(D=!0,B=0;B<_.ruleCount;B+=1)A!==B&&(O=_.ruleDeps[B],O.recursiveType===n.ATTR_R&&M.refersTo[B]&&O.refersTo[A]&&(D&&(I+=1,M.recursiveType=n.ATTR_MR,M.groupNumber=I,D=!1),O.recursiveType=n.ATTR_MR,O.groupNumber=I));_.isMutuallyRecursive=I>-1,_.ruleAlphaIndexes.sort(_.compRulesAlpha),_.ruleTypeIndexes.sort(_.compRulesAlpha),_.ruleTypeIndexes.sort(_.compRulesType),_.isMutuallyRecursive&&_.ruleTypeIndexes.sort(_.compRulesGroup),_.udtCount&&_.udtAlphaIndexes.sort(_.compUdtsAlpha),_.dependenciesComplete=!0},S=(T=null)=>{let A=0,B=0,I=0,M=0;const O=_.ruleCount-1,D=_.udtCount-1,L=100;let V="",U="";const q="=> ",H="<= ";let W=!1,Q=null,{ruleIndexes:re}=_,{udtIndexes:ce}=_;for(T===97?(re=_.ruleAlphaIndexes,ce=_.udtAlphaIndexes):T===116&&(re=_.ruleTypeIndexes,ce=_.udtAlphaIndexes),A=0;A<_.ruleCount;A+=1){for(Q=_.ruleDeps[re[A]],U=`${re[A]}:${_.typeToString(Q.recursiveType)}:`,_.isMutuallyRecursive&&(U+=Q.groupNumber>-1?Q.groupNumber:"-",U+=":"),U+=" ",V+=`${U+_.rules[re[A]].name}
`,W=!0,I=0,M=V.length,V+=U,B=0;B<_.ruleCount;B+=1)Q.refersTo[re[B]]&&(W?(V+=q,W=!1,V+=_.ruleDeps[re[B]].rule.name):V+=`, ${_.ruleDeps[re[B]].rule.name}`,I+=1),V.length-M>L&&B!==O&&(V+=`
${U}${q}`,M=V.length);if(_.udtCount)for(B=0;B<_.udtCount;B+=1)Q.refersToUdt[ce[B]]&&(W?(V+=q,W=!1,V+=_.udts[ce[B]].name):V+=`, ${_.udts[ce[B]].name}`,I+=1),V.length-M>L&&B!==D&&(V+=`
${U}${q}`,M=V.length);for(I===0&&(V+=`=> <none>
`),W===!1&&(V+=`
`),W=!0,I=0,M=V.length,V+=U,B=0;B<_.ruleCount;B+=1)Q.referencedBy[re[B]]&&(W?(V+=H,W=!1,V+=_.ruleDeps[re[B]].rule.name):V+=`, ${_.ruleDeps[re[B]].rule.name}`,I+=1),V.length-M>L&&B!==O&&(V+=`
${U}${q}`,M=V.length);I===0&&(V+=`<= <none>
`),W===!1&&(V+=`
`),V+=`
`}return V};return{ruleDependencies:E,showRuleDependencies:(T="index")=>{let A=`RULE DEPENDENCIES(index:type:[group number:])
`;return A+=`=> refers to rule names
`,A+=`<= referenced by rule names
`,_.dependenciesComplete&&(T.charCodeAt(0)===97?(A+=`alphabetical by rule name
`,A+=S(97)):T.charCodeAt(0)===116?(A+=`ordered by rule type
`,A+=S(116)):(A+=`ordered by rule index
`,A+=S(null))),A}}})()),ruleDependencies}var attributes,hasRequiredAttributes;function requireAttributes(){return hasRequiredAttributes||(hasRequiredAttributes=1,attributes=function(){const _=requireIdentifiers(),{ruleAttributes:x,showAttributes:E,showAttributeErrors:S}=requireRuleAttributes(),{ruleDependencies:C,showRuleDependencies:T}=requireRuleDependencies();class A{constructor(M,O){this.rules=M,this.udts=O,this.ruleCount=M.length,this.udtCount=O.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let D=0;D<this.ruleCount;D+=1)this.attrs.push(this.attrGen(this.rules[D])),this.attrsWorking.push(this.attrGen(this.rules[D])),this.ruleDeps.push(this.rdGen(M[D],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(M){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:M}}attrInit(M){M.left=!1,M.nested=!1,M.right=!1,M.empty=!1,M.finite=!1,M.cyclic=!1,M.leaf=!1,M.isOpen=!1,M.isComplete=!1}attrCopy(M,O){M.left=O.left,M.nested=O.nested,M.right=O.right,M.empty=O.empty,M.finite=O.finite,M.cyclic=O.cyclic,M.leaf=O.leaf,M.isOpen=O.isOpen,M.isComplete=O.isComplete,M.rule=O.rule}rdGen(M,O,D){return{rule:M,recursiveType:_.ATTR_N,groupNumber:-1,refersTo:this.falseArray(O),refersToUdt:this.falseArray(D),referencedBy:this.falseArray(O)}}typeToString(M){switch(M){case _.ATTR_N:return" N";case _.ATTR_R:return" R";case _.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(M){const O=[];if(M>0)for(let D=0;D<M;D+=1)O.push(!1);return O}falsifyArray(M){for(let O=0;O<M.length;O+=1)M[O]=!1}indexArray(M){const O=[];if(M>0)for(let D=0;D<M;D+=1)O.push(D);return O}compRulesAlpha(M,O){return this.rules[M].lower<this.rules[O].lower?-1:this.rules[M].lower>this.rules[O].lower?1:0}compUdtsAlpha(M,O){return this.udts[M].lower<this.udts[O].lower?-1:this.udts[M].lower>this.udts[O].lower?1:0}compRulesType(M,O){return this.ruleDeps[M].recursiveType<this.ruleDeps[O].recursiveType?-1:this.ruleDeps[M].recursiveType>this.ruleDeps[O].recursiveType?1:0}compRulesGroup(M,O){if(this.ruleDeps[M].recursiveType===_.ATTR_MR&&this.ruleDeps[O].recursiveType===_.ATTR_MR){if(this.ruleDeps[M].groupNumber<this.ruleDeps[O].groupNumber)return-1;if(this.ruleDeps[M].groupNumber>this.ruleDeps[O].groupNumber)return 1}return 0}}return{attributes:function(M=[],O=[],D=[],L=[]){const V=new A(M,O);return C(V),x(V),V.attrsErrorCount&&L.push({line:0,char:0,msg:`${V.attrsErrorCount} attribute errors`}),V.attrsErrorCount},showAttributes:E,showAttributeErrors:S,showRuleDependencies:T}}()),attributes}var showRules,hasRequiredShowRules;function requireShowRules(){return hasRequiredShowRules||(hasRequiredShowRules=1,showRules=function(){const _="show-rules.js";return function(S=[],C=[],T="index"){const A="showRules";let B=[],I=[];const M=[],O=[],D=S,L=C,V=S.length,U=C.length;let q="RULE/UDT NAMES",H;function W(re,ce){return D[re].lower<D[ce].lower?-1:D[re].lower>D[ce].lower?1:0}function Q(re,ce){return L[re].lower<L[ce].lower?-1:L[re].lower>L[ce].lower?1:0}if(!(Array.isArray(S)&&S.length))throw new Error(`${_}:${A}: rules arg must be array with length > 0`);if(!Array.isArray(C))throw new Error(`${_}:${A}: udts arg must be array`);for(H=0;H<V;H+=1)M.push(H);if(B=M.slice(0),B.sort(W),U){for(H=0;H<U;H+=1)O.push(H);I=O.slice(0),I.sort(Q)}if(T.charCodeAt(0)===97){for(q+=` - alphabetical by rule/UDT name
`,H=0;H<V;H+=1)q+=`${H}: ${B[H]}: ${D[B[H]].name}
`;if(U)for(H=0;H<U;H+=1)q+=`${H}: ${I[H]}: ${L[I[H]].name}
`}else{for(q+=` - ordered by rule/UDT index
`,H=0;H<V;H+=1)q+=`${H}: ${D[H].name}
`;if(U)for(H=0;H<U;H+=1)q+=`${H}: ${L[H].name}
`}return q}}()),showRules}var api=function n(_){const{Buffer:x}=buffer$3,E="api.js: ",S=this,C=requireNodeExports(),T=requireConverter(),A=requireScanner(),B=new(requireParser()),{attributes:I,showAttributes:M,showAttributeErrors:O,showRuleDependencies:D}=requireAttributes(),L=requireShowRules(),V=function(_e,ae,X){const te=`<span class="${C.style.CLASS_CTRLCHAR}">`,se="</span>",oe=`<span class="${C.style.CLASS_NOMATCH}">`,ie="</span>";let G,j="";const ee=!0;for(;ee&&!(!Array.isArray(_e)||_e.length===0);){if(typeof ae!="number")throw new Error("abnfToHtml: beg must be type number");if(ae>=_e.length)break;typeof X!="number"||ae+X>=_e.length?G=_e.length:G=ae+X;let pe=0;for(let he=ae;he<G;he+=1){const Se=_e[he];if(Se>=32&&Se<=126)switch(pe===1?(j+=se,pe=0):pe===2&&(j+=ie,pe=0),Se){case 32:j+="&nbsp;";break;case 60:j+="&lt;";break;case 62:j+="&gt;";break;case 38:j+="&amp;";break;case 34:j+="&quot;";break;case 39:j+="&#039;";break;case 92:j+="&#092;";break;default:j+=String.fromCharCode(Se);break}else Se===9||Se===10||Se===13?(pe===0?(j+=te,pe=1):pe===2&&(j+=ie+te,pe=1),Se===9&&(j+="TAB"),Se===10&&(j+="LF"),Se===13&&(j+="CR")):(pe===0?(j+=oe,pe=2):pe===1&&(j+=se+oe,pe=2),j+=`\\x${C.utils.charToHex(Se)}`)}pe===2&&(j+=ie),pe===1&&(j+=se);break}return j},U=function(_e,ae,X){let F="";for(let z=ae;z<ae+X;z+=1){const J=_e[z];if(J>=32&&J<=126)F+=String.fromCharCode(J);else switch(J){case 9:F+="\\t";break;case 10:F+="\\n";break;case 13:F+="\\r";break;default:F+="\\unknown";break}}return F},q=function(_e){let ae="Annotated Input Grammar";return _e.forEach(X=>{ae+=`
`,ae+=`line no: ${X.lineNo}`,ae+=` : char index: ${X.beginChar}`,ae+=` : length: ${X.length}`,ae+=` : abnf: ${U(S.chars,X.beginChar,X.length)}`}),ae+=`
`,ae},H=function(_e){let ae="";return ae+=`<table class="${C.style.CLASS_GRAMMAR}">
`,ae+=`<caption>Annotated Input Grammar</caption>
`,ae+="<tr>",ae+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",ae+=`</tr>
`,_e.forEach(F=>{ae+="<tr>",ae+=`<td>${F.lineNo}`,ae+=`</td><td>${F.beginChar}`,ae+=`</td><td>${F.length}`,ae+=`</td><td>${V(S.chars,F.beginChar,F.length)}`,ae+="</td>",ae+=`</tr>
`}),ae+=`</table>
`,ae},W=function(_e,ae,X,F){const[z]=C;let J="";const te=`<span class="${z.CLASS_NOMATCH}">&raquo;</span>`;return J+=`<p><table class="${z.CLASS_GRAMMAR}">
`,F&&typeof F=="string"&&(J+=`<caption>${F}</caption>
`),J+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,_e.forEach(se=>{let oe,ie,G,j,ee,pe="",he="";ae.length===0?(ee=te,ie=0):(oe=ae[se.line],G=oe.beginChar,se.char>G&&(pe=V(X,G,se.char-G)),G=se.char,j=oe.beginChar+oe.length,G<j&&(he=V(X,G,j-G)),ee=pe+te+he,ie=se.char-oe.beginChar,J+="<tr>",J+=`<td>${se.line}</td><td>${oe.beginChar}</td><td>${ie}</td><td>${ee}</td>`,J+=`</tr>
`,J+="<tr>",J+=`<td colspan="3"></td><td>&uarr;:&nbsp;${C.utils.stringToAsciiHtml(se.msg)}</td>`,J+=`</tr>
`)}),J+=`</table></p>
`,J},Q=function(_e,ae,X){let F,z,J,te;return F="",_e.forEach(se=>{z=ae[se.line],F+=`${z.lineNo}: `,F+=`${z.beginChar}: `,F+=`${se.char-z.beginChar}: `,J=z.beginChar,te=se.char-z.beginChar,F+=U(X,J,te),F+=" >> ",J=se.char,te=z.beginChar+z.length-se.char,F+=U(X,J,te),F+=`
`,F+=`${z.lineNo}: `,F+=`${z.beginChar}: `,F+=`${se.char-z.beginChar}: `,F+="error: ",F+=se.msg,F+=`
`}),F};let re=!1,ce=!1,ne=!1,Y=!1,fe=0,ge;if(this.errors=[],x.isBuffer(_))this.chars=T.decode("BINARY",_);else if(Array.isArray(_))this.chars=_.slice();else if(typeof _=="string")this.chars=T.decode("STRING",_);else throw new Error(`${E}input source is not a string, byte Buffer or character array`);this.sabnf=T.encode("STRING",this.chars),this.scan=function(_e,ae){this.lines=A(this.chars,this.errors,_e,ae),re=!0},this.parse=function(_e,ae){if(!re)throw new Error(`${E}grammar not scanned`);B.syntax(this.chars,this.lines,this.errors,_e,ae),ce=!0},this.translate=function(){if(!ce)throw new Error(`${E}grammar not scanned and parsed`);const _e=B.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=_e.rules,this.udts=_e.udts,ge=_e.lineMap,ne=!0)},this.attributes=function(){if(!ne)throw new Error(`${E}grammar not scanned, parsed and translated`);return fe=I(this.rules,this.udts,ge,this.errors),Y=!0,fe},this.generate=function(_e){if(this.lines=A(this.chars,this.errors,_e),this.errors.length||(B.syntax(this.chars,this.lines,this.errors,_e),this.errors.length))return;const ae=B.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=ae.rules,this.udts=ae.udts,ge=ae.lineMap,fe=I(this.rules,this.udts,ge,this.errors),Y=!0)},this.displayRules=function(_e="index"){if(!ne)throw new Error(`${E}grammar not scanned, parsed and translated`);return L(this.rules,this.udts,_e)},this.displayRuleDependencies=function(_e="index"){if(!Y)throw new Error(`${E}no attributes - must be preceeded by call to attributes()`);return D(_e)},this.displayAttributes=function(_e="index"){if(!Y)throw new Error(`${E}no attributes - must be preceeded by call to attributes()`);return fe&&O(_e),M(_e)},this.displayAttributeErrors=function(){if(!Y)throw new Error(`${E}no attributes - must be preceeded by call to attributes()`);return O()},this.toSource=function(_e){if(!Y)throw new Error(`${E}can't generate parser source - must be preceeded by call to attributes()`);if(fe)throw new Error(`${E}can't generate parser source - attributes have ${fe} errors`);return B.generateSource(this.chars,this.lines,this.rules,this.udts,_e)},this.toObject=function(){if(!Y)throw new Error(`${E}can't generate parser source - must be preceeded by call to attributes()`);if(fe)throw new Error(`${E}can't generate parser source - attributes have ${fe} errors`);return B.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return Q(this.errors,this.lines,this.chars)},this.errorsToHtml=function(_e){return W(this.errors,this.lines,this.chars,_e)},this.linesToAscii=function(){return q(this.lines)},this.linesToHtml=function(){return H(this.lines)}};const apgApi=getDefaultExportFromCjs(api);var nodeExportsExports=requireNodeExports();const apgLib=getDefaultExportFromCjs(nodeExportsExports),GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class ParsedMessage{constructor(_){const x=new apgApi(GRAMMAR);if(x.generate(),x.errors.length)throw console.error(x.errorsToAscii()),console.error(x.linesToAscii()),console.log(x.displayAttributeErrors()),new Error("ABNF grammar has errors");const E=x.toObject(),S=new apgLib.parser;S.ast=new apgLib.ast;const C=apgLib.ids,T=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.domain=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks.domain=T;const A=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.address=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks.address=A;const B=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.statement=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks.statement=B;const I=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.uri||(fe.uri=apgLib.utils.charsToString(ce,ne,Y))),ge};S.ast.callbacks.uri=I;const M=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.version=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks.version=M;const O=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.chainId=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks["chain-id"]=O;const D=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.nonce=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks.nonce=D;const L=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.issuedAt=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks["issued-at"]=L;const V=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.expirationTime=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks["expiration-time"]=V;const U=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.notBefore=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks["not-before"]=U;const q=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.requestId=apgLib.utils.charsToString(ce,ne,Y)),ge};S.ast.callbacks["request-id"]=q;const H=function(re,ce,ne,Y,fe){const ge=C.SEM_OK;return re===C.SEM_PRE&&(fe.resources=apgLib.utils.charsToString(ce,ne,Y).slice(3).split(`
- `)),ge};S.ast.callbacks.resources=H;const W=S.parse(E,"sign-in-with-ethereum",_);if(!W.success)throw new Error(`Invalid message: ${JSON.stringify(W)}`);const Q={};S.ast.translate(Q);for(const[re,ce]of Object.entries(Q))this[re]=ce}}function _extends(){return _extends=Object.assign||function(n){for(var _=1;_<arguments.length;_++){var x=arguments[_];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(n[E]=x[E])}return n},_extends.apply(this,arguments)}var CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP10={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},AssetName$1={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},CAIP19AssetType={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1}}},CAIP19AssetId={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP={2:CAIP2,10:CAIP10,19:{assetName:AssetName$1,assetType:CAIP19AssetType,assetId:CAIP19AssetId}};function splitParams(n,_){return n.split(_.parameters.delimiter)}function getParams(n,_){var x=splitParams(n,_),E={};return x.forEach(function(S,C){E[_.parameters.values[C].name]=S}),E}function joinParams(n,_){return Object.values(_.parameters.values).map(function(x){var E=n[x.name];return typeof E=="string"?E:joinParams(E,x)}).join(_.parameters.delimiter)}function isValidId(n,_){if(!new RegExp(_.regex).test(n))return!1;var x=splitParams(n,_);if(x.length!==Object.keys(_.parameters.values).length)return!1;var E=x.map(function(S,C){return new RegExp(_.parameters.values[C].regex).test(S)}).filter(function(S){return!!S});return E.length===x.length}var ChainId=function(){function n(x){typeof x=="string"&&(x=n.parse(x)),this.namespace=x.namespace,this.reference=x.reference}n.parse=function(E){if(!isValidId(E,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+E);return new n(getParams(E,this.spec)).toJSON()},n.format=function(E){return joinParams(E,this.spec)};var _=n.prototype;return _.toString=function(){return n.format(this.toJSON())},_.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},n}();ChainId.spec=CAIP[2];var AccountId=function(){function n(x){typeof x=="string"&&(x=n.parse(x)),this.chainId=new ChainId(x.chainId),this.address=x.address}n.parse=function(E){if(!isValidId(E,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+E);var S=getParams(E,this.spec),C=S.namespace,T=S.reference,A=S.address,B=new ChainId({namespace:C,reference:T});return new n({chainId:B,address:A}).toJSON()},n.format=function(E){var S=new ChainId(E.chainId),C=_extends({},S.toJSON(),{address:E.address});return joinParams(C,this.spec)};var _=n.prototype;return _.toString=function(){return n.format(this.toJSON())},_.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},n}();AccountId.spec=CAIP[10];var ErrorTypes;(function(n){n.INVALID_SIGNATURE="Invalid signature.",n.EXPIRED_MESSAGE="Expired message.",n.MALFORMED_SESSION="Malformed session."})(ErrorTypes||(ErrorTypes={}));var SignatureType;(function(n){n.PERSONAL_SIGNATURE="Personal signature"})(SignatureType||(SignatureType={}));class SiwxMessage{static fromCacao(_){const x=AccountId.parse(_.p.iss.replace("did:pkh:","")),E=new this({domain:_.p.domain,address:x.address,uri:_.p.aud,version:_.p.version,chainId:new ChainId(x.chainId).reference});return _.p.statement&&(E.statement=_.p.statement),_.p.nonce&&(E.nonce=_.p.nonce),_.p.iat&&(E.issuedAt=_.p.iat),_.p.exp&&(E.expirationTime=_.p.exp),_.p.nbf&&(E.notBefore=_.p.nbf),_.p.requestId&&(E.requestId=_.p.requestId),_.p.resources&&(E.resources=_.p.resources),_.s&&(_.s.s&&(E.signature=_.s.s),_.s.t==="eip191"&&(E.type=SignatureType.PERSONAL_SIGNATURE)),E}toMessage(_){return asString(this,_)}constructor(_){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof _=="string"){const x=new ParsedMessage(_);this.domain=x.domain,this.address=x.address,this.statement=x.statement,this.uri=x.uri,this.version=x.version,this.nonce=x.nonce,this.issuedAt=x.issuedAt,this.expirationTime=x.expirationTime,this.notBefore=x.notBefore,this.requestId=x.requestId,this.chainId=x.chainId,this.resources=x.resources}else Object.assign(this,_)}}function asLegacyChainIdString(n,_){const x=`${n.domain} wants you to sign in with your ${_} account:`,E=`URI: ${n.uri}`;let S=[x,n.address].join(`
`);const C=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));const T=`Nonce: ${n.nonce}`,A=[E,C,T];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),A.push(`Issued At: ${n.issuedAt}`),n.expirationTime){const I=`Expiration Time: ${n.expirationTime}`;A.push(I)}n.notBefore&&A.push(`Not Before: ${n.notBefore}`),n.requestId&&A.push(`Request ID: ${n.requestId}`),n.chainId&&A.push(`Chain ID: ${n.chainId}`),n.resources&&A.push(["Resources:",...n.resources.map(I=>`- ${I}`)].join(`
`));const B=A.join(`
`);return n.statement&&(S=[S,n.statement].join(`

`)),[S,B].join(`

`)}function asString(n,_){const x=`${n.domain} wants you to sign in with your ${_} account:`,E=`URI: ${n.uri}`;let S=[x,n.address].join(`
`);const C=`Version: ${n.version}`;n.nonce||(n.nonce=(Math.random()+1).toString(36).substring(4));const T=`Nonce: ${n.nonce}`,A=`Chain ID: ${n.chainId}`,B=[E,C,A,T];if(n.issuedAt&&Date.parse(n.issuedAt),n.issuedAt=n.issuedAt?n.issuedAt:new Date().toISOString(),B.push(`Issued At: ${n.issuedAt}`),n.expirationTime){const M=`Expiration Time: ${n.expirationTime}`;B.push(M)}n.notBefore&&B.push(`Not Before: ${n.notBefore}`),n.requestId&&B.push(`Request ID: ${n.requestId}`),n.resources&&n.resources.length>=1&&B.push(["Resources:",...n.resources.map(M=>`- ${M}`)].join(`
`));const I=B.join(`
`);return n.statement&&(S=[S,n.statement].join(`

`)),[S,I].join(`

`)}class SiweMessage extends SiwxMessage{toMessage(){return super.toMessage("Ethereum")}signMessage(){let _;switch(this.type){case SignatureType.PERSONAL_SIGNATURE:{_=this.toMessage();break}default:{_=this.toMessage();break}}return _}}const CID_CBOR_TAG=42;function cidEncoder(n){if(n.asCID!==n)return null;const _=CID$3.asCID(n);if(!_)return null;const x=new Uint8Array(_.bytes.byteLength+1);return x.set(_.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,x)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(n.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code$2=113,encode$7=n=>encode$9(n,encodeOptions),decode$4=n=>decode$6(n,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$4,encode:encode$7,name},Symbol.toStringTag,{value:"Module"})),CLOCK_SKEW_DEFAULT_SEC=5*60;new Date("2022-09-20").valueOf();var Cacao;(function(n){function _(A){const B={h:{t:"eip4361"},p:{domain:A.domain,iat:A.issuedAt,iss:`did:pkh:eip155:${A.chainId}:${A.address}`,aud:A.uri,version:A.version,nonce:A.nonce}};return A.signature&&(B.s={t:"eip191",s:A.signature}),A.notBefore&&(B.p.nbf=A.notBefore),A.expirationTime&&(B.p.exp=A.expirationTime),A.statement&&(B.p.statement=A.statement),A.requestId&&(B.p.requestId=A.requestId),A.resources&&(B.p.resources=A.resources),B}n.fromSiweMessage=_;function x(A){const B={h:{t:"caip122"},p:{domain:A.domain,iat:A.issuedAt,iss:`did:pkh:solana:${A.chainId}:${A.address}`,aud:A.uri,version:A.version,nonce:A.nonce}};return A.signature&&(B.s={t:"solana:ed25519",s:A.signature}),A.notBefore&&(B.p.nbf=A.notBefore),A.expirationTime&&(B.p.exp=A.expirationTime),A.statement&&(B.p.statement=A.statement),A.requestId&&(B.p.requestId=A.requestId),A.resources&&(B.p.resources=A.resources),B}n.fromSiwsMessage=x;function E(A){const B={h:{t:"caip122"},p:{domain:A.domain,iat:A.issuedAt,iss:`did:pkh:tezos:${A.chainId}:${A.address}`,aud:A.uri,version:A.version,nonce:A.nonce}};return A.signature&&(B.s={t:"tezos:ed25519",s:A.signature}),A.notBefore&&(B.p.nbf=A.notBefore),A.expirationTime&&(B.p.exp=A.expirationTime),A.statement&&(B.p.statement=A.statement),A.requestId&&(B.p.requestId=A.requestId),A.resources&&(B.p.resources=A.resources),B}n.fromSiwTezosMessage=E;function S(A){const B={h:{t:"caip122"},p:{domain:A.domain,iat:A.issuedAt,iss:`did:pkh:stacks:${A.chainId}:${A.address}`,aud:A.uri,version:A.version,nonce:A.nonce}};return A.signature&&(B.s={t:"stacks:secp256k1",s:A.signature}),A.notBefore&&(B.p.nbf=A.notBefore),A.expirationTime&&(B.p.exp=A.expirationTime),A.statement&&(B.p.statement=A.statement),A.requestId&&(B.p.requestId=A.requestId),A.resources&&(B.p.resources=A.resources),B}n.fromSiwStacksMessage=S;async function C(A){return(await decode$7({bytes:A,codec:dagCbor,hasher:sha256$5})).value}n.fromBlockBytes=C;async function T(A,B={}){assertSigned(A);const I=B.verifiers[A.s.t];if(!I)throw new Error("Unsupported CACAO signature type, register the needed verifier");return I(A,B)}n.verify=T})(Cacao||(Cacao={}));var CacaoBlock;(function(n){function _(x){return encode$a({value:x,codec:dagCbor,hasher:sha256$5})}n.fromCacao=_})(CacaoBlock||(CacaoBlock={}));function assertSigned(n){if(n.s===null||n.s===void 0)throw new Error("CACAO does not have a signature")}function verifyTimeChecks(n,_){const x=_.atTime?_.atTime.getTime():Date.now(),E=(_.clockSkewSecs??CLOCK_SKEW_DEFAULT_SEC)*1e3;if(Date.parse(n.p.iat)>x+E||Date.parse(n.p.nbf)>x+E)throw new Error("CACAO is not valid yet");const S=_.revocationPhaseOutSecs?_.revocationPhaseOutSecs*1e3:0;if(!_.disableExpirationCheck&&Date.parse(n.p.exp)+S+E<x)throw new Error("CACAO has expired")}const version$h="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(_=>{try{if("test".normalize(_)!=="test")throw new Error("bad normalize")}catch{n.push(_)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(_){Object.defineProperty(this,"version",{enumerable:!0,value:_,writable:!1})}_log(_,x){const E=_.toLowerCase();LogLevels[E]==null&&this.throwArgumentError("invalid log level name","logLevel",_),!(_logLevel>LogLevels[E])&&console.log.apply(console,x)}debug(..._){this._log(Logger.levels.DEBUG,_)}info(..._){this._log(Logger.levels.INFO,_)}warn(..._){this._log(Logger.levels.WARNING,_)}makeError(_,x,E){if(_censorErrors)return this.makeError("censored error",x,{});x||(x=Logger.errors.UNKNOWN_ERROR),E||(E={});const S=[];Object.keys(E).forEach(B=>{const I=E[B];try{if(I instanceof Uint8Array){let M="";for(let O=0;O<I.length;O++)M+=HEX[I[O]>>4],M+=HEX[I[O]&15];S.push(B+"=Uint8Array(0x"+M+")")}else S.push(B+"="+JSON.stringify(I))}catch{S.push(B+"="+JSON.stringify(E[B].toString()))}}),S.push(`code=${x}`),S.push(`version=${this.version}`);const C=_;let T="";switch(x){case ErrorCode.NUMERIC_FAULT:{T="NUMERIC_FAULT";const B=_;switch(B){case"overflow":case"underflow":case"division-by-zero":T+="-"+B;break;case"negative-power":case"negative-width":T+="-unsupported";break;case"unbound-bitwise-result":T+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:T=x;break}T&&(_+=" [ See: https://links.ethers.org/v5-errors-"+T+" ]"),S.length&&(_+=" ("+S.join(", ")+")");const A=new Error(_);return A.reason=C,A.code=x,Object.keys(E).forEach(function(B){A[B]=E[B]}),A}throwError(_,x,E){throw this.makeError(_,x,E)}throwArgumentError(_,x,E){return this.throwError(_,Logger.errors.INVALID_ARGUMENT,{argument:x,value:E})}assert(_,x,E,S){_||this.throwError(x,E,S)}assertArgument(_,x,E,S){_||this.throwArgumentError(x,E,S)}checkNormalize(_){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(_,x){typeof _=="number"&&(x==null&&(x="value not safe"),(_<0||_>=9007199254740991)&&this.throwError(x,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:_}),_%1&&this.throwError(x,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:_}))}checkArgumentCount(_,x,E){E?E=": "+E:E="",_<x&&this.throwError("missing argument"+E,Logger.errors.MISSING_ARGUMENT,{count:_,expectedCount:x}),_>x&&this.throwError("too many arguments"+E,Logger.errors.UNEXPECTED_ARGUMENT,{count:_,expectedCount:x})}checkNew(_,x){(_===Object||_==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:x.name})}checkAbstract(_,x){_===x?this.throwError("cannot instantiate abstract class "+JSON.stringify(x.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:_.name,operation:"new"}):(_===Object||_==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:x.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$h)),_globalLogger}static setCensorship(_,x){if(!_&&x&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!_)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!_,_permanentCensorErrors=!!x}static setLogLevel(_){const x=LogLevels[_.toLowerCase()];if(x==null){Logger.globalLogger().warn("invalid log level - "+_);return}_logLevel=x}static from(_){return new Logger(_)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$g="bytes/5.7.0",logger$k=new Logger(version$g);function isHexable(n){return!!n.toHexString}function addSlice(n){return n.slice||(n.slice=function(){const _=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(n,_)))}),n}function isBytesLike(n){return isHexString(n)&&!(n.length%2)||isBytes(n)}function isInteger(n){return typeof n=="number"&&n==n&&n%1===0}function isBytes(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!isInteger(n.length)||n.length<0)return!1;for(let _=0;_<n.length;_++){const x=n[_];if(!isInteger(x)||x<0||x>=256)return!1}return!0}function arrayify(n,_){if(_||(_={}),typeof n=="number"){logger$k.checkSafeUint53(n,"invalid arrayify value");const x=[];for(;n;)x.unshift(n&255),n=parseInt(String(n/256));return x.length===0&&x.push(0),addSlice(new Uint8Array(x))}if(_.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),isHexable(n)&&(n=n.toHexString()),isHexString(n)){let x=n.substring(2);x.length%2&&(_.hexPad==="left"?x="0"+x:_.hexPad==="right"?x+="0":logger$k.throwArgumentError("hex data is odd-length","value",n));const E=[];for(let S=0;S<x.length;S+=2)E.push(parseInt(x.substring(S,S+2),16));return addSlice(new Uint8Array(E))}return isBytes(n)?addSlice(new Uint8Array(n)):logger$k.throwArgumentError("invalid arrayify value","value",n)}function concat$1(n){const _=n.map(S=>arrayify(S)),x=_.reduce((S,C)=>S+C.length,0),E=new Uint8Array(x);return _.reduce((S,C)=>(E.set(C,S),S+C.length),0),addSlice(E)}function stripZeros(n){let _=arrayify(n);if(_.length===0)return _;let x=0;for(;x<_.length&&_[x]===0;)x++;return x&&(_=_.slice(x)),_}function zeroPad(n,_){n=arrayify(n),n.length>_&&logger$k.throwArgumentError("value out of range","value",arguments[0]);const x=new Uint8Array(_);return x.set(n,_-n.length),addSlice(x)}function isHexString(n,_){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||_&&n.length!==2+2*_)}const HexCharacters="0123456789abcdef";function hexlify(n,_){if(_||(_={}),typeof n=="number"){logger$k.checkSafeUint53(n,"invalid hexlify value");let x="";for(;n;)x=HexCharacters[n&15]+x,n=Math.floor(n/16);return x.length?(x.length%2&&(x="0"+x),"0x"+x):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(_.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),isHexable(n))return n.toHexString();if(isHexString(n))return n.length%2&&(_.hexPad==="left"?n="0x0"+n.substring(2):_.hexPad==="right"?n+="0":logger$k.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(isBytes(n)){let x="0x";for(let E=0;E<n.length;E++){let S=n[E];x+=HexCharacters[(S&240)>>4]+HexCharacters[S&15]}return x}return logger$k.throwArgumentError("invalid hexlify value","value",n)}function hexDataLength(n){if(typeof n!="string")n=hexlify(n);else if(!isHexString(n)||n.length%2)return null;return(n.length-2)/2}function hexDataSlice(n,_,x){return typeof n!="string"?n=hexlify(n):(!isHexString(n)||n.length%2)&&logger$k.throwArgumentError("invalid hexData","value",n),_=2+2*_,x!=null?"0x"+n.substring(_,2+2*x):"0x"+n.substring(_)}function hexConcat(n){let _="0x";return n.forEach(x=>{_+=hexlify(x).substring(2)}),_}function hexZeroPad(n,_){for(typeof n!="string"?n=hexlify(n):isHexString(n)||logger$k.throwArgumentError("invalid hex string","value",n),n.length>2*_+2&&logger$k.throwArgumentError("value out of range","value",arguments[1]);n.length<2*_+2;)n="0x0"+n.substring(2);return n}function splitSignature(n){const _={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(n)){let x=arrayify(n);x.length===64?(_.v=27+(x[32]>>7),x[32]&=127,_.r=hexlify(x.slice(0,32)),_.s=hexlify(x.slice(32,64))):x.length===65?(_.r=hexlify(x.slice(0,32)),_.s=hexlify(x.slice(32,64)),_.v=x[64]):logger$k.throwArgumentError("invalid signature string","signature",n),_.v<27&&(_.v===0||_.v===1?_.v+=27:logger$k.throwArgumentError("signature invalid v byte","signature",n)),_.recoveryParam=1-_.v%2,_.recoveryParam&&(x[32]|=128),_._vs=hexlify(x.slice(32,64))}else{if(_.r=n.r,_.s=n.s,_.v=n.v,_.recoveryParam=n.recoveryParam,_._vs=n._vs,_._vs!=null){const S=zeroPad(arrayify(_._vs),32);_._vs=hexlify(S);const C=S[0]>=128?1:0;_.recoveryParam==null?_.recoveryParam=C:_.recoveryParam!==C&&logger$k.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),S[0]&=127;const T=hexlify(S);_.s==null?_.s=T:_.s!==T&&logger$k.throwArgumentError("signature v mismatch _vs","signature",n)}if(_.recoveryParam==null)_.v==null?logger$k.throwArgumentError("signature missing v and recoveryParam","signature",n):_.v===0||_.v===1?_.recoveryParam=_.v:_.recoveryParam=1-_.v%2;else if(_.v==null)_.v=27+_.recoveryParam;else{const S=_.v===0||_.v===1?_.v:1-_.v%2;_.recoveryParam!==S&&logger$k.throwArgumentError("signature recoveryParam mismatch v","signature",n)}_.r==null||!isHexString(_.r)?logger$k.throwArgumentError("signature missing or invalid r","signature",n):_.r=hexZeroPad(_.r,32),_.s==null||!isHexString(_.s)?logger$k.throwArgumentError("signature missing or invalid s","signature",n):_.s=hexZeroPad(_.s,32);const x=arrayify(_.s);x[0]>=128&&logger$k.throwArgumentError("signature s out of range","signature",n),_.recoveryParam&&(x[0]|=128);const E=hexlify(x);_._vs&&(isHexString(_._vs)||logger$k.throwArgumentError("signature invalid _vs","signature",n),_._vs=hexZeroPad(_._vs,32)),_._vs==null?_._vs=E:_._vs!==E&&logger$k.throwArgumentError("signature _vs mismatch v and s","signature",n)}return _.yParityAndS=_._vs,_.compact=_.r+_.yParityAndS.substring(2),_}function joinSignature(n){return n=splitSignature(n),hexlify(concat$1([n.r,n.s,n.recoveryParam?"0x1c":"0x1b"]))}var bn$1={exports:{}};bn$1.exports;(function(n){(function(_,x){function E(X,F){if(!X)throw new Error(F||"Assertion failed")}function S(X,F){X.super_=F;var z=function(){};z.prototype=F.prototype,X.prototype=new z,X.prototype.constructor=X}function C(X,F,z){if(C.isBN(X))return X;this.negative=0,this.words=null,this.length=0,this.red=null,X!==null&&((F==="le"||F==="be")&&(z=F,F=10),this._init(X||0,F||10,z||"be"))}typeof _=="object"?_.exports=C:x.BN=C,C.BN=C,C.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=require$$0$2.Buffer}catch{}C.isBN=function(F){return F instanceof C?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===C.wordSize&&Array.isArray(F.words)},C.max=function(F,z){return F.cmp(z)>0?F:z},C.min=function(F,z){return F.cmp(z)<0?F:z},C.prototype._init=function(F,z,J){if(typeof F=="number")return this._initNumber(F,z,J);if(typeof F=="object")return this._initArray(F,z,J);z==="hex"&&(z=16),E(z===(z|0)&&z>=2&&z<=36),F=F.toString().replace(/\s+/g,"");var te=0;F[0]==="-"&&(te++,this.negative=1),te<F.length&&(z===16?this._parseHex(F,te,J):(this._parseBase(F,z,te),J==="le"&&this._initArray(this.toArray(),z,J)))},C.prototype._initNumber=function(F,z,J){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},C.prototype._initArray=function(F,z,J){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se,oe,ie=0;if(J==="be")for(te=F.length-1,se=0;te>=0;te-=3)oe=F[te]|F[te-1]<<8|F[te-2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);else if(J==="le")for(te=0,se=0;te<F.length;te+=3)oe=F[te]|F[te+1]<<8|F[te+2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);return this._strip()};function A(X,F){var z=X.charCodeAt(F);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;E(!1,"Invalid character in "+X)}function B(X,F,z){var J=A(X,z);return z-1>=F&&(J|=A(X,z-1)<<4),J}C.prototype._parseHex=function(F,z,J){this.length=Math.ceil((F.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se=0,oe=0,ie;if(J==="be")for(te=F.length-1;te>=z;te-=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8;else{var G=F.length-z;for(te=G%2===0?z+1:z;te<F.length;te+=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8}this._strip()};function I(X,F,z,J){for(var te=0,se=0,oe=Math.min(X.length,z),ie=F;ie<oe;ie++){var G=X.charCodeAt(ie)-48;te*=J,G>=49?se=G-49+10:G>=17?se=G-17+10:se=G,E(G>=0&&se<J,"Invalid character"),te+=se}return te}C.prototype._parseBase=function(F,z,J){this.words=[0],this.length=1;for(var te=0,se=1;se<=67108863;se*=z)te++;te--,se=se/z|0;for(var oe=F.length-J,ie=oe%te,G=Math.min(oe,oe-ie)+J,j=0,ee=J;ee<G;ee+=te)j=I(F,ee,ee+te,z),this.imuln(se),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(ie!==0){var pe=1;for(j=I(F,ee,F.length,z),ee=0;ee<ie;ee++)pe*=z;this.imuln(pe),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this._strip()},C.prototype.copy=function(F){F.words=new Array(this.length);for(var z=0;z<this.length;z++)F.words[z]=this.words[z];F.length=this.length,F.negative=this.negative,F.red=this.red};function M(X,F){X.words=F.words,X.length=F.length,X.negative=F.negative,X.red=F.red}if(C.prototype._move=function(F){M(F,this)},C.prototype.clone=function(){var F=new C(null);return this.copy(F),F},C.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},C.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},C.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{C.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{C.prototype.inspect=O}else C.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];C.prototype.toString=function(F,z){F=F||10,z=z|0||1;var J;if(F===16||F==="hex"){J="";for(var te=0,se=0,oe=0;oe<this.length;oe++){var ie=this.words[oe],G=((ie<<te|se)&16777215).toString(16);se=ie>>>24-te&16777215,te+=2,te>=26&&(te-=26,oe--),se!==0||oe!==this.length-1?J=D[6-G.length]+G+J:J=G+J}for(se!==0&&(J=se.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(F===(F|0)&&F>=2&&F<=36){var j=L[F],ee=V[F];J="";var pe=this.clone();for(pe.negative=0;!pe.isZero();){var he=pe.modrn(ee).toString(F);pe=pe.idivn(ee),pe.isZero()?J=he+J:J=D[j-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}E(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},C.prototype.toJSON=function(){return this.toString(16,2)},T&&(C.prototype.toBuffer=function(F,z){return this.toArrayLike(T,F,z)}),C.prototype.toArray=function(F,z){return this.toArrayLike(Array,F,z)};var U=function(F,z){return F.allocUnsafe?F.allocUnsafe(z):new F(z)};C.prototype.toArrayLike=function(F,z,J){this._strip();var te=this.byteLength(),se=J||Math.max(1,te);E(te<=se,"byte array longer than desired length"),E(se>0,"Requested array length <= 0");var oe=U(F,se),ie=z==="le"?"LE":"BE";return this["_toArrayLike"+ie](oe,te),oe},C.prototype._toArrayLikeLE=function(F,z){for(var J=0,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J++]=ie&255,J<F.length&&(F[J++]=ie>>8&255),J<F.length&&(F[J++]=ie>>16&255),oe===6?(J<F.length&&(F[J++]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J<F.length)for(F[J++]=te;J<F.length;)F[J++]=0},C.prototype._toArrayLikeBE=function(F,z){for(var J=F.length-1,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J--]=ie&255,J>=0&&(F[J--]=ie>>8&255),J>=0&&(F[J--]=ie>>16&255),oe===6?(J>=0&&(F[J--]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J>=0)for(F[J--]=te;J>=0;)F[J--]=0},Math.clz32?C.prototype._countBits=function(F){return 32-Math.clz32(F)}:C.prototype._countBits=function(F){var z=F,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},C.prototype._zeroBits=function(F){if(F===0)return 26;var z=F,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},C.prototype.bitLength=function(){var F=this.words[this.length-1],z=this._countBits(F);return(this.length-1)*26+z};function q(X){for(var F=new Array(X.bitLength()),z=0;z<F.length;z++){var J=z/26|0,te=z%26;F[z]=X.words[J]>>>te&1}return F}C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(F+=J,J!==26)break}return F},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},C.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return this.negative!==0},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var z=0;z<F.length;z++)this.words[z]=this.words[z]|F.words[z];return this._strip()},C.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},C.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},C.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},C.prototype.iuand=function(F){var z;this.length>F.length?z=F:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&F.words[J];return this.length=z.length,this._strip()},C.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},C.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},C.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},C.prototype.iuxor=function(F){var z,J;this.length>F.length?(z=this,J=F):(z=F,J=this);for(var te=0;te<J.length;te++)this.words[te]=z.words[te]^J.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this._strip()},C.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},C.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},C.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},C.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var z=Math.ceil(F/26)|0,J=F%26;this._expand(z),J>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return J>0&&(this.words[te]=~this.words[te]&67108863>>26-J),this._strip()},C.prototype.notn=function(F){return this.clone().inotn(F)},C.prototype.setn=function(F,z){E(typeof F=="number"&&F>=0);var J=F/26|0,te=F%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<te:this.words[J]=this.words[J]&~(1<<te),this._strip()},C.prototype.iadd=function(F){var z;if(this.negative!==0&&F.negative===0)return this.negative=0,z=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,z=this.isub(F),F.negative=1,z._normSign();var J,te;this.length>F.length?(J=this,te=F):(J=F,te=this);for(var se=0,oe=0;oe<te.length;oe++)z=(J.words[oe]|0)+(te.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;for(;se!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;if(this.length=J.length,se!==0)this.words[this.length]=se,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},C.prototype.add=function(F){var z;return F.negative!==0&&this.negative===0?(F.negative=0,z=this.sub(F),F.negative^=1,z):F.negative===0&&this.negative!==0?(this.negative=0,z=F.sub(this),this.negative=1,z):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},C.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var z=this.iadd(F);return F.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var J=this.cmp(F);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,se;J>0?(te=this,se=F):(te=F,se=this);for(var oe=0,ie=0;ie<se.length;ie++)z=(te.words[ie]|0)-(se.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;for(;oe!==0&&ie<te.length;ie++)z=(te.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;if(oe===0&&ie<te.length&&te!==this)for(;ie<te.length;ie++)this.words[ie]=te.words[ie];return this.length=Math.max(this.length,ie),te!==this&&(this.negative=1),this._strip()},C.prototype.sub=function(F){return this.clone().isub(F)};function H(X,F,z){z.negative=F.negative^X.negative;var J=X.length+F.length|0;z.length=J,J=J-1|0;var te=X.words[0]|0,se=F.words[0]|0,oe=te*se,ie=oe&67108863,G=oe/67108864|0;z.words[0]=ie;for(var j=1;j<J;j++){for(var ee=G>>>26,pe=G&67108863,he=Math.min(j,F.length-1),Se=Math.max(0,j-X.length+1);Se<=he;Se++){var we=j-Se|0;te=X.words[we]|0,se=F.words[Se]|0,oe=te*se+pe,ee+=oe/67108864|0,pe=oe&67108863}z.words[j]=pe|0,G=ee|0}return G!==0?z.words[j]=G|0:z.length--,z._strip()}var W=function(F,z,J){var te=F.words,se=z.words,oe=J.words,ie=0,G,j,ee,pe=te[0]|0,he=pe&8191,Se=pe>>>13,we=te[1]|0,xe=we&8191,Ee=we>>>13,ye=te[2]|0,Ce=ye&8191,ve=ye>>>13,Be=te[3]|0,me=Be&8191,Ie=Be>>>13,Ve=te[4]|0,Me=Ve&8191,Ne=Ve>>>13,Pe=te[5]|0,He=Pe&8191,We=Pe>>>13,Ke=te[6]|0,Ge=Ke&8191,nt=Ke>>>13,ot=te[7]|0,Ze=ot&8191,Re=ot>>>13,be=te[8]|0,Ae=be&8191,Le=be>>>13,Xe=te[9]|0,Qe=Xe&8191,et=Xe>>>13,St=se[0]|0,mt=St&8191,dt=St>>>13,jt=se[1]|0,Ct=jt&8191,Rt=jt>>>13,ur=se[2]|0,Gt=ur&8191,Nt=ur>>>13,er=se[3]|0,Mt=er&8191,kt=er>>>13,tr=se[4]|0,Vt=tr&8191,Bt=tr>>>13,ar=se[5]|0,qt=ar&8191,Tt=ar>>>13,ir=se[6]|0,qe=ir&8191,Oe=ir>>>13,De=se[7]|0,ue=De&8191,ke=De>>>13,Fe=se[8]|0,Ue=Fe&8191,ze=Fe>>>13,Ye=se[9]|0,rt=Ye&8191,at=Ye>>>13;J.negative=F.negative^z.negative,J.length=19,G=Math.imul(he,mt),j=Math.imul(he,dt),j=j+Math.imul(Se,mt)|0,ee=Math.imul(Se,dt);var ct=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(xe,mt),j=Math.imul(xe,dt),j=j+Math.imul(Ee,mt)|0,ee=Math.imul(Ee,dt),G=G+Math.imul(he,Ct)|0,j=j+Math.imul(he,Rt)|0,j=j+Math.imul(Se,Ct)|0,ee=ee+Math.imul(Se,Rt)|0;var st=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(Ce,mt),j=Math.imul(Ce,dt),j=j+Math.imul(ve,mt)|0,ee=Math.imul(ve,dt),G=G+Math.imul(xe,Ct)|0,j=j+Math.imul(xe,Rt)|0,j=j+Math.imul(Ee,Ct)|0,ee=ee+Math.imul(Ee,Rt)|0,G=G+Math.imul(he,Gt)|0,j=j+Math.imul(he,Nt)|0,j=j+Math.imul(Se,Gt)|0,ee=ee+Math.imul(Se,Nt)|0;var lt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,G=Math.imul(me,mt),j=Math.imul(me,dt),j=j+Math.imul(Ie,mt)|0,ee=Math.imul(Ie,dt),G=G+Math.imul(Ce,Ct)|0,j=j+Math.imul(Ce,Rt)|0,j=j+Math.imul(ve,Ct)|0,ee=ee+Math.imul(ve,Rt)|0,G=G+Math.imul(xe,Gt)|0,j=j+Math.imul(xe,Nt)|0,j=j+Math.imul(Ee,Gt)|0,ee=ee+Math.imul(Ee,Nt)|0,G=G+Math.imul(he,Mt)|0,j=j+Math.imul(he,kt)|0,j=j+Math.imul(Se,Mt)|0,ee=ee+Math.imul(Se,kt)|0;var ht=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,G=Math.imul(Me,mt),j=Math.imul(Me,dt),j=j+Math.imul(Ne,mt)|0,ee=Math.imul(Ne,dt),G=G+Math.imul(me,Ct)|0,j=j+Math.imul(me,Rt)|0,j=j+Math.imul(Ie,Ct)|0,ee=ee+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ce,Gt)|0,j=j+Math.imul(Ce,Nt)|0,j=j+Math.imul(ve,Gt)|0,ee=ee+Math.imul(ve,Nt)|0,G=G+Math.imul(xe,Mt)|0,j=j+Math.imul(xe,kt)|0,j=j+Math.imul(Ee,Mt)|0,ee=ee+Math.imul(Ee,kt)|0,G=G+Math.imul(he,Vt)|0,j=j+Math.imul(he,Bt)|0,j=j+Math.imul(Se,Vt)|0,ee=ee+Math.imul(Se,Bt)|0;var bt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(bt>>>26)|0,bt&=67108863,G=Math.imul(He,mt),j=Math.imul(He,dt),j=j+Math.imul(We,mt)|0,ee=Math.imul(We,dt),G=G+Math.imul(Me,Ct)|0,j=j+Math.imul(Me,Rt)|0,j=j+Math.imul(Ne,Ct)|0,ee=ee+Math.imul(Ne,Rt)|0,G=G+Math.imul(me,Gt)|0,j=j+Math.imul(me,Nt)|0,j=j+Math.imul(Ie,Gt)|0,ee=ee+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ce,Mt)|0,j=j+Math.imul(Ce,kt)|0,j=j+Math.imul(ve,Mt)|0,ee=ee+Math.imul(ve,kt)|0,G=G+Math.imul(xe,Vt)|0,j=j+Math.imul(xe,Bt)|0,j=j+Math.imul(Ee,Vt)|0,ee=ee+Math.imul(Ee,Bt)|0,G=G+Math.imul(he,qt)|0,j=j+Math.imul(he,Tt)|0,j=j+Math.imul(Se,qt)|0,ee=ee+Math.imul(Se,Tt)|0;var Et=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,mt),j=Math.imul(Ge,dt),j=j+Math.imul(nt,mt)|0,ee=Math.imul(nt,dt),G=G+Math.imul(He,Ct)|0,j=j+Math.imul(He,Rt)|0,j=j+Math.imul(We,Ct)|0,ee=ee+Math.imul(We,Rt)|0,G=G+Math.imul(Me,Gt)|0,j=j+Math.imul(Me,Nt)|0,j=j+Math.imul(Ne,Gt)|0,ee=ee+Math.imul(Ne,Nt)|0,G=G+Math.imul(me,Mt)|0,j=j+Math.imul(me,kt)|0,j=j+Math.imul(Ie,Mt)|0,ee=ee+Math.imul(Ie,kt)|0,G=G+Math.imul(Ce,Vt)|0,j=j+Math.imul(Ce,Bt)|0,j=j+Math.imul(ve,Vt)|0,ee=ee+Math.imul(ve,Bt)|0,G=G+Math.imul(xe,qt)|0,j=j+Math.imul(xe,Tt)|0,j=j+Math.imul(Ee,qt)|0,ee=ee+Math.imul(Ee,Tt)|0,G=G+Math.imul(he,qe)|0,j=j+Math.imul(he,Oe)|0,j=j+Math.imul(Se,qe)|0,ee=ee+Math.imul(Se,Oe)|0;var gt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,mt),j=Math.imul(Ze,dt),j=j+Math.imul(Re,mt)|0,ee=Math.imul(Re,dt),G=G+Math.imul(Ge,Ct)|0,j=j+Math.imul(Ge,Rt)|0,j=j+Math.imul(nt,Ct)|0,ee=ee+Math.imul(nt,Rt)|0,G=G+Math.imul(He,Gt)|0,j=j+Math.imul(He,Nt)|0,j=j+Math.imul(We,Gt)|0,ee=ee+Math.imul(We,Nt)|0,G=G+Math.imul(Me,Mt)|0,j=j+Math.imul(Me,kt)|0,j=j+Math.imul(Ne,Mt)|0,ee=ee+Math.imul(Ne,kt)|0,G=G+Math.imul(me,Vt)|0,j=j+Math.imul(me,Bt)|0,j=j+Math.imul(Ie,Vt)|0,ee=ee+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ce,qt)|0,j=j+Math.imul(Ce,Tt)|0,j=j+Math.imul(ve,qt)|0,ee=ee+Math.imul(ve,Tt)|0,G=G+Math.imul(xe,qe)|0,j=j+Math.imul(xe,Oe)|0,j=j+Math.imul(Ee,qe)|0,ee=ee+Math.imul(Ee,Oe)|0,G=G+Math.imul(he,ue)|0,j=j+Math.imul(he,ke)|0,j=j+Math.imul(Se,ue)|0,ee=ee+Math.imul(Se,ke)|0;var wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,G=Math.imul(Ae,mt),j=Math.imul(Ae,dt),j=j+Math.imul(Le,mt)|0,ee=Math.imul(Le,dt),G=G+Math.imul(Ze,Ct)|0,j=j+Math.imul(Ze,Rt)|0,j=j+Math.imul(Re,Ct)|0,ee=ee+Math.imul(Re,Rt)|0,G=G+Math.imul(Ge,Gt)|0,j=j+Math.imul(Ge,Nt)|0,j=j+Math.imul(nt,Gt)|0,ee=ee+Math.imul(nt,Nt)|0,G=G+Math.imul(He,Mt)|0,j=j+Math.imul(He,kt)|0,j=j+Math.imul(We,Mt)|0,ee=ee+Math.imul(We,kt)|0,G=G+Math.imul(Me,Vt)|0,j=j+Math.imul(Me,Bt)|0,j=j+Math.imul(Ne,Vt)|0,ee=ee+Math.imul(Ne,Bt)|0,G=G+Math.imul(me,qt)|0,j=j+Math.imul(me,Tt)|0,j=j+Math.imul(Ie,qt)|0,ee=ee+Math.imul(Ie,Tt)|0,G=G+Math.imul(Ce,qe)|0,j=j+Math.imul(Ce,Oe)|0,j=j+Math.imul(ve,qe)|0,ee=ee+Math.imul(ve,Oe)|0,G=G+Math.imul(xe,ue)|0,j=j+Math.imul(xe,ke)|0,j=j+Math.imul(Ee,ue)|0,ee=ee+Math.imul(Ee,ke)|0,G=G+Math.imul(he,Ue)|0,j=j+Math.imul(he,ze)|0,j=j+Math.imul(Se,Ue)|0,ee=ee+Math.imul(Se,ze)|0;var Dt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,G=Math.imul(Qe,mt),j=Math.imul(Qe,dt),j=j+Math.imul(et,mt)|0,ee=Math.imul(et,dt),G=G+Math.imul(Ae,Ct)|0,j=j+Math.imul(Ae,Rt)|0,j=j+Math.imul(Le,Ct)|0,ee=ee+Math.imul(Le,Rt)|0,G=G+Math.imul(Ze,Gt)|0,j=j+Math.imul(Ze,Nt)|0,j=j+Math.imul(Re,Gt)|0,ee=ee+Math.imul(Re,Nt)|0,G=G+Math.imul(Ge,Mt)|0,j=j+Math.imul(Ge,kt)|0,j=j+Math.imul(nt,Mt)|0,ee=ee+Math.imul(nt,kt)|0,G=G+Math.imul(He,Vt)|0,j=j+Math.imul(He,Bt)|0,j=j+Math.imul(We,Vt)|0,ee=ee+Math.imul(We,Bt)|0,G=G+Math.imul(Me,qt)|0,j=j+Math.imul(Me,Tt)|0,j=j+Math.imul(Ne,qt)|0,ee=ee+Math.imul(Ne,Tt)|0,G=G+Math.imul(me,qe)|0,j=j+Math.imul(me,Oe)|0,j=j+Math.imul(Ie,qe)|0,ee=ee+Math.imul(Ie,Oe)|0,G=G+Math.imul(Ce,ue)|0,j=j+Math.imul(Ce,ke)|0,j=j+Math.imul(ve,ue)|0,ee=ee+Math.imul(ve,ke)|0,G=G+Math.imul(xe,Ue)|0,j=j+Math.imul(xe,ze)|0,j=j+Math.imul(Ee,Ue)|0,ee=ee+Math.imul(Ee,ze)|0,G=G+Math.imul(he,rt)|0,j=j+Math.imul(he,at)|0,j=j+Math.imul(Se,rt)|0,ee=ee+Math.imul(Se,at)|0;var Ft=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Qe,Ct),j=Math.imul(Qe,Rt),j=j+Math.imul(et,Ct)|0,ee=Math.imul(et,Rt),G=G+Math.imul(Ae,Gt)|0,j=j+Math.imul(Ae,Nt)|0,j=j+Math.imul(Le,Gt)|0,ee=ee+Math.imul(Le,Nt)|0,G=G+Math.imul(Ze,Mt)|0,j=j+Math.imul(Ze,kt)|0,j=j+Math.imul(Re,Mt)|0,ee=ee+Math.imul(Re,kt)|0,G=G+Math.imul(Ge,Vt)|0,j=j+Math.imul(Ge,Bt)|0,j=j+Math.imul(nt,Vt)|0,ee=ee+Math.imul(nt,Bt)|0,G=G+Math.imul(He,qt)|0,j=j+Math.imul(He,Tt)|0,j=j+Math.imul(We,qt)|0,ee=ee+Math.imul(We,Tt)|0,G=G+Math.imul(Me,qe)|0,j=j+Math.imul(Me,Oe)|0,j=j+Math.imul(Ne,qe)|0,ee=ee+Math.imul(Ne,Oe)|0,G=G+Math.imul(me,ue)|0,j=j+Math.imul(me,ke)|0,j=j+Math.imul(Ie,ue)|0,ee=ee+Math.imul(Ie,ke)|0,G=G+Math.imul(Ce,Ue)|0,j=j+Math.imul(Ce,ze)|0,j=j+Math.imul(ve,Ue)|0,ee=ee+Math.imul(ve,ze)|0,G=G+Math.imul(xe,rt)|0,j=j+Math.imul(xe,at)|0,j=j+Math.imul(Ee,rt)|0,ee=ee+Math.imul(Ee,at)|0;var Kt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Qe,Gt),j=Math.imul(Qe,Nt),j=j+Math.imul(et,Gt)|0,ee=Math.imul(et,Nt),G=G+Math.imul(Ae,Mt)|0,j=j+Math.imul(Ae,kt)|0,j=j+Math.imul(Le,Mt)|0,ee=ee+Math.imul(Le,kt)|0,G=G+Math.imul(Ze,Vt)|0,j=j+Math.imul(Ze,Bt)|0,j=j+Math.imul(Re,Vt)|0,ee=ee+Math.imul(Re,Bt)|0,G=G+Math.imul(Ge,qt)|0,j=j+Math.imul(Ge,Tt)|0,j=j+Math.imul(nt,qt)|0,ee=ee+Math.imul(nt,Tt)|0,G=G+Math.imul(He,qe)|0,j=j+Math.imul(He,Oe)|0,j=j+Math.imul(We,qe)|0,ee=ee+Math.imul(We,Oe)|0,G=G+Math.imul(Me,ue)|0,j=j+Math.imul(Me,ke)|0,j=j+Math.imul(Ne,ue)|0,ee=ee+Math.imul(Ne,ke)|0,G=G+Math.imul(me,Ue)|0,j=j+Math.imul(me,ze)|0,j=j+Math.imul(Ie,Ue)|0,ee=ee+Math.imul(Ie,ze)|0,G=G+Math.imul(Ce,rt)|0,j=j+Math.imul(Ce,at)|0,j=j+Math.imul(ve,rt)|0,ee=ee+Math.imul(ve,at)|0;var Ut=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,G=Math.imul(Qe,Mt),j=Math.imul(Qe,kt),j=j+Math.imul(et,Mt)|0,ee=Math.imul(et,kt),G=G+Math.imul(Ae,Vt)|0,j=j+Math.imul(Ae,Bt)|0,j=j+Math.imul(Le,Vt)|0,ee=ee+Math.imul(Le,Bt)|0,G=G+Math.imul(Ze,qt)|0,j=j+Math.imul(Ze,Tt)|0,j=j+Math.imul(Re,qt)|0,ee=ee+Math.imul(Re,Tt)|0,G=G+Math.imul(Ge,qe)|0,j=j+Math.imul(Ge,Oe)|0,j=j+Math.imul(nt,qe)|0,ee=ee+Math.imul(nt,Oe)|0,G=G+Math.imul(He,ue)|0,j=j+Math.imul(He,ke)|0,j=j+Math.imul(We,ue)|0,ee=ee+Math.imul(We,ke)|0,G=G+Math.imul(Me,Ue)|0,j=j+Math.imul(Me,ze)|0,j=j+Math.imul(Ne,Ue)|0,ee=ee+Math.imul(Ne,ze)|0,G=G+Math.imul(me,rt)|0,j=j+Math.imul(me,at)|0,j=j+Math.imul(Ie,rt)|0,ee=ee+Math.imul(Ie,at)|0;var Xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,G=Math.imul(Qe,Vt),j=Math.imul(Qe,Bt),j=j+Math.imul(et,Vt)|0,ee=Math.imul(et,Bt),G=G+Math.imul(Ae,qt)|0,j=j+Math.imul(Ae,Tt)|0,j=j+Math.imul(Le,qt)|0,ee=ee+Math.imul(Le,Tt)|0,G=G+Math.imul(Ze,qe)|0,j=j+Math.imul(Ze,Oe)|0,j=j+Math.imul(Re,qe)|0,ee=ee+Math.imul(Re,Oe)|0,G=G+Math.imul(Ge,ue)|0,j=j+Math.imul(Ge,ke)|0,j=j+Math.imul(nt,ue)|0,ee=ee+Math.imul(nt,ke)|0,G=G+Math.imul(He,Ue)|0,j=j+Math.imul(He,ze)|0,j=j+Math.imul(We,Ue)|0,ee=ee+Math.imul(We,ze)|0,G=G+Math.imul(Me,rt)|0,j=j+Math.imul(Me,at)|0,j=j+Math.imul(Ne,rt)|0,ee=ee+Math.imul(Ne,at)|0;var Zt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,G=Math.imul(Qe,qt),j=Math.imul(Qe,Tt),j=j+Math.imul(et,qt)|0,ee=Math.imul(et,Tt),G=G+Math.imul(Ae,qe)|0,j=j+Math.imul(Ae,Oe)|0,j=j+Math.imul(Le,qe)|0,ee=ee+Math.imul(Le,Oe)|0,G=G+Math.imul(Ze,ue)|0,j=j+Math.imul(Ze,ke)|0,j=j+Math.imul(Re,ue)|0,ee=ee+Math.imul(Re,ke)|0,G=G+Math.imul(Ge,Ue)|0,j=j+Math.imul(Ge,ze)|0,j=j+Math.imul(nt,Ue)|0,ee=ee+Math.imul(nt,ze)|0,G=G+Math.imul(He,rt)|0,j=j+Math.imul(He,at)|0,j=j+Math.imul(We,rt)|0,ee=ee+Math.imul(We,at)|0;var Wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Qe,qe),j=Math.imul(Qe,Oe),j=j+Math.imul(et,qe)|0,ee=Math.imul(et,Oe),G=G+Math.imul(Ae,ue)|0,j=j+Math.imul(Ae,ke)|0,j=j+Math.imul(Le,ue)|0,ee=ee+Math.imul(Le,ke)|0,G=G+Math.imul(Ze,Ue)|0,j=j+Math.imul(Ze,ze)|0,j=j+Math.imul(Re,Ue)|0,ee=ee+Math.imul(Re,ze)|0,G=G+Math.imul(Ge,rt)|0,j=j+Math.imul(Ge,at)|0,j=j+Math.imul(nt,rt)|0,ee=ee+Math.imul(nt,at)|0;var yt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(Qe,ue),j=Math.imul(Qe,ke),j=j+Math.imul(et,ue)|0,ee=Math.imul(et,ke),G=G+Math.imul(Ae,Ue)|0,j=j+Math.imul(Ae,ze)|0,j=j+Math.imul(Le,Ue)|0,ee=ee+Math.imul(Le,ze)|0,G=G+Math.imul(Ze,rt)|0,j=j+Math.imul(Ze,at)|0,j=j+Math.imul(Re,rt)|0,ee=ee+Math.imul(Re,at)|0;var xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Qe,Ue),j=Math.imul(Qe,ze),j=j+Math.imul(et,Ue)|0,ee=Math.imul(et,ze),G=G+Math.imul(Ae,rt)|0,j=j+Math.imul(Ae,at)|0,j=j+Math.imul(Le,rt)|0,ee=ee+Math.imul(Le,at)|0;var Pt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,G=Math.imul(Qe,rt),j=Math.imul(Qe,at),j=j+Math.imul(et,rt)|0,ee=Math.imul(et,at);var It=(ie+G|0)+((j&8191)<<13)|0;return ie=(ee+(j>>>13)|0)+(It>>>26)|0,It&=67108863,oe[0]=ct,oe[1]=st,oe[2]=lt,oe[3]=ht,oe[4]=bt,oe[5]=Et,oe[6]=gt,oe[7]=wt,oe[8]=Dt,oe[9]=Ft,oe[10]=Kt,oe[11]=Ut,oe[12]=Xt,oe[13]=Zt,oe[14]=Wt,oe[15]=yt,oe[16]=xt,oe[17]=Pt,oe[18]=It,ie!==0&&(oe[19]=ie,J.length++),J};Math.imul||(W=H);function Q(X,F,z){z.negative=F.negative^X.negative,z.length=X.length+F.length;for(var J=0,te=0,se=0;se<z.length-1;se++){var oe=te;te=0;for(var ie=J&67108863,G=Math.min(se,F.length-1),j=Math.max(0,se-X.length+1);j<=G;j++){var ee=se-j,pe=X.words[ee]|0,he=F.words[j]|0,Se=pe*he,we=Se&67108863;oe=oe+(Se/67108864|0)|0,we=we+ie|0,ie=we&67108863,oe=oe+(we>>>26)|0,te+=oe>>>26,oe&=67108863}z.words[se]=ie,J=oe,oe=te}return J!==0?z.words[se]=J:z.length--,z._strip()}function re(X,F,z){return Q(X,F,z)}C.prototype.mulTo=function(F,z){var J,te=this.length+F.length;return this.length===10&&F.length===10?J=W(this,F,z):te<63?J=H(this,F,z):te<1024?J=Q(this,F,z):J=re(this,F,z),J},C.prototype.mul=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),this.mulTo(F,z)},C.prototype.mulf=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),re(this,F,z)},C.prototype.imul=function(F){return this.clone().mulTo(F,this)},C.prototype.imuln=function(F){var z=F<0;z&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var J=0,te=0;te<this.length;te++){var se=(this.words[te]|0)*F,oe=(se&67108863)+(J&67108863);J>>=26,J+=se/67108864|0,J+=oe>>>26,this.words[te]=oe&67108863}return J!==0&&(this.words[te]=J,this.length++),z?this.ineg():this},C.prototype.muln=function(F){return this.clone().imuln(F)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(F){var z=q(F);if(z.length===0)return new C(1);for(var J=this,te=0;te<z.length&&z[te]===0;te++,J=J.sqr());if(++te<z.length)for(var se=J.sqr();te<z.length;te++,se=se.sqr())z[te]!==0&&(J=J.mul(se));return J},C.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=67108863>>>26-z<<26-z,se;if(z!==0){var oe=0;for(se=0;se<this.length;se++){var ie=this.words[se]&te,G=(this.words[se]|0)-ie<<z;this.words[se]=G|oe,oe=ie>>>26-z}oe&&(this.words[se]=oe,this.length++)}if(J!==0){for(se=this.length-1;se>=0;se--)this.words[se+J]=this.words[se];for(se=0;se<J;se++)this.words[se]=0;this.length+=J}return this._strip()},C.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},C.prototype.iushrn=function(F,z,J){E(typeof F=="number"&&F>=0);var te;z?te=(z-z%26)/26:te=0;var se=F%26,oe=Math.min((F-se)/26,this.length),ie=67108863^67108863>>>se<<se,G=J;if(te-=oe,te=Math.max(0,te),G){for(var j=0;j<oe;j++)G.words[j]=this.words[j];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,j=0;j<this.length;j++)this.words[j]=this.words[j+oe];else this.words[0]=0,this.length=1;var ee=0;for(j=this.length-1;j>=0&&(ee!==0||j>=te);j--){var pe=this.words[j]|0;this.words[j]=ee<<26-se|pe>>>se,ee=pe&ie}return G&&ee!==0&&(G.words[G.length++]=ee),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},C.prototype.ishrn=function(F,z,J){return E(this.negative===0),this.iushrn(F,z,J)},C.prototype.shln=function(F){return this.clone().ishln(F)},C.prototype.ushln=function(F){return this.clone().iushln(F)},C.prototype.shrn=function(F){return this.clone().ishrn(F)},C.prototype.ushrn=function(F){return this.clone().iushrn(F)},C.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return!1;var se=this.words[J];return!!(se&te)},C.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this._strip()},C.prototype.maskn=function(F){return this.clone().imaskn(F)},C.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},C.prototype._iaddn=function(F){this.words[0]+=F;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},C.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},C.prototype.addn=function(F){return this.clone().iaddn(F)},C.prototype.subn=function(F){return this.clone().isubn(F)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(F,z,J){var te=F.length+J,se;this._expand(te);var oe,ie=0;for(se=0;se<F.length;se++){oe=(this.words[se+J]|0)+ie;var G=(F.words[se]|0)*z;oe-=G&67108863,ie=(oe>>26)-(G/67108864|0),this.words[se+J]=oe&67108863}for(;se<this.length-J;se++)oe=(this.words[se+J]|0)+ie,ie=oe>>26,this.words[se+J]=oe&67108863;if(ie===0)return this._strip();for(E(ie===-1),ie=0,se=0;se<this.length;se++)oe=-(this.words[se]|0)+ie,ie=oe>>26,this.words[se]=oe&67108863;return this.negative=1,this._strip()},C.prototype._wordDiv=function(F,z){var J=this.length-F.length,te=this.clone(),se=F,oe=se.words[se.length-1]|0,ie=this._countBits(oe);J=26-ie,J!==0&&(se=se.ushln(J),te.iushln(J),oe=se.words[se.length-1]|0);var G=te.length-se.length,j;if(z!=="mod"){j=new C(null),j.length=G+1,j.words=new Array(j.length);for(var ee=0;ee<j.length;ee++)j.words[ee]=0}var pe=te.clone()._ishlnsubmul(se,1,G);pe.negative===0&&(te=pe,j&&(j.words[G]=1));for(var he=G-1;he>=0;he--){var Se=(te.words[se.length+he]|0)*67108864+(te.words[se.length+he-1]|0);for(Se=Math.min(Se/oe|0,67108863),te._ishlnsubmul(se,Se,he);te.negative!==0;)Se--,te.negative=0,te._ishlnsubmul(se,1,he),te.isZero()||(te.negative^=1);j&&(j.words[he]=Se)}return j&&j._strip(),te._strip(),z!=="div"&&J!==0&&te.iushrn(J),{div:j||null,mod:te}},C.prototype.divmod=function(F,z,J){if(E(!F.isZero()),this.isZero())return{div:new C(0),mod:new C(0)};var te,se,oe;return this.negative!==0&&F.negative===0?(oe=this.neg().divmod(F,z),z!=="mod"&&(te=oe.div.neg()),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.iadd(F)),{div:te,mod:se}):this.negative===0&&F.negative!==0?(oe=this.divmod(F.neg(),z),z!=="mod"&&(te=oe.div.neg()),{div:te,mod:oe.mod}):this.negative&F.negative?(oe=this.neg().divmod(F.neg(),z),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.isub(F)),{div:oe.div,mod:se}):F.length>this.length||this.cmp(F)<0?{div:new C(0),mod:this}:F.length===1?z==="div"?{div:this.divn(F.words[0]),mod:null}:z==="mod"?{div:null,mod:new C(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new C(this.modrn(F.words[0]))}:this._wordDiv(F,z)},C.prototype.div=function(F){return this.divmod(F,"div",!1).div},C.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},C.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},C.prototype.divRound=function(F){var z=this.divmod(F);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(F):z.mod,te=F.ushrn(1),se=F.andln(1),oe=J.cmp(te);return oe<0||se===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},C.prototype.modrn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=(1<<26)%F,te=0,se=this.length-1;se>=0;se--)te=(J*te+(this.words[se]|0))%F;return z?-te:te},C.prototype.modn=function(F){return this.modrn(F)},C.prototype.idivn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=0,te=this.length-1;te>=0;te--){var se=(this.words[te]|0)+J*67108864;this.words[te]=se/F|0,J=se%F}return this._strip(),z?this.ineg():this},C.prototype.divn=function(F){return this.clone().idivn(F)},C.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=new C(0),ie=new C(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var j=J.clone(),ee=z.clone();!z.isZero();){for(var pe=0,he=1;!(z.words[0]&he)&&pe<26;++pe,he<<=1);if(pe>0)for(z.iushrn(pe);pe-- >0;)(te.isOdd()||se.isOdd())&&(te.iadd(j),se.isub(ee)),te.iushrn(1),se.iushrn(1);for(var Se=0,we=1;!(J.words[0]&we)&&Se<26;++Se,we<<=1);if(Se>0)for(J.iushrn(Se);Se-- >0;)(oe.isOdd()||ie.isOdd())&&(oe.iadd(j),ie.isub(ee)),oe.iushrn(1),ie.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(oe),se.isub(ie)):(J.isub(z),oe.isub(te),ie.isub(se))}return{a:oe,b:ie,gcd:J.iushln(G)}},C.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var ie=0,G=1;!(z.words[0]&G)&&ie<26;++ie,G<<=1);if(ie>0)for(z.iushrn(ie);ie-- >0;)te.isOdd()&&te.iadd(oe),te.iushrn(1);for(var j=0,ee=1;!(J.words[0]&ee)&&j<26;++j,ee<<=1);if(j>0)for(J.iushrn(j);j-- >0;)se.isOdd()&&se.iadd(oe),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(se)):(J.isub(z),se.isub(te))}var pe;return z.cmpn(1)===0?pe=te:pe=se,pe.cmpn(0)<0&&pe.iadd(F),pe},C.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var z=this.clone(),J=F.clone();z.negative=0,J.negative=0;for(var te=0;z.isEven()&&J.isEven();te++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var se=z.cmp(J);if(se<0){var oe=z;z=J,J=oe}else if(se===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(te)},C.prototype.invm=function(F){return this.egcd(F).a.umod(F)},C.prototype.isEven=function(){return(this.words[0]&1)===0},C.prototype.isOdd=function(){return(this.words[0]&1)===1},C.prototype.andln=function(F){return this.words[0]&F},C.prototype.bincn=function(F){E(typeof F=="number");var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=te,this;for(var se=te,oe=J;se!==0&&oe<this.length;oe++){var ie=this.words[oe]|0;ie+=se,se=ie>>>26,ie&=67108863,this.words[oe]=ie}return se!==0&&(this.words[oe]=se,this.length++),this},C.prototype.isZero=function(){return this.length===1&&this.words[0]===0},C.prototype.cmpn=function(F){var z=F<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(F=-F),E(F<=67108863,"Number is too big");var te=this.words[0]|0;J=te===F?0:te<F?-1:1}return this.negative!==0?-J|0:J},C.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var z=this.ucmp(F);return this.negative!==0?-z|0:z},C.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var te=this.words[J]|0,se=F.words[J]|0;if(te!==se){te<se?z=-1:te>se&&(z=1);break}}return z},C.prototype.gtn=function(F){return this.cmpn(F)===1},C.prototype.gt=function(F){return this.cmp(F)===1},C.prototype.gten=function(F){return this.cmpn(F)>=0},C.prototype.gte=function(F){return this.cmp(F)>=0},C.prototype.ltn=function(F){return this.cmpn(F)===-1},C.prototype.lt=function(F){return this.cmp(F)===-1},C.prototype.lten=function(F){return this.cmpn(F)<=0},C.prototype.lte=function(F){return this.cmp(F)<=0},C.prototype.eqn=function(F){return this.cmpn(F)===0},C.prototype.eq=function(F){return this.cmp(F)===0},C.red=function(F){return new _e(F)},C.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},C.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(F){return this.red=F,this},C.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},C.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},C.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},C.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},C.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},C.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},C.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},C.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},C.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var ce={k256:null,p224:null,p192:null,p25519:null};function ne(X,F){this.name=X,this.p=new C(F,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ne.prototype._tmp=function(){var F=new C(null);return F.words=new Array(Math.ceil(this.n/13)),F},ne.prototype.ireduce=function(F){var z=F,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var te=J<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},ne.prototype.split=function(F,z){F.iushrn(this.n,0,z)},ne.prototype.imulK=function(F){return F.imul(this.k)};function Y(){ne.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Y,ne),Y.prototype.split=function(F,z){for(var J=4194303,te=Math.min(F.length,9),se=0;se<te;se++)z.words[se]=F.words[se];if(z.length=te,F.length<=9){F.words[0]=0,F.length=1;return}var oe=F.words[9];for(z.words[z.length++]=oe&J,se=10;se<F.length;se++){var ie=F.words[se]|0;F.words[se-10]=(ie&J)<<4|oe>>>22,oe=ie}oe>>>=22,F.words[se-10]=oe,oe===0&&F.length>10?F.length-=10:F.length-=9},Y.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var z=0,J=0;J<F.length;J++){var te=F.words[J]|0;z+=te*977,F.words[J]=z&67108863,z=te*64+(z/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function fe(){ne.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(fe,ne);function ge(){ne.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ge,ne);function $e(){ne.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S($e,ne),$e.prototype.imulK=function(F){for(var z=0,J=0;J<F.length;J++){var te=(F.words[J]|0)*19+z,se=te&67108863;te>>>=26,F.words[J]=se,z=te}return z!==0&&(F.words[F.length++]=z),F},C._prime=function(F){if(ce[F])return ce[F];var z;if(F==="k256")z=new Y;else if(F==="p224")z=new fe;else if(F==="p192")z=new ge;else if(F==="p25519")z=new $e;else throw new Error("Unknown prime "+F);return ce[F]=z,z};function _e(X){if(typeof X=="string"){var F=C._prime(X);this.m=F.p,this.prime=F}else E(X.gtn(1),"modulus must be greater than 1"),this.m=X,this.prime=null}_e.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},_e.prototype._verify2=function(F,z){E((F.negative|z.negative)===0,"red works only with positives"),E(F.red&&F.red===z.red,"red works only with red numbers")},_e.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(M(F,F.umod(this.m)._forceRed(this)),F)},_e.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},_e.prototype.add=function(F,z){this._verify2(F,z);var J=F.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},_e.prototype.iadd=function(F,z){this._verify2(F,z);var J=F.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},_e.prototype.sub=function(F,z){this._verify2(F,z);var J=F.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},_e.prototype.isub=function(F,z){this._verify2(F,z);var J=F.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},_e.prototype.shl=function(F,z){return this._verify1(F),this.imod(F.ushln(z))},_e.prototype.imul=function(F,z){return this._verify2(F,z),this.imod(F.imul(z))},_e.prototype.mul=function(F,z){return this._verify2(F,z),this.imod(F.mul(z))},_e.prototype.isqr=function(F){return this.imul(F,F.clone())},_e.prototype.sqr=function(F){return this.mul(F,F)},_e.prototype.sqrt=function(F){if(F.isZero())return F.clone();var z=this.m.andln(3);if(E(z%2===1),z===3){var J=this.m.add(new C(1)).iushrn(2);return this.pow(F,J)}for(var te=this.m.subn(1),se=0;!te.isZero()&&te.andln(1)===0;)se++,te.iushrn(1);E(!te.isZero());var oe=new C(1).toRed(this),ie=oe.redNeg(),G=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new C(2*j*j).toRed(this);this.pow(j,G).cmp(ie)!==0;)j.redIAdd(ie);for(var ee=this.pow(j,te),pe=this.pow(F,te.addn(1).iushrn(1)),he=this.pow(F,te),Se=se;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();E(xe<Se);var Ee=this.pow(ee,new C(1).iushln(Se-xe-1));pe=pe.redMul(Ee),ee=Ee.redSqr(),he=he.redMul(ee),Se=xe}return pe},_e.prototype.invm=function(F){var z=F._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},_e.prototype.pow=function(F,z){if(z.isZero())return new C(1).toRed(this);if(z.cmpn(1)===0)return F.clone();var J=4,te=new Array(1<<J);te[0]=new C(1).toRed(this),te[1]=F;for(var se=2;se<te.length;se++)te[se]=this.mul(te[se-1],F);var oe=te[0],ie=0,G=0,j=z.bitLength()%26;for(j===0&&(j=26),se=z.length-1;se>=0;se--){for(var ee=z.words[se],pe=j-1;pe>=0;pe--){var he=ee>>pe&1;if(oe!==te[0]&&(oe=this.sqr(oe)),he===0&&ie===0){G=0;continue}ie<<=1,ie|=he,G++,!(G!==J&&(se!==0||pe!==0))&&(oe=this.mul(oe,te[ie]),G=0,ie=0)}j=26}return oe},_e.prototype.convertTo=function(F){var z=F.umod(this.m);return z===F?z.clone():z},_e.prototype.convertFrom=function(F){var z=F.clone();return z.red=null,z},C.mont=function(F){return new ae(F)};function ae(X){_e.call(this,X),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(ae,_e),ae.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},ae.prototype.convertFrom=function(F){var z=this.imod(F.mul(this.rinv));return z.red=null,z},ae.prototype.imul=function(F,z){if(F.isZero()||z.isZero())return F.words[0]=0,F.length=1,F;var J=F.imul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.mul=function(F,z){if(F.isZero()||z.isZero())return new C(0)._forceRed(this);var J=F.mul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.invm=function(F){var z=this.imod(F._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(n,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports;const _BN=getDefaultExportFromCjs(bnExports$1),version$f="bignumber/5.7.0";var BN$1=_BN.BN;const logger$j=new Logger(version$f),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(_,x){_!==_constructorGuard$1&&logger$j.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=x,this._isBigNumber=!0,Object.freeze(this)}fromTwos(_){return toBigNumber(toBN(this).fromTwos(_))}toTwos(_){return toBigNumber(toBN(this).toTwos(_))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(_){return toBigNumber(toBN(this).add(toBN(_)))}sub(_){return toBigNumber(toBN(this).sub(toBN(_)))}div(_){return BigNumber.from(_).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(_)))}mul(_){return toBigNumber(toBN(this).mul(toBN(_)))}mod(_){const x=toBN(_);return x.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(x))}pow(_){const x=toBN(_);return x.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(x))}and(_){const x=toBN(_);return(this.isNegative()||x.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(x))}or(_){const x=toBN(_);return(this.isNegative()||x.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(x))}xor(_){const x=toBN(_);return(this.isNegative()||x.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(x))}mask(_){return(this.isNegative()||_<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(_))}shl(_){return(this.isNegative()||_<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(_))}shr(_){return(this.isNegative()||_<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(_))}eq(_){return toBN(this).eq(toBN(_))}lt(_){return toBN(this).lt(toBN(_))}lte(_){return toBN(this).lte(toBN(_))}gt(_){return toBN(this).gt(toBN(_))}gte(_){return toBN(this).gte(toBN(_))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$j.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$j.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$j.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$j.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(_){return{type:"BigNumber",hex:this.toHexString()}}static from(_){if(_ instanceof BigNumber)return _;if(typeof _=="string")return _.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex(_)):_.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex(new BN$1(_))):logger$j.throwArgumentError("invalid BigNumber string","value",_);if(typeof _=="number")return _%1&&throwFault("underflow","BigNumber.from",_),(_>=MAX_SAFE||_<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",_),BigNumber.from(String(_));const x=_;if(typeof x=="bigint")return BigNumber.from(x.toString());if(isBytes(x))return BigNumber.from(hexlify(x));if(x)if(x.toHexString){const E=x.toHexString();if(typeof E=="string")return BigNumber.from(E)}else{let E=x._hex;if(E==null&&x.type==="BigNumber"&&(E=x.hex),typeof E=="string"&&(isHexString(E)||E[0]==="-"&&isHexString(E.substring(1))))return BigNumber.from(E)}return logger$j.throwArgumentError("invalid BigNumber value","value",_)}static isBigNumber(_){return!!(_&&_._isBigNumber)}}function toHex(n){if(typeof n!="string")return toHex(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&logger$j.throwArgumentError("invalid hex","value",n),n=toHex(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function toBigNumber(n){return BigNumber.from(toHex(n))}function toBN(n){const _=BigNumber.from(n).toHexString();return _[0]==="-"?new BN$1("-"+_.substring(3),16):new BN$1(_.substring(2),16)}function throwFault(n,_,x){const E={fault:n,operation:_};return x!=null&&(E.value=x),logger$j.throwError(n,Logger.errors.NUMERIC_FAULT,E)}function _base36To16(n){return new BN$1(n,36).toString(16)}function keccak256(n){return"0x"+sha3.keccak_256(arrayify(n))}const version$e="rlp/5.7.0",logger$i=new Logger(version$e);function arrayifyInteger(n){const _=[];for(;n;)_.unshift(n&255),n>>=8;return _}function _encode(n){if(Array.isArray(n)){let E=[];if(n.forEach(function(C){E=E.concat(_encode(C))}),E.length<=55)return E.unshift(192+E.length),E;const S=arrayifyInteger(E.length);return S.unshift(247+S.length),S.concat(E)}isBytesLike(n)||logger$i.throwArgumentError("RLP object must be BytesLike","object",n);const _=Array.prototype.slice.call(arrayify(n));if(_.length===1&&_[0]<=127)return _;if(_.length<=55)return _.unshift(128+_.length),_;const x=arrayifyInteger(_.length);return x.unshift(183+x.length),x.concat(_)}function encode$6(n){return hexlify(_encode(n))}const version$d="address/5.7.0",logger$h=new Logger(version$d);function getChecksumAddress(n){isHexString(n,20)||logger$h.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const _=n.substring(2).split(""),x=new Uint8Array(40);for(let S=0;S<40;S++)x[S]=_[S].charCodeAt(0);const E=arrayify(keccak256(x));for(let S=0;S<40;S+=2)E[S>>1]>>4>=8&&(_[S]=_[S].toUpperCase()),(E[S>>1]&15)>=8&&(_[S+1]=_[S+1].toUpperCase());return"0x"+_.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const ibanLookup={};for(let n=0;n<10;n++)ibanLookup[String(n)]=String(n);for(let n=0;n<26;n++)ibanLookup[String.fromCharCode(65+n)]=String(10+n);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let _=n.split("").map(E=>ibanLookup[E]).join("");for(;_.length>=safeDigits;){let E=_.substring(0,safeDigits);_=parseInt(E,10)%97+_.substring(E.length)}let x=String(98-parseInt(_,10)%97);for(;x.length<2;)x="0"+x;return x}function getAddress(n){let _=null;if(typeof n!="string"&&logger$h.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),_=getChecksumAddress(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&_!==n&&logger$h.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==ibanChecksum(n)&&logger$h.throwArgumentError("bad icap checksum","address",n),_=_base36To16(n.substring(4));_.length<40;)_="0"+_;_=getChecksumAddress("0x"+_)}else logger$h.throwArgumentError("invalid address","address",n);return _}const version$c="properties/5.7.0";var __awaiter$5=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$g=new Logger(version$c);function defineReadOnly(n,_,x){Object.defineProperty(n,_,{enumerable:!0,value:x,writable:!1})}function resolveProperties(n){return __awaiter$5(this,void 0,void 0,function*(){const _=Object.keys(n).map(E=>{const S=n[E];return Promise.resolve(S).then(C=>({key:E,value:C}))});return(yield Promise.all(_)).reduce((E,S)=>(E[S.key]=S.value,E),{})})}function checkProperties(n,_){(!n||typeof n!="object")&&logger$g.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(x=>{_[x]||logger$g.throwArgumentError("invalid object key - "+x,"transaction:"+x,n)})}function shallowCopy(n){const _={};for(const x in n)_[x]=n[x];return _}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(n){if(n==null||opaque[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const _=Object.keys(n);for(let x=0;x<_.length;x++){let E=null;try{E=n[_[x]]}catch{continue}if(!_isFrozen(E))return!1}return!0}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function _deepCopy(n){if(_isFrozen(n))return n;if(Array.isArray(n))return Object.freeze(n.map(_=>deepCopy(_)));if(typeof n=="object"){const _={};for(const x in n){const E=n[x];E!==void 0&&defineReadOnly(_,x,deepCopy(E))}return _}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function deepCopy(n){return _deepCopy(n)}class Description{constructor(_){for(const x in _)this[x]=deepCopy(_[x])}}const version$b="abstract-provider/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$f=new Logger(version$b);class Provider{constructor(){logger$f.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$4(this,void 0,void 0,function*(){const{block:_,gasPrice:x}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(T=>null)});let E=null,S=null,C=null;return _&&_.baseFeePerGas&&(E=_.baseFeePerGas,C=BigNumber.from("1500000000"),S=_.baseFeePerGas.mul(2).add(C)),{lastBaseFeePerGas:E,maxFeePerGas:S,maxPriorityFeePerGas:C,gasPrice:x}})}addListener(_,x){return this.on(_,x)}removeListener(_,x){return this.off(_,x)}static isProvider(_){return!!(_&&_._isProvider)}}const version$a="abstract-signer/5.7.0";var __awaiter$3=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$e=new Logger(version$a),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$e.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(_){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),_)})}getTransactionCount(_){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),_)})}estimateGas(_){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const x=yield resolveProperties(this.checkTransaction(_));return yield this.provider.estimateGas(x)})}call(_,x){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("call");const E=yield resolveProperties(this.checkTransaction(_));return yield this.provider.call(E,x)})}sendTransaction(_){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const x=yield this.populateTransaction(_),E=yield this.signTransaction(x);return yield this.provider.sendTransaction(E)})}getChainId(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(_){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(_)})}checkTransaction(_){for(const E in _)allowedTransactionKeys$1.indexOf(E)===-1&&logger$e.throwArgumentError("invalid transaction key: "+E,"transaction",_);const x=shallowCopy(_);return x.from==null?x.from=this.getAddress():x.from=Promise.all([Promise.resolve(x.from),this.getAddress()]).then(E=>(E[0].toLowerCase()!==E[1].toLowerCase()&&logger$e.throwArgumentError("from address mismatch","transaction",_),E[0])),x}populateTransaction(_){return __awaiter$3(this,void 0,void 0,function*(){const x=yield resolveProperties(this.checkTransaction(_));x.to!=null&&(x.to=Promise.resolve(x.to).then(S=>__awaiter$3(this,void 0,void 0,function*(){if(S==null)return null;const C=yield this.resolveName(S);return C==null&&logger$e.throwArgumentError("provided ENS name resolves to null","tx.to",S),C})),x.to.catch(S=>{}));const E=x.maxFeePerGas!=null||x.maxPriorityFeePerGas!=null;if(x.gasPrice!=null&&(x.type===2||E)?logger$e.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",_):(x.type===0||x.type===1)&&E&&logger$e.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",_),(x.type===2||x.type==null)&&x.maxFeePerGas!=null&&x.maxPriorityFeePerGas!=null)x.type=2;else if(x.type===0||x.type===1)x.gasPrice==null&&(x.gasPrice=this.getGasPrice());else{const S=yield this.getFeeData();if(x.type==null)if(S.maxFeePerGas!=null&&S.maxPriorityFeePerGas!=null)if(x.type=2,x.gasPrice!=null){const C=x.gasPrice;delete x.gasPrice,x.maxFeePerGas=C,x.maxPriorityFeePerGas=C}else x.maxFeePerGas==null&&(x.maxFeePerGas=S.maxFeePerGas),x.maxPriorityFeePerGas==null&&(x.maxPriorityFeePerGas=S.maxPriorityFeePerGas);else S.gasPrice!=null?(E&&logger$e.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),x.gasPrice==null&&(x.gasPrice=S.gasPrice),x.type=0):logger$e.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else x.type===2&&(x.maxFeePerGas==null&&(x.maxFeePerGas=S.maxFeePerGas),x.maxPriorityFeePerGas==null&&(x.maxPriorityFeePerGas=S.maxPriorityFeePerGas))}return x.nonce==null&&(x.nonce=this.getTransactionCount("pending")),x.gasLimit==null&&(x.gasLimit=this.estimateGas(x).catch(S=>{if(forwardErrors.indexOf(S.code)>=0)throw S;return logger$e.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:S,tx:x})})),x.chainId==null?x.chainId=this.getChainId():x.chainId=Promise.all([Promise.resolve(x.chainId),this.getChainId()]).then(S=>(S[1]!==0&&S[0]!==S[1]&&logger$e.throwArgumentError("chainId address mismatch","transaction",_),S[0])),yield resolveProperties(x)})}_checkProvider(_){this.provider||logger$e.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:_||"_checkProvider"})}static isSigner(_){return!!(_&&_._isSigner)}}const version$9="strings/5.7.0",logger$d=new Logger(version$9);var UnicodeNormalizationForm;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes(n,_=UnicodeNormalizationForm.current){_!=UnicodeNormalizationForm.current&&(logger$d.checkNormalize(),n=n.normalize(_));let x=[];for(let E=0;E<n.length;E++){const S=n.charCodeAt(E);if(S<128)x.push(S);else if(S<2048)x.push(S>>6|192),x.push(S&63|128);else if((S&64512)==55296){E++;const C=n.charCodeAt(E);if(E>=n.length||(C&64512)!==56320)throw new Error("invalid utf-8 string");const T=65536+((S&1023)<<10)+(C&1023);x.push(T>>18|240),x.push(T>>12&63|128),x.push(T>>6&63|128),x.push(T&63|128)}else x.push(S>>12|224),x.push(S>>6&63|128),x.push(S&63|128)}return arrayify(x)}function id$1(n){return keccak256(toUtf8Bytes(n))}const version$8="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage(n){return typeof n=="string"&&(n=toUtf8Bytes(n)),keccak256(concat$1([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(n.length)),n]))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$c=new Logger(version$8),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(n){const _=arrayify(n),x=_.length%32;return x?hexConcat([_,padding.slice(x)]):hexlify(_)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(n){return function(_){return typeof _!="string"&&logger$c.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,_),_}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(n){try{return BigNumber.from(n).toString()}catch{}return logger$c.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return getAddress(n).toLowerCase()}catch{}return logger$c.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const _=arrayify(n);if(_.length!==32)throw new Error("bad length");return hexlify(_)}catch{}return logger$c.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function getBaseEncoder(n){{const _=n.match(/^(u?)int(\d*)$/);if(_){const x=_[1]==="",E=parseInt(_[2]||"256");(E%8!==0||E>256||_[2]&&_[2]!==String(E))&&logger$c.throwArgumentError("invalid numeric width","type",n);const S=MaxUint256.mask(x?E-1:E),C=x?S.add(One).mul(NegativeOne):Zero;return function(T){const A=BigNumber.from(T);return(A.lt(C)||A.gt(S))&&logger$c.throwArgumentError(`value out-of-bounds for ${n}`,"value",T),hexZeroPad(A.toTwos(256).toHexString(),32)}}}{const _=n.match(/^bytes(\d+)$/);if(_){const x=parseInt(_[1]);return(x===0||x>32||_[1]!==String(x))&&logger$c.throwArgumentError("invalid bytes width","type",n),function(E){return arrayify(E).length!==x&&logger$c.throwArgumentError(`invalid length for ${n}`,"value",E),hexPadRight(E)}}}switch(n){case"address":return function(_){return hexZeroPad(getAddress(_),32)};case"bool":return function(_){return _?hexTrue:hexFalse};case"bytes":return function(_){return keccak256(_)};case"string":return function(_){return id$1(_)}}return null}function encodeType(n,_){return`${n}(${_.map(({name:x,type:E})=>E+" "+x).join(",")})`}class TypedDataEncoder{constructor(_){defineReadOnly(this,"types",Object.freeze(deepCopy(_))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const x={},E={},S={};Object.keys(_).forEach(A=>{x[A]={},E[A]=[],S[A]={}});for(const A in _){const B={};_[A].forEach(I=>{B[I.name]&&logger$c.throwArgumentError(`duplicate variable name ${JSON.stringify(I.name)} in ${JSON.stringify(A)}`,"types",_),B[I.name]=!0;const M=I.type.match(/^([^\x5b]*)(\x5b|$)/)[1];M===A&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(M)}`,"types",_),!getBaseEncoder(M)&&(E[M]||logger$c.throwArgumentError(`unknown type ${JSON.stringify(M)}`,"types",_),E[M].push(A),x[A][M]=!0)})}const C=Object.keys(E).filter(A=>E[A].length===0);C.length===0?logger$c.throwArgumentError("missing primary type","types",_):C.length>1&&logger$c.throwArgumentError(`ambiguous primary types or unused types: ${C.map(A=>JSON.stringify(A)).join(", ")}`,"types",_),defineReadOnly(this,"primaryType",C[0]);function T(A,B){B[A]&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(A)}`,"types",_),B[A]=!0,Object.keys(x[A]).forEach(I=>{E[I]&&(T(I,B),Object.keys(B).forEach(M=>{S[M][I]=!0}))}),delete B[A]}T(this.primaryType,{});for(const A in S){const B=Object.keys(S[A]);B.sort(),this._types[A]=encodeType(A,_[A])+B.map(I=>encodeType(I,_[I])).join("")}}getEncoder(_){let x=this._encoderCache[_];return x||(x=this._encoderCache[_]=this._getEncoder(_)),x}_getEncoder(_){{const S=getBaseEncoder(_);if(S)return S}const x=_.match(/^(.*)(\x5b(\d*)\x5d)$/);if(x){const S=x[1],C=this.getEncoder(S),T=parseInt(x[3]);return A=>{T>=0&&A.length!==T&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",A);let B=A.map(C);return this._types[S]&&(B=B.map(keccak256)),keccak256(hexConcat(B))}}const E=this.types[_];if(E){const S=id$1(this._types[_]);return C=>{const T=E.map(({name:A,type:B})=>{const I=this.getEncoder(B)(C[A]);return this._types[B]?keccak256(I):I});return T.unshift(S),hexConcat(T)}}return logger$c.throwArgumentError(`unknown type: ${_}`,"type",_)}encodeType(_){const x=this._types[_];return x||logger$c.throwArgumentError(`unknown type: ${JSON.stringify(_)}`,"name",_),x}encodeData(_,x){return this.getEncoder(_)(x)}hashStruct(_,x){return keccak256(this.encodeData(_,x))}encode(_){return this.encodeData(this.primaryType,_)}hash(_){return this.hashStruct(this.primaryType,_)}_visit(_,x,E){if(getBaseEncoder(_))return E(_,x);const S=_.match(/^(.*)(\x5b(\d*)\x5d)$/);if(S){const T=S[1],A=parseInt(S[3]);return A>=0&&x.length!==A&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",x),x.map(B=>this._visit(T,B,E))}const C=this.types[_];return C?C.reduce((T,{name:A,type:B})=>(T[A]=this._visit(B,x[A],E),T),{}):logger$c.throwArgumentError(`unknown type: ${_}`,"type",_)}visit(_,x){return this._visit(this.primaryType,_,x)}static from(_){return new TypedDataEncoder(_)}static getPrimaryType(_){return TypedDataEncoder.from(_).primaryType}static hashStruct(_,x,E){return TypedDataEncoder.from(x).hashStruct(_,E)}static hashDomain(_){const x=[];for(const E in _){const S=domainFieldTypes[E];S||logger$c.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(E)}`,"domain",_),x.push({name:E,type:S})}return x.sort((E,S)=>domainFieldNames.indexOf(E.name)-domainFieldNames.indexOf(S.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:x},_)}static encode(_,x,E){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(_),TypedDataEncoder.from(x).hash(E)])}static hash(_,x,E){return keccak256(TypedDataEncoder.encode(_,x,E))}static resolveNames(_,x,E,S){return __awaiter$2(this,void 0,void 0,function*(){_=shallowCopy(_);const C={};_.verifyingContract&&!isHexString(_.verifyingContract,20)&&(C[_.verifyingContract]="0x");const T=TypedDataEncoder.from(x);T.visit(E,(A,B)=>(A==="address"&&!isHexString(B,20)&&(C[B]="0x"),B));for(const A in C)C[A]=yield S(A);return _.verifyingContract&&C[_.verifyingContract]&&(_.verifyingContract=C[_.verifyingContract]),E=T.visit(E,(A,B)=>A==="address"&&C[B]?C[B]:B),{domain:_,value:E}})}static getPayload(_,x,E){TypedDataEncoder.hashDomain(_);const S={},C=[];domainFieldNames.forEach(B=>{const I=_[B];I!=null&&(S[B]=domainChecks[B](I),C.push({name:B,type:domainFieldTypes[B]}))});const T=TypedDataEncoder.from(x),A=shallowCopy(x);return A.EIP712Domain?logger$c.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",x):A.EIP712Domain=C,T.encode(E),{types:A,domain:S,primaryType:T.primaryType,message:T.visit(E,(B,I)=>{if(B.match(/^bytes(\d*)/))return hexlify(arrayify(I));if(B.match(/^u?int/))return BigNumber.from(I).toString();switch(B){case"address":return I.toLowerCase();case"bool":return!!I;case"string":return typeof I!="string"&&logger$c.throwArgumentError("invalid string","value",I),I}return logger$c.throwArgumentError("unsupported type","type",B)})}}}class BaseX{constructor(_){defineReadOnly(this,"alphabet",_),defineReadOnly(this,"base",_.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",_.charAt(0));for(let x=0;x<_.length;x++)this._alphabetMap[_.charAt(x)]=x}encode(_){let x=arrayify(_);if(x.length===0)return"";let E=[0];for(let C=0;C<x.length;++C){let T=x[C];for(let A=0;A<E.length;++A)T+=E[A]<<8,E[A]=T%this.base,T=T/this.base|0;for(;T>0;)E.push(T%this.base),T=T/this.base|0}let S="";for(let C=0;x[C]===0&&C<x.length-1;++C)S+=this._leader;for(let C=E.length-1;C>=0;--C)S+=this.alphabet[E[C]];return S}decode(_){if(typeof _!="string")throw new TypeError("Expected String");let x=[];if(_.length===0)return new Uint8Array(x);x.push(0);for(let E=0;E<_.length;E++){let S=this._alphabetMap[_[E]];if(S===void 0)throw new Error("Non-base"+this.base+" character");let C=S;for(let T=0;T<x.length;++T)C+=x[T]*this.base,x[T]=C&255,C>>=8;for(;C>0;)x.push(C&255),C>>=8}for(let E=0;_[E]===this._leader&&E<_.length-1;++E)x.push(0);return arrayify(new Uint8Array(x.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(n){n.sha256="sha256",n.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$7="sha2/5.7.0",logger$b=new Logger(version$7);function ripemd160(n){return"0x"+hash$3.ripemd160().update(arrayify(n)).digest("hex")}function sha256$2(n){return"0x"+hash$3.sha256().update(arrayify(n)).digest("hex")}function computeHmac(n,_,x){return SupportedAlgorithm[n]||logger$b.throwError("unsupported algorithm "+n,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:n}),"0x"+hash$3.hmac(hash$3[n],arrayify(_)).update(arrayify(x)).digest("hex")}function pbkdf2$1(n,_,x,E,S){n=arrayify(n),_=arrayify(_);let C,T=1;const A=new Uint8Array(E),B=new Uint8Array(_.length+4);B.set(_);let I,M;for(let O=1;O<=T;O++){B[_.length]=O>>24&255,B[_.length+1]=O>>16&255,B[_.length+2]=O>>8&255,B[_.length+3]=O&255;let D=arrayify(computeHmac(S,n,B));C||(C=D.length,M=new Uint8Array(C),T=Math.ceil(E/C),I=E-(T-1)*C),M.set(D);for(let U=1;U<x;U++){D=arrayify(computeHmac(S,n,D));for(let q=0;q<C;q++)M[q]^=D[q]}const L=(O-1)*C,V=O===T?I:C;A.set(arrayify(M).slice(0,V),L)}return hexlify(A)}var bn={exports:{}};bn.exports;(function(n){(function(_,x){function E(X,F){if(!X)throw new Error(F||"Assertion failed")}function S(X,F){X.super_=F;var z=function(){};z.prototype=F.prototype,X.prototype=new z,X.prototype.constructor=X}function C(X,F,z){if(C.isBN(X))return X;this.negative=0,this.words=null,this.length=0,this.red=null,X!==null&&((F==="le"||F==="be")&&(z=F,F=10),this._init(X||0,F||10,z||"be"))}typeof _=="object"?_.exports=C:x.BN=C,C.BN=C,C.wordSize=26;var T;try{typeof window<"u"&&typeof window.Buffer<"u"?T=window.Buffer:T=require$$0$2.Buffer}catch{}C.isBN=function(F){return F instanceof C?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===C.wordSize&&Array.isArray(F.words)},C.max=function(F,z){return F.cmp(z)>0?F:z},C.min=function(F,z){return F.cmp(z)<0?F:z},C.prototype._init=function(F,z,J){if(typeof F=="number")return this._initNumber(F,z,J);if(typeof F=="object")return this._initArray(F,z,J);z==="hex"&&(z=16),E(z===(z|0)&&z>=2&&z<=36),F=F.toString().replace(/\s+/g,"");var te=0;F[0]==="-"&&(te++,this.negative=1),te<F.length&&(z===16?this._parseHex(F,te,J):(this._parseBase(F,z,te),J==="le"&&this._initArray(this.toArray(),z,J)))},C.prototype._initNumber=function(F,z,J){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(E(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},C.prototype._initArray=function(F,z,J){if(E(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se,oe,ie=0;if(J==="be")for(te=F.length-1,se=0;te>=0;te-=3)oe=F[te]|F[te-1]<<8|F[te-2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);else if(J==="le")for(te=0,se=0;te<F.length;te+=3)oe=F[te]|F[te+1]<<8|F[te+2]<<16,this.words[se]|=oe<<ie&67108863,this.words[se+1]=oe>>>26-ie&67108863,ie+=24,ie>=26&&(ie-=26,se++);return this._strip()};function A(X,F){var z=X.charCodeAt(F);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;E(!1,"Invalid character in "+X)}function B(X,F,z){var J=A(X,z);return z-1>=F&&(J|=A(X,z-1)<<4),J}C.prototype._parseHex=function(F,z,J){this.length=Math.ceil((F.length-z)/6),this.words=new Array(this.length);for(var te=0;te<this.length;te++)this.words[te]=0;var se=0,oe=0,ie;if(J==="be")for(te=F.length-1;te>=z;te-=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8;else{var G=F.length-z;for(te=G%2===0?z+1:z;te<F.length;te+=2)ie=B(F,z,te)<<se,this.words[oe]|=ie&67108863,se>=18?(se-=18,oe+=1,this.words[oe]|=ie>>>26):se+=8}this._strip()};function I(X,F,z,J){for(var te=0,se=0,oe=Math.min(X.length,z),ie=F;ie<oe;ie++){var G=X.charCodeAt(ie)-48;te*=J,G>=49?se=G-49+10:G>=17?se=G-17+10:se=G,E(G>=0&&se<J,"Invalid character"),te+=se}return te}C.prototype._parseBase=function(F,z,J){this.words=[0],this.length=1;for(var te=0,se=1;se<=67108863;se*=z)te++;te--,se=se/z|0;for(var oe=F.length-J,ie=oe%te,G=Math.min(oe,oe-ie)+J,j=0,ee=J;ee<G;ee+=te)j=I(F,ee,ee+te,z),this.imuln(se),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(ie!==0){var pe=1;for(j=I(F,ee,F.length,z),ee=0;ee<ie;ee++)pe*=z;this.imuln(pe),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this._strip()},C.prototype.copy=function(F){F.words=new Array(this.length);for(var z=0;z<this.length;z++)F.words[z]=this.words[z];F.length=this.length,F.negative=this.negative,F.red=this.red};function M(X,F){X.words=F.words,X.length=F.length,X.negative=F.negative,X.red=F.red}if(C.prototype._move=function(F){M(F,this)},C.prototype.clone=function(){var F=new C(null);return this.copy(F),F},C.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},C.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},C.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{C.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{C.prototype.inspect=O}else C.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];C.prototype.toString=function(F,z){F=F||10,z=z|0||1;var J;if(F===16||F==="hex"){J="";for(var te=0,se=0,oe=0;oe<this.length;oe++){var ie=this.words[oe],G=((ie<<te|se)&16777215).toString(16);se=ie>>>24-te&16777215,te+=2,te>=26&&(te-=26,oe--),se!==0||oe!==this.length-1?J=D[6-G.length]+G+J:J=G+J}for(se!==0&&(J=se.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(F===(F|0)&&F>=2&&F<=36){var j=L[F],ee=V[F];J="";var pe=this.clone();for(pe.negative=0;!pe.isZero();){var he=pe.modrn(ee).toString(F);pe=pe.idivn(ee),pe.isZero()?J=he+J:J=D[j-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}E(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&E(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},C.prototype.toJSON=function(){return this.toString(16,2)},T&&(C.prototype.toBuffer=function(F,z){return this.toArrayLike(T,F,z)}),C.prototype.toArray=function(F,z){return this.toArrayLike(Array,F,z)};var U=function(F,z){return F.allocUnsafe?F.allocUnsafe(z):new F(z)};C.prototype.toArrayLike=function(F,z,J){this._strip();var te=this.byteLength(),se=J||Math.max(1,te);E(te<=se,"byte array longer than desired length"),E(se>0,"Requested array length <= 0");var oe=U(F,se),ie=z==="le"?"LE":"BE";return this["_toArrayLike"+ie](oe,te),oe},C.prototype._toArrayLikeLE=function(F,z){for(var J=0,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J++]=ie&255,J<F.length&&(F[J++]=ie>>8&255),J<F.length&&(F[J++]=ie>>16&255),oe===6?(J<F.length&&(F[J++]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J<F.length)for(F[J++]=te;J<F.length;)F[J++]=0},C.prototype._toArrayLikeBE=function(F,z){for(var J=F.length-1,te=0,se=0,oe=0;se<this.length;se++){var ie=this.words[se]<<oe|te;F[J--]=ie&255,J>=0&&(F[J--]=ie>>8&255),J>=0&&(F[J--]=ie>>16&255),oe===6?(J>=0&&(F[J--]=ie>>24&255),te=0,oe=0):(te=ie>>>24,oe+=2)}if(J>=0)for(F[J--]=te;J>=0;)F[J--]=0},Math.clz32?C.prototype._countBits=function(F){return 32-Math.clz32(F)}:C.prototype._countBits=function(F){var z=F,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},C.prototype._zeroBits=function(F){if(F===0)return 26;var z=F,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},C.prototype.bitLength=function(){var F=this.words[this.length-1],z=this._countBits(F);return(this.length-1)*26+z};function q(X){for(var F=new Array(X.bitLength()),z=0;z<F.length;z++){var J=z/26|0,te=z%26;F[z]=X.words[J]>>>te&1}return F}C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(F+=J,J!==26)break}return F},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},C.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return this.negative!==0},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var z=0;z<F.length;z++)this.words[z]=this.words[z]|F.words[z];return this._strip()},C.prototype.ior=function(F){return E((this.negative|F.negative)===0),this.iuor(F)},C.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},C.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},C.prototype.iuand=function(F){var z;this.length>F.length?z=F:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&F.words[J];return this.length=z.length,this._strip()},C.prototype.iand=function(F){return E((this.negative|F.negative)===0),this.iuand(F)},C.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},C.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},C.prototype.iuxor=function(F){var z,J;this.length>F.length?(z=this,J=F):(z=F,J=this);for(var te=0;te<J.length;te++)this.words[te]=z.words[te]^J.words[te];if(this!==z)for(;te<z.length;te++)this.words[te]=z.words[te];return this.length=z.length,this._strip()},C.prototype.ixor=function(F){return E((this.negative|F.negative)===0),this.iuxor(F)},C.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},C.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},C.prototype.inotn=function(F){E(typeof F=="number"&&F>=0);var z=Math.ceil(F/26)|0,J=F%26;this._expand(z),J>0&&z--;for(var te=0;te<z;te++)this.words[te]=~this.words[te]&67108863;return J>0&&(this.words[te]=~this.words[te]&67108863>>26-J),this._strip()},C.prototype.notn=function(F){return this.clone().inotn(F)},C.prototype.setn=function(F,z){E(typeof F=="number"&&F>=0);var J=F/26|0,te=F%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<te:this.words[J]=this.words[J]&~(1<<te),this._strip()},C.prototype.iadd=function(F){var z;if(this.negative!==0&&F.negative===0)return this.negative=0,z=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,z=this.isub(F),F.negative=1,z._normSign();var J,te;this.length>F.length?(J=this,te=F):(J=F,te=this);for(var se=0,oe=0;oe<te.length;oe++)z=(J.words[oe]|0)+(te.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;for(;se!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+se,this.words[oe]=z&67108863,se=z>>>26;if(this.length=J.length,se!==0)this.words[this.length]=se,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},C.prototype.add=function(F){var z;return F.negative!==0&&this.negative===0?(F.negative=0,z=this.sub(F),F.negative^=1,z):F.negative===0&&this.negative!==0?(this.negative=0,z=F.sub(this),this.negative=1,z):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},C.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var z=this.iadd(F);return F.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var J=this.cmp(F);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var te,se;J>0?(te=this,se=F):(te=F,se=this);for(var oe=0,ie=0;ie<se.length;ie++)z=(te.words[ie]|0)-(se.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;for(;oe!==0&&ie<te.length;ie++)z=(te.words[ie]|0)+oe,oe=z>>26,this.words[ie]=z&67108863;if(oe===0&&ie<te.length&&te!==this)for(;ie<te.length;ie++)this.words[ie]=te.words[ie];return this.length=Math.max(this.length,ie),te!==this&&(this.negative=1),this._strip()},C.prototype.sub=function(F){return this.clone().isub(F)};function H(X,F,z){z.negative=F.negative^X.negative;var J=X.length+F.length|0;z.length=J,J=J-1|0;var te=X.words[0]|0,se=F.words[0]|0,oe=te*se,ie=oe&67108863,G=oe/67108864|0;z.words[0]=ie;for(var j=1;j<J;j++){for(var ee=G>>>26,pe=G&67108863,he=Math.min(j,F.length-1),Se=Math.max(0,j-X.length+1);Se<=he;Se++){var we=j-Se|0;te=X.words[we]|0,se=F.words[Se]|0,oe=te*se+pe,ee+=oe/67108864|0,pe=oe&67108863}z.words[j]=pe|0,G=ee|0}return G!==0?z.words[j]=G|0:z.length--,z._strip()}var W=function(F,z,J){var te=F.words,se=z.words,oe=J.words,ie=0,G,j,ee,pe=te[0]|0,he=pe&8191,Se=pe>>>13,we=te[1]|0,xe=we&8191,Ee=we>>>13,ye=te[2]|0,Ce=ye&8191,ve=ye>>>13,Be=te[3]|0,me=Be&8191,Ie=Be>>>13,Ve=te[4]|0,Me=Ve&8191,Ne=Ve>>>13,Pe=te[5]|0,He=Pe&8191,We=Pe>>>13,Ke=te[6]|0,Ge=Ke&8191,nt=Ke>>>13,ot=te[7]|0,Ze=ot&8191,Re=ot>>>13,be=te[8]|0,Ae=be&8191,Le=be>>>13,Xe=te[9]|0,Qe=Xe&8191,et=Xe>>>13,St=se[0]|0,mt=St&8191,dt=St>>>13,jt=se[1]|0,Ct=jt&8191,Rt=jt>>>13,ur=se[2]|0,Gt=ur&8191,Nt=ur>>>13,er=se[3]|0,Mt=er&8191,kt=er>>>13,tr=se[4]|0,Vt=tr&8191,Bt=tr>>>13,ar=se[5]|0,qt=ar&8191,Tt=ar>>>13,ir=se[6]|0,qe=ir&8191,Oe=ir>>>13,De=se[7]|0,ue=De&8191,ke=De>>>13,Fe=se[8]|0,Ue=Fe&8191,ze=Fe>>>13,Ye=se[9]|0,rt=Ye&8191,at=Ye>>>13;J.negative=F.negative^z.negative,J.length=19,G=Math.imul(he,mt),j=Math.imul(he,dt),j=j+Math.imul(Se,mt)|0,ee=Math.imul(Se,dt);var ct=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(xe,mt),j=Math.imul(xe,dt),j=j+Math.imul(Ee,mt)|0,ee=Math.imul(Ee,dt),G=G+Math.imul(he,Ct)|0,j=j+Math.imul(he,Rt)|0,j=j+Math.imul(Se,Ct)|0,ee=ee+Math.imul(Se,Rt)|0;var st=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(Ce,mt),j=Math.imul(Ce,dt),j=j+Math.imul(ve,mt)|0,ee=Math.imul(ve,dt),G=G+Math.imul(xe,Ct)|0,j=j+Math.imul(xe,Rt)|0,j=j+Math.imul(Ee,Ct)|0,ee=ee+Math.imul(Ee,Rt)|0,G=G+Math.imul(he,Gt)|0,j=j+Math.imul(he,Nt)|0,j=j+Math.imul(Se,Gt)|0,ee=ee+Math.imul(Se,Nt)|0;var lt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,G=Math.imul(me,mt),j=Math.imul(me,dt),j=j+Math.imul(Ie,mt)|0,ee=Math.imul(Ie,dt),G=G+Math.imul(Ce,Ct)|0,j=j+Math.imul(Ce,Rt)|0,j=j+Math.imul(ve,Ct)|0,ee=ee+Math.imul(ve,Rt)|0,G=G+Math.imul(xe,Gt)|0,j=j+Math.imul(xe,Nt)|0,j=j+Math.imul(Ee,Gt)|0,ee=ee+Math.imul(Ee,Nt)|0,G=G+Math.imul(he,Mt)|0,j=j+Math.imul(he,kt)|0,j=j+Math.imul(Se,Mt)|0,ee=ee+Math.imul(Se,kt)|0;var ht=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,G=Math.imul(Me,mt),j=Math.imul(Me,dt),j=j+Math.imul(Ne,mt)|0,ee=Math.imul(Ne,dt),G=G+Math.imul(me,Ct)|0,j=j+Math.imul(me,Rt)|0,j=j+Math.imul(Ie,Ct)|0,ee=ee+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ce,Gt)|0,j=j+Math.imul(Ce,Nt)|0,j=j+Math.imul(ve,Gt)|0,ee=ee+Math.imul(ve,Nt)|0,G=G+Math.imul(xe,Mt)|0,j=j+Math.imul(xe,kt)|0,j=j+Math.imul(Ee,Mt)|0,ee=ee+Math.imul(Ee,kt)|0,G=G+Math.imul(he,Vt)|0,j=j+Math.imul(he,Bt)|0,j=j+Math.imul(Se,Vt)|0,ee=ee+Math.imul(Se,Bt)|0;var bt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(bt>>>26)|0,bt&=67108863,G=Math.imul(He,mt),j=Math.imul(He,dt),j=j+Math.imul(We,mt)|0,ee=Math.imul(We,dt),G=G+Math.imul(Me,Ct)|0,j=j+Math.imul(Me,Rt)|0,j=j+Math.imul(Ne,Ct)|0,ee=ee+Math.imul(Ne,Rt)|0,G=G+Math.imul(me,Gt)|0,j=j+Math.imul(me,Nt)|0,j=j+Math.imul(Ie,Gt)|0,ee=ee+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ce,Mt)|0,j=j+Math.imul(Ce,kt)|0,j=j+Math.imul(ve,Mt)|0,ee=ee+Math.imul(ve,kt)|0,G=G+Math.imul(xe,Vt)|0,j=j+Math.imul(xe,Bt)|0,j=j+Math.imul(Ee,Vt)|0,ee=ee+Math.imul(Ee,Bt)|0,G=G+Math.imul(he,qt)|0,j=j+Math.imul(he,Tt)|0,j=j+Math.imul(Se,qt)|0,ee=ee+Math.imul(Se,Tt)|0;var Et=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,mt),j=Math.imul(Ge,dt),j=j+Math.imul(nt,mt)|0,ee=Math.imul(nt,dt),G=G+Math.imul(He,Ct)|0,j=j+Math.imul(He,Rt)|0,j=j+Math.imul(We,Ct)|0,ee=ee+Math.imul(We,Rt)|0,G=G+Math.imul(Me,Gt)|0,j=j+Math.imul(Me,Nt)|0,j=j+Math.imul(Ne,Gt)|0,ee=ee+Math.imul(Ne,Nt)|0,G=G+Math.imul(me,Mt)|0,j=j+Math.imul(me,kt)|0,j=j+Math.imul(Ie,Mt)|0,ee=ee+Math.imul(Ie,kt)|0,G=G+Math.imul(Ce,Vt)|0,j=j+Math.imul(Ce,Bt)|0,j=j+Math.imul(ve,Vt)|0,ee=ee+Math.imul(ve,Bt)|0,G=G+Math.imul(xe,qt)|0,j=j+Math.imul(xe,Tt)|0,j=j+Math.imul(Ee,qt)|0,ee=ee+Math.imul(Ee,Tt)|0,G=G+Math.imul(he,qe)|0,j=j+Math.imul(he,Oe)|0,j=j+Math.imul(Se,qe)|0,ee=ee+Math.imul(Se,Oe)|0;var gt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,mt),j=Math.imul(Ze,dt),j=j+Math.imul(Re,mt)|0,ee=Math.imul(Re,dt),G=G+Math.imul(Ge,Ct)|0,j=j+Math.imul(Ge,Rt)|0,j=j+Math.imul(nt,Ct)|0,ee=ee+Math.imul(nt,Rt)|0,G=G+Math.imul(He,Gt)|0,j=j+Math.imul(He,Nt)|0,j=j+Math.imul(We,Gt)|0,ee=ee+Math.imul(We,Nt)|0,G=G+Math.imul(Me,Mt)|0,j=j+Math.imul(Me,kt)|0,j=j+Math.imul(Ne,Mt)|0,ee=ee+Math.imul(Ne,kt)|0,G=G+Math.imul(me,Vt)|0,j=j+Math.imul(me,Bt)|0,j=j+Math.imul(Ie,Vt)|0,ee=ee+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ce,qt)|0,j=j+Math.imul(Ce,Tt)|0,j=j+Math.imul(ve,qt)|0,ee=ee+Math.imul(ve,Tt)|0,G=G+Math.imul(xe,qe)|0,j=j+Math.imul(xe,Oe)|0,j=j+Math.imul(Ee,qe)|0,ee=ee+Math.imul(Ee,Oe)|0,G=G+Math.imul(he,ue)|0,j=j+Math.imul(he,ke)|0,j=j+Math.imul(Se,ue)|0,ee=ee+Math.imul(Se,ke)|0;var wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,G=Math.imul(Ae,mt),j=Math.imul(Ae,dt),j=j+Math.imul(Le,mt)|0,ee=Math.imul(Le,dt),G=G+Math.imul(Ze,Ct)|0,j=j+Math.imul(Ze,Rt)|0,j=j+Math.imul(Re,Ct)|0,ee=ee+Math.imul(Re,Rt)|0,G=G+Math.imul(Ge,Gt)|0,j=j+Math.imul(Ge,Nt)|0,j=j+Math.imul(nt,Gt)|0,ee=ee+Math.imul(nt,Nt)|0,G=G+Math.imul(He,Mt)|0,j=j+Math.imul(He,kt)|0,j=j+Math.imul(We,Mt)|0,ee=ee+Math.imul(We,kt)|0,G=G+Math.imul(Me,Vt)|0,j=j+Math.imul(Me,Bt)|0,j=j+Math.imul(Ne,Vt)|0,ee=ee+Math.imul(Ne,Bt)|0,G=G+Math.imul(me,qt)|0,j=j+Math.imul(me,Tt)|0,j=j+Math.imul(Ie,qt)|0,ee=ee+Math.imul(Ie,Tt)|0,G=G+Math.imul(Ce,qe)|0,j=j+Math.imul(Ce,Oe)|0,j=j+Math.imul(ve,qe)|0,ee=ee+Math.imul(ve,Oe)|0,G=G+Math.imul(xe,ue)|0,j=j+Math.imul(xe,ke)|0,j=j+Math.imul(Ee,ue)|0,ee=ee+Math.imul(Ee,ke)|0,G=G+Math.imul(he,Ue)|0,j=j+Math.imul(he,ze)|0,j=j+Math.imul(Se,Ue)|0,ee=ee+Math.imul(Se,ze)|0;var Dt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,G=Math.imul(Qe,mt),j=Math.imul(Qe,dt),j=j+Math.imul(et,mt)|0,ee=Math.imul(et,dt),G=G+Math.imul(Ae,Ct)|0,j=j+Math.imul(Ae,Rt)|0,j=j+Math.imul(Le,Ct)|0,ee=ee+Math.imul(Le,Rt)|0,G=G+Math.imul(Ze,Gt)|0,j=j+Math.imul(Ze,Nt)|0,j=j+Math.imul(Re,Gt)|0,ee=ee+Math.imul(Re,Nt)|0,G=G+Math.imul(Ge,Mt)|0,j=j+Math.imul(Ge,kt)|0,j=j+Math.imul(nt,Mt)|0,ee=ee+Math.imul(nt,kt)|0,G=G+Math.imul(He,Vt)|0,j=j+Math.imul(He,Bt)|0,j=j+Math.imul(We,Vt)|0,ee=ee+Math.imul(We,Bt)|0,G=G+Math.imul(Me,qt)|0,j=j+Math.imul(Me,Tt)|0,j=j+Math.imul(Ne,qt)|0,ee=ee+Math.imul(Ne,Tt)|0,G=G+Math.imul(me,qe)|0,j=j+Math.imul(me,Oe)|0,j=j+Math.imul(Ie,qe)|0,ee=ee+Math.imul(Ie,Oe)|0,G=G+Math.imul(Ce,ue)|0,j=j+Math.imul(Ce,ke)|0,j=j+Math.imul(ve,ue)|0,ee=ee+Math.imul(ve,ke)|0,G=G+Math.imul(xe,Ue)|0,j=j+Math.imul(xe,ze)|0,j=j+Math.imul(Ee,Ue)|0,ee=ee+Math.imul(Ee,ze)|0,G=G+Math.imul(he,rt)|0,j=j+Math.imul(he,at)|0,j=j+Math.imul(Se,rt)|0,ee=ee+Math.imul(Se,at)|0;var Ft=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Qe,Ct),j=Math.imul(Qe,Rt),j=j+Math.imul(et,Ct)|0,ee=Math.imul(et,Rt),G=G+Math.imul(Ae,Gt)|0,j=j+Math.imul(Ae,Nt)|0,j=j+Math.imul(Le,Gt)|0,ee=ee+Math.imul(Le,Nt)|0,G=G+Math.imul(Ze,Mt)|0,j=j+Math.imul(Ze,kt)|0,j=j+Math.imul(Re,Mt)|0,ee=ee+Math.imul(Re,kt)|0,G=G+Math.imul(Ge,Vt)|0,j=j+Math.imul(Ge,Bt)|0,j=j+Math.imul(nt,Vt)|0,ee=ee+Math.imul(nt,Bt)|0,G=G+Math.imul(He,qt)|0,j=j+Math.imul(He,Tt)|0,j=j+Math.imul(We,qt)|0,ee=ee+Math.imul(We,Tt)|0,G=G+Math.imul(Me,qe)|0,j=j+Math.imul(Me,Oe)|0,j=j+Math.imul(Ne,qe)|0,ee=ee+Math.imul(Ne,Oe)|0,G=G+Math.imul(me,ue)|0,j=j+Math.imul(me,ke)|0,j=j+Math.imul(Ie,ue)|0,ee=ee+Math.imul(Ie,ke)|0,G=G+Math.imul(Ce,Ue)|0,j=j+Math.imul(Ce,ze)|0,j=j+Math.imul(ve,Ue)|0,ee=ee+Math.imul(ve,ze)|0,G=G+Math.imul(xe,rt)|0,j=j+Math.imul(xe,at)|0,j=j+Math.imul(Ee,rt)|0,ee=ee+Math.imul(Ee,at)|0;var Kt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Qe,Gt),j=Math.imul(Qe,Nt),j=j+Math.imul(et,Gt)|0,ee=Math.imul(et,Nt),G=G+Math.imul(Ae,Mt)|0,j=j+Math.imul(Ae,kt)|0,j=j+Math.imul(Le,Mt)|0,ee=ee+Math.imul(Le,kt)|0,G=G+Math.imul(Ze,Vt)|0,j=j+Math.imul(Ze,Bt)|0,j=j+Math.imul(Re,Vt)|0,ee=ee+Math.imul(Re,Bt)|0,G=G+Math.imul(Ge,qt)|0,j=j+Math.imul(Ge,Tt)|0,j=j+Math.imul(nt,qt)|0,ee=ee+Math.imul(nt,Tt)|0,G=G+Math.imul(He,qe)|0,j=j+Math.imul(He,Oe)|0,j=j+Math.imul(We,qe)|0,ee=ee+Math.imul(We,Oe)|0,G=G+Math.imul(Me,ue)|0,j=j+Math.imul(Me,ke)|0,j=j+Math.imul(Ne,ue)|0,ee=ee+Math.imul(Ne,ke)|0,G=G+Math.imul(me,Ue)|0,j=j+Math.imul(me,ze)|0,j=j+Math.imul(Ie,Ue)|0,ee=ee+Math.imul(Ie,ze)|0,G=G+Math.imul(Ce,rt)|0,j=j+Math.imul(Ce,at)|0,j=j+Math.imul(ve,rt)|0,ee=ee+Math.imul(ve,at)|0;var Ut=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,G=Math.imul(Qe,Mt),j=Math.imul(Qe,kt),j=j+Math.imul(et,Mt)|0,ee=Math.imul(et,kt),G=G+Math.imul(Ae,Vt)|0,j=j+Math.imul(Ae,Bt)|0,j=j+Math.imul(Le,Vt)|0,ee=ee+Math.imul(Le,Bt)|0,G=G+Math.imul(Ze,qt)|0,j=j+Math.imul(Ze,Tt)|0,j=j+Math.imul(Re,qt)|0,ee=ee+Math.imul(Re,Tt)|0,G=G+Math.imul(Ge,qe)|0,j=j+Math.imul(Ge,Oe)|0,j=j+Math.imul(nt,qe)|0,ee=ee+Math.imul(nt,Oe)|0,G=G+Math.imul(He,ue)|0,j=j+Math.imul(He,ke)|0,j=j+Math.imul(We,ue)|0,ee=ee+Math.imul(We,ke)|0,G=G+Math.imul(Me,Ue)|0,j=j+Math.imul(Me,ze)|0,j=j+Math.imul(Ne,Ue)|0,ee=ee+Math.imul(Ne,ze)|0,G=G+Math.imul(me,rt)|0,j=j+Math.imul(me,at)|0,j=j+Math.imul(Ie,rt)|0,ee=ee+Math.imul(Ie,at)|0;var Xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,G=Math.imul(Qe,Vt),j=Math.imul(Qe,Bt),j=j+Math.imul(et,Vt)|0,ee=Math.imul(et,Bt),G=G+Math.imul(Ae,qt)|0,j=j+Math.imul(Ae,Tt)|0,j=j+Math.imul(Le,qt)|0,ee=ee+Math.imul(Le,Tt)|0,G=G+Math.imul(Ze,qe)|0,j=j+Math.imul(Ze,Oe)|0,j=j+Math.imul(Re,qe)|0,ee=ee+Math.imul(Re,Oe)|0,G=G+Math.imul(Ge,ue)|0,j=j+Math.imul(Ge,ke)|0,j=j+Math.imul(nt,ue)|0,ee=ee+Math.imul(nt,ke)|0,G=G+Math.imul(He,Ue)|0,j=j+Math.imul(He,ze)|0,j=j+Math.imul(We,Ue)|0,ee=ee+Math.imul(We,ze)|0,G=G+Math.imul(Me,rt)|0,j=j+Math.imul(Me,at)|0,j=j+Math.imul(Ne,rt)|0,ee=ee+Math.imul(Ne,at)|0;var Zt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,G=Math.imul(Qe,qt),j=Math.imul(Qe,Tt),j=j+Math.imul(et,qt)|0,ee=Math.imul(et,Tt),G=G+Math.imul(Ae,qe)|0,j=j+Math.imul(Ae,Oe)|0,j=j+Math.imul(Le,qe)|0,ee=ee+Math.imul(Le,Oe)|0,G=G+Math.imul(Ze,ue)|0,j=j+Math.imul(Ze,ke)|0,j=j+Math.imul(Re,ue)|0,ee=ee+Math.imul(Re,ke)|0,G=G+Math.imul(Ge,Ue)|0,j=j+Math.imul(Ge,ze)|0,j=j+Math.imul(nt,Ue)|0,ee=ee+Math.imul(nt,ze)|0,G=G+Math.imul(He,rt)|0,j=j+Math.imul(He,at)|0,j=j+Math.imul(We,rt)|0,ee=ee+Math.imul(We,at)|0;var Wt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Qe,qe),j=Math.imul(Qe,Oe),j=j+Math.imul(et,qe)|0,ee=Math.imul(et,Oe),G=G+Math.imul(Ae,ue)|0,j=j+Math.imul(Ae,ke)|0,j=j+Math.imul(Le,ue)|0,ee=ee+Math.imul(Le,ke)|0,G=G+Math.imul(Ze,Ue)|0,j=j+Math.imul(Ze,ze)|0,j=j+Math.imul(Re,Ue)|0,ee=ee+Math.imul(Re,ze)|0,G=G+Math.imul(Ge,rt)|0,j=j+Math.imul(Ge,at)|0,j=j+Math.imul(nt,rt)|0,ee=ee+Math.imul(nt,at)|0;var yt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(Qe,ue),j=Math.imul(Qe,ke),j=j+Math.imul(et,ue)|0,ee=Math.imul(et,ke),G=G+Math.imul(Ae,Ue)|0,j=j+Math.imul(Ae,ze)|0,j=j+Math.imul(Le,Ue)|0,ee=ee+Math.imul(Le,ze)|0,G=G+Math.imul(Ze,rt)|0,j=j+Math.imul(Ze,at)|0,j=j+Math.imul(Re,rt)|0,ee=ee+Math.imul(Re,at)|0;var xt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Qe,Ue),j=Math.imul(Qe,ze),j=j+Math.imul(et,Ue)|0,ee=Math.imul(et,ze),G=G+Math.imul(Ae,rt)|0,j=j+Math.imul(Ae,at)|0,j=j+Math.imul(Le,rt)|0,ee=ee+Math.imul(Le,at)|0;var Pt=(ie+G|0)+((j&8191)<<13)|0;ie=(ee+(j>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,G=Math.imul(Qe,rt),j=Math.imul(Qe,at),j=j+Math.imul(et,rt)|0,ee=Math.imul(et,at);var It=(ie+G|0)+((j&8191)<<13)|0;return ie=(ee+(j>>>13)|0)+(It>>>26)|0,It&=67108863,oe[0]=ct,oe[1]=st,oe[2]=lt,oe[3]=ht,oe[4]=bt,oe[5]=Et,oe[6]=gt,oe[7]=wt,oe[8]=Dt,oe[9]=Ft,oe[10]=Kt,oe[11]=Ut,oe[12]=Xt,oe[13]=Zt,oe[14]=Wt,oe[15]=yt,oe[16]=xt,oe[17]=Pt,oe[18]=It,ie!==0&&(oe[19]=ie,J.length++),J};Math.imul||(W=H);function Q(X,F,z){z.negative=F.negative^X.negative,z.length=X.length+F.length;for(var J=0,te=0,se=0;se<z.length-1;se++){var oe=te;te=0;for(var ie=J&67108863,G=Math.min(se,F.length-1),j=Math.max(0,se-X.length+1);j<=G;j++){var ee=se-j,pe=X.words[ee]|0,he=F.words[j]|0,Se=pe*he,we=Se&67108863;oe=oe+(Se/67108864|0)|0,we=we+ie|0,ie=we&67108863,oe=oe+(we>>>26)|0,te+=oe>>>26,oe&=67108863}z.words[se]=ie,J=oe,oe=te}return J!==0?z.words[se]=J:z.length--,z._strip()}function re(X,F,z){return Q(X,F,z)}C.prototype.mulTo=function(F,z){var J,te=this.length+F.length;return this.length===10&&F.length===10?J=W(this,F,z):te<63?J=H(this,F,z):te<1024?J=Q(this,F,z):J=re(this,F,z),J},C.prototype.mul=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),this.mulTo(F,z)},C.prototype.mulf=function(F){var z=new C(null);return z.words=new Array(this.length+F.length),re(this,F,z)},C.prototype.imul=function(F){return this.clone().mulTo(F,this)},C.prototype.imuln=function(F){var z=F<0;z&&(F=-F),E(typeof F=="number"),E(F<67108864);for(var J=0,te=0;te<this.length;te++){var se=(this.words[te]|0)*F,oe=(se&67108863)+(J&67108863);J>>=26,J+=se/67108864|0,J+=oe>>>26,this.words[te]=oe&67108863}return J!==0&&(this.words[te]=J,this.length++),z?this.ineg():this},C.prototype.muln=function(F){return this.clone().imuln(F)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(F){var z=q(F);if(z.length===0)return new C(1);for(var J=this,te=0;te<z.length&&z[te]===0;te++,J=J.sqr());if(++te<z.length)for(var se=J.sqr();te<z.length;te++,se=se.sqr())z[te]!==0&&(J=J.mul(se));return J},C.prototype.iushln=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=67108863>>>26-z<<26-z,se;if(z!==0){var oe=0;for(se=0;se<this.length;se++){var ie=this.words[se]&te,G=(this.words[se]|0)-ie<<z;this.words[se]=G|oe,oe=ie>>>26-z}oe&&(this.words[se]=oe,this.length++)}if(J!==0){for(se=this.length-1;se>=0;se--)this.words[se+J]=this.words[se];for(se=0;se<J;se++)this.words[se]=0;this.length+=J}return this._strip()},C.prototype.ishln=function(F){return E(this.negative===0),this.iushln(F)},C.prototype.iushrn=function(F,z,J){E(typeof F=="number"&&F>=0);var te;z?te=(z-z%26)/26:te=0;var se=F%26,oe=Math.min((F-se)/26,this.length),ie=67108863^67108863>>>se<<se,G=J;if(te-=oe,te=Math.max(0,te),G){for(var j=0;j<oe;j++)G.words[j]=this.words[j];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,j=0;j<this.length;j++)this.words[j]=this.words[j+oe];else this.words[0]=0,this.length=1;var ee=0;for(j=this.length-1;j>=0&&(ee!==0||j>=te);j--){var pe=this.words[j]|0;this.words[j]=ee<<26-se|pe>>>se,ee=pe&ie}return G&&ee!==0&&(G.words[G.length++]=ee),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},C.prototype.ishrn=function(F,z,J){return E(this.negative===0),this.iushrn(F,z,J)},C.prototype.shln=function(F){return this.clone().ishln(F)},C.prototype.ushln=function(F){return this.clone().iushln(F)},C.prototype.shrn=function(F){return this.clone().ishrn(F)},C.prototype.ushrn=function(F){return this.clone().iushrn(F)},C.prototype.testn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return!1;var se=this.words[J];return!!(se&te)},C.prototype.imaskn=function(F){E(typeof F=="number"&&F>=0);var z=F%26,J=(F-z)/26;if(E(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var te=67108863^67108863>>>z<<z;this.words[this.length-1]&=te}return this._strip()},C.prototype.maskn=function(F){return this.clone().imaskn(F)},C.prototype.iaddn=function(F){return E(typeof F=="number"),E(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<=F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},C.prototype._iaddn=function(F){this.words[0]+=F;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},C.prototype.isubn=function(F){if(E(typeof F=="number"),E(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},C.prototype.addn=function(F){return this.clone().iaddn(F)},C.prototype.subn=function(F){return this.clone().isubn(F)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(F,z,J){var te=F.length+J,se;this._expand(te);var oe,ie=0;for(se=0;se<F.length;se++){oe=(this.words[se+J]|0)+ie;var G=(F.words[se]|0)*z;oe-=G&67108863,ie=(oe>>26)-(G/67108864|0),this.words[se+J]=oe&67108863}for(;se<this.length-J;se++)oe=(this.words[se+J]|0)+ie,ie=oe>>26,this.words[se+J]=oe&67108863;if(ie===0)return this._strip();for(E(ie===-1),ie=0,se=0;se<this.length;se++)oe=-(this.words[se]|0)+ie,ie=oe>>26,this.words[se]=oe&67108863;return this.negative=1,this._strip()},C.prototype._wordDiv=function(F,z){var J=this.length-F.length,te=this.clone(),se=F,oe=se.words[se.length-1]|0,ie=this._countBits(oe);J=26-ie,J!==0&&(se=se.ushln(J),te.iushln(J),oe=se.words[se.length-1]|0);var G=te.length-se.length,j;if(z!=="mod"){j=new C(null),j.length=G+1,j.words=new Array(j.length);for(var ee=0;ee<j.length;ee++)j.words[ee]=0}var pe=te.clone()._ishlnsubmul(se,1,G);pe.negative===0&&(te=pe,j&&(j.words[G]=1));for(var he=G-1;he>=0;he--){var Se=(te.words[se.length+he]|0)*67108864+(te.words[se.length+he-1]|0);for(Se=Math.min(Se/oe|0,67108863),te._ishlnsubmul(se,Se,he);te.negative!==0;)Se--,te.negative=0,te._ishlnsubmul(se,1,he),te.isZero()||(te.negative^=1);j&&(j.words[he]=Se)}return j&&j._strip(),te._strip(),z!=="div"&&J!==0&&te.iushrn(J),{div:j||null,mod:te}},C.prototype.divmod=function(F,z,J){if(E(!F.isZero()),this.isZero())return{div:new C(0),mod:new C(0)};var te,se,oe;return this.negative!==0&&F.negative===0?(oe=this.neg().divmod(F,z),z!=="mod"&&(te=oe.div.neg()),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.iadd(F)),{div:te,mod:se}):this.negative===0&&F.negative!==0?(oe=this.divmod(F.neg(),z),z!=="mod"&&(te=oe.div.neg()),{div:te,mod:oe.mod}):this.negative&F.negative?(oe=this.neg().divmod(F.neg(),z),z!=="div"&&(se=oe.mod.neg(),J&&se.negative!==0&&se.isub(F)),{div:oe.div,mod:se}):F.length>this.length||this.cmp(F)<0?{div:new C(0),mod:this}:F.length===1?z==="div"?{div:this.divn(F.words[0]),mod:null}:z==="mod"?{div:null,mod:new C(this.modrn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new C(this.modrn(F.words[0]))}:this._wordDiv(F,z)},C.prototype.div=function(F){return this.divmod(F,"div",!1).div},C.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},C.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},C.prototype.divRound=function(F){var z=this.divmod(F);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(F):z.mod,te=F.ushrn(1),se=F.andln(1),oe=J.cmp(te);return oe<0||se===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},C.prototype.modrn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=(1<<26)%F,te=0,se=this.length-1;se>=0;se--)te=(J*te+(this.words[se]|0))%F;return z?-te:te},C.prototype.modn=function(F){return this.modrn(F)},C.prototype.idivn=function(F){var z=F<0;z&&(F=-F),E(F<=67108863);for(var J=0,te=this.length-1;te>=0;te--){var se=(this.words[te]|0)+J*67108864;this.words[te]=se/F|0,J=se%F}return this._strip(),z?this.ineg():this},C.prototype.divn=function(F){return this.clone().idivn(F)},C.prototype.egcd=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=new C(0),ie=new C(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var j=J.clone(),ee=z.clone();!z.isZero();){for(var pe=0,he=1;!(z.words[0]&he)&&pe<26;++pe,he<<=1);if(pe>0)for(z.iushrn(pe);pe-- >0;)(te.isOdd()||se.isOdd())&&(te.iadd(j),se.isub(ee)),te.iushrn(1),se.iushrn(1);for(var Se=0,we=1;!(J.words[0]&we)&&Se<26;++Se,we<<=1);if(Se>0)for(J.iushrn(Se);Se-- >0;)(oe.isOdd()||ie.isOdd())&&(oe.iadd(j),ie.isub(ee)),oe.iushrn(1),ie.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(oe),se.isub(ie)):(J.isub(z),oe.isub(te),ie.isub(se))}return{a:oe,b:ie,gcd:J.iushln(G)}},C.prototype._invmp=function(F){E(F.negative===0),E(!F.isZero());var z=this,J=F.clone();z.negative!==0?z=z.umod(F):z=z.clone();for(var te=new C(1),se=new C(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var ie=0,G=1;!(z.words[0]&G)&&ie<26;++ie,G<<=1);if(ie>0)for(z.iushrn(ie);ie-- >0;)te.isOdd()&&te.iadd(oe),te.iushrn(1);for(var j=0,ee=1;!(J.words[0]&ee)&&j<26;++j,ee<<=1);if(j>0)for(J.iushrn(j);j-- >0;)se.isOdd()&&se.iadd(oe),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),te.isub(se)):(J.isub(z),se.isub(te))}var pe;return z.cmpn(1)===0?pe=te:pe=se,pe.cmpn(0)<0&&pe.iadd(F),pe},C.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var z=this.clone(),J=F.clone();z.negative=0,J.negative=0;for(var te=0;z.isEven()&&J.isEven();te++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var se=z.cmp(J);if(se<0){var oe=z;z=J,J=oe}else if(se===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(te)},C.prototype.invm=function(F){return this.egcd(F).a.umod(F)},C.prototype.isEven=function(){return(this.words[0]&1)===0},C.prototype.isOdd=function(){return(this.words[0]&1)===1},C.prototype.andln=function(F){return this.words[0]&F},C.prototype.bincn=function(F){E(typeof F=="number");var z=F%26,J=(F-z)/26,te=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=te,this;for(var se=te,oe=J;se!==0&&oe<this.length;oe++){var ie=this.words[oe]|0;ie+=se,se=ie>>>26,ie&=67108863,this.words[oe]=ie}return se!==0&&(this.words[oe]=se,this.length++),this},C.prototype.isZero=function(){return this.length===1&&this.words[0]===0},C.prototype.cmpn=function(F){var z=F<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(F=-F),E(F<=67108863,"Number is too big");var te=this.words[0]|0;J=te===F?0:te<F?-1:1}return this.negative!==0?-J|0:J},C.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var z=this.ucmp(F);return this.negative!==0?-z|0:z},C.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var te=this.words[J]|0,se=F.words[J]|0;if(te!==se){te<se?z=-1:te>se&&(z=1);break}}return z},C.prototype.gtn=function(F){return this.cmpn(F)===1},C.prototype.gt=function(F){return this.cmp(F)===1},C.prototype.gten=function(F){return this.cmpn(F)>=0},C.prototype.gte=function(F){return this.cmp(F)>=0},C.prototype.ltn=function(F){return this.cmpn(F)===-1},C.prototype.lt=function(F){return this.cmp(F)===-1},C.prototype.lten=function(F){return this.cmpn(F)<=0},C.prototype.lte=function(F){return this.cmp(F)<=0},C.prototype.eqn=function(F){return this.cmpn(F)===0},C.prototype.eq=function(F){return this.cmp(F)===0},C.red=function(F){return new _e(F)},C.prototype.toRed=function(F){return E(!this.red,"Already a number in reduction context"),E(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},C.prototype.fromRed=function(){return E(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(F){return this.red=F,this},C.prototype.forceRed=function(F){return E(!this.red,"Already a number in reduction context"),this._forceRed(F)},C.prototype.redAdd=function(F){return E(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},C.prototype.redIAdd=function(F){return E(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},C.prototype.redSub=function(F){return E(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},C.prototype.redISub=function(F){return E(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},C.prototype.redShl=function(F){return E(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},C.prototype.redMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},C.prototype.redIMul=function(F){return E(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},C.prototype.redSqr=function(){return E(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return E(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return E(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return E(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return E(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(F){return E(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var ce={k256:null,p224:null,p192:null,p25519:null};function ne(X,F){this.name=X,this.p=new C(F,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ne.prototype._tmp=function(){var F=new C(null);return F.words=new Array(Math.ceil(this.n/13)),F},ne.prototype.ireduce=function(F){var z=F,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var te=J<this.n?-1:z.ucmp(this.p);return te===0?(z.words[0]=0,z.length=1):te>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},ne.prototype.split=function(F,z){F.iushrn(this.n,0,z)},ne.prototype.imulK=function(F){return F.imul(this.k)};function Y(){ne.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Y,ne),Y.prototype.split=function(F,z){for(var J=4194303,te=Math.min(F.length,9),se=0;se<te;se++)z.words[se]=F.words[se];if(z.length=te,F.length<=9){F.words[0]=0,F.length=1;return}var oe=F.words[9];for(z.words[z.length++]=oe&J,se=10;se<F.length;se++){var ie=F.words[se]|0;F.words[se-10]=(ie&J)<<4|oe>>>22,oe=ie}oe>>>=22,F.words[se-10]=oe,oe===0&&F.length>10?F.length-=10:F.length-=9},Y.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var z=0,J=0;J<F.length;J++){var te=F.words[J]|0;z+=te*977,F.words[J]=z&67108863,z=te*64+(z/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function fe(){ne.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(fe,ne);function ge(){ne.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ge,ne);function $e(){ne.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S($e,ne),$e.prototype.imulK=function(F){for(var z=0,J=0;J<F.length;J++){var te=(F.words[J]|0)*19+z,se=te&67108863;te>>>=26,F.words[J]=se,z=te}return z!==0&&(F.words[F.length++]=z),F},C._prime=function(F){if(ce[F])return ce[F];var z;if(F==="k256")z=new Y;else if(F==="p224")z=new fe;else if(F==="p192")z=new ge;else if(F==="p25519")z=new $e;else throw new Error("Unknown prime "+F);return ce[F]=z,z};function _e(X){if(typeof X=="string"){var F=C._prime(X);this.m=F.p,this.prime=F}else E(X.gtn(1),"modulus must be greater than 1"),this.m=X,this.prime=null}_e.prototype._verify1=function(F){E(F.negative===0,"red works only with positives"),E(F.red,"red works only with red numbers")},_e.prototype._verify2=function(F,z){E((F.negative|z.negative)===0,"red works only with positives"),E(F.red&&F.red===z.red,"red works only with red numbers")},_e.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):(M(F,F.umod(this.m)._forceRed(this)),F)},_e.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},_e.prototype.add=function(F,z){this._verify2(F,z);var J=F.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},_e.prototype.iadd=function(F,z){this._verify2(F,z);var J=F.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},_e.prototype.sub=function(F,z){this._verify2(F,z);var J=F.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},_e.prototype.isub=function(F,z){this._verify2(F,z);var J=F.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},_e.prototype.shl=function(F,z){return this._verify1(F),this.imod(F.ushln(z))},_e.prototype.imul=function(F,z){return this._verify2(F,z),this.imod(F.imul(z))},_e.prototype.mul=function(F,z){return this._verify2(F,z),this.imod(F.mul(z))},_e.prototype.isqr=function(F){return this.imul(F,F.clone())},_e.prototype.sqr=function(F){return this.mul(F,F)},_e.prototype.sqrt=function(F){if(F.isZero())return F.clone();var z=this.m.andln(3);if(E(z%2===1),z===3){var J=this.m.add(new C(1)).iushrn(2);return this.pow(F,J)}for(var te=this.m.subn(1),se=0;!te.isZero()&&te.andln(1)===0;)se++,te.iushrn(1);E(!te.isZero());var oe=new C(1).toRed(this),ie=oe.redNeg(),G=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new C(2*j*j).toRed(this);this.pow(j,G).cmp(ie)!==0;)j.redIAdd(ie);for(var ee=this.pow(j,te),pe=this.pow(F,te.addn(1).iushrn(1)),he=this.pow(F,te),Se=se;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();E(xe<Se);var Ee=this.pow(ee,new C(1).iushln(Se-xe-1));pe=pe.redMul(Ee),ee=Ee.redSqr(),he=he.redMul(ee),Se=xe}return pe},_e.prototype.invm=function(F){var z=F._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},_e.prototype.pow=function(F,z){if(z.isZero())return new C(1).toRed(this);if(z.cmpn(1)===0)return F.clone();var J=4,te=new Array(1<<J);te[0]=new C(1).toRed(this),te[1]=F;for(var se=2;se<te.length;se++)te[se]=this.mul(te[se-1],F);var oe=te[0],ie=0,G=0,j=z.bitLength()%26;for(j===0&&(j=26),se=z.length-1;se>=0;se--){for(var ee=z.words[se],pe=j-1;pe>=0;pe--){var he=ee>>pe&1;if(oe!==te[0]&&(oe=this.sqr(oe)),he===0&&ie===0){G=0;continue}ie<<=1,ie|=he,G++,!(G!==J&&(se!==0||pe!==0))&&(oe=this.mul(oe,te[ie]),G=0,ie=0)}j=26}return oe},_e.prototype.convertTo=function(F){var z=F.umod(this.m);return z===F?z.clone():z},_e.prototype.convertFrom=function(F){var z=F.clone();return z.red=null,z},C.mont=function(F){return new ae(F)};function ae(X){_e.call(this,X),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(ae,_e),ae.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},ae.prototype.convertFrom=function(F){var z=this.imod(F.mul(this.rinv));return z.red=null,z},ae.prototype.imul=function(F,z){if(F.isZero()||z.isZero())return F.words[0]=0,F.length=1,F;var J=F.imul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.mul=function(F,z){if(F.isZero()||z.isZero())return new C(0)._forceRed(this);var J=F.mul(z),te=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),se=J.isub(te).iushrn(this.shift),oe=se;return se.cmp(this.m)>=0?oe=se.isub(this.m):se.cmpn(0)<0&&(oe=se.iadd(this.m)),oe._forceRed(this)},ae.prototype.invm=function(F){var z=this.imod(F._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(n,commonjsGlobal)})(bn);var bnExports=bn.exports;const BN=getDefaultExportFromCjs(bnExports);function createCommonjsModule(n,_,x){return x={path:_,exports:{},require:function(E,S){return commonjsRequire(E,S??x.path)}},n(x,x.exports),x.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert;function assert(n,_){if(!n)throw new Error(_||"Assertion failed")}assert.equal=function n(_,x,E){if(_!=x)throw new Error(E||"Assertion failed: "+_+" != "+x)};var utils_1=createCommonjsModule(function(n,_){var x=_;function E(T,A){if(Array.isArray(T))return T.slice();if(!T)return[];var B=[];if(typeof T!="string"){for(var I=0;I<T.length;I++)B[I]=T[I]|0;return B}if(A==="hex"){T=T.replace(/[^a-z0-9]+/ig,""),T.length%2!==0&&(T="0"+T);for(var I=0;I<T.length;I+=2)B.push(parseInt(T[I]+T[I+1],16))}else for(var I=0;I<T.length;I++){var M=T.charCodeAt(I),O=M>>8,D=M&255;O?B.push(O,D):B.push(D)}return B}x.toArray=E;function S(T){return T.length===1?"0"+T:T}x.zero2=S;function C(T){for(var A="",B=0;B<T.length;B++)A+=S(T[B].toString(16));return A}x.toHex=C,x.encode=function(A,B){return B==="hex"?C(A):A}}),utils_1$1=createCommonjsModule(function(n,_){var x=_;x.assert=minimalisticAssert,x.toArray=utils_1.toArray,x.zero2=utils_1.zero2,x.toHex=utils_1.toHex,x.encode=utils_1.encode;function E(B,I,M){var O=new Array(Math.max(B.bitLength(),M)+1);O.fill(0);for(var D=1<<I+1,L=B.clone(),V=0;V<O.length;V++){var U,q=L.andln(D-1);L.isOdd()?(q>(D>>1)-1?U=(D>>1)-q:U=q,L.isubn(U)):U=0,O[V]=U,L.iushrn(1)}return O}x.getNAF=E;function S(B,I){var M=[[],[]];B=B.clone(),I=I.clone();for(var O=0,D=0,L;B.cmpn(-O)>0||I.cmpn(-D)>0;){var V=B.andln(3)+O&3,U=I.andln(3)+D&3;V===3&&(V=-1),U===3&&(U=-1);var q;V&1?(L=B.andln(7)+O&7,(L===3||L===5)&&U===2?q=-V:q=V):q=0,M[0].push(q);var H;U&1?(L=I.andln(7)+D&7,(L===3||L===5)&&V===2?H=-U:H=U):H=0,M[1].push(H),2*O===q+1&&(O=1-O),2*D===H+1&&(D=1-D),B.iushrn(1),I.iushrn(1)}return M}x.getJSF=S;function C(B,I,M){var O="_"+I;B.prototype[I]=function(){return this[O]!==void 0?this[O]:this[O]=M.call(this)}}x.cachedProperty=C;function T(B){return typeof B=="string"?x.toArray(B,"hex"):B}x.parseBytes=T;function A(B){return new BN(B,"hex","le")}x.intFromLE=A}),getNAF=utils_1$1.getNAF,getJSF=utils_1$1.getJSF,assert$1=utils_1$1.assert;function BaseCurve(n,_){this.type=n,this.p=new BN(_.p,16),this.red=_.prime?BN.red(_.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=_.n&&new BN(_.n,16),this.g=_.g&&this.pointFromJSON(_.g,_.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var x=this.n&&this.p.div(this.n);!x||x.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function n(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function n(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function n(_,x){assert$1(_.precomputed);var E=_._getDoubles(),S=getNAF(x,1,this._bitLength),C=(1<<E.step+1)-(E.step%2===0?2:1);C/=3;var T=[],A,B;for(A=0;A<S.length;A+=E.step){B=0;for(var I=A+E.step-1;I>=A;I--)B=(B<<1)+S[I];T.push(B)}for(var M=this.jpoint(null,null,null),O=this.jpoint(null,null,null),D=C;D>0;D--){for(A=0;A<T.length;A++)B=T[A],B===D?O=O.mixedAdd(E.points[A]):B===-D&&(O=O.mixedAdd(E.points[A].neg()));M=M.add(O)}return M.toP()};BaseCurve.prototype._wnafMul=function n(_,x){var E=4,S=_._getNAFPoints(E);E=S.wnd;for(var C=S.points,T=getNAF(x,E,this._bitLength),A=this.jpoint(null,null,null),B=T.length-1;B>=0;B--){for(var I=0;B>=0&&T[B]===0;B--)I++;if(B>=0&&I++,A=A.dblp(I),B<0)break;var M=T[B];assert$1(M!==0),_.type==="affine"?M>0?A=A.mixedAdd(C[M-1>>1]):A=A.mixedAdd(C[-M-1>>1].neg()):M>0?A=A.add(C[M-1>>1]):A=A.add(C[-M-1>>1].neg())}return _.type==="affine"?A.toP():A};BaseCurve.prototype._wnafMulAdd=function n(_,x,E,S,C){var T=this._wnafT1,A=this._wnafT2,B=this._wnafT3,I=0,M,O,D;for(M=0;M<S;M++){D=x[M];var L=D._getNAFPoints(_);T[M]=L.wnd,A[M]=L.points}for(M=S-1;M>=1;M-=2){var V=M-1,U=M;if(T[V]!==1||T[U]!==1){B[V]=getNAF(E[V],T[V],this._bitLength),B[U]=getNAF(E[U],T[U],this._bitLength),I=Math.max(B[V].length,I),I=Math.max(B[U].length,I);continue}var q=[x[V],null,null,x[U]];x[V].y.cmp(x[U].y)===0?(q[1]=x[V].add(x[U]),q[2]=x[V].toJ().mixedAdd(x[U].neg())):x[V].y.cmp(x[U].y.redNeg())===0?(q[1]=x[V].toJ().mixedAdd(x[U]),q[2]=x[V].add(x[U].neg())):(q[1]=x[V].toJ().mixedAdd(x[U]),q[2]=x[V].toJ().mixedAdd(x[U].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],W=getJSF(E[V],E[U]);for(I=Math.max(W[0].length,I),B[V]=new Array(I),B[U]=new Array(I),O=0;O<I;O++){var Q=W[0][O]|0,re=W[1][O]|0;B[V][O]=H[(Q+1)*3+(re+1)],B[U][O]=0,A[V]=q}}var ce=this.jpoint(null,null,null),ne=this._wnafT4;for(M=I;M>=0;M--){for(var Y=0;M>=0;){var fe=!0;for(O=0;O<S;O++)ne[O]=B[O][M]|0,ne[O]!==0&&(fe=!1);if(!fe)break;Y++,M--}if(M>=0&&Y++,ce=ce.dblp(Y),M<0)break;for(O=0;O<S;O++){var ge=ne[O];ge!==0&&(ge>0?D=A[O][ge-1>>1]:ge<0&&(D=A[O][-ge-1>>1].neg()),D.type==="affine"?ce=ce.mixedAdd(D):ce=ce.add(D))}}for(M=0;M<S;M++)A[M]=null;return C?ce:ce.toP()};function BasePoint(n,_){this.curve=n,this.type=_,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function n(){throw new Error("Not implemented")};BasePoint.prototype.validate=function n(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function n(_,x){_=utils_1$1.toArray(_,x);var E=this.p.byteLength();if((_[0]===4||_[0]===6||_[0]===7)&&_.length-1===2*E){_[0]===6?assert$1(_[_.length-1]%2===0):_[0]===7&&assert$1(_[_.length-1]%2===1);var S=this.point(_.slice(1,1+E),_.slice(1+E,1+2*E));return S}else if((_[0]===2||_[0]===3)&&_.length-1===E)return this.pointFromX(_.slice(1,1+E),_[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function n(_){return this.encode(_,!0)};BasePoint.prototype._encode=function n(_){var x=this.curve.p.byteLength(),E=this.getX().toArray("be",x);return _?[this.getY().isEven()?2:3].concat(E):[4].concat(E,this.getY().toArray("be",x))};BasePoint.prototype.encode=function n(_,x){return utils_1$1.encode(this._encode(x),_)};BasePoint.prototype.precompute=function n(_){if(this.precomputed)return this;var x={doubles:null,naf:null,beta:null};return x.naf=this._getNAFPoints(8),x.doubles=this._getDoubles(4,_),x.beta=this._getBeta(),this.precomputed=x,this};BasePoint.prototype._hasDoubles=function n(_){if(!this.precomputed)return!1;var x=this.precomputed.doubles;return x?x.points.length>=Math.ceil((_.bitLength()+1)/x.step):!1};BasePoint.prototype._getDoubles=function n(_,x){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var E=[this],S=this,C=0;C<x;C+=_){for(var T=0;T<_;T++)S=S.dbl();E.push(S)}return{step:_,points:E}};BasePoint.prototype._getNAFPoints=function n(_){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var x=[this],E=(1<<_)-1,S=E===1?null:this.dbl(),C=1;C<E;C++)x[C]=x[C-1].add(S);return{wnd:_,points:x}};BasePoint.prototype._getBeta=function n(){return null};BasePoint.prototype.dblp=function n(_){for(var x=this,E=0;E<_;E++)x=x.dbl();return x};var inherits_browser=createCommonjsModule(function(n){typeof Object.create=="function"?n.exports=function(x,E){E&&(x.super_=E,x.prototype=Object.create(E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(x,E){if(E){x.super_=E;var S=function(){};S.prototype=E.prototype,x.prototype=new S,x.prototype.constructor=x}}}),assert$2=utils_1$1.assert;function ShortCurve(n){base.call(this,"short",n),this.a=new BN(n.a,16).toRed(this.red),this.b=new BN(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function n(_){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var x,E;if(_.beta)x=new BN(_.beta,16).toRed(this.red);else{var S=this._getEndoRoots(this.p);x=S[0].cmp(S[1])<0?S[0]:S[1],x=x.toRed(this.red)}if(_.lambda)E=new BN(_.lambda,16);else{var C=this._getEndoRoots(this.n);this.g.mul(C[0]).x.cmp(this.g.x.redMul(x))===0?E=C[0]:(E=C[1],assert$2(this.g.mul(E).x.cmp(this.g.x.redMul(x))===0))}var T;return _.basis?T=_.basis.map(function(A){return{a:new BN(A.a,16),b:new BN(A.b,16)}}):T=this._getEndoBasis(E),{beta:x,lambda:E,basis:T}}};ShortCurve.prototype._getEndoRoots=function n(_){var x=_===this.p?this.red:BN.mont(_),E=new BN(2).toRed(x).redInvm(),S=E.redNeg(),C=new BN(3).toRed(x).redNeg().redSqrt().redMul(E),T=S.redAdd(C).fromRed(),A=S.redSub(C).fromRed();return[T,A]};ShortCurve.prototype._getEndoBasis=function n(_){for(var x=this.n.ushrn(Math.floor(this.n.bitLength()/2)),E=_,S=this.n.clone(),C=new BN(1),T=new BN(0),A=new BN(0),B=new BN(1),I,M,O,D,L,V,U,q=0,H,W;E.cmpn(0)!==0;){var Q=S.div(E);H=S.sub(Q.mul(E)),W=A.sub(Q.mul(C));var re=B.sub(Q.mul(T));if(!O&&H.cmp(x)<0)I=U.neg(),M=C,O=H.neg(),D=W;else if(O&&++q===2)break;U=H,S=E,E=H,A=C,C=W,B=T,T=re}L=H.neg(),V=W;var ce=O.sqr().add(D.sqr()),ne=L.sqr().add(V.sqr());return ne.cmp(ce)>=0&&(L=I,V=M),O.negative&&(O=O.neg(),D=D.neg()),L.negative&&(L=L.neg(),V=V.neg()),[{a:O,b:D},{a:L,b:V}]};ShortCurve.prototype._endoSplit=function n(_){var x=this.endo.basis,E=x[0],S=x[1],C=S.b.mul(_).divRound(this.n),T=E.b.neg().mul(_).divRound(this.n),A=C.mul(E.a),B=T.mul(S.a),I=C.mul(E.b),M=T.mul(S.b),O=_.sub(A).sub(B),D=I.add(M).neg();return{k1:O,k2:D}};ShortCurve.prototype.pointFromX=function n(_,x){_=new BN(_,16),_.red||(_=_.toRed(this.red));var E=_.redSqr().redMul(_).redIAdd(_.redMul(this.a)).redIAdd(this.b),S=E.redSqrt();if(S.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var C=S.fromRed().isOdd();return(x&&!C||!x&&C)&&(S=S.redNeg()),this.point(_,S)};ShortCurve.prototype.validate=function n(_){if(_.inf)return!0;var x=_.x,E=_.y,S=this.a.redMul(x),C=x.redSqr().redMul(x).redIAdd(S).redIAdd(this.b);return E.redSqr().redISub(C).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function n(_,x,E){for(var S=this._endoWnafT1,C=this._endoWnafT2,T=0;T<_.length;T++){var A=this._endoSplit(x[T]),B=_[T],I=B._getBeta();A.k1.negative&&(A.k1.ineg(),B=B.neg(!0)),A.k2.negative&&(A.k2.ineg(),I=I.neg(!0)),S[T*2]=B,S[T*2+1]=I,C[T*2]=A.k1,C[T*2+1]=A.k2}for(var M=this._wnafMulAdd(1,S,C,T*2,E),O=0;O<T*2;O++)S[O]=null,C[O]=null;return M};function Point(n,_,x,E){base.BasePoint.call(this,n,"affine"),_===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(_,16),this.y=new BN(x,16),E&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base.BasePoint);ShortCurve.prototype.point=function n(_,x,E){return new Point(this,_,x,E)};ShortCurve.prototype.pointFromJSON=function n(_,x){return Point.fromJSON(this,_,x)};Point.prototype._getBeta=function n(){if(this.curve.endo){var _=this.precomputed;if(_&&_.beta)return _.beta;var x=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(_){var E=this.curve,S=function(C){return E.point(C.x.redMul(E.endo.beta),C.y)};_.beta=x,x.precomputed={beta:null,naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(S)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(S)}}}return x}};Point.prototype.toJSON=function n(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function n(_,x,E){typeof x=="string"&&(x=JSON.parse(x));var S=_.point(x[0],x[1],E);if(!x[2])return S;function C(A){return _.point(A[0],A[1],E)}var T=x[2];return S.precomputed={beta:null,doubles:T.doubles&&{step:T.doubles.step,points:[S].concat(T.doubles.points.map(C))},naf:T.naf&&{wnd:T.naf.wnd,points:[S].concat(T.naf.points.map(C))}},S};Point.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function n(){return this.inf};Point.prototype.add=function n(_){if(this.inf)return _;if(_.inf)return this;if(this.eq(_))return this.dbl();if(this.neg().eq(_))return this.curve.point(null,null);if(this.x.cmp(_.x)===0)return this.curve.point(null,null);var x=this.y.redSub(_.y);x.cmpn(0)!==0&&(x=x.redMul(this.x.redSub(_.x).redInvm()));var E=x.redSqr().redISub(this.x).redISub(_.x),S=x.redMul(this.x.redSub(E)).redISub(this.y);return this.curve.point(E,S)};Point.prototype.dbl=function n(){if(this.inf)return this;var _=this.y.redAdd(this.y);if(_.cmpn(0)===0)return this.curve.point(null,null);var x=this.curve.a,E=this.x.redSqr(),S=_.redInvm(),C=E.redAdd(E).redIAdd(E).redIAdd(x).redMul(S),T=C.redSqr().redISub(this.x.redAdd(this.x)),A=C.redMul(this.x.redSub(T)).redISub(this.y);return this.curve.point(T,A)};Point.prototype.getX=function n(){return this.x.fromRed()};Point.prototype.getY=function n(){return this.y.fromRed()};Point.prototype.mul=function n(_){return _=new BN(_,16),this.isInfinity()?this:this._hasDoubles(_)?this.curve._fixedNafMul(this,_):this.curve.endo?this.curve._endoWnafMulAdd([this],[_]):this.curve._wnafMul(this,_)};Point.prototype.mulAdd=function n(_,x,E){var S=[this,x],C=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(S,C):this.curve._wnafMulAdd(1,S,C,2)};Point.prototype.jmulAdd=function n(_,x,E){var S=[this,x],C=[_,E];return this.curve.endo?this.curve._endoWnafMulAdd(S,C,!0):this.curve._wnafMulAdd(1,S,C,2,!0)};Point.prototype.eq=function n(_){return this===_||this.inf===_.inf&&(this.inf||this.x.cmp(_.x)===0&&this.y.cmp(_.y)===0)};Point.prototype.neg=function n(_){if(this.inf)return this;var x=this.curve.point(this.x,this.y.redNeg());if(_&&this.precomputed){var E=this.precomputed,S=function(C){return C.neg()};x.precomputed={naf:E.naf&&{wnd:E.naf.wnd,points:E.naf.points.map(S)},doubles:E.doubles&&{step:E.doubles.step,points:E.doubles.points.map(S)}}}return x};Point.prototype.toJ=function n(){if(this.inf)return this.curve.jpoint(null,null,null);var _=this.curve.jpoint(this.x,this.y,this.curve.one);return _};function JPoint(n,_,x,E){base.BasePoint.call(this,n,"jacobian"),_===null&&x===null&&E===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(_,16),this.y=new BN(x,16),this.z=new BN(E,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base.BasePoint);ShortCurve.prototype.jpoint=function n(_,x,E){return new JPoint(this,_,x,E)};JPoint.prototype.toP=function n(){if(this.isInfinity())return this.curve.point(null,null);var _=this.z.redInvm(),x=_.redSqr(),E=this.x.redMul(x),S=this.y.redMul(x).redMul(_);return this.curve.point(E,S)};JPoint.prototype.neg=function n(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function n(_){if(this.isInfinity())return _;if(_.isInfinity())return this;var x=_.z.redSqr(),E=this.z.redSqr(),S=this.x.redMul(x),C=_.x.redMul(E),T=this.y.redMul(x.redMul(_.z)),A=_.y.redMul(E.redMul(this.z)),B=S.redSub(C),I=T.redSub(A);if(B.cmpn(0)===0)return I.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=B.redSqr(),O=M.redMul(B),D=S.redMul(M),L=I.redSqr().redIAdd(O).redISub(D).redISub(D),V=I.redMul(D.redISub(L)).redISub(T.redMul(O)),U=this.z.redMul(_.z).redMul(B);return this.curve.jpoint(L,V,U)};JPoint.prototype.mixedAdd=function n(_){if(this.isInfinity())return _.toJ();if(_.isInfinity())return this;var x=this.z.redSqr(),E=this.x,S=_.x.redMul(x),C=this.y,T=_.y.redMul(x).redMul(this.z),A=E.redSub(S),B=C.redSub(T);if(A.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=A.redSqr(),M=I.redMul(A),O=E.redMul(I),D=B.redSqr().redIAdd(M).redISub(O).redISub(O),L=B.redMul(O.redISub(D)).redISub(C.redMul(M)),V=this.z.redMul(A);return this.curve.jpoint(D,L,V)};JPoint.prototype.dblp=function n(_){if(_===0)return this;if(this.isInfinity())return this;if(!_)return this.dbl();var x;if(this.curve.zeroA||this.curve.threeA){var E=this;for(x=0;x<_;x++)E=E.dbl();return E}var S=this.curve.a,C=this.curve.tinv,T=this.x,A=this.y,B=this.z,I=B.redSqr().redSqr(),M=A.redAdd(A);for(x=0;x<_;x++){var O=T.redSqr(),D=M.redSqr(),L=D.redSqr(),V=O.redAdd(O).redIAdd(O).redIAdd(S.redMul(I)),U=T.redMul(D),q=V.redSqr().redISub(U.redAdd(U)),H=U.redISub(q),W=V.redMul(H);W=W.redIAdd(W).redISub(L);var Q=M.redMul(B);x+1<_&&(I=I.redMul(L)),T=q,B=Q,M=W}return this.curve.jpoint(T,M.redMul(C),B)};JPoint.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function n(){var _,x,E;if(this.zOne){var S=this.x.redSqr(),C=this.y.redSqr(),T=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(S).redISub(T);A=A.redIAdd(A);var B=S.redAdd(S).redIAdd(S),I=B.redSqr().redISub(A).redISub(A),M=T.redIAdd(T);M=M.redIAdd(M),M=M.redIAdd(M),_=I,x=B.redMul(A.redISub(I)).redISub(M),E=this.y.redAdd(this.y)}else{var O=this.x.redSqr(),D=this.y.redSqr(),L=D.redSqr(),V=this.x.redAdd(D).redSqr().redISub(O).redISub(L);V=V.redIAdd(V);var U=O.redAdd(O).redIAdd(O),q=U.redSqr(),H=L.redIAdd(L);H=H.redIAdd(H),H=H.redIAdd(H),_=q.redISub(V).redISub(V),x=U.redMul(V.redISub(_)).redISub(H),E=this.y.redMul(this.z),E=E.redIAdd(E)}return this.curve.jpoint(_,x,E)};JPoint.prototype._threeDbl=function n(){var _,x,E;if(this.zOne){var S=this.x.redSqr(),C=this.y.redSqr(),T=C.redSqr(),A=this.x.redAdd(C).redSqr().redISub(S).redISub(T);A=A.redIAdd(A);var B=S.redAdd(S).redIAdd(S).redIAdd(this.curve.a),I=B.redSqr().redISub(A).redISub(A);_=I;var M=T.redIAdd(T);M=M.redIAdd(M),M=M.redIAdd(M),x=B.redMul(A.redISub(I)).redISub(M),E=this.y.redAdd(this.y)}else{var O=this.z.redSqr(),D=this.y.redSqr(),L=this.x.redMul(D),V=this.x.redSub(O).redMul(this.x.redAdd(O));V=V.redAdd(V).redIAdd(V);var U=L.redIAdd(L);U=U.redIAdd(U);var q=U.redAdd(U);_=V.redSqr().redISub(q),E=this.y.redAdd(this.z).redSqr().redISub(D).redISub(O);var H=D.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H),x=V.redMul(U.redISub(_)).redISub(H)}return this.curve.jpoint(_,x,E)};JPoint.prototype._dbl=function n(){var _=this.curve.a,x=this.x,E=this.y,S=this.z,C=S.redSqr().redSqr(),T=x.redSqr(),A=E.redSqr(),B=T.redAdd(T).redIAdd(T).redIAdd(_.redMul(C)),I=x.redAdd(x);I=I.redIAdd(I);var M=I.redMul(A),O=B.redSqr().redISub(M.redAdd(M)),D=M.redISub(O),L=A.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var V=B.redMul(D).redISub(L),U=E.redAdd(E).redMul(S);return this.curve.jpoint(O,V,U)};JPoint.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var _=this.x.redSqr(),x=this.y.redSqr(),E=this.z.redSqr(),S=x.redSqr(),C=_.redAdd(_).redIAdd(_),T=C.redSqr(),A=this.x.redAdd(x).redSqr().redISub(_).redISub(S);A=A.redIAdd(A),A=A.redAdd(A).redIAdd(A),A=A.redISub(T);var B=A.redSqr(),I=S.redIAdd(S);I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=C.redIAdd(A).redSqr().redISub(T).redISub(B).redISub(I),O=x.redMul(M);O=O.redIAdd(O),O=O.redIAdd(O);var D=this.x.redMul(B).redISub(O);D=D.redIAdd(D),D=D.redIAdd(D);var L=this.y.redMul(M.redMul(I.redISub(M)).redISub(A.redMul(B)));L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var V=this.z.redAdd(A).redSqr().redISub(E).redISub(B);return this.curve.jpoint(D,L,V)};JPoint.prototype.mul=function n(_,x){return _=new BN(_,x),this.curve._wnafMul(this,_)};JPoint.prototype.eq=function n(_){if(_.type==="affine")return this.eq(_.toJ());if(this===_)return!0;var x=this.z.redSqr(),E=_.z.redSqr();if(this.x.redMul(E).redISub(_.x.redMul(x)).cmpn(0)!==0)return!1;var S=x.redMul(this.z),C=E.redMul(_.z);return this.y.redMul(C).redISub(_.y.redMul(S)).cmpn(0)===0};JPoint.prototype.eqXToP=function n(_){var x=this.z.redSqr(),E=_.toRed(this.curve.red).redMul(x);if(this.x.cmp(E)===0)return!0;for(var S=_.clone(),C=this.curve.redN.redMul(x);;){if(S.iadd(this.curve.n),S.cmp(this.curve.p)>=0)return!1;if(E.redIAdd(C),this.x.cmp(E)===0)return!0}};JPoint.prototype.inspect=function n(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(n,_){var x=_;x.base=base,x.short=short_1,x.mont=null,x.edwards=null}),curves_1=createCommonjsModule(function(n,_){var x=_,E=utils_1$1.assert;function S(A){A.type==="short"?this.curve=new curve_1.short(A):A.type==="edwards"?this.curve=new curve_1.edwards(A):this.curve=new curve_1.mont(A),this.g=this.curve.g,this.n=this.curve.n,this.hash=A.hash,E(this.g.validate(),"Invalid curve"),E(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}x.PresetCurve=S;function C(A,B){Object.defineProperty(x,A,{configurable:!0,enumerable:!0,get:function(){var I=new S(B);return Object.defineProperty(x,A,{configurable:!0,enumerable:!0,value:I}),I}})}C("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),C("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),C("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),C("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),C("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),C("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),C("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var T;try{T=null.crash()}catch{T=void 0}C("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",T]})});function HmacDRBG(n){if(!(this instanceof HmacDRBG))return new HmacDRBG(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var _=utils_1.toArray(n.entropy,n.entropyEnc||"hex"),x=utils_1.toArray(n.nonce,n.nonceEnc||"hex"),E=utils_1.toArray(n.pers,n.persEnc||"hex");minimalisticAssert(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(_,x,E)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function n(_,x,E){var S=_.concat(x).concat(E);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var C=0;C<this.V.length;C++)this.K[C]=0,this.V[C]=1;this._update(S),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function n(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function n(_){var x=this._hmac().update(this.V).update([0]);_&&(x=x.update(_)),this.K=x.digest(),this.V=this._hmac().update(this.V).digest(),_&&(this.K=this._hmac().update(this.V).update([1]).update(_).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function n(_,x,E,S){typeof x!="string"&&(S=E,E=x,x=null),_=utils_1.toArray(_,x),E=utils_1.toArray(E,S),minimalisticAssert(_.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(_.concat(E||[])),this._reseed=1};HmacDRBG.prototype.generate=function n(_,x,E,S){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof x!="string"&&(S=E,E=x,x=null),E&&(E=utils_1.toArray(E,S||"hex"),this._update(E));for(var C=[];C.length<_;)this.V=this._hmac().update(this.V).digest(),C=C.concat(this.V);var T=C.slice(0,_);return this._update(E),this._reseed++,utils_1.encode(T,x)};var assert$3=utils_1$1.assert;function KeyPair(n,_){this.ec=n,this.priv=null,this.pub=null,_.priv&&this._importPrivate(_.priv,_.privEnc),_.pub&&this._importPublic(_.pub,_.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function n(_,x,E){return x instanceof KeyPair?x:new KeyPair(_,{pub:x,pubEnc:E})};KeyPair.fromPrivate=function n(_,x,E){return x instanceof KeyPair?x:new KeyPair(_,{priv:x,privEnc:E})};KeyPair.prototype.validate=function n(){var _=this.getPublic();return _.isInfinity()?{result:!1,reason:"Invalid public key"}:_.validate()?_.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function n(_,x){return typeof _=="string"&&(x=_,_=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),x?this.pub.encode(x,_):this.pub};KeyPair.prototype.getPrivate=function n(_){return _==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function n(_,x){this.priv=new BN(_,x||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function n(_,x){if(_.x||_.y){this.ec.curve.type==="mont"?assert$3(_.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(_.x&&_.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(_.x,_.y);return}this.pub=this.ec.curve.decodePoint(_,x)};KeyPair.prototype.derive=function n(_){return _.validate()||assert$3(_.validate(),"public point not validated"),_.mul(this.priv).getX()};KeyPair.prototype.sign=function n(_,x,E){return this.ec.sign(_,this,x,E)};KeyPair.prototype.verify=function n(_,x){return this.ec.verify(_,x,this)};KeyPair.prototype.inspect=function n(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1.assert;function Signature(n,_){if(n instanceof Signature)return n;this._importDER(n,_)||(assert$4(n.r&&n.s,"Signature without r or s"),this.r=new BN(n.r,16),this.s=new BN(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(n,_){var x=n[_.place++];if(!(x&128))return x;var E=x&15;if(E===0||E>4)return!1;for(var S=0,C=0,T=_.place;C<E;C++,T++)S<<=8,S|=n[T],S>>>=0;return S<=127?!1:(_.place=T,S)}function rmPadding(n){for(var _=0,x=n.length-1;!n[_]&&!(n[_+1]&128)&&_<x;)_++;return _===0?n:n.slice(_)}Signature.prototype._importDER=function n(_,x){_=utils_1$1.toArray(_,x);var E=new Position;if(_[E.place++]!==48)return!1;var S=getLength(_,E);if(S===!1||S+E.place!==_.length||_[E.place++]!==2)return!1;var C=getLength(_,E);if(C===!1)return!1;var T=_.slice(E.place,C+E.place);if(E.place+=C,_[E.place++]!==2)return!1;var A=getLength(_,E);if(A===!1||_.length!==A+E.place)return!1;var B=_.slice(E.place,A+E.place);if(T[0]===0)if(T[1]&128)T=T.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new BN(T),this.s=new BN(B),this.recoveryParam=null,!0};function constructLength(n,_){if(_<128){n.push(_);return}var x=1+(Math.log(_)/Math.LN2>>>3);for(n.push(x|128);--x;)n.push(_>>>(x<<3)&255);n.push(_)}Signature.prototype.toDER=function n(_){var x=this.r.toArray(),E=this.s.toArray();for(x[0]&128&&(x=[0].concat(x)),E[0]&128&&(E=[0].concat(E)),x=rmPadding(x),E=rmPadding(E);!E[0]&&!(E[1]&128);)E=E.slice(1);var S=[2];constructLength(S,x.length),S=S.concat(x),S.push(2),constructLength(S,E.length);var C=S.concat(E),T=[48];return constructLength(T,C.length),T=T.concat(C),utils_1$1.encode(T,_)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1.assert;function EC(n){if(!(this instanceof EC))return new EC(n);typeof n=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,n),"Unknown curve "+n),n=curves_1[n]),n instanceof curves_1.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ec=EC;EC.prototype.keyPair=function n(_){return new key(this,_)};EC.prototype.keyFromPrivate=function n(_,x){return key.fromPrivate(this,_,x)};EC.prototype.keyFromPublic=function n(_,x){return key.fromPublic(this,_,x)};EC.prototype.genKeyPair=function n(_){_||(_={});for(var x=new hmacDrbg({hash:this.hash,pers:_.pers,persEnc:_.persEnc||"utf8",entropy:_.entropy||rand(this.hash.hmacStrength),entropyEnc:_.entropy&&_.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),S=this.n.sub(new BN(2));;){var C=new BN(x.generate(E));if(!(C.cmp(S)>0))return C.iaddn(1),this.keyFromPrivate(C)}};EC.prototype._truncateToN=function n(_,x){var E=_.byteLength()*8-this.n.bitLength();return E>0&&(_=_.ushrn(E)),!x&&_.cmp(this.n)>=0?_.sub(this.n):_};EC.prototype.sign=function n(_,x,E,S){typeof E=="object"&&(S=E,E=null),S||(S={}),x=this.keyFromPrivate(x,E),_=this._truncateToN(new BN(_,16));for(var C=this.n.byteLength(),T=x.getPrivate().toArray("be",C),A=_.toArray("be",C),B=new hmacDrbg({hash:this.hash,entropy:T,nonce:A,pers:S.pers,persEnc:S.persEnc||"utf8"}),I=this.n.sub(new BN(1)),M=0;;M++){var O=S.k?S.k(M):new BN(B.generate(this.n.byteLength()));if(O=this._truncateToN(O,!0),!(O.cmpn(1)<=0||O.cmp(I)>=0)){var D=this.g.mul(O);if(!D.isInfinity()){var L=D.getX(),V=L.umod(this.n);if(V.cmpn(0)!==0){var U=O.invm(this.n).mul(V.mul(x.getPrivate()).iadd(_));if(U=U.umod(this.n),U.cmpn(0)!==0){var q=(D.getY().isOdd()?1:0)|(L.cmp(V)!==0?2:0);return S.canonical&&U.cmp(this.nh)>0&&(U=this.n.sub(U),q^=1),new signature({r:V,s:U,recoveryParam:q})}}}}}};EC.prototype.verify=function n(_,x,E,S){_=this._truncateToN(new BN(_,16)),E=this.keyFromPublic(E,S),x=new signature(x,"hex");var C=x.r,T=x.s;if(C.cmpn(1)<0||C.cmp(this.n)>=0||T.cmpn(1)<0||T.cmp(this.n)>=0)return!1;var A=T.invm(this.n),B=A.mul(_).umod(this.n),I=A.mul(C).umod(this.n),M;return this.curve._maxwellTrick?(M=this.g.jmulAdd(B,E.getPublic(),I),M.isInfinity()?!1:M.eqXToP(C)):(M=this.g.mulAdd(B,E.getPublic(),I),M.isInfinity()?!1:M.getX().umod(this.n).cmp(C)===0)};EC.prototype.recoverPubKey=function(n,_,x,E){assert$5((3&x)===x,"The recovery param is more than two bits"),_=new signature(_,E);var S=this.n,C=new BN(n),T=_.r,A=_.s,B=x&1,I=x>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&I)throw new Error("Unable to find sencond key candinate");I?T=this.curve.pointFromX(T.add(this.curve.n),B):T=this.curve.pointFromX(T,B);var M=_.r.invm(S),O=S.sub(C).mul(M).umod(S),D=A.mul(M).umod(S);return this.g.mulAdd(O,T,D)};EC.prototype.getKeyRecoveryParam=function(n,_,x,E){if(_=new signature(_,E),_.recoveryParam!==null)return _.recoveryParam;for(var S=0;S<4;S++){var C;try{C=this.recoverPubKey(n,_,S)}catch{continue}if(C.eq(x))return S}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(n,_){var x=_;x.version="6.5.4",x.utils=utils_1$1,x.rand=function(){throw new Error("unsupported")},x.curve=curve_1,x.curves=curves_1,x.ec=ec,x.eddsa=null}),EC$1=elliptic_1.ec;const version$6="signing-key/5.7.0",logger$a=new Logger(version$6);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(_){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(_)),hexDataLength(this.privateKey)!==32&&logger$a.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const x=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+x.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+x.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(_){const x=getCurve().keyFromPublic(arrayify(this.publicKey)),E=getCurve().keyFromPublic(arrayify(_));return"0x"+x.pub.add(E.pub).encodeCompressed("hex")}signDigest(_){const x=getCurve().keyFromPrivate(arrayify(this.privateKey)),E=arrayify(_);E.length!==32&&logger$a.throwArgumentError("bad digest length","digest",_);const S=x.sign(E,{canonical:!0});return splitSignature({recoveryParam:S.recoveryParam,r:hexZeroPad("0x"+S.r.toString(16),32),s:hexZeroPad("0x"+S.s.toString(16),32)})}computeSharedSecret(_){const x=getCurve().keyFromPrivate(arrayify(this.privateKey)),E=getCurve().keyFromPublic(arrayify(computePublicKey(_)));return hexZeroPad("0x"+x.derive(E.getPublic()).toString(16),32)}static isSigningKey(_){return!!(_&&_._isSigningKey)}}function recoverPublicKey(n,_){const x=splitSignature(_),E={r:arrayify(x.r),s:arrayify(x.s)};return"0x"+getCurve().recoverPubKey(arrayify(n),E,x.recoveryParam).encode("hex",!1)}function computePublicKey(n,_){const x=arrayify(n);if(x.length===32){const E=new SigningKey(x);return _?"0x"+getCurve().keyFromPrivate(x).getPublic(!0,"hex"):E.publicKey}else{if(x.length===33)return _?hexlify(x):"0x"+getCurve().keyFromPublic(x).getPublic(!1,"hex");if(x.length===65)return _?"0x"+getCurve().keyFromPublic(x).getPublic(!0,"hex"):hexlify(x)}return logger$a.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$5="transactions/5.7.0",logger$9=new Logger(version$5);var TransactionTypes;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(n){const _=computePublicKey(n);return getAddress(hexDataSlice(keccak256(hexDataSlice(_,1)),12))}function recoverAddress(n,_){return computeAddress(recoverPublicKey(arrayify(n),_))}function formatNumber(n,_){const x=stripZeros(BigNumber.from(n).toHexString());return x.length>32&&logger$9.throwArgumentError("invalid length for "+_,"transaction:"+_,n),x}function accessSetify(n,_){return{address:getAddress(n),storageKeys:(_||[]).map((x,E)=>(hexDataLength(x)!==32&&logger$9.throwArgumentError("invalid access list storageKey",`accessList[${n}:${E}]`,x),x.toLowerCase()))}}function accessListify(n){if(Array.isArray(n))return n.map((x,E)=>Array.isArray(x)?(x.length>2&&logger$9.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${E}]`,x),accessSetify(x[0],x[1])):accessSetify(x.address,x.storageKeys));const _=Object.keys(n).map(x=>{const E=n[x].reduce((S,C)=>(S[C]=!0,S),{});return accessSetify(x,Object.keys(E).sort())});return _.sort((x,E)=>x.address.localeCompare(E.address)),_}function formatAccessList(n){return accessListify(n).map(_=>[_.address,_.storageKeys])}function _serializeEip1559(n,_){if(n.gasPrice!=null){const E=BigNumber.from(n.gasPrice),S=BigNumber.from(n.maxFeePerGas||0);E.eq(S)||logger$9.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:E,maxFeePerGas:S})}const x=[formatNumber(n.chainId||0,"chainId"),formatNumber(n.nonce||0,"nonce"),formatNumber(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(n.maxFeePerGas||0,"maxFeePerGas"),formatNumber(n.gasLimit||0,"gasLimit"),n.to!=null?getAddress(n.to):"0x",formatNumber(n.value||0,"value"),n.data||"0x",formatAccessList(n.accessList||[])];if(_){const E=splitSignature(_);x.push(formatNumber(E.recoveryParam,"recoveryParam")),x.push(stripZeros(E.r)),x.push(stripZeros(E.s))}return hexConcat(["0x02",encode$6(x)])}function _serializeEip2930(n,_){const x=[formatNumber(n.chainId||0,"chainId"),formatNumber(n.nonce||0,"nonce"),formatNumber(n.gasPrice||0,"gasPrice"),formatNumber(n.gasLimit||0,"gasLimit"),n.to!=null?getAddress(n.to):"0x",formatNumber(n.value||0,"value"),n.data||"0x",formatAccessList(n.accessList||[])];if(_){const E=splitSignature(_);x.push(formatNumber(E.recoveryParam,"recoveryParam")),x.push(stripZeros(E.r)),x.push(stripZeros(E.s))}return hexConcat(["0x01",encode$6(x)])}function _serialize(n,_){checkProperties(n,allowedTransactionKeys);const x=[];transactionFields.forEach(function(T){let A=n[T.name]||[];const B={};T.numeric&&(B.hexPad="left"),A=arrayify(hexlify(A,B)),T.length&&A.length!==T.length&&A.length>0&&logger$9.throwArgumentError("invalid length for "+T.name,"transaction:"+T.name,A),T.maxLength&&(A=stripZeros(A),A.length>T.maxLength&&logger$9.throwArgumentError("invalid length for "+T.name,"transaction:"+T.name,A)),x.push(hexlify(A))});let E=0;if(n.chainId!=null?(E=n.chainId,typeof E!="number"&&logger$9.throwArgumentError("invalid transaction.chainId","transaction",n)):_&&!isBytesLike(_)&&_.v>28&&(E=Math.floor((_.v-35)/2)),E!==0&&(x.push(hexlify(E)),x.push("0x"),x.push("0x")),!_)return encode$6(x);const S=splitSignature(_);let C=27+S.recoveryParam;return E!==0?(x.pop(),x.pop(),x.pop(),C+=E*2+8,S.v>28&&S.v!==C&&logger$9.throwArgumentError("transaction.chainId/signature.v mismatch","signature",_)):S.v!==C&&logger$9.throwArgumentError("transaction.chainId/signature.v mismatch","signature",_),x.push(hexlify(C)),x.push(stripZeros(arrayify(S.r))),x.push(stripZeros(arrayify(S.s))),encode$6(x)}function serialize(n,_){if(n.type==null||n.type===0)return n.accessList!=null&&logger$9.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",n),_serialize(n,_);switch(n.type){case 1:return _serializeEip2930(n,_);case 2:return _serializeEip1559(n,_)}return logger$9.throwError(`unsupported transaction type: ${n.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:n.type})}const version$4="wordlists/5.7.0",logger$8=new Logger(version$4);class Wordlist{constructor(_){logger$8.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",_)}split(_){return _.toLowerCase().split(/ +/g)}join(_){return _.join(" ")}static check(_){const x=[];for(let E=0;E<2048;E++){const S=_.getWord(E);if(E!==_.getWordIndex(S))return"0x";x.push(S)}return id$1(x.join(`
`)+`
`)}static register(_,x){x||(x=_.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(n){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(n)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(_){return loadWords(this),wordlist[_]}getWordIndex(_){return loadWords(this),wordlist.indexOf(_)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$3="hdnode/5.7.0",logger$7=new Logger(version$3),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(n){return(1<<n)-1<<8-n}function getLowerMask(n){return(1<<n)-1}function bytes32(n){return hexZeroPad(hexlify(n),32)}function base58check(n){return Base58.encode(concat$1([n,hexDataSlice(sha256$2(sha256$2(n)),0,4)]))}function getWordlist(n){if(n==null)return wordlists.en;if(typeof n=="string"){const _=wordlists[n];return _==null&&logger$7.throwArgumentError("unknown locale","wordlist",n),_}return n}const _constructorGuard={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(_,x,E,S,C,T,A,B){if(_!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(x){const I=new SigningKey(x);defineReadOnly(this,"privateKey",I.privateKey),defineReadOnly(this,"publicKey",I.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(E));defineReadOnly(this,"parentFingerprint",S),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256$2(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",C),defineReadOnly(this,"index",T),defineReadOnly(this,"depth",A),B==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof B=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",B)):(defineReadOnly(this,"mnemonic",B),defineReadOnly(this,"path",B.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat$1([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat$1(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(_){if(_>4294967295)throw new Error("invalid index - "+String(_));let x=this.path;x&&(x+="/"+(_&~HardenedBit));const E=new Uint8Array(37);if(_&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");E.set(arrayify(this.privateKey),1),x&&(x+="'")}else E.set(arrayify(this.publicKey));for(let O=24;O>=0;O-=8)E[33+(O>>3)]=_>>24-O&255;const S=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,E)),C=S.slice(0,32),T=S.slice(32);let A=null,B=null;this.privateKey?A=bytes32(BigNumber.from(C).add(this.privateKey).mod(N)):B=new SigningKey(hexlify(C))._addPoint(this.publicKey);let I=x;const M=this.mnemonic;return M&&(I=Object.freeze({phrase:M.phrase,path:x,locale:M.locale||"en"})),new HDNode(_constructorGuard,A,B,this.fingerprint,bytes32(T),_,this.depth+1,I)}derivePath(_){const x=_.split("/");if(x.length===0||x[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+_);x[0]==="m"&&x.shift();let E=this;for(let S=0;S<x.length;S++){const C=x[S];if(C.match(/^[0-9]+'$/)){const T=parseInt(C.substring(0,C.length-1));if(T>=HardenedBit)throw new Error("invalid path index - "+C);E=E._derive(HardenedBit+T)}else if(C.match(/^[0-9]+$/)){const T=parseInt(C);if(T>=HardenedBit)throw new Error("invalid path index - "+C);E=E._derive(T)}else throw new Error("invalid path component - "+C)}return E}static _fromSeed(_,x){const E=arrayify(_);if(E.length<16||E.length>64)throw new Error("invalid seed");const S=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,E));return new HDNode(_constructorGuard,bytes32(S.slice(0,32)),null,"0x00000000",bytes32(S.slice(32)),0,0,x)}static fromMnemonic(_,x,E){return E=getWordlist(E),_=entropyToMnemonic(mnemonicToEntropy(_,E),E),HDNode._fromSeed(mnemonicToSeed(_,x),{phrase:_,path:"m",locale:E.locale})}static fromSeed(_){return HDNode._fromSeed(_,null)}static fromExtendedKey(_){const x=Base58.decode(_);(x.length!==82||base58check(x.slice(0,78))!==_)&&logger$7.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const E=x[4],S=hexlify(x.slice(5,9)),C=parseInt(hexlify(x.slice(9,13)).substring(2),16),T=hexlify(x.slice(13,45)),A=x.slice(45,78);switch(hexlify(x.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify(A),S,T,C,E,null);case"0x0488ade4":case"0x04358394 ":if(A[0]!==0)break;return new HDNode(_constructorGuard,hexlify(A.slice(1)),null,S,T,C,E,null)}return logger$7.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(n,_){_||(_="");const x=toUtf8Bytes("mnemonic"+_,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(n,UnicodeNormalizationForm.NFKD),x,2048,64,"sha512")}function mnemonicToEntropy(n,_){_=getWordlist(_),logger$7.checkNormalize();const x=_.split(n);if(x.length%3!==0)throw new Error("invalid mnemonic");const E=arrayify(new Uint8Array(Math.ceil(11*x.length/8)));let S=0;for(let I=0;I<x.length;I++){let M=_.getWordIndex(x[I].normalize("NFKD"));if(M===-1)throw new Error("invalid mnemonic");for(let O=0;O<11;O++)M&1<<10-O&&(E[S>>3]|=1<<7-S%8),S++}const C=32*x.length/3,T=x.length/3,A=getUpperMask(T);if((arrayify(sha256$2(E.slice(0,C/8)))[0]&A)!==(E[E.length-1]&A))throw new Error("invalid checksum");return hexlify(E.slice(0,C/8))}function entropyToMnemonic(n,_){if(_=getWordlist(_),n=arrayify(n),n.length%4!==0||n.length<16||n.length>32)throw new Error("invalid entropy");const x=[0];let E=11;for(let T=0;T<n.length;T++)E>8?(x[x.length-1]<<=8,x[x.length-1]|=n[T],E-=8):(x[x.length-1]<<=E,x[x.length-1]|=n[T]>>8-E,x.push(n[T]&getLowerMask(8-E)),E+=3);const S=n.length/4,C=arrayify(sha256$2(n))[0]&getUpperMask(S);return x[x.length-1]<<=S,x[x.length-1]|=C>>8-S,_.join(x.map(T=>_.getWord(T)))}const version$2="random/5.7.0",logger$6=new Logger(version$2);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$1=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$1||!crypto$1.getRandomValues)&&(logger$6.warn("WARNING: Missing strong random number source"),crypto$1={getRandomValues:function(n){return logger$6.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(n){(n<=0||n>1024||n%1||n!=n)&&logger$6.throwArgumentError("invalid length","length",n);const _=new Uint8Array(n);return crypto$1.getRandomValues(_),arrayify(_)}var aesJs={exports:{}};(function(n,_){(function(x){function E(G){return parseInt(G)===G}function S(G){if(!E(G.length))return!1;for(var j=0;j<G.length;j++)if(!E(G[j])||G[j]<0||G[j]>255)return!1;return!0}function C(G,j){if(G.buffer&&ArrayBuffer.isView(G)&&G.name==="Uint8Array")return j&&(G.slice?G=G.slice():G=Array.prototype.slice.call(G)),G;if(Array.isArray(G)){if(!S(G))throw new Error("Array contains invalid value: "+G);return new Uint8Array(G)}if(E(G.length)&&S(G))return new Uint8Array(G);throw new Error("unsupported array-like object")}function T(G){return new Uint8Array(G)}function A(G,j,ee,pe,he){(pe!=null||he!=null)&&(G.slice?G=G.slice(pe,he):G=Array.prototype.slice.call(G,pe,he)),j.set(G,ee)}var B=function(){function G(ee){var pe=[],he=0;for(ee=encodeURI(ee);he<ee.length;){var Se=ee.charCodeAt(he++);Se===37?(pe.push(parseInt(ee.substr(he,2),16)),he+=2):pe.push(Se)}return C(pe)}function j(ee){for(var pe=[],he=0;he<ee.length;){var Se=ee[he];Se<128?(pe.push(String.fromCharCode(Se)),he++):Se>191&&Se<224?(pe.push(String.fromCharCode((Se&31)<<6|ee[he+1]&63)),he+=2):(pe.push(String.fromCharCode((Se&15)<<12|(ee[he+1]&63)<<6|ee[he+2]&63)),he+=3)}return pe.join("")}return{toBytes:G,fromBytes:j}}(),I=function(){function G(pe){for(var he=[],Se=0;Se<pe.length;Se+=2)he.push(parseInt(pe.substr(Se,2),16));return he}var j="0123456789abcdef";function ee(pe){for(var he=[],Se=0;Se<pe.length;Se++){var we=pe[Se];he.push(j[(we&240)>>4]+j[we&15])}return he.join("")}return{toBytes:G,fromBytes:ee}}(),M={16:10,24:12,32:14},O=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],D=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],L=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],V=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],U=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],q=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],H=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],W=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Q=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],re=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ce=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],ne=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Y=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],fe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ge=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function $e(G){for(var j=[],ee=0;ee<G.length;ee+=4)j.push(G[ee]<<24|G[ee+1]<<16|G[ee+2]<<8|G[ee+3]);return j}var _e=function(G){if(!(this instanceof _e))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:C(G,!0)}),this._prepare()};_e.prototype._prepare=function(){var G=M[this.key.length];if(G==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var j=0;j<=G;j++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var ee=(G+1)*4,pe=this.key.length/4,he=$e(this.key),Se,j=0;j<pe;j++)Se=j>>2,this._Ke[Se][j%4]=he[j],this._Kd[G-Se][j%4]=he[j];for(var we=0,xe=pe,Ee;xe<ee;){if(Ee=he[pe-1],he[0]^=D[Ee>>16&255]<<24^D[Ee>>8&255]<<16^D[Ee&255]<<8^D[Ee>>24&255]^O[we]<<24,we+=1,pe!=8)for(var j=1;j<pe;j++)he[j]^=he[j-1];else{for(var j=1;j<pe/2;j++)he[j]^=he[j-1];Ee=he[pe/2-1],he[pe/2]^=D[Ee&255]^D[Ee>>8&255]<<8^D[Ee>>16&255]<<16^D[Ee>>24&255]<<24;for(var j=pe/2+1;j<pe;j++)he[j]^=he[j-1]}for(var j=0,ye,Ce;j<pe&&xe<ee;)ye=xe>>2,Ce=xe%4,this._Ke[ye][Ce]=he[j],this._Kd[G-ye][Ce]=he[j++],xe++}for(var ye=1;ye<G;ye++)for(var Ce=0;Ce<4;Ce++)Ee=this._Kd[ye][Ce],this._Kd[ye][Ce]=ne[Ee>>24&255]^Y[Ee>>16&255]^fe[Ee>>8&255]^ge[Ee&255]},_e.prototype.encrypt=function(G){if(G.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var j=this._Ke.length-1,ee=[0,0,0,0],pe=$e(G),he=0;he<4;he++)pe[he]^=this._Ke[0][he];for(var Se=1;Se<j;Se++){for(var he=0;he<4;he++)ee[he]=V[pe[he]>>24&255]^U[pe[(he+1)%4]>>16&255]^q[pe[(he+2)%4]>>8&255]^H[pe[(he+3)%4]&255]^this._Ke[Se][he];pe=ee.slice()}for(var we=T(16),xe,he=0;he<4;he++)xe=this._Ke[j][he],we[4*he]=(D[pe[he]>>24&255]^xe>>24)&255,we[4*he+1]=(D[pe[(he+1)%4]>>16&255]^xe>>16)&255,we[4*he+2]=(D[pe[(he+2)%4]>>8&255]^xe>>8)&255,we[4*he+3]=(D[pe[(he+3)%4]&255]^xe)&255;return we},_e.prototype.decrypt=function(G){if(G.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var j=this._Kd.length-1,ee=[0,0,0,0],pe=$e(G),he=0;he<4;he++)pe[he]^=this._Kd[0][he];for(var Se=1;Se<j;Se++){for(var he=0;he<4;he++)ee[he]=W[pe[he]>>24&255]^Q[pe[(he+3)%4]>>16&255]^re[pe[(he+2)%4]>>8&255]^ce[pe[(he+1)%4]&255]^this._Kd[Se][he];pe=ee.slice()}for(var we=T(16),xe,he=0;he<4;he++)xe=this._Kd[j][he],we[4*he]=(L[pe[he]>>24&255]^xe>>24)&255,we[4*he+1]=(L[pe[(he+3)%4]>>16&255]^xe>>16)&255,we[4*he+2]=(L[pe[(he+2)%4]>>8&255]^xe>>8)&255,we[4*he+3]=(L[pe[(he+1)%4]&255]^xe)&255;return we};var ae=function(G){if(!(this instanceof ae))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new _e(G)};ae.prototype.encrypt=function(G){if(G=C(G),G.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var j=T(G.length),ee=T(16),pe=0;pe<G.length;pe+=16)A(G,ee,0,pe,pe+16),ee=this._aes.encrypt(ee),A(ee,j,pe);return j},ae.prototype.decrypt=function(G){if(G=C(G),G.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var j=T(G.length),ee=T(16),pe=0;pe<G.length;pe+=16)A(G,ee,0,pe,pe+16),ee=this._aes.decrypt(ee),A(ee,j,pe);return j};var X=function(G,j){if(!(this instanceof X))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!j)j=T(16);else if(j.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=C(j,!0),this._aes=new _e(G)};X.prototype.encrypt=function(G){if(G=C(G),G.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var j=T(G.length),ee=T(16),pe=0;pe<G.length;pe+=16){A(G,ee,0,pe,pe+16);for(var he=0;he<16;he++)ee[he]^=this._lastCipherblock[he];this._lastCipherblock=this._aes.encrypt(ee),A(this._lastCipherblock,j,pe)}return j},X.prototype.decrypt=function(G){if(G=C(G),G.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var j=T(G.length),ee=T(16),pe=0;pe<G.length;pe+=16){A(G,ee,0,pe,pe+16),ee=this._aes.decrypt(ee);for(var he=0;he<16;he++)j[pe+he]=ee[he]^this._lastCipherblock[he];A(G,this._lastCipherblock,0,pe,pe+16)}return j};var F=function(G,j,ee){if(!(this instanceof F))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!j)j=T(16);else if(j.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");ee||(ee=1),this.segmentSize=ee,this._shiftRegister=C(j,!0),this._aes=new _e(G)};F.prototype.encrypt=function(G){if(G.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var j=C(G,!0),ee,pe=0;pe<j.length;pe+=this.segmentSize){ee=this._aes.encrypt(this._shiftRegister);for(var he=0;he<this.segmentSize;he++)j[pe+he]^=ee[he];A(this._shiftRegister,this._shiftRegister,0,this.segmentSize),A(j,this._shiftRegister,16-this.segmentSize,pe,pe+this.segmentSize)}return j},F.prototype.decrypt=function(G){if(G.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var j=C(G,!0),ee,pe=0;pe<j.length;pe+=this.segmentSize){ee=this._aes.encrypt(this._shiftRegister);for(var he=0;he<this.segmentSize;he++)j[pe+he]^=ee[he];A(this._shiftRegister,this._shiftRegister,0,this.segmentSize),A(G,this._shiftRegister,16-this.segmentSize,pe,pe+this.segmentSize)}return j};var z=function(G,j){if(!(this instanceof z))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!j)j=T(16);else if(j.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=C(j,!0),this._lastPrecipherIndex=16,this._aes=new _e(G)};z.prototype.encrypt=function(G){for(var j=C(G,!0),ee=0;ee<j.length;ee++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),j[ee]^=this._lastPrecipher[this._lastPrecipherIndex++];return j},z.prototype.decrypt=z.prototype.encrypt;var J=function(G){if(!(this instanceof J))throw Error("Counter must be instanitated with `new`");G!==0&&!G&&(G=1),typeof G=="number"?(this._counter=T(16),this.setValue(G)):this.setBytes(G)};J.prototype.setValue=function(G){if(typeof G!="number"||parseInt(G)!=G)throw new Error("invalid counter value (must be an integer)");for(var j=15;j>=0;--j)this._counter[j]=G%256,G=G>>8},J.prototype.setBytes=function(G){if(G=C(G,!0),G.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=G},J.prototype.increment=function(){for(var G=15;G>=0;G--)if(this._counter[G]===255)this._counter[G]=0;else{this._counter[G]++;break}};var te=function(G,j){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",j instanceof J||(j=new J(j)),this._counter=j,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new _e(G)};te.prototype.encrypt=function(G){for(var j=C(G,!0),ee=0;ee<j.length;ee++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),j[ee]^=this._remainingCounter[this._remainingCounterIndex++];return j},te.prototype.decrypt=te.prototype.encrypt;function se(G){G=C(G,!0);var j=16-G.length%16,ee=T(G.length+j);A(G,ee);for(var pe=G.length;pe<ee.length;pe++)ee[pe]=j;return ee}function oe(G){if(G=C(G,!0),G.length<16)throw new Error("PKCS#7 invalid length");var j=G[G.length-1];if(j>16)throw new Error("PKCS#7 padding byte out of range");for(var ee=G.length-j,pe=0;pe<j;pe++)if(G[ee+pe]!==j)throw new Error("PKCS#7 invalid padding byte");var he=T(ee);return A(G,he,0,0,ee),he}var ie={AES:_e,Counter:J,ModeOfOperation:{ecb:ae,cbc:X,cfb:F,ofb:z,ctr:te},utils:{hex:I,utf8:B},padding:{pkcs7:{pad:se,strip:oe}},_arrayTest:{coerceArray:C,createArray:T,copyArray:A}};n.exports=ie})()})(aesJs);var aesJsExports=aesJs.exports;const aes=getDefaultExportFromCjs(aesJsExports),version$1="json-wallets/5.7.0";function looseArrayify(n){return typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),arrayify(n)}function zpad(n,_){for(n=String(n);n.length<_;)n="0"+n;return n}function getPassword(n){return typeof n=="string"?toUtf8Bytes(n,UnicodeNormalizationForm.NFKC):arrayify(n)}function searchPath(n,_){let x=n;const E=_.toLowerCase().split("/");for(let S=0;S<E.length;S++){let C=null;for(const T in x)if(T.toLowerCase()===E[S]){C=x[T];break}if(C===null)return null;x=C}return x}function uuidV4(n){const _=arrayify(n);_[6]=_[6]&15|64,_[8]=_[8]&63|128;const x=hexlify(_);return[x.substring(2,10),x.substring(10,14),x.substring(14,18),x.substring(18,22),x.substring(22,34)].join("-")}const logger$5=new Logger(version$1);class CrowdsaleAccount extends Description{isCrowdsaleAccount(_){return!!(_&&_._isCrowdsaleAccount)}}function decrypt$2(n,_){const x=JSON.parse(n);_=getPassword(_);const E=getAddress(searchPath(x,"ethaddr")),S=looseArrayify(searchPath(x,"encseed"));(!S||S.length%16!==0)&&logger$5.throwArgumentError("invalid encseed","json",n);const C=arrayify(pbkdf2$1(_,_,2e3,32,"sha256")).slice(0,16),T=S.slice(0,16),A=S.slice(16),B=new aes.ModeOfOperation.cbc(C,T),I=aes.padding.pkcs7.strip(arrayify(B.decrypt(A)));let M="";for(let L=0;L<I.length;L++)M+=String.fromCharCode(I[L]);const O=toUtf8Bytes(M),D=keccak256(O);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:E,privateKey:D})}function isCrowdsaleWallet(n){let _=null;try{_=JSON.parse(n)}catch{return!1}return _.encseed&&_.ethaddr}function isKeystoreWallet(n){let _=null;try{_=JSON.parse(n)}catch{return!1}return!(!_.version||parseInt(_.version)!==_.version||parseInt(_.version)!==3)}var scrypt$1={exports:{}};(function(n,_){(function(x){function S(U){const q=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let H=1779033703,W=3144134277,Q=1013904242,re=2773480762,ce=1359893119,ne=2600822924,Y=528734635,fe=1541459225;const ge=new Uint32Array(64);function $e(te){let se=0,oe=te.length;for(;oe>=64;){let ie=H,G=W,j=Q,ee=re,pe=ce,he=ne,Se=Y,we=fe,xe,Ee,ye,Ce,ve;for(Ee=0;Ee<16;Ee++)ye=se+Ee*4,ge[Ee]=(te[ye]&255)<<24|(te[ye+1]&255)<<16|(te[ye+2]&255)<<8|te[ye+3]&255;for(Ee=16;Ee<64;Ee++)xe=ge[Ee-2],Ce=(xe>>>17|xe<<32-17)^(xe>>>19|xe<<32-19)^xe>>>10,xe=ge[Ee-15],ve=(xe>>>7|xe<<32-7)^(xe>>>18|xe<<32-18)^xe>>>3,ge[Ee]=(Ce+ge[Ee-7]|0)+(ve+ge[Ee-16]|0)|0;for(Ee=0;Ee<64;Ee++)Ce=(((pe>>>6|pe<<32-6)^(pe>>>11|pe<<32-11)^(pe>>>25|pe<<32-25))+(pe&he^~pe&Se)|0)+(we+(q[Ee]+ge[Ee]|0)|0)|0,ve=((ie>>>2|ie<<32-2)^(ie>>>13|ie<<32-13)^(ie>>>22|ie<<32-22))+(ie&G^ie&j^G&j)|0,we=Se,Se=he,he=pe,pe=ee+Ce|0,ee=j,j=G,G=ie,ie=Ce+ve|0;H=H+ie|0,W=W+G|0,Q=Q+j|0,re=re+ee|0,ce=ce+pe|0,ne=ne+he|0,Y=Y+Se|0,fe=fe+we|0,se+=64,oe-=64}}$e(U);let _e,ae=U.length%64,X=U.length/536870912|0,F=U.length<<3,z=ae<56?56:120,J=U.slice(U.length-ae,U.length);for(J.push(128),_e=ae+1;_e<z;_e++)J.push(0);return J.push(X>>>24&255),J.push(X>>>16&255),J.push(X>>>8&255),J.push(X>>>0&255),J.push(F>>>24&255),J.push(F>>>16&255),J.push(F>>>8&255),J.push(F>>>0&255),$e(J),[H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255,Q>>>24&255,Q>>>16&255,Q>>>8&255,Q>>>0&255,re>>>24&255,re>>>16&255,re>>>8&255,re>>>0&255,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce>>>0&255,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255,fe>>>24&255,fe>>>16&255,fe>>>8&255,fe>>>0&255]}function C(U,q,H){U=U.length<=64?U:S(U);const W=64+q.length+4,Q=new Array(W),re=new Array(64);let ce,ne=[];for(ce=0;ce<64;ce++)Q[ce]=54;for(ce=0;ce<U.length;ce++)Q[ce]^=U[ce];for(ce=0;ce<q.length;ce++)Q[64+ce]=q[ce];for(ce=W-4;ce<W;ce++)Q[ce]=0;for(ce=0;ce<64;ce++)re[ce]=92;for(ce=0;ce<U.length;ce++)re[ce]^=U[ce];function Y(){for(let fe=W-1;fe>=W-4;fe--){if(Q[fe]++,Q[fe]<=255)return;Q[fe]=0}}for(;H>=32;)Y(),ne=ne.concat(S(re.concat(S(Q)))),H-=32;return H>0&&(Y(),ne=ne.concat(S(re.concat(S(Q))).slice(0,H))),ne}function T(U,q,H,W,Q){let re;for(M(U,(2*H-1)*16,Q,0,16),re=0;re<2*H;re++)I(U,re*16,Q,16),B(Q,W),M(Q,0,U,q+re*16,16);for(re=0;re<H;re++)M(U,q+re*2*16,U,re*16,16);for(re=0;re<H;re++)M(U,q+(re*2+1)*16,U,(re+H)*16,16)}function A(U,q){return U<<q|U>>>32-q}function B(U,q){M(U,0,q,0,16);for(let H=8;H>0;H-=2)q[4]^=A(q[0]+q[12],7),q[8]^=A(q[4]+q[0],9),q[12]^=A(q[8]+q[4],13),q[0]^=A(q[12]+q[8],18),q[9]^=A(q[5]+q[1],7),q[13]^=A(q[9]+q[5],9),q[1]^=A(q[13]+q[9],13),q[5]^=A(q[1]+q[13],18),q[14]^=A(q[10]+q[6],7),q[2]^=A(q[14]+q[10],9),q[6]^=A(q[2]+q[14],13),q[10]^=A(q[6]+q[2],18),q[3]^=A(q[15]+q[11],7),q[7]^=A(q[3]+q[15],9),q[11]^=A(q[7]+q[3],13),q[15]^=A(q[11]+q[7],18),q[1]^=A(q[0]+q[3],7),q[2]^=A(q[1]+q[0],9),q[3]^=A(q[2]+q[1],13),q[0]^=A(q[3]+q[2],18),q[6]^=A(q[5]+q[4],7),q[7]^=A(q[6]+q[5],9),q[4]^=A(q[7]+q[6],13),q[5]^=A(q[4]+q[7],18),q[11]^=A(q[10]+q[9],7),q[8]^=A(q[11]+q[10],9),q[9]^=A(q[8]+q[11],13),q[10]^=A(q[9]+q[8],18),q[12]^=A(q[15]+q[14],7),q[13]^=A(q[12]+q[15],9),q[14]^=A(q[13]+q[12],13),q[15]^=A(q[14]+q[13],18);for(let H=0;H<16;++H)U[H]+=q[H]}function I(U,q,H,W){for(let Q=0;Q<W;Q++)H[Q]^=U[q+Q]}function M(U,q,H,W,Q){for(;Q--;)H[W++]=U[q++]}function O(U){if(!U||typeof U.length!="number")return!1;for(let q=0;q<U.length;q++){const H=U[q];if(typeof H!="number"||H%1||H<0||H>=256)return!1}return!0}function D(U,q){if(typeof U!="number"||U%1)throw new Error("invalid "+q);return U}function L(U,q,H,W,Q,re,ce){if(H=D(H,"N"),W=D(W,"r"),Q=D(Q,"p"),re=D(re,"dkLen"),H===0||H&H-1)throw new Error("N must be power of 2");if(H>2147483647/128/W)throw new Error("N too large");if(W>2147483647/128/Q)throw new Error("r too large");if(!O(U))throw new Error("password must be an array or buffer");if(U=Array.prototype.slice.call(U),!O(q))throw new Error("salt must be an array or buffer");q=Array.prototype.slice.call(q);let ne=C(U,q,Q*128*W);const Y=new Uint32Array(Q*32*W);for(let pe=0;pe<Y.length;pe++){const he=pe*4;Y[pe]=(ne[he+3]&255)<<24|(ne[he+2]&255)<<16|(ne[he+1]&255)<<8|(ne[he+0]&255)<<0}const fe=new Uint32Array(64*W),ge=new Uint32Array(32*W*H),$e=32*W,_e=new Uint32Array(16),ae=new Uint32Array(16),X=Q*H*2;let F=0,z=null,J=!1,te=0,se=0,oe,ie;const G=ce?parseInt(1e3/W):4294967295,j=typeof setImmediate<"u"?setImmediate:setTimeout,ee=function(){if(J)return ce(new Error("cancelled"),F/X);let pe;switch(te){case 0:ie=se*32*W,M(Y,ie,fe,0,$e),te=1,oe=0;case 1:pe=H-oe,pe>G&&(pe=G);for(let Se=0;Se<pe;Se++)M(fe,0,ge,(oe+Se)*$e,$e),T(fe,$e,W,_e,ae);if(oe+=pe,F+=pe,ce){const Se=parseInt(1e3*F/X);if(Se!==z){if(J=ce(null,F/X),J)break;z=Se}}if(oe<H)break;oe=0,te=2;case 2:pe=H-oe,pe>G&&(pe=G);for(let Se=0;Se<pe;Se++){const we=(2*W-1)*16,xe=fe[we]&H-1;I(ge,xe*$e,fe,$e),T(fe,$e,W,_e,ae)}if(oe+=pe,F+=pe,ce){const Se=parseInt(1e3*F/X);if(Se!==z){if(J=ce(null,F/X),J)break;z=Se}}if(oe<H)break;if(M(fe,0,Y,ie,$e),se++,se<Q){te=0;break}ne=[];for(let Se=0;Se<Y.length;Se++)ne.push(Y[Se]>>0&255),ne.push(Y[Se]>>8&255),ne.push(Y[Se]>>16&255),ne.push(Y[Se]>>24&255);const he=C(U,ne,re);return ce&&ce(null,1,he),he}ce&&j(ee)};if(!ce)for(;;){const pe=ee();if(pe!=null)return pe}ee()}const V={scrypt:function(U,q,H,W,Q,re,ce){return new Promise(function(ne,Y){let fe=0;ce&&ce(0),L(U,q,H,W,Q,re,function(ge,$e,_e){if(ge)Y(ge);else if(_e)ce&&fe!==1&&ce(1),ne(new Uint8Array(_e));else if(ce&&$e!==fe)return fe=$e,ce($e)})})},syncScrypt:function(U,q,H,W,Q,re){return new Uint8Array(L(U,q,H,W,Q,re))}};n.exports=V})()})(scrypt$1);var scryptExports=scrypt$1.exports;const scrypt=getDefaultExportFromCjs(scryptExports);var __awaiter$1=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$4=new Logger(version$1);function hasMnemonic$1(n){return n!=null&&n.mnemonic&&n.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(_){return!!(_&&_._isKeystoreAccount)}}function _decrypt(n,_,x){if(searchPath(n,"crypto/cipher")==="aes-128-ctr"){const S=looseArrayify(searchPath(n,"crypto/cipherparams/iv")),C=new aes.Counter(S),T=new aes.ModeOfOperation.ctr(_,C);return arrayify(T.decrypt(x))}return null}function _getAccount(n,_){const x=looseArrayify(searchPath(n,"crypto/ciphertext"));if(hexlify(keccak256(concat$1([_.slice(16,32),x]))).substring(2)!==searchPath(n,"crypto/mac").toLowerCase())throw new Error("invalid password");const S=_decrypt(n,_.slice(0,16),x);S||logger$4.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const C=_.slice(32,64),T=computeAddress(S);if(n.address){let B=n.address.toLowerCase();if(B.substring(0,2)!=="0x"&&(B="0x"+B),getAddress(B)!==T)throw new Error("address mismatch")}const A={_isKeystoreAccount:!0,address:T,privateKey:hexlify(S)};if(searchPath(n,"x-ethers/version")==="0.1"){const B=looseArrayify(searchPath(n,"x-ethers/mnemonicCiphertext")),I=looseArrayify(searchPath(n,"x-ethers/mnemonicCounter")),M=new aes.Counter(I),O=new aes.ModeOfOperation.ctr(C,M),D=searchPath(n,"x-ethers/path")||defaultPath,L=searchPath(n,"x-ethers/locale")||"en",V=arrayify(O.decrypt(B));try{const U=entropyToMnemonic(V,L),q=HDNode.fromMnemonic(U,null,L).derivePath(D);if(q.privateKey!=A.privateKey)throw new Error("mnemonic mismatch");A.mnemonic=q.mnemonic}catch(U){if(U.code!==Logger.errors.INVALID_ARGUMENT||U.argument!=="wordlist")throw U}}return new KeystoreAccount(A)}function pbkdf2Sync(n,_,x,E,S){return arrayify(pbkdf2$1(n,_,x,E,S))}function pbkdf2(n,_,x,E,S){return Promise.resolve(pbkdf2Sync(n,_,x,E,S))}function _computeKdfKey(n,_,x,E,S){const C=getPassword(_),T=searchPath(n,"crypto/kdf");if(T&&typeof T=="string"){const A=function(B,I){return logger$4.throwArgumentError("invalid key-derivation function parameters",B,I)};if(T.toLowerCase()==="scrypt"){const B=looseArrayify(searchPath(n,"crypto/kdfparams/salt")),I=parseInt(searchPath(n,"crypto/kdfparams/n")),M=parseInt(searchPath(n,"crypto/kdfparams/r")),O=parseInt(searchPath(n,"crypto/kdfparams/p"));(!I||!M||!O)&&A("kdf",T),I&I-1&&A("N",I);const D=parseInt(searchPath(n,"crypto/kdfparams/dklen"));return D!==32&&A("dklen",D),E(C,B,I,M,O,64,S)}else if(T.toLowerCase()==="pbkdf2"){const B=looseArrayify(searchPath(n,"crypto/kdfparams/salt"));let I=null;const M=searchPath(n,"crypto/kdfparams/prf");M==="hmac-sha256"?I="sha256":M==="hmac-sha512"?I="sha512":A("prf",M);const O=parseInt(searchPath(n,"crypto/kdfparams/c")),D=parseInt(searchPath(n,"crypto/kdfparams/dklen"));return D!==32&&A("dklen",D),x(C,B,O,D,I)}}return logger$4.throwArgumentError("unsupported key-derivation function","kdf",T)}function decryptSync(n,_){const x=JSON.parse(n),E=_computeKdfKey(x,_,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(x,E)}function decrypt$1(n,_,x){return __awaiter$1(this,void 0,void 0,function*(){const E=JSON.parse(n),S=yield _computeKdfKey(E,_,pbkdf2,scrypt.scrypt,x);return _getAccount(E,S)})}function encrypt$1(n,_,x,E){try{if(getAddress(n.address)!==computeAddress(n.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(n)){const q=n.mnemonic;if(HDNode.fromMnemonic(q.phrase,null,q.locale).derivePath(q.path||defaultPath).privateKey!=n.privateKey)throw new Error("mnemonic mismatch")}}catch(q){return Promise.reject(q)}typeof x=="function"&&!E&&(E=x,x={}),x||(x={});const S=arrayify(n.privateKey),C=getPassword(_);let T=null,A=null,B=null;if(hasMnemonic$1(n)){const q=n.mnemonic;T=arrayify(mnemonicToEntropy(q.phrase,q.locale||"en")),A=q.path||defaultPath,B=q.locale||"en"}let I=x.client;I||(I="ethers.js");let M=null;x.salt?M=arrayify(x.salt):M=randomBytes(32);let O=null;if(x.iv){if(O=arrayify(x.iv),O.length!==16)throw new Error("invalid iv")}else O=randomBytes(16);let D=null;if(x.uuid){if(D=arrayify(x.uuid),D.length!==16)throw new Error("invalid uuid")}else D=randomBytes(16);let L=1<<17,V=8,U=1;return x.scrypt&&(x.scrypt.N&&(L=x.scrypt.N),x.scrypt.r&&(V=x.scrypt.r),x.scrypt.p&&(U=x.scrypt.p)),scrypt.scrypt(C,M,L,V,U,64,E).then(q=>{q=arrayify(q);const H=q.slice(0,16),W=q.slice(16,32),Q=q.slice(32,64),re=new aes.Counter(O),ce=new aes.ModeOfOperation.ctr(H,re),ne=arrayify(ce.encrypt(S)),Y=keccak256(concat$1([W,ne])),fe={address:n.address.substring(2).toLowerCase(),id:uuidV4(D),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(O).substring(2)},ciphertext:hexlify(ne).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(M).substring(2),n:L,dklen:32,p:U,r:V},mac:Y.substring(2)}};if(T){const ge=randomBytes(16),$e=new aes.Counter(ge),_e=new aes.ModeOfOperation.ctr(Q,$e),ae=arrayify(_e.encrypt(T)),X=new Date,F=X.getUTCFullYear()+"-"+zpad(X.getUTCMonth()+1,2)+"-"+zpad(X.getUTCDate(),2)+"T"+zpad(X.getUTCHours(),2)+"-"+zpad(X.getUTCMinutes(),2)+"-"+zpad(X.getUTCSeconds(),2)+".0Z";fe["x-ethers"]={client:I,gethFilename:"UTC--"+F+"--"+fe.address,mnemonicCounter:hexlify(ge).substring(2),mnemonicCiphertext:hexlify(ae).substring(2),path:A,locale:B,version:"0.1"}}return JSON.stringify(fe)})}function decryptJsonWallet(n,_,x){if(isCrowdsaleWallet(n)){x&&x(0);const E=decrypt$2(n,_);return x&&x(1),Promise.resolve(E)}return isKeystoreWallet(n)?decrypt$1(n,_,x):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(n,_){if(isCrowdsaleWallet(n))return decrypt$2(n,_);if(isKeystoreWallet(n))return decryptSync(n,_);throw new Error("invalid JSON wallet")}const version="wallet/5.7.0";var __awaiter=globalThis&&globalThis.__awaiter||function(n,_,x,E){function S(C){return C instanceof x?C:new x(function(T){T(C)})}return new(x||(x=Promise))(function(C,T){function A(M){try{I(E.next(M))}catch(O){T(O)}}function B(M){try{I(E.throw(M))}catch(O){T(O)}}function I(M){M.done?C(M.value):S(M.value).then(A,B)}I((E=E.apply(n,_||[])).next())})};const logger$3=new Logger(version);function isAccount(n){return n!=null&&isHexString(n.privateKey,32)&&n.address!=null}function hasMnemonic(n){const _=n.mnemonic;return _&&_.phrase}class Wallet extends Signer{constructor(_,x){if(super(),isAccount(_)){const E=new SigningKey(_.privateKey);if(defineReadOnly(this,"_signingKey",()=>E),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(_.address)&&logger$3.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(_)){const S=_.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:S.phrase,path:S.path||defaultPath,locale:S.locale||"en"}));const C=this.mnemonic,T=HDNode.fromMnemonic(C.phrase,null,C.locale).derivePath(C.path);computeAddress(T.privateKey)!==this.address&&logger$3.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(_))_.curve!=="secp256k1"&&logger$3.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>_);else{typeof _=="string"&&_.match(/^[0-9a-f]*$/i)&&_.length===64&&(_="0x"+_);const E=new SigningKey(_);defineReadOnly(this,"_signingKey",()=>E)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}x&&!Provider.isProvider(x)&&logger$3.throwArgumentError("invalid provider","provider",x),defineReadOnly(this,"provider",x||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(_){return new Wallet(this,_)}signTransaction(_){return resolveProperties(_).then(x=>{x.from!=null&&(getAddress(x.from)!==this.address&&logger$3.throwArgumentError("transaction from address mismatch","transaction.from",_.from),delete x.from);const E=this._signingKey().signDigest(keccak256(serialize(x)));return serialize(x,E)})}signMessage(_){return __awaiter(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(_)))})}_signTypedData(_,x,E){return __awaiter(this,void 0,void 0,function*(){const S=yield TypedDataEncoder.resolveNames(_,x,E,C=>(this.provider==null&&logger$3.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:C}),this.provider.resolveName(C)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(S.domain,x,S.value)))})}encrypt(_,x,E){if(typeof x=="function"&&!E&&(E=x,x={}),E&&typeof E!="function")throw new Error("invalid callback");return x||(x={}),encrypt$1(this,_,x,E)}static createRandom(_){let x=randomBytes(16);_||(_={}),_.extraEntropy&&(x=arrayify(hexDataSlice(keccak256(concat$1([x,_.extraEntropy])),0,16)));const E=entropyToMnemonic(x,_.locale);return Wallet.fromMnemonic(E,_.path,_.locale)}static fromEncryptedJson(_,x,E){return decryptJsonWallet(_,x,E).then(S=>new Wallet(S))}static fromEncryptedJsonSync(_,x){return new Wallet(decryptJsonWalletSync(_,x))}static fromMnemonic(_,x,E){return x||(x=defaultPath),new Wallet(HDNode.fromMnemonic(_,null,E).derivePath(x))}}function verifyMessage(n,_){return recoverAddress(hashMessage(n),_)}function getEIP191Verifier(){return{eip191:async(n,_)=>{verifyEIP191Signature(n,_)}}}const LEGACY_CHAIN_ID_REORG_DATE=new Date("2022-09-20").valueOf();function verifyEIP191Signature(n,_){assertSigned(n),verifyTimeChecks(n,_);const E=[verifyMessage(SiweMessage.fromCacao(n).toMessage(),n.s.s).toLowerCase()];if(Date.parse(n.p.iat)<=LEGACY_CHAIN_ID_REORG_DATE){const C=verifyMessage(asLegacyChainIdString(SiweMessage.fromCacao(n),"Ethereum"),n.s.s).toLowerCase();E.push(C)}const S=AccountId.parse(n.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!E.includes(S))throw new Error("Signature does not belong to issuer")}function asUint8Array(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function allocUnsafe(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function createCodec$1(n,_,x,E){return{name:n,prefix:_,encoder:{name:n,prefix:_,encode:x},decoder:{decode:E}}}const string=createCodec$1("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),ascii=createCodec$1("ascii","a",n=>{let _="a";for(let x=0;x<n.length;x++)_+=String.fromCharCode(n[x]);return _},n=>{n=n.substring(1);const _=allocUnsafe(n.length);for(let x=0;x<n.length;x++)_[x]=n.charCodeAt(x);return _}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$4(n,_="utf8"){const x=BASES[_];if(!x)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):x.encoder.encode(n).substring(1)}function fromString(n,_="utf8"){const x=BASES[_];if(!x)throw new Error(`Unsupported encoding "${_}"`);return(_==="utf8"||_==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(n,"utf-8")):x.decoder.decode(`${x.prefix}${n}`)}function randomString(){return toString$4(random.randomBytes(16),"base64")}const B64="base64pad",B64_URL="base64url";function encodeBase64(n){return toString$4(n,B64)}function encodeBase64Url(n){return toString$4(n,B64_URL)}function decodeBase64(n){return fromString(n,B64)}function base64urlToJSON(n){return JSON.parse(toString$4(fromString(n,B64_URL)))}function fromDagJWS(n){if(n.signatures.length>1)throw new Error("Cant convert to compact jws");return`${n.signatures[0].protected}.${n.payload}.${n.signatures[0].signature}`}function didWithTime(n,_){if(_){const x=_.toISOString().split(".")[0]+"Z";return`${n}?versionTime=${x}`}else return n}function extractControllers(n){return n?Array.isArray(n)?n:[n]:[]}const verifiers={...getEIP191Verifier()};function isResolver(n){return"registry"in n&&"cache"in n}class DID{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(_){return new DID({provider:this._client?.connection,resolver:this._resolver,capability:_,parent:this._parentId})}setProvider(_){if(this._client==null)this._client=new RPCClient(_);else if(this._client.connection!==_)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(_,x){this._resolver=isResolver(_)?_:new Resolver(_,x)}async authenticate({provider:_,paths:x=[],aud:E}={}){if(_!=null&&this.setProvider(_),this._client==null)throw new Error("No provider available");const S=randomString(),C=await this._client.request("did_authenticate",{nonce:S,aud:E,paths:x}),{kid:T}=await this.verifyJWS(C),A=base64urlToJSON(C.payload);if(!T.includes(A.did))throw new Error("Invalid authencation response, kid mismatch");if(A.nonce!==S)throw new Error("Invalid authencation response, wrong nonce");if(A.aud!==E)throw new Error("Invalid authencation response, wrong aud");if(A.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=A.did,this._id}async createJWS(_,x={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){const S=this._capability.p.exp;if(S&&Date.parse(S)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");const C=await CacaoBlock.fromCacao(this._capability),T=CID$3.asCID(C.cid);if(!T)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");x.protected=x.protected||{},x.protected.cap=`ipfs://${T?.toString()}`}const{jws:E}=await this._client.request("did_createJWS",{did:this._id,...x,payload:_});return E}async createDagJWS(_,x={}){const{cid:E,linkedBlock:S}=await encodePayload(_),C=encodeBase64Url(E.bytes);Object.assign(x,{linkedBlock:encodeBase64(S)});const T=await this.createJWS(C,x),A=CID$3.asCID(E);if(!A)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(T.link=A,this._capability){const B=await CacaoBlock.fromCacao(this._capability);return{jws:T,linkedBlock:S,cacaoBlock:B.bytes}}return{jws:T,linkedBlock:S}}async verifyJWS(_,x={}){x=Object.assign({verifiers},x),typeof _!="string"&&(_=fromDagJWS(_));const E=base64urlToJSON(_.split(".")[0]).kid;if(!E)throw new Error('No "kid" found in jws');const S=await this.resolve(E);if(!x.disableTimecheck){const I=S.didDocumentMetadata?.nextUpdate;if(I){const O=x.revocationPhaseOutSecs?x.revocationPhaseOutSecs*1e3:0,D=new Date(I).valueOf()+O;if(!(x.atTime&&x.atTime.getTime()<D))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${E}`)}const M=S.didDocumentMetadata?.updated;if(M&&x.atTime&&x.atTime.getTime()<new Date(M).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${E}`)}const T=S.didDocument?.id;if(x.issuer&&x.issuer===x.capability?.p.iss&&T===x.capability.p.aud){if(!x.verifiers)throw new Error("Registered verifiers needed for CACAO");await Cacao.verify(x.capability,{disableExpirationCheck:x.disableTimecheck,atTime:x.atTime?x.atTime:void 0,revocationPhaseOutSecs:x.revocationPhaseOutSecs,verifiers:x.verifiers??{}})}else if(x.issuer&&x.issuer!==T){const I=didWithTime(x.issuer,x.atTime),O=(await this.resolve(I)).didDocument?.controller,D=extractControllers(O);if(x.capability?.s&&x.capability.p.aud===T&&D.includes(x.capability.p.iss))await Cacao.verify(x.capability,{atTime:x.atTime?x.atTime:void 0,revocationPhaseOutSecs:x.revocationPhaseOutSecs,verifiers:x.verifiers??{}});else if(!(T?D.includes(T):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${E}`)}const A=S.didDocument?.verificationMethod||[];verifyJWS(_,A);let B;try{B=base64urlToJSON(_.split(".")[1])}catch{}return{kid:E,payload:B,didResolutionResult:S}}async createJWE(_,x,E={}){const S=await resolveX25519Encrypters(x,this._resolver);return createJWE(_,S,E.protectedHeader,E.aad)}async createDagJWE(_,x,E={}){const S=await prepareCleartext(_);return this.createJWE(S,x,E)}async decryptJWE(_,x={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:E}=await this._client.request("did_decryptJWE",{did:this._id,...x,jwe:_});return decodeBase64(E)}async decryptDagJWE(_){const x=await this.decryptJWE(_);return decodeCleartext(x)}async resolve(_){const x=await this._resolver.resolve(_);if(x.didResolutionMetadata.error){const{error:E,message:S}=x.didResolutionMetadata,C=S?`, ${S}`:"";throw new Error(`Failed to resolve ${_}: ${E}${C}`)}return x}constructor({provider:_,resolver:x={},resolverOptions:E,capability:S,parent:C}={}){if(_!=null&&(this._client=new RPCClient(_)),S){if(this._capability=S,this._parentId=this._capability.p.iss,C&&this._parentId!==C)throw new Error("Capability issuer and parent not equal")}else C&&(this._parentId=C);this.setResolver(x,E)}}const TYPE="DID";class DIDIdentityProvider extends IdentityProvider{constructor({didProvider:_}){super(),this.did=new DID({resolver:DIDIdentityProvider.did._resolver,provider:_})}static get type(){return TYPE}async getId({space:_}){return this.did.authenticated||await this.did.authenticate(),this.did.id}async signIdentity(_,{space:x}){this.did.authenticated||await this.did.authenticate();const E=toString$7(fromString$3(_,"base16"),"base64url"),S=await this.did.createJWS(E);return`${S.signatures[0].protected}..${S.signatures[0].signature}`}static setDIDResolver(_){this.did?this.did.setResolver(_):this.did=new DID({resolver:_})}static async verifyIdentity(_){if(!this.did)throw new Error("The DID resolver must first be set with setDIDResolver()");const x=_.publicKey+_.signatures.id;try{const E=toString$7(fromString$3(x,"base16"),"base64url"),[S,C]=_.signatures.publicKey.split(".."),T=[S,E,C].join(".");await this.did.verifyJWS(T)}catch{return!1}return!0}}const type$3="ethereum";class EthIdentityProvider extends IdentityProvider{constructor(_={}){super(),this.wallet=_.wallet}static get type(){return type$3}async getId(_={}){return this.wallet||(this.wallet=await this._createWallet(_)),this.wallet.getAddress()}async signIdentity(_,x={}){const E=this.wallet;if(!E)throw new Error("wallet is required");return E.signMessage(_)}static async verifyIdentity(_){return verifyMessage(_.publicKey+_.signatures.id,_.signatures.publicKey)===_.id}async _createWallet(_={}){if(_.mnemonicOpts){if(!_.mnemonicOpts.mnemonic)throw new Error("mnemonic is required");return Wallet.fromMnemonic(_.mnemonicOpts.mnemonic,_.mnemonicOpts.path,_.mnemonicOpts.wordlist)}if(_.encryptedJsonOpts){if(!_.encryptedJsonOpts.json)throw new Error("encrypted json is required");if(!_.encryptedJsonOpts.password)throw new Error("password for encrypted json is required");return Wallet.fromEncryptedJson(_.encryptedJsonOpts.json,_.encryptedJsonOpts.password,_.encryptedJsonOpts.progressCallback)}return Wallet.createRandom()}}const defaultType="orbitdb",identityKeysPath=path.join("./orbitdb","identity","identitykeys"),supportedTypes={orbitdb:OrbitDBIdentityProvider,[DIDIdentityProvider.type]:DIDIdentityProvider,[EthIdentityProvider.type]:EthIdentityProvider},getHandlerFor=n=>{if(!Identities.isSupported(n))throw new Error(`IdentityProvider type '${n}' is not supported`);return supportedTypes[n]};class Identities{constructor(_){this._keystore=_.keystore,this._signingKeystore=_.signingKeystore||this._keystore,this._knownIdentities=_.cache||new LRU$1(_.cacheSize||100)}static get IdentityProvider(){return IdentityProvider}get keystore(){return this._keystore}get signingKeystore(){return this._signingKeystore}async sign(_,x){const E=await this.keystore.getKey(_.id);if(!E)throw new Error("Private signing key not found from Keystore");return await this.keystore.sign(E,x)}async verify(_,x,E,S="v1"){return this.keystore.verify(_,x,E,S)}async createIdentity(_={}){const x=_.keystore||this.keystore,E=_.type||defaultType,S=E===defaultType?new OrbitDBIdentityProvider(_.signingKeystore||x):new(getHandlerFor(E))(_),C=await S.getId(_);_.migrate&&await _.migrate({targetStore:x._store,targetId:C});const{publicKey:T,idSignature:A}=await this.signId(C),B=await S.signIdentity(T+A,_);return new Identity(C,T,A,B,E,this)}async signId(_){const x=this.keystore,E=await x.getKey(_)||await x.createKey(_),S=x.getPublic(E),C=await x.sign(E,_);return{publicKey:S,idSignature:C}}async verifyIdentity(_){if(!Identity.isIdentity(_))return!1;const x=this._knownIdentities.get(_.signatures.id);if(x)return _.id===x.id&&_.publicKey===x.publicKey&&_.signatures.id===x.signatures.id&&_.signatures.publicKey===x.signatures.publicKey;if(!await this.keystore.verify(_.signatures.id,_.publicKey,_.id))return!1;const C=await getHandlerFor(_.type).verifyIdentity(_);return C&&this._knownIdentities.set(_.signatures.id,Identity.toJSON(_)),C}static async verifyIdentity(_){return!Identity.isIdentity(_)||!await Keystore.verify(_.signatures.id,_.publicKey,_.id)?!1:getHandlerFor(_.type).verifyIdentity(_)}static async createIdentity(_={}){return _.keystore||(_.keystore=new Keystore(_.identityKeysPath||identityKeysPath)),_.signingKeystore||(_.signingKeysPath?_.signingKeystore=new Keystore(_.signingKeysPath):_.signingKeystore=_.keystore),await _.keystore.open(),await _.signingKeystore.open(),_=Object.assign({},{type:defaultType},_),new Identities(_).createIdentity(_)}static isSupported(_){return Object.keys(supportedTypes).includes(_)}static addIdentityProvider(_){if(!_)throw new Error("IdentityProvider class needs to be given as an option");if(!_.type||typeof _.type!="string")throw new Error("Given IdentityProvider class needs to implement: static get type() { /* return a string */ }.");supportedTypes[_.type]=_}static removeIdentityProvider(_){delete supportedTypes[_]}}const notEmpty=n=>n!==""&&n!==" ";class OrbitDBAddress{constructor(_,x){this.root=_,this.path=x}toString(){return OrbitDBAddress.join(this.root,this.path)}static isValid(_){_=_.toString().replace(/\\/g,"/");const x=(T,A)=>!((A===0||A===1)&&_.toString().indexOf("/orbit")===0&&T==="orbitdb"),E=_.toString().split("/").filter(x).filter(notEmpty);let S;const C=T=>{const A=["zd","Qm","ba","k5"];for(const B of A)if(T.indexOf(B)>-1)return!0;return!1};try{S=C(E[0])?CID$3.parse(E[0]).toString():null}catch{return!1}return S!==null}static parse(_){if(!_)throw new Error(`Not a valid OrbitDB address: ${_}`);if(!OrbitDBAddress.isValid(_))throw new Error(`Not a valid OrbitDB address: ${_}`);_=_.toString().replace(/\\/g,"/");const x=_.toString().split("/").filter((E,S)=>!((S===0||S===1)&&_.toString().indexOf("/orbit")===0&&E==="orbitdb")).filter(E=>E!==""&&E!==" ");return new OrbitDBAddress(x[0],x.slice(1,x.length).join("/"))}static join(..._){return(path.posix||path).join("/orbitdb",..._)}}const createDBManifest=async(n,_,x,E,S)=>{const C=Object.assign({name:_,type:x,accessController:(path.posix||path).join("/ipfs",E)},S.meta!==void 0?{meta:S.meta}:{});return write$3(n,S.format||"dag-cbor",C,S)},PROTOCOL="ipfs-pubsub-direct-channel/v1",encode$5=n=>{let _=n;return safeBufferExports.Buffer.isBuffer(_)||(_=safeBufferExports.Buffer.from(_)),_},waitForPeers=async(n,_,x,E)=>{const S=async()=>{const C=await n.pubsub.peers(x),T=_.map(I=>String(I)),A=C.map(I=>String(I));return T.map(I=>A.includes(I)).filter(I=>I===!1).length===0};return await S()?Promise.resolve():new Promise((C,T)=>{const A=setInterval(async()=>{try{E()?clearInterval(A):await S()&&(clearInterval(A),C())}catch(B){T(B)}},100)})},getPeerID=async n=>(await n.id()).id;class DirectChannel extends EventEmitter$5{constructor(_,x){if(super(),this._ipfs=_,!_.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._closed=!1,this._isClosed=()=>this._closed,this._receiverID=x,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await waitForPeers(this._ipfs,[this._receiverID],this._id,this._isClosed)}async send(_){if(this._closed)return;const x=encode$5(_);await this._ipfs.pubsub.publish(this._id,x)}close(){this._closed=!0,this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await getPeerID(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id="/"+PROTOCOL+"/"+this._peers.join("/"),this._messageHandler=_=>{_&&String(_.from)===String(this._receiverID)&&this.emit("message",_)}}async _openChannel(){this._closed=!1,await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(_,x){const E=new DirectChannel(_,x);return await E._openChannel(),E}}const logger$2=Logger$2.create("exchange-heads",{color:Logger$2.Colors.Yellow});Logger$2.setLogLevel("ERROR");const getHeadsForDatabase=async n=>{if(!(n&&n._cache))return[];const _=await n._cache.get(n.localHeadsPath)||[],x=await n._cache.get(n.remoteHeadsPath)||[];return[..._,...x]},exchangeHeads=async(n,_,x,E,S,C,T)=>{const A=M=>{const O=JSON.parse(Buffer$5.from(M.data).toString()),{address:D,heads:L}=O;C(D,L)};let B=S(x);if(!B)try{logger$2.debug(`Create a channel to ${x}`),B=await DirectChannel.open(n,x),B.on("message",A),logger$2.debug(`Channel created to ${x}`),T(B)}catch(M){logger$2.error(M)}await B.connect(),logger$2.debug(`Connected to ${x}`);const I=await getHeadsForDatabase(E(_));return logger$2.debug(`Send latest heads of '${_}':
`,JSON.stringify(I.map(M=>M.hash),null,2)),I&&await B.send(JSON.stringify({address:_,heads:I})),B},isDefined=n=>n!=null;class Storage{constructor(_,x={}){const E={createIfMissing:!0,errorIfExists:!1,compression:!0,cacheSize:8388608};this.storage=_,this.preCreate=x.preCreate?x.preCreate:()=>{};const S=Object.assign({},x,E);delete S.preCreate,this.options={down:S}}async createStore(_="./orbitdb",x={}){this.options.up=x,await this.preCreate(_,this.options),this.storage;const E=new Level(_,x);return await E.open(),E}async destroy(_){!this.storage||!this.storage.destroy||await this.storage.destory(_._db.location)}async preCreate(_,x){}}const Storage$1=(n,_)=>new Storage(n,_),fs=!isElectronMain&&(typeof window=="object"||typeof self=="object")?null:fs_,logger$1=Logger$2.create("orbit-db");Logger$2.setLogLevel("ERROR");async function migrate(n,_,x){let E=_.cache||(n.caches[_.directory]?n.caches[_.directory].cache:null),S;if(!E){const B=(path.posix||path).join(n.directory,x.root,x.path);if(fs&&fs.existsSync&&!fs.existsSync(B))return;S=await n.storage.createStore(B),E=new Cache(S)}if(!await E.get("_localHeads"))return;const T=x.toString();logger$1.debug("Attempting to migrate from old cache location");const A=["_remoteHeads","_localHeads","snapshot","queue"];for(const B in A)try{const I=path.join(T,A[B]),M=await E.get(A[B]);M&&await _.cache.set(I,M)}catch(I){logger$1.debug(I.message)}await _.cache.set(path.join(T,"_manifest"),x.root),S&&await S.close()}const migrations=[migrate],run=async(n,_,x)=>{for(let E=0;E<migrations.length;E++)await migrations[E](n,_,x)},logger=Logger$2.create("orbit-db");Logger$2.setLogLevel("ERROR");const databaseTypes={counter:CounterStore,eventlog:EventStore,feed:FeedStore,docstore:DocumentStore,keyvalue:KeyValueStore},defaultTimeout=3e4;let AccessControllers=AccessControllers$1;class OrbitDB{constructor(_,x,E={}){if(!isDefined(_))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!isDefined(x))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=_,this.identity=x,this.id=E.peerId,this._pubsub=E.offline?null:new(E.broker?E.broker:IPFSPubsub)(this._ipfs,this.id),this.directory=E.directory||"./orbitdb",this.storage=E.storage,this._directConnections={},this.caches={},this.caches[this.directory]={cache:E.cache,handlers:new Set},this.keystore=E.keystore,this.stores={},AccessControllers=E.AccessControllers||AccessControllers}static get Pubsub(){return IPFSPubsub}static get Cache(){return Cache}static get Keystore(){return Keystore}static get Identities(){return Identities}static get AccessControllers(){return AccessControllers}static get Storage(){return Storage$1}static get OrbitDBAddress(){return OrbitDBAddress}static get Store(){return Store}static get EventStore(){return EventStore}static get FeedStore(){return FeedStore}static get KeyValueStore(){return KeyValueStore}static get CounterStore(){return CounterStore}static get DocumentStore(){return DocumentStore}get cache(){return this.caches[this.directory].cache}static async createInstance(_,x={}){if(!isDefined(_))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(x.offline===void 0&&(x.offline=!1),x.offline&&!x.id)throw new Error("Offline mode requires passing an `id` in the options");const{id:E}=x.id||x.offline?{id:x.id}:await _.id();if(x.directory||(x.directory="./orbitdb"),!x.storage){const C={};x.storage=Storage$1(null,C)}if(x.identity&&x.identity.provider.keystore&&(x.keystore=x.identity.provider.keystore),!x.keystore){const C=path.join(x.directory,typeof E!="object"?E:E.toString(),"/keystore"),T=await x.storage.createStore(C);x.keystore=new Keystore(T)}if(x.identity||(x.identity=await Identities.createIdentity({id:E,keystore:x.keystore})),!x.cache){const C=path.join(x.directory,typeof E!="object"?E:E.toString(),"/cache"),T=await x.storage.createStore(C);x.cache=new Cache(T)}const S=Object.assign({},x,{peerId:typeof E!="object"?E:E.toString()});return new OrbitDB(_,x.identity,S)}async feed(_,x={}){return x=Object.assign({create:!0,type:"feed"},x),this.open(_,x)}async log(_,x={}){return x=Object.assign({create:!0,type:"eventlog"},x),this.open(_,x)}async eventlog(_,x={}){return this.log(_,x)}async keyvalue(_,x={}){return x=Object.assign({create:!0,type:"keyvalue"},x),this.open(_,x)}async kvstore(_,x={}){return this.keyvalue(_,x)}async counter(_,x={}){return x=Object.assign({create:!0,type:"counter"},x),this.open(_,x)}async docs(_,x={}){return x=Object.assign({create:!0,type:"docstore"},x),this.open(_,x)}async docstore(_,x={}){return this.docs(_,x)}async disconnect(){for(const E of Object.values(this._directConnections))E.close();this._directConnections={},this._pubsub&&await this._pubsub.disconnect(),await this.keystore.close();const _=Object.values(this.stores);for(const E of _)await E.close();this.stores={};const x=Object.values(this.caches);for(const E of x)await E.cache.close();this.caches={},this.stores={}}async stop(){await this.disconnect()}async _createCache(_){const x=await this.storage.createStore(_);return new Cache(x)}async _createStore(_,x,E){const S=databaseTypes[_];if(!S)throw new Error(`Invalid database type '${_}'`);let C;E.accessControllerAddress&&(C=await AccessControllers.resolve(this,E.accessControllerAddress,E.accessController));const T=Object.assign({replicate:!0},E,{accessController:C,cache:E.cache,onClose:this._onClose.bind(this),onDrop:this._onDrop.bind(this),onLoad:this._onLoad.bind(this)}),A=E.identity||this.identity,B=new S(this._ipfs,A,x,T);B.events.on("write",this._onWrite.bind(this));const I=x.toString();return this.stores[I]=B,T.replicate&&this._pubsub&&await this._pubsub.subscribe(I,this._onMessage.bind(this),this._onPeerConnected.bind(this)),B}_onWrite(_,x,E){if(!E)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(_,E)}async _onMessage(_,x,E){const S=this.stores[_];try{logger.debug(`Received ${x.length} heads for '${_}':
`,JSON.stringify(x.map(C=>C.hash),null,2)),S&&x&&(x.length>0&&await S.sync(x),S.events.emit("peer.exchanged",E,_,x))}catch(C){logger.error(C)}}async _onPeerConnected(_,x){logger.debug(`New peer '${x}' connected to '${_}'`);const E=A=>this.stores[A],S=A=>this._directConnections[A],C=A=>{this._directConnections[A._receiverID]=A},T=(A,B)=>this._onMessage(A,B,x);await exchangeHeads(this._ipfs,_,x,E,S,T,C),E(_)&&E(_).events.emit("peer",x)}async _onClose(_){const x=_.address.toString();logger.debug(`Close ${x}`),this._pubsub&&await this._pubsub.unsubscribe(x);const E=_&&_.options.directory?_.options.directory:this.directory,S=this.caches[E];S&&S.handlers.has(x)&&(S.handlers.delete(x),S.handlers.size||await S.cache.close()),delete this.stores[x]}async _onDrop(_){const x=_.address.toString(),E=_&&_.options.directory?_.options.directory:this.directory;await this._requestCache(x,E,_._cache)}async _onLoad(_){const x=_.address.toString(),E=_&&_.options.directory?_.options.directory:this.directory;await this._requestCache(x,E,_._cache),this.stores[x]=_}async _determineAddress(_,x,E={}){if(!OrbitDB.isValidType(x))throw new Error(`Invalid database type '${x}'`);if(OrbitDBAddress.isValid(_))throw new Error("Given database name is an address. Please give only the name of the database!");E.accessController=Object.assign({},{name:_,type:"ipfs"},E.accessController);const S=await AccessControllers.create(this,E.accessController.type,E.accessController||{}),C=await createDBManifest(this._ipfs,_,x,S,E);return OrbitDBAddress.parse(OrbitDBAddress.join(C,_))}async create(_,x,E={}){logger.debug("create()"),logger.debug(`Creating database '${_}' as ${x}`);const S=await this._determineAddress(_,x,E);if(E.cache=await this._requestCache(S.toString(),E.directory),await this._haveLocalData(E.cache,S)&&!E.overwrite)throw new Error(`Database '${S}' already exists!`);return await this._migrate({...E,directory:this.directory},S),await this._addManifestToCache(E.cache,S),logger.debug(`Created database '${S}'`),this.open(S,E)}async determineAddress(_,x,E={}){const S=Object.assign({},{onlyHash:!0},E);return this._determineAddress(_,x,S)}async _requestCache(_,x,E){const S=x||this.directory;if(!this.caches[S]){const T=E||await this._createCache(S);this.caches[S]={cache:T,handlers:new Set}}this.caches[S].handlers.add(_);const C=this.caches[S].cache;return C&&await C.open(),C}async open(_,x={}){if(logger.debug("open()"),x=Object.assign({localOnly:!1,create:!1},x),logger.debug(`Open database '${_}'`),!OrbitDBAddress.isValid(_))if(x.create){if(x.create&&!x.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${OrbitDB.databaseTypes.join("|")})`);return logger.warn(`Not a valid OrbitDB address '${_}', creating the database`),x.overwrite=x.overwrite?x.overwrite:!0,this.create(_,x.type,x)}else throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.");const E=OrbitDBAddress.parse(_);x.cache=await this._requestCache(E.toString(),x.directory);const S=await this._haveLocalData(x.cache,E);if(logger.debug((S?"Found":"Didn't find")+` database '${E}'`),x.localOnly&&!S)throw logger.warn(`Database '${E}' doesn't exist!`),new Error(`Database '${E}' doesn't exist!`);logger.debug(`Loading Manifest for '${E}'`);let C;try{C=await read$4(this._ipfs,E.root,{timeout:x.timeout||defaultTimeout}),logger.debug(`Manifest for '${E}':
${JSON.stringify(C,null,2)}`)}catch(T){throw T.name==="TimeoutError"&&T.code==="ERR_TIMEOUT"?(console.error(T),new Error("ipfs unable to find and fetch manifest for this address.")):T}if(C.name!==E.path&&logger.warn(`Manifest name '${C.name}' and path name '${E.path}' do not match`),x.type&&C.type!==x.type)throw new Error(`Database '${E}' is type '${C.type}' but was opened as '${x.type}'`);return await this._addManifestToCache(x.cache,E),x=Object.assign({},x,{accessControllerAddress:C.accessController,meta:C.meta}),this._createStore(x.type||C.type,E,x)}async _addManifestToCache(_,x){await _.set(path.join(x.toString(),"_manifest"),x.root),logger.debug(`Saved manifest to IPFS as '${x.root}'`)}async _haveLocalData(_,x){if(!_)return!1;const E=x.toString(),S=await _.get(path.join(E,"_manifest"));return S!=null}async _migrate(_,x){await run(this,_,x)}static get databaseTypes(){return Object.keys(databaseTypes)}static isValidType(_){return Object.keys(databaseTypes).includes(_)}static addDatabaseType(_,x){if(databaseTypes[_])throw new Error(`Type already exists: ${_}`);databaseTypes[_]=x}static getDatabaseTypes(){return databaseTypes}static isValidAddress(_){return OrbitDBAddress.isValid(_)}static parseAddress(_){return OrbitDBAddress.parse(_)}}OrbitDB.prototype.AccessControllers=AccessControllers;OrbitDB.prototype.Identities=Identities;OrbitDB.prototype.Keystore=Keystore;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let n=0;n<256;++n)byteToHex.push((n+256).toString(16).slice(1));function unsafeStringify(n,_=0){return byteToHex[n[_+0]]+byteToHex[n[_+1]]+byteToHex[n[_+2]]+byteToHex[n[_+3]]+"-"+byteToHex[n[_+4]]+byteToHex[n[_+5]]+"-"+byteToHex[n[_+6]]+byteToHex[n[_+7]]+"-"+byteToHex[n[_+8]]+byteToHex[n[_+9]]+"-"+byteToHex[n[_+10]]+byteToHex[n[_+11]]+byteToHex[n[_+12]]+byteToHex[n[_+13]]+byteToHex[n[_+14]]+byteToHex[n[_+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(n,_,x){if(native.randomUUID&&!_&&!n)return native.randomUUID();n=n||{};const E=n.random||(n.rng||rng)();if(E[6]=E[6]&15|64,E[8]=E[8]&63|128,_){x=x||0;for(let S=0;S<16;++S)_[x+S]=E[S];return _}return unsafeStringify(E)}const MODRATEUR="MODRATEUR",MEMBRE="MEMBRE",rles=[MODRATEUR,MEMBRE];var ajv$1={exports:{}},core$3={},validate={},boolSchema={},errors={},codegen={},code$1={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class _{}n._CodeOrName=_,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class x extends _{constructor(W){if(super(),!n.IDENTIFIER.test(W))throw new Error("CodeGen: name must be a valid identifier");this.str=W}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=x;class E extends _{constructor(W){super(),this._items=typeof W=="string"?[W]:W}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const W=this._items[0];return W===""||W==='""'}get str(){var W;return(W=this._str)!==null&&W!==void 0?W:this._str=this._items.reduce((Q,re)=>`${Q}${re}`,"")}get names(){var W;return(W=this._names)!==null&&W!==void 0?W:this._names=this._items.reduce((Q,re)=>(re instanceof x&&(Q[re.str]=(Q[re.str]||0)+1),Q),{})}}n._Code=E,n.nil=new E("");function S(H,...W){const Q=[H[0]];let re=0;for(;re<W.length;)A(Q,W[re]),Q.push(H[++re]);return new E(Q)}n._=S;const C=new E("+");function T(H,...W){const Q=[L(H[0])];let re=0;for(;re<W.length;)Q.push(C),A(Q,W[re]),Q.push(C,L(H[++re]));return B(Q),new E(Q)}n.str=T;function A(H,W){W instanceof E?H.push(...W._items):W instanceof x?H.push(W):H.push(O(W))}n.addCodeArg=A;function B(H){let W=1;for(;W<H.length-1;){if(H[W]===C){const Q=I(H[W-1],H[W+1]);if(Q!==void 0){H.splice(W-1,3,Q);continue}H[W++]="+"}W++}}function I(H,W){if(W==='""')return H;if(H==='""')return W;if(typeof H=="string")return W instanceof x||H[H.length-1]!=='"'?void 0:typeof W!="string"?`${H.slice(0,-1)}${W}"`:W[0]==='"'?H.slice(0,-1)+W.slice(1):void 0;if(typeof W=="string"&&W[0]==='"'&&!(H instanceof x))return`"${H}${W.slice(1)}`}function M(H,W){return W.emptyStr()?H:H.emptyStr()?W:T`${H}${W}`}n.strConcat=M;function O(H){return typeof H=="number"||typeof H=="boolean"||H===null?H:L(Array.isArray(H)?H.join(","):H)}function D(H){return new E(L(H))}n.stringify=D;function L(H){return JSON.stringify(H).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=L;function V(H){return typeof H=="string"&&n.IDENTIFIER.test(H)?new E(`.${H}`):S`[${H}]`}n.getProperty=V;function U(H){if(typeof H=="string"&&n.IDENTIFIER.test(H))return new E(`${H}`);throw new Error(`CodeGen: invalid export name: ${H}, use explicit $id name mapping`)}n.getEsmExportName=U;function q(H){return new E(H.toString())}n.regexpCode=q})(code$1);var scope={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const _=code$1;class x extends Error{constructor(I){super(`CodeGen: "code" for ${I} not defined`),this.value=I.value}}var E;(function(B){B[B.Started=0]="Started",B[B.Completed=1]="Completed"})(E=n.UsedValueState||(n.UsedValueState={})),n.varKinds={const:new _.Name("const"),let:new _.Name("let"),var:new _.Name("var")};class S{constructor({prefixes:I,parent:M}={}){this._names={},this._prefixes=I,this._parent=M}toName(I){return I instanceof _.Name?I:this.name(I)}name(I){return new _.Name(this._newName(I))}_newName(I){const M=this._names[I]||this._nameGroup(I);return`${I}${M.index++}`}_nameGroup(I){var M,O;if(!((O=(M=this._parent)===null||M===void 0?void 0:M._prefixes)===null||O===void 0)&&O.has(I)||this._prefixes&&!this._prefixes.has(I))throw new Error(`CodeGen: prefix "${I}" is not allowed in this scope`);return this._names[I]={prefix:I,index:0}}}n.Scope=S;class C extends _.Name{constructor(I,M){super(M),this.prefix=I}setValue(I,{property:M,itemIndex:O}){this.value=I,this.scopePath=(0,_._)`.${new _.Name(M)}[${O}]`}}n.ValueScopeName=C;const T=(0,_._)`\n`;class A extends S{constructor(I){super(I),this._values={},this._scope=I.scope,this.opts={...I,_n:I.lines?T:_.nil}}get(){return this._scope}name(I){return new C(I,this._newName(I))}value(I,M){var O;if(M.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const D=this.toName(I),{prefix:L}=D,V=(O=M.key)!==null&&O!==void 0?O:M.ref;let U=this._values[L];if(U){const W=U.get(V);if(W)return W}else U=this._values[L]=new Map;U.set(V,D);const q=this._scope[L]||(this._scope[L]=[]),H=q.length;return q[H]=M.ref,D.setValue(M,{property:L,itemIndex:H}),D}getValue(I,M){const O=this._values[I];if(O)return O.get(M)}scopeRefs(I,M=this._values){return this._reduceValues(M,O=>{if(O.scopePath===void 0)throw new Error(`CodeGen: name "${O}" has no value`);return(0,_._)`${I}${O.scopePath}`})}scopeCode(I=this._values,M,O){return this._reduceValues(I,D=>{if(D.value===void 0)throw new Error(`CodeGen: name "${D}" has no value`);return D.value.code},M,O)}_reduceValues(I,M,O={},D){let L=_.nil;for(const V in I){const U=I[V];if(!U)continue;const q=O[V]=O[V]||new Map;U.forEach(H=>{if(q.has(H))return;q.set(H,E.Started);let W=M(H);if(W){const Q=this.opts.es5?n.varKinds.var:n.varKinds.const;L=(0,_._)`${L}${Q} ${H} = ${W};${this.opts._n}`}else if(W=D?.(H))L=(0,_._)`${L}${W}${this.opts._n}`;else throw new x(H);q.set(H,E.Completed)})}return L}}n.ValueScope=A})(scope);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const _=code$1,x=scope;var E=code$1;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return E._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return E.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return E.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return E.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return E.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return E.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return E.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return E.Name}});var S=scope;Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return S.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return S.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return S.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return S.varKinds}}),n.operators={GT:new _._Code(">"),GTE:new _._Code(">="),LT:new _._Code("<"),LTE:new _._Code("<="),EQ:new _._Code("==="),NEQ:new _._Code("!=="),NOT:new _._Code("!"),OR:new _._Code("||"),AND:new _._Code("&&"),ADD:new _._Code("+")};class C{optimizeNodes(){return this}optimizeNames(pe,he){return this}}class T extends C{constructor(pe,he,Se){super(),this.varKind=pe,this.name=he,this.rhs=Se}render({es5:pe,_n:he}){const Se=pe?x.varKinds.var:this.varKind,we=this.rhs===void 0?"":` = ${this.rhs}`;return`${Se} ${this.name}${we};`+he}optimizeNames(pe,he){if(pe[this.name.str])return this.rhs&&(this.rhs=F(this.rhs,pe,he)),this}get names(){return this.rhs instanceof _._CodeOrName?this.rhs.names:{}}}class A extends C{constructor(pe,he,Se){super(),this.lhs=pe,this.rhs=he,this.sideEffects=Se}render({_n:pe}){return`${this.lhs} = ${this.rhs};`+pe}optimizeNames(pe,he){if(!(this.lhs instanceof _.Name&&!pe[this.lhs.str]&&!this.sideEffects))return this.rhs=F(this.rhs,pe,he),this}get names(){const pe=this.lhs instanceof _.Name?{}:{...this.lhs.names};return X(pe,this.rhs)}}class B extends A{constructor(pe,he,Se,we){super(pe,Se,we),this.op=he}render({_n:pe}){return`${this.lhs} ${this.op}= ${this.rhs};`+pe}}class I extends C{constructor(pe){super(),this.label=pe,this.names={}}render({_n:pe}){return`${this.label}:`+pe}}class M extends C{constructor(pe){super(),this.label=pe,this.names={}}render({_n:pe}){return`break${this.label?` ${this.label}`:""};`+pe}}class O extends C{constructor(pe){super(),this.error=pe}render({_n:pe}){return`throw ${this.error};`+pe}get names(){return this.error.names}}class D extends C{constructor(pe){super(),this.code=pe}render({_n:pe}){return`${this.code};`+pe}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(pe,he){return this.code=F(this.code,pe,he),this}get names(){return this.code instanceof _._CodeOrName?this.code.names:{}}}class L extends C{constructor(pe=[]){super(),this.nodes=pe}render(pe){return this.nodes.reduce((he,Se)=>he+Se.render(pe),"")}optimizeNodes(){const{nodes:pe}=this;let he=pe.length;for(;he--;){const Se=pe[he].optimizeNodes();Array.isArray(Se)?pe.splice(he,1,...Se):Se?pe[he]=Se:pe.splice(he,1)}return pe.length>0?this:void 0}optimizeNames(pe,he){const{nodes:Se}=this;let we=Se.length;for(;we--;){const xe=Se[we];xe.optimizeNames(pe,he)||(z(pe,xe.names),Se.splice(we,1))}return Se.length>0?this:void 0}get names(){return this.nodes.reduce((pe,he)=>ae(pe,he.names),{})}}class V extends L{render(pe){return"{"+pe._n+super.render(pe)+"}"+pe._n}}class U extends L{}class q extends V{}q.kind="else";class H extends V{constructor(pe,he){super(he),this.condition=pe}render(pe){let he=`if(${this.condition})`+super.render(pe);return this.else&&(he+="else "+this.else.render(pe)),he}optimizeNodes(){super.optimizeNodes();const pe=this.condition;if(pe===!0)return this.nodes;let he=this.else;if(he){const Se=he.optimizeNodes();he=this.else=Array.isArray(Se)?new q(Se):Se}if(he)return pe===!1?he instanceof H?he:he.nodes:this.nodes.length?this:new H(J(pe),he instanceof H?[he]:he.nodes);if(!(pe===!1||!this.nodes.length))return this}optimizeNames(pe,he){var Se;if(this.else=(Se=this.else)===null||Se===void 0?void 0:Se.optimizeNames(pe,he),!!(super.optimizeNames(pe,he)||this.else))return this.condition=F(this.condition,pe,he),this}get names(){const pe=super.names;return X(pe,this.condition),this.else&&ae(pe,this.else.names),pe}}H.kind="if";class W extends V{}W.kind="for";class Q extends W{constructor(pe){super(),this.iteration=pe}render(pe){return`for(${this.iteration})`+super.render(pe)}optimizeNames(pe,he){if(super.optimizeNames(pe,he))return this.iteration=F(this.iteration,pe,he),this}get names(){return ae(super.names,this.iteration.names)}}class re extends W{constructor(pe,he,Se,we){super(),this.varKind=pe,this.name=he,this.from=Se,this.to=we}render(pe){const he=pe.es5?x.varKinds.var:this.varKind,{name:Se,from:we,to:xe}=this;return`for(${he} ${Se}=${we}; ${Se}<${xe}; ${Se}++)`+super.render(pe)}get names(){const pe=X(super.names,this.from);return X(pe,this.to)}}class ce extends W{constructor(pe,he,Se,we){super(),this.loop=pe,this.varKind=he,this.name=Se,this.iterable=we}render(pe){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(pe)}optimizeNames(pe,he){if(super.optimizeNames(pe,he))return this.iterable=F(this.iterable,pe,he),this}get names(){return ae(super.names,this.iterable.names)}}class ne extends V{constructor(pe,he,Se){super(),this.name=pe,this.args=he,this.async=Se}render(pe){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(pe)}}ne.kind="func";class Y extends L{render(pe){return"return "+super.render(pe)}}Y.kind="return";class fe extends V{render(pe){let he="try"+super.render(pe);return this.catch&&(he+=this.catch.render(pe)),this.finally&&(he+=this.finally.render(pe)),he}optimizeNodes(){var pe,he;return super.optimizeNodes(),(pe=this.catch)===null||pe===void 0||pe.optimizeNodes(),(he=this.finally)===null||he===void 0||he.optimizeNodes(),this}optimizeNames(pe,he){var Se,we;return super.optimizeNames(pe,he),(Se=this.catch)===null||Se===void 0||Se.optimizeNames(pe,he),(we=this.finally)===null||we===void 0||we.optimizeNames(pe,he),this}get names(){const pe=super.names;return this.catch&&ae(pe,this.catch.names),this.finally&&ae(pe,this.finally.names),pe}}class ge extends V{constructor(pe){super(),this.error=pe}render(pe){return`catch(${this.error})`+super.render(pe)}}ge.kind="catch";class $e extends V{render(pe){return"finally"+super.render(pe)}}$e.kind="finally";class _e{constructor(pe,he={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...he,_n:he.lines?`
`:""},this._extScope=pe,this._scope=new x.Scope({parent:pe}),this._nodes=[new U]}toString(){return this._root.render(this.opts)}name(pe){return this._scope.name(pe)}scopeName(pe){return this._extScope.name(pe)}scopeValue(pe,he){const Se=this._extScope.value(pe,he);return(this._values[Se.prefix]||(this._values[Se.prefix]=new Set)).add(Se),Se}getScopeValue(pe,he){return this._extScope.getValue(pe,he)}scopeRefs(pe){return this._extScope.scopeRefs(pe,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(pe,he,Se,we){const xe=this._scope.toName(he);return Se!==void 0&&we&&(this._constants[xe.str]=Se),this._leafNode(new T(pe,xe,Se)),xe}const(pe,he,Se){return this._def(x.varKinds.const,pe,he,Se)}let(pe,he,Se){return this._def(x.varKinds.let,pe,he,Se)}var(pe,he,Se){return this._def(x.varKinds.var,pe,he,Se)}assign(pe,he,Se){return this._leafNode(new A(pe,he,Se))}add(pe,he){return this._leafNode(new B(pe,n.operators.ADD,he))}code(pe){return typeof pe=="function"?pe():pe!==_.nil&&this._leafNode(new D(pe)),this}object(...pe){const he=["{"];for(const[Se,we]of pe)he.length>1&&he.push(","),he.push(Se),(Se!==we||this.opts.es5)&&(he.push(":"),(0,_.addCodeArg)(he,we));return he.push("}"),new _._Code(he)}if(pe,he,Se){if(this._blockNode(new H(pe)),he&&Se)this.code(he).else().code(Se).endIf();else if(he)this.code(he).endIf();else if(Se)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(pe){return this._elseNode(new H(pe))}else(){return this._elseNode(new q)}endIf(){return this._endBlockNode(H,q)}_for(pe,he){return this._blockNode(pe),he&&this.code(he).endFor(),this}for(pe,he){return this._for(new Q(pe),he)}forRange(pe,he,Se,we,xe=this.opts.es5?x.varKinds.var:x.varKinds.let){const Ee=this._scope.toName(pe);return this._for(new re(xe,Ee,he,Se),()=>we(Ee))}forOf(pe,he,Se,we=x.varKinds.const){const xe=this._scope.toName(pe);if(this.opts.es5){const Ee=he instanceof _.Name?he:this.var("_arr",he);return this.forRange("_i",0,(0,_._)`${Ee}.length`,ye=>{this.var(xe,(0,_._)`${Ee}[${ye}]`),Se(xe)})}return this._for(new ce("of",we,xe,he),()=>Se(xe))}forIn(pe,he,Se,we=this.opts.es5?x.varKinds.var:x.varKinds.const){if(this.opts.ownProperties)return this.forOf(pe,(0,_._)`Object.keys(${he})`,Se);const xe=this._scope.toName(pe);return this._for(new ce("in",we,xe,he),()=>Se(xe))}endFor(){return this._endBlockNode(W)}label(pe){return this._leafNode(new I(pe))}break(pe){return this._leafNode(new M(pe))}return(pe){const he=new Y;if(this._blockNode(he),this.code(pe),he.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Y)}try(pe,he,Se){if(!he&&!Se)throw new Error('CodeGen: "try" without "catch" and "finally"');const we=new fe;if(this._blockNode(we),this.code(pe),he){const xe=this.name("e");this._currNode=we.catch=new ge(xe),he(xe)}return Se&&(this._currNode=we.finally=new $e,this.code(Se)),this._endBlockNode(ge,$e)}throw(pe){return this._leafNode(new O(pe))}block(pe,he){return this._blockStarts.push(this._nodes.length),pe&&this.code(pe).endBlock(he),this}endBlock(pe){const he=this._blockStarts.pop();if(he===void 0)throw new Error("CodeGen: not in self-balancing block");const Se=this._nodes.length-he;if(Se<0||pe!==void 0&&Se!==pe)throw new Error(`CodeGen: wrong number of nodes: ${Se} vs ${pe} expected`);return this._nodes.length=he,this}func(pe,he=_.nil,Se,we){return this._blockNode(new ne(pe,he,Se)),we&&this.code(we).endFunc(),this}endFunc(){return this._endBlockNode(ne)}optimize(pe=1){for(;pe-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(pe){return this._currNode.nodes.push(pe),this}_blockNode(pe){this._currNode.nodes.push(pe),this._nodes.push(pe)}_endBlockNode(pe,he){const Se=this._currNode;if(Se instanceof pe||he&&Se instanceof he)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${he?`${pe.kind}/${he.kind}`:pe.kind}"`)}_elseNode(pe){const he=this._currNode;if(!(he instanceof H))throw new Error('CodeGen: "else" without "if"');return this._currNode=he.else=pe,this}get _root(){return this._nodes[0]}get _currNode(){const pe=this._nodes;return pe[pe.length-1]}set _currNode(pe){const he=this._nodes;he[he.length-1]=pe}}n.CodeGen=_e;function ae(ee,pe){for(const he in pe)ee[he]=(ee[he]||0)+(pe[he]||0);return ee}function X(ee,pe){return pe instanceof _._CodeOrName?ae(ee,pe.names):ee}function F(ee,pe,he){if(ee instanceof _.Name)return Se(ee);if(!we(ee))return ee;return new _._Code(ee._items.reduce((xe,Ee)=>(Ee instanceof _.Name&&(Ee=Se(Ee)),Ee instanceof _._Code?xe.push(...Ee._items):xe.push(Ee),xe),[]));function Se(xe){const Ee=he[xe.str];return Ee===void 0||pe[xe.str]!==1?xe:(delete pe[xe.str],Ee)}function we(xe){return xe instanceof _._Code&&xe._items.some(Ee=>Ee instanceof _.Name&&pe[Ee.str]===1&&he[Ee.str]!==void 0)}}function z(ee,pe){for(const he in pe)ee[he]=(ee[he]||0)-(pe[he]||0)}function J(ee){return typeof ee=="boolean"||typeof ee=="number"||ee===null?!ee:(0,_._)`!${j(ee)}`}n.not=J;const te=G(n.operators.AND);function se(...ee){return ee.reduce(te)}n.and=se;const oe=G(n.operators.OR);function ie(...ee){return ee.reduce(oe)}n.or=ie;function G(ee){return(pe,he)=>pe===_.nil?he:he===_.nil?pe:(0,_._)`${j(pe)} ${ee} ${j(he)}`}function j(ee){return ee instanceof _.Name?ee:(0,_._)`(${ee})`}})(codegen);var util={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkStrictMode=n.getErrorPath=n.Type=n.useFunc=n.setEvaluated=n.evaluatedPropsToName=n.mergeEvaluated=n.eachItem=n.unescapeJsonPointer=n.escapeJsonPointer=n.escapeFragment=n.unescapeFragment=n.schemaRefOrVal=n.schemaHasRulesButRef=n.schemaHasRules=n.checkUnknownRules=n.alwaysValidSchema=n.toHash=void 0;const _=codegen,x=code$1;function E(ne){const Y={};for(const fe of ne)Y[fe]=!0;return Y}n.toHash=E;function S(ne,Y){return typeof Y=="boolean"?Y:Object.keys(Y).length===0?!0:(C(ne,Y),!T(Y,ne.self.RULES.all))}n.alwaysValidSchema=S;function C(ne,Y=ne.schema){const{opts:fe,self:ge}=ne;if(!fe.strictSchema||typeof Y=="boolean")return;const $e=ge.RULES.keywords;for(const _e in Y)$e[_e]||ce(ne,`unknown keyword: "${_e}"`)}n.checkUnknownRules=C;function T(ne,Y){if(typeof ne=="boolean")return!ne;for(const fe in ne)if(Y[fe])return!0;return!1}n.schemaHasRules=T;function A(ne,Y){if(typeof ne=="boolean")return!ne;for(const fe in ne)if(fe!=="$ref"&&Y.all[fe])return!0;return!1}n.schemaHasRulesButRef=A;function B({topSchemaRef:ne,schemaPath:Y},fe,ge,$e){if(!$e){if(typeof fe=="number"||typeof fe=="boolean")return fe;if(typeof fe=="string")return(0,_._)`${fe}`}return(0,_._)`${ne}${Y}${(0,_.getProperty)(ge)}`}n.schemaRefOrVal=B;function I(ne){return D(decodeURIComponent(ne))}n.unescapeFragment=I;function M(ne){return encodeURIComponent(O(ne))}n.escapeFragment=M;function O(ne){return typeof ne=="number"?`${ne}`:ne.replace(/~/g,"~0").replace(/\//g,"~1")}n.escapeJsonPointer=O;function D(ne){return ne.replace(/~1/g,"/").replace(/~0/g,"~")}n.unescapeJsonPointer=D;function L(ne,Y){if(Array.isArray(ne))for(const fe of ne)Y(fe);else Y(ne)}n.eachItem=L;function V({mergeNames:ne,mergeToName:Y,mergeValues:fe,resultToName:ge}){return($e,_e,ae,X)=>{const F=ae===void 0?_e:ae instanceof _.Name?(_e instanceof _.Name?ne($e,_e,ae):Y($e,_e,ae),ae):_e instanceof _.Name?(Y($e,ae,_e),_e):fe(_e,ae);return X===_.Name&&!(F instanceof _.Name)?ge($e,F):F}}n.mergeEvaluated={props:V({mergeNames:(ne,Y,fe)=>ne.if((0,_._)`${fe} !== true && ${Y} !== undefined`,()=>{ne.if((0,_._)`${Y} === true`,()=>ne.assign(fe,!0),()=>ne.assign(fe,(0,_._)`${fe} || {}`).code((0,_._)`Object.assign(${fe}, ${Y})`))}),mergeToName:(ne,Y,fe)=>ne.if((0,_._)`${fe} !== true`,()=>{Y===!0?ne.assign(fe,!0):(ne.assign(fe,(0,_._)`${fe} || {}`),q(ne,fe,Y))}),mergeValues:(ne,Y)=>ne===!0?!0:{...ne,...Y},resultToName:U}),items:V({mergeNames:(ne,Y,fe)=>ne.if((0,_._)`${fe} !== true && ${Y} !== undefined`,()=>ne.assign(fe,(0,_._)`${Y} === true ? true : ${fe} > ${Y} ? ${fe} : ${Y}`)),mergeToName:(ne,Y,fe)=>ne.if((0,_._)`${fe} !== true`,()=>ne.assign(fe,Y===!0?!0:(0,_._)`${fe} > ${Y} ? ${fe} : ${Y}`)),mergeValues:(ne,Y)=>ne===!0?!0:Math.max(ne,Y),resultToName:(ne,Y)=>ne.var("items",Y)})};function U(ne,Y){if(Y===!0)return ne.var("props",!0);const fe=ne.var("props",(0,_._)`{}`);return Y!==void 0&&q(ne,fe,Y),fe}n.evaluatedPropsToName=U;function q(ne,Y,fe){Object.keys(fe).forEach(ge=>ne.assign((0,_._)`${Y}${(0,_.getProperty)(ge)}`,!0))}n.setEvaluated=q;const H={};function W(ne,Y){return ne.scopeValue("func",{ref:Y,code:H[Y.code]||(H[Y.code]=new x._Code(Y.code))})}n.useFunc=W;var Q;(function(ne){ne[ne.Num=0]="Num",ne[ne.Str=1]="Str"})(Q=n.Type||(n.Type={}));function re(ne,Y,fe){if(ne instanceof _.Name){const ge=Y===Q.Num;return fe?ge?(0,_._)`"[" + ${ne} + "]"`:(0,_._)`"['" + ${ne} + "']"`:ge?(0,_._)`"/" + ${ne}`:(0,_._)`"/" + ${ne}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return fe?(0,_.getProperty)(ne).toString():"/"+O(ne)}n.getErrorPath=re;function ce(ne,Y,fe=ne.opts.strictSchema){if(fe){if(Y=`strict mode: ${Y}`,fe===!0)throw new Error(Y);ne.self.logger.warn(Y)}}n.checkStrictMode=ce})(util);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const _=codegen,x=util,E=names$1;n.keywordError={message:({keyword:q})=>(0,_.str)`must pass "${q}" keyword validation`},n.keyword$DataError={message:({keyword:q,schemaType:H})=>H?(0,_.str)`"${q}" keyword must be ${H} ($data)`:(0,_.str)`"${q}" keyword is invalid ($data)`};function S(q,H=n.keywordError,W,Q){const{it:re}=q,{gen:ce,compositeRule:ne,allErrors:Y}=re,fe=O(q,H,W);Q??(ne||Y)?B(ce,fe):I(re,(0,_._)`[${fe}]`)}n.reportError=S;function C(q,H=n.keywordError,W){const{it:Q}=q,{gen:re,compositeRule:ce,allErrors:ne}=Q,Y=O(q,H,W);B(re,Y),ce||ne||I(Q,E.default.vErrors)}n.reportExtraError=C;function T(q,H){q.assign(E.default.errors,H),q.if((0,_._)`${E.default.vErrors} !== null`,()=>q.if(H,()=>q.assign((0,_._)`${E.default.vErrors}.length`,H),()=>q.assign(E.default.vErrors,null)))}n.resetErrorsCount=T;function A({gen:q,keyword:H,schemaValue:W,data:Q,errsCount:re,it:ce}){if(re===void 0)throw new Error("ajv implementation error");const ne=q.name("err");q.forRange("i",re,E.default.errors,Y=>{q.const(ne,(0,_._)`${E.default.vErrors}[${Y}]`),q.if((0,_._)`${ne}.instancePath === undefined`,()=>q.assign((0,_._)`${ne}.instancePath`,(0,_.strConcat)(E.default.instancePath,ce.errorPath))),q.assign((0,_._)`${ne}.schemaPath`,(0,_.str)`${ce.errSchemaPath}/${H}`),ce.opts.verbose&&(q.assign((0,_._)`${ne}.schema`,W),q.assign((0,_._)`${ne}.data`,Q))})}n.extendErrors=A;function B(q,H){const W=q.const("err",H);q.if((0,_._)`${E.default.vErrors} === null`,()=>q.assign(E.default.vErrors,(0,_._)`[${W}]`),(0,_._)`${E.default.vErrors}.push(${W})`),q.code((0,_._)`${E.default.errors}++`)}function I(q,H){const{gen:W,validateName:Q,schemaEnv:re}=q;re.$async?W.throw((0,_._)`new ${q.ValidationError}(${H})`):(W.assign((0,_._)`${Q}.errors`,H),W.return(!1))}const M={keyword:new _.Name("keyword"),schemaPath:new _.Name("schemaPath"),params:new _.Name("params"),propertyName:new _.Name("propertyName"),message:new _.Name("message"),schema:new _.Name("schema"),parentSchema:new _.Name("parentSchema")};function O(q,H,W){const{createErrors:Q}=q.it;return Q===!1?(0,_._)`{}`:D(q,H,W)}function D(q,H,W={}){const{gen:Q,it:re}=q,ce=[L(re,W),V(q,W)];return U(q,H,ce),Q.object(...ce)}function L({errorPath:q},{instancePath:H}){const W=H?(0,_.str)`${q}${(0,x.getErrorPath)(H,x.Type.Str)}`:q;return[E.default.instancePath,(0,_.strConcat)(E.default.instancePath,W)]}function V({keyword:q,it:{errSchemaPath:H}},{schemaPath:W,parentSchema:Q}){let re=Q?H:(0,_.str)`${H}/${q}`;return W&&(re=(0,_.str)`${re}${(0,x.getErrorPath)(W,x.Type.Str)}`),[M.schemaPath,re]}function U(q,{params:H,message:W},Q){const{keyword:re,data:ce,schemaValue:ne,it:Y}=q,{opts:fe,propertyName:ge,topSchemaRef:$e,schemaPath:_e}=Y;Q.push([M.keyword,re],[M.params,typeof H=="function"?H(q):H||(0,_._)`{}`]),fe.messages&&Q.push([M.message,typeof W=="function"?W(q):W]),fe.verbose&&Q.push([M.schema,ne],[M.parentSchema,(0,_._)`${$e}${_e}`],[E.default.data,ce]),ge&&Q.push([M.propertyName,ge])}})(errors);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(n){const{gen:_,schema:x,validateName:E}=n;x===!1?falseSchemaError(n,!1):typeof x=="object"&&x.$async===!0?_.return(names_1$6.default.data):(_.assign((0,codegen_1$s._)`${E}.errors`,null),_.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(n,_){const{gen:x,schema:E}=n;E===!1?(x.var(_,!1),falseSchemaError(n)):x.var(_,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(n,_){const{gen:x,data:E}=n,S={gen:x,keyword:"false schema",data:E,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:n};(0,errors_1$2.reportError)(S,boolError,void 0,_)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(n){return typeof n=="string"&&jsonTypes.has(n)}rules.isJSONType=isJSONType;function getRules(){const n={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...n,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},n.number,n.string,n.array,n.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:n,self:_},x){const E=_.RULES.types[x];return E&&E!==!0&&shouldUseGroup(n,E)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(n,_){return _.rules.some(x=>shouldUseRule(n,x))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(n,_){var x;return n[_.keyword]!==void 0||((x=_.definition.implements)===null||x===void 0?void 0:x.some(E=>n[E]!==void 0))}applicability.shouldUseRule=shouldUseRule;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.reportTypeError=n.checkDataTypes=n.checkDataType=n.coerceAndCheckDataType=n.getJSONTypes=n.getSchemaTypes=n.DataType=void 0;const _=rules,x=applicability,E=errors,S=codegen,C=util;var T;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(T=n.DataType||(n.DataType={}));function A(Q){const re=B(Q.type);if(re.includes("null")){if(Q.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!re.length&&Q.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');Q.nullable===!0&&re.push("null")}return re}n.getSchemaTypes=A;function B(Q){const re=Array.isArray(Q)?Q:Q?[Q]:[];if(re.every(_.isJSONType))return re;throw new Error("type must be JSONType or JSONType[]: "+re.join(","))}n.getJSONTypes=B;function I(Q,re){const{gen:ce,data:ne,opts:Y}=Q,fe=O(re,Y.coerceTypes),ge=re.length>0&&!(fe.length===0&&re.length===1&&(0,x.schemaHasRulesForType)(Q,re[0]));if(ge){const $e=U(re,ne,Y.strictNumbers,T.Wrong);ce.if($e,()=>{fe.length?D(Q,re,fe):H(Q)})}return ge}n.coerceAndCheckDataType=I;const M=new Set(["string","number","integer","boolean","null"]);function O(Q,re){return re?Q.filter(ce=>M.has(ce)||re==="array"&&ce==="array"):[]}function D(Q,re,ce){const{gen:ne,data:Y,opts:fe}=Q,ge=ne.let("dataType",(0,S._)`typeof ${Y}`),$e=ne.let("coerced",(0,S._)`undefined`);fe.coerceTypes==="array"&&ne.if((0,S._)`${ge} == 'object' && Array.isArray(${Y}) && ${Y}.length == 1`,()=>ne.assign(Y,(0,S._)`${Y}[0]`).assign(ge,(0,S._)`typeof ${Y}`).if(U(re,Y,fe.strictNumbers),()=>ne.assign($e,Y))),ne.if((0,S._)`${$e} !== undefined`);for(const ae of ce)(M.has(ae)||ae==="array"&&fe.coerceTypes==="array")&&_e(ae);ne.else(),H(Q),ne.endIf(),ne.if((0,S._)`${$e} !== undefined`,()=>{ne.assign(Y,$e),L(Q,$e)});function _e(ae){switch(ae){case"string":ne.elseIf((0,S._)`${ge} == "number" || ${ge} == "boolean"`).assign($e,(0,S._)`"" + ${Y}`).elseIf((0,S._)`${Y} === null`).assign($e,(0,S._)`""`);return;case"number":ne.elseIf((0,S._)`${ge} == "boolean" || ${Y} === null
              || (${ge} == "string" && ${Y} && ${Y} == +${Y})`).assign($e,(0,S._)`+${Y}`);return;case"integer":ne.elseIf((0,S._)`${ge} === "boolean" || ${Y} === null
              || (${ge} === "string" && ${Y} && ${Y} == +${Y} && !(${Y} % 1))`).assign($e,(0,S._)`+${Y}`);return;case"boolean":ne.elseIf((0,S._)`${Y} === "false" || ${Y} === 0 || ${Y} === null`).assign($e,!1).elseIf((0,S._)`${Y} === "true" || ${Y} === 1`).assign($e,!0);return;case"null":ne.elseIf((0,S._)`${Y} === "" || ${Y} === 0 || ${Y} === false`),ne.assign($e,null);return;case"array":ne.elseIf((0,S._)`${ge} === "string" || ${ge} === "number"
              || ${ge} === "boolean" || ${Y} === null`).assign($e,(0,S._)`[${Y}]`)}}}function L({gen:Q,parentData:re,parentDataProperty:ce},ne){Q.if((0,S._)`${re} !== undefined`,()=>Q.assign((0,S._)`${re}[${ce}]`,ne))}function V(Q,re,ce,ne=T.Correct){const Y=ne===T.Correct?S.operators.EQ:S.operators.NEQ;let fe;switch(Q){case"null":return(0,S._)`${re} ${Y} null`;case"array":fe=(0,S._)`Array.isArray(${re})`;break;case"object":fe=(0,S._)`${re} && typeof ${re} == "object" && !Array.isArray(${re})`;break;case"integer":fe=ge((0,S._)`!(${re} % 1) && !isNaN(${re})`);break;case"number":fe=ge();break;default:return(0,S._)`typeof ${re} ${Y} ${Q}`}return ne===T.Correct?fe:(0,S.not)(fe);function ge($e=S.nil){return(0,S.and)((0,S._)`typeof ${re} == "number"`,$e,ce?(0,S._)`isFinite(${re})`:S.nil)}}n.checkDataType=V;function U(Q,re,ce,ne){if(Q.length===1)return V(Q[0],re,ce,ne);let Y;const fe=(0,C.toHash)(Q);if(fe.array&&fe.object){const ge=(0,S._)`typeof ${re} != "object"`;Y=fe.null?ge:(0,S._)`!${re} || ${ge}`,delete fe.null,delete fe.array,delete fe.object}else Y=S.nil;fe.number&&delete fe.integer;for(const ge in fe)Y=(0,S.and)(Y,V(ge,re,ce,ne));return Y}n.checkDataTypes=U;const q={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:re})=>typeof Q=="string"?(0,S._)`{type: ${Q}}`:(0,S._)`{type: ${re}}`};function H(Q){const re=W(Q);(0,E.reportError)(re,q)}n.reportTypeError=H;function W(Q){const{gen:re,data:ce,schema:ne}=Q,Y=(0,C.schemaRefOrVal)(Q,ne,"type");return{gen:re,keyword:"type",data:ce,schema:ne.type,schemaCode:Y,schemaValue:Y,parentSchema:ne,params:{},it:Q}}})(dataType);var defaults$2={};Object.defineProperty(defaults$2,"__esModule",{value:!0});defaults$2.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(n,_){const{properties:x,items:E}=n.schema;if(_==="object"&&x)for(const S in x)assignDefault(n,S,x[S].default);else _==="array"&&Array.isArray(E)&&E.forEach((S,C)=>assignDefault(n,C,S.default))}defaults$2.assignDefaults=assignDefaults;function assignDefault(n,_,x){const{gen:E,compositeRule:S,data:C,opts:T}=n;if(x===void 0)return;const A=(0,codegen_1$r._)`${C}${(0,codegen_1$r.getProperty)(_)}`;if(S){(0,util_1$p.checkStrictMode)(n,`default is ignored for: ${A}`);return}let B=(0,codegen_1$r._)`${A} === undefined`;T.useDefaults==="empty"&&(B=(0,codegen_1$r._)`${B} || ${A} === null || ${A} === ""`),E.if(B,(0,codegen_1$r._)`${A} = ${(0,codegen_1$r.stringify)(x)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(n,_){const{gen:x,data:E,it:S}=n;x.if(noPropertyInData(x,E,_,S.opts.ownProperties),()=>{n.setParams({missingProperty:(0,codegen_1$q._)`${_}`},!0),n.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:n,data:_,it:{opts:x}},E,S){return(0,codegen_1$q.or)(...E.map(C=>(0,codegen_1$q.and)(noPropertyInData(n,_,C,x.ownProperties),(0,codegen_1$q._)`${S} = ${C}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(n,_){n.setParams({missingProperty:_},!0),n.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(n){return n.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(n,_,x){return(0,codegen_1$q._)`${hasPropFunc(n)}.call(${_}, ${x})`}code.isOwnProperty=isOwnProperty;function propertyInData(n,_,x,E){const S=(0,codegen_1$q._)`${_}${(0,codegen_1$q.getProperty)(x)} !== undefined`;return E?(0,codegen_1$q._)`${S} && ${isOwnProperty(n,_,x)}`:S}code.propertyInData=propertyInData;function noPropertyInData(n,_,x,E){const S=(0,codegen_1$q._)`${_}${(0,codegen_1$q.getProperty)(x)} === undefined`;return E?(0,codegen_1$q.or)(S,(0,codegen_1$q.not)(isOwnProperty(n,_,x))):S}code.noPropertyInData=noPropertyInData;function allSchemaProperties(n){return n?Object.keys(n).filter(_=>_!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(n,_){return allSchemaProperties(_).filter(x=>!(0,util_1$o.alwaysValidSchema)(n,_[x]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:n,data:_,it:{gen:x,topSchemaRef:E,schemaPath:S,errorPath:C},it:T},A,B,I){const M=I?(0,codegen_1$q._)`${n}, ${_}, ${E}${S}`:_,O=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,C)],[names_1$5.default.parentData,T.parentData],[names_1$5.default.parentDataProperty,T.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];T.opts.dynamicRef&&O.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const D=(0,codegen_1$q._)`${M}, ${x.object(...O)}`;return B!==codegen_1$q.nil?(0,codegen_1$q._)`${A}.call(${B}, ${D})`:(0,codegen_1$q._)`${A}(${D})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:n,it:{opts:_}},x){const E=_.unicodeRegExp?"u":"",{regExp:S}=_.code,C=S(x,E);return n.scopeValue("pattern",{key:C.toString(),ref:C,code:(0,codegen_1$q._)`${S.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(n,S)}(${x}, ${E})`})}code.usePattern=usePattern;function validateArray(n){const{gen:_,data:x,keyword:E,it:S}=n,C=_.name("valid");if(S.allErrors){const A=_.let("valid",!0);return T(()=>_.assign(A,!1)),A}return _.var(C,!0),T(()=>_.break()),C;function T(A){const B=_.const("len",(0,codegen_1$q._)`${x}.length`);_.forRange("i",0,B,I=>{n.subschema({keyword:E,dataProp:I,dataPropType:util_1$o.Type.Num},C),_.if((0,codegen_1$q.not)(C),A)})}}code.validateArray=validateArray;function validateUnion(n){const{gen:_,schema:x,keyword:E,it:S}=n;if(!Array.isArray(x))throw new Error("ajv implementation error");if(x.some(B=>(0,util_1$o.alwaysValidSchema)(S,B))&&!S.opts.unevaluated)return;const T=_.let("valid",!1),A=_.name("_valid");_.block(()=>x.forEach((B,I)=>{const M=n.subschema({keyword:E,schemaProp:I,compositeRule:!0},A);_.assign(T,(0,codegen_1$q._)`${T} || ${A}`),n.mergeValidEvaluated(M,A)||_.if((0,codegen_1$q.not)(T))})),n.result(T,()=>n.reset(),()=>n.error(!0))}code.validateUnion=validateUnion;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(n,_){const{gen:x,keyword:E,schema:S,parentSchema:C,it:T}=n,A=_.macro.call(T.self,S,C,T),B=useKeyword(x,E,A);T.opts.validateSchema!==!1&&T.self.validateSchema(A,!0);const I=x.name("valid");n.subschema({schema:A,schemaPath:codegen_1$p.nil,errSchemaPath:`${T.errSchemaPath}/${E}`,topSchemaRef:B,compositeRule:!0},I),n.pass(I,()=>n.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(n,_){var x;const{gen:E,keyword:S,schema:C,parentSchema:T,$data:A,it:B}=n;checkAsyncKeyword(B,_);const I=!A&&_.compile?_.compile.call(B.self,C,T,B):_.validate,M=useKeyword(E,S,I),O=E.let("valid");n.block$data(O,D),n.ok((x=_.valid)!==null&&x!==void 0?x:O);function D(){if(_.errors===!1)U(),_.modifying&&modifyData(n),q(()=>n.error());else{const H=_.async?L():V();_.modifying&&modifyData(n),q(()=>addErrs(n,H))}}function L(){const H=E.let("ruleErrs",null);return E.try(()=>U((0,codegen_1$p._)`await `),W=>E.assign(O,!1).if((0,codegen_1$p._)`${W} instanceof ${B.ValidationError}`,()=>E.assign(H,(0,codegen_1$p._)`${W}.errors`),()=>E.throw(W))),H}function V(){const H=(0,codegen_1$p._)`${M}.errors`;return E.assign(H,null),U(codegen_1$p.nil),H}function U(H=_.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const W=B.opts.passContext?names_1$4.default.this:names_1$4.default.self,Q=!("compile"in _&&!A||_.schema===!1);E.assign(O,(0,codegen_1$p._)`${H}${(0,code_1$9.callValidateCode)(n,M,W,Q)}`,_.modifying)}function q(H){var W;E.if((0,codegen_1$p.not)((W=_.valid)!==null&&W!==void 0?W:O),H)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(n){const{gen:_,data:x,it:E}=n;_.if(E.parentData,()=>_.assign(x,(0,codegen_1$p._)`${E.parentData}[${E.parentDataProperty}]`))}function addErrs(n,_){const{gen:x}=n;x.if((0,codegen_1$p._)`Array.isArray(${_})`,()=>{x.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${_} : ${names_1$4.default.vErrors}.concat(${_})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(n)},()=>n.error())}function checkAsyncKeyword({schemaEnv:n},_){if(_.async&&!n.$async)throw new Error("async keyword in sync schema")}function useKeyword(n,_,x){if(x===void 0)throw new Error(`keyword "${_}" failed to compile`);return n.scopeValue("keyword",typeof x=="function"?{ref:x}:{ref:x,code:(0,codegen_1$p.stringify)(x)})}function validSchemaType(n,_,x=!1){return!_.length||_.some(E=>E==="array"?Array.isArray(n):E==="object"?n&&typeof n=="object"&&!Array.isArray(n):typeof n==E||x&&typeof n>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:n,opts:_,self:x,errSchemaPath:E},S,C){if(Array.isArray(S.keyword)?!S.keyword.includes(C):S.keyword!==C)throw new Error("ajv implementation error");const T=S.dependencies;if(T?.some(A=>!Object.prototype.hasOwnProperty.call(n,A)))throw new Error(`parent schema must have dependencies of ${C}: ${T.join(",")}`);if(S.validateSchema&&!S.validateSchema(n[C])){const B=`keyword "${C}" value is invalid at path "${E}": `+x.errorsText(S.validateSchema.errors);if(_.validateSchema==="log")x.logger.error(B);else throw new Error(B)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(n,{keyword:_,schemaProp:x,schema:E,schemaPath:S,errSchemaPath:C,topSchemaRef:T}){if(_!==void 0&&E!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(_!==void 0){const A=n.schema[_];return x===void 0?{schema:A,schemaPath:(0,codegen_1$o._)`${n.schemaPath}${(0,codegen_1$o.getProperty)(_)}`,errSchemaPath:`${n.errSchemaPath}/${_}`}:{schema:A[x],schemaPath:(0,codegen_1$o._)`${n.schemaPath}${(0,codegen_1$o.getProperty)(_)}${(0,codegen_1$o.getProperty)(x)}`,errSchemaPath:`${n.errSchemaPath}/${_}/${(0,util_1$n.escapeFragment)(x)}`}}if(E!==void 0){if(S===void 0||C===void 0||T===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:E,schemaPath:S,topSchemaRef:T,errSchemaPath:C}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(n,_,{dataProp:x,dataPropType:E,data:S,dataTypes:C,propertyName:T}){if(S!==void 0&&x!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:A}=_;if(x!==void 0){const{errorPath:I,dataPathArr:M,opts:O}=_,D=A.let("data",(0,codegen_1$o._)`${_.data}${(0,codegen_1$o.getProperty)(x)}`,!0);B(D),n.errorPath=(0,codegen_1$o.str)`${I}${(0,util_1$n.getErrorPath)(x,E,O.jsPropertySyntax)}`,n.parentDataProperty=(0,codegen_1$o._)`${x}`,n.dataPathArr=[...M,n.parentDataProperty]}if(S!==void 0){const I=S instanceof codegen_1$o.Name?S:A.let("data",S,!0);B(I),T!==void 0&&(n.propertyName=T)}C&&(n.dataTypes=C);function B(I){n.data=I,n.dataLevel=_.dataLevel+1,n.dataTypes=[],_.definedProperties=new Set,n.parentData=_.data,n.dataNames=[..._.dataNames,I]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(n,{jtdDiscriminator:_,jtdMetadata:x,compositeRule:E,createErrors:S,allErrors:C}){E!==void 0&&(n.compositeRule=E),S!==void 0&&(n.createErrors=S),C!==void 0&&(n.allErrors=C),n.jtdDiscriminator=_,n.jtdMetadata=x}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function n(_,x){if(_===x)return!0;if(_&&x&&typeof _=="object"&&typeof x=="object"){if(_.constructor!==x.constructor)return!1;var E,S,C;if(Array.isArray(_)){if(E=_.length,E!=x.length)return!1;for(S=E;S--!==0;)if(!n(_[S],x[S]))return!1;return!0}if(_.constructor===RegExp)return _.source===x.source&&_.flags===x.flags;if(_.valueOf!==Object.prototype.valueOf)return _.valueOf()===x.valueOf();if(_.toString!==Object.prototype.toString)return _.toString()===x.toString();if(C=Object.keys(_),E=C.length,E!==Object.keys(x).length)return!1;for(S=E;S--!==0;)if(!Object.prototype.hasOwnProperty.call(x,C[S]))return!1;for(S=E;S--!==0;){var T=C[S];if(!n(_[T],x[T]))return!1}return!0}return _!==_&&x!==x},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(n,_,x){typeof _=="function"&&(x=_,_={}),x=_.cb||x;var E=typeof x=="function"?x:x.pre||function(){},S=x.post||function(){};_traverse(_,E,S,n,"",n)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(n,_,x,E,S,C,T,A,B,I){if(E&&typeof E=="object"&&!Array.isArray(E)){_(E,S,C,T,A,B,I);for(var M in E){var O=E[M];if(Array.isArray(O)){if(M in traverse$1.arrayKeywords)for(var D=0;D<O.length;D++)_traverse(n,_,x,O[D],S+"/"+M+"/"+D,C,S,M,E,D)}else if(M in traverse$1.propsKeywords){if(O&&typeof O=="object")for(var L in O)_traverse(n,_,x,O[L],S+"/"+M+"/"+escapeJsonPtr(L),C,S,M,E,L)}else(M in traverse$1.keywords||n.allKeys&&!(M in traverse$1.skipKeywords))&&_traverse(n,_,x,O,S+"/"+M,C,S,M,E)}x(E,S,C,T,A,B,I)}}function escapeJsonPtr(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$1,"__esModule",{value:!0});resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$m=util,equal$2=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(n,_=!0){return typeof n=="boolean"?!0:_===!0?!hasRef(n):_?countKeys(n)<=_:!1}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(n){for(const _ in n){if(REF_KEYWORDS.has(_))return!0;const x=n[_];if(Array.isArray(x)&&x.some(hasRef)||typeof x=="object"&&hasRef(x))return!0}return!1}function countKeys(n){let _=0;for(const x in n){if(x==="$ref")return 1/0;if(_++,!SIMPLE_INLINED.has(x)&&(typeof n[x]=="object"&&(0,util_1$m.eachItem)(n[x],E=>_+=countKeys(E)),_===1/0))return 1/0}return _}function getFullPath(n,_="",x){x!==!1&&(_=normalizeId(_));const E=n.parse(_);return _getFullPath(n,E)}resolve$1.getFullPath=getFullPath;function _getFullPath(n,_){return n.serialize(_).split("#")[0]+"#"}resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(n){return n?n.replace(TRAILING_SLASH_HASH,""):""}resolve$1.normalizeId=normalizeId;function resolveUrl(n,_,x){return x=normalizeId(x),n.resolve(_,x)}resolve$1.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(n,_){if(typeof n=="boolean")return{};const{schemaId:x,uriResolver:E}=this.opts,S=normalizeId(n[x]||_),C={"":S},T=getFullPath(E,S,!1),A={},B=new Set;return traverse(n,{allKeys:!0},(O,D,L,V)=>{if(V===void 0)return;const U=T+D;let q=C[V];typeof O[x]=="string"&&(q=H.call(this,O[x])),W.call(this,O.$anchor),W.call(this,O.$dynamicAnchor),C[D]=q;function H(Q){const re=this.opts.uriResolver.resolve;if(Q=normalizeId(q?re(q,Q):Q),B.has(Q))throw M(Q);B.add(Q);let ce=this.refs[Q];return typeof ce=="string"&&(ce=this.refs[ce]),typeof ce=="object"?I(O,ce.schema,Q):Q!==normalizeId(U)&&(Q[0]==="#"?(I(O,A[Q],Q),A[Q]=O):this.refs[Q]=U),Q}function W(Q){if(typeof Q=="string"){if(!ANCHOR.test(Q))throw new Error(`invalid anchor "${Q}"`);H.call(this,`#${Q}`)}}}),A;function I(O,D,L){if(D!==void 0&&!equal$2(O,D))throw M(L)}function M(O){return new Error(`reference "${O}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults$2,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util,errors_1=errors;function validateFunctionCode(n){if(isSchemaObj(n)&&(checkKeywords(n),schemaCxtHasRules(n))){topSchemaObjCode(n);return}validateFunction(n,()=>(0,boolSchema_1.topBoolOrEmptySchema)(n))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:n,validateName:_,schema:x,schemaEnv:E,opts:S},C){S.code.es5?n.func(_,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,E.$async,()=>{n.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(x,S)}`),destructureValCxtES5(n,S),n.code(C)}):n.func(_,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(S)}`,E.$async,()=>n.code(funcSourceUrl(x,S)).code(C))}function destructureValCxt(n){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${n.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(n,_){n.if(names_1$3.default.valCxt,()=>{n.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),n.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),n.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),n.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),_.dynamicRef&&n.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{n.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),n.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),n.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),n.var(names_1$3.default.rootData,names_1$3.default.data),_.dynamicRef&&n.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(n){const{schema:_,opts:x,gen:E}=n;validateFunction(n,()=>{x.$comment&&_.$comment&&commentKeyword(n),checkNoDefault(n),E.let(names_1$3.default.vErrors,null),E.let(names_1$3.default.errors,0),x.unevaluated&&resetEvaluated(n),typeAndKeywords(n),returnResults(n)})}function resetEvaluated(n){const{gen:_,validateName:x}=n;n.evaluated=_.const("evaluated",(0,codegen_1$n._)`${x}.evaluated`),_.if((0,codegen_1$n._)`${n.evaluated}.dynamicProps`,()=>_.assign((0,codegen_1$n._)`${n.evaluated}.props`,(0,codegen_1$n._)`undefined`)),_.if((0,codegen_1$n._)`${n.evaluated}.dynamicItems`,()=>_.assign((0,codegen_1$n._)`${n.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(n,_){const x=typeof n=="object"&&n[_.schemaId];return x&&(_.code.source||_.code.process)?(0,codegen_1$n._)`/*# sourceURL=${x} */`:codegen_1$n.nil}function subschemaCode(n,_){if(isSchemaObj(n)&&(checkKeywords(n),schemaCxtHasRules(n))){subSchemaObjCode(n,_);return}(0,boolSchema_1.boolOrEmptySchema)(n,_)}function schemaCxtHasRules({schema:n,self:_}){if(typeof n=="boolean")return!n;for(const x in n)if(_.RULES.all[x])return!0;return!1}function isSchemaObj(n){return typeof n.schema!="boolean"}function subSchemaObjCode(n,_){const{schema:x,gen:E,opts:S}=n;S.$comment&&x.$comment&&commentKeyword(n),updateContext(n),checkAsyncSchema(n);const C=E.const("_errs",names_1$3.default.errors);typeAndKeywords(n,C),E.var(_,(0,codegen_1$n._)`${C} === ${names_1$3.default.errors}`)}function checkKeywords(n){(0,util_1$l.checkUnknownRules)(n),checkRefsAndKeywords(n)}function typeAndKeywords(n,_){if(n.opts.jtd)return schemaKeywords(n,[],!1,_);const x=(0,dataType_1$1.getSchemaTypes)(n.schema),E=(0,dataType_1$1.coerceAndCheckDataType)(n,x);schemaKeywords(n,x,!E,_)}function checkRefsAndKeywords(n){const{schema:_,errSchemaPath:x,opts:E,self:S}=n;_.$ref&&E.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(_,S.RULES)&&S.logger.warn(`$ref: keywords ignored in schema at path "${x}"`)}function checkNoDefault(n){const{schema:_,opts:x}=n;_.default!==void 0&&x.useDefaults&&x.strictSchema&&(0,util_1$l.checkStrictMode)(n,"default is ignored in the schema root")}function updateContext(n){const _=n.schema[n.opts.schemaId];_&&(n.baseId=(0,resolve_1$2.resolveUrl)(n.opts.uriResolver,n.baseId,_))}function checkAsyncSchema(n){if(n.schema.$async&&!n.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:n,schemaEnv:_,schema:x,errSchemaPath:E,opts:S}){const C=x.$comment;if(S.$comment===!0)n.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${C})`);else if(typeof S.$comment=="function"){const T=(0,codegen_1$n.str)`${E}/$comment`,A=n.scopeValue("root",{ref:_.root});n.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${C}, ${T}, ${A}.schema)`)}}function returnResults(n){const{gen:_,schemaEnv:x,validateName:E,ValidationError:S,opts:C}=n;x.$async?_.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>_.return(names_1$3.default.data),()=>_.throw((0,codegen_1$n._)`new ${S}(${names_1$3.default.vErrors})`)):(_.assign((0,codegen_1$n._)`${E}.errors`,names_1$3.default.vErrors),C.unevaluated&&assignEvaluated(n),_.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:n,evaluated:_,props:x,items:E}){x instanceof codegen_1$n.Name&&n.assign((0,codegen_1$n._)`${_}.props`,x),E instanceof codegen_1$n.Name&&n.assign((0,codegen_1$n._)`${_}.items`,E)}function schemaKeywords(n,_,x,E){const{gen:S,schema:C,data:T,allErrors:A,opts:B,self:I}=n,{RULES:M}=I;if(C.$ref&&(B.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(C,M))){S.block(()=>keywordCode(n,"$ref",M.all.$ref.definition));return}B.jtd||checkStrictTypes(n,_),S.block(()=>{for(const D of M.rules)O(D);O(M.post)});function O(D){(0,applicability_1.shouldUseGroup)(C,D)&&(D.type?(S.if((0,dataType_2.checkDataType)(D.type,T,B.strictNumbers)),iterateKeywords(n,D),_.length===1&&_[0]===D.type&&x&&(S.else(),(0,dataType_2.reportTypeError)(n)),S.endIf()):iterateKeywords(n,D),A||S.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${E||0}`))}}function iterateKeywords(n,_){const{gen:x,schema:E,opts:{useDefaults:S}}=n;S&&(0,defaults_1.assignDefaults)(n,_.type),x.block(()=>{for(const C of _.rules)(0,applicability_1.shouldUseRule)(E,C)&&keywordCode(n,C.keyword,C.definition,_.type)})}function checkStrictTypes(n,_){n.schemaEnv.meta||!n.opts.strictTypes||(checkContextTypes(n,_),n.opts.allowUnionTypes||checkMultipleTypes(n,_),checkKeywordTypes(n,n.dataTypes))}function checkContextTypes(n,_){if(_.length){if(!n.dataTypes.length){n.dataTypes=_;return}_.forEach(x=>{includesType(n.dataTypes,x)||strictTypesError(n,`type "${x}" not allowed by context "${n.dataTypes.join(",")}"`)}),narrowSchemaTypes(n,_)}}function checkMultipleTypes(n,_){_.length>1&&!(_.length===2&&_.includes("null"))&&strictTypesError(n,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(n,_){const x=n.self.RULES.all;for(const E in x){const S=x[E];if(typeof S=="object"&&(0,applicability_1.shouldUseRule)(n.schema,S)){const{type:C}=S.definition;C.length&&!C.some(T=>hasApplicableType(_,T))&&strictTypesError(n,`missing type "${C.join(",")}" for keyword "${E}"`)}}}function hasApplicableType(n,_){return n.includes(_)||_==="number"&&n.includes("integer")}function includesType(n,_){return n.includes(_)||_==="integer"&&n.includes("number")}function narrowSchemaTypes(n,_){const x=[];for(const E of n.dataTypes)includesType(_,E)?x.push(E):_.includes("integer")&&E==="number"&&x.push("integer");n.dataTypes=x}function strictTypesError(n,_){const x=n.schemaEnv.baseId+n.errSchemaPath;_+=` at "${x}" (strictTypes)`,(0,util_1$l.checkStrictMode)(n,_,n.opts.strictTypes)}class KeywordCxt{constructor(_,x,E){if((0,keyword_1.validateKeywordUsage)(_,x,E),this.gen=_.gen,this.allErrors=_.allErrors,this.keyword=E,this.data=_.data,this.schema=_.schema[E],this.$data=x.$data&&_.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(_,this.schema,E,this.$data),this.schemaType=x.schemaType,this.parentSchema=_.schema,this.params={},this.it=_,this.def=x,this.$data)this.schemaCode=_.gen.const("vSchema",getData(this.$data,_));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,x.schemaType,x.allowUndefined))throw new Error(`${E} value must be ${JSON.stringify(x.schemaType)}`);("code"in x?x.trackErrors:x.errors!==!1)&&(this.errsCount=_.gen.const("_errs",names_1$3.default.errors))}result(_,x,E){this.failResult((0,codegen_1$n.not)(_),x,E)}failResult(_,x,E){this.gen.if(_),E?E():this.error(),x?(this.gen.else(),x(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_,x){this.failResult((0,codegen_1$n.not)(_),void 0,x)}fail(_){if(_===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(_),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_){if(!this.$data)return this.fail(_);const{schemaCode:x}=this;this.fail((0,codegen_1$n._)`${x} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),_)})`)}error(_,x,E){if(x){this.setParams(x),this._error(_,E),this.setParams({});return}this._error(_,E)}_error(_,x){(_?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,x)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(_){this.allErrors||this.gen.if(_)}setParams(_,x){x?Object.assign(this.params,_):this.params=_}block$data(_,x,E=codegen_1$n.nil){this.gen.block(()=>{this.check$data(_,E),x()})}check$data(_=codegen_1$n.nil,x=codegen_1$n.nil){if(!this.$data)return;const{gen:E,schemaCode:S,schemaType:C,def:T}=this;E.if((0,codegen_1$n.or)((0,codegen_1$n._)`${S} === undefined`,x)),_!==codegen_1$n.nil&&E.assign(_,!0),(C.length||T.validateSchema)&&(E.elseIf(this.invalid$data()),this.$dataError(),_!==codegen_1$n.nil&&E.assign(_,!1)),E.else()}invalid$data(){const{gen:_,schemaCode:x,schemaType:E,def:S,it:C}=this;return(0,codegen_1$n.or)(T(),A());function T(){if(E.length){if(!(x instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const B=Array.isArray(E)?E:[E];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(B,x,C.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function A(){if(S.validateSchema){const B=_.scopeValue("validate$data",{ref:S.validateSchema});return(0,codegen_1$n._)`!${B}(${x})`}return codegen_1$n.nil}}subschema(_,x){const E=(0,subschema_1.getSubschema)(this.it,_);(0,subschema_1.extendSubschemaData)(E,this.it,_),(0,subschema_1.extendSubschemaMode)(E,_);const S={...this.it,...E,items:void 0,props:void 0};return subschemaCode(S,x),S}mergeEvaluated(_,x){const{it:E,gen:S}=this;E.opts.unevaluated&&(E.props!==!0&&_.props!==void 0&&(E.props=util_1$l.mergeEvaluated.props(S,_.props,E.props,x)),E.items!==!0&&_.items!==void 0&&(E.items=util_1$l.mergeEvaluated.items(S,_.items,E.items,x)))}mergeValidEvaluated(_,x){const{it:E,gen:S}=this;if(E.opts.unevaluated&&(E.props!==!0||E.items!==!0))return S.if(x,()=>this.mergeEvaluated(_,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(n,_,x,E){const S=new KeywordCxt(n,x,_);"code"in x?x.code(S,E):S.$data&&x.validate?(0,keyword_1.funcKeywordCode)(S,x):"macro"in x?(0,keyword_1.macroKeywordCode)(S,x):(x.compile||x.validate)&&(0,keyword_1.funcKeywordCode)(S,x)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(n,{dataLevel:_,dataNames:x,dataPathArr:E}){let S,C;if(n==="")return names_1$3.default.rootData;if(n[0]==="/"){if(!JSON_POINTER.test(n))throw new Error(`Invalid JSON-pointer: ${n}`);S=n,C=names_1$3.default.rootData}else{const I=RELATIVE_JSON_POINTER.exec(n);if(!I)throw new Error(`Invalid JSON-pointer: ${n}`);const M=+I[1];if(S=I[2],S==="#"){if(M>=_)throw new Error(B("property/index",M));return E[_-M]}if(M>_)throw new Error(B("data",M));if(C=x[_-M],!S)return C}let T=C;const A=S.split("/");for(const I of A)I&&(C=(0,codegen_1$n._)`${C}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(I))}`,T=(0,codegen_1$n._)`${T} && ${C}`);return T;function B(I,M){return`Cannot access ${I} ${M} levels up, current level is ${_}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(_){super("validation failed"),this.errors=_,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(_,x,E,S){super(S||`can't resolve reference ${E} from id ${x}`),this.missingRef=(0,resolve_1$1.resolveUrl)(_,x,E),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(_,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util,validate_1$1=validate;class SchemaEnv{constructor(_){var x;this.refs={},this.dynamicAnchors={};let E;typeof _.schema=="object"&&(E=_.schema),this.schema=_.schema,this.schemaId=_.schemaId,this.root=_.root||this,this.baseId=(x=_.baseId)!==null&&x!==void 0?x:(0,resolve_1.normalizeId)(E?.[_.schemaId||"$id"]),this.schemaPath=_.schemaPath,this.localRefs=_.localRefs,this.meta=_.meta,this.$async=E?.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(n){const _=getCompilingSchema.call(this,n);if(_)return _;const x=(0,resolve_1.getFullPath)(this.opts.uriResolver,n.root.baseId),{es5:E,lines:S}=this.opts.code,{ownProperties:C}=this.opts,T=new codegen_1$m.CodeGen(this.scope,{es5:E,lines:S,ownProperties:C});let A;n.$async&&(A=T.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const B=T.scopeName("validate");n.validateName=B;const I={gen:T,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:T.scopeValue("schema",this.opts.code.source===!0?{ref:n.schema,code:(0,codegen_1$m.stringify)(n.schema)}:{ref:n.schema}),validateName:B,ValidationError:A,schema:n.schema,schemaEnv:n,rootId:x,baseId:n.baseId||x,schemaPath:codegen_1$m.nil,errSchemaPath:n.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let M;try{this._compilations.add(n),(0,validate_1$1.validateFunctionCode)(I),T.optimize(this.opts.code.optimize);const O=T.toString();M=`${T.scopeRefs(names_1$2.default.scope)}return ${O}`,this.opts.code.process&&(M=this.opts.code.process(M,n));const L=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,M)(this,this.scope.get());if(this.scope.value(B,{ref:L}),L.errors=null,L.schema=n.schema,L.schemaEnv=n,n.$async&&(L.$async=!0),this.opts.code.source===!0&&(L.source={validateName:B,validateCode:O,scopeValues:T._values}),this.opts.unevaluated){const{props:V,items:U}=I;L.evaluated={props:V instanceof codegen_1$m.Name?void 0:V,items:U instanceof codegen_1$m.Name?void 0:U,dynamicProps:V instanceof codegen_1$m.Name,dynamicItems:U instanceof codegen_1$m.Name},L.source&&(L.source.evaluated=(0,codegen_1$m.stringify)(L.evaluated))}return n.validate=L,n}catch(O){throw delete n.validate,delete n.validateName,M&&this.logger.error("Error compiling schema, function code:",M),O}finally{this._compilations.delete(n)}}compile.compileSchema=compileSchema;function resolveRef(n,_,x){var E;x=(0,resolve_1.resolveUrl)(this.opts.uriResolver,_,x);const S=n.refs[x];if(S)return S;let C=resolve.call(this,n,x);if(C===void 0){const T=(E=n.localRefs)===null||E===void 0?void 0:E[x],{schemaId:A}=this.opts;T&&(C=new SchemaEnv({schema:T,schemaId:A,root:n,baseId:_}))}if(C!==void 0)return n.refs[x]=inlineOrCompile.call(this,C)}compile.resolveRef=resolveRef;function inlineOrCompile(n){return(0,resolve_1.inlineRef)(n.schema,this.opts.inlineRefs)?n.schema:n.validate?n:compileSchema.call(this,n)}function getCompilingSchema(n){for(const _ of this._compilations)if(sameSchemaEnv(_,n))return _}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(n,_){return n.schema===_.schema&&n.root===_.root&&n.baseId===_.baseId}function resolve(n,_){let x;for(;typeof(x=this.refs[_])=="string";)_=x;return x||this.schemas[_]||resolveSchema.call(this,n,_)}function resolveSchema(n,_){const x=this.opts.uriResolver.parse(_),E=(0,resolve_1._getFullPath)(this.opts.uriResolver,x);let S=(0,resolve_1.getFullPath)(this.opts.uriResolver,n.baseId,void 0);if(Object.keys(n.schema).length>0&&E===S)return getJsonPointer.call(this,x,n);const C=(0,resolve_1.normalizeId)(E),T=this.refs[C]||this.schemas[C];if(typeof T=="string"){const A=resolveSchema.call(this,n,T);return typeof A?.schema!="object"?void 0:getJsonPointer.call(this,x,A)}if(typeof T?.schema=="object"){if(T.validate||compileSchema.call(this,T),C===(0,resolve_1.normalizeId)(_)){const{schema:A}=T,{schemaId:B}=this.opts,I=A[B];return I&&(S=(0,resolve_1.resolveUrl)(this.opts.uriResolver,S,I)),new SchemaEnv({schema:A,schemaId:B,root:n,baseId:S})}return getJsonPointer.call(this,x,T)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(n,{baseId:_,schema:x,root:E}){var S;if(((S=n.fragment)===null||S===void 0?void 0:S[0])!=="/")return;for(const A of n.fragment.slice(1).split("/")){if(typeof x=="boolean")return;const B=x[(0,util_1$k.unescapeFragment)(A)];if(B===void 0)return;x=B;const I=typeof x=="object"&&x[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(A)&&I&&(_=(0,resolve_1.resolveUrl)(this.opts.uriResolver,_,I))}let C;if(typeof x!="boolean"&&x.$ref&&!(0,util_1$k.schemaHasRulesButRef)(x,this.RULES)){const A=(0,resolve_1.resolveUrl)(this.opts.uriResolver,_,x.$ref);C=resolveSchema.call(this,E,A)}const{schemaId:T}=this.opts;if(C=C||new SchemaEnv({schema:x,schemaId:T,root:E,baseId:_}),C.schema!==C.root.schema)return C}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$2="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$2,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},uri_all={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(n,_){(function(x,E){E(_)})(commonjsGlobal,function(x){function E(){for(var Oe=arguments.length,De=Array(Oe),ue=0;ue<Oe;ue++)De[ue]=arguments[ue];if(De.length>1){De[0]=De[0].slice(0,-1);for(var ke=De.length-1,Fe=1;Fe<ke;++Fe)De[Fe]=De[Fe].slice(1,-1);return De[ke]=De[ke].slice(1),De.join("")}else return De[0]}function S(Oe){return"(?:"+Oe+")"}function C(Oe){return Oe===void 0?"undefined":Oe===null?"null":Object.prototype.toString.call(Oe).split(" ").pop().split("]").shift().toLowerCase()}function T(Oe){return Oe.toUpperCase()}function A(Oe){return Oe!=null?Oe instanceof Array?Oe:typeof Oe.length!="number"||Oe.split||Oe.setInterval||Oe.call?[Oe]:Array.prototype.slice.call(Oe):[]}function B(Oe,De){var ue=Oe;if(De)for(var ke in De)ue[ke]=De[ke];return ue}function I(Oe){var De="[A-Za-z]",ue="[0-9]",ke=E(ue,"[A-Fa-f]"),Fe=S(S("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+S("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+S("%"+ke+ke)),Ue="[\\:\\/\\?\\#\\[\\]\\@]",ze="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ye=E(Ue,ze),rt=Oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",at=Oe?"[\\uE000-\\uF8FF]":"[]",ct=E(De,ue,"[\\-\\.\\_\\~]",rt);S(De+E(De,ue,"[\\+\\-\\.]")+"*"),S(S(Fe+"|"+E(ct,ze,"[\\:]"))+"*");var st=S(S("25[0-5]")+"|"+S("2[0-4]"+ue)+"|"+S("1"+ue+ue)+"|"+S("0?[1-9]"+ue)+"|0?0?"+ue),lt=S(st+"\\."+st+"\\."+st+"\\."+st),ht=S(ke+"{1,4}"),bt=S(S(ht+"\\:"+ht)+"|"+lt),Et=S(S(ht+"\\:")+"{6}"+bt),gt=S("\\:\\:"+S(ht+"\\:")+"{5}"+bt),wt=S(S(ht)+"?\\:\\:"+S(ht+"\\:")+"{4}"+bt),Dt=S(S(S(ht+"\\:")+"{0,1}"+ht)+"?\\:\\:"+S(ht+"\\:")+"{3}"+bt),Ft=S(S(S(ht+"\\:")+"{0,2}"+ht)+"?\\:\\:"+S(ht+"\\:")+"{2}"+bt),Kt=S(S(S(ht+"\\:")+"{0,3}"+ht)+"?\\:\\:"+ht+"\\:"+bt),Ut=S(S(S(ht+"\\:")+"{0,4}"+ht)+"?\\:\\:"+bt),Xt=S(S(S(ht+"\\:")+"{0,5}"+ht)+"?\\:\\:"+ht),Zt=S(S(S(ht+"\\:")+"{0,6}"+ht)+"?\\:\\:"),Wt=S([Et,gt,wt,Dt,Ft,Kt,Ut,Xt,Zt].join("|")),yt=S(S(ct+"|"+Fe)+"+");S("[vV]"+ke+"+\\."+E(ct,ze,"[\\:]")+"+"),S(S(Fe+"|"+E(ct,ze))+"*");var xt=S(Fe+"|"+E(ct,ze,"[\\:\\@]"));return S(S(Fe+"|"+E(ct,ze,"[\\@]"))+"+"),S(S(xt+"|"+E("[\\/\\?]",at))+"*"),{NOT_SCHEME:new RegExp(E("[^]",De,ue,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(E("[^\\%\\:]",ct,ze),"g"),NOT_HOST:new RegExp(E("[^\\%\\[\\]\\:]",ct,ze),"g"),NOT_PATH:new RegExp(E("[^\\%\\/\\:\\@]",ct,ze),"g"),NOT_PATH_NOSCHEME:new RegExp(E("[^\\%\\/\\@]",ct,ze),"g"),NOT_QUERY:new RegExp(E("[^\\%]",ct,ze,"[\\:\\@\\/\\?]",at),"g"),NOT_FRAGMENT:new RegExp(E("[^\\%]",ct,ze,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(E("[^]",ct,ze),"g"),UNRESERVED:new RegExp(ct,"g"),OTHER_CHARS:new RegExp(E("[^\\%]",ct,Ye),"g"),PCT_ENCODED:new RegExp(Fe,"g"),IPV4ADDRESS:new RegExp("^("+lt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Wt+")"+S(S("\\%25|\\%(?!"+ke+"{2})")+"("+yt+")")+"?\\]?$")}}var M=I(!1),O=I(!0),D=function(){function Oe(De,ue){var ke=[],Fe=!0,Ue=!1,ze=void 0;try{for(var Ye=De[Symbol.iterator](),rt;!(Fe=(rt=Ye.next()).done)&&(ke.push(rt.value),!(ue&&ke.length===ue));Fe=!0);}catch(at){Ue=!0,ze=at}finally{try{!Fe&&Ye.return&&Ye.return()}finally{if(Ue)throw ze}}return ke}return function(De,ue){if(Array.isArray(De))return De;if(Symbol.iterator in Object(De))return Oe(De,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),L=function(Oe){if(Array.isArray(Oe)){for(var De=0,ue=Array(Oe.length);De<Oe.length;De++)ue[De]=Oe[De];return ue}else return Array.from(Oe)},V=2147483647,U=36,q=1,H=26,W=38,Q=700,re=72,ce=128,ne="-",Y=/^xn--/,fe=/[^\0-\x7E]/,ge=/[\x2E\u3002\uFF0E\uFF61]/g,$e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_e=U-q,ae=Math.floor,X=String.fromCharCode;function F(Oe){throw new RangeError($e[Oe])}function z(Oe,De){for(var ue=[],ke=Oe.length;ke--;)ue[ke]=De(Oe[ke]);return ue}function J(Oe,De){var ue=Oe.split("@"),ke="";ue.length>1&&(ke=ue[0]+"@",Oe=ue[1]),Oe=Oe.replace(ge,".");var Fe=Oe.split("."),Ue=z(Fe,De).join(".");return ke+Ue}function te(Oe){for(var De=[],ue=0,ke=Oe.length;ue<ke;){var Fe=Oe.charCodeAt(ue++);if(Fe>=55296&&Fe<=56319&&ue<ke){var Ue=Oe.charCodeAt(ue++);(Ue&64512)==56320?De.push(((Fe&1023)<<10)+(Ue&1023)+65536):(De.push(Fe),ue--)}else De.push(Fe)}return De}var se=function(De){return String.fromCodePoint.apply(String,L(De))},oe=function(De){return De-48<10?De-22:De-65<26?De-65:De-97<26?De-97:U},ie=function(De,ue){return De+22+75*(De<26)-((ue!=0)<<5)},G=function(De,ue,ke){var Fe=0;for(De=ke?ae(De/Q):De>>1,De+=ae(De/ue);De>_e*H>>1;Fe+=U)De=ae(De/_e);return ae(Fe+(_e+1)*De/(De+W))},j=function(De){var ue=[],ke=De.length,Fe=0,Ue=ce,ze=re,Ye=De.lastIndexOf(ne);Ye<0&&(Ye=0);for(var rt=0;rt<Ye;++rt)De.charCodeAt(rt)>=128&&F("not-basic"),ue.push(De.charCodeAt(rt));for(var at=Ye>0?Ye+1:0;at<ke;){for(var ct=Fe,st=1,lt=U;;lt+=U){at>=ke&&F("invalid-input");var ht=oe(De.charCodeAt(at++));(ht>=U||ht>ae((V-Fe)/st))&&F("overflow"),Fe+=ht*st;var bt=lt<=ze?q:lt>=ze+H?H:lt-ze;if(ht<bt)break;var Et=U-bt;st>ae(V/Et)&&F("overflow"),st*=Et}var gt=ue.length+1;ze=G(Fe-ct,gt,ct==0),ae(Fe/gt)>V-Ue&&F("overflow"),Ue+=ae(Fe/gt),Fe%=gt,ue.splice(Fe++,0,Ue)}return String.fromCodePoint.apply(String,ue)},ee=function(De){var ue=[];De=te(De);var ke=De.length,Fe=ce,Ue=0,ze=re,Ye=!0,rt=!1,at=void 0;try{for(var ct=De[Symbol.iterator](),st;!(Ye=(st=ct.next()).done);Ye=!0){var lt=st.value;lt<128&&ue.push(X(lt))}}catch(dr){rt=!0,at=dr}finally{try{!Ye&&ct.return&&ct.return()}finally{if(rt)throw at}}var ht=ue.length,bt=ht;for(ht&&ue.push(ne);bt<ke;){var Et=V,gt=!0,wt=!1,Dt=void 0;try{for(var Ft=De[Symbol.iterator](),Kt;!(gt=(Kt=Ft.next()).done);gt=!0){var Ut=Kt.value;Ut>=Fe&&Ut<Et&&(Et=Ut)}}catch(dr){wt=!0,Dt=dr}finally{try{!gt&&Ft.return&&Ft.return()}finally{if(wt)throw Dt}}var Xt=bt+1;Et-Fe>ae((V-Ue)/Xt)&&F("overflow"),Ue+=(Et-Fe)*Xt,Fe=Et;var Zt=!0,Wt=!1,yt=void 0;try{for(var xt=De[Symbol.iterator](),Pt;!(Zt=(Pt=xt.next()).done);Zt=!0){var It=Pt.value;if(It<Fe&&++Ue>V&&F("overflow"),It==Fe){for(var Lt=Ue,Yt=U;;Yt+=U){var cr=Yt<=ze?q:Yt>=ze+H?H:Yt-ze;if(Lt<cr)break;var yr=Lt-cr,br=U-cr;ue.push(X(ie(cr+yr%br,0))),Lt=ae(yr/br)}ue.push(X(ie(Lt,0))),ze=G(Ue,Xt,bt==ht),Ue=0,++bt}}}catch(dr){Wt=!0,yt=dr}finally{try{!Zt&&xt.return&&xt.return()}finally{if(Wt)throw yt}}++Ue,++Fe}return ue.join("")},pe=function(De){return J(De,function(ue){return Y.test(ue)?j(ue.slice(4).toLowerCase()):ue})},he=function(De){return J(De,function(ue){return fe.test(ue)?"xn--"+ee(ue):ue})},Se={version:"2.1.0",ucs2:{decode:te,encode:se},decode:j,encode:ee,toASCII:he,toUnicode:pe},we={};function xe(Oe){var De=Oe.charCodeAt(0),ue=void 0;return De<16?ue="%0"+De.toString(16).toUpperCase():De<128?ue="%"+De.toString(16).toUpperCase():De<2048?ue="%"+(De>>6|192).toString(16).toUpperCase()+"%"+(De&63|128).toString(16).toUpperCase():ue="%"+(De>>12|224).toString(16).toUpperCase()+"%"+(De>>6&63|128).toString(16).toUpperCase()+"%"+(De&63|128).toString(16).toUpperCase(),ue}function Ee(Oe){for(var De="",ue=0,ke=Oe.length;ue<ke;){var Fe=parseInt(Oe.substr(ue+1,2),16);if(Fe<128)De+=String.fromCharCode(Fe),ue+=3;else if(Fe>=194&&Fe<224){if(ke-ue>=6){var Ue=parseInt(Oe.substr(ue+4,2),16);De+=String.fromCharCode((Fe&31)<<6|Ue&63)}else De+=Oe.substr(ue,6);ue+=6}else if(Fe>=224){if(ke-ue>=9){var ze=parseInt(Oe.substr(ue+4,2),16),Ye=parseInt(Oe.substr(ue+7,2),16);De+=String.fromCharCode((Fe&15)<<12|(ze&63)<<6|Ye&63)}else De+=Oe.substr(ue,9);ue+=9}else De+=Oe.substr(ue,3),ue+=3}return De}function ye(Oe,De){function ue(ke){var Fe=Ee(ke);return Fe.match(De.UNRESERVED)?Fe:ke}return Oe.scheme&&(Oe.scheme=String(Oe.scheme).replace(De.PCT_ENCODED,ue).toLowerCase().replace(De.NOT_SCHEME,"")),Oe.userinfo!==void 0&&(Oe.userinfo=String(Oe.userinfo).replace(De.PCT_ENCODED,ue).replace(De.NOT_USERINFO,xe).replace(De.PCT_ENCODED,T)),Oe.host!==void 0&&(Oe.host=String(Oe.host).replace(De.PCT_ENCODED,ue).toLowerCase().replace(De.NOT_HOST,xe).replace(De.PCT_ENCODED,T)),Oe.path!==void 0&&(Oe.path=String(Oe.path).replace(De.PCT_ENCODED,ue).replace(Oe.scheme?De.NOT_PATH:De.NOT_PATH_NOSCHEME,xe).replace(De.PCT_ENCODED,T)),Oe.query!==void 0&&(Oe.query=String(Oe.query).replace(De.PCT_ENCODED,ue).replace(De.NOT_QUERY,xe).replace(De.PCT_ENCODED,T)),Oe.fragment!==void 0&&(Oe.fragment=String(Oe.fragment).replace(De.PCT_ENCODED,ue).replace(De.NOT_FRAGMENT,xe).replace(De.PCT_ENCODED,T)),Oe}function Ce(Oe){return Oe.replace(/^0*(.*)/,"$1")||"0"}function ve(Oe,De){var ue=Oe.match(De.IPV4ADDRESS)||[],ke=D(ue,2),Fe=ke[1];return Fe?Fe.split(".").map(Ce).join("."):Oe}function Be(Oe,De){var ue=Oe.match(De.IPV6ADDRESS)||[],ke=D(ue,3),Fe=ke[1],Ue=ke[2];if(Fe){for(var ze=Fe.toLowerCase().split("::").reverse(),Ye=D(ze,2),rt=Ye[0],at=Ye[1],ct=at?at.split(":").map(Ce):[],st=rt.split(":").map(Ce),lt=De.IPV4ADDRESS.test(st[st.length-1]),ht=lt?7:8,bt=st.length-ht,Et=Array(ht),gt=0;gt<ht;++gt)Et[gt]=ct[gt]||st[bt+gt]||"";lt&&(Et[ht-1]=ve(Et[ht-1],De));var wt=Et.reduce(function(Xt,Zt,Wt){if(!Zt||Zt==="0"){var yt=Xt[Xt.length-1];yt&&yt.index+yt.length===Wt?yt.length++:Xt.push({index:Wt,length:1})}return Xt},[]),Dt=wt.sort(function(Xt,Zt){return Zt.length-Xt.length})[0],Ft=void 0;if(Dt&&Dt.length>1){var Kt=Et.slice(0,Dt.index),Ut=Et.slice(Dt.index+Dt.length);Ft=Kt.join(":")+"::"+Ut.join(":")}else Ft=Et.join(":");return Ue&&(Ft+="%"+Ue),Ft}else return Oe}var me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ie="".match(/(){0}/)[1]===void 0;function Ve(Oe){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue={},ke=De.iri!==!1?O:M;De.reference==="suffix"&&(Oe=(De.scheme?De.scheme+":":"")+"//"+Oe);var Fe=Oe.match(me);if(Fe){Ie?(ue.scheme=Fe[1],ue.userinfo=Fe[3],ue.host=Fe[4],ue.port=parseInt(Fe[5],10),ue.path=Fe[6]||"",ue.query=Fe[7],ue.fragment=Fe[8],isNaN(ue.port)&&(ue.port=Fe[5])):(ue.scheme=Fe[1]||void 0,ue.userinfo=Oe.indexOf("@")!==-1?Fe[3]:void 0,ue.host=Oe.indexOf("//")!==-1?Fe[4]:void 0,ue.port=parseInt(Fe[5],10),ue.path=Fe[6]||"",ue.query=Oe.indexOf("?")!==-1?Fe[7]:void 0,ue.fragment=Oe.indexOf("#")!==-1?Fe[8]:void 0,isNaN(ue.port)&&(ue.port=Oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Fe[4]:void 0)),ue.host&&(ue.host=Be(ve(ue.host,ke),ke)),ue.scheme===void 0&&ue.userinfo===void 0&&ue.host===void 0&&ue.port===void 0&&!ue.path&&ue.query===void 0?ue.reference="same-document":ue.scheme===void 0?ue.reference="relative":ue.fragment===void 0?ue.reference="absolute":ue.reference="uri",De.reference&&De.reference!=="suffix"&&De.reference!==ue.reference&&(ue.error=ue.error||"URI is not a "+De.reference+" reference.");var Ue=we[(De.scheme||ue.scheme||"").toLowerCase()];if(!De.unicodeSupport&&(!Ue||!Ue.unicodeSupport)){if(ue.host&&(De.domainHost||Ue&&Ue.domainHost))try{ue.host=Se.toASCII(ue.host.replace(ke.PCT_ENCODED,Ee).toLowerCase())}catch(ze){ue.error=ue.error||"Host's domain name can not be converted to ASCII via punycode: "+ze}ye(ue,M)}else ye(ue,ke);Ue&&Ue.parse&&Ue.parse(ue,De)}else ue.error=ue.error||"URI can not be parsed.";return ue}function Me(Oe,De){var ue=De.iri!==!1?O:M,ke=[];return Oe.userinfo!==void 0&&(ke.push(Oe.userinfo),ke.push("@")),Oe.host!==void 0&&ke.push(Be(ve(String(Oe.host),ue),ue).replace(ue.IPV6ADDRESS,function(Fe,Ue,ze){return"["+Ue+(ze?"%25"+ze:"")+"]"})),(typeof Oe.port=="number"||typeof Oe.port=="string")&&(ke.push(":"),ke.push(String(Oe.port))),ke.length?ke.join(""):void 0}var Ne=/^\.\.?\//,Pe=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,We=/^\/?(?:.|\n)*?(?=\/|$)/;function Ke(Oe){for(var De=[];Oe.length;)if(Oe.match(Ne))Oe=Oe.replace(Ne,"");else if(Oe.match(Pe))Oe=Oe.replace(Pe,"/");else if(Oe.match(He))Oe=Oe.replace(He,"/"),De.pop();else if(Oe==="."||Oe==="..")Oe="";else{var ue=Oe.match(We);if(ue){var ke=ue[0];Oe=Oe.slice(ke.length),De.push(ke)}else throw new Error("Unexpected dot segment condition")}return De.join("")}function Ge(Oe){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=De.iri?O:M,ke=[],Fe=we[(De.scheme||Oe.scheme||"").toLowerCase()];if(Fe&&Fe.serialize&&Fe.serialize(Oe,De),Oe.host&&!ue.IPV6ADDRESS.test(Oe.host)){if(De.domainHost||Fe&&Fe.domainHost)try{Oe.host=De.iri?Se.toUnicode(Oe.host):Se.toASCII(Oe.host.replace(ue.PCT_ENCODED,Ee).toLowerCase())}catch(Ye){Oe.error=Oe.error||"Host's domain name can not be converted to "+(De.iri?"Unicode":"ASCII")+" via punycode: "+Ye}}ye(Oe,ue),De.reference!=="suffix"&&Oe.scheme&&(ke.push(Oe.scheme),ke.push(":"));var Ue=Me(Oe,De);if(Ue!==void 0&&(De.reference!=="suffix"&&ke.push("//"),ke.push(Ue),Oe.path&&Oe.path.charAt(0)!=="/"&&ke.push("/")),Oe.path!==void 0){var ze=Oe.path;!De.absolutePath&&(!Fe||!Fe.absolutePath)&&(ze=Ke(ze)),Ue===void 0&&(ze=ze.replace(/^\/\//,"/%2F")),ke.push(ze)}return Oe.query!==void 0&&(ke.push("?"),ke.push(Oe.query)),Oe.fragment!==void 0&&(ke.push("#"),ke.push(Oe.fragment)),ke.join("")}function nt(Oe,De){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=arguments[3],Fe={};return ke||(Oe=Ve(Ge(Oe,ue),ue),De=Ve(Ge(De,ue),ue)),ue=ue||{},!ue.tolerant&&De.scheme?(Fe.scheme=De.scheme,Fe.userinfo=De.userinfo,Fe.host=De.host,Fe.port=De.port,Fe.path=Ke(De.path||""),Fe.query=De.query):(De.userinfo!==void 0||De.host!==void 0||De.port!==void 0?(Fe.userinfo=De.userinfo,Fe.host=De.host,Fe.port=De.port,Fe.path=Ke(De.path||""),Fe.query=De.query):(De.path?(De.path.charAt(0)==="/"?Fe.path=Ke(De.path):((Oe.userinfo!==void 0||Oe.host!==void 0||Oe.port!==void 0)&&!Oe.path?Fe.path="/"+De.path:Oe.path?Fe.path=Oe.path.slice(0,Oe.path.lastIndexOf("/")+1)+De.path:Fe.path=De.path,Fe.path=Ke(Fe.path)),Fe.query=De.query):(Fe.path=Oe.path,De.query!==void 0?Fe.query=De.query:Fe.query=Oe.query),Fe.userinfo=Oe.userinfo,Fe.host=Oe.host,Fe.port=Oe.port),Fe.scheme=Oe.scheme),Fe.fragment=De.fragment,Fe}function ot(Oe,De,ue){var ke=B({scheme:"null"},ue);return Ge(nt(Ve(Oe,ke),Ve(De,ke),ke,!0),ke)}function Ze(Oe,De){return typeof Oe=="string"?Oe=Ge(Ve(Oe,De),De):C(Oe)==="object"&&(Oe=Ve(Ge(Oe,De),De)),Oe}function Re(Oe,De,ue){return typeof Oe=="string"?Oe=Ge(Ve(Oe,ue),ue):C(Oe)==="object"&&(Oe=Ge(Oe,ue)),typeof De=="string"?De=Ge(Ve(De,ue),ue):C(De)==="object"&&(De=Ge(De,ue)),Oe===De}function be(Oe,De){return Oe&&Oe.toString().replace(!De||!De.iri?M.ESCAPE:O.ESCAPE,xe)}function Ae(Oe,De){return Oe&&Oe.toString().replace(!De||!De.iri?M.PCT_ENCODED:O.PCT_ENCODED,Ee)}var Le={scheme:"http",domainHost:!0,parse:function(De,ue){return De.host||(De.error=De.error||"HTTP URIs must have a host."),De},serialize:function(De,ue){var ke=String(De.scheme).toLowerCase()==="https";return(De.port===(ke?443:80)||De.port==="")&&(De.port=void 0),De.path||(De.path="/"),De}},Xe={scheme:"https",domainHost:Le.domainHost,parse:Le.parse,serialize:Le.serialize};function Qe(Oe){return typeof Oe.secure=="boolean"?Oe.secure:String(Oe.scheme).toLowerCase()==="wss"}var et={scheme:"ws",domainHost:!0,parse:function(De,ue){var ke=De;return ke.secure=Qe(ke),ke.resourceName=(ke.path||"/")+(ke.query?"?"+ke.query:""),ke.path=void 0,ke.query=void 0,ke},serialize:function(De,ue){if((De.port===(Qe(De)?443:80)||De.port==="")&&(De.port=void 0),typeof De.secure=="boolean"&&(De.scheme=De.secure?"wss":"ws",De.secure=void 0),De.resourceName){var ke=De.resourceName.split("?"),Fe=D(ke,2),Ue=Fe[0],ze=Fe[1];De.path=Ue&&Ue!=="/"?Ue:void 0,De.query=ze,De.resourceName=void 0}return De.fragment=void 0,De}},St={scheme:"wss",domainHost:et.domainHost,parse:et.parse,serialize:et.serialize},mt={},dt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",jt="[0-9A-Fa-f]",Ct=S(S("%[EFef]"+jt+"%"+jt+jt+"%"+jt+jt)+"|"+S("%[89A-Fa-f]"+jt+"%"+jt+jt)+"|"+S("%"+jt+jt)),Rt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ur="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Gt=E(ur,'[\\"\\\\]'),Nt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",er=new RegExp(dt,"g"),Mt=new RegExp(Ct,"g"),kt=new RegExp(E("[^]",Rt,"[\\.]",'[\\"]',Gt),"g"),tr=new RegExp(E("[^]",dt,Nt),"g"),Vt=tr;function Bt(Oe){var De=Ee(Oe);return De.match(er)?De:Oe}var ar={scheme:"mailto",parse:function(De,ue){var ke=De,Fe=ke.to=ke.path?ke.path.split(","):[];if(ke.path=void 0,ke.query){for(var Ue=!1,ze={},Ye=ke.query.split("&"),rt=0,at=Ye.length;rt<at;++rt){var ct=Ye[rt].split("=");switch(ct[0]){case"to":for(var st=ct[1].split(","),lt=0,ht=st.length;lt<ht;++lt)Fe.push(st[lt]);break;case"subject":ke.subject=Ae(ct[1],ue);break;case"body":ke.body=Ae(ct[1],ue);break;default:Ue=!0,ze[Ae(ct[0],ue)]=Ae(ct[1],ue);break}}Ue&&(ke.headers=ze)}ke.query=void 0;for(var bt=0,Et=Fe.length;bt<Et;++bt){var gt=Fe[bt].split("@");if(gt[0]=Ae(gt[0]),ue.unicodeSupport)gt[1]=Ae(gt[1],ue).toLowerCase();else try{gt[1]=Se.toASCII(Ae(gt[1],ue).toLowerCase())}catch(wt){ke.error=ke.error||"Email address's domain name can not be converted to ASCII via punycode: "+wt}Fe[bt]=gt.join("@")}return ke},serialize:function(De,ue){var ke=De,Fe=A(De.to);if(Fe){for(var Ue=0,ze=Fe.length;Ue<ze;++Ue){var Ye=String(Fe[Ue]),rt=Ye.lastIndexOf("@"),at=Ye.slice(0,rt).replace(Mt,Bt).replace(Mt,T).replace(kt,xe),ct=Ye.slice(rt+1);try{ct=ue.iri?Se.toUnicode(ct):Se.toASCII(Ae(ct,ue).toLowerCase())}catch(bt){ke.error=ke.error||"Email address's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+bt}Fe[Ue]=at+"@"+ct}ke.path=Fe.join(",")}var st=De.headers=De.headers||{};De.subject&&(st.subject=De.subject),De.body&&(st.body=De.body);var lt=[];for(var ht in st)st[ht]!==mt[ht]&&lt.push(ht.replace(Mt,Bt).replace(Mt,T).replace(tr,xe)+"="+st[ht].replace(Mt,Bt).replace(Mt,T).replace(Vt,xe));return lt.length&&(ke.query=lt.join("&")),ke}},qt=/^([^\:]+)\:(.*)/,Tt={scheme:"urn",parse:function(De,ue){var ke=De.path&&De.path.match(qt),Fe=De;if(ke){var Ue=ue.scheme||Fe.scheme||"urn",ze=ke[1].toLowerCase(),Ye=ke[2],rt=Ue+":"+(ue.nid||ze),at=we[rt];Fe.nid=ze,Fe.nss=Ye,Fe.path=void 0,at&&(Fe=at.parse(Fe,ue))}else Fe.error=Fe.error||"URN can not be parsed.";return Fe},serialize:function(De,ue){var ke=ue.scheme||De.scheme||"urn",Fe=De.nid,Ue=ke+":"+(ue.nid||Fe),ze=we[Ue];ze&&(De=ze.serialize(De,ue));var Ye=De,rt=De.nss;return Ye.path=(Fe||ue.nid)+":"+rt,Ye}},ir=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,qe={scheme:"urn:uuid",parse:function(De,ue){var ke=De;return ke.uuid=ke.nss,ke.nss=void 0,!ue.tolerant&&(!ke.uuid||!ke.uuid.match(ir))&&(ke.error=ke.error||"UUID is not valid."),ke},serialize:function(De,ue){var ke=De;return ke.nss=(De.uuid||"").toLowerCase(),ke}};we[Le.scheme]=Le,we[Xe.scheme]=Xe,we[et.scheme]=et,we[St.scheme]=St,we[ar.scheme]=ar,we[Tt.scheme]=Tt,we[qe.scheme]=qe,x.SCHEMES=we,x.pctEncChar=xe,x.pctDecChars=Ee,x.parse=Ve,x.removeDotSegments=Ke,x.serialize=Ge,x.resolveComponents=nt,x.resolve=ot,x.normalize=Ze,x.equal=Re,x.escapeComponent=be,x.unescapeComponent=Ae,Object.defineProperty(x,"__esModule",{value:!0})})})(uri_all,uri_all.exports);var uri_allExports=uri_all.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_allExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var _=validate;Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return _.KeywordCxt}});var x=codegen;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return x._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return x.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return x.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return x.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return x.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return x.CodeGen}});const E=validation_error,S=ref_error,C=rules,T=compile,A=codegen,B=resolve$1,I=dataType,M=util,O=require$$9,D=uri$1,L=(ie,G)=>new RegExp(ie,G);L.code="new RegExp";const V=["removeAdditional","useDefaults","coerceTypes"],U=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),q={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},H={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},W=200;function Q(ie){var G,j,ee,pe,he,Se,we,xe,Ee,ye,Ce,ve,Be,me,Ie,Ve,Me,Ne,Pe,He,We,Ke,Ge,nt,ot;const Ze=ie.strict,Re=(G=ie.code)===null||G===void 0?void 0:G.optimize,be=Re===!0||Re===void 0?1:Re||0,Ae=(ee=(j=ie.code)===null||j===void 0?void 0:j.regExp)!==null&&ee!==void 0?ee:L,Le=(pe=ie.uriResolver)!==null&&pe!==void 0?pe:D.default;return{strictSchema:(Se=(he=ie.strictSchema)!==null&&he!==void 0?he:Ze)!==null&&Se!==void 0?Se:!0,strictNumbers:(xe=(we=ie.strictNumbers)!==null&&we!==void 0?we:Ze)!==null&&xe!==void 0?xe:!0,strictTypes:(ye=(Ee=ie.strictTypes)!==null&&Ee!==void 0?Ee:Ze)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ce=ie.strictTuples)!==null&&Ce!==void 0?Ce:Ze)!==null&&ve!==void 0?ve:"log",strictRequired:(me=(Be=ie.strictRequired)!==null&&Be!==void 0?Be:Ze)!==null&&me!==void 0?me:!1,code:ie.code?{...ie.code,optimize:be,regExp:Ae}:{optimize:be,regExp:Ae},loopRequired:(Ie=ie.loopRequired)!==null&&Ie!==void 0?Ie:W,loopEnum:(Ve=ie.loopEnum)!==null&&Ve!==void 0?Ve:W,meta:(Me=ie.meta)!==null&&Me!==void 0?Me:!0,messages:(Ne=ie.messages)!==null&&Ne!==void 0?Ne:!0,inlineRefs:(Pe=ie.inlineRefs)!==null&&Pe!==void 0?Pe:!0,schemaId:(He=ie.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(We=ie.addUsedSchema)!==null&&We!==void 0?We:!0,validateSchema:(Ke=ie.validateSchema)!==null&&Ke!==void 0?Ke:!0,validateFormats:(Ge=ie.validateFormats)!==null&&Ge!==void 0?Ge:!0,unicodeRegExp:(nt=ie.unicodeRegExp)!==null&&nt!==void 0?nt:!0,int32range:(ot=ie.int32range)!==null&&ot!==void 0?ot:!0,uriResolver:Le}}class re{constructor(G={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,G=this.opts={...G,...Q(G)};const{es5:j,lines:ee}=this.opts.code;this.scope=new A.ValueScope({scope:{},prefixes:U,es5:j,lines:ee}),this.logger=ae(G.logger);const pe=G.validateFormats;G.validateFormats=!1,this.RULES=(0,C.getRules)(),ce.call(this,q,G,"NOT SUPPORTED"),ce.call(this,H,G,"DEPRECATED","warn"),this._metaOpts=$e.call(this),G.formats&&fe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),G.keywords&&ge.call(this,G.keywords),typeof G.meta=="object"&&this.addMetaSchema(G.meta),Y.call(this),G.validateFormats=pe}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:G,meta:j,schemaId:ee}=this.opts;let pe=O;ee==="id"&&(pe={...O},pe.id=pe.$id,delete pe.$id),j&&G&&this.addMetaSchema(pe,pe[ee],!1)}defaultMeta(){const{meta:G,schemaId:j}=this.opts;return this.opts.defaultMeta=typeof G=="object"?G[j]||G:void 0}validate(G,j){let ee;if(typeof G=="string"){if(ee=this.getSchema(G),!ee)throw new Error(`no schema with key or ref "${G}"`)}else ee=this.compile(G);const pe=ee(j);return"$async"in ee||(this.errors=ee.errors),pe}compile(G,j){const ee=this._addSchema(G,j);return ee.validate||this._compileSchemaEnv(ee)}compileAsync(G,j){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ee}=this.opts;return pe.call(this,G,j);async function pe(ye,Ce){await he.call(this,ye.$schema);const ve=this._addSchema(ye,Ce);return ve.validate||Se.call(this,ve)}async function he(ye){ye&&!this.getSchema(ye)&&await pe.call(this,{$ref:ye},!0)}async function Se(ye){try{return this._compileSchemaEnv(ye)}catch(Ce){if(!(Ce instanceof S.default))throw Ce;return we.call(this,Ce),await xe.call(this,Ce.missingSchema),Se.call(this,ye)}}function we({missingSchema:ye,missingRef:Ce}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ce} cannot be resolved`)}async function xe(ye){const Ce=await Ee.call(this,ye);this.refs[ye]||await he.call(this,Ce.$schema),this.refs[ye]||this.addSchema(Ce,ye,j)}async function Ee(ye){const Ce=this._loading[ye];if(Ce)return Ce;try{return await(this._loading[ye]=ee(ye))}finally{delete this._loading[ye]}}}addSchema(G,j,ee,pe=this.opts.validateSchema){if(Array.isArray(G)){for(const Se of G)this.addSchema(Se,void 0,ee,pe);return this}let he;if(typeof G=="object"){const{schemaId:Se}=this.opts;if(he=G[Se],he!==void 0&&typeof he!="string")throw new Error(`schema ${Se} must be string`)}return j=(0,B.normalizeId)(j||he),this._checkUnique(j),this.schemas[j]=this._addSchema(G,ee,j,pe,!0),this}addMetaSchema(G,j,ee=this.opts.validateSchema){return this.addSchema(G,j,!0,ee),this}validateSchema(G,j){if(typeof G=="boolean")return!0;let ee;if(ee=G.$schema,ee!==void 0&&typeof ee!="string")throw new Error("$schema must be a string");if(ee=ee||this.opts.defaultMeta||this.defaultMeta(),!ee)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const pe=this.validate(ee,G);if(!pe&&j){const he="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(he);else throw new Error(he)}return pe}getSchema(G){let j;for(;typeof(j=ne.call(this,G))=="string";)G=j;if(j===void 0){const{schemaId:ee}=this.opts,pe=new T.SchemaEnv({schema:{},schemaId:ee});if(j=T.resolveSchema.call(this,pe,G),!j)return;this.refs[G]=j}return j.validate||this._compileSchemaEnv(j)}removeSchema(G){if(G instanceof RegExp)return this._removeAllSchemas(this.schemas,G),this._removeAllSchemas(this.refs,G),this;switch(typeof G){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const j=ne.call(this,G);return typeof j=="object"&&this._cache.delete(j.schema),delete this.schemas[G],delete this.refs[G],this}case"object":{const j=G;this._cache.delete(j);let ee=G[this.opts.schemaId];return ee&&(ee=(0,B.normalizeId)(ee),delete this.schemas[ee],delete this.refs[ee]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(G){for(const j of G)this.addKeyword(j);return this}addKeyword(G,j){let ee;if(typeof G=="string")ee=G,typeof j=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),j.keyword=ee);else if(typeof G=="object"&&j===void 0){if(j=G,ee=j.keyword,Array.isArray(ee)&&!ee.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(F.call(this,ee,j),!j)return(0,M.eachItem)(ee,he=>z.call(this,he)),this;te.call(this,j);const pe={...j,type:(0,I.getJSONTypes)(j.type),schemaType:(0,I.getJSONTypes)(j.schemaType)};return(0,M.eachItem)(ee,pe.type.length===0?he=>z.call(this,he,pe):he=>pe.type.forEach(Se=>z.call(this,he,pe,Se))),this}getKeyword(G){const j=this.RULES.all[G];return typeof j=="object"?j.definition:!!j}removeKeyword(G){const{RULES:j}=this;delete j.keywords[G],delete j.all[G];for(const ee of j.rules){const pe=ee.rules.findIndex(he=>he.keyword===G);pe>=0&&ee.rules.splice(pe,1)}return this}addFormat(G,j){return typeof j=="string"&&(j=new RegExp(j)),this.formats[G]=j,this}errorsText(G=this.errors,{separator:j=", ",dataVar:ee="data"}={}){return!G||G.length===0?"No errors":G.map(pe=>`${ee}${pe.instancePath} ${pe.message}`).reduce((pe,he)=>pe+j+he)}$dataMetaSchema(G,j){const ee=this.RULES.all;G=JSON.parse(JSON.stringify(G));for(const pe of j){const he=pe.split("/").slice(1);let Se=G;for(const we of he)Se=Se[we];for(const we in ee){const xe=ee[we];if(typeof xe!="object")continue;const{$data:Ee}=xe.definition,ye=Se[we];Ee&&ye&&(Se[we]=oe(ye))}}return G}_removeAllSchemas(G,j){for(const ee in G){const pe=G[ee];(!j||j.test(ee))&&(typeof pe=="string"?delete G[ee]:pe&&!pe.meta&&(this._cache.delete(pe.schema),delete G[ee]))}}_addSchema(G,j,ee,pe=this.opts.validateSchema,he=this.opts.addUsedSchema){let Se;const{schemaId:we}=this.opts;if(typeof G=="object")Se=G[we];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof G!="boolean")throw new Error("schema must be object or boolean")}let xe=this._cache.get(G);if(xe!==void 0)return xe;ee=(0,B.normalizeId)(Se||ee);const Ee=B.getSchemaRefs.call(this,G,ee);return xe=new T.SchemaEnv({schema:G,schemaId:we,meta:j,baseId:ee,localRefs:Ee}),this._cache.set(xe.schema,xe),he&&!ee.startsWith("#")&&(ee&&this._checkUnique(ee),this.refs[ee]=xe),pe&&this.validateSchema(G,!0),xe}_checkUnique(G){if(this.schemas[G]||this.refs[G])throw new Error(`schema with key or id "${G}" already exists`)}_compileSchemaEnv(G){if(G.meta?this._compileMetaSchema(G):T.compileSchema.call(this,G),!G.validate)throw new Error("ajv implementation error");return G.validate}_compileMetaSchema(G){const j=this.opts;this.opts=this._metaOpts;try{T.compileSchema.call(this,G)}finally{this.opts=j}}}n.default=re,re.ValidationError=E.default,re.MissingRefError=S.default;function ce(ie,G,j,ee="error"){for(const pe in ie){const he=pe;he in G&&this.logger[ee](`${j}: option ${pe}. ${ie[he]}`)}}function ne(ie){return ie=(0,B.normalizeId)(ie),this.schemas[ie]||this.refs[ie]}function Y(){const ie=this.opts.schemas;if(ie)if(Array.isArray(ie))this.addSchema(ie);else for(const G in ie)this.addSchema(ie[G],G)}function fe(){for(const ie in this.opts.formats){const G=this.opts.formats[ie];G&&this.addFormat(ie,G)}}function ge(ie){if(Array.isArray(ie)){this.addVocabulary(ie);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const G in ie){const j=ie[G];j.keyword||(j.keyword=G),this.addKeyword(j)}}function $e(){const ie={...this.opts};for(const G of V)delete ie[G];return ie}const _e={log(){},warn(){},error(){}};function ae(ie){if(ie===!1)return _e;if(ie===void 0)return console;if(ie.log&&ie.warn&&ie.error)return ie;throw new Error("logger must implement log, warn and error methods")}const X=/^[a-z_$][a-z0-9_$:-]*$/i;function F(ie,G){const{RULES:j}=this;if((0,M.eachItem)(ie,ee=>{if(j.keywords[ee])throw new Error(`Keyword ${ee} is already defined`);if(!X.test(ee))throw new Error(`Keyword ${ee} has invalid name`)}),!!G&&G.$data&&!("code"in G||"validate"in G))throw new Error('$data keyword must have "code" or "validate" function')}function z(ie,G,j){var ee;const pe=G?.post;if(j&&pe)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:he}=this;let Se=pe?he.post:he.rules.find(({type:xe})=>xe===j);if(Se||(Se={type:j,rules:[]},he.rules.push(Se)),he.keywords[ie]=!0,!G)return;const we={keyword:ie,definition:{...G,type:(0,I.getJSONTypes)(G.type),schemaType:(0,I.getJSONTypes)(G.schemaType)}};G.before?J.call(this,Se,we,G.before):Se.rules.push(we),he.all[ie]=we,(ee=G.implements)===null||ee===void 0||ee.forEach(xe=>this.addKeyword(xe))}function J(ie,G,j){const ee=ie.rules.findIndex(pe=>pe.keyword===j);ee>=0?ie.rules.splice(ee,0,G):(ie.rules.push(G),this.logger.warn(`rule ${j} is not defined`))}function te(ie){let{metaSchema:G}=ie;G!==void 0&&(ie.$data&&this.opts.$data&&(G=oe(G)),ie.validateSchema=this.compile(G,!0))}const se={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(ie){return{anyOf:[ie,se]}}})(core$3);var draft7={},core$2={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(n){const{gen:_,schema:x,it:E}=n,{baseId:S,schemaEnv:C,validateName:T,opts:A,self:B}=E,{root:I}=C;if((x==="#"||x==="#/")&&S===I.baseId)return O();const M=compile_1$1.resolveRef.call(B,I,S,x);if(M===void 0)throw new ref_error_1.default(E.opts.uriResolver,S,x);if(M instanceof compile_1$1.SchemaEnv)return D(M);return L(M);function O(){if(C===I)return callRef(n,T,C,C.$async);const V=_.scopeValue("root",{ref:I});return callRef(n,(0,codegen_1$l._)`${V}.validate`,I,I.$async)}function D(V){const U=getValidate(n,V);callRef(n,U,V,V.$async)}function L(V){const U=_.scopeValue("schema",A.code.source===!0?{ref:V,code:(0,codegen_1$l.stringify)(V)}:{ref:V}),q=_.name("valid"),H=n.subschema({schema:V,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:U,errSchemaPath:x},q);n.mergeEvaluated(H),n.ok(q)}}};function getValidate(n,_){const{gen:x}=n;return _.validate?x.scopeValue("validate",{ref:_.validate}):(0,codegen_1$l._)`${x.scopeValue("wrapper",{ref:_})}.validate`}ref.getValidate=getValidate;function callRef(n,_,x,E){const{gen:S,it:C}=n,{allErrors:T,schemaEnv:A,opts:B}=C,I=B.passContext?names_1$1.default.this:codegen_1$l.nil;E?M():O();function M(){if(!A.$async)throw new Error("async schema referenced by sync schema");const V=S.let("valid");S.try(()=>{S.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(n,_,I)}`),L(_),T||S.assign(V,!0)},U=>{S.if((0,codegen_1$l._)`!(${U} instanceof ${C.ValidationError})`,()=>S.throw(U)),D(U),T||S.assign(V,!1)}),n.ok(V)}function O(){n.result((0,code_1$8.callValidateCode)(n,_,I),()=>L(_),()=>D(_))}function D(V){const U=(0,codegen_1$l._)`${V}.errors`;S.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${U} : ${names_1$1.default.vErrors}.concat(${U})`),S.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function L(V){var U;if(!C.opts.unevaluated)return;const q=(U=x?.validate)===null||U===void 0?void 0:U.evaluated;if(C.props!==!0)if(q&&!q.dynamicProps)q.props!==void 0&&(C.props=util_1$j.mergeEvaluated.props(S,q.props,C.props));else{const H=S.var("props",(0,codegen_1$l._)`${V}.evaluated.props`);C.props=util_1$j.mergeEvaluated.props(S,H,C.props,codegen_1$l.Name)}if(C.items!==!0)if(q&&!q.dynamicItems)q.items!==void 0&&(C.items=util_1$j.mergeEvaluated.items(S,q.items,C.items));else{const H=S.var("items",(0,codegen_1$l._)`${V}.evaluated.items`);C.items=util_1$j.mergeEvaluated.items(S,H,C.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$2,"__esModule",{value:!0});const id_1=id,ref_1=ref,core$1=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$2.default=core$1;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:n,schemaCode:_})=>(0,codegen_1$k.str)`must be ${KWDs[n].okStr} ${_}`,params:({keyword:n,schemaCode:_})=>(0,codegen_1$k._)`{comparison: ${KWDs[n].okStr}, limit: ${_}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(n){const{keyword:_,data:x,schemaCode:E}=n;n.fail$data((0,codegen_1$k._)`${x} ${KWDs[_].fail} ${E} || isNaN(${x})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:n})=>(0,codegen_1$j.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,codegen_1$j._)`{multipleOf: ${n}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(n){const{gen:_,data:x,schemaCode:E,it:S}=n,C=S.opts.multipleOfPrecision,T=_.let("res"),A=C?(0,codegen_1$j._)`Math.abs(Math.round(${T}) - ${T}) > 1e-${C}`:(0,codegen_1$j._)`${T} !== parseInt(${T})`;n.fail$data((0,codegen_1$j._)`(${E} === 0 || (${T} = ${x}/${E}, ${A}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(n){const _=n.length;let x=0,E=0,S;for(;E<_;)x++,S=n.charCodeAt(E++),S>=55296&&S<=56319&&E<_&&(S=n.charCodeAt(E),(S&64512)===56320&&E++);return x}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message({keyword:n,schemaCode:_}){const x=n==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${x} than ${_} characters`},params:({schemaCode:n})=>(0,codegen_1$i._)`{limit: ${n}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(n){const{keyword:_,data:x,schemaCode:E,it:S}=n,C=_==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,T=S.opts.unicode===!1?(0,codegen_1$i._)`${x}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(n.gen,ucs2length_1.default)}(${x})`;n.fail$data((0,codegen_1$i._)`${T} ${C} ${E}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$f={message:({schemaCode:n})=>(0,codegen_1$h.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,codegen_1$h._)`{pattern: ${n}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(n){const{data:_,$data:x,schema:E,schemaCode:S,it:C}=n,T=C.opts.unicodeRegExp?"u":"",A=x?(0,codegen_1$h._)`(new RegExp(${S}, ${T}))`:(0,code_1$7.usePattern)(n,E);n.fail$data((0,codegen_1$h._)`!${A}.test(${_})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:n,schemaCode:_}){const x=n==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${x} than ${_} properties`},params:({schemaCode:n})=>(0,codegen_1$g._)`{limit: ${n}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(n){const{keyword:_,data:x,schemaCode:E}=n,S=_==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;n.fail$data((0,codegen_1$g._)`Object.keys(${x}).length ${S} ${E}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:({params:{missingProperty:n}})=>(0,codegen_1$f.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,codegen_1$f._)`{missingProperty: ${n}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(n){const{gen:_,schema:x,schemaCode:E,data:S,$data:C,it:T}=n,{opts:A}=T;if(!C&&x.length===0)return;const B=x.length>=A.loopRequired;if(T.allErrors?I():M(),A.strictRequired){const L=n.parentSchema.properties,{definedProperties:V}=n.it;for(const U of x)if(L?.[U]===void 0&&!V.has(U)){const q=T.schemaEnv.baseId+T.errSchemaPath,H=`required property "${U}" is not defined at "${q}" (strictRequired)`;(0,util_1$h.checkStrictMode)(T,H,T.opts.strictRequired)}}function I(){if(B||C)n.block$data(codegen_1$f.nil,O);else for(const L of x)(0,code_1$6.checkReportMissingProp)(n,L)}function M(){const L=_.let("missing");if(B||C){const V=_.let("valid",!0);n.block$data(V,()=>D(L,V)),n.ok(V)}else _.if((0,code_1$6.checkMissingProp)(n,x,L)),(0,code_1$6.reportMissingProp)(n,L),_.else()}function O(){_.forOf("prop",E,L=>{n.setParams({missingProperty:L}),_.if((0,code_1$6.noPropertyInData)(_,S,L,A.ownProperties),()=>n.error())})}function D(L,V){n.setParams({missingProperty:L}),_.forOf(L,E,()=>{_.assign(V,(0,code_1$6.propertyInData)(_,S,L,A.ownProperties)),_.if((0,codegen_1$f.not)(V),()=>{n.error(),_.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:n,schemaCode:_}){const x=n==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${x} than ${_} items`},params:({schemaCode:n})=>(0,codegen_1$e._)`{limit: ${n}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(n){const{keyword:_,data:x,schemaCode:E}=n,S=_==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;n.fail$data((0,codegen_1$e._)`${x}.length ${S} ${E}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:({params:{i:n,j:_}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${_} and ${n} are identical)`,params:({params:{i:n,j:_}})=>(0,codegen_1$d._)`{i: ${n}, j: ${_}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(n){const{gen:_,data:x,$data:E,schema:S,parentSchema:C,schemaCode:T,it:A}=n;if(!E&&!S)return;const B=_.let("valid"),I=C.items?(0,dataType_1.getSchemaTypes)(C.items):[];n.block$data(B,M,(0,codegen_1$d._)`${T} === false`),n.ok(B);function M(){const V=_.let("i",(0,codegen_1$d._)`${x}.length`),U=_.let("j");n.setParams({i:V,j:U}),_.assign(B,!0),_.if((0,codegen_1$d._)`${V} > 1`,()=>(O()?D:L)(V,U))}function O(){return I.length>0&&!I.some(V=>V==="object"||V==="array")}function D(V,U){const q=_.name("item"),H=(0,dataType_1.checkDataTypes)(I,q,A.opts.strictNumbers,dataType_1.DataType.Wrong),W=_.const("indices",(0,codegen_1$d._)`{}`);_.for((0,codegen_1$d._)`;${V}--;`,()=>{_.let(q,(0,codegen_1$d._)`${x}[${V}]`),_.if(H,(0,codegen_1$d._)`continue`),I.length>1&&_.if((0,codegen_1$d._)`typeof ${q} == "string"`,(0,codegen_1$d._)`${q} += "_"`),_.if((0,codegen_1$d._)`typeof ${W}[${q}] == "number"`,()=>{_.assign(U,(0,codegen_1$d._)`${W}[${q}]`),n.error(),_.assign(B,!1).break()}).code((0,codegen_1$d._)`${W}[${q}] = ${V}`)})}function L(V,U){const q=(0,util_1$g.useFunc)(_,equal_1$2.default),H=_.name("outer");_.label(H).for((0,codegen_1$d._)`;${V}--;`,()=>_.for((0,codegen_1$d._)`${U} = ${V}; ${U}--;`,()=>_.if((0,codegen_1$d._)`${q}(${x}[${V}], ${x}[${U}])`,()=>{n.error(),_.assign(B,!1).break(H)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:n})=>(0,codegen_1$c._)`{allowedValue: ${n}}`},def$i={keyword:"const",$data:!0,error:error$a,code(n){const{gen:_,data:x,$data:E,schemaCode:S,schema:C}=n;E||C&&typeof C=="object"?n.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(_,equal_1$1.default)}(${x}, ${S})`):n.fail((0,codegen_1$c._)`${C} !== ${x}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,codegen_1$b._)`{allowedValues: ${n}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(n){const{gen:_,data:x,$data:E,schema:S,schemaCode:C,it:T}=n;if(!E&&S.length===0)throw new Error("enum must have non-empty array");const A=S.length>=T.opts.loopEnum;let B;const I=()=>B??(B=(0,util_1$e.useFunc)(_,equal_1.default));let M;if(A||E)M=_.let("valid"),n.block$data(M,O);else{if(!Array.isArray(S))throw new Error("ajv implementation error");const L=_.const("vSchema",C);M=(0,codegen_1$b.or)(...S.map((V,U)=>D(L,U)))}n.pass(M);function O(){_.assign(M,!1),_.forOf("v",C,L=>_.if((0,codegen_1$b._)`${I()}(${x}, ${L})`,()=>_.assign(M,!0).break()))}function D(L,V){const U=S[V];return typeof U=="object"&&U!==null?(0,codegen_1$b._)`${I()}(${x}, ${L}[${V}])`:(0,codegen_1$b._)`${x} === ${U}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$8={message:({params:{len:n}})=>(0,codegen_1$a.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,codegen_1$a._)`{limit: ${n}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(n){const{parentSchema:_,it:x}=n,{items:E}=_;if(!Array.isArray(E)){(0,util_1$d.checkStrictMode)(x,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(n,E)}};function validateAdditionalItems(n,_){const{gen:x,schema:E,data:S,keyword:C,it:T}=n;T.items=!0;const A=x.const("len",(0,codegen_1$a._)`${S}.length`);if(E===!1)n.setParams({len:_.length}),n.pass((0,codegen_1$a._)`${A} <= ${_.length}`);else if(typeof E=="object"&&!(0,util_1$d.alwaysValidSchema)(T,E)){const I=x.var("valid",(0,codegen_1$a._)`${A} <= ${_.length}`);x.if((0,codegen_1$a.not)(I),()=>B(I)),n.ok(I)}function B(I){x.forRange("i",_.length,A,M=>{n.subschema({keyword:C,dataProp:M,dataPropType:util_1$d.Type.Num},I),T.allErrors||x.if((0,codegen_1$a.not)(I),()=>x.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){const{schema:_,it:x}=n;if(Array.isArray(_))return validateTuple(n,"additionalItems",_);x.items=!0,!(0,util_1$c.alwaysValidSchema)(x,_)&&n.ok((0,code_1$5.validateArray)(n))}};function validateTuple(n,_,x=n.schema){const{gen:E,parentSchema:S,data:C,keyword:T,it:A}=n;M(S),A.opts.unevaluated&&x.length&&A.items!==!0&&(A.items=util_1$c.mergeEvaluated.items(E,x.length,A.items));const B=E.name("valid"),I=E.const("len",(0,codegen_1$9._)`${C}.length`);x.forEach((O,D)=>{(0,util_1$c.alwaysValidSchema)(A,O)||(E.if((0,codegen_1$9._)`${I} > ${D}`,()=>n.subschema({keyword:T,schemaProp:D,dataProp:D},B)),n.ok(B))});function M(O){const{opts:D,errSchemaPath:L}=A,V=x.length,U=V===O.minItems&&(V===O.maxItems||O[_]===!1);if(D.strictTuples&&!U){const q=`"${T}" is ${V}-tuple, but minItems or maxItems/${_} are not specified or different at path "${L}"`;(0,util_1$c.checkStrictMode)(A,q,D.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,items_1$1.validateTuple)(n,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:({params:{len:n}})=>(0,codegen_1$8.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,codegen_1$8._)`{limit: ${n}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(n){const{schema:_,parentSchema:x,it:E}=n,{prefixItems:S}=x;E.items=!0,!(0,util_1$b.alwaysValidSchema)(E,_)&&(S?(0,additionalItems_1$1.validateAdditionalItems)(n,S):n.ok((0,code_1$4.validateArray)(n)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$6={message:({params:{min:n,max:_}})=>_===void 0?(0,codegen_1$7.str)`must contain at least ${n} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${n} and no more than ${_} valid item(s)`,params:({params:{min:n,max:_}})=>_===void 0?(0,codegen_1$7._)`{minContains: ${n}}`:(0,codegen_1$7._)`{minContains: ${n}, maxContains: ${_}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(n){const{gen:_,schema:x,parentSchema:E,data:S,it:C}=n;let T,A;const{minContains:B,maxContains:I}=E;C.opts.next?(T=B===void 0?1:B,A=I):T=1;const M=_.const("len",(0,codegen_1$7._)`${S}.length`);if(n.setParams({min:T,max:A}),A===void 0&&T===0){(0,util_1$a.checkStrictMode)(C,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(A!==void 0&&T>A){(0,util_1$a.checkStrictMode)(C,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,util_1$a.alwaysValidSchema)(C,x)){let U=(0,codegen_1$7._)`${M} >= ${T}`;A!==void 0&&(U=(0,codegen_1$7._)`${U} && ${M} <= ${A}`),n.pass(U);return}C.items=!0;const O=_.name("valid");A===void 0&&T===1?L(O,()=>_.if(O,()=>_.break())):T===0?(_.let(O,!0),A!==void 0&&_.if((0,codegen_1$7._)`${S}.length > 0`,D)):(_.let(O,!1),D()),n.result(O,()=>n.reset());function D(){const U=_.name("_valid"),q=_.let("count",0);L(U,()=>_.if(U,()=>V(q)))}function L(U,q){_.forRange("i",0,M,H=>{n.subschema({keyword:"contains",dataProp:H,dataPropType:util_1$a.Type.Num,compositeRule:!0},U),q()})}function V(U){_.code((0,codegen_1$7._)`${U}++`),A===void 0?_.if((0,codegen_1$7._)`${U} >= ${T}`,()=>_.assign(O,!0).break()):(_.if((0,codegen_1$7._)`${U} > ${A}`,()=>_.assign(O,!1).break()),T===1?_.assign(O,!0):_.if((0,codegen_1$7._)`${U} >= ${T}`,()=>_.assign(O,!0)))}}};contains.default=def$c;var dependencies={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const _=codegen,x=util,E=code;n.error={message:({params:{property:B,depsCount:I,deps:M}})=>{const O=I===1?"property":"properties";return(0,_.str)`must have ${O} ${M} when property ${B} is present`},params:({params:{property:B,depsCount:I,deps:M,missingProperty:O}})=>(0,_._)`{property: ${B},
    missingProperty: ${O},
    depsCount: ${I},
    deps: ${M}}`};const S={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(B){const[I,M]=C(B);T(B,I),A(B,M)}};function C({schema:B}){const I={},M={};for(const O in B){if(O==="__proto__")continue;const D=Array.isArray(B[O])?I:M;D[O]=B[O]}return[I,M]}function T(B,I=B.schema){const{gen:M,data:O,it:D}=B;if(Object.keys(I).length===0)return;const L=M.let("missing");for(const V in I){const U=I[V];if(U.length===0)continue;const q=(0,E.propertyInData)(M,O,V,D.opts.ownProperties);B.setParams({property:V,depsCount:U.length,deps:U.join(", ")}),D.allErrors?M.if(q,()=>{for(const H of U)(0,E.checkReportMissingProp)(B,H)}):(M.if((0,_._)`${q} && (${(0,E.checkMissingProp)(B,U,L)})`),(0,E.reportMissingProp)(B,L),M.else())}}n.validatePropertyDeps=T;function A(B,I=B.schema){const{gen:M,data:O,keyword:D,it:L}=B,V=M.name("valid");for(const U in I)(0,x.alwaysValidSchema)(L,I[U])||(M.if((0,E.propertyInData)(M,O,U,L.opts.ownProperties),()=>{const q=B.subschema({keyword:D,schemaProp:U},V);B.mergeValidEvaluated(q,V)},()=>M.var(V,!0)),B.ok(V))}n.validateSchemaDeps=A,n.default=S})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:({params:n})=>(0,codegen_1$6._)`{propertyName: ${n.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(n){const{gen:_,schema:x,data:E,it:S}=n;if((0,util_1$9.alwaysValidSchema)(S,x))return;const C=_.name("valid");_.forIn("key",E,T=>{n.setParams({propertyName:T}),n.subschema({keyword:"propertyNames",data:T,dataTypes:["string"],propertyName:T,compositeRule:!0},C),_.if((0,codegen_1$6.not)(C),()=>{n.error(!0),S.allErrors||_.break()})}),n.ok(C)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:({params:n})=>(0,codegen_1$5._)`{additionalProperty: ${n.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(n){const{gen:_,schema:x,parentSchema:E,data:S,errsCount:C,it:T}=n;if(!C)throw new Error("ajv implementation error");const{allErrors:A,opts:B}=T;if(T.props=!0,B.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(T,x))return;const I=(0,code_1$3.allSchemaProperties)(E.properties),M=(0,code_1$3.allSchemaProperties)(E.patternProperties);O(),n.ok((0,codegen_1$5._)`${C} === ${names_1.default.errors}`);function O(){_.forIn("key",S,q=>{!I.length&&!M.length?V(q):_.if(D(q),()=>V(q))})}function D(q){let H;if(I.length>8){const W=(0,util_1$8.schemaRefOrVal)(T,E.properties,"properties");H=(0,code_1$3.isOwnProperty)(_,W,q)}else I.length?H=(0,codegen_1$5.or)(...I.map(W=>(0,codegen_1$5._)`${q} === ${W}`)):H=codegen_1$5.nil;return M.length&&(H=(0,codegen_1$5.or)(H,...M.map(W=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(n,W)}.test(${q})`))),(0,codegen_1$5.not)(H)}function L(q){_.code((0,codegen_1$5._)`delete ${S}[${q}]`)}function V(q){if(B.removeAdditional==="all"||B.removeAdditional&&x===!1){L(q);return}if(x===!1){n.setParams({additionalProperty:q}),n.error(),A||_.break();return}if(typeof x=="object"&&!(0,util_1$8.alwaysValidSchema)(T,x)){const H=_.name("valid");B.removeAdditional==="failing"?(U(q,H,!1),_.if((0,codegen_1$5.not)(H),()=>{n.reset(),L(q)})):(U(q,H),A||_.if((0,codegen_1$5.not)(H),()=>_.break()))}}function U(q,H,W){const Q={keyword:"additionalProperties",dataProp:q,dataPropType:util_1$8.Type.Str};W===!1&&Object.assign(Q,{compositeRule:!0,createErrors:!1,allErrors:!1}),n.subschema(Q,H)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(n){const{gen:_,schema:x,parentSchema:E,data:S,it:C}=n;C.opts.removeAdditional==="all"&&E.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(C,additionalProperties_1$1.default,"additionalProperties"));const T=(0,code_1$2.allSchemaProperties)(x);for(const O of T)C.definedProperties.add(O);C.opts.unevaluated&&T.length&&C.props!==!0&&(C.props=util_1$7.mergeEvaluated.props(_,(0,util_1$7.toHash)(T),C.props));const A=T.filter(O=>!(0,util_1$7.alwaysValidSchema)(C,x[O]));if(A.length===0)return;const B=_.name("valid");for(const O of A)I(O)?M(O):(_.if((0,code_1$2.propertyInData)(_,S,O,C.opts.ownProperties)),M(O),C.allErrors||_.else().var(B,!0),_.endIf()),n.it.definedProperties.add(O),n.ok(B);function I(O){return C.opts.useDefaults&&!C.compositeRule&&x[O].default!==void 0}function M(O){n.subschema({keyword:"properties",schemaProp:O,dataProp:O},B)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(n){const{gen:_,schema:x,data:E,parentSchema:S,it:C}=n,{opts:T}=C,A=(0,code_1$1.allSchemaProperties)(x),B=A.filter(U=>(0,util_1$6.alwaysValidSchema)(C,x[U]));if(A.length===0||B.length===A.length&&(!C.opts.unevaluated||C.props===!0))return;const I=T.strictSchema&&!T.allowMatchingProperties&&S.properties,M=_.name("valid");C.props!==!0&&!(C.props instanceof codegen_1$4.Name)&&(C.props=(0,util_2.evaluatedPropsToName)(_,C.props));const{props:O}=C;D();function D(){for(const U of A)I&&L(U),C.allErrors?V(U):(_.var(M,!0),V(U),_.if(M))}function L(U){for(const q in I)new RegExp(U).test(q)&&(0,util_1$6.checkStrictMode)(C,`property ${q} matches pattern ${U} (use allowMatchingProperties)`)}function V(U){_.forIn("key",E,q=>{_.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(n,U)}.test(${q})`,()=>{const H=B.includes(U);H||n.subschema({keyword:"patternProperties",schemaProp:U,dataProp:q,dataPropType:util_2.Type.Str},M),C.opts.unevaluated&&O!==!0?_.assign((0,codegen_1$4._)`${O}[${q}]`,!0):!H&&!C.allErrors&&_.if((0,codegen_1$4.not)(M),()=>_.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:_,schema:x,it:E}=n;if((0,util_1$5.alwaysValidSchema)(E,x)){n.fail();return}const S=_.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},S),n.failResult(S,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:({params:n})=>(0,codegen_1$3._)`{passingSchemas: ${n.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(n){const{gen:_,schema:x,parentSchema:E,it:S}=n;if(!Array.isArray(x))throw new Error("ajv implementation error");if(S.opts.discriminator&&E.discriminator)return;const C=x,T=_.let("valid",!1),A=_.let("passing",null),B=_.name("_valid");n.setParams({passing:A}),_.block(I),n.result(T,()=>n.reset(),()=>n.error(!0));function I(){C.forEach((M,O)=>{let D;(0,util_1$4.alwaysValidSchema)(S,M)?_.var(B,!0):D=n.subschema({keyword:"oneOf",schemaProp:O,compositeRule:!0},B),O>0&&_.if((0,codegen_1$3._)`${B} && ${T}`).assign(T,!1).assign(A,(0,codegen_1$3._)`[${A}, ${O}]`).else(),_.if(B,()=>{_.assign(T,!0),_.assign(A,O),D&&n.mergeEvaluated(D,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(n){const{gen:_,schema:x,it:E}=n;if(!Array.isArray(x))throw new Error("ajv implementation error");const S=_.name("valid");x.forEach((C,T)=>{if((0,util_1$3.alwaysValidSchema)(E,C))return;const A=n.subschema({keyword:"allOf",schemaProp:T},S);n.ok(S),n.mergeEvaluated(A)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$2={message:({params:n})=>(0,codegen_1$2.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,codegen_1$2._)`{failingKeyword: ${n.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(n){const{gen:_,parentSchema:x,it:E}=n;x.then===void 0&&x.else===void 0&&(0,util_1$2.checkStrictMode)(E,'"if" without "then" and "else" is ignored');const S=hasSchema(E,"then"),C=hasSchema(E,"else");if(!S&&!C)return;const T=_.let("valid",!0),A=_.name("_valid");if(B(),n.reset(),S&&C){const M=_.let("ifClause");n.setParams({ifClause:M}),_.if(A,I("then",M),I("else",M))}else S?_.if(A,I("then")):_.if((0,codegen_1$2.not)(A),I("else"));n.pass(T,()=>n.error(!0));function B(){const M=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},A);n.mergeEvaluated(M)}function I(M,O){return()=>{const D=n.subschema({keyword:M},A);_.assign(T,A),n.mergeValidEvaluated(D,T),O?_.assign(O,(0,codegen_1$2._)`${M}`):n.setParams({ifClause:M})}}}};function hasSchema(n,_){const x=n.schema[_];return x!==void 0&&!(0,util_1$2.alwaysValidSchema)(n,x)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:_,it:x}){_.if===void 0&&(0,util_1$1.checkStrictMode)(x,`"${n}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(n=!1){const _=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return n?_.push(prefixItems_1.default,items2020_1.default):_.push(additionalItems_1.default,items_1.default),_.push(contains_1.default),_}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:n})=>(0,codegen_1$1.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,codegen_1$1._)`{format: ${n}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(n,_){const{gen:x,data:E,$data:S,schema:C,schemaCode:T,it:A}=n,{opts:B,errSchemaPath:I,schemaEnv:M,self:O}=A;if(!B.validateFormats)return;S?D():L();function D(){const V=x.scopeValue("formats",{ref:O.formats,code:B.code.formats}),U=x.const("fDef",(0,codegen_1$1._)`${V}[${T}]`),q=x.let("fType"),H=x.let("format");x.if((0,codegen_1$1._)`typeof ${U} == "object" && !(${U} instanceof RegExp)`,()=>x.assign(q,(0,codegen_1$1._)`${U}.type || "string"`).assign(H,(0,codegen_1$1._)`${U}.validate`),()=>x.assign(q,(0,codegen_1$1._)`"string"`).assign(H,U)),n.fail$data((0,codegen_1$1.or)(W(),Q()));function W(){return B.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${T} && !${H}`}function Q(){const re=M.$async?(0,codegen_1$1._)`(${U}.async ? await ${H}(${E}) : ${H}(${E}))`:(0,codegen_1$1._)`${H}(${E})`,ce=(0,codegen_1$1._)`(typeof ${H} == "function" ? ${re} : ${H}.test(${E}))`;return(0,codegen_1$1._)`${H} && ${H} !== true && ${q} === ${_} && !${ce}`}}function L(){const V=O.formats[C];if(!V){W();return}if(V===!0)return;const[U,q,H]=Q(V);U===_&&n.pass(re());function W(){if(B.strictSchema===!1){O.logger.warn(ce());return}throw new Error(ce());function ce(){return`unknown format "${C}" ignored in schema at path "${I}"`}}function Q(ce){const ne=ce instanceof RegExp?(0,codegen_1$1.regexpCode)(ce):B.code.formats?(0,codegen_1$1._)`${B.code.formats}${(0,codegen_1$1.getProperty)(C)}`:void 0,Y=x.scopeValue("formats",{key:C,ref:ce,code:ne});return typeof ce=="object"&&!(ce instanceof RegExp)?[ce.type||"string",ce.validate,(0,codegen_1$1._)`${Y}.validate`]:["string",ce,Y]}function re(){if(typeof V=="object"&&!(V instanceof RegExp)&&V.async){if(!M.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${H}(${E})`}return typeof q=="function"?(0,codegen_1$1._)`${H}(${E})`:(0,codegen_1$1._)`${H}.test(${E})`}}}};format$1.default=def$1;Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$2,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DiscrError=void 0,function(_){_.Tag="tag",_.Mapping="mapping"}(n.DiscrError||(n.DiscrError={}))})(types);Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types,compile_1=compile,util_1=util,error={message:({params:{discrError:n,tagName:_}})=>n===types_1.DiscrError.Tag?`tag "${_}" must be string`:`value of tag "${_}" must be in oneOf`,params:({params:{discrError:n,tag:_,tagName:x}})=>(0,codegen_1._)`{error: ${n}, tag: ${x}, tagValue: ${_}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(n){const{gen:_,data:x,schema:E,parentSchema:S,it:C}=n,{oneOf:T}=S;if(!C.opts.discriminator)throw new Error("discriminator: requires discriminator option");const A=E.propertyName;if(typeof A!="string")throw new Error("discriminator: requires propertyName");if(E.mapping)throw new Error("discriminator: mapping is not supported");if(!T)throw new Error("discriminator: requires oneOf keyword");const B=_.let("valid",!1),I=_.const("tag",(0,codegen_1._)`${x}${(0,codegen_1.getProperty)(A)}`);_.if((0,codegen_1._)`typeof ${I} == "string"`,()=>M(),()=>n.error(!1,{discrError:types_1.DiscrError.Tag,tag:I,tagName:A})),n.ok(B);function M(){const L=D();_.if(!1);for(const V in L)_.elseIf((0,codegen_1._)`${I} === ${V}`),_.assign(B,O(L[V]));_.else(),n.error(!1,{discrError:types_1.DiscrError.Mapping,tag:I,tagName:A}),_.endIf()}function O(L){const V=_.name("valid"),U=n.subschema({keyword:"oneOf",schemaProp:L},V);return n.mergeEvaluated(U,codegen_1.Name),V}function D(){var L;const V={},U=H(S);let q=!0;for(let re=0;re<T.length;re++){let ce=T[re];ce?.$ref&&!(0,util_1.schemaHasRulesButRef)(ce,C.self.RULES)&&(ce=compile_1.resolveRef.call(C.self,C.schemaEnv.root,C.baseId,ce?.$ref),ce instanceof compile_1.SchemaEnv&&(ce=ce.schema));const ne=(L=ce?.properties)===null||L===void 0?void 0:L[A];if(typeof ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${A}"`);q=q&&(U||H(ce)),W(ne,re)}if(!q)throw new Error(`discriminator: "${A}" must be required`);return V;function H({required:re}){return Array.isArray(re)&&re.includes(A)}function W(re,ce){if(re.const)Q(re.const,ce);else if(re.enum)for(const ne of re.enum)Q(ne,ce);else throw new Error(`discriminator: "properties/${A}" must have "const" or "enum"`)}function Q(re,ce){if(typeof re!="string"||re in V)throw new Error(`discriminator: "${A}" values must be unique strings`);V[re]=ce}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$1=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type:type$1,properties,default:!0};(function(n,_){Object.defineProperty(_,"__esModule",{value:!0}),_.MissingRefError=_.ValidationError=_.CodeGen=_.Name=_.nil=_.stringify=_.str=_._=_.KeywordCxt=void 0;const x=core$3,E=draft7,S=discriminator,C=require$$3,T=["/properties"],A="http://json-schema.org/draft-07/schema";class B extends x.default{_addVocabularies(){super._addVocabularies(),E.default.forEach(V=>this.addVocabulary(V)),this.opts.discriminator&&this.addKeyword(S.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const V=this.opts.$data?this.$dataMetaSchema(C,T):C;this.addMetaSchema(V,A,!1),this.refs["http://json-schema.org/schema"]=A}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(A)?A:void 0)}}n.exports=_=B,Object.defineProperty(_,"__esModule",{value:!0}),_.default=B;var I=validate;Object.defineProperty(_,"KeywordCxt",{enumerable:!0,get:function(){return I.KeywordCxt}});var M=codegen;Object.defineProperty(_,"_",{enumerable:!0,get:function(){return M._}}),Object.defineProperty(_,"str",{enumerable:!0,get:function(){return M.str}}),Object.defineProperty(_,"stringify",{enumerable:!0,get:function(){return M.stringify}}),Object.defineProperty(_,"nil",{enumerable:!0,get:function(){return M.nil}}),Object.defineProperty(_,"Name",{enumerable:!0,get:function(){return M.Name}}),Object.defineProperty(_,"CodeGen",{enumerable:!0,get:function(){return M.CodeGen}});var O=validation_error;Object.defineProperty(_,"ValidationError",{enumerable:!0,get:function(){return O.default}});var D=ref_error;Object.defineProperty(_,"MissingRefError",{enumerable:!0,get:function(){return D.default}})})(ajv$1,ajv$1.exports);var ajvExports=ajv$1.exports;const Ajv=getDefaultExportFromCjs(ajvExports);class e{constructor(_){this.queue=void 0,this.maxConcurrent=void 0,this.count=void 0,this.queue=[],this.maxConcurrent=_,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(_=>this.queue.push(_))}release(){const _=this.queue.shift();_?setTimeout(_,0):this.count--}}const t="_default";class s{constructor(_=1){this.semaphoreInstances=void 0,this.maxConcurrent=void 0,this.semaphoreInstances={},this.maxConcurrent=_}hasSemaphoreInstance(_=t){return!!this.semaphoreInstances[_]}getSemaphoreInstance(_=t){return this.hasSemaphoreInstance(_)||(this.semaphoreInstances[_]=new e(this.maxConcurrent)),this.semaphoreInstances[_]}tidy(_=t){this.hasSemaphoreInstance(_)&&this.getSemaphoreInstance(_).count==0&&delete this.semaphoreInstances[_]}canAcquire(_=t){return this.getSemaphoreInstance(_).canAcquire}acquire(_=t){return this.getSemaphoreInstance(_).acquire()}release(_=t){this.getSemaphoreInstance(_).release(),this.tidy(_)}count(_=t){return this.hasSemaphoreInstance(_)?this.getSemaphoreInstance(_).count:0}hasTasks(_=t){return this.count(_)>0}async request(_,x=t){try{return await this.acquire(x),await _()}finally{this.release(x)}}async requestIfAvailable(_,x=t){return this.canAcquire(x)?this.request(_,x):null}}const ajv=new Ajv;async function initOrbite({sfip:n,dossierOrbite:_}){let x=_;if(isElectronMain||isNode){const E=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);x=_||E.join(".","orbite")}else x=_||"./orbite";return await OrbitDB.createInstance(n,{directory:x,AccessControllers:AccessControllers$1})}function vrifierTypesBdOrbite({bd:n,schma:_}){return _?n.type==="feed"?validerTypesListeOrbite({bd:n,schma:_}):n.type==="keyvalue"?validerTypesDicOrbite({bd:n,schma:_}):n:n}const validerTypesListeOrbite=({bd:n,schma:_})=>{const x=ajv.compile(_),E=S=>x(S)?!0:(console.error(S,JSON.stringify(x.errors,void 0,2)),!1);return new Proxy(n,{get(S,C){return C==="all"?S[C].filter(T=>E(T.payload.value)):C==="add"?async T=>{if(E(T))return await S.add(T);throw new Error(T.toString()+JSON.stringify(x.errors,void 0,2))}:C==="get"?T=>{const A=S.get(T);if(E(A.payload.value))return A;throw new Error(JSON.stringify(x.errors,void 0,2))}:C==="iterator"?T=>{const A=S.iterator(T);return{*[Symbol.iterator](){for(const I of A)E(I.payload.value)&&(yield I)},next(){let I=A.next();for(;!E(I.value.payload.value);){if(I.done)return{done:!0};I=A.next()}return I},collect(){return A.collect().filter(I=>E(I.payload.value))}}}:S[C]}})},validerTypesDicOrbite=({bd:n,schma:_})=>{const x=ajv.compile(_),E=A=>{if(A===!0)return()=>!0;if(A.nullable){const B=ajv.compile(A);return I=>B(I===void 0?null:I)}else return ajv.compile(A)},S=Object.fromEntries(Object.entries(_.properties||{}).map(([A,B])=>[A,E(B)])),C=_.additionalProperties?E(_.additionalProperties):()=>!1,T=(A,B)=>(B?S[B]||C:x)(A);return new Proxy(n,{get(A,B){if(B==="get")return I=>{const M=A.get(I);if(M===void 0||T(M,I))return M};if(B==="put"||B==="set")return async(I,M,O)=>{if(T(M,I))return await A.put(I,M,O);throw new Error(S[I]?JSON.stringify(S[I].errors,void 0,2):`Clef ${I} non supporte.`)};if(B==="all"){const I=A.all;if(T(I))return I;throw new Error(JSON.stringify(x.errors,void 0,2))}else return A[B]}})};class GestionnaireOrbite{constructor(_){$t(this,"orbite");$t(this,"_bdsOrbite");$t(this,"verrouOuvertureBd");$t(this,"_oublierNettoyageBdsOuvertes");this.orbite=_,this._bdsOrbite={},this.verrouOuvertureBd=new s,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes()}get identity(){return this.orbite.identity}async ouvrirBd({id:_,type:x,schma:E}){if(!adresseOrbiteValide(_))throw new Error(`Adresse "${_}" non valide.`);const S=B=>{const{type:I}=B;return x===void 0||I==="keyvalue"&&x==="kvstore"?!0:I===x};await this.verrouOuvertureBd.acquire(_);const C=this._bdsOrbite[_],T=v4(),A=async()=>{this._bdsOrbite[_]&&this._bdsOrbite[_].idsRequtes.delete(T)};if(C){if(this._bdsOrbite[_].idsRequtes.add(T),this.verrouOuvertureBd.release(_),!S(C.bd))throw new Error(`La bd est de type ${C.bd.type}, et non ${x}.`);return C.bd.type==="feed"?{bd:vrifierTypesBdOrbite({bd:C.bd,schma:E}),fOublier:A}:{bd:vrifierTypesBdOrbite({bd:C.bd,schma:E}),fOublier:A}}try{const B=await this.orbite.open(_);if(this._bdsOrbite[_]={bd:B,idsRequtes:new Set([T])},await B.load(),this.verrouOuvertureBd.release(_),!S(B))throw console.error(new Error(`La bd est de type ${B.type}, et non ${x}.`).stack),new Error(`La bd est de type ${B.type}, et non ${x}.`);return{bd:B.type==="feed"?vrifierTypesBdOrbite({bd:B,schma:E}):vrifierTypesBdOrbite({bd:B,schma:E}),fOublier:A}}catch(B){throw console.error(B.toString()),B}}async crerBdIndpendante({type:_,optionsAccs:x,nom:E}){const S={accessController:x},C=await this.orbite[_](E||v4(),S);await C.load();const{id:T}=C;return this._bdsOrbite[T]={bd:C,idsRequtes:new Set},T}async effacerBd({id:_}){const{bd:x}=await this.ouvrirBd({id:_});await x.drop(),delete this._bdsOrbite[_]}lancerNettoyageBdsOuvertes(){const x=setInterval(async()=>{await Promise.all(Object.keys(this._bdsOrbite).map(async E=>{const{bd:S,idsRequtes:C}=this._bdsOrbite[E];C.size||(delete this._bdsOrbite[E],await S.close())}))},3e5);return async()=>clearInterval(x)}async fermer({arrterOrbite:_}){this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),_&&await this.orbite.stop()}}class GestionnaireOrbiteGnral{constructor(){$t(this,"gestionnaires");this.gestionnaires={}}obtGestionnaireOrbite({orbite:_}){return this.gestionnaires[_.identity.id]||(this.gestionnaires[_.identity.id]=new GestionnaireOrbite(_)),this.gestionnaires[_.identity.id]}async fermer({orbite:_,arrterOrbite:x}){await this.obtGestionnaireOrbite({orbite:_}).fermer({arrterOrbite:x}),delete this.gestionnaires[_.identity.id]}}const gestionnaireOrbiteGnral=new GestionnaireOrbiteGnral,orbite=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite,GestionnaireOrbiteGnral,default:initOrbite,gestionnaireOrbiteGnral,vrifierTypesBdOrbite},Symbol.toStringTag,{value:"Module"})),vnementsSuiviBd=["ready","write","replicated"],suivreBdAccs=async(n,_)=>{const x=async()=>{const S=n.iterator({limit:-1}).collect().map(C=>C.payload.value);await _(S)};n.events.setMaxListeners(100);for(const S of vnementsSuiviBd)n.events.on(S,x);return await x(),async()=>{vnementsSuiviBd.forEach(S=>{n.events.off(S,x)})}};class AccsUtilisateur extends eventsExports.EventEmitter{constructor(x,E){super();$t(this,"orbite");$t(this,"idBd");$t(this,"idBdAccs");$t(this,"bdAccs");$t(this,"fOublierBd");$t(this,"oublierSuivi");$t(this,"autoriss");$t(this,"accs");$t(this,"idRequte");$t(this,"prt");this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:x}),this.idBd=E,this.autoriss=[],this.idRequte=v4(),this.prt=!1}async initialiser(){const{bd:x,fOublier:E}=await this.orbite.ouvrirBd({id:this.idBd});this.fOublierBd=E,this.accs=x.access,this.bdAccs=this.accs.bd,this.idBdAccs=this.bdAccs.id,this.oublierSuivi=await suivreBdAccs(this.bdAccs,async S=>{await this._miseJour(S)}),this.prt=!0}async _miseJour(x){const E=[];x=[{id:this.accs._premierMod,rle:MODRATEUR},...x],x.forEach(S=>{E.push(S.id)}),this.autoriss=E,this.emit("misJour")}async fermer(){this.oublierSuivi&&this.oublierSuivi(),await this.fOublierBd?.()}}class GestionnaireAccs extends eventsExports.EventEmitter{constructor(x){super();$t(this,"_rles");$t(this,"_rlesIdOrbite");$t(this,"_rlesUtilisateurs");$t(this,"_miseJourEnCours");$t(this,"orbite");this._rles={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesIdOrbite={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesUtilisateurs={[MODRATEUR]:{},[MEMBRE]:{}},this._miseJourEnCours=!1,this.orbite=x}async estUnMembre(x){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MEMBRE].includes(x)}async estUnModrateur(x){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MODRATEUR].includes(x)}async estAutoris(x){return await this.estUnModrateur(x)||await this.estUnMembre(x)}async ajouterlments(x){this._miseJourEnCours=!0,await Promise.all(x.map(async E=>{const{rle:S,id:C}=E;if(OrbitDB.isValidAddress(C)){if(!this._rlesUtilisateurs[S][C]){const T=new AccsUtilisateur(this.orbite,C);T.on("misJour",()=>this._mettreRlesJour()),this._rlesUtilisateurs[S][C]=T,await T.initialiser()}}else this._rlesIdOrbite[S].includes(C)||(this._rlesIdOrbite[S].push(C),this._mettreRlesJour())})),this._miseJourEnCours=!1,this._mettreRlesJour(),this.emit("misJour")}_mettreRlesJour(){const x={MODRATEUR:[],MEMBRE:[]};for(const[E,S]of Object.entries(this._rlesIdOrbite)){const C=x[E];S.forEach(T=>{C.includes(T)||C.push(T)})}for(const[E,S]of Object.entries(this._rlesUtilisateurs)){const C=x[E];Object.values(S).forEach(T=>{T.autoriss.forEach(A=>{C.includes(A)||C.push(A)})})}this._rles=x}async fermer(){const x=Object.values(this._rlesUtilisateurs).map(E=>Object.values(E)).flat();await Promise.all(x.map(E=>E.fermer()))}}const ensureAddress=n=>n.toString().split("/").pop()==="_access"?n:path.join(n,"/_access"),nomType="controlleur-constellation";class ContrleurConstellation extends AccessControllers$1.AccessController{constructor(x,E){super();$t(this,"bd");$t(this,"_gestionnaireOrbite");$t(this,"fOublierBd");$t(this,"nom");$t(this,"_orbitdb");$t(this,"_premierMod");$t(this,"_adresseBd");$t(this,"idRequte");$t(this,"gestRles");this._orbitdb=x,this._gestionnaireOrbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:x}),this._premierMod=E.premierMod,this._adresseBd=E.address,this.nom=E.nom,this.idRequte=v4(),this.gestRles=new GestionnaireAccs(this._orbitdb),this.gestRles.on("misJour",()=>this.emit("misJour"))}static get type(){return nomType}get address(){return this.bd.id}async estUnMembre(x){return await this.gestRles.estUnMembre(x)}async estUnModrateur(x){return await this.gestRles.estUnModrateur(x)}async estAutoris(x){return await this.gestRles.estAutoris(x)}async suivreUtilisateursAutoriss(x){const E=async()=>{const C=Object.keys(this.gestRles._rlesUtilisateurs[MODRATEUR]).map(I=>({idCompte:I,rle:MODRATEUR})),T=C.map(I=>I.idCompte),A=Object.keys(this.gestRles._rlesUtilisateurs[MEMBRE]).map(I=>({idCompte:I,rle:MEMBRE})).filter(I=>!T.includes(I.idCompte)),B=[...C,...A];await x(B)};return this.gestRles.on("misJour",E),await E(),async()=>{this.gestRles.off("misJour",E)}}async suivreIdsOrbiteAutorisescriture(x){const E=async()=>{await x([...this.gestRles._rles.MEMBRE,...this.gestRles._rles.MODRATEUR])};return this.gestRles.on("misJour",E),await E(),async()=>{this.gestRles.off("misJour",E)}}async canAppend(x,E){const S=async()=>await E.verifyIdentity(x.identity);return await this.estAutoris(x.identity.id)?await S():!1}async _miseJourBdAccs(){let x=this.bd.iterator({limit:-1}).collect().map(E=>E.payload.value);x=[{rle:MODRATEUR,id:this._premierMod},...x],await this.gestRles.ajouterlments(x)}async close(){await this.fOublierBd?.(),await this.gestRles.fermer()}async load(x){const E=OrbitDB.isValidAddress(x);let S;E?S=x:S=(await this._orbitdb.determineAddress(ensureAddress(x),"feed",this._createOrbitOpts(E))).toString();const{bd:C,fOublier:T}=await this._gestionnaireOrbite.ouvrirBd({id:S,type:"feed"});this.bd=C,this.fOublierBd=T,suivreBdAccs(this.bd,()=>this._miseJourBdAccs())}_createOrbitOpts(x=!1){const E={type:"controlleur-accs-constellation",premierMod:this._premierMod};return x?{}:{accessController:E}}async save(){return{address:(this._adresseBd||await this._orbitdb.determineAddress(`${this.nom}/_access`,"feed",this._createOrbitOpts())).toString(),premierMod:this._premierMod,nom:this.nom}}async grant(x,E){if(!rles.includes(x))throw new Error(`Erreur: Le rle ${x} n'existe pas.`);if(!this.gestRles._rles[x].includes(E))try{const S={rle:x,id:E};await this.bd.add(S)}catch(S){const C=S;throw C.toString().includes("not append entry")?new Error(`Erreur : Le rle ${x} ne peut pas tre octroy  ${E}.`):C}}async revoke(x,E){const S=this.bd.iterator({limit:-1}).collect().find(T=>T.payload.value.rle===x&&T.payload.value.id===E);if(!S)throw new Error(`Erreur : Le rle ${x} n'existait pas pour ${E}.`);const C=S.hash;await this.bd.remove(C)}static async create(x,E){return E.premierMod||(E.premierMod=x.identity.id),E.nom=E.nom||v4(),new ContrleurConstellation(x,E)}}const type="controlleur-accs-constellation";class ContrleurAccs extends eventsExports.EventEmitter{constructor(x,E){super();$t(this,"_premierMod");$t(this,"orbitdb");$t(this,"gestAccs");$t(this,"dernierAppel");this.orbitdb=x,this._premierMod=E.premierMod,this.gestAccs=new GestionnaireAccs(this.orbitdb),this.dernierAppel=Date.now()}static get type(){return type}async estUnModrateurPatient(x){return await this.gestAccs.estUnModrateur(x)?!0:new Promise(S=>{const C=()=>{setTimeout(async()=>{await this.gestAccs.estUnModrateur(x)?S(!0):Date.now()-this.dernierAppel>1e3?S(!1):C()},100)};C()})}get premierMod(){return this._premierMod}async canAppend(x,E){const S=x.identity.id,{rle:C,id:T}=x.payload.value,A=this.estUnModrateurPatient(S),B=rles.includes(C),I=async()=>E.verifyIdentity(x.identity);return B&&await A&&await I()?(C===MODRATEUR&&(await this.gestAccs.ajouterlments([{id:T,rle:MODRATEUR}]),this.dernierAppel=Date.now()),!0):!1}async load(){await this.gestAccs.ajouterlments([{id:this._premierMod,rle:MODRATEUR}])}async save(){return{premierMod:this.premierMod}}static async create(x,E={}){const S=E.premierMod;if(!S)throw new Error("Contrle d'accs: premier modrateur requis");return new ContrleurAccs(x,{premierMod:S})}}const enregistrerContrleurs=()=>{AccessControllers$1.addAccessController({AccessController:ContrleurConstellation}),AccessControllers$1.addAccessController({AccessController:ContrleurAccs})};enregistrerContrleurs();/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(n){VALID_ANSI.indexOf(n)!=-1&&(CS2CP[0]=n)};function reset_ansi(){set_ansi(1252)}var set_cp=function(n){current_codepage=n,set_ansi(n)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(n){for(var _=[],x=0,E=n.length;x<E;++x)_[x]=n.charCodeAt(x);return _}function utf16leread(n){for(var _=[],x=0;x<n.length>>1;++x)_[x]=String.fromCharCode(n.charCodeAt(2*x)+(n.charCodeAt(2*x+1)<<8));return _.join("")}function utf16beread(n){for(var _=[],x=0;x<n.length>>1;++x)_[x]=String.fromCharCode(n.charCodeAt(2*x+1)+(n.charCodeAt(2*x)<<8));return _.join("")}var debom=function(n){var _=n.charCodeAt(0),x=n.charCodeAt(1);return _==255&&x==254?utf16leread(n.slice(2)):_==254&&x==255?utf16beread(n.slice(2)):_==65279?n.slice(1):n},_getchar=function n(_){return String.fromCharCode(_)},_getansi=function n(_){return String.fromCharCode(_)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(n){for(var _="",x=0,E=0,S=0,C=0,T=0,A=0,B=0,I=0;I<n.length;)x=n.charCodeAt(I++),C=x>>2,E=n.charCodeAt(I++),T=(x&3)<<4|E>>4,S=n.charCodeAt(I++),A=(E&15)<<2|S>>6,B=S&63,isNaN(E)?A=B=64:isNaN(S)&&(B=64),_+=Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(A)+Base64_map.charAt(B);return _}function Base64_encode_pass(n){for(var _="",x=0,E=0,S=0,C=0,T=0,A=0,B=0,I=0;I<n.length;)x=n.charCodeAt(I++),x>255&&(x=95),C=x>>2,E=n.charCodeAt(I++),E>255&&(E=95),T=(x&3)<<4|E>>4,S=n.charCodeAt(I++),S>255&&(S=95),A=(E&15)<<2|S>>6,B=S&63,isNaN(E)?A=B=64:isNaN(S)&&(B=64),_+=Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(A)+Base64_map.charAt(B);return _}function Base64_decode(n){var _="",x=0,E=0,S=0,C=0,T=0,A=0,B=0;n=n.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var I=0;I<n.length;)C=Base64_map.indexOf(n.charAt(I++)),T=Base64_map.indexOf(n.charAt(I++)),x=C<<2|T>>4,_+=String.fromCharCode(x),A=Base64_map.indexOf(n.charAt(I++)),E=(T&15)<<4|A>>2,A!==64&&(_+=String.fromCharCode(E)),B=Base64_map.indexOf(n.charAt(I++)),S=(A&3)<<6|B,B!==64&&(_+=String.fromCharCode(S));return _}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(_,x){return x?new Buffer(_,x):new Buffer(_)}:Buffer.from.bind(Buffer)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer>"u")return!1;var n=Buffer_from([65,0]);if(!n)return!1;var _=n.toString("utf16le");return _.length==1}();function new_raw_buf(n){return has_buf?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function new_unsafe_buf(n){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var s2a=function n(_){return has_buf?Buffer_from(_,"binary"):_.split("").map(function(x){return x.charCodeAt(0)&255})};function s2ab(n){if(typeof ArrayBuffer>"u")return s2a(n);for(var _=new ArrayBuffer(n.length),x=new Uint8Array(_),E=0;E!=n.length;++E)x[E]=n.charCodeAt(E)&255;return _}function a2s(n){if(Array.isArray(n))return n.map(function(E){return String.fromCharCode(E)}).join("");for(var _=[],x=0;x<n.length;++x)_[x]=String.fromCharCode(n[x]);return _.join("")}function a2u(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}function ab2a(n){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(n instanceof ArrayBuffer)return ab2a(new Uint8Array(n));for(var _=new Array(n.length),x=0;x<n.length;++x)_[x]=n[x];return _}var bconcat=has_buf?function(n){return Buffer.concat(n.map(function(_){return Buffer.isBuffer(_)?_:Buffer_from(_)}))}:function(n){if(typeof Uint8Array<"u"){var _=0,x=0;for(_=0;_<n.length;++_)x+=n[_].length;var E=new Uint8Array(x),S=0;for(_=0,x=0;_<n.length;x+=S,++_)S=n[_].length,n[_]instanceof Uint8Array?E.set(n[_],x):typeof n[_]=="string"?E.set(new Uint8Array(s2a(n[_])),x):E.set(new Uint8Array(n[_]),x);return E}return[].concat.apply([],n.map(function(C){return Array.isArray(C)?C:[].slice.call(C)}))};function utf8decode(n){for(var _=[],x=0,E=n.length+250,S=new_raw_buf(n.length+255),C=0;C<n.length;++C){var T=n.charCodeAt(C);if(T<128)S[x++]=T;else if(T<2048)S[x++]=192|T>>6&31,S[x++]=128|T&63;else if(T>=55296&&T<57344){T=(T&1023)+64;var A=n.charCodeAt(++C)&1023;S[x++]=240|T>>8&7,S[x++]=128|T>>2&63,S[x++]=128|A>>6&15|(T&3)<<4,S[x++]=128|A&63}else S[x++]=224|T>>12&15,S[x++]=128|T>>6&63,S[x++]=128|T&63;x>E&&(_.push(S.slice(0,x)),x=0,S=new_raw_buf(65535),E=65530)}return _.push(S.slice(0,x)),bconcat(_)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(n){for(var _="",x=n.length-1;x>=0;)_+=n.charAt(x--);return _}function pad0(n,_){var x=""+n;return x.length>=_?x:fill("0",_-x.length)+x}function pad_(n,_){var x=""+n;return x.length>=_?x:fill(" ",_-x.length)+x}function rpad_(n,_){var x=""+n;return x.length>=_?x:x+fill(" ",_-x.length)}function pad0r1(n,_){var x=""+Math.round(n);return x.length>=_?x:fill("0",_-x.length)+x}function pad0r2(n,_){var x=""+n;return x.length>=_?x:fill("0",_-x.length)+x}var p2_32=Math.pow(2,32);function pad0r(n,_){if(n>p2_32||n<-p2_32)return pad0r1(n,_);var x=Math.round(n);return pad0r2(x,_)}function SSF_isgeneral(n,_){return _=_||0,n.length>=7+_&&(n.charCodeAt(_)|32)===103&&(n.charCodeAt(_+1)|32)===101&&(n.charCodeAt(_+2)|32)===110&&(n.charCodeAt(_+3)|32)===101&&(n.charCodeAt(_+4)|32)===114&&(n.charCodeAt(_+5)|32)===97&&(n.charCodeAt(_+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(n,_,x){for(var E=n<0?-1:1,S=n*E,C=0,T=1,A=0,B=1,I=0,M=0,O=Math.floor(S);I<_&&(O=Math.floor(S),A=O*T+C,M=O*I+B,!(S-O<5e-8));)S=1/(S-O),C=T,T=A,B=I,I=M;if(M>_&&(I>_?(M=B,A=C):(M=I,A=T)),!x)return[0,E*A,M];var D=Math.floor(E*A/M);return[D,E*A-D*M,M]}function SSF_parse_date_code(n,_,x){if(n>2958465||n<0)return null;var E=n|0,S=Math.floor(86400*(n-E)),C=0,T=[],A={D:E,T:S,u:86400*(n-E)-S,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(A.u)<1e-6&&(A.u=0),_&&_.date1904&&(E+=1462),A.u>.9999&&(A.u=0,++S==86400&&(A.T=S=0,++E,++A.D)),E===60)T=x?[1317,10,29]:[1900,2,29],C=3;else if(E===0)T=x?[1317,8,29]:[1900,1,0],C=6;else{E>60&&--E;var B=new Date(1900,0,1);B.setDate(B.getDate()+E-1),T=[B.getFullYear(),B.getMonth()+1,B.getDate()],C=B.getDay(),E<60&&(C=(C+6)%7),x&&(C=SSF_fix_hijri(B,T))}return A.y=T[0],A.m=T[1],A.d=T[2],A.S=S%60,S=Math.floor(S/60),A.M=S%60,S=Math.floor(S/60),A.H=S,A.q=C,A}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(n,_){var x=n.getTime();return _?x-=1461*24*60*60*1e3:n>=SSFbase1904&&(x+=24*60*60*1e3),(x-(SSFdnthresh+(n.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(n){var _=n<0?12:11,x=SSF_strip_decimal(n.toFixed(12));return x.length<=_||(x=n.toPrecision(10),x.length<=_)?x:n.toExponential(5)}function SSF_large_exp(n){var _=SSF_strip_decimal(n.toFixed(11));return _.length>(n<0?12:11)||_==="0"||_==="-0"?n.toPrecision(6):_}function SSF_general_num(n){var _=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),x;return _>=-4&&_<=-1?x=n.toPrecision(10+_):Math.abs(_)<=9?x=SSF_small_exp(n):_===10?x=n.toFixed(10).substr(0,12):x=SSF_large_exp(n),SSF_strip_decimal(SSF_normalize_exp(x.toUpperCase()))}function SSF_general(n,_){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):SSF_general_num(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return SSF_format(14,datenum_local(n,_&&_.date1904),_)}throw new Error("unsupported value in General format: "+n)}function SSF_fix_hijri(n,_){_[0]-=581;var x=n.getDay();return n<60&&(x=(x+6)%7),x}function SSF_write_date(n,_,x,E){var S="",C=0,T=0,A=x.y,B,I=0;switch(n){case 98:A=x.y+543;case 121:switch(_.length){case 1:case 2:B=A%100,I=2;break;default:B=A%1e4,I=4;break}break;case 109:switch(_.length){case 1:case 2:B=x.m,I=_.length;break;case 3:return months[x.m-1][1];case 5:return months[x.m-1][0];default:return months[x.m-1][2]}break;case 100:switch(_.length){case 1:case 2:B=x.d,I=_.length;break;case 3:return days[x.q][0];default:return days[x.q][1]}break;case 104:switch(_.length){case 1:case 2:B=1+(x.H+11)%12,I=_.length;break;default:throw"bad hour format: "+_}break;case 72:switch(_.length){case 1:case 2:B=x.H,I=_.length;break;default:throw"bad hour format: "+_}break;case 77:switch(_.length){case 1:case 2:B=x.M,I=_.length;break;default:throw"bad minute format: "+_}break;case 115:if(_!="s"&&_!="ss"&&_!=".0"&&_!=".00"&&_!=".000")throw"bad second format: "+_;return x.u===0&&(_=="s"||_=="ss")?pad0(x.S,_.length):(E>=2?T=E===3?1e3:100:T=E===1?10:1,C=Math.round(T*(x.S+x.u)),C>=60*T&&(C=0),_==="s"?C===0?"0":""+C/T:(S=pad0(C,2+E),_==="ss"?S.substr(0,2):"."+S.substr(2,_.length-1)));case 90:switch(_){case"[h]":case"[hh]":B=x.D*24+x.H;break;case"[m]":case"[mm]":B=(x.D*24+x.H)*60+x.M;break;case"[s]":case"[ss]":B=((x.D*24+x.H)*60+x.M)*60+Math.round(x.S+x.u);break;default:throw"bad abstime format: "+_}I=_.length===3?1:2;break;case 101:B=A,I=1;break}var M=I>0?pad0(B,I):"";return M}function commaify(n){var _=3;if(n.length<=_)return n;for(var x=n.length%_,E=n.substr(0,x);x!=n.length;x+=_)E+=(E.length>0?",":"")+n.substr(x,_);return E}var pct1=/%/g;function write_num_pct(n,_,x){var E=_.replace(pct1,""),S=_.length-E.length;return write_num(n,E,x*Math.pow(10,2*S))+fill("%",S)}function write_num_cm(n,_,x){for(var E=_.length-1;_.charCodeAt(E-1)===44;)--E;return write_num(n,_.substr(0,E),x/Math.pow(10,3*(_.length-E)))}function write_num_exp(n,_){var x,E=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(_==0)return"0.0E+0";if(_<0)return"-"+write_num_exp(n,-_);var S=n.indexOf(".");S===-1&&(S=n.indexOf("E"));var C=Math.floor(Math.log(_)*Math.LOG10E)%S;if(C<0&&(C+=S),x=(_/Math.pow(10,C)).toPrecision(E+1+(S+C)%S),x.indexOf("e")===-1){var T=Math.floor(Math.log(_)*Math.LOG10E);for(x.indexOf(".")===-1?x=x.charAt(0)+"."+x.substr(1)+"E+"+(T-x.length+C):x+="E+"+(T-C);x.substr(0,2)==="0.";)x=x.charAt(0)+x.substr(2,S)+"."+x.substr(2+S),x=x.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");x=x.replace(/\+-/,"-")}x=x.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(A,B,I,M){return B+I+M.substr(0,(S+C)%S)+"."+M.substr(C)+"E"})}else x=_.toExponential(E);return n.match(/E\+00$/)&&x.match(/e[+-]\d$/)&&(x=x.substr(0,x.length-1)+"0"+x.charAt(x.length-1)),n.match(/E\-/)&&x.match(/e\+/)&&(x=x.replace(/e\+/,"e")),x.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(n,_,x){var E=parseInt(n[4],10),S=Math.round(_*E),C=Math.floor(S/E),T=S-C*E,A=E;return x+(C===0?"":""+C)+" "+(T===0?fill(" ",n[1].length+1+n[4].length):pad_(T,n[1].length)+n[2]+"/"+n[3]+pad0(A,n[4].length))}function write_num_f2(n,_,x){return x+(_===0?"":""+_)+fill(" ",n[1].length+2+n[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(n){for(var _="",x,E=0;E!=n.length;++E)switch(x=n.charCodeAt(E)){case 35:break;case 63:_+=" ";break;case 48:_+="0";break;default:_+=String.fromCharCode(x)}return _}function rnd(n,_){var x=Math.pow(10,_);return""+Math.round(n*x)/x}function dec(n,_){var x=n-Math.floor(n),E=Math.pow(10,_);return _<(""+Math.round(x*E)).length?0:Math.round(x*E)}function carry(n,_){return _<(""+Math.round((n-Math.floor(n))*Math.pow(10,_))).length?1:0}function flr(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function write_num_flt(n,_,x){if(n.charCodeAt(0)===40&&!_.match(closeparen)){var E=_.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return x>=0?write_num_flt("n",E,x):"("+write_num_flt("n",E,-x)+")"}if(_.charCodeAt(_.length-1)===44)return write_num_cm(n,_,x);if(_.indexOf("%")!==-1)return write_num_pct(n,_,x);if(_.indexOf("E")!==-1)return write_num_exp(_,x);if(_.charCodeAt(0)===36)return"$"+write_num_flt(n,_.substr(_.charAt(1)==" "?2:1),x);var S,C,T,A,B=Math.abs(x),I=x<0?"-":"";if(_.match(/^00+$/))return I+pad0r(B,_.length);if(_.match(/^[#?]+$/))return S=pad0r(x,0),S==="0"&&(S=""),S.length>_.length?S:hashq(_.substr(0,_.length-S.length))+S;if(C=_.match(frac1))return write_num_f1(C,B,I);if(_.match(/^#+0+$/))return I+pad0r(B,_.length-_.indexOf("0"));if(C=_.match(dec1))return S=rnd(x,C[1].length).replace(/^([^\.]+)$/,"$1."+hashq(C[1])).replace(/\.$/,"."+hashq(C[1])).replace(/\.(\d*)$/,function(V,U){return"."+U+fill("0",hashq(C[1]).length-U.length)}),_.indexOf("0.")!==-1?S:S.replace(/^0\./,".");if(_=_.replace(/^#+([0.])/,"$1"),C=_.match(/^(0*)\.(#*)$/))return I+rnd(B,C[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,C[1].length?"0.":".");if(C=_.match(/^#{1,3},##0(\.?)$/))return I+commaify(pad0r(B,0));if(C=_.match(/^#,##0\.([#0]*0)$/))return x<0?"-"+write_num_flt(n,_,-x):commaify(""+(Math.floor(x)+carry(x,C[1].length)))+"."+pad0(dec(x,C[1].length),C[1].length);if(C=_.match(/^#,#*,#0/))return write_num_flt(n,_.replace(/^#,#*,/,""),x);if(C=_.match(/^([0#]+)(\\?-([0#]+))+$/))return S=_strrev(write_num_flt(n,_.replace(/[\\-]/g,""),x)),T=0,_strrev(_strrev(_.replace(/\\/g,"")).replace(/[0#]/g,function(V){return T<S.length?S.charAt(T++):V==="0"?"0":""}));if(_.match(phone))return S=write_num_flt(n,"##########",x),"("+S.substr(0,3)+") "+S.substr(3,3)+"-"+S.substr(6);var M="";if(C=_.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return T=Math.min(C[4].length,7),A=SSF_frac(B,Math.pow(10,T)-1,!1),S=""+I,M=write_num("n",C[1],A[1]),M.charAt(M.length-1)==" "&&(M=M.substr(0,M.length-1)+"0"),S+=M+C[2]+"/"+C[3],M=rpad_(A[2],T),M.length<C[4].length&&(M=hashq(C[4].substr(C[4].length-M.length))+M),S+=M,S;if(C=_.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return T=Math.min(Math.max(C[1].length,C[4].length),7),A=SSF_frac(B,Math.pow(10,T)-1,!0),I+(A[0]||(A[1]?"":"0"))+" "+(A[1]?pad_(A[1],T)+C[2]+"/"+C[3]+rpad_(A[2],T):fill(" ",2*T+1+C[2].length+C[3].length));if(C=_.match(/^[#0?]+$/))return S=pad0r(x,0),_.length<=S.length?S:hashq(_.substr(0,_.length-S.length))+S;if(C=_.match(/^([#0?]+)\.([#0]+)$/)){S=""+x.toFixed(Math.min(C[2].length,10)).replace(/([^0])0+$/,"$1"),T=S.indexOf(".");var O=_.indexOf(".")-T,D=_.length-S.length-O;return hashq(_.substr(0,O)+S+_.substr(_.length-D))}if(C=_.match(/^00,000\.([#0]*0)$/))return T=dec(x,C[1].length),x<0?"-"+write_num_flt(n,_,-x):commaify(flr(x)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(V){return"00,"+(V.length<3?pad0(0,3-V.length):"")+V})+"."+pad0(T,C[1].length);switch(_){case"###,##0.00":return write_num_flt(n,"#,##0.00",x);case"###,###":case"##,###":case"#,###":var L=commaify(pad0r(B,0));return L!=="0"?I+L:"";case"###,###.00":return write_num_flt(n,"###,##0.00",x).replace(/^0\./,".");case"#,###.00":return write_num_flt(n,"#,##0.00",x).replace(/^0\./,".")}throw new Error("unsupported format |"+_+"|")}function write_num_cm2(n,_,x){for(var E=_.length-1;_.charCodeAt(E-1)===44;)--E;return write_num(n,_.substr(0,E),x/Math.pow(10,3*(_.length-E)))}function write_num_pct2(n,_,x){var E=_.replace(pct1,""),S=_.length-E.length;return write_num(n,E,x*Math.pow(10,2*S))+fill("%",S)}function write_num_exp2(n,_){var x,E=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(_==0)return"0.0E+0";if(_<0)return"-"+write_num_exp2(n,-_);var S=n.indexOf(".");S===-1&&(S=n.indexOf("E"));var C=Math.floor(Math.log(_)*Math.LOG10E)%S;if(C<0&&(C+=S),x=(_/Math.pow(10,C)).toPrecision(E+1+(S+C)%S),!x.match(/[Ee]/)){var T=Math.floor(Math.log(_)*Math.LOG10E);x.indexOf(".")===-1?x=x.charAt(0)+"."+x.substr(1)+"E+"+(T-x.length+C):x+="E+"+(T-C),x=x.replace(/\+-/,"-")}x=x.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(A,B,I,M){return B+I+M.substr(0,(S+C)%S)+"."+M.substr(C)+"E"})}else x=_.toExponential(E);return n.match(/E\+00$/)&&x.match(/e[+-]\d$/)&&(x=x.substr(0,x.length-1)+"0"+x.charAt(x.length-1)),n.match(/E\-/)&&x.match(/e\+/)&&(x=x.replace(/e\+/,"e")),x.replace("e","E")}function write_num_int(n,_,x){if(n.charCodeAt(0)===40&&!_.match(closeparen)){var E=_.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return x>=0?write_num_int("n",E,x):"("+write_num_int("n",E,-x)+")"}if(_.charCodeAt(_.length-1)===44)return write_num_cm2(n,_,x);if(_.indexOf("%")!==-1)return write_num_pct2(n,_,x);if(_.indexOf("E")!==-1)return write_num_exp2(_,x);if(_.charCodeAt(0)===36)return"$"+write_num_int(n,_.substr(_.charAt(1)==" "?2:1),x);var S,C,T,A,B=Math.abs(x),I=x<0?"-":"";if(_.match(/^00+$/))return I+pad0(B,_.length);if(_.match(/^[#?]+$/))return S=""+x,x===0&&(S=""),S.length>_.length?S:hashq(_.substr(0,_.length-S.length))+S;if(C=_.match(frac1))return write_num_f2(C,B,I);if(_.match(/^#+0+$/))return I+pad0(B,_.length-_.indexOf("0"));if(C=_.match(dec1))return S=(""+x).replace(/^([^\.]+)$/,"$1."+hashq(C[1])).replace(/\.$/,"."+hashq(C[1])),S=S.replace(/\.(\d*)$/,function(V,U){return"."+U+fill("0",hashq(C[1]).length-U.length)}),_.indexOf("0.")!==-1?S:S.replace(/^0\./,".");if(_=_.replace(/^#+([0.])/,"$1"),C=_.match(/^(0*)\.(#*)$/))return I+(""+B).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,C[1].length?"0.":".");if(C=_.match(/^#{1,3},##0(\.?)$/))return I+commaify(""+B);if(C=_.match(/^#,##0\.([#0]*0)$/))return x<0?"-"+write_num_int(n,_,-x):commaify(""+x)+"."+fill("0",C[1].length);if(C=_.match(/^#,#*,#0/))return write_num_int(n,_.replace(/^#,#*,/,""),x);if(C=_.match(/^([0#]+)(\\?-([0#]+))+$/))return S=_strrev(write_num_int(n,_.replace(/[\\-]/g,""),x)),T=0,_strrev(_strrev(_.replace(/\\/g,"")).replace(/[0#]/g,function(V){return T<S.length?S.charAt(T++):V==="0"?"0":""}));if(_.match(phone))return S=write_num_int(n,"##########",x),"("+S.substr(0,3)+") "+S.substr(3,3)+"-"+S.substr(6);var M="";if(C=_.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return T=Math.min(C[4].length,7),A=SSF_frac(B,Math.pow(10,T)-1,!1),S=""+I,M=write_num("n",C[1],A[1]),M.charAt(M.length-1)==" "&&(M=M.substr(0,M.length-1)+"0"),S+=M+C[2]+"/"+C[3],M=rpad_(A[2],T),M.length<C[4].length&&(M=hashq(C[4].substr(C[4].length-M.length))+M),S+=M,S;if(C=_.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return T=Math.min(Math.max(C[1].length,C[4].length),7),A=SSF_frac(B,Math.pow(10,T)-1,!0),I+(A[0]||(A[1]?"":"0"))+" "+(A[1]?pad_(A[1],T)+C[2]+"/"+C[3]+rpad_(A[2],T):fill(" ",2*T+1+C[2].length+C[3].length));if(C=_.match(/^[#0?]+$/))return S=""+x,_.length<=S.length?S:hashq(_.substr(0,_.length-S.length))+S;if(C=_.match(/^([#0]+)\.([#0]+)$/)){S=""+x.toFixed(Math.min(C[2].length,10)).replace(/([^0])0+$/,"$1"),T=S.indexOf(".");var O=_.indexOf(".")-T,D=_.length-S.length-O;return hashq(_.substr(0,O)+S+_.substr(_.length-D))}if(C=_.match(/^00,000\.([#0]*0)$/))return x<0?"-"+write_num_int(n,_,-x):commaify(""+x).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(V){return"00,"+(V.length<3?pad0(0,3-V.length):"")+V})+"."+pad0(0,C[1].length);switch(_){case"###,###":case"##,###":case"#,###":var L=commaify(""+B);return L!=="0"?I+L:"";default:if(_.match(/\.[0#?]*$/))return write_num_int(n,_.slice(0,_.lastIndexOf(".")),x)+hashq(_.slice(_.lastIndexOf(".")))}throw new Error("unsupported format |"+_+"|")}function write_num(n,_,x){return(x|0)===x?write_num_int(n,_,x):write_num_flt(n,_,x)}function SSF_split_fmt(n){for(var _=[],x=!1,E=0,S=0;E<n.length;++E)switch(n.charCodeAt(E)){case 34:x=!x;break;case 95:case 42:case 92:++E;break;case 59:_[_.length]=n.substr(S,E-S),S=E+1}if(_[_.length]=n.substr(S),x===!0)throw new Error("Format |"+n+"| unterminated string ");return _}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(n){for(var _=0,x="",E="";_<n.length;)switch(x=n.charAt(_)){case"G":SSF_isgeneral(n,_)&&(_+=6),_++;break;case'"':for(;n.charCodeAt(++_)!==34&&_<n.length;);++_;break;case"\\":_+=2;break;case"_":_+=2;break;case"@":++_;break;case"B":case"b":if(n.charAt(_+1)==="1"||n.charAt(_+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(_,3).toUpperCase()==="A/P"||n.substr(_,5).toUpperCase()==="AM/PM"||n.substr(_,5).toUpperCase()==="/")return!0;++_;break;case"[":for(E=x;n.charAt(_++)!=="]"&&_<n.length;)E+=n.charAt(_);if(E.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;_<n.length&&("0#?.,E+-%".indexOf(x=n.charAt(++_))>-1||x=="\\"&&n.charAt(_+1)=="-"&&"0#".indexOf(n.charAt(_+2))>-1););break;case"?":for(;n.charAt(++_)===x;);break;case"*":++_,(n.charAt(_)==" "||n.charAt(_)=="*")&&++_;break;case"(":case")":++_;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;_<n.length&&"0123456789".indexOf(n.charAt(++_))>-1;);break;case" ":++_;break;default:++_;break}return!1}function eval_fmt(n,_,x,E){for(var S=[],C="",T=0,A="",B="t",I,M,O,D="H";T<n.length;)switch(A=n.charAt(T)){case"G":if(!SSF_isgeneral(n,T))throw new Error("unrecognized character "+A+" in "+n);S[S.length]={t:"G",v:"General"},T+=7;break;case'"':for(C="";(O=n.charCodeAt(++T))!==34&&T<n.length;)C+=String.fromCharCode(O);S[S.length]={t:"t",v:C},++T;break;case"\\":var L=n.charAt(++T),V=L==="("||L===")"?L:"t";S[S.length]={t:V,v:L},++T;break;case"_":S[S.length]={t:"t",v:" "},T+=2;break;case"@":S[S.length]={t:"T",v:_},++T;break;case"B":case"b":if(n.charAt(T+1)==="1"||n.charAt(T+1)==="2"){if(I==null&&(I=SSF_parse_date_code(_,x,n.charAt(T+1)==="2"),I==null))return"";S[S.length]={t:"X",v:n.substr(T,2)},B=A,T+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":A=A.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(_<0||I==null&&(I=SSF_parse_date_code(_,x),I==null))return"";for(C=A;++T<n.length&&n.charAt(T).toLowerCase()===A;)C+=A;A==="m"&&B.toLowerCase()==="h"&&(A="M"),A==="h"&&(A=D),S[S.length]={t:A,v:C},B=A;break;case"A":case"a":case"":var U={t:A,v:A};if(I==null&&(I=SSF_parse_date_code(_,x)),n.substr(T,3).toUpperCase()==="A/P"?(I!=null&&(U.v=I.H>=12?n.charAt(T+2):A),U.t="T",D="h",T+=3):n.substr(T,5).toUpperCase()==="AM/PM"?(I!=null&&(U.v=I.H>=12?"PM":"AM"),U.t="T",T+=5,D="h"):n.substr(T,5).toUpperCase()==="/"?(I!=null&&(U.v=I.H>=12?"":""),U.t="T",T+=5,D="h"):(U.t="t",++T),I==null&&U.t==="T")return"";S[S.length]=U,B=A;break;case"[":for(C=A;n.charAt(T++)!=="]"&&T<n.length;)C+=n.charAt(T);if(C.slice(-1)!=="]")throw'unterminated "[" block: |'+C+"|";if(C.match(SSF_abstime)){if(I==null&&(I=SSF_parse_date_code(_,x),I==null))return"";S[S.length]={t:"Z",v:C.toLowerCase()},B=C.charAt(1)}else C.indexOf("$")>-1&&(C=(C.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(n)||(S[S.length]={t:"t",v:C}));break;case".":if(I!=null){for(C=A;++T<n.length&&(A=n.charAt(T))==="0";)C+=A;S[S.length]={t:"s",v:C};break}case"0":case"#":for(C=A;++T<n.length&&"0#?.,E+-%".indexOf(A=n.charAt(T))>-1;)C+=A;S[S.length]={t:"n",v:C};break;case"?":for(C=A;n.charAt(++T)===A;)C+=A;S[S.length]={t:A,v:C},B=A;break;case"*":++T,(n.charAt(T)==" "||n.charAt(T)=="*")&&++T;break;case"(":case")":S[S.length]={t:E===1?"t":A,v:A},++T;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(C=A;T<n.length&&"0123456789".indexOf(n.charAt(++T))>-1;)C+=n.charAt(T);S[S.length]={t:"D",v:C};break;case" ":S[S.length]={t:A,v:A},++T;break;case"$":S[S.length]={t:"t",v:"$"},++T;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(A)===-1)throw new Error("unrecognized character "+A+" in "+n);S[S.length]={t:"t",v:A},++T;break}var q=0,H=0,W;for(T=S.length-1,B="t";T>=0;--T)switch(S[T].t){case"h":case"H":S[T].t=D,B="h",q<1&&(q=1);break;case"s":(W=S[T].v.match(/\.0+$/))&&(H=Math.max(H,W[0].length-1)),q<3&&(q=3);case"d":case"y":case"M":case"e":B=S[T].t;break;case"m":B==="s"&&(S[T].t="M",q<2&&(q=2));break;case"X":break;case"Z":q<1&&S[T].v.match(/[Hh]/)&&(q=1),q<2&&S[T].v.match(/[Mm]/)&&(q=2),q<3&&S[T].v.match(/[Ss]/)&&(q=3)}switch(q){case 0:break;case 1:I.u>=.5&&(I.u=0,++I.S),I.S>=60&&(I.S=0,++I.M),I.M>=60&&(I.M=0,++I.H);break;case 2:I.u>=.5&&(I.u=0,++I.S),I.S>=60&&(I.S=0,++I.M);break}var Q="",re;for(T=0;T<S.length;++T)switch(S[T].t){case"t":case"T":case" ":case"D":break;case"X":S[T].v="",S[T].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":S[T].v=SSF_write_date(S[T].t.charCodeAt(0),S[T].v,I,H),S[T].t="t";break;case"n":case"?":for(re=T+1;S[re]!=null&&((A=S[re].t)==="?"||A==="D"||(A===" "||A==="t")&&S[re+1]!=null&&(S[re+1].t==="?"||S[re+1].t==="t"&&S[re+1].v==="/")||S[T].t==="("&&(A===" "||A==="n"||A===")")||A==="t"&&(S[re].v==="/"||S[re].v===" "&&S[re+1]!=null&&S[re+1].t=="?"));)S[T].v+=S[re].v,S[re]={v:"",t:";"},++re;Q+=S[T].v,T=re-1;break;case"G":S[T].t="t",S[T].v=SSF_general(_,x);break}var ce="",ne,Y;if(Q.length>0){Q.charCodeAt(0)==40?(ne=_<0&&Q.charCodeAt(0)===45?-_:_,Y=write_num("n",Q,ne)):(ne=_<0&&E>1?-_:_,Y=write_num("n",Q,ne),ne<0&&S[0]&&S[0].t=="t"&&(Y=Y.substr(1),S[0].v="-"+S[0].v)),re=Y.length-1;var fe=S.length;for(T=0;T<S.length;++T)if(S[T]!=null&&S[T].t!="t"&&S[T].v.indexOf(".")>-1){fe=T;break}var ge=S.length;if(fe===S.length&&Y.indexOf("E")===-1){for(T=S.length-1;T>=0;--T)S[T]==null||"n?".indexOf(S[T].t)===-1||(re>=S[T].v.length-1?(re-=S[T].v.length,S[T].v=Y.substr(re+1,S[T].v.length)):re<0?S[T].v="":(S[T].v=Y.substr(0,re+1),re=-1),S[T].t="t",ge=T);re>=0&&ge<S.length&&(S[ge].v=Y.substr(0,re+1)+S[ge].v)}else if(fe!==S.length&&Y.indexOf("E")===-1){for(re=Y.indexOf(".")-1,T=fe;T>=0;--T)if(!(S[T]==null||"n?".indexOf(S[T].t)===-1)){for(M=S[T].v.indexOf(".")>-1&&T===fe?S[T].v.indexOf(".")-1:S[T].v.length-1,ce=S[T].v.substr(M+1);M>=0;--M)re>=0&&(S[T].v.charAt(M)==="0"||S[T].v.charAt(M)==="#")&&(ce=Y.charAt(re--)+ce);S[T].v=ce,S[T].t="t",ge=T}for(re>=0&&ge<S.length&&(S[ge].v=Y.substr(0,re+1)+S[ge].v),re=Y.indexOf(".")+1,T=fe;T<S.length;++T)if(!(S[T]==null||"n?(".indexOf(S[T].t)===-1&&T!==fe)){for(M=S[T].v.indexOf(".")>-1&&T===fe?S[T].v.indexOf(".")+1:0,ce=S[T].v.substr(0,M);M<S[T].v.length;++M)re<Y.length&&(ce+=Y.charAt(re++));S[T].v=ce,S[T].t="t",ge=T}}}for(T=0;T<S.length;++T)S[T]!=null&&"n?".indexOf(S[T].t)>-1&&(ne=E>1&&_<0&&T>0&&S[T-1].v==="-"?-_:_,S[T].v=write_num(S[T].t,S[T].v,ne),S[T].t="t");var $e="";for(T=0;T!==S.length;++T)S[T]!=null&&($e+=S[T].v);return $e}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(n,_){if(_==null)return!1;var x=parseFloat(_[2]);switch(_[1]){case"=":if(n==x)return!0;break;case">":if(n>x)return!0;break;case"<":if(n<x)return!0;break;case"<>":if(n!=x)return!0;break;case">=":if(n>=x)return!0;break;case"<=":if(n<=x)return!0;break}return!1}function choose_fmt(n,_){var x=SSF_split_fmt(n),E=x.length,S=x[E-1].indexOf("@");if(E<4&&S>-1&&--E,x.length>4)throw new Error("cannot find right format for |"+x.join("|")+"|");if(typeof _!="number")return[4,x.length===4||S>-1?x[x.length-1]:"@"];switch(x.length){case 1:x=S>-1?["General","General","General",x[0]]:[x[0],x[0],x[0],"@"];break;case 2:x=S>-1?[x[0],x[0],x[0],x[1]]:[x[0],x[1],x[0],"@"];break;case 3:x=S>-1?[x[0],x[1],x[0],x[2]]:[x[0],x[1],x[2],"@"];break}var C=_>0?x[0]:_<0?x[1]:x[2];if(x[0].indexOf("[")===-1&&x[1].indexOf("[")===-1)return[E,C];if(x[0].match(/\[[=<>]/)!=null||x[1].match(/\[[=<>]/)!=null){var T=x[0].match(cfregex2),A=x[1].match(cfregex2);return chkcond(_,T)?[E,x[0]]:chkcond(_,A)?[E,x[1]]:[E,x[T!=null&&A!=null?2:1]]}return[E,C]}function SSF_format(n,_,x){x==null&&(x={});var E="";switch(typeof n){case"string":n=="m/d/yy"&&x.dateNF?E=x.dateNF:E=n;break;case"number":n==14&&x.dateNF?E=x.dateNF:E=(x.table!=null?x.table:table_fmt)[n],E==null&&(E=x.table&&x.table[SSF_default_map[n]]||table_fmt[SSF_default_map[n]]),E==null&&(E=SSF_default_str[n]||"General");break}if(SSF_isgeneral(E,0))return SSF_general(_,x);_ instanceof Date&&(_=datenum_local(_,x.date1904));var S=choose_fmt(E,_);if(SSF_isgeneral(S[1]))return SSF_general(_,x);if(_===!0)_="TRUE";else if(_===!1)_="FALSE";else if(_===""||_==null)return"";return eval_fmt(S[1],_,x,S[0])}function SSF_load(n,_){if(typeof _!="number"){_=+_||-1;for(var x=0;x<392;++x){if(table_fmt[x]==null){_<0&&(_=x);continue}if(table_fmt[x]==n){_=x;break}}_<0&&(_=391)}return table_fmt[_]=n,_}function SSF_load_table(n){for(var _=0;_!=392;++_)n[_]!==void 0&&SSF_load(n[_],_)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(n){var _=typeof n=="number"?table_fmt[n]:n;return _=_.replace(dateNFregex,"(\\d+)"),new RegExp("^"+_+"$")}function dateNF_fix(n,_,x){var E=-1,S=-1,C=-1,T=-1,A=-1,B=-1;(_.match(dateNFregex)||[]).forEach(function(O,D){var L=parseInt(x[D+1],10);switch(O.toLowerCase().charAt(0)){case"y":E=L;break;case"d":C=L;break;case"h":T=L;break;case"s":B=L;break;case"m":T>=0?A=L:S=L;break}}),B>=0&&A==-1&&S>=0&&(A=S,S=-1);var I=(""+(E>=0?E:new Date().getFullYear())).slice(-4)+"-"+("00"+(S>=1?S:1)).slice(-2)+"-"+("00"+(C>=1?C:1)).slice(-2);I.length==7&&(I="0"+I),I.length==8&&(I="20"+I);var M=("00"+(T>=0?T:0)).slice(-2)+":"+("00"+(A>=0?A:0)).slice(-2)+":"+("00"+(B>=0?B:0)).slice(-2);return T==-1&&A==-1&&B==-1?I:E==-1&&S==-1&&C==-1?M:I+"T"+M}var bad_formats={"d.m":"d\\.m"};function SSF__load(n,_){return SSF_load(bad_formats[n]||n,_)}var CRC32=function(){var n={};n.version="1.2.0";function _(){for(var Y=0,fe=new Array(256),ge=0;ge!=256;++ge)Y=ge,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,Y=Y&1?-306674912^Y>>>1:Y>>>1,fe[ge]=Y;return typeof Int32Array<"u"?new Int32Array(fe):fe}var x=_();function E(Y){var fe=0,ge=0,$e=0,_e=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for($e=0;$e!=256;++$e)_e[$e]=Y[$e];for($e=0;$e!=256;++$e)for(ge=Y[$e],fe=256+$e;fe<4096;fe+=256)ge=_e[fe]=ge>>>8^Y[ge&255];var ae=[];for($e=1;$e!=16;++$e)ae[$e-1]=typeof Int32Array<"u"?_e.subarray($e*256,$e*256+256):_e.slice($e*256,$e*256+256);return ae}var S=E(x),C=S[0],T=S[1],A=S[2],B=S[3],I=S[4],M=S[5],O=S[6],D=S[7],L=S[8],V=S[9],U=S[10],q=S[11],H=S[12],W=S[13],Q=S[14];function re(Y,fe){for(var ge=fe^-1,$e=0,_e=Y.length;$e<_e;)ge=ge>>>8^x[(ge^Y.charCodeAt($e++))&255];return~ge}function ce(Y,fe){for(var ge=fe^-1,$e=Y.length-15,_e=0;_e<$e;)ge=Q[Y[_e++]^ge&255]^W[Y[_e++]^ge>>8&255]^H[Y[_e++]^ge>>16&255]^q[Y[_e++]^ge>>>24]^U[Y[_e++]]^V[Y[_e++]]^L[Y[_e++]]^D[Y[_e++]]^O[Y[_e++]]^M[Y[_e++]]^I[Y[_e++]]^B[Y[_e++]]^A[Y[_e++]]^T[Y[_e++]]^C[Y[_e++]]^x[Y[_e++]];for($e+=15;_e<$e;)ge=ge>>>8^x[(ge^Y[_e++])&255];return~ge}function ne(Y,fe){for(var ge=fe^-1,$e=0,_e=Y.length,ae=0,X=0;$e<_e;)ae=Y.charCodeAt($e++),ae<128?ge=ge>>>8^x[(ge^ae)&255]:ae<2048?(ge=ge>>>8^x[(ge^(192|ae>>6&31))&255],ge=ge>>>8^x[(ge^(128|ae&63))&255]):ae>=55296&&ae<57344?(ae=(ae&1023)+64,X=Y.charCodeAt($e++)&1023,ge=ge>>>8^x[(ge^(240|ae>>8&7))&255],ge=ge>>>8^x[(ge^(128|ae>>2&63))&255],ge=ge>>>8^x[(ge^(128|X>>6&15|(ae&3)<<4))&255],ge=ge>>>8^x[(ge^(128|X&63))&255]):(ge=ge>>>8^x[(ge^(224|ae>>12&15))&255],ge=ge>>>8^x[(ge^(128|ae>>6&63))&255],ge=ge>>>8^x[(ge^(128|ae&63))&255]);return~ge}return n.table=x,n.bstr=re,n.buf=ce,n.str=ne,n}(),CFB=function n(){var _={};_.version="1.2.2";function x(ue,ke){for(var Fe=ue.split("/"),Ue=ke.split("/"),ze=0,Ye=0,rt=Math.min(Fe.length,Ue.length);ze<rt;++ze){if(Ye=Fe[ze].length-Ue[ze].length)return Ye;if(Fe[ze]!=Ue[ze])return Fe[ze]<Ue[ze]?-1:1}return Fe.length-Ue.length}function E(ue){if(ue.charAt(ue.length-1)=="/")return ue.slice(0,-1).indexOf("/")===-1?ue:E(ue.slice(0,-1));var ke=ue.lastIndexOf("/");return ke===-1?ue:ue.slice(0,ke+1)}function S(ue){if(ue.charAt(ue.length-1)=="/")return S(ue.slice(0,-1));var ke=ue.lastIndexOf("/");return ke===-1?ue:ue.slice(ke+1)}function C(ue,ke){typeof ke=="string"&&(ke=new Date(ke));var Fe=ke.getHours();Fe=Fe<<6|ke.getMinutes(),Fe=Fe<<5|ke.getSeconds()>>>1,ue.write_shift(2,Fe);var Ue=ke.getFullYear()-1980;Ue=Ue<<4|ke.getMonth()+1,Ue=Ue<<5|ke.getDate(),ue.write_shift(2,Ue)}function T(ue){var ke=ue.read_shift(2)&65535,Fe=ue.read_shift(2)&65535,Ue=new Date,ze=Fe&31;Fe>>>=5;var Ye=Fe&15;Fe>>>=4,Ue.setMilliseconds(0),Ue.setFullYear(Fe+1980),Ue.setMonth(Ye-1),Ue.setDate(ze);var rt=ke&31;ke>>>=5;var at=ke&63;return ke>>>=6,Ue.setHours(ke),Ue.setMinutes(at),Ue.setSeconds(rt<<1),Ue}function A(ue){prep_blob(ue,0);for(var ke={},Fe=0;ue.l<=ue.length-4;){var Ue=ue.read_shift(2),ze=ue.read_shift(2),Ye=ue.l+ze,rt={};switch(Ue){case 21589:Fe=ue.read_shift(1),Fe&1&&(rt.mtime=ue.read_shift(4)),ze>5&&(Fe&2&&(rt.atime=ue.read_shift(4)),Fe&4&&(rt.ctime=ue.read_shift(4))),rt.mtime&&(rt.mt=new Date(rt.mtime*1e3));break;case 1:{var at=ue.read_shift(4),ct=ue.read_shift(4);rt.usz=ct*Math.pow(2,32)+at,at=ue.read_shift(4),ct=ue.read_shift(4),rt.csz=ct*Math.pow(2,32)+at}break}ue.l=Ye,ke[Ue]=rt}return ke}var B;function I(){return B||(B=_fs)}function M(ue,ke){if(ue[0]==80&&ue[1]==75)return ur(ue,ke);if((ue[0]|32)==109&&(ue[1]|32)==105)return ar(ue,ke);if(ue.length<512)throw new Error("CFB file size "+ue.length+" < 512");var Fe=3,Ue=512,ze=0,Ye=0,rt=0,at=0,ct=0,st=[],lt=ue.slice(0,512);prep_blob(lt,0);var ht=O(lt);switch(Fe=ht[0],Fe){case 3:Ue=512;break;case 4:Ue=4096;break;case 0:if(ht[1]==0)return ur(ue,ke);default:throw new Error("Major Version: Expected 3 or 4 saw "+Fe)}Ue!==512&&(lt=ue.slice(0,Ue),prep_blob(lt,28));var bt=ue.slice(0,Ue);D(lt,Fe);var Et=lt.read_shift(4,"i");if(Fe===3&&Et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Et);lt.l+=4,rt=lt.read_shift(4,"i"),lt.l+=4,lt.chk("00100000","Mini Stream Cutoff Size: "),at=lt.read_shift(4,"i"),ze=lt.read_shift(4,"i"),ct=lt.read_shift(4,"i"),Ye=lt.read_shift(4,"i");for(var gt=-1,wt=0;wt<109&&(gt=lt.read_shift(4,"i"),!(gt<0));++wt)st[wt]=gt;var Dt=L(ue,Ue);q(ct,Ye,Dt,Ue,st);var Ft=W(Dt,rt,st,Ue);rt<Ft.length&&(Ft[rt].name="!Directory"),ze>0&&at!==X&&(Ft[at].name="!MiniFAT"),Ft[st[0]].name="!FAT",Ft.fat_addrs=st,Ft.ssz=Ue;var Kt={},Ut=[],Xt=[],Zt=[];Q(rt,Ft,Dt,Ut,ze,Kt,Xt,at),V(Xt,Zt,Ut),Ut.shift();var Wt={FileIndex:Xt,FullPaths:Zt};return ke&&ke.raw&&(Wt.raw={header:bt,sectors:Dt}),Wt}function O(ue){if(ue[ue.l]==80&&ue[ue.l+1]==75)return[0,0];ue.chk(F,"Header Signature: "),ue.l+=16;var ke=ue.read_shift(2,"u");return[ue.read_shift(2,"u"),ke]}function D(ue,ke){var Fe=9;switch(ue.l+=2,Fe=ue.read_shift(2)){case 9:if(ke!=3)throw new Error("Sector Shift: Expected 9 saw "+Fe);break;case 12:if(ke!=4)throw new Error("Sector Shift: Expected 12 saw "+Fe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Fe)}ue.chk("0600","Mini Sector Shift: "),ue.chk("000000000000","Reserved: ")}function L(ue,ke){for(var Fe=Math.ceil(ue.length/ke)-1,Ue=[],ze=1;ze<Fe;++ze)Ue[ze-1]=ue.slice(ze*ke,(ze+1)*ke);return Ue[Fe-1]=ue.slice(Fe*ke),Ue}function V(ue,ke,Fe){for(var Ue=0,ze=0,Ye=0,rt=0,at=0,ct=Fe.length,st=[],lt=[];Ue<ct;++Ue)st[Ue]=lt[Ue]=Ue,ke[Ue]=Fe[Ue];for(;at<lt.length;++at)Ue=lt[at],ze=ue[Ue].L,Ye=ue[Ue].R,rt=ue[Ue].C,st[Ue]===Ue&&(ze!==-1&&st[ze]!==ze&&(st[Ue]=st[ze]),Ye!==-1&&st[Ye]!==Ye&&(st[Ue]=st[Ye])),rt!==-1&&(st[rt]=Ue),ze!==-1&&Ue!=st[Ue]&&(st[ze]=st[Ue],lt.lastIndexOf(ze)<at&&lt.push(ze)),Ye!==-1&&Ue!=st[Ue]&&(st[Ye]=st[Ue],lt.lastIndexOf(Ye)<at&&lt.push(Ye));for(Ue=1;Ue<ct;++Ue)st[Ue]===Ue&&(Ye!==-1&&st[Ye]!==Ye?st[Ue]=st[Ye]:ze!==-1&&st[ze]!==ze&&(st[Ue]=st[ze]));for(Ue=1;Ue<ct;++Ue)if(ue[Ue].type!==0){if(at=Ue,at!=st[at])do at=st[at],ke[Ue]=ke[at]+"/"+ke[Ue];while(at!==0&&st[at]!==-1&&at!=st[at]);st[Ue]=-1}for(ke[0]+="/",Ue=1;Ue<ct;++Ue)ue[Ue].type!==2&&(ke[Ue]+="/")}function U(ue,ke,Fe){for(var Ue=ue.start,ze=ue.size,Ye=[],rt=Ue;Fe&&ze>0&&rt>=0;)Ye.push(ke.slice(rt*ae,rt*ae+ae)),ze-=ae,rt=__readInt32LE(Fe,rt*4);return Ye.length===0?new_buf(0):bconcat(Ye).slice(0,ue.size)}function q(ue,ke,Fe,Ue,ze){var Ye=X;if(ue===X){if(ke!==0)throw new Error("DIFAT chain shorter than expected")}else if(ue!==-1){var rt=Fe[ue],at=(Ue>>>2)-1;if(!rt)return;for(var ct=0;ct<at&&(Ye=__readInt32LE(rt,ct*4))!==X;++ct)ze.push(Ye);ke>=1&&q(__readInt32LE(rt,Ue-4),ke-1,Fe,Ue,ze)}}function H(ue,ke,Fe,Ue,ze){var Ye=[],rt=[];ze||(ze=[]);var at=Ue-1,ct=0,st=0;for(ct=ke;ct>=0;){ze[ct]=!0,Ye[Ye.length]=ct,rt.push(ue[ct]);var lt=Fe[Math.floor(ct*4/Ue)];if(st=ct*4&at,Ue<4+st)throw new Error("FAT boundary crossed: "+ct+" 4 "+Ue);if(!ue[lt])break;ct=__readInt32LE(ue[lt],st)}return{nodes:Ye,data:__toBuffer([rt])}}function W(ue,ke,Fe,Ue){var ze=ue.length,Ye=[],rt=[],at=[],ct=[],st=Ue-1,lt=0,ht=0,bt=0,Et=0;for(lt=0;lt<ze;++lt)if(at=[],bt=lt+ke,bt>=ze&&(bt-=ze),!rt[bt]){ct=[];var gt=[];for(ht=bt;ht>=0;){gt[ht]=!0,rt[ht]=!0,at[at.length]=ht,ct.push(ue[ht]);var wt=Fe[Math.floor(ht*4/Ue)];if(Et=ht*4&st,Ue<4+Et)throw new Error("FAT boundary crossed: "+ht+" 4 "+Ue);if(!ue[wt]||(ht=__readInt32LE(ue[wt],Et),gt[ht]))break}Ye[bt]={nodes:at,data:__toBuffer([ct])}}return Ye}function Q(ue,ke,Fe,Ue,ze,Ye,rt,at){for(var ct=0,st=Ue.length?2:0,lt=ke[ue].data,ht=0,bt=0,Et;ht<lt.length;ht+=128){var gt=lt.slice(ht,ht+128);prep_blob(gt,64),bt=gt.read_shift(2),Et=__utf16le(gt,0,bt-st),Ue.push(Et);var wt={name:Et,type:gt.read_shift(1),color:gt.read_shift(1),L:gt.read_shift(4,"i"),R:gt.read_shift(4,"i"),C:gt.read_shift(4,"i"),clsid:gt.read_shift(16),state:gt.read_shift(4,"i"),start:0,size:0},Dt=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Dt!==0&&(wt.ct=re(gt,gt.l-8));var Ft=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Ft!==0&&(wt.mt=re(gt,gt.l-8)),wt.start=gt.read_shift(4,"i"),wt.size=gt.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=X,wt.name=""),wt.type===5?(ct=wt.start,ze>0&&ct!==X&&(ke[ct].name="!StreamData")):wt.size>=4096?(wt.storage="fat",ke[wt.start]===void 0&&(ke[wt.start]=H(Fe,wt.start,ke.fat_addrs,ke.ssz)),ke[wt.start].name=wt.name,wt.content=ke[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:ct!==X&&wt.start!==X&&ke[ct]&&(wt.content=U(wt,ke[ct].data,(ke[at]||{}).data))),wt.content&&prep_blob(wt.content,0),Ye[Et]=wt,rt.push(wt)}}function re(ue,ke){return new Date((__readUInt32LE(ue,ke+4)/1e7*Math.pow(2,32)+__readUInt32LE(ue,ke)/1e7-11644473600)*1e3)}function ce(ue,ke){return I(),M(B.readFileSync(ue),ke)}function ne(ue,ke){var Fe=ke&&ke.type;switch(Fe||has_buf&&Buffer.isBuffer(ue)&&(Fe="buffer"),Fe||"base64"){case"file":return ce(ue,ke);case"base64":return M(s2a(Base64_decode(ue)),ke);case"binary":return M(s2a(ue),ke)}return M(ue,ke)}function Y(ue,ke){var Fe=ke||{},Ue=Fe.root||"Root Entry";if(ue.FullPaths||(ue.FullPaths=[]),ue.FileIndex||(ue.FileIndex=[]),ue.FullPaths.length!==ue.FileIndex.length)throw new Error("inconsistent CFB structure");ue.FullPaths.length===0&&(ue.FullPaths[0]=Ue+"/",ue.FileIndex[0]={name:Ue,type:5}),Fe.CLSID&&(ue.FileIndex[0].clsid=Fe.CLSID),fe(ue)}function fe(ue){var ke="Sh33tJ5";if(!CFB.find(ue,"/"+ke)){var Fe=new_buf(4);Fe[0]=55,Fe[1]=Fe[3]=50,Fe[2]=54,ue.FileIndex.push({name:ke,type:2,content:Fe,size:4,L:69,R:69,C:69}),ue.FullPaths.push(ue.FullPaths[0]+ke),ge(ue)}}function ge(ue,ke){Y(ue);for(var Fe=!1,Ue=!1,ze=ue.FullPaths.length-1;ze>=0;--ze){var Ye=ue.FileIndex[ze];switch(Ye.type){case 0:Ue?Fe=!0:(ue.FileIndex.pop(),ue.FullPaths.pop());break;case 1:case 2:case 5:Ue=!0,isNaN(Ye.R*Ye.L*Ye.C)&&(Fe=!0),Ye.R>-1&&Ye.L>-1&&Ye.R==Ye.L&&(Fe=!0);break;default:Fe=!0;break}}if(!(!Fe&&!ke)){var rt=new Date(1987,1,19),at=0,ct=Object.create?Object.create(null):{},st=[];for(ze=0;ze<ue.FullPaths.length;++ze)ct[ue.FullPaths[ze]]=!0,ue.FileIndex[ze].type!==0&&st.push([ue.FullPaths[ze],ue.FileIndex[ze]]);for(ze=0;ze<st.length;++ze){var lt=E(st[ze][0]);for(Ue=ct[lt];!Ue;){for(;E(lt)&&!ct[E(lt)];)lt=E(lt);st.push([lt,{name:S(lt).replace("/",""),type:1,clsid:J,ct:rt,mt:rt,content:null}]),ct[lt]=!0,lt=E(st[ze][0]),Ue=ct[lt]}}for(st.sort(function(Et,gt){return x(Et[0],gt[0])}),ue.FullPaths=[],ue.FileIndex=[],ze=0;ze<st.length;++ze)ue.FullPaths[ze]=st[ze][0],ue.FileIndex[ze]=st[ze][1];for(ze=0;ze<st.length;++ze){var ht=ue.FileIndex[ze],bt=ue.FullPaths[ze];if(ht.name=S(bt).replace("/",""),ht.L=ht.R=ht.C=-(ht.color=1),ht.size=ht.content?ht.content.length:0,ht.start=0,ht.clsid=ht.clsid||J,ze===0)ht.C=st.length>1?1:-1,ht.size=0,ht.type=5;else if(bt.slice(-1)=="/"){for(at=ze+1;at<st.length&&E(ue.FullPaths[at])!=bt;++at);for(ht.C=at>=st.length?-1:at,at=ze+1;at<st.length&&E(ue.FullPaths[at])!=E(bt);++at);ht.R=at>=st.length?-1:at,ht.type=1}else E(ue.FullPaths[ze+1]||"")==E(bt)&&(ht.R=ze+1),ht.type=2}}}function $e(ue,ke){var Fe=ke||{};if(Fe.fileType=="mad")return qt(ue,Fe);switch(ge(ue),Fe.fileType){case"zip":return Nt(ue,Fe)}var Ue=function(Et){for(var gt=0,wt=0,Dt=0;Dt<Et.FileIndex.length;++Dt){var Ft=Et.FileIndex[Dt];if(Ft.content){var Kt=Ft.content.length;Kt>0&&(Kt<4096?gt+=Kt+63>>6:wt+=Kt+511>>9)}}for(var Ut=Et.FullPaths.length+3>>2,Xt=gt+7>>3,Zt=gt+127>>7,Wt=Xt+wt+Ut+Zt,yt=Wt+127>>7,xt=yt<=109?0:Math.ceil((yt-109)/127);Wt+yt+xt+127>>7>yt;)xt=++yt<=109?0:Math.ceil((yt-109)/127);var Pt=[1,xt,yt,Zt,Ut,wt,gt,0];return Et.FileIndex[0].size=gt<<6,Pt[7]=(Et.FileIndex[0].start=Pt[0]+Pt[1]+Pt[2]+Pt[3]+Pt[4]+Pt[5])+(Pt[6]+7>>3),Pt}(ue),ze=new_buf(Ue[7]<<9),Ye=0,rt=0;{for(Ye=0;Ye<8;++Ye)ze.write_shift(1,z[Ye]);for(Ye=0;Ye<8;++Ye)ze.write_shift(2,0);for(ze.write_shift(2,62),ze.write_shift(2,3),ze.write_shift(2,65534),ze.write_shift(2,9),ze.write_shift(2,6),Ye=0;Ye<3;++Ye)ze.write_shift(2,0);for(ze.write_shift(4,0),ze.write_shift(4,Ue[2]),ze.write_shift(4,Ue[0]+Ue[1]+Ue[2]+Ue[3]-1),ze.write_shift(4,0),ze.write_shift(4,4096),ze.write_shift(4,Ue[3]?Ue[0]+Ue[1]+Ue[2]-1:X),ze.write_shift(4,Ue[3]),ze.write_shift(-4,Ue[1]?Ue[0]-1:X),ze.write_shift(4,Ue[1]),Ye=0;Ye<109;++Ye)ze.write_shift(-4,Ye<Ue[2]?Ue[1]+Ye:-1)}if(Ue[1])for(rt=0;rt<Ue[1];++rt){for(;Ye<236+rt*127;++Ye)ze.write_shift(-4,Ye<Ue[2]?Ue[1]+Ye:-1);ze.write_shift(-4,rt===Ue[1]-1?X:rt+1)}var at=function(Et){for(rt+=Et;Ye<rt-1;++Ye)ze.write_shift(-4,Ye+1);Et&&(++Ye,ze.write_shift(-4,X))};for(rt=Ye=0,rt+=Ue[1];Ye<rt;++Ye)ze.write_shift(-4,te.DIFSECT);for(rt+=Ue[2];Ye<rt;++Ye)ze.write_shift(-4,te.FATSECT);at(Ue[3]),at(Ue[4]);for(var ct=0,st=0,lt=ue.FileIndex[0];ct<ue.FileIndex.length;++ct)lt=ue.FileIndex[ct],lt.content&&(st=lt.content.length,!(st<4096)&&(lt.start=rt,at(st+511>>9)));for(at(Ue[6]+7>>3);ze.l&511;)ze.write_shift(-4,te.ENDOFCHAIN);for(rt=Ye=0,ct=0;ct<ue.FileIndex.length;++ct)lt=ue.FileIndex[ct],lt.content&&(st=lt.content.length,!(!st||st>=4096)&&(lt.start=rt,at(st+63>>6)));for(;ze.l&511;)ze.write_shift(-4,te.ENDOFCHAIN);for(Ye=0;Ye<Ue[4]<<2;++Ye){var ht=ue.FullPaths[Ye];if(!ht||ht.length===0){for(ct=0;ct<17;++ct)ze.write_shift(4,0);for(ct=0;ct<3;++ct)ze.write_shift(4,-1);for(ct=0;ct<12;++ct)ze.write_shift(4,0);continue}lt=ue.FileIndex[Ye],Ye===0&&(lt.start=lt.size?lt.start-1:X);var bt=Ye===0&&Fe.root||lt.name;if(bt.length>32&&(console.error("Name "+bt+" will be truncated to "+bt.slice(0,32)),bt=bt.slice(0,32)),st=2*(bt.length+1),ze.write_shift(64,bt,"utf16le"),ze.write_shift(2,st),ze.write_shift(1,lt.type),ze.write_shift(1,lt.color),ze.write_shift(-4,lt.L),ze.write_shift(-4,lt.R),ze.write_shift(-4,lt.C),lt.clsid)ze.write_shift(16,lt.clsid,"hex");else for(ct=0;ct<4;++ct)ze.write_shift(4,0);ze.write_shift(4,lt.state||0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,lt.start),ze.write_shift(4,lt.size),ze.write_shift(4,0)}for(Ye=1;Ye<ue.FileIndex.length;++Ye)if(lt=ue.FileIndex[Ye],lt.size>=4096)if(ze.l=lt.start+1<<9,has_buf&&Buffer.isBuffer(lt.content))lt.content.copy(ze,ze.l,0,lt.size),ze.l+=lt.size+511&-512;else{for(ct=0;ct<lt.size;++ct)ze.write_shift(1,lt.content[ct]);for(;ct&511;++ct)ze.write_shift(1,0)}for(Ye=1;Ye<ue.FileIndex.length;++Ye)if(lt=ue.FileIndex[Ye],lt.size>0&&lt.size<4096)if(has_buf&&Buffer.isBuffer(lt.content))lt.content.copy(ze,ze.l,0,lt.size),ze.l+=lt.size+63&-64;else{for(ct=0;ct<lt.size;++ct)ze.write_shift(1,lt.content[ct]);for(;ct&63;++ct)ze.write_shift(1,0)}if(has_buf)ze.l=ze.length;else for(;ze.l<ze.length;)ze.write_shift(1,0);return ze}function _e(ue,ke){var Fe=ue.FullPaths.map(function(ct){return ct.toUpperCase()}),Ue=Fe.map(function(ct){var st=ct.split("/");return st[st.length-(ct.slice(-1)=="/"?2:1)]}),ze=!1;ke.charCodeAt(0)===47?(ze=!0,ke=Fe[0].slice(0,-1)+ke):ze=ke.indexOf("/")!==-1;var Ye=ke.toUpperCase(),rt=ze===!0?Fe.indexOf(Ye):Ue.indexOf(Ye);if(rt!==-1)return ue.FileIndex[rt];var at=!Ye.match(chr1);for(Ye=Ye.replace(chr0,""),at&&(Ye=Ye.replace(chr1,"!")),rt=0;rt<Fe.length;++rt)if((at?Fe[rt].replace(chr1,"!"):Fe[rt]).replace(chr0,"")==Ye||(at?Ue[rt].replace(chr1,"!"):Ue[rt]).replace(chr0,"")==Ye)return ue.FileIndex[rt];return null}var ae=64,X=-2,F="d0cf11e0a1b11ae1",z=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:X,FREESECT:-1,HEADER_SIGNATURE:F,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function se(ue,ke,Fe){I();var Ue=$e(ue,Fe);B.writeFileSync(ke,Ue)}function oe(ue){for(var ke=new Array(ue.length),Fe=0;Fe<ue.length;++Fe)ke[Fe]=String.fromCharCode(ue[Fe]);return ke.join("")}function ie(ue,ke){var Fe=$e(ue,ke);switch(ke&&ke.type||"buffer"){case"file":return I(),B.writeFileSync(ke.filename,Fe),Fe;case"binary":return typeof Fe=="string"?Fe:oe(Fe);case"base64":return Base64_encode(typeof Fe=="string"?Fe:oe(Fe));case"buffer":if(has_buf)return Buffer.isBuffer(Fe)?Fe:Buffer_from(Fe);case"array":return typeof Fe=="string"?s2a(Fe):Fe}return Fe}var G;function j(ue){try{var ke=ue.InflateRaw,Fe=new ke;if(Fe._processChunk(new Uint8Array([3,0]),Fe._finishFlushFlag),Fe.bytesRead)G=ue;else throw new Error("zlib does not expose bytesRead")}catch(Ue){console.error("cannot use native zlib: "+(Ue.message||Ue))}}function ee(ue,ke){if(!G)return Ct(ue,ke);var Fe=G.InflateRaw,Ue=new Fe,ze=Ue._processChunk(ue.slice(ue.l),Ue._finishFlushFlag);return ue.l+=Ue.bytesRead,ze}function pe(ue){return G?G.deflateRawSync(ue):Le(ue)}var he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],we=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function xe(ue){var ke=(ue<<1|ue<<11)&139536|(ue<<5|ue<<15)&558144;return(ke>>16|ke>>8|ke)&255}for(var Ee=typeof Uint8Array<"u",ye=Ee?new Uint8Array(256):[],Ce=0;Ce<256;++Ce)ye[Ce]=xe(Ce);function ve(ue,ke){var Fe=ye[ue&255];return ke<=8?Fe>>>8-ke:(Fe=Fe<<8|ye[ue>>8&255],ke<=16?Fe>>>16-ke:(Fe=Fe<<8|ye[ue>>16&255],Fe>>>24-ke))}function Be(ue,ke){var Fe=ke&7,Ue=ke>>>3;return(ue[Ue]|(Fe<=6?0:ue[Ue+1]<<8))>>>Fe&3}function me(ue,ke){var Fe=ke&7,Ue=ke>>>3;return(ue[Ue]|(Fe<=5?0:ue[Ue+1]<<8))>>>Fe&7}function Ie(ue,ke){var Fe=ke&7,Ue=ke>>>3;return(ue[Ue]|(Fe<=4?0:ue[Ue+1]<<8))>>>Fe&15}function Ve(ue,ke){var Fe=ke&7,Ue=ke>>>3;return(ue[Ue]|(Fe<=3?0:ue[Ue+1]<<8))>>>Fe&31}function Me(ue,ke){var Fe=ke&7,Ue=ke>>>3;return(ue[Ue]|(Fe<=1?0:ue[Ue+1]<<8))>>>Fe&127}function Ne(ue,ke,Fe){var Ue=ke&7,ze=ke>>>3,Ye=(1<<Fe)-1,rt=ue[ze]>>>Ue;return Fe<8-Ue||(rt|=ue[ze+1]<<8-Ue,Fe<16-Ue)||(rt|=ue[ze+2]<<16-Ue,Fe<24-Ue)||(rt|=ue[ze+3]<<24-Ue),rt&Ye}function Pe(ue,ke,Fe){var Ue=ke&7,ze=ke>>>3;return Ue<=5?ue[ze]|=(Fe&7)<<Ue:(ue[ze]|=Fe<<Ue&255,ue[ze+1]=(Fe&7)>>8-Ue),ke+3}function He(ue,ke,Fe){var Ue=ke&7,ze=ke>>>3;return Fe=(Fe&1)<<Ue,ue[ze]|=Fe,ke+1}function We(ue,ke,Fe){var Ue=ke&7,ze=ke>>>3;return Fe<<=Ue,ue[ze]|=Fe&255,Fe>>>=8,ue[ze+1]=Fe,ke+8}function Ke(ue,ke,Fe){var Ue=ke&7,ze=ke>>>3;return Fe<<=Ue,ue[ze]|=Fe&255,Fe>>>=8,ue[ze+1]=Fe&255,ue[ze+2]=Fe>>>8,ke+16}function Ge(ue,ke){var Fe=ue.length,Ue=2*Fe>ke?2*Fe:ke+5,ze=0;if(Fe>=ke)return ue;if(has_buf){var Ye=new_unsafe_buf(Ue);if(ue.copy)ue.copy(Ye);else for(;ze<ue.length;++ze)Ye[ze]=ue[ze];return Ye}else if(Ee){var rt=new Uint8Array(Ue);if(rt.set)rt.set(ue);else for(;ze<Fe;++ze)rt[ze]=ue[ze];return rt}return ue.length=Ue,ue}function nt(ue){for(var ke=new Array(ue),Fe=0;Fe<ue;++Fe)ke[Fe]=0;return ke}function ot(ue,ke,Fe){var Ue=1,ze=0,Ye=0,rt=0,at=0,ct=ue.length,st=Ee?new Uint16Array(32):nt(32);for(Ye=0;Ye<32;++Ye)st[Ye]=0;for(Ye=ct;Ye<Fe;++Ye)ue[Ye]=0;ct=ue.length;var lt=Ee?new Uint16Array(ct):nt(ct);for(Ye=0;Ye<ct;++Ye)st[ze=ue[Ye]]++,Ue<ze&&(Ue=ze),lt[Ye]=0;for(st[0]=0,Ye=1;Ye<=Ue;++Ye)st[Ye+16]=at=at+st[Ye-1]<<1;for(Ye=0;Ye<ct;++Ye)at=ue[Ye],at!=0&&(lt[Ye]=st[at+16]++);var ht=0;for(Ye=0;Ye<ct;++Ye)if(ht=ue[Ye],ht!=0)for(at=ve(lt[Ye],Ue)>>Ue-ht,rt=(1<<Ue+4-ht)-1;rt>=0;--rt)ke[at|rt<<ht]=ht&15|Ye<<4;return Ue}var Ze=Ee?new Uint16Array(512):nt(512),Re=Ee?new Uint16Array(32):nt(32);if(!Ee){for(var be=0;be<512;++be)Ze[be]=0;for(be=0;be<32;++be)Re[be]=0}(function(){for(var ue=[],ke=0;ke<32;ke++)ue.push(5);ot(ue,Re,32);var Fe=[];for(ke=0;ke<=143;ke++)Fe.push(8);for(;ke<=255;ke++)Fe.push(9);for(;ke<=279;ke++)Fe.push(7);for(;ke<=287;ke++)Fe.push(8);ot(Fe,Ze,288)})();var Ae=function(){for(var ke=Ee?new Uint8Array(32768):[],Fe=0,Ue=0;Fe<we.length-1;++Fe)for(;Ue<we[Fe+1];++Ue)ke[Ue]=Fe;for(;Ue<32768;++Ue)ke[Ue]=29;var ze=Ee?new Uint8Array(259):[];for(Fe=0,Ue=0;Fe<Se.length-1;++Fe)for(;Ue<Se[Fe+1];++Ue)ze[Ue]=Fe;function Ye(at,ct){for(var st=0;st<at.length;){var lt=Math.min(65535,at.length-st),ht=st+lt==at.length;for(ct.write_shift(1,+ht),ct.write_shift(2,lt),ct.write_shift(2,~lt&65535);lt-- >0;)ct[ct.l++]=at[st++]}return ct.l}function rt(at,ct){for(var st=0,lt=0,ht=Ee?new Uint16Array(32768):[];lt<at.length;){var bt=Math.min(65535,at.length-lt);if(bt<10){for(st=Pe(ct,st,+(lt+bt==at.length)),st&7&&(st+=8-(st&7)),ct.l=st/8|0,ct.write_shift(2,bt),ct.write_shift(2,~bt&65535);bt-- >0;)ct[ct.l++]=at[lt++];st=ct.l*8;continue}st=Pe(ct,st,+(lt+bt==at.length)+2);for(var Et=0;bt-- >0;){var gt=at[lt];Et=(Et<<5^gt)&32767;var wt=-1,Dt=0;if((wt=ht[Et])&&(wt|=lt&-32768,wt>lt&&(wt-=32768),wt<lt))for(;at[wt+Dt]==at[lt+Dt]&&Dt<250;)++Dt;if(Dt>2){gt=ze[Dt],gt<=22?st=We(ct,st,ye[gt+1]>>1)-1:(We(ct,st,3),st+=5,We(ct,st,ye[gt-23]>>5),st+=3);var Ft=gt<8?0:gt-4>>2;Ft>0&&(Ke(ct,st,Dt-Se[gt]),st+=Ft),gt=ke[lt-wt],st=We(ct,st,ye[gt]>>3),st-=3;var Kt=gt<4?0:gt-2>>1;Kt>0&&(Ke(ct,st,lt-wt-we[gt]),st+=Kt);for(var Ut=0;Ut<Dt;++Ut)ht[Et]=lt&32767,Et=(Et<<5^at[lt])&32767,++lt;bt-=Dt-1}else gt<=143?gt=gt+48:st=He(ct,st,1),st=We(ct,st,ye[gt]),ht[Et]=lt&32767,++lt}st=We(ct,st,0)-1}return ct.l=(st+7)/8|0,ct.l}return function(ct,st){return ct.length<8?Ye(ct,st):rt(ct,st)}}();function Le(ue){var ke=new_buf(50+Math.floor(ue.length*1.1)),Fe=Ae(ue,ke);return ke.slice(0,Fe)}var Xe=Ee?new Uint16Array(32768):nt(32768),Qe=Ee?new Uint16Array(32768):nt(32768),et=Ee?new Uint16Array(128):nt(128),St=1,mt=1;function dt(ue,ke){var Fe=Ve(ue,ke)+257;ke+=5;var Ue=Ve(ue,ke)+1;ke+=5;var ze=Ie(ue,ke)+4;ke+=4;for(var Ye=0,rt=Ee?new Uint8Array(19):nt(19),at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ct=1,st=Ee?new Uint8Array(8):nt(8),lt=Ee?new Uint8Array(8):nt(8),ht=rt.length,bt=0;bt<ze;++bt)rt[he[bt]]=Ye=me(ue,ke),ct<Ye&&(ct=Ye),st[Ye]++,ke+=3;var Et=0;for(st[0]=0,bt=1;bt<=ct;++bt)lt[bt]=Et=Et+st[bt-1]<<1;for(bt=0;bt<ht;++bt)(Et=rt[bt])!=0&&(at[bt]=lt[Et]++);var gt=0;for(bt=0;bt<ht;++bt)if(gt=rt[bt],gt!=0){Et=ye[at[bt]]>>8-gt;for(var wt=(1<<7-gt)-1;wt>=0;--wt)et[Et|wt<<gt]=gt&7|bt<<3}var Dt=[];for(ct=1;Dt.length<Fe+Ue;)switch(Et=et[Me(ue,ke)],ke+=Et&7,Et>>>=3){case 16:for(Ye=3+Be(ue,ke),ke+=2,Et=Dt[Dt.length-1];Ye-- >0;)Dt.push(Et);break;case 17:for(Ye=3+me(ue,ke),ke+=3;Ye-- >0;)Dt.push(0);break;case 18:for(Ye=11+Me(ue,ke),ke+=7;Ye-- >0;)Dt.push(0);break;default:Dt.push(Et),ct<Et&&(ct=Et);break}var Ft=Dt.slice(0,Fe),Kt=Dt.slice(Fe);for(bt=Fe;bt<286;++bt)Ft[bt]=0;for(bt=Ue;bt<30;++bt)Kt[bt]=0;return St=ot(Ft,Xe,286),mt=ot(Kt,Qe,30),ke}function jt(ue,ke){if(ue[0]==3&&!(ue[1]&3))return[new_raw_buf(ke),2];for(var Fe=0,Ue=0,ze=new_unsafe_buf(ke||1<<18),Ye=0,rt=ze.length>>>0,at=0,ct=0;!(Ue&1);){if(Ue=me(ue,Fe),Fe+=3,Ue>>>1)Ue>>1==1?(at=9,ct=5):(Fe=dt(ue,Fe),at=St,ct=mt);else{Fe&7&&(Fe+=8-(Fe&7));var st=ue[Fe>>>3]|ue[(Fe>>>3)+1]<<8;if(Fe+=32,st>0)for(!ke&&rt<Ye+st&&(ze=Ge(ze,Ye+st),rt=ze.length);st-- >0;)ze[Ye++]=ue[Fe>>>3],Fe+=8;continue}for(;;){!ke&&rt<Ye+32767&&(ze=Ge(ze,Ye+32767),rt=ze.length);var lt=Ne(ue,Fe,at),ht=Ue>>>1==1?Ze[lt]:Xe[lt];if(Fe+=ht&15,ht>>>=4,!(ht>>>8&255))ze[Ye++]=ht;else{if(ht==256)break;ht-=257;var bt=ht<8?0:ht-4>>2;bt>5&&(bt=0);var Et=Ye+Se[ht];bt>0&&(Et+=Ne(ue,Fe,bt),Fe+=bt),lt=Ne(ue,Fe,ct),ht=Ue>>>1==1?Re[lt]:Qe[lt],Fe+=ht&15,ht>>>=4;var gt=ht<4?0:ht-2>>1,wt=we[ht];for(gt>0&&(wt+=Ne(ue,Fe,gt),Fe+=gt),!ke&&rt<Et&&(ze=Ge(ze,Et+100),rt=ze.length);Ye<Et;)ze[Ye]=ze[Ye-wt],++Ye}}}return ke?[ze,Fe+7>>>3]:[ze.slice(0,Ye),Fe+7>>>3]}function Ct(ue,ke){var Fe=ue.slice(ue.l||0),Ue=jt(Fe,ke);return ue.l+=Ue[1],Ue[0]}function Rt(ue,ke){if(ue)typeof console<"u"&&console.error(ke);else throw new Error(ke)}function ur(ue,ke){var Fe=ue;prep_blob(Fe,0);var Ue=[],ze=[],Ye={FileIndex:Ue,FullPaths:ze};Y(Ye,{root:ke.root});for(var rt=Fe.length-4;(Fe[rt]!=80||Fe[rt+1]!=75||Fe[rt+2]!=5||Fe[rt+3]!=6)&&rt>=0;)--rt;Fe.l=rt+4,Fe.l+=4;var at=Fe.read_shift(2);Fe.l+=6;var ct=Fe.read_shift(4);for(Fe.l=ct,rt=0;rt<at;++rt){Fe.l+=20;var st=Fe.read_shift(4),lt=Fe.read_shift(4),ht=Fe.read_shift(2),bt=Fe.read_shift(2),Et=Fe.read_shift(2);Fe.l+=8;var gt=Fe.read_shift(4),wt=A(Fe.slice(Fe.l+ht,Fe.l+ht+bt));Fe.l+=ht+bt+Et;var Dt=Fe.l;Fe.l=gt+4,wt&&wt[1]&&((wt[1]||{}).usz&&(lt=wt[1].usz),(wt[1]||{}).csz&&(st=wt[1].csz)),Gt(Fe,st,lt,Ye,wt),Fe.l=Dt}return Ye}function Gt(ue,ke,Fe,Ue,ze){ue.l+=2;var Ye=ue.read_shift(2),rt=ue.read_shift(2),at=T(ue);if(Ye&8257)throw new Error("Unsupported ZIP encryption");for(var ct=ue.read_shift(4),st=ue.read_shift(4),lt=ue.read_shift(4),ht=ue.read_shift(2),bt=ue.read_shift(2),Et="",gt=0;gt<ht;++gt)Et+=String.fromCharCode(ue[ue.l++]);if(bt){var wt=A(ue.slice(ue.l,ue.l+bt));(wt[21589]||{}).mt&&(at=wt[21589].mt),(wt[1]||{}).usz&&(lt=wt[1].usz),(wt[1]||{}).csz&&(st=wt[1].csz),ze&&((ze[21589]||{}).mt&&(at=ze[21589].mt),(ze[1]||{}).usz&&(lt=wt[1].usz),(ze[1]||{}).csz&&(st=wt[1].csz))}ue.l+=bt;var Dt=ue.slice(ue.l,ue.l+st);switch(rt){case 8:Dt=ee(ue,lt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+rt)}var Ft=!1;Ye&8&&(ct=ue.read_shift(4),ct==134695760&&(ct=ue.read_shift(4),Ft=!0),st=ue.read_shift(4),lt=ue.read_shift(4)),st!=ke&&Rt(Ft,"Bad compressed size: "+ke+" != "+st),lt!=Fe&&Rt(Ft,"Bad uncompressed size: "+Fe+" != "+lt),ir(Ue,Et,Dt,{unsafe:!0,mt:at})}function Nt(ue,ke){var Fe=ke||{},Ue=[],ze=[],Ye=new_buf(1),rt=Fe.compression?8:0,at=0,ct=0,st=0,lt=0,ht=0,bt=ue.FullPaths[0],Et=bt,gt=ue.FileIndex[0],wt=[],Dt=0;for(ct=1;ct<ue.FullPaths.length;++ct)if(Et=ue.FullPaths[ct].slice(bt.length),gt=ue.FileIndex[ct],!(!gt.size||!gt.content||Et=="Sh33tJ5")){var Ft=lt,Kt=new_buf(Et.length);for(st=0;st<Et.length;++st)Kt.write_shift(1,Et.charCodeAt(st)&127);Kt=Kt.slice(0,Kt.l),wt[ht]=typeof gt.content=="string"?CRC32.bstr(gt.content,0):CRC32.buf(gt.content,0);var Ut=typeof gt.content=="string"?s2a(gt.content):gt.content;rt==8&&(Ut=pe(Ut)),Ye=new_buf(30),Ye.write_shift(4,67324752),Ye.write_shift(2,20),Ye.write_shift(2,at),Ye.write_shift(2,rt),gt.mt?C(Ye,gt.mt):Ye.write_shift(4,0),Ye.write_shift(-4,wt[ht]),Ye.write_shift(4,Ut.length),Ye.write_shift(4,gt.content.length),Ye.write_shift(2,Kt.length),Ye.write_shift(2,0),lt+=Ye.length,Ue.push(Ye),lt+=Kt.length,Ue.push(Kt),lt+=Ut.length,Ue.push(Ut),Ye=new_buf(46),Ye.write_shift(4,33639248),Ye.write_shift(2,0),Ye.write_shift(2,20),Ye.write_shift(2,at),Ye.write_shift(2,rt),Ye.write_shift(4,0),Ye.write_shift(-4,wt[ht]),Ye.write_shift(4,Ut.length),Ye.write_shift(4,gt.content.length),Ye.write_shift(2,Kt.length),Ye.write_shift(2,0),Ye.write_shift(2,0),Ye.write_shift(2,0),Ye.write_shift(2,0),Ye.write_shift(4,0),Ye.write_shift(4,Ft),Dt+=Ye.l,ze.push(Ye),Dt+=Kt.length,ze.push(Kt),++ht}return Ye=new_buf(22),Ye.write_shift(4,101010256),Ye.write_shift(2,0),Ye.write_shift(2,0),Ye.write_shift(2,ht),Ye.write_shift(2,ht),Ye.write_shift(4,Dt),Ye.write_shift(4,lt),Ye.write_shift(2,0),bconcat([bconcat(Ue),bconcat(ze),Ye])}var er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Mt(ue,ke){if(ue.ctype)return ue.ctype;var Fe=ue.name||"",Ue=Fe.match(/\.([^\.]+)$/);return Ue&&er[Ue[1]]||ke&&(Ue=(Fe=ke).match(/[\.\\]([^\.\\])+$/),Ue&&er[Ue[1]])?er[Ue[1]]:"application/octet-stream"}function kt(ue){for(var ke=Base64_encode(ue),Fe=[],Ue=0;Ue<ke.length;Ue+=76)Fe.push(ke.slice(Ue,Ue+76));return Fe.join(`\r
`)+`\r
`}function tr(ue){var ke=ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(st){var lt=st.charCodeAt(0).toString(16).toUpperCase();return"="+(lt.length==1?"0"+lt:lt)});ke=ke.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ke.charAt(0)==`
`&&(ke="=0D"+ke.slice(1)),ke=ke.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Fe=[],Ue=ke.split(`\r
`),ze=0;ze<Ue.length;++ze){var Ye=Ue[ze];if(Ye.length==0){Fe.push("");continue}for(var rt=0;rt<Ye.length;){var at=76,ct=Ye.slice(rt,rt+at);ct.charAt(at-1)=="="?at--:ct.charAt(at-2)=="="?at-=2:ct.charAt(at-3)=="="&&(at-=3),ct=Ye.slice(rt,rt+at),rt+=at,rt<Ye.length&&(ct+="="),Fe.push(ct)}}return Fe.join(`\r
`)}function Vt(ue){for(var ke=[],Fe=0;Fe<ue.length;++Fe){for(var Ue=ue[Fe];Fe<=ue.length&&Ue.charAt(Ue.length-1)=="=";)Ue=Ue.slice(0,Ue.length-1)+ue[++Fe];ke.push(Ue)}for(var ze=0;ze<ke.length;++ze)ke[ze]=ke[ze].replace(/[=][0-9A-Fa-f]{2}/g,function(Ye){return String.fromCharCode(parseInt(Ye.slice(1),16))});return s2a(ke.join(`\r
`))}function Bt(ue,ke,Fe){for(var Ue="",ze="",Ye="",rt,at=0;at<10;++at){var ct=ke[at];if(!ct||ct.match(/^\s*$/))break;var st=ct.match(/^(.*?):\s*([^\s].*)$/);if(st)switch(st[1].toLowerCase()){case"content-location":Ue=st[2].trim();break;case"content-type":Ye=st[2].trim();break;case"content-transfer-encoding":ze=st[2].trim();break}}switch(++at,ze.toLowerCase()){case"base64":rt=s2a(Base64_decode(ke.slice(at).join("")));break;case"quoted-printable":rt=Vt(ke.slice(at));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ze)}var lt=ir(ue,Ue.slice(Fe.length),rt,{unsafe:!0});Ye&&(lt.ctype=Ye)}function ar(ue,ke){if(oe(ue.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Fe=ke&&ke.root||"",Ue=(has_buf&&Buffer.isBuffer(ue)?ue.toString("binary"):oe(ue)).split(`\r
`),ze=0,Ye="";for(ze=0;ze<Ue.length;++ze)if(Ye=Ue[ze],!!/^Content-Location:/i.test(Ye)&&(Ye=Ye.slice(Ye.indexOf("file")),Fe||(Fe=Ye.slice(0,Ye.lastIndexOf("/")+1)),Ye.slice(0,Fe.length)!=Fe))for(;Fe.length>0&&(Fe=Fe.slice(0,Fe.length-1),Fe=Fe.slice(0,Fe.lastIndexOf("/")+1),Ye.slice(0,Fe.length)!=Fe););var rt=(Ue[1]||"").match(/boundary="(.*?)"/);if(!rt)throw new Error("MAD cannot find boundary");var at="--"+(rt[1]||""),ct=[],st=[],lt={FileIndex:ct,FullPaths:st};Y(lt);var ht,bt=0;for(ze=0;ze<Ue.length;++ze){var Et=Ue[ze];Et!==at&&Et!==at+"--"||(bt++&&Bt(lt,Ue.slice(ht,ze),Fe),ht=ze)}return lt}function qt(ue,ke){var Fe=ke||{},Ue=Fe.boundary||"SheetJS";Ue="------="+Ue;for(var ze=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ue.slice(2)+'"',"","",""],Ye=ue.FullPaths[0],rt=Ye,at=ue.FileIndex[0],ct=1;ct<ue.FullPaths.length;++ct)if(rt=ue.FullPaths[ct].slice(Ye.length),at=ue.FileIndex[ct],!(!at.size||!at.content||rt=="Sh33tJ5")){rt=rt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Dt){return"_x"+Dt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Dt){return"_u"+Dt.charCodeAt(0).toString(16)+"_"});for(var st=at.content,lt=has_buf&&Buffer.isBuffer(st)?st.toString("binary"):oe(st),ht=0,bt=Math.min(1024,lt.length),Et=0,gt=0;gt<=bt;++gt)(Et=lt.charCodeAt(gt))>=32&&Et<128&&++ht;var wt=ht>=bt*4/5;ze.push(Ue),ze.push("Content-Location: "+(Fe.root||"file:///C:/SheetJS/")+rt),ze.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),ze.push("Content-Type: "+Mt(at,rt)),ze.push(""),ze.push(wt?tr(lt):kt(lt))}return ze.push(Ue+`--\r
`),ze.join(`\r
`)}function Tt(ue){var ke={};return Y(ke,ue),ke}function ir(ue,ke,Fe,Ue){var ze=Ue&&Ue.unsafe;ze||Y(ue);var Ye=!ze&&CFB.find(ue,ke);if(!Ye){var rt=ue.FullPaths[0];ke.slice(0,rt.length)==rt?rt=ke:(rt.slice(-1)!="/"&&(rt+="/"),rt=(rt+ke).replace("//","/")),Ye={name:S(ke),type:2},ue.FileIndex.push(Ye),ue.FullPaths.push(rt),ze||CFB.utils.cfb_gc(ue)}return Ye.content=Fe,Ye.size=Fe?Fe.length:0,Ue&&(Ue.CLSID&&(Ye.clsid=Ue.CLSID),Ue.mt&&(Ye.mt=Ue.mt),Ue.ct&&(Ye.ct=Ue.ct)),Ye}function qe(ue,ke){Y(ue);var Fe=CFB.find(ue,ke);if(Fe){for(var Ue=0;Ue<ue.FileIndex.length;++Ue)if(ue.FileIndex[Ue]==Fe)return ue.FileIndex.splice(Ue,1),ue.FullPaths.splice(Ue,1),!0}return!1}function Oe(ue,ke,Fe){Y(ue);var Ue=CFB.find(ue,ke);if(Ue){for(var ze=0;ze<ue.FileIndex.length;++ze)if(ue.FileIndex[ze]==Ue)return ue.FileIndex[ze].name=S(Fe),ue.FullPaths[ze]=Fe,!0}return!1}function De(ue){ge(ue,!0)}return _.find=_e,_.read=ne,_.parse=M,_.write=ie,_.writeFile=se,_.utils={cfb_new:Tt,cfb_add:ir,cfb_del:qe,cfb_mov:Oe,cfb_gc:De,ReadShift,CheckField,prep_blob,bconcat,use_zlib:j,_deflateRaw:Le,_inflateRaw:Ct,consts:te},_}(),_fs;function set_fs(n){_fs=n}function blobify(n){return typeof n=="string"?s2ab(n):Array.isArray(n)?a2u(n):n}function write_dl(n,_,x){if(typeof _fs<"u"&&_fs.writeFileSync)return x?_fs.writeFileSync(n,_,x):_fs.writeFileSync(n,_);if(typeof Deno<"u"){if(x&&typeof _=="string")switch(x){case"utf8":_=new TextEncoder(x).encode(_);break;case"binary":_=s2ab(_);break;default:throw new Error("Unsupported encoding "+x)}return Deno.writeFileSync(n,_)}var E=x=="utf8"?utf8write(_):_;if(typeof IE_SaveFile<"u")return IE_SaveFile(E,n);if(typeof Blob<"u"){var S=new Blob([blobify(E)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(S,n);if(typeof saveAs<"u")return saveAs(S,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var C=URL.createObjectURL(S);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(C)},6e4),chrome.downloads.download({url:C,filename:n,saveAs:!0});var T=document.createElement("a");if(T.download!=null)return T.download=n,T.href=C,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(C)},6e4),C}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var A=File(n);return A.open("w"),A.encoding="binary",Array.isArray(_)&&(_=a2s(_)),A.write(_),A.close(),_}catch(B){if(!B.message||!B.message.match(/onstruct/))throw B}throw new Error("cannot save file "+n)}function read_binary(n){if(typeof _fs<"u")return _fs.readFileSync(n);if(typeof Deno<"u")return Deno.readFileSync(n);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var _=File(n);_.open("r"),_.encoding="binary";var x=_.read();return _.close(),x}catch(E){if(!E.message||!E.message.match(/onstruct/))throw E}throw new Error("Cannot access file "+n)}function keys$1(n){for(var _=Object.keys(n),x=[],E=0;E<_.length;++E)Object.prototype.hasOwnProperty.call(n,_[E])&&x.push(_[E]);return x}function evert_key(n,_){for(var x=[],E=keys$1(n),S=0;S!==E.length;++S)x[n[E[S]][_]]==null&&(x[n[E[S]][_]]=E[S]);return x}function evert(n){for(var _=[],x=keys$1(n),E=0;E!==x.length;++E)_[n[x[E]]]=x[E];return _}function evert_num(n){for(var _=[],x=keys$1(n),E=0;E!==x.length;++E)_[n[x[E]]]=parseInt(x[E],10);return _}function evert_arr(n){for(var _=[],x=keys$1(n),E=0;E!==x.length;++E)_[n[x[E]]]==null&&(_[n[x[E]]]=[]),_[n[x[E]]].push(x[E]);return _}var basedate=new Date(1899,11,30,0,0,0);function datenum(n,_){var x=n.getTime();_&&(x-=1462*24*60*60*1e3);var E=basedate.getTime()+(n.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(x-E)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(n){var _=new Date;return _.setTime(n*24*60*60*1e3+dnthresh),_.getTimezoneOffset()!==refoffset&&_.setTime(_.getTime()+(_.getTimezoneOffset()-refoffset)*6e4),_}function parse_isodur(n){var _=0,x=0,E=!1,S=n.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!S)throw new Error("|"+n+"| is not an ISO8601 Duration");for(var C=1;C!=S.length;++C)if(S[C]){switch(x=1,C>3&&(E=!0),S[C].slice(S[C].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+S[C].slice(S[C].length-1));case"D":x*=24;case"H":x*=60;case"M":if(E)x*=60;else throw new Error("Unsupported ISO Duration Field: M")}_+=x*parseInt(S[C],10)}return _}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(n,_){var x=new Date(n);if(good_pd)return _>0?x.setTime(x.getTime()+x.getTimezoneOffset()*60*1e3):_<0&&x.setTime(x.getTime()-x.getTimezoneOffset()*60*1e3),x;if(n instanceof Date)return n;if(good_pd_date.getFullYear()==1917&&!isNaN(x.getFullYear())){var E=x.getFullYear();return n.indexOf(""+E)>-1||x.setFullYear(x.getFullYear()+100),x}var S=n.match(/\d+/g)||["2017","2","19","0","0","0"],C=new Date(+S[0],+S[1]-1,+S[2],+S[3]||0,+S[4]||0,+S[5]||0);return n.indexOf("Z")>-1&&(C=new Date(C.getTime()-C.getTimezoneOffset()*60*1e3)),C}function cc2str(n,_){if(has_buf&&Buffer.isBuffer(n)){if(_&&buf_utf16le){if(n[0]==255&&n[1]==254)return utf8write(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return utf8write(utf16beread(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(_){if(n[0]==255&&n[1]==254)return utf8write(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return utf8write(new TextDecoder("utf-16be").decode(n.slice(2)))}var x={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(C){return x[C]||C})}catch{}for(var E=[],S=0;S!=n.length;++S)E.push(String.fromCharCode(n[S]));return E.join("")}function dup(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var _={};for(var x in n)Object.prototype.hasOwnProperty.call(n,x)&&(_[x]=dup(n[x]));return _}function fill(n,_){for(var x="";x.length<_;)x+=n;return x}function fuzzynum(n){var _=Number(n);if(!isNaN(_))return isFinite(_)?_:NaN;if(!/\d/.test(n))return _;var x=1,E=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return x*=100,""});return!isNaN(_=Number(E))||(E=E.replace(/[(](.*)[)]/,function(S,C){return x=-x,C}),!isNaN(_=Number(E)))?_/x:_}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(n){return n[2]?n[3]?n[4]?new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],+n[4],parseFloat(n[3])*1e3):new Date(1899,11,30,n[7]=="p"?12:0,+n[1],+n[2],parseFloat(n[3])*1e3):n[5]?new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],+n[5],n[6]?parseFloat(n[6])*1e3:0):new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],0,0):new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(n){var _=n.toLowerCase(),x=_.replace(/\s+/g," ").trim(),E=x.match(FDRE1);if(E)return fuzzytime1(E);var S=new Date(n),C=new Date(NaN),T=S.getYear();S.getMonth();var A=S.getDate();if(isNaN(A))return C;if(_.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(_=_.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),_.length>3&&lower_months.indexOf(_)==-1)return C}else if(_.replace(/[ap]m?/,"").match(/[a-z]/))return C;return T<0||T>8099||n.match(/[^-0-9:,\/\\]/)?C:S}var split_regex=function(){var n="abacaba".split(/(:?b)/i).length==5;return function(x,E,S){if(n||typeof E=="string")return x.split(E);for(var C=x.split(E),T=[C[0]],A=1;A<C.length;++A)T.push(S),T.push(C[A]);return T}}();function getdatastr(n){return n?n.content&&n.type?cc2str(n.content,!0):n.data?debom(n.data):n.asNodeBuffer&&has_buf?debom(n.asNodeBuffer().toString("binary")):n.asBinary?debom(n.asBinary()):n._data&&n._data.getContent?debom(cc2str(Array.prototype.slice.call(n._data.getContent(),0))):null:null}function getdatabin(n){if(!n)return null;if(n.data)return char_codes(n.data);if(n.asNodeBuffer&&has_buf)return n.asNodeBuffer();if(n._data&&n._data.getContent){var _=n._data.getContent();return typeof _=="string"?char_codes(_):Array.prototype.slice.call(_)}return n.content&&n.type?n.content:null}function getdata(n){return n&&n.name.slice(-4)===".bin"?getdatabin(n):getdatastr(n)}function safegetzipfile(n,_){for(var x=n.FullPaths||keys$1(n.files),E=_.toLowerCase().replace(/[\/]/g,"\\"),S=E.replace(/\\/g,"/"),C=0;C<x.length;++C){var T=x[C].replace(/^Root Entry[\/]/,"").toLowerCase();if(E==T||S==T)return n.files?n.files[x[C]]:n.FileIndex[C]}return null}function getzipfile(n,_){var x=safegetzipfile(n,_);if(x==null)throw new Error("Cannot find file "+_+" in zip");return x}function getzipdata(n,_,x){if(!x)return getdata(getzipfile(n,_));if(!_)return null;try{return getzipdata(n,_)}catch{return null}}function getzipstr(n,_,x){if(!x)return getdatastr(getzipfile(n,_));if(!_)return null;try{return getzipstr(n,_)}catch{return null}}function getzipbin(n,_,x){if(!x)return getdatabin(getzipfile(n,_));if(!_)return null;try{return getzipbin(n,_)}catch{return null}}function zipentries(n){for(var _=n.FullPaths||keys$1(n.files),x=[],E=0;E<_.length;++E)_[E].slice(-1)!="/"&&x.push(_[E].replace(/^Root Entry[\/]/,""));return x.sort()}function zip_add_file(n,_,x){if(n.FullPaths){if(typeof x=="string"){var E;return has_buf?E=Buffer_from(x):E=utf8decode(x),CFB.utils.cfb_add(n,_,E)}CFB.utils.cfb_add(n,_,x)}else n.file(_,x)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(n,_){switch(_.type){case"base64":return CFB.read(n,{type:"base64"});case"binary":return CFB.read(n,{type:"binary"});case"buffer":case"array":return CFB.read(n,{type:"buffer"})}throw new Error("Unrecognized type "+_.type)}function resolve_path(n,_){if(n.charAt(0)=="/")return n.slice(1);var x=_.split("/");_.slice(-1)!="/"&&x.pop();for(var E=n.split("/");E.length!==0;){var S=E.shift();S===".."?x.pop():S!=="."&&x.push(S)}return x.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(n,_,x){for(var E={},S=0,C=0;S!==n.length&&!((C=n.charCodeAt(S))===32||C===10||C===13);++S);if(_||(E[0]=n.slice(0,S)),S===n.length)return E;var T=n.match(attregexg),A=0,B="",I=0,M="",O="",D=1;if(T)for(I=0;I!=T.length;++I){for(O=T[I],C=0;C!=O.length&&O.charCodeAt(C)!==61;++C);for(M=O.slice(0,C).trim();O.charCodeAt(C+1)==32;)++C;for(D=(S=O.charCodeAt(C+1))==34||S==39?1:0,B=O.slice(C+1+D,O.length-D),A=0;A!=M.length&&M.charCodeAt(A)!==58;++A);if(A===M.length)M.indexOf("_")>0&&(M=M.slice(0,M.indexOf("_"))),E[M]=B,x||(E[M.toLowerCase()]=B);else{var L=(A===5&&M.slice(0,5)==="xmlns"?"xmlns":"")+M.slice(A+1);if(E[L]&&M.slice(A-3,A)=="ext")continue;E[L]=B,x||(E[L.toLowerCase()]=B)}}return E}function strip_ns(n){return n.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var n=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,_=/_x([\da-fA-F]{4})_/ig;function x(E){var S=E+"",C=S.indexOf("<![CDATA[");if(C==-1)return S.replace(n,function(A,B){return encodings[A]||String.fromCharCode(parseInt(B,A.indexOf("x")>-1?16:10))||A}).replace(_,function(A,B){return String.fromCharCode(parseInt(B,16))});var T=S.indexOf("]]>");return x(S.slice(0,C))+S.slice(C+9,T)+x(S.slice(T+3))}return function(S,C){var T=x(S);return C?T.replace(/\r\n/g,`
`):T}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(n){var _=n+"";return _.replace(decregex,function(x){return rencoding[x]}).replace(charegex,function(x){return"_x"+("000"+x.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(n){return escapexml(n).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(n){var _=n+"";return _.replace(decregex,function(x){return rencoding[x]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(x){return"&#x"+("000"+x.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(n){var _=n+"";return _.replace(decregex,function(x){return rencoding[x]}).replace(htmlcharegex,function(x){return"&#x"+x.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var n=/&#(\d+);/g;function _(x,E){return String.fromCharCode(parseInt(E,10))}return function(E){return E.replace(n,_)}}();function xlml_unfixstr(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(n){switch(n){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(n){for(var _="",x=0,E=0,S=0,C=0,T=0,A=0;x<n.length;){if(E=n.charCodeAt(x++),E<128){_+=String.fromCharCode(E);continue}if(S=n.charCodeAt(x++),E>191&&E<224){T=(E&31)<<6,T|=S&63,_+=String.fromCharCode(T);continue}if(C=n.charCodeAt(x++),E<240){_+=String.fromCharCode((E&15)<<12|(S&63)<<6|C&63);continue}T=n.charCodeAt(x++),A=((E&7)<<18|(S&63)<<12|(C&63)<<6|T&63)-65536,_+=String.fromCharCode(55296+(A>>>10&1023)),_+=String.fromCharCode(56320+(A&1023))}return _}function utf8readb(n){var _=new_raw_buf(2*n.length),x,E,S=1,C=0,T=0,A;for(E=0;E<n.length;E+=S)S=1,(A=n.charCodeAt(E))<128?x=A:A<224?(x=(A&31)*64+(n.charCodeAt(E+1)&63),S=2):A<240?(x=(A&15)*4096+(n.charCodeAt(E+1)&63)*64+(n.charCodeAt(E+2)&63),S=3):(S=4,x=(A&7)*262144+(n.charCodeAt(E+1)&63)*4096+(n.charCodeAt(E+2)&63)*64+(n.charCodeAt(E+3)&63),x-=65536,T=55296+(x>>>10&1023),x=56320+(x&1023)),T!==0&&(_[C++]=T&255,_[C++]=T>>>8,T=0),_[C++]=x%256,_[C++]=x>>>8;return _.slice(0,C).toString("ucs2")}function utf8readc(n){return Buffer_from(n,"binary").toString("utf8")}var utf8corpus="foo bar baz",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(n){return Buffer_from(n,"utf8").toString("binary")}:function(n){for(var _=[],x=0,E=0,S=0;x<n.length;)switch(E=n.charCodeAt(x++),!0){case E<128:_.push(String.fromCharCode(E));break;case E<2048:_.push(String.fromCharCode(192+(E>>6))),_.push(String.fromCharCode(128+(E&63)));break;case(E>=55296&&E<57344):E-=55296,S=n.charCodeAt(x++)-56320+(E<<10),_.push(String.fromCharCode(240+(S>>18&7))),_.push(String.fromCharCode(144+(S>>12&63))),_.push(String.fromCharCode(128+(S>>6&63))),_.push(String.fromCharCode(128+(S&63)));break;default:_.push(String.fromCharCode(224+(E>>12))),_.push(String.fromCharCode(128+(E>>6&63))),_.push(String.fromCharCode(128+(E&63)))}return _.join("")},matchtag=function(){var n={};return function(x,E){var S=x+"|"+(E||"");return n[S]?n[S]:n[S]=new RegExp("<(?:\\w+:)?"+x+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+x+">",E||"")}}(),htmldecode=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(_){return[new RegExp("&"+_[0]+";","ig"),_[1]]});return function(x){for(var E=x.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),S=0;S<n.length;++S)E=E.replace(n[S][0],n[S][1]);return E}}(),vtregex=function(){var n={};return function(x){return n[x]!==void 0?n[x]:n[x]=new RegExp("<(?:vt:)?"+x+">([\\s\\S]*?)</(?:vt:)?"+x+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(n,_){var x=parsexmltag(n),E=n.match(vtregex(x.baseType))||[],S=[];if(E.length!=x.size){if(_.WTF)throw new Error("unexpected vector length "+E.length+" != "+x.size);return S}return E.forEach(function(C){var T=C.replace(vtvregex,"").match(vtmregex);T&&S.push({v:utf8read(T[2]),t:T[1]})}),S}var wtregex=/(^\s|\s$|\n)/;function writetag(n,_){return"<"+n+(_.match(wtregex)?' xml:space="preserve"':"")+">"+_+"</"+n+">"}function wxt_helper(n){return keys$1(n).map(function(_){return" "+_+'="'+n[_]+'"'}).join("")}function writextag(n,_,x){return"<"+n+(x!=null?wxt_helper(x):"")+(_!=null?(_.match(wtregex)?' xml:space="preserve"':"")+">"+_+"</"+n:"/")+">"}function write_w3cdtf(n,_){try{return n.toISOString().replace(/\.\d*/,"")}catch(x){if(_)throw x}return""}function write_vt(n,_){switch(typeof n){case"string":var x=writextag("vt:lpwstr",escapexml(n));return _&&(x=x.replace(/&quot;/g,"_x0022_")),x;case"number":return writextag((n|0)==n?"vt:i4":"vt:r8",escapexml(String(n)));case"boolean":return writextag("vt:bool",n?"true":"false")}if(n instanceof Date)return writextag("vt:filetime",write_w3cdtf(n));throw new Error("Unable to serialize "+n)}function xlml_normalize(n){if(has_buf&&Buffer.isBuffer(n))return n.toString("utf8");if(typeof n=="string")return n;if(typeof Uint8Array<"u"&&n instanceof Uint8Array)return utf8read(a2s(ab2a(n)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(n,_){for(var x=1-2*(n[_+7]>>>7),E=((n[_+7]&127)<<4)+(n[_+6]>>>4&15),S=n[_+6]&15,C=5;C>=0;--C)S=S*256+n[_+C];return E==2047?S==0?x*(1/0):NaN:(E==0?E=-1022:(E-=1023,S+=Math.pow(2,52)),x*Math.pow(2,E-52)*S)}function write_double_le(n,_,x){var E=(_<0||1/_==-1/0?1:0)<<7,S=0,C=0,T=E?-_:_;isFinite(T)?T==0?S=C=0:(S=Math.floor(Math.log(T)/Math.LN2),C=T*Math.pow(2,52-S),S<=-1023&&(!isFinite(C)||C<Math.pow(2,52))?S=-1022:(C-=Math.pow(2,52),S+=1023)):(S=2047,C=isNaN(_)?26985:0);for(var A=0;A<=5;++A,C/=256)n[x+A]=C&255;n[x+6]=(S&15)<<4|C&15,n[x+7]=S>>4|E}var ___toBuffer=function(n){for(var _=[],x=10240,E=0;E<n[0].length;++E)if(n[0][E])for(var S=0,C=n[0][E].length;S<C;S+=x)_.push.apply(_,n[0][E].slice(S,S+x));return _},__toBuffer=has_buf?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(_){return Buffer.isBuffer(_)?_:Buffer_from(_)})):___toBuffer(n)}:___toBuffer,___utf16le=function(n,_,x){for(var E=[],S=_;S<x;S+=2)E.push(String.fromCharCode(__readUInt16LE(n,S)));return E.join("").replace(chr0,"")},__utf16le=has_buf?function(n,_,x){return!Buffer.isBuffer(n)||!buf_utf16le?___utf16le(n,_,x):n.toString("utf16le",_,x).replace(chr0,"")}:___utf16le,___hexlify=function(n,_,x){for(var E=[],S=_;S<_+x;++S)E.push(("0"+n[S].toString(16)).slice(-2));return E.join("")},__hexlify=has_buf?function(n,_,x){return Buffer.isBuffer(n)?n.toString("hex",_,_+x):___hexlify(n,_,x)}:___hexlify,___utf8=function(n,_,x){for(var E=[],S=_;S<x;S++)E.push(String.fromCharCode(__readUInt8(n,S)));return E.join("")},__utf8=has_buf?function n(_,x,E){return Buffer.isBuffer(_)?_.toString("utf8",x,E):___utf8(_,x,E)}:___utf8,___lpstr=function(n,_){var x=__readUInt32LE(n,_);return x>0?__utf8(n,_+4,_+4+x-1):""},__lpstr=___lpstr,___cpstr=function(n,_){var x=__readUInt32LE(n,_);return x>0?__utf8(n,_+4,_+4+x-1):""},__cpstr=___cpstr,___lpwstr=function(n,_){var x=2*__readUInt32LE(n,_);return x>0?__utf8(n,_+4,_+4+x-1):""},__lpwstr=___lpwstr,___lpp4=function n(_,x){var E=__readUInt32LE(_,x);return E>0?__utf16le(_,x+4,x+4+E):""},__lpp4=___lpp4,___8lpp4=function(n,_){var x=__readUInt32LE(n,_);return x>0?__utf8(n,_+4,_+4+x):""},__8lpp4=___8lpp4,___double=function(n,_){return read_double_le(n,_)},__double=___double,is_buf=function n(_){return Array.isArray(_)||typeof Uint8Array<"u"&&_ instanceof Uint8Array};has_buf&&(__lpstr=function(_,x){if(!Buffer.isBuffer(_))return ___lpstr(_,x);var E=_.readUInt32LE(x);return E>0?_.toString("utf8",x+4,x+4+E-1):""},__cpstr=function(_,x){if(!Buffer.isBuffer(_))return ___cpstr(_,x);var E=_.readUInt32LE(x);return E>0?_.toString("utf8",x+4,x+4+E-1):""},__lpwstr=function(_,x){if(!Buffer.isBuffer(_)||!buf_utf16le)return ___lpwstr(_,x);var E=2*_.readUInt32LE(x);return _.toString("utf16le",x+4,x+4+E-1)},__lpp4=function(_,x){if(!Buffer.isBuffer(_)||!buf_utf16le)return ___lpp4(_,x);var E=_.readUInt32LE(x);return _.toString("utf16le",x+4,x+4+E)},__8lpp4=function(_,x){if(!Buffer.isBuffer(_))return ___8lpp4(_,x);var E=_.readUInt32LE(x);return _.toString("utf8",x+4,x+4+E)},__double=function(_,x){return Buffer.isBuffer(_)?_.readDoubleLE(x):___double(_,x)},is_buf=function(_){return Buffer.isBuffer(_)||Array.isArray(_)||typeof Uint8Array<"u"&&_ instanceof Uint8Array});var __readUInt8=function(n,_){return n[_]},__readUInt16LE=function(n,_){return n[_+1]*256+n[_]},__readInt16LE=function(n,_){var x=n[_+1]*256+n[_];return x<32768?x:(65535-x+1)*-1},__readUInt32LE=function(n,_){return n[_+3]*(1<<24)+(n[_+2]<<16)+(n[_+1]<<8)+n[_]},__readInt32LE=function(n,_){return n[_+3]<<24|n[_+2]<<16|n[_+1]<<8|n[_]},__readInt32BE=function(n,_){return n[_]<<24|n[_+1]<<16|n[_+2]<<8|n[_+3]};function ReadShift(n,_){var x="",E,S,C=[],T,A,B,I;switch(_){case"dbcs":if(I=this.l,has_buf&&Buffer.isBuffer(this)&&buf_utf16le)x=this.slice(this.l,this.l+2*n).toString("utf16le");else for(B=0;B<n;++B)x+=String.fromCharCode(__readUInt16LE(this,I)),I+=2;n*=2;break;case"utf8":x=__utf8(this,this.l,this.l+n);break;case"utf16le":n*=2,x=__utf16le(this,this.l,this.l+n);break;case"wstr":return ReadShift.call(this,n,"dbcs");case"lpstr-ansi":x=__lpstr(this,this.l),n=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":x=__cpstr(this,this.l),n=4+__readUInt32LE(this,this.l);break;case"lpwstr":x=__lpwstr(this,this.l),n=4+2*__readUInt32LE(this,this.l);break;case"lpp4":n=4+__readUInt32LE(this,this.l),x=__lpp4(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+__readUInt32LE(this,this.l),x=__8lpp4(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,x="";(T=__readUInt8(this,this.l+n++))!==0;)C.push(_getchar(T));x=C.join("");break;case"_wstr":for(n=0,x="";(T=__readUInt16LE(this,this.l+n))!==0;)C.push(_getchar(T)),n+=2;n+=2,x=C.join("");break;case"dbcs-cont":for(x="",I=this.l,B=0;B<n;++B){if(this.lens&&this.lens.indexOf(I)!==-1)return T=__readUInt8(this,I),this.l=I+1,A=ReadShift.call(this,n-B,T?"dbcs-cont":"sbcs-cont"),C.join("")+A;C.push(_getchar(__readUInt16LE(this,I))),I+=2}x=C.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(x="",I=this.l,B=0;B!=n;++B){if(this.lens&&this.lens.indexOf(I)!==-1)return T=__readUInt8(this,I),this.l=I+1,A=ReadShift.call(this,n-B,T?"dbcs-cont":"sbcs-cont"),C.join("")+A;C.push(_getchar(__readUInt8(this,I))),I+=1}x=C.join("");break;default:switch(n){case 1:return E=__readUInt8(this,this.l),this.l++,E;case 2:return E=(_==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,E;case 4:case-4:return _==="i"||!(this[this.l+3]&128)?(E=(n>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,E):(S=__readUInt32LE(this,this.l),this.l+=4,S);case 8:case-8:if(_==="f")return n==8?S=__double(this,this.l):S=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,S;n=8;case 16:x=__hexlify(this,this.l,n);break}}return this.l+=n,x}var __writeUInt32LE=function(n,_,x){n[x]=_&255,n[x+1]=_>>>8&255,n[x+2]=_>>>16&255,n[x+3]=_>>>24&255},__writeInt32LE=function(n,_,x){n[x]=_&255,n[x+1]=_>>8&255,n[x+2]=_>>16&255,n[x+3]=_>>24&255},__writeUInt16LE=function(n,_,x){n[x]=_&255,n[x+1]=_>>>8&255};function WriteShift(n,_,x){var E=0,S=0;if(x==="dbcs"){for(S=0;S!=_.length;++S)__writeUInt16LE(this,_.charCodeAt(S),this.l+2*S);E=2*_.length}else if(x==="sbcs"||x=="cpstr"){for(_=_.replace(/[^\x00-\x7F]/g,"_"),S=0;S!=_.length;++S)this[this.l+S]=_.charCodeAt(S)&255;E=_.length}else if(x==="hex"){for(;S<n;++S)this[this.l++]=parseInt(_.slice(2*S,2*S+2),16)||0;return this}else if(x==="utf16le"){var C=Math.min(this.l+n,this.length);for(S=0;S<Math.min(_.length,n);++S){var T=_.charCodeAt(S);this[this.l++]=T&255,this[this.l++]=T>>8}for(;this.l<C;)this[this.l++]=0;return this}else switch(n){case 1:E=1,this[this.l]=_&255;break;case 2:E=2,this[this.l]=_&255,_>>>=8,this[this.l+1]=_&255;break;case 3:E=3,this[this.l]=_&255,_>>>=8,this[this.l+1]=_&255,_>>>=8,this[this.l+2]=_&255;break;case 4:E=4,__writeUInt32LE(this,_,this.l);break;case 8:if(E=8,x==="f"){write_double_le(this,_,this.l);break}case 16:break;case-4:E=4,__writeInt32LE(this,_,this.l);break}return this.l+=E,this}function CheckField(n,_){var x=__hexlify(this,this.l,n.length>>1);if(x!==n)throw new Error(_+"Expected "+n+" saw "+x);this.l+=n.length>>1}function prep_blob(n,_){n.l=_,n.read_shift=ReadShift,n.chk=CheckField,n.write_shift=WriteShift}function parsenoop(n,_){n.l+=_}function new_buf(n){var _=new_raw_buf(n);return prep_blob(_,0),_}function recordhopper(n,_,x){if(n){var E,S,C;prep_blob(n,n.l||0);for(var T=n.length,A=0,B=0;n.l<T;){A=n.read_shift(1),A&128&&(A=(A&127)+((n.read_shift(1)&127)<<7));var I=XLSBRecordEnum[A]||XLSBRecordEnum[65535];for(E=n.read_shift(1),C=E&127,S=1;S<4&&E&128;++S)C+=((E=n.read_shift(1))&127)<<7*S;B=n.l+C;var M=I.f&&I.f(n,C,x);if(n.l=B,_(M,I,A))return}}}function buf_array(){var n=[],_=has_buf?256:2048,x=function(I){var M=new_buf(I);return prep_blob(M,0),M},E=x(_),S=function(){E&&(E.l&&(E.length>E.l&&(E=E.slice(0,E.l),E.l=E.length),E.length>0&&n.push(E)),E=null)},C=function(I){return E&&I<E.length-E.l?E:(S(),E=x(Math.max(I+1,_)))},T=function(){return S(),bconcat(n)},A=function(I){S(),E=I,E.l==null&&(E.l=E.length),C(_)};return{next:C,push:A,end:T,_bufs:n}}function write_record(n,_,x,E){var S=+_,C;if(!isNaN(S)){E||(E=XLSBRecordEnum[S].p||(x||[]).length||0),C=1+(S>=128?1:0)+1,E>=128&&++C,E>=16384&&++C,E>=2097152&&++C;var T=n.next(C);S<=127?T.write_shift(1,S):(T.write_shift(1,(S&127)+128),T.write_shift(1,S>>7));for(var A=0;A!=4;++A)if(E>=128)T.write_shift(1,(E&127)+128),E>>=7;else{T.write_shift(1,E);break}E>0&&is_buf(x)&&n.push(x)}}function shift_cell_xls(n,_,x){var E=dup(n);if(_.s?(E.cRel&&(E.c+=_.s.c),E.rRel&&(E.r+=_.s.r)):(E.cRel&&(E.c+=_.c),E.rRel&&(E.r+=_.r)),!x||x.biff<12){for(;E.c>=256;)E.c-=256;for(;E.r>=65536;)E.r-=65536}return E}function shift_range_xls(n,_,x){var E=dup(n);return E.s=shift_cell_xls(E.s,_.s,x),E.e=shift_cell_xls(E.e,_.s,x),E}function encode_cell_xls(n,_){if(n.cRel&&n.c<0)for(n=dup(n);n.c<0;)n.c+=_>8?16384:256;if(n.rRel&&n.r<0)for(n=dup(n);n.r<0;)n.r+=_>8?1048576:_>5?65536:16384;var x=encode_cell(n);return!n.cRel&&n.cRel!=null&&(x=fix_col(x)),!n.rRel&&n.rRel!=null&&(x=fix_row(x)),x}function encode_range_xls(n,_){return n.s.r==0&&!n.s.rRel&&n.e.r==(_.biff>=12?1048575:_.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+encode_col(n.s.c)+":"+(n.e.cRel?"":"$")+encode_col(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(_.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+encode_row(n.s.r)+":"+(n.e.rRel?"":"$")+encode_row(n.e.r):encode_cell_xls(n.s,_.biff)+":"+encode_cell_xls(n.e,_.biff)}function decode_row(n){return parseInt(unfix_row(n),10)-1}function encode_row(n){return""+(n+1)}function fix_row(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(n){return n.replace(/\$(\d+)$/,"$1")}function decode_col(n){for(var _=unfix_col(n),x=0,E=0;E!==_.length;++E)x=26*x+_.charCodeAt(E)-64;return x-1}function encode_col(n){if(n<0)throw new Error("invalid column "+n);var _="";for(++n;n;n=Math.floor((n-1)/26))_=String.fromCharCode((n-1)%26+65)+_;return _}function fix_col(n){return n.replace(/^([A-Z])/,"$$$1")}function unfix_col(n){return n.replace(/^\$([A-Z])/,"$1")}function split_cell(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(n){for(var _=0,x=0,E=0;E<n.length;++E){var S=n.charCodeAt(E);S>=48&&S<=57?_=10*_+(S-48):S>=65&&S<=90&&(x=26*x+(S-64))}return{c:x-1,r:_-1}}function encode_cell(n){for(var _=n.c+1,x="";_;_=(_-1)/26|0)x=String.fromCharCode((_-1)%26+65)+x;return x+(n.r+1)}function decode_range(n){var _=n.indexOf(":");return _==-1?{s:decode_cell(n),e:decode_cell(n)}:{s:decode_cell(n.slice(0,_)),e:decode_cell(n.slice(_+1))}}function encode_range(n,_){return typeof _>"u"||typeof _=="number"?encode_range(n.s,n.e):(typeof n!="string"&&(n=encode_cell(n)),typeof _!="string"&&(_=encode_cell(_)),n==_?n:n+":"+_)}function fix_range(n){var _=decode_range(n);return"$"+encode_col(_.s.c)+"$"+encode_row(_.s.r)+":$"+encode_col(_.e.c)+"$"+encode_row(_.e.r)}function formula_quote_sheet_name(n,_){if(!n&&!(_&&_.biff<=5&&_.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n.replace(/'/g,"''")+"'":n}function safe_decode_range(n){var _={s:{c:0,r:0},e:{c:0,r:0}},x=0,E=0,S=0,C=n.length;for(x=0;E<C&&!((S=n.charCodeAt(E)-64)<1||S>26);++E)x=26*x+S;for(_.s.c=--x,x=0;E<C&&!((S=n.charCodeAt(E)-48)<0||S>9);++E)x=10*x+S;if(_.s.r=--x,E===C||S!=10)return _.e.c=_.s.c,_.e.r=_.s.r,_;for(++E,x=0;E!=C&&!((S=n.charCodeAt(E)-64)<1||S>26);++E)x=26*x+S;for(_.e.c=--x,x=0;E!=C&&!((S=n.charCodeAt(E)-48)<0||S>9);++E)x=10*x+S;return _.e.r=--x,_}function safe_format_cell(n,_){var x=n.t=="d"&&_ instanceof Date;if(n.z!=null)try{return n.w=SSF_format(n.z,x?datenum(_):_)}catch{}try{return n.w=SSF_format((n.XF||{}).numFmtId||(x?14:0),x?datenum(_):_)}catch{return""+_}}function format_cell(n,_,x){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&x&&x.dateNF&&(n.z=x.dateNF),n.t=="e"?BErr[n.v]||n.v:_==null?safe_format_cell(n,n.v):safe_format_cell(n,_))}function sheet_to_workbook(n,_){var x=_&&_.sheet?_.sheet:"Sheet1",E={};return E[x]=n,{SheetNames:[x],Sheets:E}}function sheet_add_aoa(n,_,x){var E=x||{},S=n?n["!data"]!=null:E.dense,C=n||{};S&&!C["!data"]&&(C["!data"]=[]);var T=0,A=0;if(C&&E.origin!=null){if(typeof E.origin=="number")T=E.origin;else{var B=typeof E.origin=="string"?decode_cell(E.origin):E.origin;T=B.r,A=B.c}C["!ref"]||(C["!ref"]="A1:A1")}var I={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(C["!ref"]){var M=safe_decode_range(C["!ref"]);I.s.c=M.s.c,I.s.r=M.s.r,I.e.c=Math.max(I.e.c,M.e.c),I.e.r=Math.max(I.e.r,M.e.r),T==-1&&(I.e.r=T=M.e.r+1)}for(var O=[],D=0;D!=_.length;++D)if(_[D]){if(!Array.isArray(_[D]))throw new Error("aoa_to_sheet expects an array of arrays");var L=T+D,V=""+(L+1);S&&(C["!data"][L]||(C["!data"][L]=[]),O=C["!data"][L]);for(var U=0;U!=_[D].length;++U)if(!(typeof _[D][U]>"u")){var q={v:_[D][U]},H=A+U;if(I.s.r>L&&(I.s.r=L),I.s.c>H&&(I.s.c=H),I.e.r<L&&(I.e.r=L),I.e.c<H&&(I.e.c=H),_[D][U]&&typeof _[D][U]=="object"&&!Array.isArray(_[D][U])&&!(_[D][U]instanceof Date))q=_[D][U];else if(Array.isArray(q.v)&&(q.f=_[D][U][1],q.v=q.v[0]),q.v===null)if(q.f)q.t="n";else if(E.nullError)q.t="e",q.v=0;else if(E.sheetStubs)q.t="z";else continue;else typeof q.v=="number"?q.t="n":typeof q.v=="boolean"?q.t="b":q.v instanceof Date?(q.z=E.dateNF||table_fmt[14],E.cellDates?(q.t="d",q.w=SSF_format(q.z,datenum(q.v,E.date1904))):(q.t="n",q.v=datenum(q.v,E.date1904),q.w=SSF_format(q.z,q.v))):q.t="s";if(S)O[H]&&O[H].z&&(q.z=O[H].z),O[H]=q;else{var W=encode_col(H)+V;C[W]&&C[W].z&&(q.z=C[W].z),C[W]=q}}}return I.s.c<1e7&&(C["!ref"]=encode_range(I)),C}function aoa_to_sheet(n,_){return sheet_add_aoa(null,n,_)}function parse_Int32LE(n){return n.read_shift(4,"i")}function write_UInt32LE(n,_){return _||(_=new_buf(4)),_.write_shift(4,n),_}function parse_XLWideString(n){var _=n.read_shift(4);return _===0?"":n.read_shift(_,"dbcs")}function write_XLWideString(n,_){var x=!1;return _==null&&(x=!0,_=new_buf(4+2*n.length)),_.write_shift(4,n.length),n.length>0&&_.write_shift(0,n,"dbcs"),x?_.slice(0,_.l):_}function parse_StrRun(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function write_StrRun(n,_){return _||(_=new_buf(4)),_.write_shift(2,n.ich||0),_.write_shift(2,n.ifnt||0),_}function parse_RichStr(n,_){var x=n.l,E=n.read_shift(1),S=parse_XLWideString(n),C=[],T={t:S,h:S};if(E&1){for(var A=n.read_shift(4),B=0;B!=A;++B)C.push(parse_StrRun(n));T.r=C}else T.r=[{ich:0,ifnt:0}];return n.l=x+_,T}function write_RichStr(n,_){var x=!1;return _==null&&(x=!0,_=new_buf(15+4*n.t.length)),_.write_shift(1,0),write_XLWideString(n.t,_),x?_.slice(0,_.l):_}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(n,_){var x=!1;return _==null&&(x=!0,_=new_buf(23+4*n.t.length)),_.write_shift(1,1),write_XLWideString(n.t,_),_.write_shift(4,1),write_StrRun({ich:0,ifnt:0},_),x?_.slice(0,_.l):_}function parse_XLSBCell(n){var _=n.read_shift(4),x=n.read_shift(2);return x+=n.read_shift(1)<<16,n.l++,{c:_,iStyleRef:x}}function write_XLSBCell(n,_){return _==null&&(_=new_buf(8)),_.write_shift(-4,n.c),_.write_shift(3,n.iStyleRef||n.s),_.write_shift(1,0),_}function parse_XLSBShortCell(n){var _=n.read_shift(2);return _+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:_}}function write_XLSBShortCell(n,_){return _==null&&(_=new_buf(4)),_.write_shift(3,n.iStyleRef||n.s),_.write_shift(1,0),_}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(n){var _=n.read_shift(4);return _===0||_===4294967295?"":n.read_shift(_,"dbcs")}function write_XLNullableWideString(n,_){var x=!1;return _==null&&(x=!0,_=new_buf(127)),_.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&_.write_shift(0,n,"dbcs"),x?_.slice(0,_.l):_}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(n){var _=n.slice(n.l,n.l+4),x=_[0]&1,E=_[0]&2;n.l+=4;var S=E===0?__double([0,0,0,0,_[0]&252,_[1],_[2],_[3]],0):__readInt32LE(_,0)>>2;return x?S/100:S}function write_RkNumber(n,_){_==null&&(_=new_buf(4));var x=0,E=0,S=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?E=1:S==(S|0)&&S>=-(1<<29)&&S<1<<29&&(E=1,x=1),E)_.write_shift(-4,((x?S:n)<<2)+(x+2));else throw new Error("unsupported RkNumber "+n)}function parse_RfX(n){var _={s:{},e:{}};return _.s.r=n.read_shift(4),_.e.r=n.read_shift(4),_.s.c=n.read_shift(4),_.e.c=n.read_shift(4),_}function write_RfX(n,_){return _||(_=new_buf(16)),_.write_shift(4,n.s.r),_.write_shift(4,n.e.r),_.write_shift(4,n.s.c),_.write_shift(4,n.e.c),_}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function write_Xnum(n,_){return(_||new_buf(8)).write_shift(8,n,"f")}function parse_BrtColor(n){var _={},x=n.read_shift(1),E=x>>>1,S=n.read_shift(1),C=n.read_shift(2,"i"),T=n.read_shift(1),A=n.read_shift(1),B=n.read_shift(1);switch(n.l++,E){case 0:_.auto=1;break;case 1:_.index=S;var I=XLSIcv[S];I&&(_.rgb=rgb2Hex(I));break;case 2:_.rgb=rgb2Hex([T,A,B]);break;case 3:_.theme=S;break}return C!=0&&(_.tint=C>0?C/32767:C/32768),_}function write_BrtColor(n,_){if(_||(_=new_buf(8)),!n||n.auto)return _.write_shift(4,0),_.write_shift(4,0),_;n.index!=null?(_.write_shift(1,2),_.write_shift(1,n.index)):n.theme!=null?(_.write_shift(1,6),_.write_shift(1,n.theme)):(_.write_shift(1,5),_.write_shift(1,0));var x=n.tint||0;if(x>0?x*=32767:x<0&&(x*=32768),_.write_shift(2,x),!n.rgb||n.theme!=null)_.write_shift(2,0),_.write_shift(1,0),_.write_shift(1,0);else{var E=n.rgb||"FFFFFF";typeof E=="number"&&(E=("000000"+E.toString(16)).slice(-6)),_.write_shift(1,parseInt(E.slice(0,2),16)),_.write_shift(1,parseInt(E.slice(2,4),16)),_.write_shift(1,parseInt(E.slice(4,6),16)),_.write_shift(1,255)}return _}function parse_FontFlags(n){var _=n.read_shift(1);n.l++;var x={fBold:_&1,fItalic:_&2,fUnderline:_&4,fStrikeout:_&8,fOutline:_&16,fShadow:_&32,fCondense:_&64,fExtend:_&128};return x}function write_FontFlags(n,_){_||(_=new_buf(2));var x=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return _.write_shift(1,x),_.write_shift(1,0),_}function parse_ClipboardFormatOrString(n,_){var x={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},E=n.read_shift(4);switch(E){case 0:return"";case 4294967295:case 4294967294:return x[n.read_shift(4)]||""}if(E>400)throw new Error("Unsupported Clipboard: "+E.toString(16));return n.l-=4,n.read_shift(0,_==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(n){return parse_ClipboardFormatOrString(n,1)}function parse_ClipboardFormatOrUnicodeString(n){return parse_ClipboardFormatOrString(n,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(n){return n.map(function(_){return[_>>16&255,_>>8&255,_&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(n){var _=new_ct();if(!n||!n.match)return _;var x={};if((n.match(tagregex)||[]).forEach(function(E){var S=parsexmltag(E);switch(S[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":_.xmlns=S["xmlns"+(S[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":x[S.Extension.toLowerCase()]=S.ContentType;break;case"<Override":_[ct2type[S.ContentType]]!==void 0&&_[ct2type[S.ContentType]].push(S.PartName);break}}),_.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+_.xmlns);return _.calcchain=_.calcchains.length>0?_.calcchains[0]:"",_.sst=_.strs.length>0?_.strs[0]:"",_.style=_.styles.length>0?_.styles[0]:"",_.defaults=x,delete _.calcchains,_}function write_ct(n,_,x){var E=evert_arr(ct2type),S=[],C;x||(S[S.length]=XML_HEADER,S[S.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),S=S.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(I){return writextag("Default",null,{Extension:I[0],ContentType:I[1]})})));var T=function(I){n[I]&&n[I].length>0&&(C=n[I][0],S[S.length]=writextag("Override",null,{PartName:(C[0]=="/"?"":"/")+C,ContentType:CT_LIST[I][_.bookType]||CT_LIST[I].xlsx}))},A=function(I){(n[I]||[]).forEach(function(M){S[S.length]=writextag("Override",null,{PartName:(M[0]=="/"?"":"/")+M,ContentType:CT_LIST[I][_.bookType]||CT_LIST[I].xlsx})})},B=function(I){(n[I]||[]).forEach(function(M){S[S.length]=writextag("Override",null,{PartName:(M[0]=="/"?"":"/")+M,ContentType:E[I][0]})})};return T("workbooks"),A("sheets"),A("charts"),B("themes"),["strs","styles"].forEach(T),["coreprops","extprops","custprops"].forEach(B),B("vba"),B("comments"),B("threadedcomments"),B("drawings"),A("metadata"),B("people"),!x&&S.length>2&&(S[S.length]="</Types>",S[1]=S[1].replace("/>",">")),S.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(n){var _=n.lastIndexOf("/");return n.slice(0,_+1)+"_rels/"+n.slice(_+1)+".rels"}function parse_rels(n,_){var x={"!id":{}};if(!n)return x;_.charAt(0)!=="/"&&(_="/"+_);var E={};return(n.match(tagregex)||[]).forEach(function(S){var C=parsexmltag(S);if(C[0]==="<Relationship"){var T={};T.Type=C.Type,T.Target=C.Target,T.Id=C.Id,C.TargetMode&&(T.TargetMode=C.TargetMode);var A=C.TargetMode==="External"?C.Target:resolve_path(C.Target,_);x[A]=T,E[C.Id]=T}}),x["!id"]=E,x}function write_rels(n){var _=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys$1(n["!id"]).forEach(function(x){_[_.length]=writextag("Relationship",null,n["!id"][x])}),_.length>2&&(_[_.length]="</Relationships>",_[1]=_[1].replace("/>",">")),_.join("")}function add_rels(n,_,x,E,S,C){if(S||(S={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),_<0)for(_=n["!idx"];n["!id"]["rId"+_];++_);if(n["!idx"]=_+1,S.Id="rId"+_,S.Type=E,S.Target=x,C?S.TargetMode=C:[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(S.Type)>-1&&(S.TargetMode="External"),n["!id"][S.Id])throw new Error("Cannot rewrite rId "+_);return n["!id"][S.Id]=S,n[("/"+S.Target).replace("//","/")]=S,_}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(n,_){for(var x=xlml_normalize(n),E,S;E=xlmlregex.exec(x);)switch(E[3]){case"manifest":break;case"file-entry":if(S=parsexmltag(E[0],!1),S.path=="/"&&S.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(_&&_.WTF)throw E}}function write_manifest(n){var _=[XML_HEADER];_.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),_.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var x=0;x<n.length;++x)_.push('  <manifest:file-entry manifest:full-path="'+n[x][0]+'" manifest:media-type="'+n[x][1]+`"/>
`);return _.push("</manifest:manifest>"),_.join("")}function write_rdf_type(n,_,x){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(x||"odf")+"#"+_+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(n,_){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+_+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(n){var _=[XML_HEADER];_.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var x=0;x!=n.length;++x)_.push(write_rdf_type(n[x][0],n[x][1])),_.push(write_rdf_has("",n[x][0]));return _.push(write_rdf_type("","Document","pkg")),_.push("</rdf:RDF>"),_.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var n=new Array(CORE_PROPS.length),_=0;_<CORE_PROPS.length;++_){var x=CORE_PROPS[_],E="(?:"+x[0].slice(0,x[0].indexOf(":"))+":)"+x[0].slice(x[0].indexOf(":")+1);n[_]=new RegExp("<"+E+"[^>]*>([\\s\\S]*?)</"+E+">")}return n}();function parse_core_props(n){var _={};n=utf8read(n);for(var x=0;x<CORE_PROPS.length;++x){var E=CORE_PROPS[x],S=n.match(CORE_PROPS_REGEX[x]);S!=null&&S.length>0&&(_[E[1]]=unescapexml(S[1])),E[2]==="date"&&_[E[1]]&&(_[E[1]]=parseDate(_[E[1]]))}return _}function cp_doit(n,_,x,E,S){S[n]!=null||_==null||_===""||(S[n]=_,_=escapexml(_),E[E.length]=x?writextag(n,_,x):writetag(n,_))}function write_core_props(n,_){var x=_||{},E=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],S={};if(!n&&!x.Props)return E.join("");n&&(n.CreatedDate!=null&&cp_doit("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:write_w3cdtf(n.CreatedDate,x.WTF),{"xsi:type":"dcterms:W3CDTF"},E,S),n.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:write_w3cdtf(n.ModifiedDate,x.WTF),{"xsi:type":"dcterms:W3CDTF"},E,S));for(var C=0;C!=CORE_PROPS.length;++C){var T=CORE_PROPS[C],A=x.Props&&x.Props[T[1]]!=null?x.Props[T[1]]:n?n[T[1]]:null;A===!0?A="1":A===!1?A="0":typeof A=="number"&&(A=String(A)),A!=null&&cp_doit(T[0],A,null,E,S)}return E.length>2&&(E[E.length]="</cp:coreProperties>",E[1]=E[1].replace("/>",">")),E.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(n,_,x,E){var S=[];if(typeof n=="string")S=parseVector(n,E);else for(var C=0;C<n.length;++C)S=S.concat(n[C].map(function(M){return{v:M}}));var T=typeof _=="string"?parseVector(_,E).map(function(M){return M.v}):_,A=0,B=0;if(T.length>0)for(var I=0;I!==S.length;I+=2){switch(B=+S[I+1].v,S[I].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":x.Worksheets=B,x.SheetNames=T.slice(A,A+B);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":x.NamedRanges=B,x.DefinedNames=T.slice(A,A+B);break;case"Charts":case"Diagramme":x.Chartsheets=B,x.ChartNames=T.slice(A,A+B);break}A+=B}}function parse_ext_props(n,_,x){var E={};return _||(_={}),n=utf8read(n),EXT_PROPS.forEach(function(S){var C=(n.match(matchtag(S[0]))||[])[1];switch(S[2]){case"string":C&&(_[S[1]]=unescapexml(C));break;case"bool":_[S[1]]=C==="true";break;case"raw":var T=n.match(new RegExp("<"+S[0]+"[^>]*>([\\s\\S]*?)</"+S[0]+">"));T&&T.length>0&&(E[S[1]]=T[1]);break}}),E.HeadingPairs&&E.TitlesOfParts&&load_props_pairs(E.HeadingPairs,E.TitlesOfParts,_,x),_}function write_ext_props(n){var _=[],x=writextag;return n||(n={}),n.Application="SheetJS",_[_.length]=XML_HEADER,_[_.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(E){if(n[E[1]]!==void 0){var S;switch(E[2]){case"string":S=escapexml(String(n[E[1]]));break;case"bool":S=n[E[1]]?"true":"false";break}S!==void 0&&(_[_.length]=x(E[0],S))}}),_[_.length]=x("HeadingPairs",x("vt:vector",x("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+x("vt:variant",x("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),_[_.length]=x("TitlesOfParts",x("vt:vector",n.SheetNames.map(function(E){return"<vt:lpstr>"+escapexml(E)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),_.length>2&&(_[_.length]="</Properties>",_[1]=_[1].replace("/>",">")),_.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(n,_){var x={},E="",S=n.match(custregex);if(S)for(var C=0;C!=S.length;++C){var T=S[C],A=parsexmltag(T);switch(strip_ns(A[0])){case"<?xml":break;case"<Properties":break;case"<property":E=unescapexml(A.name);break;case"</property>":E=null;break;default:if(T.indexOf("<vt:")===0){var B=T.split(">"),I=B[0].slice(4),M=B[1];switch(I){case"lpstr":case"bstr":case"lpwstr":x[E]=unescapexml(M);break;case"bool":x[E]=parsexmlbool(M);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":x[E]=parseInt(M,10);break;case"r4":case"r8":case"decimal":x[E]=parseFloat(M);break;case"filetime":case"date":x[E]=parseDate(M);break;case"cy":case"error":x[E]=unescapexml(M);break;default:if(I.slice(-1)=="/")break;_.WTF&&typeof console<"u"&&console.warn("Unexpected",T,I,B)}}else if(T.slice(0,2)!=="</"){if(_.WTF)throw new Error(T)}}}return x}function write_cust_props(n){var _=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!n)return _.join("");var x=1;return keys$1(n).forEach(function(S){++x,_[_.length]=writextag("property",write_vt(n[S],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:x,name:escapexml(S)})}),_.length>2&&(_[_.length]="</Properties>",_[1]=_[1].replace("/>",">")),_.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(n,_,x){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),_=evert_XLMLDPM[_]||_,n[_]=x}function xlml_write_docprops(n,_){var x=[];return keys$1(XLMLDocPropsMap).map(function(E){for(var S=0;S<CORE_PROPS.length;++S)if(CORE_PROPS[S][1]==E)return CORE_PROPS[S];for(S=0;S<EXT_PROPS.length;++S)if(EXT_PROPS[S][1]==E)return EXT_PROPS[S];throw E}).forEach(function(E){if(n[E[1]]!=null){var S=_&&_.Props&&_.Props[E[1]]!=null?_.Props[E[1]]:n[E[1]];switch(E[2]){case"date":S=new Date(S).toISOString().replace(/\.\d*Z/,"Z");break}typeof S=="number"?S=String(S):S===!0||S===!1?S=S?"1":"0":S instanceof Date&&(S=new Date(S).toISOString().replace(/\.\d*Z/,"")),x.push(writetag(XLMLDocPropsMap[E[1]]||E[1],S))}}),writextag("DocumentProperties",x.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(n,_){var x=["Worksheets","SheetNames"],E="CustomDocumentProperties",S=[];return n&&keys$1(n).forEach(function(C){if(Object.prototype.hasOwnProperty.call(n,C)){for(var T=0;T<CORE_PROPS.length;++T)if(C==CORE_PROPS[T][1])return;for(T=0;T<EXT_PROPS.length;++T)if(C==EXT_PROPS[T][1])return;for(T=0;T<x.length;++T)if(C==x[T])return;var A=n[C],B="string";typeof A=="number"?(B="float",A=String(A)):A===!0||A===!1?(B="boolean",A=A?"1":"0"):A=String(A),S.push(writextag(escapexmltag(C),A,{"dt:dt":B}))}}),_&&keys$1(_).forEach(function(C){if(Object.prototype.hasOwnProperty.call(_,C)&&!(n&&Object.prototype.hasOwnProperty.call(n,C))){var T=_[C],A="string";typeof T=="number"?(A="float",T=String(T)):T===!0||T===!1?(A="boolean",T=T?"1":"0"):T instanceof Date?(A="dateTime.tz",T=T.toISOString()):T=String(T),S.push(writextag(escapexmltag(C),T,{"dt:dt":A}))}}),"<"+E+' xmlns="'+XLMLNS.o+'">'+S.join("")+"</"+E+">"}function parse_FILETIME(n){var _=n.read_shift(4),x=n.read_shift(4);return new Date((x/1e7*Math.pow(2,32)+_/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(n){var _=typeof n=="string"?new Date(Date.parse(n)):n,x=_.getTime()/1e3+11644473600,E=x%Math.pow(2,32),S=(x-E)/Math.pow(2,32);E*=1e7,S*=1e7;var C=E/Math.pow(2,32)|0;C>0&&(E=E%Math.pow(2,32),S+=C);var T=new_buf(8);return T.write_shift(4,E),T.write_shift(4,S),T}function parse_lpstr(n,_,x){var E=n.l,S=n.read_shift(0,"lpstr-cp");if(x)for(;n.l-E&3;)++n.l;return S}function parse_lpwstr(n,_,x){var E=n.read_shift(0,"lpwstr");return x&&(n.l+=4-(E.length+1&3)&3),E}function parse_VtStringBase(n,_,x){return _===31?parse_lpwstr(n):parse_lpstr(n,_,x)}function parse_VtString(n,_,x){return parse_VtStringBase(n,_,x===!1?0:4)}function parse_VtUnalignedString(n,_){if(!_)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(n,_,0)}function parse_VtVecLpwstrValue(n){for(var _=n.read_shift(4),x=[],E=0;E!=_;++E){var S=n.l;x[E]=n.read_shift(0,"lpwstr").replace(chr0,""),n.l-S&2&&(n.l+=2)}return x}function parse_VtVecUnalignedLpstrValue(n){for(var _=n.read_shift(4),x=[],E=0;E!=_;++E)x[E]=n.read_shift(0,"lpstr-cp").replace(chr0,"");return x}function parse_VtHeadingPair(n){var _=n.l,x=parse_TypedPropertyValue(n,VT_USTR);n[n.l]==0&&n[n.l+1]==0&&n.l-_&2&&(n.l+=2);var E=parse_TypedPropertyValue(n,VT_I4);return[x,E]}function parse_VtVecHeadingPairValue(n){for(var _=n.read_shift(4),x=[],E=0;E<_/2;++E)x.push(parse_VtHeadingPair(n));return x}function parse_dictionary(n,_){for(var x=n.read_shift(4),E={},S=0;S!=x;++S){var C=n.read_shift(4),T=n.read_shift(4);E[C]=n.read_shift(T,_===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),_===1200&&T%2&&(n.l+=2)}return n.l&3&&(n.l=n.l>>2+1<<2),E}function parse_BLOB(n){var _=n.read_shift(4),x=n.slice(n.l,n.l+_);return n.l+=_,(_&3)>0&&(n.l+=4-(_&3)&3),x}function parse_ClipboardData(n){var _={};return _.Size=n.read_shift(4),n.l+=_.Size+3-(_.Size-1)%4,_}function parse_TypedPropertyValue(n,_,x){var E=n.read_shift(2),S,C=x||{};if(n.l+=2,_!==VT_VARIANT&&E!==_&&VT_CUSTOM.indexOf(_)===-1&&!((_&65534)==4126&&(E&65534)==4126))throw new Error("Expected type "+_+" saw "+E);switch(_===VT_VARIANT?E:_){case 2:return S=n.read_shift(2,"i"),C.raw||(n.l+=2),S;case 3:return S=n.read_shift(4,"i"),S;case 11:return n.read_shift(4)!==0;case 19:return S=n.read_shift(4),S;case 30:return parse_lpstr(n,E,4).replace(chr0,"");case 31:return parse_lpwstr(n);case 64:return parse_FILETIME(n);case 65:return parse_BLOB(n);case 71:return parse_ClipboardData(n);case 80:return parse_VtString(n,E,!C.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(n,E).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(n);case 4126:case 4127:return E==4127?parse_VtVecLpwstrValue(n):parse_VtVecUnalignedLpstrValue(n);default:throw new Error("TypedPropertyValue unrecognized type "+_+" "+E)}}function write_TypedPropertyValue(n,_){var x=new_buf(4),E=new_buf(4);switch(x.write_shift(4,n==80?31:n),n){case 3:E.write_shift(-4,_);break;case 5:E=new_buf(8),E.write_shift(8,_,"f");break;case 11:E.write_shift(4,_?1:0);break;case 64:E=write_FILETIME(_);break;case 31:case 80:for(E=new_buf(4+2*(_.length+1)+(_.length%2?0:2)),E.write_shift(4,_.length+1),E.write_shift(0,_,"dbcs");E.l!=E.length;)E.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+_)}return bconcat([x,E])}function parse_PropertySet(n,_){var x=n.l,E=n.read_shift(4),S=n.read_shift(4),C=[],T=0,A=0,B=-1,I={};for(T=0;T!=S;++T){var M=n.read_shift(4),O=n.read_shift(4);C[T]=[M,O+x]}C.sort(function(W,Q){return W[1]-Q[1]});var D={};for(T=0;T!=S;++T){if(n.l!==C[T][1]){var L=!0;if(T>0&&_)switch(_[C[T-1][0]].t){case 2:n.l+2===C[T][1]&&(n.l+=2,L=!1);break;case 80:n.l<=C[T][1]&&(n.l=C[T][1],L=!1);break;case 4108:n.l<=C[T][1]&&(n.l=C[T][1],L=!1);break}if((!_||T==0)&&n.l<=C[T][1]&&(L=!1,n.l=C[T][1]),L)throw new Error("Read Error: Expected address "+C[T][1]+" at "+n.l+" :"+T)}if(_){if(C[T][0]==0&&C.length>T+1&&C[T][1]==C[T+1][1])continue;var V=_[C[T][0]];if(D[V.n]=parse_TypedPropertyValue(n,V.t,{raw:!0}),V.p==="version"&&(D[V.n]=String(D[V.n]>>16)+"."+("0000"+String(D[V.n]&65535)).slice(-4)),V.n=="CodePage")switch(D[V.n]){case 0:D[V.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(A=D[V.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+D[V.n])}}else if(C[T][0]===1){if(A=D.CodePage=parse_TypedPropertyValue(n,VT_I2),set_cp(A),B!==-1){var U=n.l;n.l=C[B][1],I=parse_dictionary(n,A),n.l=U}}else if(C[T][0]===0){if(A===0){B=T,n.l=C[T+1][1];continue}I=parse_dictionary(n,A)}else{var q=I[C[T][0]],H;switch(n[n.l]){case 65:n.l+=4,H=parse_BLOB(n);break;case 30:n.l+=4,H=parse_VtString(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 31:n.l+=4,H=parse_VtString(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 3:n.l+=4,H=n.read_shift(4,"i");break;case 19:n.l+=4,H=n.read_shift(4);break;case 5:n.l+=4,H=n.read_shift(8,"f");break;case 11:n.l+=4,H=parsebool(n,4);break;case 64:n.l+=4,H=parseDate(parse_FILETIME(n));break;default:throw new Error("unparsed value: "+n[n.l])}D[q]=H}}return n.l=x+E,D}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function write_PropertySet(n,_,x){var E=new_buf(8),S=[],C=[],T=8,A=0,B=new_buf(8),I=new_buf(8);if(B.write_shift(4,2),B.write_shift(4,1200),I.write_shift(4,1),C.push(B),S.push(I),T+=8+B.length,!_){I=new_buf(8),I.write_shift(4,0),S.unshift(I);var M=[new_buf(4)];for(M[0].write_shift(4,n.length),A=0;A<n.length;++A){var O=n[A][0];for(B=new_buf(4+4+2*(O.length+1)+(O.length%2?0:2)),B.write_shift(4,A+2),B.write_shift(4,O.length+1),B.write_shift(0,O,"dbcs");B.l!=B.length;)B.write_shift(1,0);M.push(B)}B=bconcat(M),C.unshift(B),T+=8+B.length}for(A=0;A<n.length;++A)if(!(_&&!_[n[A][0]])&&!(XLSPSSkip.indexOf(n[A][0])>-1||PseudoPropsPairs.indexOf(n[A][0])>-1)&&n[A][1]!=null){var D=n[A][1],L=0;if(_){L=+_[n[A][0]];var V=x[L];if(V.p=="version"&&typeof D=="string"){var U=D.split(".");D=(+U[0]<<16)+(+U[1]||0)}B=write_TypedPropertyValue(V.t,D)}else{var q=guess_property_type(D);q==-1&&(q=31,D=String(D)),B=write_TypedPropertyValue(q,D)}C.push(B),I=new_buf(8),I.write_shift(4,_?L:2+A),S.push(I),T+=8+B.length}var H=8*(C.length+1);for(A=0;A<C.length;++A)S[A].write_shift(4,H),H+=C[A].length;return E.write_shift(4,T),E.write_shift(4,C.length),bconcat([E].concat(S).concat(C))}function parse_PropertySetStream(n,_,x){var E=n.content;if(!E)return{};prep_blob(E,0);var S,C,T,A,B=0;E.chk("feff","Byte Order: "),E.read_shift(2);var I=E.read_shift(4),M=E.read_shift(16);if(M!==CFB.utils.consts.HEADER_CLSID&&M!==x)throw new Error("Bad PropertySet CLSID "+M);if(S=E.read_shift(4),S!==1&&S!==2)throw new Error("Unrecognized #Sets: "+S);if(C=E.read_shift(16),A=E.read_shift(4),S===1&&A!==E.l)throw new Error("Length mismatch: "+A+" !== "+E.l);S===2&&(T=E.read_shift(16),B=E.read_shift(4));var O=parse_PropertySet(E,_),D={SystemIdentifier:I};for(var L in O)D[L]=O[L];if(D.FMTID=C,S===1)return D;if(B-E.l==2&&(E.l+=2),E.l!==B)throw new Error("Length mismatch 2: "+E.l+" !== "+B);var V;try{V=parse_PropertySet(E,null)}catch{}for(L in V)D[L]=V[L];return D.FMTID=[C,T],D}function write_PropertySetStream(n,_,x,E,S,C){var T=new_buf(S?68:48),A=[T];T.write_shift(2,65534),T.write_shift(2,0),T.write_shift(4,842412599),T.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),T.write_shift(4,S?2:1),T.write_shift(16,_,"hex"),T.write_shift(4,S?68:48);var B=write_PropertySet(n,x,E);if(A.push(B),S){var I=write_PropertySet(S,null,null);T.write_shift(16,C,"hex"),T.write_shift(4,68+B.length),A.push(I)}return bconcat(A)}function parsenoop2(n,_){return n.read_shift(_),null}function writezeroes(n,_){_||(_=new_buf(n));for(var x=0;x<n;++x)_.write_shift(1,0);return _}function parslurp(n,_,x){for(var E=[],S=n.l+_;n.l<S;)E.push(x(n,S-n.l));if(S!==n.l)throw new Error("Slurp error");return E}function parsebool(n,_){return n.read_shift(_)===1}function writebool(n,_){return _||(_=new_buf(2)),_.write_shift(2,+!!n),_}function parseuint16(n){return n.read_shift(2,"u")}function writeuint16(n,_){return _||(_=new_buf(2)),_.write_shift(2,n),_}function parseuint16a(n,_){return parslurp(n,_,parseuint16)}function parse_Bes(n){var _=n.read_shift(1),x=n.read_shift(1);return x===1?_:_===1}function write_Bes(n,_,x){return x||(x=new_buf(2)),x.write_shift(1,_=="e"?+n:+!!n),x.write_shift(1,_=="e"?1:0),x}function parse_ShortXLUnicodeString(n,_,x){var E=n.read_shift(x&&x.biff>=12?2:1),S="sbcs-cont",C=current_codepage;if(x&&x.biff>=8&&(current_codepage=1200),!x||x.biff==8){var T=n.read_shift(1);T&&(S="dbcs-cont")}else x.biff==12&&(S="wstr");x.biff>=2&&x.biff<=5&&(S="cpstr");var A=E?n.read_shift(E,S):"";return current_codepage=C,A}function parse_XLUnicodeRichExtendedString(n){var _=current_codepage;current_codepage=1200;var x=n.read_shift(2),E=n.read_shift(1),S=E&4,C=E&8,T=1+(E&1),A=0,B,I={};C&&(A=n.read_shift(2)),S&&(B=n.read_shift(4));var M=T==2?"dbcs-cont":"sbcs-cont",O=x===0?"":n.read_shift(x,M);return C&&(n.l+=4*A),S&&(n.l+=B),I.t=O,C||(I.raw="<t>"+I.t+"</t>",I.r=I.t),current_codepage=_,I}function write_XLUnicodeRichExtendedString(n){var _=n.t||"",x=new_buf(3+0);x.write_shift(2,_.length),x.write_shift(1,1);var E=new_buf(2*_.length);E.write_shift(2*_.length,_,"utf16le");var S=[x,E];return bconcat(S)}function parse_XLUnicodeStringNoCch(n,_,x){var E;if(x){if(x.biff>=2&&x.biff<=5)return n.read_shift(_,"cpstr");if(x.biff>=12)return n.read_shift(_,"dbcs-cont")}var S=n.read_shift(1);return S===0?E=n.read_shift(_,"sbcs-cont"):E=n.read_shift(_,"dbcs-cont"),E}function parse_XLUnicodeString(n,_,x){var E=n.read_shift(x&&x.biff==2?1:2);return E===0?(n.l++,""):parse_XLUnicodeStringNoCch(n,E,x)}function parse_XLUnicodeString2(n,_,x){if(x.biff>5)return parse_XLUnicodeString(n,_,x);var E=n.read_shift(1);return E===0?(n.l++,""):n.read_shift(E,x.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(n,_,x){return x||(x=new_buf(3+2*n.length)),x.write_shift(2,n.length),x.write_shift(1,1),x.write_shift(31,n,"utf16le"),x}function parse_ControlInfo(n){var _=n.read_shift(1);n.l++;var x=n.read_shift(2);return n.l+=2,[_,x]}function parse_URLMoniker(n){var _=n.read_shift(4),x=n.l,E=!1;_>24&&(n.l+=_-24,n.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(E=!0),n.l=x);var S=n.read_shift((E?_-24:_)>>1,"utf16le").replace(chr0,"");return E&&(n.l+=24),S}function parse_FileMoniker(n){for(var _=n.read_shift(2),x="";_-- >0;)x+="../";var E=n.read_shift(0,"lpstr-ansi");if(n.l+=2,n.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var S=n.read_shift(4);if(S===0)return x+E.replace(/\\/g,"/");var C=n.read_shift(4);if(n.read_shift(2)!=3)throw new Error("Bad FileMoniker");var T=n.read_shift(C>>1,"utf16le").replace(chr0,"");return x+T}function parse_HyperlinkMoniker(n,_){var x=n.read_shift(16);switch(x){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(n);case"0303000000000000c000000000000046":return parse_FileMoniker(n);default:throw new Error("Unsupported Moniker "+x)}}function parse_HyperlinkString(n){var _=n.read_shift(4),x=_>0?n.read_shift(_,"utf16le").replace(chr0,""):"";return x}function write_HyperlinkString(n,_){_||(_=new_buf(6+n.length*2)),_.write_shift(4,1+n.length);for(var x=0;x<n.length;++x)_.write_shift(2,n.charCodeAt(x));return _.write_shift(2,0),_}function parse_Hyperlink(n,_){var x=n.l+_,E=n.read_shift(4);if(E!==2)throw new Error("Unrecognized streamVersion: "+E);var S=n.read_shift(2);n.l+=2;var C,T,A,B,I="",M,O;S&16&&(C=parse_HyperlinkString(n,x-n.l)),S&128&&(T=parse_HyperlinkString(n,x-n.l)),(S&257)===257&&(A=parse_HyperlinkString(n,x-n.l)),(S&257)===1&&(B=parse_HyperlinkMoniker(n,x-n.l)),S&8&&(I=parse_HyperlinkString(n,x-n.l)),S&32&&(M=n.read_shift(16)),S&64&&(O=parse_FILETIME(n)),n.l=x;var D=T||A||B||"";D&&I&&(D+="#"+I),D||(D="#"+I),S&2&&D.charAt(0)=="/"&&D.charAt(1)!="/"&&(D="file://"+D);var L={Target:D};return M&&(L.guid=M),O&&(L.time=O),C&&(L.Tooltip=C),L}function write_Hyperlink(n){var _=new_buf(512),x=0,E=n.Target;E.slice(0,7)=="file://"&&(E=E.slice(7));var S=E.indexOf("#"),C=S>-1?31:23;switch(E.charAt(0)){case"#":C=28;break;case".":C&=-3;break}_.write_shift(4,2),_.write_shift(4,C);var T=[8,6815827,6619237,4849780,83];for(x=0;x<T.length;++x)_.write_shift(4,T[x]);if(C==28)E=E.slice(1),write_HyperlinkString(E,_);else if(C&2){for(T="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),x=0;x<T.length;++x)_.write_shift(1,parseInt(T[x],16));var A=S>-1?E.slice(0,S):E;for(_.write_shift(4,2*(A.length+1)),x=0;x<A.length;++x)_.write_shift(2,A.charCodeAt(x));_.write_shift(2,0),C&8&&write_HyperlinkString(S>-1?E.slice(S+1):"",_)}else{for(T="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),x=0;x<T.length;++x)_.write_shift(1,parseInt(T[x],16));for(var B=0;E.slice(B*3,B*3+3)=="../"||E.slice(B*3,B*3+3)=="..\\";)++B;for(_.write_shift(2,B),_.write_shift(4,E.length-3*B+1),x=0;x<E.length-3*B;++x)_.write_shift(1,E.charCodeAt(x+3*B)&255);for(_.write_shift(1,0),_.write_shift(2,65535),_.write_shift(2,57005),x=0;x<6;++x)_.write_shift(4,0)}return _.slice(0,_.l)}function parse_LongRGBA(n){var _=n.read_shift(1),x=n.read_shift(1),E=n.read_shift(1),S=n.read_shift(1);return[_,x,E,S]}function parse_LongRGB(n,_){var x=parse_LongRGBA(n);return x[3]=0,x}function parse_XLSCell(n){var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(2);return{r:_,c:x,ixfe:E}}function write_XLSCell(n,_,x,E){return E||(E=new_buf(6)),E.write_shift(2,n),E.write_shift(2,_),E.write_shift(2,x||0),E}function parse_frtHeader(n){var _=n.read_shift(2),x=n.read_shift(2);return n.l+=8,{type:_,flags:x}}function parse_OptXLUnicodeString(n,_,x){return _===0?"":parse_XLUnicodeString2(n,_,x)}function parse_XTI(n,_,x){var E=x.biff>8?4:2,S=n.read_shift(E),C=n.read_shift(E,"i"),T=n.read_shift(E,"i");return[S,C,T]}function parse_RkRec(n){var _=n.read_shift(2),x=parse_RkNumber(n);return[_,x]}function parse_AddinUdf(n,_,x){n.l+=4,_-=4;var E=n.l+_,S=parse_ShortXLUnicodeString(n,_,x),C=n.read_shift(2);if(E-=n.l,C!==E)throw new Error("Malformed AddinUdf: padding = "+E+" != "+C);return n.l+=C,S}function parse_Ref8U(n){var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(2),S=n.read_shift(2);return{s:{c:E,r:_},e:{c:S,r:x}}}function write_Ref8U(n,_){return _||(_=new_buf(8)),_.write_shift(2,n.s.r),_.write_shift(2,n.e.r),_.write_shift(2,n.s.c),_.write_shift(2,n.e.c),_}function parse_RefU(n){var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(1),S=n.read_shift(1);return{s:{c:E,r:_},e:{c:S,r:x}}}var parse_Ref=parse_RefU;function parse_FtCmo(n){n.l+=4;var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(2);return n.l+=12,[x,_,E]}function parse_FtNts(n){var _={};return n.l+=4,n.l+=16,_.fSharedNote=n.read_shift(2),n.l+=4,_}function parse_FtCf(n){var _={};return n.l+=4,n.cf=n.read_shift(2),_}function parse_FtSkip(n){n.l+=2,n.l+=n.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(n,_){for(var x=n.l+_,E=[];n.l<x;){var S=n.read_shift(2);n.l-=2;try{E.push(FtTab[S](n,x-n.l))}catch{return n.l=x,E}}return n.l!=x&&(n.l=x),E}function parse_BOF(n,_){var x={BIFFVer:0,dt:0};switch(x.BIFFVer=n.read_shift(2),_-=2,_>=2&&(x.dt=n.read_shift(2),n.l-=2),x.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(_>6)throw new Error("Unexpected BIFF Ver "+x.BIFFVer)}return n.read_shift(_),x}function write_BOF(n,_,x){var E=1536,S=16;switch(x.bookType){case"biff8":break;case"biff5":E=1280,S=8;break;case"biff4":E=4,S=6;break;case"biff3":E=3,S=6;break;case"biff2":E=2,S=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var C=new_buf(S);return C.write_shift(2,E),C.write_shift(2,_),S>4&&C.write_shift(2,29282),S>6&&C.write_shift(2,1997),S>8&&(C.write_shift(2,49161),C.write_shift(2,1),C.write_shift(2,1798),C.write_shift(2,0)),C}function parse_InterfaceHdr(n,_){return _===0||n.read_shift(2),1200}function parse_WriteAccess(n,_,x){if(x.enc)return n.l+=_,"";var E=n.l,S=parse_XLUnicodeString2(n,0,x);return n.read_shift(_+E-n.l),S}function write_WriteAccess(n,_){var x=!_||_.biff==8,E=new_buf(x?112:54);for(E.write_shift(_.biff==8?2:1,7),x&&E.write_shift(1,0),E.write_shift(4,859007059),E.write_shift(4,5458548|(x?0:536870912));E.l<E.length;)E.write_shift(1,x?0:32);return E}function parse_WsBool(n,_,x){var E=x&&x.biff==8||_==2?n.read_shift(2):(n.l+=_,0);return{fDialog:E&16,fBelow:E&64,fRight:E&128}}function parse_BoundSheet8(n,_,x){var E=n.read_shift(4),S=n.read_shift(1)&3,C=n.read_shift(1);switch(C){case 0:C="Worksheet";break;case 1:C="Macrosheet";break;case 2:C="Chartsheet";break;case 6:C="VBAModule";break}var T=parse_ShortXLUnicodeString(n,0,x);return T.length===0&&(T="Sheet1"),{pos:E,hs:S,dt:C,name:T}}function write_BoundSheet8(n,_){var x=!_||_.biff>=8?2:1,E=new_buf(8+x*n.name.length);E.write_shift(4,n.pos),E.write_shift(1,n.hs||0),E.write_shift(1,n.dt),E.write_shift(1,n.name.length),_.biff>=8&&E.write_shift(1,1),E.write_shift(x*n.name.length,n.name,_.biff<8?"sbcs":"utf16le");var S=E.slice(0,E.l);return S.l=E.l,S}function parse_SST(n,_){for(var x=n.l+_,E=n.read_shift(4),S=n.read_shift(4),C=[],T=0;T!=S&&n.l<x;++T)C.push(parse_XLUnicodeRichExtendedString(n));return C.Count=E,C.Unique=S,C}function write_SST(n,_){var x=new_buf(8);x.write_shift(4,n.Count),x.write_shift(4,n.Unique);for(var E=[],S=0;S<n.length;++S)E[S]=write_XLUnicodeRichExtendedString(n[S]);var C=bconcat([x].concat(E));return C.parts=[x.length].concat(E.map(function(T){return T.length})),C}function parse_ExtSST(n,_){var x={};return x.dsst=n.read_shift(2),n.l+=_-2,x}function parse_Row(n){var _={};_.r=n.read_shift(2),_.c=n.read_shift(2),_.cnt=n.read_shift(2)-_.c;var x=n.read_shift(2);n.l+=4;var E=n.read_shift(1);return n.l+=3,E&7&&(_.level=E&7),E&32&&(_.hidden=!0),E&64&&(_.hpt=x/20),_}function parse_ForceFullCalculation(n){var _=parse_frtHeader(n);if(_.type!=2211)throw new Error("Invalid Future Record "+_.type);var x=n.read_shift(4);return x!==0}function parse_RecalcId(n){return n.read_shift(2),n.read_shift(4)}function parse_DefaultRowHeight(n,_,x){var E=0;x&&x.biff==2||(E=n.read_shift(2));var S=n.read_shift(2);x&&x.biff==2&&(E=1-(S>>15),S&=32767);var C={Unsynced:E&1,DyZero:(E&2)>>1,ExAsc:(E&4)>>2,ExDsc:(E&8)>>3};return[C,S]}function parse_Window1(n){var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(2),S=n.read_shift(2),C=n.read_shift(2),T=n.read_shift(2),A=n.read_shift(2),B=n.read_shift(2),I=n.read_shift(2);return{Pos:[_,x],Dim:[E,S],Flags:C,CurTab:T,FirstTab:A,Selected:B,TabRatio:I}}function write_Window1(){var n=new_buf(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function parse_Window2(n,_,x){if(x&&x.biff>=2&&x.biff<5)return{};var E=n.read_shift(2);return{RTL:E&64}}function write_Window2(n){var _=new_buf(18),x=1718;return n&&n.RTL&&(x|=64),_.write_shift(2,x),_.write_shift(4,0),_.write_shift(4,64),_.write_shift(4,0),_.write_shift(4,0),_}function parse_Pane(){}function parse_Font(n,_,x){var E={dyHeight:n.read_shift(2),fl:n.read_shift(2)};switch(x&&x.biff||8){case 2:break;case 3:case 4:n.l+=2;break;default:n.l+=10;break}return E.name=parse_ShortXLUnicodeString(n,0,x),E}function write_Font(n,_){var x=n.name||"Arial",E=_&&_.biff==5,S=E?15+x.length:16+2*x.length,C=new_buf(S);return C.write_shift(2,(n.sz||12)*20),C.write_shift(4,0),C.write_shift(2,400),C.write_shift(4,0),C.write_shift(2,0),C.write_shift(1,x.length),E||C.write_shift(1,1),C.write_shift((E?1:2)*x.length,x,E?"sbcs":"utf16le"),C}function parse_LabelSst(n){var _=parse_XLSCell(n);return _.isst=n.read_shift(4),_}function write_LabelSst(n,_,x,E){var S=new_buf(10);return write_XLSCell(n,_,E,S),S.write_shift(4,x),S}function parse_Label(n,_,x){x.biffguess&&x.biff==2&&(x.biff=5);var E=n.l+_,S=parse_XLSCell(n);x.biff==2&&n.l++;var C=parse_XLUnicodeString(n,E-n.l,x);return S.val=C,S}function write_Label(n,_,x,E,S){var C=!S||S.biff==8,T=new_buf(6+2+ +C+(1+C)*x.length);return write_XLSCell(n,_,E,T),T.write_shift(2,x.length),C&&T.write_shift(1,1),T.write_shift((1+C)*x.length,x,C?"utf16le":"sbcs"),T}function parse_Format(n,_,x){var E=n.read_shift(2),S=parse_XLUnicodeString2(n,0,x);return[E,S]}function write_Format(n,_,x,E){var S=x&&x.biff==5;E||(E=new_buf(S?3+_.length:5+2*_.length)),E.write_shift(2,n),E.write_shift(S?1:2,_.length),S||E.write_shift(1,1),E.write_shift((S?1:2)*_.length,_,S?"sbcs":"utf16le");var C=E.length>E.l?E.slice(0,E.l):E;return C.l==null&&(C.l=C.length),C}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(n,_,x){var E=n.l+_,S=x.biff==8||!x.biff?4:2,C=n.read_shift(S),T=n.read_shift(S),A=n.read_shift(2),B=n.read_shift(2);return n.l=E,{s:{r:C,c:A},e:{r:T,c:B}}}function write_Dimensions(n,_){var x=_.biff==8||!_.biff?4:2,E=new_buf(2*x+6);return E.write_shift(x,n.s.r),E.write_shift(x,n.e.r+1),E.write_shift(2,n.s.c),E.write_shift(2,n.e.c+1),E.write_shift(2,0),E}function parse_RK(n){var _=n.read_shift(2),x=n.read_shift(2),E=parse_RkRec(n);return{r:_,c:x,ixfe:E[0],rknum:E[1]}}function parse_MulRk(n,_){for(var x=n.l+_-2,E=n.read_shift(2),S=n.read_shift(2),C=[];n.l<x;)C.push(parse_RkRec(n));if(n.l!==x)throw new Error("MulRK read error");var T=n.read_shift(2);if(C.length!=T-S+1)throw new Error("MulRK length mismatch");return{r:E,c:S,C:T,rkrec:C}}function parse_MulBlank(n,_){for(var x=n.l+_-2,E=n.read_shift(2),S=n.read_shift(2),C=[];n.l<x;)C.push(n.read_shift(2));if(n.l!==x)throw new Error("MulBlank read error");var T=n.read_shift(2);if(C.length!=T-S+1)throw new Error("MulBlank length mismatch");return{r:E,c:S,C:T,ixfe:C}}function parse_CellStyleXF(n,_,x,E){var S={},C=n.read_shift(4),T=n.read_shift(4),A=n.read_shift(4),B=n.read_shift(2);return S.patternType=XLSFillPattern[A>>26],E.cellStyles&&(S.alc=C&7,S.fWrap=C>>3&1,S.alcV=C>>4&7,S.fJustLast=C>>7&1,S.trot=C>>8&255,S.cIndent=C>>16&15,S.fShrinkToFit=C>>20&1,S.iReadOrder=C>>22&2,S.fAtrNum=C>>26&1,S.fAtrFnt=C>>27&1,S.fAtrAlc=C>>28&1,S.fAtrBdr=C>>29&1,S.fAtrPat=C>>30&1,S.fAtrProt=C>>31&1,S.dgLeft=T&15,S.dgRight=T>>4&15,S.dgTop=T>>8&15,S.dgBottom=T>>12&15,S.icvLeft=T>>16&127,S.icvRight=T>>23&127,S.grbitDiag=T>>30&3,S.icvTop=A&127,S.icvBottom=A>>7&127,S.icvDiag=A>>14&127,S.dgDiag=A>>21&15,S.icvFore=B&127,S.icvBack=B>>7&127,S.fsxButton=B>>14&1),S}function parse_XF(n,_,x){var E={};return E.ifnt=n.read_shift(2),E.numFmtId=n.read_shift(2),E.flags=n.read_shift(2),E.fStyle=E.flags>>2&1,_-=6,E.data=parse_CellStyleXF(n,_,E.fStyle,x),E}function write_XF(n,_,x,E){var S=x&&x.biff==5;E||(E=new_buf(S?16:20)),E.write_shift(2,0),n.style?(E.write_shift(2,n.numFmtId||0),E.write_shift(2,65524)):(E.write_shift(2,n.numFmtId||0),E.write_shift(2,_<<4));var C=0;return n.numFmtId>0&&S&&(C|=1024),E.write_shift(4,C),E.write_shift(4,0),S||E.write_shift(4,0),E.write_shift(2,0),E}function parse_Guts(n){n.l+=4;var _=[n.read_shift(2),n.read_shift(2)];if(_[0]!==0&&_[0]--,_[1]!==0&&_[1]--,_[0]>7||_[1]>7)throw new Error("Bad Gutters: "+_.join("|"));return _}function write_Guts(n){var _=new_buf(8);return _.write_shift(4,0),_.write_shift(2,n[0]?n[0]+1:0),_.write_shift(2,n[1]?n[1]+1:0),_}function parse_BoolErr(n,_,x){var E=parse_XLSCell(n);(x.biff==2||_==9)&&++n.l;var S=parse_Bes(n);return E.val=S,E.t=S===!0||S===!1?"b":"e",E}function write_BoolErr(n,_,x,E,S,C){var T=new_buf(8);return write_XLSCell(n,_,E,T),write_Bes(x,C,T),T}function parse_Number(n,_,x){x.biffguess&&x.biff==2&&(x.biff=5);var E=parse_XLSCell(n),S=parse_Xnum(n);return E.val=S,E}function write_Number(n,_,x,E){var S=new_buf(14);return write_XLSCell(n,_,E,S),write_Xnum(x,S),S}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(n,_,x){var E=n.l+_,S=n.read_shift(2),C=n.read_shift(2);if(x.sbcch=C,C==1025||C==14849)return[C,S];if(C<1||C>255)throw new Error("Unexpected SupBook type: "+C);for(var T=parse_XLUnicodeStringNoCch(n,C),A=[];E>n.l;)A.push(parse_XLUnicodeString(n));return[C,S,T,A]}function parse_ExternName(n,_,x){var E=n.read_shift(2),S,C={fBuiltIn:E&1,fWantAdvise:E>>>1&1,fWantPict:E>>>2&1,fOle:E>>>3&1,fOleLink:E>>>4&1,cf:E>>>5&1023,fIcon:E>>>15&1};return x.sbcch===14849&&(S=parse_AddinUdf(n,_-2,x)),C.body=S||n.read_shift(_-2),typeof S=="string"&&(C.Name=S),C}function parse_Lbl(n,_,x){var E=n.l+_,S=n.read_shift(2),C=n.read_shift(1),T=n.read_shift(1),A=n.read_shift(x&&x.biff==2?1:2),B=0;(!x||x.biff>=5)&&(x.biff!=5&&(n.l+=2),B=n.read_shift(2),x.biff==5&&(n.l+=2),n.l+=4);var I=parse_XLUnicodeStringNoCch(n,T,x);S&32&&(I=XLSLblBuiltIn[I.charCodeAt(0)]);var M=E-n.l;x&&x.biff==2&&--M;var O=E==n.l||A===0||!(M>0)?[]:parse_NameParsedFormula(n,M,x,A);return{chKey:C,Name:I,itab:B,rgce:O}}function parse_ExternSheet(n,_,x){if(x.biff<8)return parse_BIFF5ExternSheet(n,_,x);for(var E=[],S=n.l+_,C=n.read_shift(x.biff>8?4:2);C--!==0;)E.push(parse_XTI(n,x.biff>8?12:6,x));if(n.l!=S)throw new Error("Bad ExternSheet: "+n.l+" != "+S);return E}function parse_BIFF5ExternSheet(n,_,x){n[n.l+1]==3&&n[n.l]++;var E=parse_ShortXLUnicodeString(n,_,x);return E.charCodeAt(0)==3?E.slice(1):E}function parse_NameCmt(n,_,x){if(x.biff<8){n.l+=_;return}var E=n.read_shift(2),S=n.read_shift(2),C=parse_XLUnicodeStringNoCch(n,E,x),T=parse_XLUnicodeStringNoCch(n,S,x);return[C,T]}function parse_ShrFmla(n,_,x){var E=parse_RefU(n);n.l++;var S=n.read_shift(1);return _-=8,[parse_SharedParsedFormula(n,_,x),S,E]}function parse_Array(n,_,x){var E=parse_Ref(n);switch(x.biff){case 2:n.l++,_-=7;break;case 3:case 4:n.l+=2,_-=8;break;default:n.l+=6,_-=12}return[E,parse_ArrayParsedFormula(n,_,x)]}function parse_MTRSettings(n){var _=n.read_shift(4)!==0,x=n.read_shift(4)!==0,E=n.read_shift(4);return[_,x,E]}function parse_NoteSh(n,_,x){if(!(x.biff<8)){var E=n.read_shift(2),S=n.read_shift(2),C=n.read_shift(2),T=n.read_shift(2),A=parse_XLUnicodeString2(n,0,x);return x.biff<8&&n.read_shift(1),[{r:E,c:S},A,T,C]}}function parse_Note(n,_,x){return parse_NoteSh(n,_,x)}function parse_MergeCells(n,_){for(var x=[],E=n.read_shift(2);E--;)x.push(parse_Ref8U(n));return x}function write_MergeCells(n){var _=new_buf(2+n.length*8);_.write_shift(2,n.length);for(var x=0;x<n.length;++x)write_Ref8U(n[x],_);return _}function parse_Obj(n,_,x){if(x&&x.biff<8)return parse_BIFF5Obj(n,_,x);var E=parse_FtCmo(n),S=parse_FtArray(n,_-22,E[1]);return{cmo:E,ft:S}}var parse_BIFF5OT={8:function(n,_){var x=n.l+_;n.l+=10;var E=n.read_shift(2);n.l+=4,n.l+=2,n.l+=2,n.l+=2,n.l+=4;var S=n.read_shift(1);return n.l+=S,n.l=x,{fmt:E}}};function parse_BIFF5Obj(n,_,x){n.l+=4;var E=n.read_shift(2),S=n.read_shift(2),C=n.read_shift(2);n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=6,_-=36;var T=[];return T.push((parse_BIFF5OT[E]||parsenoop)(n,_,x)),{cmo:[S,E,C],ft:T}}function parse_TxO(n,_,x){var E=n.l,S="";try{n.l+=4;var C=(x.lastobj||{cmo:[0,0]}).cmo[1],T;[0,5,7,11,12,14].indexOf(C)==-1?n.l+=6:T=parse_ControlInfo(n,6,x);var A=n.read_shift(2);n.read_shift(2),parseuint16(n,2);var B=n.read_shift(2);n.l+=B;for(var I=1;I<n.lens.length-1;++I){if(n.l-E!=n.lens[I])throw new Error("TxO: bad continue record");var M=n[n.l],O=parse_XLUnicodeStringNoCch(n,n.lens[I+1]-n.lens[I]-1);if(S+=O,S.length>=(M?A:2*A))break}if(S.length!==A&&S.length!==A*2)throw new Error("cchText: "+A+" != "+S.length);return n.l=E+_,{t:S}}catch{return n.l=E+_,{t:S}}}function parse_HLink(n,_){var x=parse_Ref8U(n);n.l+=16;var E=parse_Hyperlink(n,_-24);return[x,E]}function write_HLink(n){var _=new_buf(24),x=decode_cell(n[0]);_.write_shift(2,x.r),_.write_shift(2,x.r),_.write_shift(2,x.c),_.write_shift(2,x.c);for(var E="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),S=0;S<16;++S)_.write_shift(1,parseInt(E[S],16));return bconcat([_,write_Hyperlink(n[1])])}function parse_HLinkTooltip(n,_){n.read_shift(2);var x=parse_Ref8U(n),E=n.read_shift((_-10)/2,"dbcs-cont");return E=E.replace(chr0,""),[x,E]}function write_HLinkTooltip(n){var _=n[1].Tooltip,x=new_buf(10+2*(_.length+1));x.write_shift(2,2048);var E=decode_cell(n[0]);x.write_shift(2,E.r),x.write_shift(2,E.r),x.write_shift(2,E.c),x.write_shift(2,E.c);for(var S=0;S<_.length;++S)x.write_shift(2,_.charCodeAt(S));return x.write_shift(2,0),x}function parse_Country(n){var _=[0,0],x;return x=n.read_shift(2),_[0]=CountryEnum[x]||x,x=n.read_shift(2),_[1]=CountryEnum[x]||x,_}function write_Country(n){return n||(n=new_buf(4)),n.write_shift(2,1),n.write_shift(2,1),n}function parse_ClrtClient(n){for(var _=n.read_shift(2),x=[];_-- >0;)x.push(parse_LongRGB(n));return x}function parse_Palette(n){for(var _=n.read_shift(2),x=[];_-- >0;)x.push(parse_LongRGB(n));return x}function parse_XFCRC(n){n.l+=2;var _={cxfs:0,crc:0};return _.cxfs=n.read_shift(2),_.crc=n.read_shift(4),_}function parse_ColInfo(n,_,x){if(!x.cellStyles)return parsenoop(n,_);var E=x&&x.biff>=12?4:2,S=n.read_shift(E),C=n.read_shift(E),T=n.read_shift(E),A=n.read_shift(E),B=n.read_shift(2);E==2&&(n.l+=2);var I={s:S,e:C,w:T,ixfe:A,flags:B};return(x.biff>=5||!x.biff)&&(I.level=B>>8&7),I}function write_ColInfo(n,_){var x=new_buf(12);x.write_shift(2,_),x.write_shift(2,_),x.write_shift(2,n.width*256),x.write_shift(2,0);var E=0;return n.hidden&&(E|=1),x.write_shift(1,E),E=n.level||0,x.write_shift(1,E),x.write_shift(2,0),x}function parse_Setup(n,_){var x={};return _<32||(n.l+=16,x.header=parse_Xnum(n),x.footer=parse_Xnum(n),n.l+=2),x}function parse_ShtProps(n,_,x){var E={area:!1};if(x.biff!=5)return n.l+=_,E;var S=n.read_shift(1);return n.l+=3,S&16&&(E.area=!0),E}function write_RRTabId(n){for(var _=new_buf(2*n),x=0;x<n;++x)_.write_shift(2,x+1);return _}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(n){var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(4),S={fmt:_,env:x,len:E,data:n.slice(n.l,n.l+E)};return n.l+=E,S}function parse_BIFF2STR(n,_,x){x.biffguess&&x.biff==5&&(x.biff=2);var E=parse_XLSCell(n);++n.l;var S=parse_XLUnicodeString2(n,_-7,x);return E.t="str",E.val=S,E}function parse_BIFF2NUM(n){var _=parse_XLSCell(n);++n.l;var x=parse_Xnum(n);return _.t="n",_.val=x,_}function write_BIFF2NUM(n,_,x){var E=new_buf(15);return write_BIFF2Cell(E,n,_),E.write_shift(8,x,"f"),E}function parse_BIFF2INT(n){var _=parse_XLSCell(n);++n.l;var x=n.read_shift(2);return _.t="n",_.val=x,_}function write_BIFF2INT(n,_,x){var E=new_buf(9);return write_BIFF2Cell(E,n,_),E.write_shift(2,x),E}function parse_BIFF2STRING(n){var _=n.read_shift(1);return _===0?(n.l++,""):n.read_shift(_,"sbcs-cont")}function parse_BIFF2FONTXTRA(n,_){n.l+=6,n.l+=2,n.l+=1,n.l+=3,n.l+=1,n.l+=_-13}function parse_RString(n,_,x){var E=n.l+_,S=parse_XLSCell(n),C=n.read_shift(2),T=parse_XLUnicodeStringNoCch(n,C,x);return n.l=E,S.t="str",S.val=T,S}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},_=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function x(A,B){var I=[],M=new_raw_buf(1);switch(B.type){case"base64":M=s2a(Base64_decode(A));break;case"binary":M=s2a(A);break;case"buffer":case"array":M=A;break}prep_blob(M,0);var O=M.read_shift(1),D=!!(O&136),L=!1,V=!1;switch(O){case 2:break;case 3:break;case 48:L=!0,D=!0;break;case 49:L=!0,D=!0;break;case 131:break;case 139:break;case 140:V=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+O.toString(16))}var U=0,q=521;O==2&&(U=M.read_shift(2)),M.l+=3,O!=2&&(U=M.read_shift(4)),U>1048576&&(U=1e6),O!=2&&(q=M.read_shift(2));var H=M.read_shift(2);B.codepage,O!=2&&(M.l+=16,M.read_shift(1),M[M.l]!==0&&n[M[M.l]],M.l+=1,M.l+=2),V&&(M.l+=36);for(var W=[],Q={},re=Math.min(M.length,O==2?521:q-10-(L?264:0)),ce=V?32:11;M.l<re&&M[M.l]!=13;)switch(Q={},Q.name=a2s(M.slice(M.l,M.l+ce)).replace(/[\u0000\r\n].*$/g,""),M.l+=ce,Q.type=String.fromCharCode(M.read_shift(1)),O!=2&&!V&&(Q.offset=M.read_shift(4)),Q.len=M.read_shift(1),O==2&&(Q.offset=M.read_shift(2)),Q.dec=M.read_shift(1),Q.name.length&&W.push(Q),O!=2&&(M.l+=V?13:14),Q.type){case"B":(!L||Q.len!=8)&&B.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"G":case"P":B.WTF&&console.log("Skipping "+Q.name+":"+Q.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Q.type)}if(M[M.l]!==13&&(M.l=q-1),M.read_shift(1)!==13)throw new Error("DBF Terminator not found "+M.l+" "+M[M.l]);M.l=q;var ne=0,Y=0;for(I[0]=[],Y=0;Y!=W.length;++Y)I[0][Y]=W[Y].name;for(;U-- >0;){if(M[M.l]===42){M.l+=H;continue}for(++M.l,I[++ne]=[],Y=0,Y=0;Y!=W.length;++Y){var fe=M.slice(M.l,M.l+W[Y].len);M.l+=W[Y].len,prep_blob(fe,0);var ge=a2s(fe);switch(W[Y].type){case"C":ge.trim().length&&(I[ne][Y]=ge.replace(/\s+$/,""));break;case"D":ge.length===8?I[ne][Y]=new Date(+ge.slice(0,4),+ge.slice(4,6)-1,+ge.slice(6,8)):I[ne][Y]=ge;break;case"F":I[ne][Y]=parseFloat(ge.trim());break;case"+":case"I":I[ne][Y]=V?fe.read_shift(-4,"i")^2147483648:fe.read_shift(4,"i");break;case"L":switch(ge.trim().toUpperCase()){case"Y":case"T":I[ne][Y]=!0;break;case"N":case"F":I[ne][Y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ge+"|")}break;case"M":if(!D)throw new Error("DBF Unexpected MEMO for type "+O.toString(16));I[ne][Y]="##MEMO##"+(V?parseInt(ge.trim(),10):fe.read_shift(4));break;case"N":ge=ge.replace(/\u0000/g,"").trim(),ge&&ge!="."&&(I[ne][Y]=+ge||0);break;case"@":I[ne][Y]=new Date(fe.read_shift(-8,"f")-621356832e5);break;case"T":I[ne][Y]=new Date((fe.read_shift(4)-2440588)*864e5+fe.read_shift(4));break;case"Y":I[ne][Y]=fe.read_shift(4,"i")/1e4+fe.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":I[ne][Y]=-fe.read_shift(-8,"f");break;case"B":if(L&&W[Y].len==8){I[ne][Y]=fe.read_shift(8,"f");break}case"G":case"P":fe.l+=W[Y].len;break;case"0":if(W[Y].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+W[Y].type)}}}if(O!=2&&M.l<M.length&&M[M.l++]!=26)throw new Error("DBF EOF Marker missing "+(M.l-1)+" of "+M.length+" "+M[M.l-1].toString(16));return B&&B.sheetRows&&(I=I.slice(0,B.sheetRows)),B.DBF=W,I}function E(A,B){var I=B||{};I.dateNF||(I.dateNF="yyyymmdd");var M=aoa_to_sheet(x(A,I),I);return M["!cols"]=I.DBF.map(function(O){return{wch:O.len,DBF:O}}),delete I.DBF,M}function S(A,B){try{var I=sheet_to_workbook(E(A,B),B);return I.bookType="dbf",I}catch(M){if(B&&B.WTF)throw M}return{SheetNames:[],Sheets:{}}}var C={B:8,C:250,L:1,D:8,"?":0,"":0};function T(A,B){var I=B||{},M=current_codepage;if(+I.codepage>=0&&set_cp(+I.codepage),I.type=="string")throw new Error("Cannot write DBF to JS string");var O=buf_array(),D=sheet_to_json(A,{header:1,raw:!0,cellDates:!0}),L=D[0],V=D.slice(1),U=A["!cols"]||[],q=0,H=0,W=0,Q=1;for(q=0;q<L.length;++q){if(((U[q]||{}).DBF||{}).name){L[q]=U[q].DBF.name,++W;continue}if(L[q]!=null){if(++W,typeof L[q]=="number"&&(L[q]=L[q].toString(10)),typeof L[q]!="string")throw new Error("DBF Invalid column name "+L[q]+" |"+typeof L[q]+"|");if(L.indexOf(L[q])!==q){for(H=0;H<1024;++H)if(L.indexOf(L[q]+"_"+H)==-1){L[q]+="_"+H;break}}}}var re=safe_decode_range(A["!ref"]),ce=[],ne=[],Y=[];for(q=0;q<=re.e.c-re.s.c;++q){var fe="",ge="",$e=0,_e=[];for(H=0;H<V.length;++H)V[H][q]!=null&&_e.push(V[H][q]);if(_e.length==0||L[q]==null){ce[q]="?";continue}for(H=0;H<_e.length;++H){switch(typeof _e[H]){case"number":ge="B";break;case"string":ge="C";break;case"boolean":ge="L";break;case"object":ge=_e[H]instanceof Date?"D":"C";break;default:ge="C"}$e=Math.max($e,String(_e[H]).length),fe=fe&&fe!=ge?"C":ge}$e>250&&($e=250),ge=((U[q]||{}).DBF||{}).type,ge=="C"&&U[q].DBF.len>$e&&($e=U[q].DBF.len),fe=="B"&&ge=="N"&&(fe="N",Y[q]=U[q].DBF.dec,$e=U[q].DBF.len),ne[q]=fe=="C"||ge=="N"?$e:C[fe]||0,Q+=ne[q],ce[q]=fe}var ae=O.next(32);for(ae.write_shift(4,318902576),ae.write_shift(4,V.length),ae.write_shift(2,296+32*W),ae.write_shift(2,Q),q=0;q<4;++q)ae.write_shift(4,0);var X=+_[current_codepage]||3;for(ae.write_shift(4,0|X<<8),n[X]!=+I.codepage&&(I.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),q=0,H=0;q<L.length;++q)if(L[q]!=null){var F=O.next(32),z=(L[q].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,z,"sbcs"),F.write_shift(1,ce[q]=="?"?"C":ce[q],"sbcs"),F.write_shift(4,H),F.write_shift(1,ne[q]||C[ce[q]]||0),F.write_shift(1,Y[q]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),H+=ne[q]||C[ce[q]]||0}var J=O.next(264);for(J.write_shift(4,13),q=0;q<65;++q)J.write_shift(4,0);for(q=0;q<V.length;++q){var te=O.next(Q);for(te.write_shift(1,0),H=0;H<L.length;++H)if(L[H]!=null)switch(ce[H]){case"L":te.write_shift(1,V[q][H]==null?63:V[q][H]?84:70);break;case"B":te.write_shift(8,V[q][H]||0,"f");break;case"N":var se="0";for(typeof V[q][H]=="number"&&(se=V[q][H].toFixed(Y[H]||0)),se.length>ne[H]&&(se=se.slice(0,ne[H])),W=0;W<ne[H]-se.length;++W)te.write_shift(1,32);te.write_shift(1,se,"sbcs");break;case"D":V[q][H]?(te.write_shift(4,("0000"+V[q][H].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(V[q][H].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+V[q][H].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var oe=te.l,ie=String(V[q][H]!=null?V[q][H]:"").slice(0,ne[H]);for(te.write_shift(1,ie,"cpstr"),oe+=ne[H]-te.l,W=0;W<oe;++W)te.write_shift(1,32);break}}return current_codepage=M,O.next(1).write_shift(1,26),O.end()}return{to_workbook:S,to_sheet:E,from_sheet:T}}(),SYLK=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},_=new RegExp("\x1BN("+keys$1(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),x=function(O,D){var L=n[D];return typeof L=="number"?_getansi(L):L},E=function(O,D,L){var V=D.charCodeAt(0)-32<<4|L.charCodeAt(0)-48;return V==59?O:_getansi(V)};n["|"]=254;function S(O,D){switch(D.type){case"base64":return C(Base64_decode(O),D);case"binary":return C(O,D);case"buffer":return C(has_buf&&Buffer.isBuffer(O)?O.toString("binary"):a2s(O),D);case"array":return C(cc2str(O),D)}throw new Error("Unrecognized type "+D.type)}function C(O,D){var L=O.split(/[\n\r]+/),V=-1,U=-1,q=0,H=0,W=[],Q=[],re=null,ce={},ne=[],Y=[],fe=[],ge=0,$e,_e={Workbook:{WBProps:{},Names:[]}};for(+D.codepage>=0&&set_cp(+D.codepage);q!==L.length;++q){ge=0;var ae=L[q].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,E).replace(_,x),X=ae.replace(/;;/g,"\0").split(";").map(function(xe){return xe.replace(/\u0000/g,";")}),F=X[0],z;if(ae.length>0)switch(F){case"ID":break;case"E":break;case"B":break;case"O":for(H=1;H<X.length;++H)switch(X[H].charAt(0)){case"V":{var J=parseInt(X[H].slice(1),10);J>=1&&J<=4&&(_e.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(X[1].charAt(0)){case"P":Q.push(ae.slice(3).replace(/;;/g,";"));break}break;case"NN":{var te={Sheet:0};for(H=1;H<X.length;++H)switch(X[H].charAt(0)){case"N":te.Name=X[H].slice(1);break;case"E":te.Ref=(D&&D.sheet||"Sheet1")+"!"+rc_to_a1(X[H].slice(1));break}_e.Workbook.Names.push(te)}break;case"C":var se=!1,oe=!1,ie=!1,G=!1,j=-1,ee=-1,pe="",he="z";for(H=1;H<X.length;++H)switch(X[H].charAt(0)){case"A":break;case"X":U=parseInt(X[H].slice(1),10)-1,oe=!0;break;case"Y":for(V=parseInt(X[H].slice(1),10)-1,oe||(U=0),$e=W.length;$e<=V;++$e)W[$e]=[];break;case"K":z=X[H].slice(1),z.charAt(0)==='"'?(z=z.slice(1,z.length-1),he="s"):z==="TRUE"||z==="FALSE"?(z=z==="TRUE",he="b"):isNaN(fuzzynum(z))?isNaN(fuzzydate(z).getDate())||(z=parseDate(z),he="d",D.cellDates||(he="n",z=datenum(z,_e.Workbook.WBProps.date1904))):(z=fuzzynum(z),he="n",re!==null&&fmt_is_date(re)&&D.cellDates&&(z=numdate(_e.Workbook.WBProps.date1904?z+1462:z),he="d")),se=!0;break;case"E":G=!0,pe=rc_to_a1(X[H].slice(1),{r:V,c:U});break;case"S":ie=!0;break;case"G":break;case"R":j=parseInt(X[H].slice(1),10)-1;break;case"C":ee=parseInt(X[H].slice(1),10)-1;break;default:if(D&&D.WTF)throw new Error("SYLK bad record "+ae)}if(se&&(W[V][U]?(W[V][U].t=he,W[V][U].v=z):W[V][U]={t:he,v:z},re&&(W[V][U].z=re),D.cellText!==!1&&re&&(W[V][U].w=SSF_format(W[V][U].z,W[V][U].v,{date1904:_e.Workbook.WBProps.date1904})),re=null),ie){if(G)throw new Error("SYLK shared formula cannot have own formula");var Se=j>-1&&W[j][ee];if(!Se||!Se[1])throw new Error("SYLK shared formula cannot find base");pe=shift_formula_str(Se[1],{r:V-j,c:U-ee})}pe&&(W[V][U]?W[V][U].f=pe:W[V][U]={t:"n",f:pe});break;case"F":var we=0;for(H=1;H<X.length;++H)switch(X[H].charAt(0)){case"X":U=parseInt(X[H].slice(1),10)-1,++we;break;case"Y":for(V=parseInt(X[H].slice(1),10)-1,$e=W.length;$e<=V;++$e)W[$e]=[];break;case"M":ge=parseInt(X[H].slice(1),10)/20;break;case"F":break;case"G":break;case"P":re=Q[parseInt(X[H].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(fe=X[H].slice(1).split(" "),$e=parseInt(fe[0],10);$e<=parseInt(fe[1],10);++$e)ge=parseInt(fe[2],10),Y[$e-1]=ge===0?{hidden:!0}:{wch:ge};break;case"C":U=parseInt(X[H].slice(1),10)-1,Y[U]||(Y[U]={});break;case"R":V=parseInt(X[H].slice(1),10)-1,ne[V]||(ne[V]={}),ge>0?(ne[V].hpt=ge,ne[V].hpx=pt2px(ge)):ge===0&&(ne[V].hidden=!0);break;default:if(D&&D.WTF)throw new Error("SYLK bad record "+ae)}we<1&&(re=null);break;default:if(D&&D.WTF)throw new Error("SYLK bad record "+ae)}}return ne.length>0&&(ce["!rows"]=ne),Y.length>0&&(ce["!cols"]=Y),Y.forEach(function(xe){process_col(xe)}),D&&D.sheetRows&&(W=W.slice(0,D.sheetRows)),[W,ce,_e]}function T(O,D){var L=S(O,D),V=L[0],U=L[1],q=L[2],H=dup(D);H.date1904=(((q||{}).Workbook||{}).WBProps||{}).date1904;var W=aoa_to_sheet(V,H);keys$1(U).forEach(function(re){W[re]=U[re]});var Q=sheet_to_workbook(W,D);return keys$1(q).forEach(function(re){Q[re]=q[re]}),Q.bookType="sylk",Q}function A(O,D,L,V){var U="C;Y"+(L+1)+";X"+(V+1)+";K";switch(O.t){case"n":U+=O.v||0,O.f&&!O.F&&(U+=";E"+a1_to_rc(O.f,{r:L,c:V}));break;case"b":U+=O.v?"TRUE":"FALSE";break;case"e":U+=O.w||O.v;break;case"d":U+='"'+(O.w||O.v)+'"';break;case"s":U+='"'+(O.v==null?"":String(O.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return U}function B(O,D){D.forEach(function(L,V){var U="F;W"+(V+1)+" "+(V+1)+" ";L.hidden?U+="0":(typeof L.width=="number"&&!L.wpx&&(L.wpx=width2px(L.width)),typeof L.wpx=="number"&&!L.wch&&(L.wch=px2char(L.wpx)),typeof L.wch=="number"&&(U+=Math.round(L.wch))),U.charAt(U.length-1)!=" "&&O.push(U)})}function I(O,D){D.forEach(function(L,V){var U="F;";L.hidden?U+="M0;":L.hpt?U+="M"+20*L.hpt+";":L.hpx&&(U+="M"+20*px2pt(L.hpx)+";"),U.length>2&&O.push(U+"R"+(V+1))})}function M(O,D,L){var V=["ID;PSheetJS;N;E"],U=[],q=safe_decode_range(O["!ref"]),H,W=O["!data"]!=null,Q=`\r
`,re=(((L||{}).Workbook||{}).WBProps||{}).date1904;V.push("P;PGeneral"),V.push("F;P0;DG0G8;M255"),O["!cols"]&&B(V,O["!cols"]),O["!rows"]&&I(V,O["!rows"]),V.push("B;Y"+(q.e.r-q.s.r+1)+";X"+(q.e.c-q.s.c+1)+";D"+[q.s.c,q.s.r,q.e.c,q.e.r].join(" ")),V.push("O;L;D;B"+(re?";V4":"")+";K47;G100 0.001");for(var ce=q.s.r;ce<=q.e.r;++ce)if(!(W&&!O["!data"][ce])){for(var ne=[],Y=q.s.c;Y<=q.e.c;++Y)H=W?O["!data"][ce][Y]:O[encode_col(Y)+encode_row(ce)],!(!H||H.v==null&&(!H.f||H.F))&&ne.push(A(H,O,ce,Y));U.push(ne.join(Q))}return V.join(Q)+Q+U.join(Q)+Q+"E"+Q}return{to_workbook:T,from_sheet:M}}(),DIF=function(){function n(A,B){switch(B.type){case"base64":return _(Base64_decode(A),B);case"binary":return _(A,B);case"buffer":return _(has_buf&&Buffer.isBuffer(A)?A.toString("binary"):a2s(A),B);case"array":return _(cc2str(A),B)}throw new Error("Unrecognized type "+B.type)}function _(A,B){for(var I=A.split(`
`),M=-1,O=-1,D=0,L=[];D!==I.length;++D){if(I[D].trim()==="BOT"){L[++M]=[],O=0;continue}if(!(M<0)){var V=I[D].trim().split(","),U=V[0],q=V[1];++D;for(var H=I[D]||"";(H.match(/["]/g)||[]).length&1&&D<I.length-1;)H+=`
`+I[++D];switch(H=H.trim(),+U){case-1:if(H==="BOT"){L[++M]=[],O=0;continue}else if(H!=="EOD")throw new Error("Unrecognized DIF special command "+H);break;case 0:H==="TRUE"?L[M][O]=!0:H==="FALSE"?L[M][O]=!1:isNaN(fuzzynum(q))?isNaN(fuzzydate(q).getDate())?L[M][O]=q:L[M][O]=parseDate(q):L[M][O]=fuzzynum(q),++O;break;case 1:H=H.slice(1,H.length-1),H=H.replace(/""/g,'"'),H&&H.match(/^=".*"$/)&&(H=H.slice(2,-1)),L[M][O++]=H!==""?H:null;break}if(H==="EOD")break}}return B&&B.sheetRows&&(L=L.slice(0,B.sheetRows)),L}function x(A,B){return aoa_to_sheet(n(A,B),B)}function E(A,B){var I=sheet_to_workbook(x(A,B),B);return I.bookType="dif",I}function S(A,B){return"0,"+String(A)+`\r
`+B}function C(A){return`1,0\r
"`+A.replace(/"/g,'""')+'"'}function T(A){for(var B=safe_decode_range(A["!ref"]),I=A["!data"]!=null,M=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(B.e.r-B.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(B.e.c-B.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],O=B.s.r;O<=B.e.r;++O){for(var D=I?A["!data"][O]:[],L=`-1,0\r
BOT\r
`,V=B.s.c;V<=B.e.c;++V){var U=I?D&&D[V]:A[encode_cell({r:O,c:V})];if(U==null){L+=`1,0\r
""\r
`;continue}switch(U.t){case"n":U.w!=null?L+="0,"+U.w+`\r
V`:U.v!=null?L+=S(U.v,"V"):U.f!=null&&!U.F?L+=C("="+U.f):L+=`1,0\r
""`;break;case"b":L+=U.v?S(1,"TRUE"):S(0,"FALSE");break;case"s":L+=C(isNaN(+U.v)?U.v:'="'+U.v+'"');break;case"d":U.w||(U.w=SSF_format(U.z||table_fmt[14],datenum(parseDate(U.v)))),L+=S(U.w,"V");break;default:L+=`1,0\r
""`}L+=`\r
`}M.push(L)}return M.join("")+`-1,0\r
EOD`}return{to_workbook:E,to_sheet:x,from_sheet:T}}(),ETH=function(){function n(O){return O.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function _(O){return O.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function x(O,D){for(var L=O.split(`
`),V=-1,U=-1,q=0,H=[];q!==L.length;++q){var W=L[q].trim().split(":");if(W[0]==="cell"){var Q=decode_cell(W[1]);if(H.length<=Q.r)for(V=H.length;V<=Q.r;++V)H[V]||(H[V]=[]);switch(V=Q.r,U=Q.c,W[2]){case"t":H[V][U]=n(W[3]);break;case"v":H[V][U]=+W[3];break;case"vtf":var re=W[W.length-1];case"vtc":switch(W[3]){case"nl":H[V][U]=!!+W[4];break;default:H[V][U]=+W[4];break}W[2]=="vtf"&&(H[V][U]=[H[V][U],re])}}}return D&&D.sheetRows&&(H=H.slice(0,D.sheetRows)),H}function E(O,D){return aoa_to_sheet(x(O,D),D)}function S(O,D){return sheet_to_workbook(E(O,D),D)}var C=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),T=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,A=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),B="--SocialCalcSpreadsheetControlSave--";function I(O){if(!O||!O["!ref"])return"";for(var D=[],L=[],V,U="",q=decode_range(O["!ref"]),H=O["!data"]!=null,W=q.s.r;W<=q.e.r;++W)for(var Q=q.s.c;Q<=q.e.c;++Q)if(U=encode_cell({r:W,c:Q}),V=H?(O["!data"][W]||[])[Q]:O[U],!(!V||V.v==null||V.t==="z")){switch(L=["cell",U,"t"],V.t){case"s":case"str":L.push(_(V.v));break;case"n":V.f?(L[2]="vtf",L[3]="n",L[4]=V.v,L[5]=_(V.f)):(L[2]="v",L[3]=V.v);break;case"b":L[2]="vt"+(V.f?"f":"c"),L[3]="nl",L[4]=V.v?"1":"0",L[5]=_(V.f||(V.v?"TRUE":"FALSE"));break;case"d":var re=datenum(parseDate(V.v));L[2]="vtc",L[3]="nd",L[4]=""+re,L[5]=V.w||SSF_format(V.z||table_fmt[14],re);break;case"e":continue}D.push(L.join(":"))}return D.push("sheet:c:"+(q.e.c-q.s.c+1)+":r:"+(q.e.r-q.s.r+1)+":tvf:1"),D.push("valueformat:1:text-wiki"),D.join(`
`)}function M(O){return[C,T,A,T,I(O),B].join(`
`)}return{to_workbook:S,to_sheet:E,from_sheet:M}}(),PRN=function(){function n(M,O,D,L,V){V.raw?O[D][L]=M:M===""||(M==="TRUE"?O[D][L]=!0:M==="FALSE"?O[D][L]=!1:isNaN(fuzzynum(M))?isNaN(fuzzydate(M).getDate())?O[D][L]=M:O[D][L]=parseDate(M):O[D][L]=fuzzynum(M))}function _(M,O){var D=O||{},L=[];if(!M||M.length===0)return L;for(var V=M.split(/[\r\n]/),U=V.length-1;U>=0&&V[U].length===0;)--U;for(var q=10,H=0,W=0;W<=U;++W)H=V[W].indexOf(" "),H==-1?H=V[W].length:H++,q=Math.max(q,H);for(W=0;W<=U;++W){L[W]=[];var Q=0;for(n(V[W].slice(0,q).trim(),L,W,Q,D),Q=1;Q<=(V[W].length-q)/10+1;++Q)n(V[W].slice(q+(Q-1)*10,q+Q*10).trim(),L,W,Q,D)}return D.sheetRows&&(L=L.slice(0,D.sheetRows)),L}var x={44:",",9:"	",59:";",124:"|"},E={44:3,9:2,59:1,124:0};function S(M){for(var O={},D=!1,L=0,V=0;L<M.length;++L)(V=M.charCodeAt(L))==34?D=!D:!D&&V in x&&(O[V]=(O[V]||0)+1);V=[];for(L in O)Object.prototype.hasOwnProperty.call(O,L)&&V.push([O[L],L]);if(!V.length){O=E;for(L in O)Object.prototype.hasOwnProperty.call(O,L)&&V.push([O[L],L])}return V.sort(function(U,q){return U[0]-q[0]||E[U[1]]-E[q[1]]}),x[V.pop()[1]]||44}function C(M,O){var D=O||{},L="",V={};D.dense&&(V["!data"]=[]);var U={s:{c:0,r:0},e:{c:0,r:0}};M.slice(0,4)=="sep="?M.charCodeAt(5)==13&&M.charCodeAt(6)==10?(L=M.charAt(4),M=M.slice(7)):M.charCodeAt(5)==13||M.charCodeAt(5)==10?(L=M.charAt(4),M=M.slice(6)):L=S(M.slice(0,1024)):D&&D.FS?L=D.FS:L=S(M.slice(0,1024));var q=0,H=0,W=0,Q=0,re=0,ce=L.charCodeAt(0),ne=!1,Y=0,fe=M.charCodeAt(0),ge=D.dateNF!=null?dateNF_regex(D.dateNF):null;function $e(){var _e=M.slice(Q,re);_e.slice(-1)=="\r"&&(_e=_e.slice(0,-1));var ae={};if(_e.charAt(0)=='"'&&_e.charAt(_e.length-1)=='"'&&(_e=_e.slice(1,-1).replace(/""/g,'"')),_e.length===0)ae.t="z";else if(D.raw)ae.t="s",ae.v=_e;else if(_e.trim().length===0)ae.t="s",ae.v=_e;else if(_e.charCodeAt(0)==61)_e.charCodeAt(1)==34&&_e.charCodeAt(_e.length-1)==34?(ae.t="s",ae.v=_e.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(_e)?(ae.t="n",ae.f=_e.slice(1)):(ae.t="s",ae.v=_e);else if(_e=="TRUE")ae.t="b",ae.v=!0;else if(_e=="FALSE")ae.t="b",ae.v=!1;else if(!isNaN(W=fuzzynum(_e)))ae.t="n",D.cellText!==!1&&(ae.w=_e),ae.v=W;else if(!isNaN((W=fuzzydate(_e)).getDate())||ge&&_e.match(ge)){ae.z=D.dateNF||table_fmt[14];var X=0;ge&&_e.match(ge)&&(_e=dateNF_fix(_e,D.dateNF,_e.match(ge)||[]),X=1,W=parseDate(_e,X)),D.cellDates?(ae.t="d",ae.v=W):(ae.t="n",ae.v=datenum(W)),D.cellText!==!1&&(ae.w=SSF_format(ae.z,ae.v instanceof Date?datenum(ae.v):ae.v)),D.cellNF||delete ae.z}else ae.t="s",ae.v=_e;if(ae.t=="z"||(D.dense?(V["!data"][q]||(V["!data"][q]=[]),V["!data"][q][H]=ae):V[encode_cell({c:H,r:q})]=ae),Q=re+1,fe=M.charCodeAt(Q),U.e.c<H&&(U.e.c=H),U.e.r<q&&(U.e.r=q),Y==ce)++H;else if(H=0,++q,D.sheetRows&&D.sheetRows<=q)return!0}e:for(;re<M.length;++re)switch(Y=M.charCodeAt(re)){case 34:fe===34&&(ne=!ne);break;case 13:if(ne)break;M.charCodeAt(re+1)==10&&++re;case ce:case 10:if(!ne&&$e())break e;break}return re-Q>0&&$e(),V["!ref"]=encode_range(U),V}function T(M,O){return!(O&&O.PRN)||O.FS||M.slice(0,4)=="sep="||M.indexOf("	")>=0||M.indexOf(",")>=0||M.indexOf(";")>=0?C(M,O):aoa_to_sheet(_(M,O),O)}function A(M,O){var D="",L=O.type=="string"?[0,0,0,0]:firstbyte(M,O);switch(O.type){case"base64":D=Base64_decode(M);break;case"binary":D=M;break;case"buffer":O.codepage==65001?D=M.toString("utf8"):O.codepage&&typeof $cptable<"u"?D=$cptable.utils.decode(O.codepage,M):D=has_buf&&Buffer.isBuffer(M)?M.toString("binary"):a2s(M);break;case"array":D=cc2str(M);break;case"string":D=M;break;default:throw new Error("Unrecognized type "+O.type)}return L[0]==239&&L[1]==187&&L[2]==191?D=utf8read(D.slice(3)):O.type!="string"&&O.type!="buffer"&&O.codepage==65001?D=utf8read(D):O.type=="binary"&&typeof $cptable<"u"&&O.codepage&&(D=$cptable.utils.decode(O.codepage,$cptable.utils.encode(28591,D))),D.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(O.type=="string"?D:utf8read(D),O):T(D,O)}function B(M,O){return sheet_to_workbook(A(M,O),O)}function I(M){for(var O=[],D=safe_decode_range(M["!ref"]),L,V=M["!data"]!=null,U=D.s.r;U<=D.e.r;++U){for(var q=[],H=D.s.c;H<=D.e.c;++H){var W=encode_cell({r:U,c:H});if(L=V?(M["!data"][U]||[])[H]:M[W],!L||L.v==null){q.push("          ");continue}for(var Q=(L.w||(format_cell(L),L.w)||"").slice(0,10);Q.length<10;)Q+=" ";q.push(Q+(H===0?" ":""))}O.push(q.join(""))}return O.join(`
`)}return{to_workbook:B,to_sheet:A,from_sheet:I}}();function read_wb_ID(n,_){var x=_||{},E=!!x.WTF;x.WTF=!0;try{var S=SYLK.to_workbook(n,x);return x.WTF=E,S}catch(C){if(x.WTF=E,!C.message.match(/SYLK bad record ID/)&&E)throw C;return PRN.to_workbook(n,_)}}var WK_=function(){function n(pe,he,Se){if(pe){prep_blob(pe,pe.l||0);for(var we=Se.Enum||G;pe.l<pe.length;){var xe=pe.read_shift(2),Ee=we[xe]||we[65535],ye=pe.read_shift(2),Ce=pe.l+ye,ve=Ee.f&&Ee.f(pe,ye,Se);if(pe.l=Ce,he(ve,Ee,xe))return}}}function _(pe,he){switch(he.type){case"base64":return x(s2a(Base64_decode(pe)),he);case"binary":return x(s2a(pe),he);case"buffer":case"array":return x(pe,he)}throw"Unsupported type "+he.type}function x(pe,he){if(!pe)return pe;var Se=he||{},we={},xe="Sheet1",Ee="",ye=0,Ce={},ve=[],Be=[],me=[];Se.dense&&(me=we["!data"]=[]);var Ie={s:{r:0,c:0},e:{r:0,c:0}},Ve=Se.sheetRows||0;if(pe[4]==81&&pe[5]==80&&pe[6]==87)return ee(pe,he);if(pe[2]==0&&(pe[3]==8||pe[3]==9)&&pe.length>=16&&pe[14]==5&&pe[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(pe[2]==2)Se.Enum=G,n(pe,function(He,We,Ke){switch(Ke){case 0:Se.vers=He,He>=4096&&(Se.qpro=!0);break;case 255:Se.vers=He,Se.works=!0;break;case 6:Ie=He;break;case 204:He&&(Ee=He);break;case 222:Ee=He;break;case 15:case 51:(!Se.qpro&&!Se.works||Ke==51)&&He[1].v.charCodeAt(0)<48&&(He[1].v=He[1].v.slice(1)),(Se.works||Se.works2)&&(He[1].v=He[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:Ke==14&&(He[2]&112)==112&&(He[2]&15)>1&&(He[2]&15)<15&&(He[1].z=Se.dateNF||table_fmt[14],Se.cellDates&&(He[1].t="d",He[1].v=numdate(He[1].v))),Se.qpro&&He[3]>ye&&(we["!ref"]=encode_range(Ie),Ce[xe]=we,ve.push(xe),we={},Se.dense&&(me=we["!data"]=[]),Ie={s:{r:0,c:0},e:{r:0,c:0}},ye=He[3],xe=Ee||"Sheet"+(ye+1),Ee="");var Ge=Se.dense?(me[He[0].r]||[])[He[0].c]:we[encode_cell(He[0])];if(Ge){Ge.t=He[1].t,Ge.v=He[1].v,He[1].z!=null&&(Ge.z=He[1].z),He[1].f!=null&&(Ge.f=He[1].f);break}Se.dense?(me[He[0].r]||(me[He[0].r]=[]),me[He[0].r][He[0].c]=He[1]):we[encode_cell(He[0])]=He[1];break;case 21509:Se.works2=!0;break}},Se);else if(pe[2]==26||pe[2]==14)Se.Enum=j,pe[2]==14&&(Se.qpro=!0,pe.l=0),n(pe,function(He,We,Ke){switch(Ke){case 204:xe=He;break;case 22:He[1].v.charCodeAt(0)<48&&(He[1].v=He[1].v.slice(1)),He[1].v=He[1].v.replace(/\x0F./g,function(Ge){return String.fromCharCode(Ge.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(He[3]>ye&&(we["!ref"]=encode_range(Ie),Ce[xe]=we,ve.push(xe),we={},Se.dense&&(me=we["!data"]=[]),Ie={s:{r:0,c:0},e:{r:0,c:0}},ye=He[3],xe="Sheet"+(ye+1)),Ve>0&&He[0].r>=Ve)break;Se.dense?(me[He[0].r]||(me[He[0].r]=[]),me[He[0].r][He[0].c]=He[1]):we[encode_cell(He[0])]=He[1],Ie.e.c<He[0].c&&(Ie.e.c=He[0].c),Ie.e.r<He[0].r&&(Ie.e.r=He[0].r);break;case 27:He[14e3]&&(Be[He[14e3][0]]=He[14e3][1]);break;case 1537:Be[He[0]]=He[1],He[0]==ye&&(xe=He[1]);break}},Se);else throw new Error("Unrecognized LOTUS BOF "+pe[2]);if(we["!ref"]=encode_range(Ie),Ce[Ee||xe]=we,ve.push(Ee||xe),!Be.length)return{SheetNames:ve,Sheets:Ce};for(var Me={},Ne=[],Pe=0;Pe<Be.length;++Pe)Ce[ve[Pe]]?(Ne.push(Be[Pe]||ve[Pe]),Me[Be[Pe]]=Ce[Be[Pe]]||Ce[ve[Pe]]):(Ne.push(Be[Pe]),Me[Be[Pe]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:Me}}function E(pe,he){var Se=he||{};if(+Se.codepage>=0&&set_cp(+Se.codepage),Se.type=="string")throw new Error("Cannot write WK1 to JS string");var we=buf_array(),xe=safe_decode_range(pe["!ref"]),Ee=pe["!data"]!=null,ye=[];write_biff_rec(we,0,C(1030)),write_biff_rec(we,6,B(xe));for(var Ce=Math.min(xe.e.r,8191),ve=xe.s.c;ve<=xe.e.c;++ve)ye[ve]=encode_col(ve);for(var Be=xe.s.r;Be<=Ce;++Be){var me=encode_row(Be);for(ve=xe.s.c;ve<=xe.e.c;++ve){var Ie=Ee?(pe["!data"][Be]||[])[ve]:pe[ye[ve]+me];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")(Ie.v|0)==Ie.v&&Ie.v>=-32768&&Ie.v<=32767?write_biff_rec(we,13,V(Be,ve,Ie.v)):write_biff_rec(we,14,q(Be,ve,Ie.v));else{var Ve=format_cell(Ie);write_biff_rec(we,15,O(Be,ve,Ve.slice(0,239)))}}}return write_biff_rec(we,1),we.end()}function S(pe,he){var Se=he||{};if(+Se.codepage>=0&&set_cp(+Se.codepage),Se.type=="string")throw new Error("Cannot write WK3 to JS string");var we=buf_array();write_biff_rec(we,0,T(pe));for(var xe=0,Ee=0;xe<pe.SheetNames.length;++xe)(pe.Sheets[pe.SheetNames[xe]]||{})["!ref"]&&write_biff_rec(we,27,ie(pe.SheetNames[xe],Ee++));var ye=0;for(xe=0;xe<pe.SheetNames.length;++xe){var Ce=pe.Sheets[pe.SheetNames[xe]];if(!(!Ce||!Ce["!ref"])){for(var ve=safe_decode_range(Ce["!ref"]),Be=Ce["!data"]!=null,me=[],Ie=Math.min(ve.e.r,8191),Ve=ve.s.r;Ve<=Ie;++Ve)for(var Me=encode_row(Ve),Ne=ve.s.c;Ne<=ve.e.c;++Ne){Ve===ve.s.r&&(me[Ne]=encode_col(Ne));var Pe=me[Ne]+Me,He=Be?(Ce["!data"][Ve]||[])[Ne]:Ce[Pe];if(!(!He||He.t=="z"))if(He.t=="n")write_biff_rec(we,23,_e(Ve,Ne,ye,He.v));else{var We=format_cell(He);write_biff_rec(we,22,fe(Ve,Ne,ye,We.slice(0,239)))}}++ye}}return write_biff_rec(we,1),we.end()}function C(pe){var he=new_buf(2);return he.write_shift(2,pe),he}function T(pe){var he=new_buf(26);he.write_shift(2,4096),he.write_shift(2,4),he.write_shift(4,0);for(var Se=0,we=0,xe=0,Ee=0;Ee<pe.SheetNames.length;++Ee){var ye=pe.SheetNames[Ee],Ce=pe.Sheets[ye];if(!(!Ce||!Ce["!ref"])){++xe;var ve=decode_range(Ce["!ref"]);Se<ve.e.r&&(Se=ve.e.r),we<ve.e.c&&(we=ve.e.c)}}return Se>8191&&(Se=8191),he.write_shift(2,Se),he.write_shift(1,xe),he.write_shift(1,we),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(1,1),he.write_shift(1,2),he.write_shift(4,0),he.write_shift(4,0),he}function A(pe,he,Se){var we={s:{c:0,r:0},e:{c:0,r:0}};return he==8&&Se.qpro?(we.s.c=pe.read_shift(1),pe.l++,we.s.r=pe.read_shift(2),we.e.c=pe.read_shift(1),pe.l++,we.e.r=pe.read_shift(2),we):(we.s.c=pe.read_shift(2),we.s.r=pe.read_shift(2),he==12&&Se.qpro&&(pe.l+=2),we.e.c=pe.read_shift(2),we.e.r=pe.read_shift(2),he==12&&Se.qpro&&(pe.l+=2),we.s.c==65535&&(we.s.c=we.e.c=we.s.r=we.e.r=0),we)}function B(pe){var he=new_buf(8);return he.write_shift(2,pe.s.c),he.write_shift(2,pe.s.r),he.write_shift(2,pe.e.c),he.write_shift(2,pe.e.r),he}function I(pe,he,Se){var we=[{c:0,r:0},{t:"n",v:0},0,0];return Se.qpro&&Se.vers!=20768?(we[0].c=pe.read_shift(1),we[3]=pe.read_shift(1),we[0].r=pe.read_shift(2),pe.l+=2):Se.works?(we[0].c=pe.read_shift(2),we[0].r=pe.read_shift(2),we[2]=pe.read_shift(2)):(we[2]=pe.read_shift(1),we[0].c=pe.read_shift(2),we[0].r=pe.read_shift(2)),we}function M(pe,he,Se){var we=pe.l+he,xe=I(pe,he,Se);if(xe[1].t="s",Se.vers==20768){pe.l++;var Ee=pe.read_shift(1);return xe[1].v=pe.read_shift(Ee,"utf8"),xe}return Se.qpro&&pe.l++,xe[1].v=pe.read_shift(we-pe.l,"cstr"),xe}function O(pe,he,Se){var we=new_buf(7+Se.length);we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,pe),we.write_shift(1,39);for(var xe=0;xe<we.length;++xe){var Ee=Se.charCodeAt(xe);we.write_shift(1,Ee>=128?95:Ee)}return we.write_shift(1,0),we}function D(pe,he,Se){var we=pe.l+he,xe=I(pe,he,Se);if(xe[1].t="s",Se.vers==20768){var Ee=pe.read_shift(1);return xe[1].v=pe.read_shift(Ee,"utf8"),xe}return xe[1].v=pe.read_shift(we-pe.l,"cstr"),xe}function L(pe,he,Se){var we=I(pe,he,Se);return we[1].v=pe.read_shift(2,"i"),we}function V(pe,he,Se){var we=new_buf(7);return we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,pe),we.write_shift(2,Se,"i"),we}function U(pe,he,Se){var we=I(pe,he,Se);return we[1].v=pe.read_shift(8,"f"),we}function q(pe,he,Se){var we=new_buf(13);return we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,pe),we.write_shift(8,Se,"f"),we}function H(pe,he,Se){var we=pe.l+he,xe=I(pe,he,Se);if(xe[1].v=pe.read_shift(8,"f"),Se.qpro)pe.l=we;else{var Ee=pe.read_shift(2);ce(pe.slice(pe.l,pe.l+Ee),xe),pe.l+=Ee}return xe}function W(pe,he,Se){var we=he&32768;return he&=-32769,he=(we?pe:0)+(he>=8192?he-16384:he),(we?"":"$")+(Se?encode_col(he):encode_row(he))}var Q={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},re=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function ce(pe,he){prep_blob(pe,0);for(var Se=[],we=0,xe="",Ee="",ye="",Ce="";pe.l<pe.length;){var ve=pe[pe.l++];switch(ve){case 0:Se.push(pe.read_shift(8,"f"));break;case 1:Ee=W(he[0].c,pe.read_shift(2),!0),xe=W(he[0].r,pe.read_shift(2),!1),Se.push(Ee+xe);break;case 2:{var Be=W(he[0].c,pe.read_shift(2),!0),me=W(he[0].r,pe.read_shift(2),!1);Ee=W(he[0].c,pe.read_shift(2),!0),xe=W(he[0].r,pe.read_shift(2),!1),Se.push(Be+me+":"+Ee+xe)}break;case 3:if(pe.l<pe.length){console.error("WK1 premature formula end");return}break;case 4:Se.push("("+Se.pop()+")");break;case 5:Se.push(pe.read_shift(2));break;case 6:{for(var Ie="";ve=pe[pe.l++];)Ie+=String.fromCharCode(ve);Se.push('"'+Ie.replace(/"/g,'""')+'"')}break;case 8:Se.push("-"+Se.pop());break;case 23:Se.push("+"+Se.pop());break;case 22:Se.push("NOT("+Se.pop()+")");break;case 20:case 21:Ce=Se.pop(),ye=Se.pop(),Se.push(["AND","OR"][ve-20]+"("+ye+","+Ce+")");break;default:if(ve<32&&re[ve])Ce=Se.pop(),ye=Se.pop(),Se.push(ye+re[ve]+Ce);else if(Q[ve]){if(we=Q[ve][1],we==69&&(we=pe[pe.l++]),we>Se.length){console.error("WK1 bad formula parse 0x"+ve.toString(16)+":|"+Se.join("|")+"|");return}var Ve=Se.slice(-we);Se.length-=we,Se.push(Q[ve][0]+"("+Ve.join(",")+")")}else return ve<=7?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=24?console.error("WK1 unsupported op "+ve.toString(16)):ve<=30?console.error("WK1 invalid opcode "+ve.toString(16)):ve<=115?console.error("WK1 unsupported function opcode "+ve.toString(16)):console.error("WK1 unrecognized opcode "+ve.toString(16))}}Se.length==1?he[1].f=""+Se[0]:console.error("WK1 bad formula parse |"+Se.join("|")+"|")}function ne(pe){var he=[{c:0,r:0},{t:"n",v:0},0];return he[0].r=pe.read_shift(2),he[3]=pe[pe.l++],he[0].c=pe[pe.l++],he}function Y(pe,he){var Se=ne(pe);return Se[1].t="s",Se[1].v=pe.read_shift(he-4,"cstr"),Se}function fe(pe,he,Se,we){var xe=new_buf(6+we.length);xe.write_shift(2,pe),xe.write_shift(1,Se),xe.write_shift(1,he),xe.write_shift(1,39);for(var Ee=0;Ee<we.length;++Ee){var ye=we.charCodeAt(Ee);xe.write_shift(1,ye>=128?95:ye)}return xe.write_shift(1,0),xe}function ge(pe,he){var Se=ne(pe);Se[1].v=pe.read_shift(2);var we=Se[1].v>>1;if(Se[1].v&1)switch(we&7){case 0:we=(we>>3)*5e3;break;case 1:we=(we>>3)*500;break;case 2:we=(we>>3)/20;break;case 3:we=(we>>3)/200;break;case 4:we=(we>>3)/2e3;break;case 5:we=(we>>3)/2e4;break;case 6:we=(we>>3)/16;break;case 7:we=(we>>3)/64;break}return Se[1].v=we,Se}function $e(pe,he){var Se=ne(pe),we=pe.read_shift(4),xe=pe.read_shift(4),Ee=pe.read_shift(2);if(Ee==65535)return we===0&&xe===3221225472?(Se[1].t="e",Se[1].v=15):we===0&&xe===3489660928?(Se[1].t="e",Se[1].v=42):Se[1].v=0,Se;var ye=Ee&32768;return Ee=(Ee&32767)-16446,Se[1].v=(1-ye*2)*(xe*Math.pow(2,Ee+32)+we*Math.pow(2,Ee)),Se}function _e(pe,he,Se,we){var xe=new_buf(14);if(xe.write_shift(2,pe),xe.write_shift(1,Se),xe.write_shift(1,he),we==0)return xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(2,65535),xe;var Ee=0,ye=0,Ce=0,ve=0;return we<0&&(Ee=1,we=-we),ye=Math.log2(we)|0,we/=Math.pow(2,ye-31),ve=we>>>0,ve&2147483648||(we/=2,++ye,ve=we>>>0),we-=ve,ve|=2147483648,ve>>>=0,we*=Math.pow(2,32),Ce=we>>>0,xe.write_shift(4,Ce),xe.write_shift(4,ve),ye+=16383+(Ee?32768:0),xe.write_shift(2,ye),xe}function ae(pe,he){var Se=$e(pe);return pe.l+=he-14,Se}function X(pe,he){var Se=ne(pe),we=pe.read_shift(4);return Se[1].v=we>>6,Se}function F(pe,he){var Se=ne(pe),we=pe.read_shift(8,"f");return Se[1].v=we,Se}function z(pe,he){var Se=F(pe);return pe.l+=he-12,Se}function J(pe,he){return pe[pe.l+he-1]==0?pe.read_shift(he,"cstr"):""}function te(pe,he){var Se=pe[pe.l++];Se>he-1&&(Se=he-1);for(var we="";we.length<Se;)we+=String.fromCharCode(pe[pe.l++]);return we}function se(pe,he,Se){if(!(!Se.qpro||he<21)){var we=pe.read_shift(1);pe.l+=17,pe.l+=1,pe.l+=2;var xe=pe.read_shift(he-21,"cstr");return[we,xe]}}function oe(pe,he){for(var Se={},we=pe.l+he;pe.l<we;){var xe=pe.read_shift(2);if(xe==14e3){for(Se[xe]=[0,""],Se[xe][0]=pe.read_shift(2);pe[pe.l];)Se[xe][1]+=String.fromCharCode(pe[pe.l]),pe.l++;pe.l++}}return Se}function ie(pe,he){var Se=new_buf(5+pe.length);Se.write_shift(2,14e3),Se.write_shift(2,he);for(var we=0;we<pe.length;++we){var xe=pe.charCodeAt(we);Se[Se.l++]=xe>127?95:xe}return Se[Se.l++]=0,Se}var G={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:A},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:L},14:{n:"NUMBER",f:U},15:{n:"LABEL",f:M},16:{n:"FORMULA",f:H},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:D},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:te},255:{n:"BOF",f:parseuint16},65535:{n:""}},j={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:Y},23:{n:"NUMBER17",f:$e},24:{n:"NUMBER18",f:ge},25:{n:"FORMULA19",f:ae},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:oe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:X},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:se},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function ee(pe,he){prep_blob(pe,0);var Se=he||{},we={};Se.dense&&(we["!data"]=[]);var xe=[],Ee="",ye={s:{r:-1,c:-1},e:{r:-1,c:-1}},Ce=0,ve=0,Be=0,me=0,Ie={SheetNames:[],Sheets:{}};e:for(;pe.l<pe.length;){var Ve=pe.read_shift(2),Me=pe.read_shift(2),Ne=pe.slice(pe.l,pe.l+Me);switch(prep_blob(Ne,0),Ve){case 1:if(Ne.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(Ne.l+=12;Ne.l<Ne.length;)Ce=Ne.read_shift(2),ve=Ne.read_shift(1),xe.push(Ne.read_shift(Ce,"cstr"));break;case 1032:break;case 1537:{var Pe=Ne.read_shift(2);we={},Se.dense&&(we["!data"]=[]),ye.s.c=Ne.read_shift(2),ye.e.c=Ne.read_shift(2),ye.s.r=Ne.read_shift(4),ye.e.r=Ne.read_shift(4),Ne.l+=4,Ne.l+2<Ne.length&&(Ce=Ne.read_shift(2),ve=Ne.read_shift(1),Ee=Ce==0?"":Ne.read_shift(Ce,"cstr")),Ee||(Ee=encode_col(Pe))}break;case 1538:{if(ye.s.c>255||ye.s.r>999999)break;ye.e.c<ye.s.c&&(ye.e.c=ye.s.c),ye.e.r<ye.s.r&&(ye.e.r=ye.s.r),we["!ref"]=encode_range(ye),book_append_sheet(Ie,we,Ee)}break;case 2561:Be=Ne.read_shift(2),ye.e.c<Be&&(ye.e.c=Be),ye.s.c>Be&&(ye.s.c=Be),me=Ne.read_shift(4),ye.s.r>me&&(ye.s.r=me),me=Ne.read_shift(4),ye.e.r<me&&(ye.e.r=me);break;case 3073:{me=Ne.read_shift(4),Ce=Ne.read_shift(4),ye.s.r>me&&(ye.s.r=me),ye.e.r<me+Ce-1&&(ye.e.r=me+Ce-1);for(var He=encode_col(Be);Ne.l<Ne.length;){var We={t:"z"},Ke=Ne.read_shift(1);Ke&128&&(Ne.l+=2);var Ge=Ke&64?Ne.read_shift(2)-1:0;switch(Ke&31){case 1:break;case 2:We={t:"n",v:Ne.read_shift(2)};break;case 3:We={t:"n",v:Ne.read_shift(2,"i")};break;case 5:We={t:"n",v:Ne.read_shift(8,"f")};break;case 7:We={t:"s",v:xe[ve=Ne.read_shift(4)-1]};break;case 8:We={t:"n",v:Ne.read_shift(8,"f")},Ne.l+=2,Ne.l+=4;break;default:throw"Unrecognized QPW cell type "+(Ke&31)}var nt=0;if(Ke&32)switch(Ke&31){case 2:nt=Ne.read_shift(2);break;case 3:nt=Ne.read_shift(2,"i");break;case 7:nt=Ne.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(Ke&31)}for(!Se.sheetStubs&&We.t=="z"||(we["!data"]!=null?(we["!data"][me]||(we["!data"][me]=[]),we["!data"][me][Be]=We):we[He+encode_row(me)]=We),++me,--Ce;Ge-- >0&&Ce>=0;){if(Ke&32)switch(Ke&31){case 2:We={t:"n",v:We.v+nt&65535};break;case 3:We={t:"n",v:We.v+nt&65535},We.v>32767&&(We.v-=65536);break;case 7:We={t:"s",v:xe[ve=ve+nt>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(Ke&31)}else switch(Ke&31){case 1:We={t:"z"};break;case 2:We={t:"n",v:Ne.read_shift(2)};break;case 7:We={t:"s",v:xe[ve=Ne.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(Ke&31)}!Se.sheetStubs&&We.t=="z"||(we["!data"]!=null?(we["!data"][me]||(we["!data"][me]=[]),we["!data"][me][Be]=We):we[He+encode_row(me)]=We),++me,--Ce}}}break}pe.l+=Me}return Ie}return{sheet_to_wk1:E,book_to_wk3:S,to_workbook:_}}();function parse_rpr(n){var _={},x=n.match(tagregex),E=0,S=!1;if(x)for(;E!=x.length;++E){var C=parsexmltag(x[E]);switch(C[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!C.val)break;case"<shadow>":case"<shadow/>":_.shadow=1;break;case"</shadow>":break;case"<charset":if(C.val=="1")break;_.cp=CS2CP[parseInt(C.val,10)];break;case"<outline":if(!C.val)break;case"<outline>":case"<outline/>":_.outline=1;break;case"</outline>":break;case"<rFont":_.name=C.val;break;case"<sz":_.sz=C.val;break;case"<strike":if(!C.val)break;case"<strike>":case"<strike/>":_.strike=1;break;case"</strike>":break;case"<u":if(!C.val)break;switch(C.val){case"double":_.uval="double";break;case"singleAccounting":_.uval="single-accounting";break;case"doubleAccounting":_.uval="double-accounting";break}case"<u>":case"<u/>":_.u=1;break;case"</u>":break;case"<b":if(C.val=="0")break;case"<b>":case"<b/>":_.b=1;break;case"</b>":break;case"<i":if(C.val=="0")break;case"<i>":case"<i/>":_.i=1;break;case"</i>":break;case"<color":C.rgb&&(_.color=C.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":_.family=C.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":_.valign=C.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(C[0].charCodeAt(1)!==47&&!S)throw new Error("Unrecognized rich format "+C[0])}}return _}var parse_rs=function(){var n=matchtag("t"),_=matchtag("rPr");function x(C){var T=C.match(n);if(!T)return{t:"s",v:""};var A={t:"s",v:unescapexml(T[1])},B=C.match(_);return B&&(A.s=parse_rpr(B[1])),A}var E=/<(?:\w+:)?r>/g,S=/<\/(?:\w+:)?r>/;return function(T){return T.replace(E,"").split(S).map(x).filter(function(A){return A.v})}}(),rs_to_html=function n(){var _=/(\r\n|\n)/g;function x(S,C,T){var A=[];S.u&&A.push("text-decoration: underline;"),S.uval&&A.push("text-underline-style:"+S.uval+";"),S.sz&&A.push("font-size:"+S.sz+"pt;"),S.outline&&A.push("text-effect: outline;"),S.shadow&&A.push("text-shadow: auto;"),C.push('<span style="'+A.join("")+'">'),S.b&&(C.push("<b>"),T.push("</b>")),S.i&&(C.push("<i>"),T.push("</i>")),S.strike&&(C.push("<s>"),T.push("</s>"));var B=S.valign||"";return B=="superscript"||B=="super"?B="sup":B=="subscript"&&(B="sub"),B!=""&&(C.push("<"+B+">"),T.push("</"+B+">")),T.push("</span>"),S}function E(S){var C=[[],S.v,[]];return S.v?(S.s&&x(S.s,C[0],C[2]),C[0].join("")+C[1].replace(_,"<br/>")+C[2].join("")):""}return function(C){return C.map(E).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(n,_){var x=_?_.cellHTML:!0,E={};return n?(n.match(/^\s*<(?:\w+:)?t[^>]*>/)?(E.t=unescapexml(utf8read(n.slice(n.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),E.r=utf8read(n),x&&(E.h=escapehtml(E.t))):n.match(sirregex)&&(E.r=utf8read(n),E.t=unescapexml(utf8read((n.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),x&&(E.h=rs_to_html(parse_rs(E.r)))),E):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(n,_){var x=[],E="";if(!n)return x;var S=n.match(sstr0);if(S){E=S[2].replace(sstr1,"").split(sstr2);for(var C=0;C!=E.length;++C){var T=parse_si(E[C].trim(),_);T!=null&&(x[x.length]=T)}S=parsexmltag(S[1]),x.Count=S.count,x.Unique=S.uniqueCount}return x}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(n,_){if(!_.bookSST)return"";var x=[XML_HEADER];x[x.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:n.Count,uniqueCount:n.Unique});for(var E=0;E!=n.length;++E)if(n[E]!=null){var S=n[E],C="<si>";S.r?C+=S.r:(C+="<t",S.t||(S.t=""),typeof S.t!="string"&&(S.t=String(S.t)),S.t.match(straywsregex)&&(C+=' xml:space="preserve"'),C+=">"+escapexml(S.t)+"</t>"),C+="</si>",x[x.length]=C}return x.length>2&&(x[x.length]="</sst>",x[1]=x[1].replace("/>",">")),x.join("")}function parse_BrtBeginSst(n){return[n.read_shift(4),n.read_shift(4)]}function parse_sst_bin(n,_){var x=[],E=!1;return recordhopper(n,function(C,T,A){switch(A){case 159:x.Count=C[0],x.Unique=C[1];break;case 19:x.push(C);break;case 160:return!0;case 35:E=!0;break;case 36:E=!1;break;default:if(T.T,!E||_.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}),x}function write_BrtBeginSst(n,_){return _||(_=new_buf(8)),_.write_shift(4,n.Count),_.write_shift(4,n.Unique),_}var write_BrtSSTItem=write_RichStr;function write_sst_bin(n){var _=buf_array();write_record(_,159,write_BrtBeginSst(n));for(var x=0;x<n.length;++x)write_record(_,19,write_BrtSSTItem(n[x]));return write_record(_,160),_.end()}function _JS2ANSI(n){for(var _=[],x=n.split(""),E=0;E<x.length;++E)_[E]=x[E].charCodeAt(0);return _}function parse_CRYPTOVersion(n,_){var x={};return x.Major=n.read_shift(2),x.Minor=n.read_shift(2),_>=4&&(n.l+=_-4),x}function parse_DataSpaceVersionInfo(n){var _={};return _.id=n.read_shift(0,"lpp4"),_.R=parse_CRYPTOVersion(n,4),_.U=parse_CRYPTOVersion(n,4),_.W=parse_CRYPTOVersion(n,4),_}function parse_DataSpaceMapEntry(n){for(var _=n.read_shift(4),x=n.l+_-4,E={},S=n.read_shift(4),C=[];S-- >0;)C.push({t:n.read_shift(4),v:n.read_shift(0,"lpp4")});if(E.name=n.read_shift(0,"lpp4"),E.comps=C,n.l!=x)throw new Error("Bad DataSpaceMapEntry: "+n.l+" != "+x);return E}function parse_DataSpaceMap(n){var _=[];n.l+=4;for(var x=n.read_shift(4);x-- >0;)_.push(parse_DataSpaceMapEntry(n));return _}function parse_DataSpaceDefinition(n){var _=[];n.l+=4;for(var x=n.read_shift(4);x-- >0;)_.push(n.read_shift(0,"lpp4"));return _}function parse_TransformInfoHeader(n){var _={};return n.read_shift(4),n.l+=4,_.id=n.read_shift(0,"lpp4"),_.name=n.read_shift(0,"lpp4"),_.R=parse_CRYPTOVersion(n,4),_.U=parse_CRYPTOVersion(n,4),_.W=parse_CRYPTOVersion(n,4),_}function parse_Primary(n){var _=parse_TransformInfoHeader(n);if(_.ename=n.read_shift(0,"8lpp4"),_.blksz=n.read_shift(4),_.cmode=n.read_shift(4),n.read_shift(4)!=4)throw new Error("Bad !Primary record");return _}function parse_EncryptionHeader(n,_){var x=n.l+_,E={};E.Flags=n.read_shift(4)&63,n.l+=4,E.AlgID=n.read_shift(4);var S=!1;switch(E.AlgID){case 26126:case 26127:case 26128:S=E.Flags==36;break;case 26625:S=E.Flags==4;break;case 0:S=E.Flags==16||E.Flags==4||E.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+E.AlgID}if(!S)throw new Error("Encryption Flags/AlgID mismatch");return E.AlgIDHash=n.read_shift(4),E.KeySize=n.read_shift(4),E.ProviderType=n.read_shift(4),n.l+=8,E.CSPName=n.read_shift(x-n.l>>1,"utf16le"),n.l=x,E}function parse_EncryptionVerifier(n,_){var x={},E=n.l+_;return n.l+=4,x.Salt=n.slice(n.l,n.l+16),n.l+=16,x.Verifier=n.slice(n.l,n.l+16),n.l+=16,n.read_shift(4),x.VerifierHash=n.slice(n.l,E),n.l=E,x}function parse_EncryptionInfo(n){var _=parse_CRYPTOVersion(n);switch(_.Minor){case 2:return[_.Minor,parse_EncInfoStd(n)];case 3:return[_.Minor,parse_EncInfoExt()];case 4:return[_.Minor,parse_EncInfoAgl(n)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+_.Minor)}function parse_EncInfoStd(n){var _=n.read_shift(4);if((_&63)!=36)throw new Error("EncryptionInfo mismatch");var x=n.read_shift(4),E=parse_EncryptionHeader(n,x),S=parse_EncryptionVerifier(n,n.length-n.l);return{t:"Std",h:E,v:S}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(n){var _=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];n.l+=4;var x=n.read_shift(n.length-n.l,"utf8"),E={};return x.replace(tagregex,function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":_.forEach(function(A){E[A]=T[A]});break;case"<dataIntegrity":E.encryptedHmacKey=T.encryptedHmacKey,E.encryptedHmacValue=T.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":E.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":E.uri=T.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":E.encs.push(T);break;default:throw T[0]}}),E}function parse_RC4CryptoHeader(n,_){var x={},E=x.EncryptionVersionInfo=parse_CRYPTOVersion(n,4);if(_-=4,E.Minor!=2)throw new Error("unrecognized minor version code: "+E.Minor);if(E.Major>4||E.Major<2)throw new Error("unrecognized major version code: "+E.Major);x.Flags=n.read_shift(4),_-=4;var S=n.read_shift(4);return _-=4,x.EncryptionHeader=parse_EncryptionHeader(n,S),_-=S,x.EncryptionVerifier=parse_EncryptionVerifier(n,_),x}function parse_RC4Header(n){var _={},x=_.EncryptionVersionInfo=parse_CRYPTOVersion(n,4);if(x.Major!=1||x.Minor!=1)throw"unrecognized version code "+x.Major+" : "+x.Minor;return _.Salt=n.read_shift(16),_.EncryptedVerifier=n.read_shift(16),_.EncryptedVerifierHash=n.read_shift(16),_}function crypto_CreatePasswordVerifier_Method1(n){var _=0,x,E=_JS2ANSI(n),S=E.length+1,C,T,A,B,I;for(x=new_raw_buf(S),x[0]=E.length,C=1;C!=S;++C)x[C]=E[C-1];for(C=S-1;C>=0;--C)T=x[C],A=_&16384?1:0,B=_<<1&32767,I=A|B,_=I^T;return _^52811}var crypto_CreateXorArray_Method1=function(){var n=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],_=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],x=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],E=function(T){return(T/2|T*128)&255},S=function(T,A){return E(T^A)},C=function(T){for(var A=_[T.length-1],B=104,I=T.length-1;I>=0;--I)for(var M=T[I],O=0;O!=7;++O)M&64&&(A^=x[B]),M*=2,--B;return A};return function(T){for(var A=_JS2ANSI(T),B=C(A),I=A.length,M=new_raw_buf(16),O=0;O!=16;++O)M[O]=0;var D,L,V;for((I&1)===1&&(D=B>>8,M[I]=S(n[0],D),--I,D=B&255,L=A[A.length-1],M[I]=S(L,D));I>0;)--I,D=B>>8,M[I]=S(A[I],D),--I,D=B&255,M[I]=S(A[I],D);for(I=15,V=15-A.length;V>0;)D=B>>8,M[I]=S(n[V],D),--I,--V,D=B&255,M[I]=S(A[I],D),--I,--V;return M}}(),crypto_DecryptData_Method1=function(n,_,x,E,S){S||(S=_),E||(E=crypto_CreateXorArray_Method1(n));var C,T;for(C=0;C!=_.length;++C)T=_[C],T^=E[x],T=(T>>5|T<<3)&255,S[C]=T,++x;return[S,x,E]},crypto_MakeXorDecryptor=function(n){var _=0,x=crypto_CreateXorArray_Method1(n);return function(E){var S=crypto_DecryptData_Method1("",E,_,x);return _=S[1],S[0]}};function parse_XORObfuscation(n,_,x,E){var S={key:parseuint16(n),verificationBytes:parseuint16(n)};return x.password&&(S.verifier=crypto_CreatePasswordVerifier_Method1(x.password)),E.valid=S.verificationBytes===S.verifier,E.valid&&(E.insitu=crypto_MakeXorDecryptor(x.password)),S}function parse_FilePassHeader(n,_,x){var E=x||{};return E.Info=n.read_shift(2),n.l-=2,E.Info===1?E.Data=parse_RC4Header(n):E.Data=parse_RC4CryptoHeader(n,_),E}function parse_FilePass(n,_,x){var E={Type:x.biff>=8?n.read_shift(2):0};return E.Type?parse_FilePassHeader(n,_-2,E):parse_XORObfuscation(n,x.biff>=8?_:_-2,x,E),E}function rtf_to_sheet(n,_){switch(_.type){case"base64":return rtf_to_sheet_str(Base64_decode(n),_);case"binary":return rtf_to_sheet_str(n,_);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer.isBuffer(n)?n.toString("binary"):a2s(n),_);case"array":return rtf_to_sheet_str(cc2str(n),_)}throw new Error("Unrecognized type "+_.type)}function rtf_to_sheet_str(n,_){var x=_||{},E={},S=x.dense;S&&(E["!data"]=[]);var C=n.match(/\\trowd[\s\S]*?\\row\b/g);if(!C)throw new Error("RTF missing table");var T={s:{c:0,r:0},e:{c:0,r:C.length-1}},A=[];return C.forEach(function(B,I){S&&(A=E["!data"][I]=[]);for(var M=/\\[\w\-]+\b/g,O=0,D,L=-1,V=[];(D=M.exec(B))!=null;){var U=B.slice(O,M.lastIndex-D[0].length);switch(U.charCodeAt(0)==32&&(U=U.slice(1)),U.length&&V.push(U),D[0]){case"\\cell":if(++L,V.length){var q={v:V.join(""),t:"s"};q.v=="TRUE"||q.v=="FALSE"?(q.v=q.v=="TRUE",q.t="b"):isNaN(fuzzynum(q.v))||(q.t="n",x.cellText!==!1&&(q.w=q.v),q.v=fuzzynum(q.v)),S?A[L]=q:E[encode_cell({r:I,c:L})]=q}V=[];break;case"\\par":V.push(`
`);break}O=M.lastIndex}L>T.e.c&&(T.e.c=L)}),E["!ref"]=encode_range(T),E}function rtf_to_workbook(n,_){var x=sheet_to_workbook(rtf_to_sheet(n,_),_);return x.bookType="rtf",x}function sheet_to_rtf(n,_){var x=["{\\rtf1\\ansi"];if(!n["!ref"])return x[0]+"}";for(var E=safe_decode_range(n["!ref"]),S,C=n["!data"]!=null,T=[],A=E.s.r;A<=E.e.r;++A){x.push("\\trowd\\trautofit1");for(var B=E.s.c;B<=E.e.c;++B)x.push("\\cellx"+(B+1));for(x.push("\\pard\\intbl"),C&&(T=n["!data"][A]||[]),B=E.s.c;B<=E.e.c;++B){var I=encode_cell({r:A,c:B});if(S=C?T[B]:n[I],!S||S.v==null&&(!S.f||S.F)){x.push(" \\cell");continue}x.push(" "+(S.w||(format_cell(S),S.w)||"").replace(/[\r\n]/g,"\\par ")),x.push("\\cell")}x.push("\\pard\\intbl\\row")}return x.join("")+"}"}function hex2RGB(n){var _=n.slice(n[0]==="#"?1:0).slice(0,6);return[parseInt(_.slice(0,2),16),parseInt(_.slice(2,4),16),parseInt(_.slice(4,6),16)]}function rgb2Hex(n){for(var _=0,x=1;_!=3;++_)x=x*256+(n[_]>255?255:n[_]<0?0:n[_]);return x.toString(16).toUpperCase().slice(1)}function rgb2HSL(n){var _=n[0]/255,x=n[1]/255,E=n[2]/255,S=Math.max(_,x,E),C=Math.min(_,x,E),T=S-C;if(T===0)return[0,0,_];var A=0,B=0,I=S+C;switch(B=T/(I>1?2-I:I),S){case _:A=((x-E)/T+6)%6;break;case x:A=(E-_)/T+2;break;case E:A=(_-x)/T+4;break}return[A/6,B,I/2]}function hsl2RGB(n){var _=n[0],x=n[1],E=n[2],S=x*2*(E<.5?E:1-E),C=E-S/2,T=[C,C,C],A=6*_,B;if(x!==0)switch(A|0){case 0:case 6:B=S*A,T[0]+=S,T[1]+=B;break;case 1:B=S*(2-A),T[0]+=B,T[1]+=S;break;case 2:B=S*(A-2),T[1]+=S,T[2]+=B;break;case 3:B=S*(4-A),T[1]+=B,T[2]+=S;break;case 4:B=S*(A-4),T[2]+=S,T[0]+=B;break;case 5:B=S*(6-A),T[2]+=B,T[0]+=S;break}for(var I=0;I!=3;++I)T[I]=Math.round(T[I]*255);return T}function rgb_tint(n,_){if(_===0)return n;var x=rgb2HSL(hex2RGB(n));return _<0?x[2]=x[2]*(1+_):x[2]=1-(1-x[2])*(1-_),rgb2Hex(hsl2RGB(x))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(n){return Math.floor((n+Math.round(128/MDW)/256)*MDW)}function px2char(n){return Math.floor((n-5)/MDW*100+.5)/100}function char2width(n){return Math.round((n*MDW+5)/MDW*256)/256}function cycle_width(n){return char2width(px2char(width2px(n)))}function find_mdw_colw(n){var _=Math.abs(n-cycle_width(n)),x=MDW;if(_>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(n-cycle_width(n))<=_&&(_=Math.abs(n-cycle_width(n)),x=MDW);MDW=x}function process_col(n){n.width?(n.wpx=width2px(n.width),n.wch=px2char(n.wpx),n.MDW=MDW):n.wpx?(n.wch=px2char(n.wpx),n.width=char2width(n.wch),n.MDW=MDW):typeof n.wch=="number"&&(n.width=char2width(n.wch),n.wpx=width2px(n.width),n.MDW=MDW),n.customWidth&&delete n.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(n){return n*96/PPI}function pt2px(n){return n*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(n,_,x,E){_.Borders=[];var S={},C=!1;(n[0].match(tagregex)||[]).forEach(function(T){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":S={},A.diagonalUp&&(S.diagonalUp=parsexmlbool(A.diagonalUp)),A.diagonalDown&&(S.diagonalDown=parsexmlbool(A.diagonalDown)),_.Borders.push(S);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":C=!0;break;case"</ext>":C=!1;break;default:if(E&&E.WTF&&!C)throw new Error("unrecognized "+A[0]+" in borders")}})}function parse_fills(n,_,x,E){_.Fills=[];var S={},C=!1;(n[0].match(tagregex)||[]).forEach(function(T){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":S={},_.Fills.push(S);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":_.Fills.push(S),S={};break;case"<patternFill":case"<patternFill>":A.patternType&&(S.patternType=A.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":S.bgColor||(S.bgColor={}),A.indexed&&(S.bgColor.indexed=parseInt(A.indexed,10)),A.theme&&(S.bgColor.theme=parseInt(A.theme,10)),A.tint&&(S.bgColor.tint=parseFloat(A.tint)),A.rgb&&(S.bgColor.rgb=A.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":S.fgColor||(S.fgColor={}),A.theme&&(S.fgColor.theme=parseInt(A.theme,10)),A.tint&&(S.fgColor.tint=parseFloat(A.tint)),A.rgb!=null&&(S.fgColor.rgb=A.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":C=!0;break;case"</ext>":C=!1;break;default:if(E&&E.WTF&&!C)throw new Error("unrecognized "+A[0]+" in fills")}})}function parse_fonts(n,_,x,E){_.Fonts=[];var S={},C=!1;(n[0].match(tagregex)||[]).forEach(function(T){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":_.Fonts.push(S),S={};break;case"<name":A.val&&(S.name=utf8read(A.val));break;case"<name/>":case"</name>":break;case"<b":S.bold=A.val?parsexmlbool(A.val):1;break;case"<b/>":S.bold=1;break;case"<i":S.italic=A.val?parsexmlbool(A.val):1;break;case"<i/>":S.italic=1;break;case"<u":switch(A.val){case"none":S.underline=0;break;case"single":S.underline=1;break;case"double":S.underline=2;break;case"singleAccounting":S.underline=33;break;case"doubleAccounting":S.underline=34;break}break;case"<u/>":S.underline=1;break;case"<strike":S.strike=A.val?parsexmlbool(A.val):1;break;case"<strike/>":S.strike=1;break;case"<outline":S.outline=A.val?parsexmlbool(A.val):1;break;case"<outline/>":S.outline=1;break;case"<shadow":S.shadow=A.val?parsexmlbool(A.val):1;break;case"<shadow/>":S.shadow=1;break;case"<condense":S.condense=A.val?parsexmlbool(A.val):1;break;case"<condense/>":S.condense=1;break;case"<extend":S.extend=A.val?parsexmlbool(A.val):1;break;case"<extend/>":S.extend=1;break;case"<sz":A.val&&(S.sz=+A.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":A.val&&(S.vertAlign=A.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":A.val&&(S.family=parseInt(A.val,10));break;case"<family/>":case"</family>":break;case"<scheme":A.val&&(S.scheme=A.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(A.val=="1")break;A.codepage=CS2CP[parseInt(A.val,10)];break;case"<color":if(S.color||(S.color={}),A.auto&&(S.color.auto=parsexmlbool(A.auto)),A.rgb)S.color.rgb=A.rgb.slice(-6);else if(A.indexed){S.color.index=parseInt(A.indexed,10);var B=XLSIcv[S.color.index];S.color.index==81&&(B=XLSIcv[1]),B||(B=XLSIcv[1]),S.color.rgb=B[0].toString(16)+B[1].toString(16)+B[2].toString(16)}else A.theme&&(S.color.theme=parseInt(A.theme,10),A.tint&&(S.color.tint=parseFloat(A.tint)),A.theme&&x.themeElements&&x.themeElements.clrScheme&&(S.color.rgb=rgb_tint(x.themeElements.clrScheme[S.color.theme].rgb,S.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":C=!0;break;case"</AlternateContent>":C=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":C=!0;break;case"</ext>":C=!1;break;default:if(E&&E.WTF&&!C)throw new Error("unrecognized "+A[0]+" in fonts")}})}function parse_numFmts(n,_,x){_.NumberFmt=[];for(var E=keys$1(table_fmt),S=0;S<E.length;++S)_.NumberFmt[E[S]]=table_fmt[E[S]];var C=n[0].match(tagregex);if(C)for(S=0;S<C.length;++S){var T=parsexmltag(C[S]);switch(strip_ns(T[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var A=unescapexml(utf8read(T.formatCode)),B=parseInt(T.numFmtId,10);if(_.NumberFmt[B]=A,B>0){if(B>392){for(B=392;B>60&&_.NumberFmt[B]!=null;--B);_.NumberFmt[B]=A}SSF__load(A,B)}}break;case"</numFmt>":break;default:if(x.WTF)throw new Error("unrecognized "+T[0]+" in numFmts")}}}function write_numFmts(n){var _=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var E=x[0];E<=x[1];++E)n[E]!=null&&(_[_.length]=writextag("numFmt",null,{numFmtId:E,formatCode:escapexml(n[E])}))}),_.length===1?"":(_[_.length]="</numFmts>",_[0]=writextag("numFmts",null,{count:_.length-2}).replace("/>",">"),_.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(n,_,x){_.CellXf=[];var E,S=!1;(n[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C),A=0;switch(strip_ns(T[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(E=T,delete E[0],A=0;A<cellXF_uint.length;++A)E[cellXF_uint[A]]&&(E[cellXF_uint[A]]=parseInt(E[cellXF_uint[A]],10));for(A=0;A<cellXF_bool.length;++A)E[cellXF_bool[A]]&&(E[cellXF_bool[A]]=parsexmlbool(E[cellXF_bool[A]]));if(_.NumberFmt&&E.numFmtId>392){for(A=392;A>60;--A)if(_.NumberFmt[E.numFmtId]==_.NumberFmt[A]){E.numFmtId=A;break}}_.CellXf.push(E);break;case"</xf>":break;case"<alignment":case"<alignment/>":var B={};T.vertical&&(B.vertical=T.vertical),T.horizontal&&(B.horizontal=T.horizontal),T.textRotation!=null&&(B.textRotation=T.textRotation),T.indent&&(B.indent=T.indent),T.wrapText&&(B.wrapText=parsexmlbool(T.wrapText)),E.alignment=B;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":S=!0;break;case"</AlternateContent>":S=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(x&&x.WTF&&!S)throw new Error("unrecognized "+T[0]+" in cellXfs")}})}function write_cellXfs(n){var _=[];return _[_.length]=writextag("cellXfs",null),n.forEach(function(x){_[_.length]=writextag("xf",null,x)}),_[_.length]="</cellXfs>",_.length===2?"":(_[0]=writextag("cellXfs",null,{count:_.length-2}).replace("/>",">"),_.join(""))}var parse_sty_xml=function n(){var _=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,x=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,E=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,S=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,C=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(A,B,I){var M={};if(!A)return M;A=A.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var O;return(O=A.match(_))&&parse_numFmts(O,M,I),(O=A.match(S))&&parse_fonts(O,M,B,I),(O=A.match(E))&&parse_fills(O,M,B,I),(O=A.match(C))&&parse_borders(O,M,B,I),(O=A.match(x))&&parse_cellXfs(O,M,I),M}}();function write_sty_xml(n,_){var x=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],E;return n.SSF&&(E=write_numFmts(n.SSF))!=null&&(x[x.length]=E),x[x.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',x[x.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',x[x.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',x[x.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(E=write_cellXfs(_.cellXfs))&&(x[x.length]=E),x[x.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',x[x.length]='<dxfs count="0"/>',x[x.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',x.length>2&&(x[x.length]="</styleSheet>",x[1]=x[1].replace("/>",">")),x.join("")}function parse_BrtFmt(n,_){var x=n.read_shift(2),E=parse_XLWideString(n);return[x,E]}function write_BrtFmt(n,_,x){x||(x=new_buf(6+4*_.length)),x.write_shift(2,n),write_XLWideString(_,x);var E=x.length>x.l?x.slice(0,x.l):x;return x.l==null&&(x.l=x.length),E}function parse_BrtFont(n,_,x){var E={};E.sz=n.read_shift(2)/20;var S=parse_FontFlags(n);S.fItalic&&(E.italic=1),S.fCondense&&(E.condense=1),S.fExtend&&(E.extend=1),S.fShadow&&(E.shadow=1),S.fOutline&&(E.outline=1),S.fStrikeout&&(E.strike=1);var C=n.read_shift(2);switch(C===700&&(E.bold=1),n.read_shift(2)){case 1:E.vertAlign="superscript";break;case 2:E.vertAlign="subscript";break}var T=n.read_shift(1);T!=0&&(E.underline=T);var A=n.read_shift(1);A>0&&(E.family=A);var B=n.read_shift(1);switch(B>0&&(E.charset=B),n.l++,E.color=parse_BrtColor(n),n.read_shift(1)){case 1:E.scheme="major";break;case 2:E.scheme="minor";break}return E.name=parse_XLWideString(n),E}function write_BrtFont(n,_){_||(_=new_buf(25+4*32)),_.write_shift(2,n.sz*20),write_FontFlags(n,_),_.write_shift(2,n.bold?700:400);var x=0;n.vertAlign=="superscript"?x=1:n.vertAlign=="subscript"&&(x=2),_.write_shift(2,x),_.write_shift(1,n.underline||0),_.write_shift(1,n.family||0),_.write_shift(1,n.charset||0),_.write_shift(1,0),write_BrtColor(n.color,_);var E=0;return n.scheme=="major"&&(E=1),n.scheme=="minor"&&(E=2),_.write_shift(1,E),write_XLWideString(n.name,_),_.length>_.l?_.slice(0,_.l):_}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(n,_){_||(_=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var x=rev_XLSBFillPTNames[n.patternType];x==null&&(x=40),_.write_shift(4,x);var E=0;if(x!=40)for(write_BrtColor({auto:1},_),write_BrtColor({auto:1},_);E<12;++E)_.write_shift(4,0);else{for(;E<4;++E)_.write_shift(4,0);for(;E<12;++E)_.write_shift(4,0)}return _.length>_.l?_.slice(0,_.l):_}function parse_BrtXF(n,_){var x=n.l+_,E=n.read_shift(2),S=n.read_shift(2);return n.l=x,{ixfe:E,numFmtId:S}}function write_BrtXF(n,_,x){x||(x=new_buf(16)),x.write_shift(2,_||0),x.write_shift(2,n.numFmtId||0),x.write_shift(2,0),x.write_shift(2,0),x.write_shift(2,0),x.write_shift(1,0),x.write_shift(1,0);var E=0;return x.write_shift(1,E),x.write_shift(1,0),x.write_shift(1,0),x.write_shift(1,0),x}function write_Blxf(n,_){return _||(_=new_buf(10)),_.write_shift(1,0),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(4,0),_}var parse_BrtBorder=parsenoop;function write_BrtBorder(n,_){return _||(_=new_buf(51)),_.write_shift(1,0),write_Blxf(null,_),write_Blxf(null,_),write_Blxf(null,_),write_Blxf(null,_),write_Blxf(null,_),_.length>_.l?_.slice(0,_.l):_}function write_BrtStyle(n,_){return _||(_=new_buf(12+4*10)),_.write_shift(4,n.xfId),_.write_shift(2,1),_.write_shift(1,+n.builtinId),_.write_shift(1,0),write_XLNullableWideString(n.name||"",_),_.length>_.l?_.slice(0,_.l):_}function write_BrtBeginTableStyles(n,_,x){var E=new_buf(2052);return E.write_shift(4,n),write_XLNullableWideString(_,E),write_XLNullableWideString(x,E),E.length>E.l?E.slice(0,E.l):E}function parse_sty_bin(n,_,x){var E={};E.NumberFmt=[];for(var S in table_fmt)E.NumberFmt[S]=table_fmt[S];E.CellXf=[],E.Fonts=[];var C=[],T=!1;return recordhopper(n,function(B,I,M){switch(M){case 44:E.NumberFmt[B[0]]=B[1],SSF__load(B[1],B[0]);break;case 43:E.Fonts.push(B),B.color.theme!=null&&_&&_.themeElements&&_.themeElements.clrScheme&&(B.color.rgb=rgb_tint(_.themeElements.clrScheme[B.color.theme].rgb,B.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:C[C.length-1]==617&&E.CellXf.push(B);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:T=!0;break;case 36:T=!1;break;case 37:C.push(M),T=!0;break;case 38:C.pop(),T=!1;break;default:if(I.T>0)C.push(M);else if(I.T<0)C.pop();else if(!T||x.WTF&&C[C.length-1]!=37)throw new Error("Unexpected record 0x"+M.toString(16))}}),E}function write_FMTS_bin(n,_){if(_){var x=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(E){for(var S=E[0];S<=E[1];++S)_[S]!=null&&++x}),x!=0&&(write_record(n,615,write_UInt32LE(x)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(E){for(var S=E[0];S<=E[1];++S)_[S]!=null&&write_record(n,44,write_BrtFmt(S,_[S]))}),write_record(n,616))}}function write_FONTS_bin(n){var _=1;write_record(n,611,write_UInt32LE(_)),write_record(n,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(n,612)}function write_FILLS_bin(n){var _=2;write_record(n,603,write_UInt32LE(_)),write_record(n,45,write_BrtFill({patternType:"none"})),write_record(n,45,write_BrtFill({patternType:"gray125"})),write_record(n,604)}function write_BORDERS_bin(n){var _=1;write_record(n,613,write_UInt32LE(_)),write_record(n,46,write_BrtBorder()),write_record(n,614)}function write_CELLSTYLEXFS_bin(n){var _=1;write_record(n,626,write_UInt32LE(_)),write_record(n,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(n,627)}function write_CELLXFS_bin(n,_){write_record(n,617,write_UInt32LE(_.length)),_.forEach(function(x){write_record(n,47,write_BrtXF(x,0))}),write_record(n,618)}function write_STYLES_bin(n){var _=1;write_record(n,619,write_UInt32LE(_)),write_record(n,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(n,620)}function write_DXFS_bin(n){var _=0;write_record(n,505,write_UInt32LE(_)),write_record(n,506)}function write_TABLESTYLES_bin(n){var _=0;write_record(n,508,write_BrtBeginTableStyles(_,"TableStyleMedium9","PivotStyleMedium4")),write_record(n,509)}function write_sty_bin(n,_){var x=buf_array();return write_record(x,278),write_FMTS_bin(x,n.SSF),write_FONTS_bin(x),write_FILLS_bin(x),write_BORDERS_bin(x),write_CELLSTYLEXFS_bin(x),write_CELLXFS_bin(x,_.cellXfs),write_STYLES_bin(x),write_DXFS_bin(x),write_TABLESTYLES_bin(x),write_record(x,279),x.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(n,_,x){_.themeElements.clrScheme=[];var E={};(n[0].match(tagregex)||[]).forEach(function(S){var C=parsexmltag(S);switch(C[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":E.rgb=C.val;break;case"<a:sysClr":E.rgb=C.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":C[0].charAt(1)==="/"?(_.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(C[0])]=E,E={}):E.name=C[0].slice(3,C[0].length-1);break;default:if(x&&x.WTF)throw new Error("Unrecognized "+C[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(n,_,x){_.themeElements={};var E;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(S){if(!(E=n.match(S[1])))throw new Error(S[0]+" not found in themeElements");S[2](E,_,x)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(n,_){(!n||n.length===0)&&(n=write_theme());var x,E={};if(!(x=n.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(x[0],E,_),E.raw=n,E}function write_theme(n,_){if(_&&_.themeXLSX)return _.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var x=[XML_HEADER];return x[x.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',x[x.length]="<a:themeElements>",x[x.length]='<a:clrScheme name="Office">',x[x.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',x[x.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',x[x.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',x[x.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',x[x.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',x[x.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',x[x.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',x[x.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',x[x.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',x[x.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',x[x.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',x[x.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',x[x.length]="</a:clrScheme>",x[x.length]='<a:fontScheme name="Office">',x[x.length]="<a:majorFont>",x[x.length]='<a:latin typeface="Cambria"/>',x[x.length]='<a:ea typeface=""/>',x[x.length]='<a:cs typeface=""/>',x[x.length]='<a:font script="Jpan" typeface=" "/>',x[x.length]='<a:font script="Hang" typeface=" "/>',x[x.length]='<a:font script="Hans" typeface=""/>',x[x.length]='<a:font script="Hant" typeface=""/>',x[x.length]='<a:font script="Arab" typeface="Times New Roman"/>',x[x.length]='<a:font script="Hebr" typeface="Times New Roman"/>',x[x.length]='<a:font script="Thai" typeface="Tahoma"/>',x[x.length]='<a:font script="Ethi" typeface="Nyala"/>',x[x.length]='<a:font script="Beng" typeface="Vrinda"/>',x[x.length]='<a:font script="Gujr" typeface="Shruti"/>',x[x.length]='<a:font script="Khmr" typeface="MoolBoran"/>',x[x.length]='<a:font script="Knda" typeface="Tunga"/>',x[x.length]='<a:font script="Guru" typeface="Raavi"/>',x[x.length]='<a:font script="Cans" typeface="Euphemia"/>',x[x.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',x[x.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',x[x.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',x[x.length]='<a:font script="Thaa" typeface="MV Boli"/>',x[x.length]='<a:font script="Deva" typeface="Mangal"/>',x[x.length]='<a:font script="Telu" typeface="Gautami"/>',x[x.length]='<a:font script="Taml" typeface="Latha"/>',x[x.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',x[x.length]='<a:font script="Orya" typeface="Kalinga"/>',x[x.length]='<a:font script="Mlym" typeface="Kartika"/>',x[x.length]='<a:font script="Laoo" typeface="DokChampa"/>',x[x.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',x[x.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',x[x.length]='<a:font script="Viet" typeface="Times New Roman"/>',x[x.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',x[x.length]='<a:font script="Geor" typeface="Sylfaen"/>',x[x.length]="</a:majorFont>",x[x.length]="<a:minorFont>",x[x.length]='<a:latin typeface="Calibri"/>',x[x.length]='<a:ea typeface=""/>',x[x.length]='<a:cs typeface=""/>',x[x.length]='<a:font script="Jpan" typeface=" "/>',x[x.length]='<a:font script="Hang" typeface=" "/>',x[x.length]='<a:font script="Hans" typeface=""/>',x[x.length]='<a:font script="Hant" typeface=""/>',x[x.length]='<a:font script="Arab" typeface="Arial"/>',x[x.length]='<a:font script="Hebr" typeface="Arial"/>',x[x.length]='<a:font script="Thai" typeface="Tahoma"/>',x[x.length]='<a:font script="Ethi" typeface="Nyala"/>',x[x.length]='<a:font script="Beng" typeface="Vrinda"/>',x[x.length]='<a:font script="Gujr" typeface="Shruti"/>',x[x.length]='<a:font script="Khmr" typeface="DaunPenh"/>',x[x.length]='<a:font script="Knda" typeface="Tunga"/>',x[x.length]='<a:font script="Guru" typeface="Raavi"/>',x[x.length]='<a:font script="Cans" typeface="Euphemia"/>',x[x.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',x[x.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',x[x.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',x[x.length]='<a:font script="Thaa" typeface="MV Boli"/>',x[x.length]='<a:font script="Deva" typeface="Mangal"/>',x[x.length]='<a:font script="Telu" typeface="Gautami"/>',x[x.length]='<a:font script="Taml" typeface="Latha"/>',x[x.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',x[x.length]='<a:font script="Orya" typeface="Kalinga"/>',x[x.length]='<a:font script="Mlym" typeface="Kartika"/>',x[x.length]='<a:font script="Laoo" typeface="DokChampa"/>',x[x.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',x[x.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',x[x.length]='<a:font script="Viet" typeface="Arial"/>',x[x.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',x[x.length]='<a:font script="Geor" typeface="Sylfaen"/>',x[x.length]="</a:minorFont>",x[x.length]="</a:fontScheme>",x[x.length]='<a:fmtScheme name="Office">',x[x.length]="<a:fillStyleLst>",x[x.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',x[x.length]='<a:gradFill rotWithShape="1">',x[x.length]="<a:gsLst>",x[x.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',x[x.length]="</a:gsLst>",x[x.length]='<a:lin ang="16200000" scaled="1"/>',x[x.length]="</a:gradFill>",x[x.length]='<a:gradFill rotWithShape="1">',x[x.length]="<a:gsLst>",x[x.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',x[x.length]="</a:gsLst>",x[x.length]='<a:lin ang="16200000" scaled="0"/>',x[x.length]="</a:gradFill>",x[x.length]="</a:fillStyleLst>",x[x.length]="<a:lnStyleLst>",x[x.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',x[x.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',x[x.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',x[x.length]="</a:lnStyleLst>",x[x.length]="<a:effectStyleLst>",x[x.length]="<a:effectStyle>",x[x.length]="<a:effectLst>",x[x.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',x[x.length]="</a:effectLst>",x[x.length]="</a:effectStyle>",x[x.length]="<a:effectStyle>",x[x.length]="<a:effectLst>",x[x.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',x[x.length]="</a:effectLst>",x[x.length]="</a:effectStyle>",x[x.length]="<a:effectStyle>",x[x.length]="<a:effectLst>",x[x.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',x[x.length]="</a:effectLst>",x[x.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',x[x.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',x[x.length]="</a:effectStyle>",x[x.length]="</a:effectStyleLst>",x[x.length]="<a:bgFillStyleLst>",x[x.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',x[x.length]='<a:gradFill rotWithShape="1">',x[x.length]="<a:gsLst>",x[x.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',x[x.length]="</a:gsLst>",x[x.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',x[x.length]="</a:gradFill>",x[x.length]='<a:gradFill rotWithShape="1">',x[x.length]="<a:gsLst>",x[x.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',x[x.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',x[x.length]="</a:gsLst>",x[x.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',x[x.length]="</a:gradFill>",x[x.length]="</a:bgFillStyleLst>",x[x.length]="</a:fmtScheme>",x[x.length]="</a:themeElements>",x[x.length]="<a:objectDefaults>",x[x.length]="<a:spDef>",x[x.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',x[x.length]="</a:spDef>",x[x.length]="<a:lnDef>",x[x.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',x[x.length]="</a:lnDef>",x[x.length]="</a:objectDefaults>",x[x.length]="<a:extraClrSchemeLst/>",x[x.length]="</a:theme>",x.join("")}function parse_Theme(n,_,x){var E=n.l+_,S=n.read_shift(4);if(S!==124226){if(!x.cellStyles){n.l=E;return}var C=n.slice(n.l);n.l=E;var T;try{T=zip_read(C,{type:"array"})}catch{return}var A=getzipstr(T,"theme/theme/theme1.xml",!0);if(A)return parse_theme_xml(A,x)}}function parse_ColorTheme(n){return n.read_shift(4)}function parse_FullColorExt(n){var _={};switch(_.xclrType=n.read_shift(2),_.nTintShade=n.read_shift(2),_.xclrType){case 0:n.l+=4;break;case 1:_.xclrValue=parse_IcvXF(n,4);break;case 2:_.xclrValue=parse_LongRGBA(n);break;case 3:_.xclrValue=parse_ColorTheme(n);break;case 4:n.l+=4;break}return n.l+=8,_}function parse_IcvXF(n,_){return parsenoop(n,_)}function parse_XFExtGradient(n,_){return parsenoop(n,_)}function parse_ExtProp(n){var _=n.read_shift(2),x=n.read_shift(2)-4,E=[_];switch(_){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:E[1]=parse_FullColorExt(n);break;case 6:E[1]=parse_XFExtGradient(n,x);break;case 14:case 15:E[1]=n.read_shift(x===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+_+" "+x)}return E}function parse_XFExt(n,_){var x=n.l+_;n.l+=2;var E=n.read_shift(2);n.l+=2;for(var S=n.read_shift(2),C=[];S-- >0;)C.push(parse_ExtProp(n,x-n.l));return{ixfe:E,ext:C}}function update_xfext(n,_){_.forEach(function(x){switch(x[0]){}})}function parse_BrtMdtinfo(n,_){return{flags:n.read_shift(4),version:n.read_shift(4),name:parse_XLWideString(n)}}function write_BrtMdtinfo(n){var _=new_buf(12+2*n.name.length);return _.write_shift(4,n.flags),_.write_shift(4,n.version),write_XLWideString(n.name,_),_.slice(0,_.l)}function parse_BrtMdb(n){for(var _=[],x=n.read_shift(4);x-- >0;)_.push([n.read_shift(4),n.read_shift(4)]);return _}function write_BrtMdb(n){var _=new_buf(4+8*n.length);_.write_shift(4,n.length);for(var x=0;x<n.length;++x)_.write_shift(4,n[x][0]),_.write_shift(4,n[x][1]);return _}function write_BrtBeginEsfmd(n,_){var x=new_buf(8+2*_.length);return x.write_shift(4,n),write_XLWideString(_,x),x.slice(0,x.l)}function parse_BrtBeginEsmdb(n){return n.l+=4,n.read_shift(4)!=0}function write_BrtBeginEsmdb(n,_){var x=new_buf(8);return x.write_shift(4,n),x.write_shift(4,_?1:0),x}function parse_xlmeta_bin(n,_,x){var E={Types:[],Cell:[],Value:[]},S=x||{},C=[],T=!1,A=2;return recordhopper(n,function(B,I,M){switch(M){case 335:E.Types.push({name:B.name});break;case 51:B.forEach(function(O){A==1?E.Cell.push({type:E.Types[O[0]-1].name,index:O[1]}):A==0&&E.Value.push({type:E.Types[O[0]-1].name,index:O[1]})});break;case 337:A=B?1:0;break;case 338:A=2;break;case 35:C.push(M),T=!0;break;case 36:C.pop(),T=!1;break;default:if(!I.T){if(!T||S.WTF&&C[C.length-1]!=35)throw new Error("Unexpected record 0x"+M.toString(16))}}}),E}function write_xlmeta_bin(){var n=buf_array();return write_record(n,332),write_record(n,334,write_UInt32LE(1)),write_record(n,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(n,336),write_record(n,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(n,52),write_record(n,35,write_UInt32LE(514)),write_record(n,4096,write_UInt32LE(0)),write_record(n,4097,writeuint16(1)),write_record(n,36),write_record(n,53),write_record(n,340),write_record(n,337,write_BrtBeginEsmdb(1,!0)),write_record(n,51,write_BrtMdb([[1,0]])),write_record(n,338),write_record(n,333),n.end()}function parse_xlmeta_xml(n,_,x){var E={Types:[],Cell:[],Value:[]};if(!n)return E;var S=!1,C=2,T;return n.replace(tagregex,function(A){var B=parsexmltag(A);switch(strip_ns(B[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":E.Types.push({name:B.name});break;case"</metadataType>":break;case"<futureMetadata":for(var I=0;I<E.Types.length;++I)E.Types[I].name==B.name&&(T=E.Types[I]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":C==1?E.Cell.push({type:E.Types[B.t-1].name,index:+B.v}):C==0&&E.Value.push({type:E.Types[B.t-1].name,index:+B.v});break;case"</rc>":break;case"<cellMetadata":C=1;break;case"</cellMetadata>":C=2;break;case"<valueMetadata":C=0;break;case"</valueMetadata>":C=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;case"<rvb":if(!T)break;T.offsets||(T.offsets=[]),T.offsets.push(+B.i);break;default:if(!S&&x?.WTF)throw new Error("unrecognized "+B[0]+" in metadata")}return A}),E}function write_xlmeta_xml(){var n=[XML_HEADER];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function parse_cc_xml(n){var _=[];if(!n)return _;var x=1;return(n.match(tagregex)||[]).forEach(function(E){var S=parsexmltag(E);switch(S[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete S[0],S.i?x=S.i:S.i=x,_.push(S);break}}),_}function parse_BrtCalcChainItem$(n){var _={};_.i=n.read_shift(4);var x={};x.r=n.read_shift(4),x.c=n.read_shift(4),_.r=encode_cell(x);var E=n.read_shift(1);return E&2&&(_.l="1"),E&8&&(_.a="1"),_}function parse_cc_bin(n,_,x){var E=[];return recordhopper(n,function(C,T,A){switch(A){case 63:E.push(C);break;default:if(!T.T)throw new Error("Unexpected record 0x"+A.toString(16))}}),E}function parse_xlink_xml(){}function parse_xlink_bin(n,_,x,E){if(!n)return n;var S=E||{},C=!1;recordhopper(n,function(A,B,I){switch(I){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:C=!0;break;case 36:C=!1;break;default:if(!B.T){if(!C||S.WTF)throw new Error("Unexpected record 0x"+I.toString(16))}}},S)}function parse_drawing(n,_){if(!n)return"??";var x=(n.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return _["!id"][x].Target}function write_vml(n,_){var x=[21600,21600],E=["m0,0l0",x[1],x[0],x[1],x[0],"0xe"].join(","),S=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"})],C=65536*n,T=_||[];return T.length>0&&S.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:x.join(","),"o:spt":202,path:E})),T.forEach(function(A){++C,S.push(write_vml_comment(A,C))}),S.push("</xml>"),S.join("")}function write_vml_comment(n,_){var x=decode_cell(n[0]),E={color2:"#BEFF82",type:"gradient"};E.type=="gradient"&&(E.angle="-180");var S=E.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,C=writextag("v:fill",S,E),T={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+_,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(n[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",C,writextag("v:shadow",null,T),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[x.c+1,0,x.r+1,0,x.c+3,20,x.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(x.r)),writetag("x:Column",String(x.c)),n[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(n,_,x,E){var S=n["!data"]!=null,C;_.forEach(function(T){var A=decode_cell(T.ref);if(S?(n["!data"][A.r]||(n["!data"][A.r]=[]),C=n["!data"][A.r][A.c]):C=n[T.ref],!C){C={t:"z"},S?n["!data"][A.r][A.c]=C:n[T.ref]=C;var B=safe_decode_range(n["!ref"]||"BDWGO1000001:A1");B.s.r>A.r&&(B.s.r=A.r),B.e.r<A.r&&(B.e.r=A.r),B.s.c>A.c&&(B.s.c=A.c),B.e.c<A.c&&(B.e.c=A.c);var I=encode_range(B);n["!ref"]=I}C.c||(C.c=[]);var M={a:T.author,t:T.t,r:T.r,T:x};T.h&&(M.h=T.h);for(var O=C.c.length-1;O>=0;--O){if(!x&&C.c[O].T)return;x&&!C.c[O].T&&C.c.splice(O,1)}if(x&&E){for(O=0;O<E.length;++O)if(M.a==E[O].id){M.a=E[O].name||M.a;break}}C.c.push(M)})}function parse_comments_xml(n,_){if(n.match(/<(?:\w+:)?comments *\/>/))return[];var x=[],E=[],S=n.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);S&&S[1]&&S[1].split(/<\/\w*:?author>/).forEach(function(T){if(!(T===""||T.trim()==="")){var A=T.match(/<(?:\w+:)?author[^>]*>(.*)/);A&&x.push(A[1])}});var C=n.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return C&&C[1]&&C[1].split(/<\/\w*:?comment>/).forEach(function(T){if(!(T===""||T.trim()==="")){var A=T.match(/<(?:\w+:)?comment[^>]*>/);if(A){var B=parsexmltag(A[0]),I={author:B.authorId&&x[B.authorId]||"sheetjsghost",ref:B.ref,guid:B.guid},M=decode_cell(B.ref);if(!(_.sheetRows&&_.sheetRows<=M.r)){var O=T.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),D=!!O&&!!O[1]&&parse_si(O[1])||{r:"",t:"",h:""};I.r=D.r,D.r=="<t></t>"&&(D.t=D.h=""),I.t=(D.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),_.cellHTML&&(I.h=D.h),E.push(I)}}}}),E}function write_comments_xml(n){var _=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],x=[];return _.push("<authors>"),n.forEach(function(E){E[1].forEach(function(S){var C=escapexml(S.a);x.indexOf(C)==-1&&(x.push(C),_.push("<author>"+C+"</author>")),S.T&&S.ID&&x.indexOf("tc="+S.ID)==-1&&(x.push("tc="+S.ID),_.push("<author>tc="+S.ID+"</author>"))})}),x.length==0&&(x.push("SheetJ5"),_.push("<author>SheetJ5</author>")),_.push("</authors>"),_.push("<commentList>"),n.forEach(function(E){var S=0,C=[],T=0;if(E[1][0]&&E[1][0].T&&E[1][0].ID&&(S=x.indexOf("tc="+E[1][0].ID)),E[1].forEach(function(I){I.a&&(S=x.indexOf(escapexml(I.a))),I.T&&++T,C.push(I.t==null?"":escapexml(I.t))}),T===0)E[1].forEach(function(I){_.push('<comment ref="'+E[0]+'" authorId="'+x.indexOf(escapexml(I.a))+'"><text>'),_.push(writetag("t",I.t==null?"":escapexml(I.t))),_.push("</text></comment>")});else{_.push('<comment ref="'+E[0]+'" authorId="'+S+'"><text>');for(var A=`Comment:
    `+C[0]+`
`,B=1;B<C.length;++B)A+=`Reply:
    `+C[B]+`
`;_.push(writetag("t",escapexml(A))),_.push("</text></comment>")}}),_.push("</commentList>"),_.length>2&&(_[_.length]="</comments>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_tcmnt_xml(n,_){var x=[],E=!1,S={},C=0;return n.replace(tagregex,function(A,B){var I=parsexmltag(A);switch(strip_ns(I[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":S={author:I.personId,guid:I.id,ref:I.ref,T:1};break;case"</threadedComment>":S.t!=null&&x.push(S);break;case"<text>":case"<text":C=B+A.length;break;case"</text>":S.t=n.slice(C,B).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":E=!0;break;case"</mentions>":E=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(!E&&_.WTF)throw new Error("unrecognized "+I[0]+" in threaded comments")}return A}),x}function write_tcmnt_xml(n,_,x){var E=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(S){var C="";(S[1]||[]).forEach(function(T,A){if(!T.T){delete T.ID;return}T.a&&_.indexOf(T.a)==-1&&_.push(T.a);var B={ref:S[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+x.tcid++).slice(-12)+"}"};A==0?C=B.id:B.parentId=C,T.ID=B.id,T.a&&(B.personId="{54EE7950-7262-4200-6969-"+("000000000000"+_.indexOf(T.a)).slice(-12)+"}"),E.push(writextag("threadedComment",writetag("text",T.t||""),B))})}),E.push("</ThreadedComments>"),E.join("")}function parse_people_xml(n,_){var x=[],E=!1;return n.replace(tagregex,function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":x.push({name:T.displayname,id:T.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(!E&&_.WTF)throw new Error("unrecognized "+T[0]+" in threaded comments")}return C}),x}function write_people_xml(n){var _=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return n.forEach(function(x,E){_.push(writextag("person",null,{displayName:x,id:"{54EE7950-7262-4200-6969-"+("000000000000"+E).slice(-12)+"}",userId:x,providerId:"None"}))}),_.push("</personList>"),_.join("")}function parse_BrtBeginComment(n){var _={};_.iauthor=n.read_shift(4);var x=parse_UncheckedRfX(n);return _.rfx=x.s,_.ref=encode_cell(x.s),n.l+=16,_}function write_BrtBeginComment(n,_){return _==null&&(_=new_buf(36)),_.write_shift(4,n[1].iauthor),write_UncheckedRfX(n[0],_),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(4,0),_}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(n){return write_XLWideString(n.slice(0,54))}function parse_comments_bin(n,_){var x=[],E=[],S={},C=!1;return recordhopper(n,function(A,B,I){switch(I){case 632:E.push(A);break;case 635:S=A;break;case 637:S.t=A.t,S.h=A.h,S.r=A.r;break;case 636:if(S.author=E[S.iauthor],delete S.iauthor,_.sheetRows&&S.rfx&&_.sheetRows<=S.rfx.r)break;S.t||(S.t=""),delete S.rfx,x.push(S);break;case 3072:break;case 35:C=!0;break;case 36:C=!1;break;case 37:break;case 38:break;default:if(!B.T){if(!C||_.WTF)throw new Error("Unexpected record 0x"+I.toString(16))}}}),x}function write_comments_bin(n){var _=buf_array(),x=[];return write_record(_,628),write_record(_,630),n.forEach(function(E){E[1].forEach(function(S){x.indexOf(S.a)>-1||(x.push(S.a.slice(0,54)),write_record(_,632,write_BrtCommentAuthor(S.a)))})}),write_record(_,631),write_record(_,633),n.forEach(function(E){E[1].forEach(function(S){S.iauthor=x.indexOf(S.a);var C={s:decode_cell(E[0]),e:decode_cell(E[0])};write_record(_,635,write_BrtBeginComment([C,S])),S.t&&S.t.length>0&&write_record(_,637,write_BrtCommentText(S)),write_record(_,636),delete S.iauthor})}),write_record(_,634),write_record(_,629),_.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(n){var _=CFB.utils.cfb_new({root:"R"});return n.FullPaths.forEach(function(x,E){if(!(x.slice(-1)==="/"||!x.match(/_VBA_PROJECT_CUR/))){var S=x.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(_,S,n.FileIndex[E].content)}}),CFB.write(_)}function fill_vba_xls(n,_){_.FullPaths.forEach(function(x,E){if(E!=0){var S=x.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");S.slice(-1)!=="/"&&CFB.utils.cfb_add(n,S,_.FileIndex[E].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,_={r:0,c:0};function x(E,S,C,T){var A=!1,B=!1;C.length==0?B=!0:C.charAt(0)=="["&&(B=!0,C=C.slice(1,-1)),T.length==0?A=!0:T.charAt(0)=="["&&(A=!0,T=T.slice(1,-1));var I=C.length>0?parseInt(C,10)|0:0,M=T.length>0?parseInt(T,10)|0:0;return A?M+=_.c:--M,B?I+=_.r:--I,S+(A?"":"$")+encode_col(M)+(B?"":"$")+encode_row(I)}return function(S,C){return _=C,S.replace(n,x)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(_,x){return _.replace(crefregex,function(E,S,C,T,A,B){var I=decode_col(T)-(C?0:x.c),M=decode_row(B)-(A?0:x.r),O=A=="$"?M+1:M==0?"":"["+M+"]",D=C=="$"?I+1:I==0?"":"["+I+"]";return S+"R"+O+"C"+D})}}();function shift_formula_str(n,_){return n.replace(crefregex,function(x,E,S,C,T,A){return E+(S=="$"?S+C:encode_col(decode_col(C)+_.c))+(T=="$"?T+A:encode_row(decode_row(A)+_.r))})}function shift_formula_xlsx(n,_,x){var E=decode_range(_),S=E.s,C=decode_cell(x),T={r:C.r-S.r,c:C.c-S.c};return shift_formula_str(n,T)}function fuzzyfmla(n){return n.length!=1}function _xlfn(n){return n.replace(/_xlfn\./g,"")}function parseread1(n){n.l+=1}function parse_ColRelU(n,_){var x=n.read_shift(_==1?1:2);return[x&16383,x>>14&1,x>>15&1]}function parse_RgceArea(n,_,x){var E=2;if(x){if(x.biff>=2&&x.biff<=5)return parse_RgceArea_BIFF2(n);x.biff==12&&(E=4)}var S=n.read_shift(E),C=n.read_shift(E),T=parse_ColRelU(n,2),A=parse_ColRelU(n,2);return{s:{r:S,c:T[0],cRel:T[1],rRel:T[2]},e:{r:C,c:A[0],cRel:A[1],rRel:A[2]}}}function parse_RgceArea_BIFF2(n){var _=parse_ColRelU(n,2),x=parse_ColRelU(n,2),E=n.read_shift(1),S=n.read_shift(1);return{s:{r:_[0],c:E,cRel:_[1],rRel:_[2]},e:{r:x[0],c:S,cRel:x[1],rRel:x[2]}}}function parse_RgceAreaRel(n,_,x){if(x.biff<8)return parse_RgceArea_BIFF2(n);var E=n.read_shift(x.biff==12?4:2),S=n.read_shift(x.biff==12?4:2),C=parse_ColRelU(n,2),T=parse_ColRelU(n,2);return{s:{r:E,c:C[0],cRel:C[1],rRel:C[2]},e:{r:S,c:T[0],cRel:T[1],rRel:T[2]}}}function parse_RgceLoc(n,_,x){if(x&&x.biff>=2&&x.biff<=5)return parse_RgceLoc_BIFF2(n);var E=n.read_shift(x&&x.biff==12?4:2),S=parse_ColRelU(n,2);return{r:E,c:S[0],cRel:S[1],rRel:S[2]}}function parse_RgceLoc_BIFF2(n){var _=parse_ColRelU(n,2),x=n.read_shift(1);return{r:_[0],c:x,cRel:_[1],rRel:_[2]}}function parse_RgceElfLoc(n){var _=n.read_shift(2),x=n.read_shift(2);return{r:_,c:x&255,fQuoted:!!(x&16384),cRel:x>>15,rRel:x>>15}}function parse_RgceLocRel(n,_,x){var E=x&&x.biff?x.biff:8;if(E>=2&&E<=5)return parse_RgceLocRel_BIFF2(n);var S=n.read_shift(E>=12?4:2),C=n.read_shift(2),T=(C&16384)>>14,A=(C&32768)>>15;if(C&=16383,A==1)for(;S>524287;)S-=1048576;if(T==1)for(;C>8191;)C=C-16384;return{r:S,c:C,cRel:T,rRel:A}}function parse_RgceLocRel_BIFF2(n){var _=n.read_shift(2),x=n.read_shift(1),E=(_&32768)>>15,S=(_&16384)>>14;return _&=16383,E==1&&_>=8192&&(_=_-16384),S==1&&x>=128&&(x=x-256),{r:_,c:x,cRel:S,rRel:E}}function parse_PtgArea(n,_,x){var E=(n[n.l++]&96)>>5,S=parse_RgceArea(n,x.biff>=2&&x.biff<=5?6:8,x);return[E,S]}function parse_PtgArea3d(n,_,x){var E=(n[n.l++]&96)>>5,S=n.read_shift(2,"i"),C=8;if(x)switch(x.biff){case 5:n.l+=12,C=6;break;case 12:C=12;break}var T=parse_RgceArea(n,C,x);return[E,S,T]}function parse_PtgAreaErr(n,_,x){var E=(n[n.l++]&96)>>5;return n.l+=x&&x.biff>8?12:x.biff<8?6:8,[E]}function parse_PtgAreaErr3d(n,_,x){var E=(n[n.l++]&96)>>5,S=n.read_shift(2),C=8;if(x)switch(x.biff){case 5:n.l+=12,C=6;break;case 12:C=12;break}return n.l+=C,[E,S]}function parse_PtgAreaN(n,_,x){var E=(n[n.l++]&96)>>5,S=parse_RgceAreaRel(n,_-1,x);return[E,S]}function parse_PtgArray(n,_,x){var E=(n[n.l++]&96)>>5;return n.l+=x.biff==2?6:x.biff==12?14:7,[E]}function parse_PtgAttrBaxcel(n){var _=n[n.l+1]&1,x=1;return n.l+=4,[_,x]}function parse_PtgAttrChoose(n,_,x){n.l+=2;for(var E=n.read_shift(x&&x.biff==2?1:2),S=[],C=0;C<=E;++C)S.push(n.read_shift(x&&x.biff==2?1:2));return S}function parse_PtgAttrGoto(n,_,x){var E=n[n.l+1]&255?1:0;return n.l+=2,[E,n.read_shift(x&&x.biff==2?1:2)]}function parse_PtgAttrIf(n,_,x){var E=n[n.l+1]&255?1:0;return n.l+=2,[E,n.read_shift(x&&x.biff==2?1:2)]}function parse_PtgAttrIfError(n){var _=n[n.l+1]&255?1:0;return n.l+=2,[_,n.read_shift(2)]}function parse_PtgAttrSemi(n,_,x){var E=n[n.l+1]&255?1:0;return n.l+=x&&x.biff==2?3:4,[E]}function parse_PtgAttrSpaceType(n){var _=n.read_shift(1),x=n.read_shift(1);return[_,x]}function parse_PtgAttrSpace(n){return n.read_shift(2),parse_PtgAttrSpaceType(n)}function parse_PtgAttrSpaceSemi(n){return n.read_shift(2),parse_PtgAttrSpaceType(n)}function parse_PtgRef(n,_,x){var E=(n[n.l]&96)>>5;n.l+=1;var S=parse_RgceLoc(n,0,x);return[E,S]}function parse_PtgRefN(n,_,x){var E=(n[n.l]&96)>>5;n.l+=1;var S=parse_RgceLocRel(n,0,x);return[E,S]}function parse_PtgRef3d(n,_,x){var E=(n[n.l]&96)>>5;n.l+=1;var S=n.read_shift(2);x&&x.biff==5&&(n.l+=12);var C=parse_RgceLoc(n,0,x);return[E,S,C]}function parse_PtgFunc(n,_,x){var E=(n[n.l]&96)>>5;n.l+=1;var S=n.read_shift(x&&x.biff<=3?1:2);return[FtabArgc[S],Ftab[S],E]}function parse_PtgFuncVar(n,_,x){var E=n[n.l++],S=n.read_shift(1),C=x&&x.biff<=3?[E==88?-1:0,n.read_shift(1)]:parsetab(n);return[S,(C[0]===0?Ftab:Cetab)[C[1]]]}function parsetab(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function parse_PtgAttrSum(n,_,x){n.l+=x&&x.biff==2?3:4}function parse_PtgExp(n,_,x){if(n.l++,x&&x.biff==12)return[n.read_shift(4,"i"),0];var E=n.read_shift(2),S=n.read_shift(x&&x.biff==2?1:2);return[E,S]}function parse_PtgErr(n){return n.l++,BErr[n.read_shift(1)]}function parse_PtgInt(n){return n.l++,n.read_shift(2)}function parse_PtgBool(n){return n.l++,n.read_shift(1)!==0}function parse_PtgNum(n){return n.l++,parse_Xnum(n)}function parse_PtgStr(n,_,x){return n.l++,parse_ShortXLUnicodeString(n,_-1,x)}function parse_SerAr(n,_){var x=[n.read_shift(1)];if(_==12)switch(x[0]){case 2:x[0]=4;break;case 4:x[0]=16;break;case 0:x[0]=1;break;case 1:x[0]=2;break}switch(x[0]){case 4:x[1]=parsebool(n,1)?"TRUE":"FALSE",_!=12&&(n.l+=7);break;case 37:case 16:x[1]=BErr[n[n.l]],n.l+=_==12?4:8;break;case 0:n.l+=8;break;case 1:x[1]=parse_Xnum(n);break;case 2:x[1]=parse_XLUnicodeString2(n,0,{biff:_>0&&_<8?2:_});break;default:throw new Error("Bad SerAr: "+x[0])}return x}function parse_PtgExtraMem(n,_,x){for(var E=n.read_shift(x.biff==12?4:2),S=[],C=0;C!=E;++C)S.push((x.biff==12?parse_UncheckedRfX:parse_Ref8U)(n));return S}function parse_PtgExtraArray(n,_,x){var E=0,S=0;x.biff==12?(E=n.read_shift(4),S=n.read_shift(4)):(S=1+n.read_shift(1),E=1+n.read_shift(2)),x.biff>=2&&x.biff<8&&(--E,--S==0&&(S=256));for(var C=0,T=[];C!=E&&(T[C]=[]);++C)for(var A=0;A!=S;++A)T[C][A]=parse_SerAr(n,x.biff);return T}function parse_PtgName(n,_,x){var E=n.read_shift(1)>>>5&3,S=!x||x.biff>=8?4:2,C=n.read_shift(S);switch(x.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[E,0,C]}function parse_PtgNameX(n,_,x){if(x.biff==5)return parse_PtgNameX_BIFF5(n);var E=n.read_shift(1)>>>5&3,S=n.read_shift(2),C=n.read_shift(4);return[E,S,C]}function parse_PtgNameX_BIFF5(n){var _=n.read_shift(1)>>>5&3,x=n.read_shift(2,"i");n.l+=8;var E=n.read_shift(2);return n.l+=12,[_,x,E]}function parse_PtgMemArea(n,_,x){var E=n.read_shift(1)>>>5&3;n.l+=x&&x.biff==2?3:4;var S=n.read_shift(x&&x.biff==2?1:2);return[E,S]}function parse_PtgMemFunc(n,_,x){var E=n.read_shift(1)>>>5&3,S=n.read_shift(x&&x.biff==2?1:2);return[E,S]}function parse_PtgRefErr(n,_,x){var E=n.read_shift(1)>>>5&3;return n.l+=4,x.biff<8&&n.l--,x.biff==12&&(n.l+=2),[E]}function parse_PtgRefErr3d(n,_,x){var E=(n[n.l++]&96)>>5,S=n.read_shift(2),C=4;if(x)switch(x.biff){case 5:C=15;break;case 12:C=6;break}return n.l+=C,[E,S]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(n,_,x){return n.l+=2,[parse_RgceElfLoc(n)]}function parse_PtgElfNoop(n){return n.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(n){return n.l+=2,[parseuint16(n),n.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(n){n.l+=2;var _=n.read_shift(2),x=n.read_shift(2),E=n.read_shift(4),S=n.read_shift(2),C=n.read_shift(2),T=PtgListRT[x>>2&31];return{ixti:_,coltype:x&3,rt:T,idx:E,c:S,C}}function parse_PtgSxName(n){return n.l+=2,[n.read_shift(4)]}function parse_PtgSheet(n,_,x){return n.l+=5,n.l+=2,n.l+=x.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(n,_,x){return n.l+=x.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(n){var _=n.read_shift(1)>>>5&3,x=n.read_shift(2);return[_,x]}function parse_PtgMemNoMemN(n){var _=n.read_shift(1)>>>5&3,x=n.read_shift(2);return[_,x]}function parse_PtgAttrNoop(n){return n.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(n,_,x,E){if(E.biff<8)return parsenoop(n,_);for(var S=n.l+_,C=[],T=0;T!==x.length;++T)switch(x[T][0]){case"PtgArray":x[T][1]=parse_PtgExtraArray(n,0,E),C.push(x[T][1]);break;case"PtgMemArea":x[T][2]=parse_PtgExtraMem(n,x[T][1],E),C.push(x[T][2]);break;case"PtgExp":E&&E.biff==12&&(x[T][1][1]=n.read_shift(4),C.push(x[T][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+x[T][0]}return _=S-n.l,_!==0&&C.push(parsenoop(n,_)),C}function parse_Rgce(n,_,x){for(var E=n.l+_,S,C,T=[];E!=n.l;)_=E-n.l,C=n[n.l],S=PtgTypes[C]||PtgTypes[PtgDupes[C]],(C===24||C===25)&&(S=(C===24?Ptg18:Ptg19)[n[n.l+1]]),!S||!S.f?parsenoop(n,_):T.push([S.n,S.f(n,_,x)]);return T}function stringify_array(n){for(var _=[],x=0;x<n.length;++x){for(var E=n[x],S=[],C=0;C<E.length;++C){var T=E[C];if(T)switch(T[0]){case 2:S.push('"'+T[1].replace(/"/g,'""')+'"');break;default:S.push(T[1])}else S.push("")}_.push(S.join(","))}return _.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(n,_){var x=n.lastIndexOf("!"),E=_.lastIndexOf("!");return x==-1&&E==-1?n+":"+_:x>0&&E>0&&n.slice(0,x).toLowerCase()==_.slice(0,E).toLowerCase()?n+":"+_.slice(E+1):(console.error("Cannot hydrate range",n,_),n+":"+_)}function get_ixti_raw(n,_,x){if(!n)return"SH33TJSERR0";if(x.biff>8&&(!n.XTI||!n.XTI[_]))return n.SheetNames[_];if(!n.XTI)return"SH33TJSERR6";var E=n.XTI[_];if(x.biff<8)return _>1e4&&(_-=65536),_<0&&(_=-_),_==0?"":n.XTI[_-1];if(!E)return"SH33TJSERR1";var S="";if(x.biff>8)switch(n[E[0]][0]){case 357:return S=E[1]==-1?"#REF":n.SheetNames[E[1]],E[1]==E[2]?S:S+":"+n.SheetNames[E[2]];case 358:return x.SID!=null?n.SheetNames[x.SID]:"SH33TJSSAME"+n[E[0]][0];case 355:default:return"SH33TJSSRC"+n[E[0]][0]}switch(n[E[0]][0][0]){case 1025:return S=E[1]==-1?"#REF":n.SheetNames[E[1]]||"SH33TJSERR3",E[1]==E[2]?S:S+":"+n.SheetNames[E[2]];case 14849:return n[E[0]].slice(1).map(function(C){return C.Name}).join(";;");default:return n[E[0]][0][3]?(S=E[1]==-1?"#REF":n[E[0]][0][3][E[1]]||"SH33TJSERR4",E[1]==E[2]?S:S+":"+n[E[0]][0][3][E[2]]):"SH33TJSERR2"}}function get_ixti(n,_,x){var E=get_ixti_raw(n,_,x);return E=="#REF"?E:formula_quote_sheet_name(E,x)}function stringify_formula(n,_,x,E,S){var C=S&&S.biff||8,T={s:{c:0,r:0},e:{c:0,r:0}},A=[],B,I,M,O=0,D=0,L,V="";if(!n[0]||!n[0][0])return"";for(var U=-1,q="",H=0,W=n[0].length;H<W;++H){var Q=n[0][H];switch(Q[0]){case"PtgUminus":A.push("-"+A.pop());break;case"PtgUplus":A.push("+"+A.pop());break;case"PtgPercent":A.push(A.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(B=A.pop(),I=A.pop(),U>=0){switch(n[0][U][1][0]){case 0:q=fill(" ",n[0][U][1][1]);break;case 1:q=fill("\r",n[0][U][1][1]);break;default:if(q="",S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][U][1][0])}I=I+q,U=-1}A.push(I+PtgBinOp[Q[0]]+B);break;case"PtgIsect":B=A.pop(),I=A.pop(),A.push(I+" "+B);break;case"PtgUnion":B=A.pop(),I=A.pop(),A.push(I+","+B);break;case"PtgRange":B=A.pop(),I=A.pop(),A.push(make_3d_range(I,B));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":M=shift_cell_xls(Q[1][1],T,S),A.push(encode_cell_xls(M,C));break;case"PtgRefN":M=x?shift_cell_xls(Q[1][1],x,S):Q[1][1],A.push(encode_cell_xls(M,C));break;case"PtgRef3d":O=Q[1][1],M=shift_cell_xls(Q[1][2],T,S),V=get_ixti(E,O,S),A.push(V+"!"+encode_cell_xls(M,C));break;case"PtgFunc":case"PtgFuncVar":var re=Q[1][0],ce=Q[1][1];re||(re=0),re&=127;var ne=re==0?[]:A.slice(-re);A.length-=re,ce==="User"&&(ce=ne.shift()),A.push(ce+"("+ne.join(",")+")");break;case"PtgBool":A.push(Q[1]?"TRUE":"FALSE");break;case"PtgInt":A.push(Q[1]);break;case"PtgNum":A.push(String(Q[1]));break;case"PtgStr":A.push('"'+Q[1].replace(/"/g,'""')+'"');break;case"PtgErr":A.push(Q[1]);break;case"PtgAreaN":L=shift_range_xls(Q[1][1],x?{s:x}:T,S),A.push(encode_range_xls(L,S));break;case"PtgArea":L=shift_range_xls(Q[1][1],T,S),A.push(encode_range_xls(L,S));break;case"PtgArea3d":O=Q[1][1],L=Q[1][2],V=get_ixti(E,O,S),A.push(V+"!"+encode_range_xls(L,S));break;case"PtgAttrSum":A.push("SUM("+A.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":D=Q[1][2];var Y=(E.names||[])[D-1]||(E[0]||[])[D],fe=Y?Y.Name:"SH33TJSNAME"+String(D);fe&&fe.slice(0,6)=="_xlfn."&&!S.xlfn&&(fe=fe.slice(6)),A.push(fe);break;case"PtgNameX":var ge=Q[1][1];D=Q[1][2];var $e;if(S.biff<=5)ge<0&&(ge=-ge),E[ge]&&($e=E[ge][D]);else{var _e="";if(((E[ge]||[])[0]||[])[0]==14849||(((E[ge]||[])[0]||[])[0]==1025?E[ge][D]&&E[ge][D].itab>0&&(_e=E.SheetNames[E[ge][D].itab-1]+"!"):_e=E.SheetNames[D-1]+"!"),E[ge]&&E[ge][D])_e+=E[ge][D].Name;else if(E[0]&&E[0][D])_e+=E[0][D].Name;else{var ae=(get_ixti_raw(E,ge,S)||"").split(";;");ae[D-1]?_e=ae[D-1]:_e+="SH33TJSERRX"}A.push(_e);break}$e||($e={Name:"SH33TJSERRY"}),A.push($e.Name);break;case"PtgParen":var X="(",F=")";if(U>=0){switch(q="",n[0][U][1][0]){case 2:X=fill(" ",n[0][U][1][1])+X;break;case 3:X=fill("\r",n[0][U][1][1])+X;break;case 4:F=fill(" ",n[0][U][1][1])+F;break;case 5:F=fill("\r",n[0][U][1][1])+F;break;default:if(S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][U][1][0])}U=-1}A.push(X+A.pop()+F);break;case"PtgRefErr":A.push("#REF!");break;case"PtgRefErr3d":A.push("#REF!");break;case"PtgExp":M={c:Q[1][1],r:Q[1][0]};var z={c:x.c,r:x.r};if(E.sharedf[encode_cell(M)]){var J=E.sharedf[encode_cell(M)];A.push(stringify_formula(J,T,z,E,S))}else{var te=!1;for(B=0;B!=E.arrayf.length;++B)if(I=E.arrayf[B],!(M.c<I[0].s.c||M.c>I[0].e.c)&&!(M.r<I[0].s.r||M.r>I[0].e.r)){A.push(stringify_formula(I[1],T,z,E,S)),te=!0;break}te||A.push(Q[1])}break;case"PtgArray":A.push("{"+stringify_array(Q[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":U=H;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":A.push("");break;case"PtgAreaErr":A.push("#REF!");break;case"PtgAreaErr3d":A.push("#REF!");break;case"PtgList":A.push("Table"+Q[1].idx+"[#"+Q[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(Q));default:throw new Error("Unrecognized Formula Token: "+String(Q))}var se=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(S.biff!=3&&U>=0&&se.indexOf(n[0][H][0])==-1){Q=n[0][U];var oe=!0;switch(Q[1][0]){case 4:oe=!1;case 0:q=fill(" ",Q[1][1]);break;case 5:oe=!1;case 1:q=fill("\r",Q[1][1]);break;default:if(q="",S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+Q[1][0])}A.push((oe?q:"")+A.pop()+(oe?"":q)),U=-1}}if(A.length>1&&S.WTF)throw new Error("bad formula stack");return A[0]=="TRUE"?!0:A[0]=="FALSE"?!1:A[0]}function parse_ArrayParsedFormula(n,_,x){var E=n.l+_,S=x.biff==2?1:2,C,T=n.read_shift(S);if(T==65535)return[[],parsenoop(n,_-2)];var A=parse_Rgce(n,T,x);return _!==T+S&&(C=parse_RgbExtra(n,_-T-S,A,x)),n.l=E,[A,C]}function parse_XLSCellParsedFormula(n,_,x){var E=n.l+_,S=x.biff==2?1:2,C,T=n.read_shift(S);if(T==65535)return[[],parsenoop(n,_-2)];var A=parse_Rgce(n,T,x);return _!==T+S&&(C=parse_RgbExtra(n,_-T-S,A,x)),n.l=E,[A,C]}function parse_NameParsedFormula(n,_,x,E){var S=n.l+_,C=parse_Rgce(n,E,x),T;return S!==n.l&&(T=parse_RgbExtra(n,S-n.l,C,x)),[C,T]}function parse_SharedParsedFormula(n,_,x){var E=n.l+_,S,C=n.read_shift(2),T=parse_Rgce(n,C,x);return C==65535?[[],parsenoop(n,_-2)]:(_!==C+2&&(S=parse_RgbExtra(n,E-C-2,T,x)),[T,S])}function parse_FormulaValue(n){var _;if(__readUInt16LE(n,n.l+6)!==65535)return[parse_Xnum(n),"n"];switch(n[n.l]){case 0:return n.l+=8,["String","s"];case 1:return _=n[n.l+2]===1,n.l+=8,[_,"b"];case 2:return _=n[n.l+2],n.l+=8,[_,"e"];case 3:return n.l+=8,["","s"]}return[]}function write_FormulaValue(n){if(n==null){var _=new_buf(8);return _.write_shift(1,3),_.write_shift(1,0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(2,65535),_}else if(typeof n=="number")return write_Xnum(n);return write_Xnum(0)}function parse_Formula(n,_,x){var E=n.l+_,S=parse_XLSCell(n);x.biff==2&&++n.l;var C=parse_FormulaValue(n),T=n.read_shift(1);x.biff!=2&&(n.read_shift(1),x.biff>=5&&n.read_shift(4));var A=parse_XLSCellParsedFormula(n,E-n.l,x);return{cell:S,val:C[0],formula:A,shared:T>>3&1,tt:C[1]}}function write_Formula(n,_,x,E,S){var C=write_XLSCell(_,x,S),T=write_FormulaValue(n.v),A=new_buf(6),B=33;A.write_shift(2,B),A.write_shift(4,0);for(var I=new_buf(n.bf.length),M=0;M<n.bf.length;++M)I[M]=n.bf[M];var O=bconcat([C,T,A,I]);return O}function parse_XLSBParsedFormula(n,_,x){var E=n.read_shift(4),S=parse_Rgce(n,E,x),C=n.read_shift(4),T=C>0?parse_RgbExtra(n,C,S,x):null;return[S,T]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(n){if((n|0)==n&&n<Math.pow(2,16)&&n>=0){var _=new_buf(11);return _.write_shift(4,3),_.write_shift(1,30),_.write_shift(2,n),_.write_shift(4,0),_}var x=new_buf(17);return x.write_shift(4,11),x.write_shift(1,31),x.write_shift(8,n),x.write_shift(4,0),x}function write_XLSBFormulaErr(n){var _=new_buf(10);return _.write_shift(4,2),_.write_shift(1,28),_.write_shift(1,n),_.write_shift(4,0),_}function write_XLSBFormulaBool(n){var _=new_buf(10);return _.write_shift(4,2),_.write_shift(1,29),_.write_shift(1,n?1:0),_.write_shift(4,0),_}function write_XLSBFormulaStr(n){var _=new_buf(7);_.write_shift(4,3+2*n.length),_.write_shift(1,23),_.write_shift(2,n.length);var x=new_buf(2*n.length);x.write_shift(2*n.length,n,"utf16le");var E=new_buf(4);return E.write_shift(4,0),bconcat([_,x,E])}function write_XLSBFormulaRef(n){var _=decode_cell(n),x=new_buf(15);return x.write_shift(4,7),x.write_shift(1,36),x.write_shift(4,_.r),x.write_shift(2,_.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),x.write_shift(4,0),x}function write_XLSBFormulaRef3D(n,_){var x=n.lastIndexOf("!"),E=n.slice(0,x);n=n.slice(x+1);var S=decode_cell(n);E.charAt(0)=="'"&&(E=E.slice(1,-1).replace(/''/g,"'"));var C=new_buf(17);return C.write_shift(4,9),C.write_shift(1,58),C.write_shift(2,2+_.SheetNames.map(function(T){return T.toLowerCase()}).indexOf(E.toLowerCase())),C.write_shift(4,S.r),C.write_shift(2,S.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),C.write_shift(4,0),C}function write_XLSBFormulaRefErr3D(n,_){var x=n.lastIndexOf("!"),E=n.slice(0,x);n=n.slice(x+1),E.charAt(0)=="'"&&(E=E.slice(1,-1).replace(/''/g,"'"));var S=new_buf(17);return S.write_shift(4,9),S.write_shift(1,60),S.write_shift(2,2+_.SheetNames.map(function(C){return C.toLowerCase()}).indexOf(E.toLowerCase())),S.write_shift(4,0),S.write_shift(2,0),S.write_shift(4,0),S}function write_XLSBFormulaRange(n){var _=n.split(":"),x=_[0],E=new_buf(23);E.write_shift(4,15),x=_[0];var S=decode_cell(x);return E.write_shift(1,36),E.write_shift(4,S.r),E.write_shift(2,S.c|(x.charAt(0)=="$"?0:1)<<14|(x.match(/\$\d/)?0:1)<<15),E.write_shift(4,0),x=_[1],S=decode_cell(x),E.write_shift(1,36),E.write_shift(4,S.r),E.write_shift(2,S.c|(x.charAt(0)=="$"?0:1)<<14|(x.match(/\$\d/)?0:1)<<15),E.write_shift(4,0),E.write_shift(1,17),E.write_shift(4,0),E}function write_XLSBFormulaRangeWS(n,_){var x=n.lastIndexOf("!"),E=n.slice(0,x);n=n.slice(x+1),E.charAt(0)=="'"&&(E=E.slice(1,-1).replace(/''/g,"'"));var S=n.split(":");T=S[0];var C=new_buf(27);C.write_shift(4,19);var T=S[0],A=decode_cell(T);return C.write_shift(1,58),C.write_shift(2,2+_.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(E.toLowerCase())),C.write_shift(4,A.r),C.write_shift(2,A.c|(T.charAt(0)=="$"?0:1)<<14|(T.match(/\$\d/)?0:1)<<15),T=S[1],A=decode_cell(T),C.write_shift(1,58),C.write_shift(2,2+_.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(E.toLowerCase())),C.write_shift(4,A.r),C.write_shift(2,A.c|(T.charAt(0)=="$"?0:1)<<14|(T.match(/\$\d/)?0:1)<<15),C.write_shift(1,17),C.write_shift(4,0),C}function write_XLSBFormulaArea3D(n,_){var x=n.lastIndexOf("!"),E=n.slice(0,x);n=n.slice(x+1),E.charAt(0)=="'"&&(E=E.slice(1,-1).replace(/''/g,"'"));var S=decode_range(n),C=new_buf(23);return C.write_shift(4,15),C.write_shift(1,59),C.write_shift(2,2+_.SheetNames.map(function(T){return T.toLowerCase()}).indexOf(E.toLowerCase())),C.write_shift(4,S.s.r),C.write_shift(4,S.e.r),C.write_shift(2,S.s.c),C.write_shift(2,S.e.c),C.write_shift(4,0),C}function write_XLSBFormula(n,_){if(typeof n=="number")return write_XLSBFormulaNum(n);if(typeof n=="boolean")return write_XLSBFormulaBool(n);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(n))return write_XLSBFormulaErr(+RBErr[n]);if(n.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(n);if(n.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(n);if(n.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(n,_);if(n.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(n,_);if(n.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(n,_);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(n))return write_XLSBFormulaRefErr3D(n,_);if(/^".*"$/.test(n))return write_XLSBFormulaStr(n);if(/^[+-]\d+$/.test(n))return write_XLSBFormulaNum(parseInt(n,10));throw"Formula |"+n+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(n){return n.slice(0,3)=="of:"&&(n=n.slice(3)),n.charCodeAt(0)==61&&(n=n.slice(1),n.charCodeAt(0)==61&&(n=n.slice(1))),n=n.replace(/COM\.MICROSOFT\./g,""),n=n.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(_,x){return x.replace(/\./g,"")}),n=n.replace(/\$'([^']|'')+'/g,function(_){return _.slice(1)}),n=n.replace(/\$([^\]\. #$]+)/g,function(_,x){return x.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?_:x}),n=n.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),n.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(n){var _="of:="+n.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return _.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(n){n=n.replace(/\$'([^']|'')+'/g,function(E){return E.slice(1)}),n=n.replace(/\$([^\]\. #$]+)/g,function(E,S){return S.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?E:S});var _=n.split(":"),x=_[0].split(".")[0];return[x,_[0].split(".")[1]+(_.length>1?":"+(_[1].split(".")[1]||_[1].split(".")[0]):"")]}function csf_to_ods_3D(n){return n.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(n,_,x){var E=0,S=n.length;if(x){if(browser_has_Map?x.has(_):Object.prototype.hasOwnProperty.call(x,_)){for(var C=browser_has_Map?x.get(_):x[_];E<C.length;++E)if(n[C[E]].t===_)return n.Count++,C[E]}}else for(;E<S;++E)if(n[E].t===_)return n.Count++,E;return n[S]={t:_},n.Count++,n.Unique++,x&&(browser_has_Map?(x.has(_)||x.set(_,[]),x.get(_).push(S)):(Object.prototype.hasOwnProperty.call(x,_)||(x[_]=[]),x[_].push(S))),S}function col_obj_w(n,_){var x={min:n+1,max:n+1},E=-1;return _.MDW&&(MDW=_.MDW),_.width!=null?x.customWidth=1:_.wpx!=null?E=px2char(_.wpx):_.wch!=null&&(E=_.wch),E>-1?(x.width=char2width(E),x.customWidth=1):_.width!=null&&(x.width=_.width),_.hidden&&(x.hidden=!0),_.level!=null&&(x.outlineLevel=x.level=_.level),x}function default_margins(n,_){if(n){var x=[.7,.7,.75,.75,.3,.3];_=="xlml"&&(x=[1,1,1,1,.5,.5]),n.left==null&&(n.left=x[0]),n.right==null&&(n.right=x[1]),n.top==null&&(n.top=x[2]),n.bottom==null&&(n.bottom=x[3]),n.header==null&&(n.header=x[4]),n.footer==null&&(n.footer=x[5])}}function get_cell_style(n,_,x){var E=x.revssf[_.z!=null?_.z:"General"],S=60,C=n.length;if(E==null&&x.ssf){for(;S<392;++S)if(x.ssf[S]==null){SSF__load(_.z,S),x.ssf[S]=_.z,x.revssf[_.z]=E=S;break}}for(S=0;S!=C;++S)if(n[S].numFmtId===E)return S;return n[C]={numFmtId:E,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},C}function safe_format(n,_,x,E,S,C){try{E.cellNF&&(n.z=table_fmt[_])}catch(A){if(E.WTF)throw A}if(!(n.t==="z"&&!E.cellStyles)){if(n.t==="d"&&typeof n.v=="string"&&(n.v=parseDate(n.v)),(!E||E.cellText!==!1)&&n.t!=="z")try{if(table_fmt[_]==null&&SSF__load(SSFImplicit[_]||"General",_),n.t==="e")n.w=n.w||BErr[n.v];else if(_===0)if(n.t==="n")(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v);else if(n.t==="d"){var T=datenum(n.v);(T|0)===T?n.w=T.toString(10):n.w=SSF_general_num(T)}else{if(n.v===void 0)return"";n.w=SSF_general(n.v,_ssfopts)}else n.t==="d"?n.w=SSF_format(_,datenum(n.v),_ssfopts):n.w=SSF_format(_,n.v,_ssfopts)}catch(A){if(E.WTF)throw A}if(E.cellStyles&&x!=null)try{n.s=C.Fills[x],n.s.fgColor&&n.s.fgColor.theme&&!n.s.fgColor.rgb&&(n.s.fgColor.rgb=rgb_tint(S.themeElements.clrScheme[n.s.fgColor.theme].rgb,n.s.fgColor.tint||0),E.WTF&&(n.s.fgColor.raw_rgb=S.themeElements.clrScheme[n.s.fgColor.theme].rgb)),n.s.bgColor&&n.s.bgColor.theme&&(n.s.bgColor.rgb=rgb_tint(S.themeElements.clrScheme[n.s.bgColor.theme].rgb,n.s.bgColor.tint||0),E.WTF&&(n.s.bgColor.raw_rgb=S.themeElements.clrScheme[n.s.bgColor.theme].rgb))}catch(A){if(E.WTF&&C.Fills)throw A}}}function check_ws(n,_,x){if(n&&n["!ref"]){var E=safe_decode_range(n["!ref"]);if(E.e.c<E.s.c||E.e.r<E.s.r)throw new Error("Bad range ("+x+"): "+n["!ref"])}}function parse_ws_xml_dim(n,_){var x=safe_decode_range(_);x.s.r<=x.e.r&&x.s.c<=x.e.c&&x.s.r>=0&&x.s.c>=0&&(n["!ref"]=encode_range(x))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(n,_,x,E,S,C,T){if(!n)return n;E||(E={"!id":{}});var A={};_.dense&&(A["!data"]=[]);var B={s:{r:2e6,c:2e6},e:{r:0,c:0}},I="",M="",O=n.match(sheetdataregex);O?(I=n.slice(0,O.index),M=n.slice(O.index+O[0].length)):I=M=n;var D=I.match(sheetprregex);D?parse_ws_xml_sheetpr(D[0],A,S,x):(D=I.match(sheetprregex2))&&parse_ws_xml_sheetpr2(D[0],D[1]||"",A,S,x);var L=(I.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(L>0){var V=I.slice(L,L+50).match(dimregex);V&&!(_&&_.nodim)&&parse_ws_xml_dim(A,V[1])}var U=I.match(svsregex);U&&U[1]&&parse_ws_xml_sheetviews(U[1],S);var q=[];if(_.cellStyles){var H=I.match(colregex);H&&parse_ws_xml_cols(q,H)}O&&parse_ws_xml_data(O[1],A,_,B,C,T);var W=M.match(afregex);W&&(A["!autofilter"]=parse_ws_xml_autofilter(W[0]));var Q=[],re=M.match(mergecregex);if(re)for(L=0;L!=re.length;++L)Q[L]=safe_decode_range(re[L].slice(re[L].indexOf('"')+1));var ce=M.match(hlinkregex);ce&&parse_ws_xml_hlinks(A,ce,E);var ne=M.match(marginregex);if(ne&&(A["!margins"]=parse_ws_xml_margins(parsexmltag(ne[0]))),_&&_.nodim&&(B.s.c=B.s.r=0),!A["!ref"]&&B.e.c>=B.s.c&&B.e.r>=B.s.r&&(A["!ref"]=encode_range(B)),_.sheetRows>0&&A["!ref"]){var Y=safe_decode_range(A["!ref"]);_.sheetRows<=+Y.e.r&&(Y.e.r=_.sheetRows-1,Y.e.r>B.e.r&&(Y.e.r=B.e.r),Y.e.r<Y.s.r&&(Y.s.r=Y.e.r),Y.e.c>B.e.c&&(Y.e.c=B.e.c),Y.e.c<Y.s.c&&(Y.s.c=Y.e.c),A["!fullref"]=A["!ref"],A["!ref"]=encode_range(Y))}return q.length>0&&(A["!cols"]=q),Q.length>0&&(A["!merges"]=Q),A}function write_ws_xml_merges(n){if(n.length===0)return"";for(var _='<mergeCells count="'+n.length+'">',x=0;x!=n.length;++x)_+='<mergeCell ref="'+encode_range(n[x])+'"/>';return _+"</mergeCells>"}function parse_ws_xml_sheetpr(n,_,x,E){var S=parsexmltag(n);x.Sheets[E]||(x.Sheets[E]={}),S.codeName&&(x.Sheets[E].CodeName=unescapexml(utf8read(S.codeName)))}function parse_ws_xml_sheetpr2(n,_,x,E,S){parse_ws_xml_sheetpr(n.slice(0,n.indexOf(">")),x,E,S)}function write_ws_xml_sheetpr(n,_,x,E,S){var C=!1,T={},A=null;if(E.bookType!=="xlsx"&&_.vbaraw){var B=_.SheetNames[x];try{_.Workbook&&(B=_.Workbook.Sheets[x].CodeName||B)}catch{}C=!0,T.codeName=utf8write(escapexml(B))}if(n&&n["!outline"]){var I={summaryBelow:1,summaryRight:1};n["!outline"].above&&(I.summaryBelow=0),n["!outline"].left&&(I.summaryRight=0),A=(A||"")+writextag("outlinePr",null,I)}!C&&!A||(S[S.length]=writextag("sheetPr",A,T))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(n){var _={sheet:1};return sheetprot_deffalse.forEach(function(x){n[x]!=null&&n[x]&&(_[x]="1")}),sheetprot_deftrue.forEach(function(x){n[x]!=null&&!n[x]&&(_[x]="0")}),n.password&&(_.password=crypto_CreatePasswordVerifier_Method1(n.password).toString(16).toUpperCase()),writextag("sheetProtection",null,_)}function parse_ws_xml_hlinks(n,_,x){for(var E=n["!data"]!=null,S=0;S!=_.length;++S){var C=parsexmltag(utf8read(_[S]),!0);if(!C.ref)return;var T=((x||{})["!id"]||[])[C.id];T?(C.Target=T.Target,C.location&&(C.Target+="#"+unescapexml(C.location))):(C.Target="#"+unescapexml(C.location),T={Target:C.Target,TargetMode:"Internal"}),C.Rel=T,C.tooltip&&(C.Tooltip=C.tooltip,delete C.tooltip);for(var A=safe_decode_range(C.ref),B=A.s.r;B<=A.e.r;++B)for(var I=A.s.c;I<=A.e.c;++I){var M=encode_col(I)+encode_row(B);E?(n["!data"][B]||(n["!data"][B]=[]),n["!data"][B][I]||(n["!data"][B][I]={t:"z",v:void 0}),n["!data"][B][I].l=C):(n[M]||(n[M]={t:"z",v:void 0}),n[M].l=C)}}}function parse_ws_xml_margins(n){var _={};return["left","right","top","bottom","header","footer"].forEach(function(x){n[x]&&(_[x]=parseFloat(n[x]))}),_}function write_ws_xml_margins(n){return default_margins(n),writextag("pageMargins",null,n)}function parse_ws_xml_cols(n,_){for(var x=!1,E=0;E!=_.length;++E){var S=parsexmltag(_[E],!0);S.hidden&&(S.hidden=parsexmlbool(S.hidden));var C=parseInt(S.min,10)-1,T=parseInt(S.max,10)-1;for(S.outlineLevel&&(S.level=+S.outlineLevel||0),delete S.min,delete S.max,S.width=+S.width,!x&&S.width&&(x=!0,find_mdw_colw(S.width)),process_col(S);C<=T;)n[C++]=dup(S)}}function write_ws_xml_cols(n,_){for(var x=["<cols>"],E,S=0;S!=_.length;++S)(E=_[S])&&(x[x.length]=writextag("col",null,col_obj_w(S,E)));return x[x.length]="</cols>",x.join("")}function parse_ws_xml_autofilter(n){var _={ref:(n.match(/ref="([^"]*)"/)||[])[1]};return _}function write_ws_xml_autofilter(n,_,x,E){var S=typeof n.ref=="string"?n.ref:encode_range(n.ref);x.Workbook||(x.Workbook={Sheets:[]}),x.Workbook.Names||(x.Workbook.Names=[]);var C=x.Workbook.Names,T=decode_range(S);T.s.r==T.e.r&&(T.e.r=decode_range(_["!ref"]).e.r,S=encode_range(T));for(var A=0;A<C.length;++A){var B=C[A];if(B.Name=="_xlnm._FilterDatabase"&&B.Sheet==E){B.Ref=formula_quote_sheet_name(x.SheetNames[E])+"!"+fix_range(S);break}}return A==C.length&&C.push({Name:"_xlnm._FilterDatabase",Sheet:E,Ref:"'"+x.SheetNames[E]+"'!"+S}),writextag("autoFilter",null,{ref:S})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(n,_){_.Views||(_.Views=[{}]),(n.match(sviewregex)||[]).forEach(function(x,E){var S=parsexmltag(x);_.Views[E]||(_.Views[E]={}),+S.zoomScale&&(_.Views[E].zoom=+S.zoomScale),S.rightToLeft&&parsexmlbool(S.rightToLeft)&&(_.Views[E].RTL=!0)})}function write_ws_xml_sheetviews(n,_,x,E){var S={workbookViewId:"0"};return(((E||{}).Workbook||{}).Views||[])[0]&&(S.rightToLeft=E.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,S),{})}function write_ws_xml_cell(n,_,x,E){if(n.c&&x["!comments"].push([_,n.c]),(n.v===void 0||n.t==="z"&&!(E||{}).sheetStubs)&&typeof n.f!="string"&&typeof n.z>"u")return"";var S="",C=n.t,T=n.v;if(n.t!=="z")switch(n.t){case"b":S=n.v?"1":"0";break;case"n":S=""+n.v;break;case"e":S=BErr[n.v];break;case"d":E&&E.cellDates?S=parseDate(n.v,-1).toISOString():(n=dup(n),n.t="n",S=""+(n.v=datenum(parseDate(n.v)))),typeof n.z>"u"&&(n.z=table_fmt[14]);break;default:S=n.v;break}var A=n.t=="z"||n.v==null?"":writetag("v",escapexml(S)),B={r:_},I=get_cell_style(E.cellXfs,n,E);switch(I!==0&&(B.s=I),n.t){case"n":break;case"d":B.t="d";break;case"b":B.t="b";break;case"e":B.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(E&&E.bookSST){A=writetag("v",""+get_sst_id(E.Strings,n.v,E.revStrings)),B.t="s";break}else B.t="str";break}if(n.t!=C&&(n.t=C,n.v=T),typeof n.f=="string"&&n.f){var M=n.F&&n.F.slice(0,_.length)==_?{t:"array",ref:n.F}:null;A=writextag("f",escapexml(n.f),M)+(n.v!=null?A:"")}return n.l&&(n.l.display=escapexml(S),x["!links"].push([_,n.l])),n.D&&(B.cm=1),writextag("c",A,B)}var parse_ws_xml_data=function(){var n=/<(?:\w+:)?c[ \/>]/,_=/<\/(?:\w+:)?row>/,x=/r=["']([^"']*)["']/,E=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,S=/ref=["']([^"']*)["']/,C=matchtag("v"),T=matchtag("f");return function(B,I,M,O,D,L){for(var V=0,U="",q=[],H=[],W=0,Q=0,re=0,ce="",ne,Y,fe=0,ge=0,$e,_e,ae=0,X=0,F=Array.isArray(L.CellXf),z,J=[],te=[],se=I["!data"]!=null,oe=[],ie={},G=!1,j=!!M.sheetStubs,ee=B.split(_),pe=0,he=ee.length;pe!=he;++pe){U=ee[pe].trim();var Se=U.length;if(Se!==0){var we=0;e:for(V=0;V<Se;++V)switch(U[V]){case">":if(U[V-1]!="/"){++V;break e}if(M&&M.cellStyles){if(Y=parsexmltag(U.slice(we,V),!0),fe=Y.r!=null?parseInt(Y.r,10):fe+1,ge=-1,M.sheetRows&&M.sheetRows<fe)continue;ie={},G=!1,Y.ht&&(G=!0,ie.hpt=parseFloat(Y.ht),ie.hpx=pt2px(ie.hpt)),Y.hidden&&parsexmlbool(Y.hidden)&&(G=!0,ie.hidden=!0),Y.outlineLevel!=null&&(G=!0,ie.level=+Y.outlineLevel),G&&(oe[fe-1]=ie)}break;case"<":we=V;break}if(we>=V)break;if(Y=parsexmltag(U.slice(we,V),!0),fe=Y.r!=null?parseInt(Y.r,10):fe+1,ge=-1,!(M.sheetRows&&M.sheetRows<fe)){M.nodim||(O.s.r>fe-1&&(O.s.r=fe-1),O.e.r<fe-1&&(O.e.r=fe-1)),M&&M.cellStyles&&(ie={},G=!1,Y.ht&&(G=!0,ie.hpt=parseFloat(Y.ht),ie.hpx=pt2px(ie.hpt)),Y.hidden&&parsexmlbool(Y.hidden)&&(G=!0,ie.hidden=!0),Y.outlineLevel!=null&&(G=!0,ie.level=+Y.outlineLevel),G&&(oe[fe-1]=ie)),q=U.slice(V).split(n);for(var xe=0;xe!=q.length&&q[xe].trim().charAt(0)=="<";++xe);for(q=q.slice(xe),V=0;V!=q.length;++V)if(U=q[V].trim(),U.length!==0){if(H=U.match(x),W=V,Q=0,re=0,U="<c "+(U.slice(0,1)=="<"?">":"")+U,H!=null&&H.length===2){for(W=0,ce=H[1],Q=0;Q!=ce.length&&!((re=ce.charCodeAt(Q)-64)<1||re>26);++Q)W=26*W+re;--W,ge=W}else++ge;for(Q=0;Q!=U.length&&U.charCodeAt(Q)!==62;++Q);if(++Q,Y=parsexmltag(U.slice(0,Q),!0),Y.r||(Y.r=encode_cell({r:fe-1,c:ge})),ce=U.slice(Q),ne={t:""},(H=ce.match(C))!=null&&H[1]!==""&&(ne.v=unescapexml(H[1])),M.cellFormula){if((H=ce.match(T))!=null&&H[1]!==""){if(ne.f=unescapexml(utf8read(H[1]),!0),M.xlfn||(ne.f=_xlfn(ne.f)),H[0].indexOf('t="array"')>-1)ne.F=(ce.match(S)||[])[1],ne.F.indexOf(":")>-1&&J.push([safe_decode_range(ne.F),ne.F]);else if(H[0].indexOf('t="shared"')>-1){_e=parsexmltag(H[0]);var Ee=unescapexml(utf8read(H[1]));M.xlfn||(Ee=_xlfn(Ee)),te[parseInt(_e.si,10)]=[_e,Ee,Y.r]}}else(H=ce.match(/<f[^>]*\/>/))&&(_e=parsexmltag(H[0]),te[_e.si]&&(ne.f=shift_formula_xlsx(te[_e.si][1],te[_e.si][2],Y.r)));var ye=decode_cell(Y.r);for(Q=0;Q<J.length;++Q)ye.r>=J[Q][0].s.r&&ye.r<=J[Q][0].e.r&&ye.c>=J[Q][0].s.c&&ye.c<=J[Q][0].e.c&&(ne.F=J[Q][1])}if(Y.t==null&&ne.v===void 0)if(ne.f||ne.F)ne.v=0,ne.t="n";else if(j)ne.t="z";else continue;else ne.t=Y.t||"n";switch(O.s.c>ge&&(O.s.c=ge),O.e.c<ge&&(O.e.c=ge),ne.t){case"n":if(ne.v==""||ne.v==null){if(!j)continue;ne.t="z"}else ne.v=parseFloat(ne.v);break;case"s":if(typeof ne.v>"u"){if(!j)continue;ne.t="z"}else $e=strs[parseInt(ne.v,10)],ne.v=$e.t,ne.r=$e.r,M.cellHTML&&(ne.h=$e.h);break;case"str":ne.t="s",ne.v=ne.v!=null?unescapexml(utf8read(ne.v),!0):"",M.cellHTML&&(ne.h=escapehtml(ne.v));break;case"inlineStr":H=ce.match(E),ne.t="s",H!=null&&($e=parse_si(H[1]))?(ne.v=$e.t,M.cellHTML&&(ne.h=$e.h)):ne.v="";break;case"b":ne.v=parsexmlbool(ne.v);break;case"d":M.cellDates?ne.v=parseDate(ne.v,1):(ne.v=datenum(parseDate(ne.v,1)),ne.t="n");break;case"e":(!M||M.cellText!==!1)&&(ne.w=ne.v),ne.v=RBErr[ne.v];break}if(ae=X=0,z=null,F&&Y.s!==void 0&&(z=L.CellXf[Y.s],z!=null&&(z.numFmtId!=null&&(ae=z.numFmtId),M.cellStyles&&z.fillId!=null&&(X=z.fillId))),safe_format(ne,ae,X,M,D,L),M.cellDates&&F&&ne.t=="n"&&fmt_is_date(table_fmt[ae])&&(ne.t="d",ne.v=numdate(ne.v)),Y.cm&&M.xlmeta){var Ce=(M.xlmeta.Cell||[])[+Y.cm-1];Ce&&Ce.type=="XLDAPR"&&(ne.D=!0)}var ve;M.nodim&&(ve=decode_cell(Y.r),O.s.r>ve.r&&(O.s.r=ve.r),O.e.r<ve.r&&(O.e.r=ve.r)),se?(ve=decode_cell(Y.r),I["!data"][ve.r]||(I["!data"][ve.r]=[]),I["!data"][ve.r][ve.c]=ne):I[Y.r]=ne}}}}oe.length>0&&(I["!rows"]=oe)}}();function write_ws_xml_data(n,_,x,E){var S=[],C=[],T=safe_decode_range(n["!ref"]),A="",B,I="",M=[],O=0,D=0,L=n["!rows"],V=n["!data"]!=null,U={r:I},q,H=-1;for(D=T.s.c;D<=T.e.c;++D)M[D]=encode_col(D);for(O=T.s.r;O<=T.e.r;++O){for(C=[],I=encode_row(O),D=T.s.c;D<=T.e.c;++D){B=M[D]+I;var W=V?(n["!data"][O]||[])[D]:n[B];W!==void 0&&(A=write_ws_xml_cell(W,B,n,_))!=null&&C.push(A)}(C.length>0||L&&L[O])&&(U={r:I},L&&L[O]&&(q=L[O],q.hidden&&(U.hidden=1),H=-1,q.hpx?H=px2pt(q.hpx):q.hpt&&(H=q.hpt),H>-1&&(U.ht=H,U.customHeight=1),q.level&&(U.outlineLevel=q.level)),S[S.length]=writextag("row",C.join(""),U))}if(L)for(;O<L.length;++O)L&&L[O]&&(U={r:O+1},q=L[O],q.hidden&&(U.hidden=1),H=-1,q.hpx?H=px2pt(q.hpx):q.hpt&&(H=q.hpt),H>-1&&(U.ht=H,U.customHeight=1),q.level&&(U.outlineLevel=q.level),S[S.length]=writextag("row","",U));return S.join("")}function write_ws_xml(n,_,x,E){var S=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],C=x.SheetNames[n],T=0,A="",B=x.Sheets[C];B==null&&(B={});var I=B["!ref"]||"A1",M=safe_decode_range(I);if(M.e.c>16383||M.e.r>1048575){if(_.WTF)throw new Error("Range "+I+" exceeds format limit A1:XFD1048576");M.e.c=Math.min(M.e.c,16383),M.e.r=Math.min(M.e.c,1048575),I=encode_range(M)}E||(E={}),B["!comments"]=[];var O=[];write_ws_xml_sheetpr(B,x,n,_,S),S[S.length]=writextag("dimension",null,{ref:I}),S[S.length]=write_ws_xml_sheetviews(B,_,n,x),_.sheetFormat&&(S[S.length]=writextag("sheetFormatPr",null,{defaultRowHeight:_.sheetFormat.defaultRowHeight||"16",baseColWidth:_.sheetFormat.baseColWidth||"10",outlineLevelRow:_.sheetFormat.outlineLevelRow||"7"})),B["!cols"]!=null&&B["!cols"].length>0&&(S[S.length]=write_ws_xml_cols(B,B["!cols"])),S[T=S.length]="<sheetData/>",B["!links"]=[],B["!ref"]!=null&&(A=write_ws_xml_data(B,_),A.length>0&&(S[S.length]=A)),S.length>T+1&&(S[S.length]="</sheetData>",S[T]=S[T].replace("/>",">")),B["!protect"]&&(S[S.length]=write_ws_xml_protection(B["!protect"])),B["!autofilter"]!=null&&(S[S.length]=write_ws_xml_autofilter(B["!autofilter"],B,x,n)),B["!merges"]!=null&&B["!merges"].length>0&&(S[S.length]=write_ws_xml_merges(B["!merges"]));var D=-1,L,V=-1;return B["!links"].length>0&&(S[S.length]="<hyperlinks>",B["!links"].forEach(function(U){U[1].Target&&(L={ref:U[0]},U[1].Target.charAt(0)!="#"&&(V=add_rels(E,-1,escapexml(U[1].Target).replace(/#.*$/,""),RELS.HLINK),L["r:id"]="rId"+V),(D=U[1].Target.indexOf("#"))>-1&&(L.location=escapexml(U[1].Target.slice(D+1))),U[1].Tooltip&&(L.tooltip=escapexml(U[1].Tooltip)),L.display=U[1].display,S[S.length]=writextag("hyperlink",null,L))}),S[S.length]="</hyperlinks>"),delete B["!links"],B["!margins"]!=null&&(S[S.length]=write_ws_xml_margins(B["!margins"])),(!_||_.ignoreEC||_.ignoreEC==null)&&(S[S.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:I}))),O.length>0&&(V=add_rels(E,-1,"../drawings/drawing"+(n+1)+".xml",RELS.DRAW),S[S.length]=writextag("drawing",null,{"r:id":"rId"+V}),B["!drawing"]=O),B["!comments"].length>0&&(V=add_rels(E,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RELS.VML),S[S.length]=writextag("legacyDrawing",null,{"r:id":"rId"+V}),B["!legacy"]=V),S.length>1&&(S[S.length]="</worksheet>",S[1]=S[1].replace("/>",">")),S.join("")}function parse_BrtRowHdr(n,_){var x={},E=n.l+_;x.r=n.read_shift(4),n.l+=4;var S=n.read_shift(2);n.l+=1;var C=n.read_shift(1);return n.l=E,C&7&&(x.level=C&7),C&16&&(x.hidden=!0),C&32&&(x.hpt=S/20),x}function write_BrtRowHdr(n,_,x){var E=new_buf(145),S=(x["!rows"]||[])[n]||{};E.write_shift(4,n),E.write_shift(4,0);var C=320;S.hpx?C=px2pt(S.hpx)*20:S.hpt&&(C=S.hpt*20),E.write_shift(2,C),E.write_shift(1,0);var T=0;S.level&&(T|=S.level),S.hidden&&(T|=16),(S.hpx||S.hpt)&&(T|=32),E.write_shift(1,T),E.write_shift(1,0);var A=0,B=E.l;E.l+=4;for(var I={r:n,c:0},M=x["!data"]!=null,O=0;O<16;++O)if(!(_.s.c>O+1<<10||_.e.c<O<<10)){for(var D=-1,L=-1,V=O<<10;V<O+1<<10;++V){I.c=V;var U=M?(x["!data"][I.r]||[])[I.c]:x[encode_cell(I)];U&&(D<0&&(D=V),L=V)}D<0||(++A,E.write_shift(4,D),E.write_shift(4,L))}var q=E.l;return E.l=B,E.write_shift(4,A),E.l=q,E.length>E.l?E.slice(0,E.l):E}function write_row_header(n,_,x,E){var S=write_BrtRowHdr(E,x,_);(S.length>17||(_["!rows"]||[])[E])&&write_record(n,0,S)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(n,_){var x={},E=n[n.l];return++n.l,x.above=!(E&64),x.left=!(E&128),n.l+=18,x.name=parse_XLSBCodeName(n),x}function write_BrtWsProp(n,_,x){x==null&&(x=new_buf(84+4*n.length));var E=192;_&&(_.above&&(E&=-65),_.left&&(E&=-129)),x.write_shift(1,E);for(var S=1;S<3;++S)x.write_shift(1,0);return write_BrtColor({auto:1},x),x.write_shift(-4,-1),x.write_shift(-4,-1),write_XLSBCodeName(n,x),x.slice(0,x.l)}function parse_BrtCellBlank(n){var _=parse_XLSBCell(n);return[_]}function write_BrtCellBlank(n,_,x){return x==null&&(x=new_buf(8)),write_XLSBCell(_,x)}function parse_BrtShortBlank(n){var _=parse_XLSBShortCell(n);return[_]}function write_BrtShortBlank(n,_,x){return x==null&&(x=new_buf(4)),write_XLSBShortCell(_,x)}function parse_BrtCellBool(n){var _=parse_XLSBCell(n),x=n.read_shift(1);return[_,x,"b"]}function write_BrtCellBool(n,_,x){return x==null&&(x=new_buf(9)),write_XLSBCell(_,x),x.write_shift(1,n.v?1:0),x}function parse_BrtShortBool(n){var _=parse_XLSBShortCell(n),x=n.read_shift(1);return[_,x,"b"]}function write_BrtShortBool(n,_,x){return x==null&&(x=new_buf(5)),write_XLSBShortCell(_,x),x.write_shift(1,n.v?1:0),x}function parse_BrtCellError(n){var _=parse_XLSBCell(n),x=n.read_shift(1);return[_,x,"e"]}function write_BrtCellError(n,_,x){return x==null&&(x=new_buf(9)),write_XLSBCell(_,x),x.write_shift(1,n.v),x}function parse_BrtShortError(n){var _=parse_XLSBShortCell(n),x=n.read_shift(1);return[_,x,"e"]}function write_BrtShortError(n,_,x){return x==null&&(x=new_buf(8)),write_XLSBShortCell(_,x),x.write_shift(1,n.v),x.write_shift(2,0),x.write_shift(1,0),x}function parse_BrtCellIsst(n){var _=parse_XLSBCell(n),x=n.read_shift(4);return[_,x,"s"]}function write_BrtCellIsst(n,_,x){return x==null&&(x=new_buf(12)),write_XLSBCell(_,x),x.write_shift(4,_.v),x}function parse_BrtShortIsst(n){var _=parse_XLSBShortCell(n),x=n.read_shift(4);return[_,x,"s"]}function write_BrtShortIsst(n,_,x){return x==null&&(x=new_buf(8)),write_XLSBShortCell(_,x),x.write_shift(4,_.v),x}function parse_BrtCellReal(n){var _=parse_XLSBCell(n),x=parse_Xnum(n);return[_,x,"n"]}function write_BrtCellReal(n,_,x){return x==null&&(x=new_buf(16)),write_XLSBCell(_,x),write_Xnum(n.v,x),x}function parse_BrtShortReal(n){var _=parse_XLSBShortCell(n),x=parse_Xnum(n);return[_,x,"n"]}function write_BrtShortReal(n,_,x){return x==null&&(x=new_buf(12)),write_XLSBShortCell(_,x),write_Xnum(n.v,x),x}function parse_BrtCellRk(n){var _=parse_XLSBCell(n),x=parse_RkNumber(n);return[_,x,"n"]}function write_BrtCellRk(n,_,x){return x==null&&(x=new_buf(12)),write_XLSBCell(_,x),write_RkNumber(n.v,x),x}function parse_BrtShortRk(n){var _=parse_XLSBShortCell(n),x=parse_RkNumber(n);return[_,x,"n"]}function write_BrtShortRk(n,_,x){return x==null&&(x=new_buf(8)),write_XLSBShortCell(_,x),write_RkNumber(n.v,x),x}function parse_BrtCellRString(n){var _=parse_XLSBCell(n),x=parse_RichStr(n);return[_,x,"is"]}function parse_BrtCellSt(n){var _=parse_XLSBCell(n),x=parse_XLWideString(n);return[_,x,"str"]}function write_BrtCellSt(n,_,x){var E=n.v==null?"":String(n.v);return x==null&&(x=new_buf(12+4*n.v.length)),write_XLSBCell(_,x),write_XLWideString(E,x),x.length>x.l?x.slice(0,x.l):x}function parse_BrtShortSt(n){var _=parse_XLSBShortCell(n),x=parse_XLWideString(n);return[_,x,"str"]}function write_BrtShortSt(n,_,x){var E=n.v==null?"":String(n.v);return x==null&&(x=new_buf(8+4*E.length)),write_XLSBShortCell(_,x),write_XLWideString(E,x),x.length>x.l?x.slice(0,x.l):x}function parse_BrtFmlaBool(n,_,x){var E=n.l+_,S=parse_XLSBCell(n);S.r=x["!row"];var C=n.read_shift(1),T=[S,C,"b"];if(x.cellFormula){n.l+=2;var A=parse_XLSBCellParsedFormula(n,E-n.l,x);T[3]=stringify_formula(A,null,S,x.supbooks,x)}else n.l=E;return T}function parse_BrtFmlaError(n,_,x){var E=n.l+_,S=parse_XLSBCell(n);S.r=x["!row"];var C=n.read_shift(1),T=[S,C,"e"];if(x.cellFormula){n.l+=2;var A=parse_XLSBCellParsedFormula(n,E-n.l,x);T[3]=stringify_formula(A,null,S,x.supbooks,x)}else n.l=E;return T}function parse_BrtFmlaNum(n,_,x){var E=n.l+_,S=parse_XLSBCell(n);S.r=x["!row"];var C=parse_Xnum(n),T=[S,C,"n"];if(x.cellFormula){n.l+=2;var A=parse_XLSBCellParsedFormula(n,E-n.l,x);T[3]=stringify_formula(A,null,S,x.supbooks,x)}else n.l=E;return T}function parse_BrtFmlaString(n,_,x){var E=n.l+_,S=parse_XLSBCell(n);S.r=x["!row"];var C=parse_XLWideString(n),T=[S,C,"str"];if(x.cellFormula){n.l+=2;var A=parse_XLSBCellParsedFormula(n,E-n.l,x);T[3]=stringify_formula(A,null,S,x.supbooks,x)}else n.l=E;return T}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(n,_){return _==null&&(_=new_buf(4)),_.write_shift(4,n),_}function parse_BrtHLink(n,_){var x=n.l+_,E=parse_UncheckedRfX(n),S=parse_XLNullableWideString(n),C=parse_XLWideString(n),T=parse_XLWideString(n),A=parse_XLWideString(n);n.l=x;var B={rfx:E,relId:S,loc:C,display:A};return T&&(B.Tooltip=T),B}function write_BrtHLink(n,_){var x=new_buf(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(n[0]),e:decode_cell(n[0])},x),write_RelID("rId"+_,x);var E=n[1].Target.indexOf("#"),S=E==-1?"":n[1].Target.slice(E+1);return write_XLWideString(S||"",x),write_XLWideString(n[1].Tooltip||"",x),write_XLWideString("",x),x.slice(0,x.l)}function parse_BrtPane(){}function parse_BrtArrFmla(n,_,x){var E=n.l+_,S=parse_RfX(n),C=n.read_shift(1),T=[S];if(T[2]=C,x.cellFormula){var A=parse_XLSBArrayParsedFormula(n,E-n.l,x);T[1]=A}else n.l=E;return T}function parse_BrtShrFmla(n,_,x){var E=n.l+_,S=parse_UncheckedRfX(n),C=[S];if(x.cellFormula){var T=parse_XLSBSharedParsedFormula(n,E-n.l,x);C[1]=T,n.l=E}else n.l=E;return C}function write_BrtColInfo(n,_,x){x==null&&(x=new_buf(18));var E=col_obj_w(n,_);x.write_shift(-4,n),x.write_shift(-4,n),x.write_shift(4,(E.width||10)*256),x.write_shift(4,0);var S=0;return _.hidden&&(S|=1),typeof E.width=="number"&&(S|=2),_.level&&(S|=_.level<<8),x.write_shift(2,S),x}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(n){var _={};return BrtMarginKeys.forEach(function(x){_[x]=parse_Xnum(n)}),_}function write_BrtMargins(n,_){return _==null&&(_=new_buf(6*8)),default_margins(n),BrtMarginKeys.forEach(function(x){write_Xnum(n[x],_)}),_}function parse_BrtBeginWsView(n){var _=n.read_shift(2);return n.l+=28,{RTL:_&32}}function write_BrtBeginWsView(n,_,x){x==null&&(x=new_buf(30));var E=924;return(((_||{}).Views||[])[0]||{}).RTL&&(E|=32),x.write_shift(2,E),x.write_shift(4,0),x.write_shift(4,0),x.write_shift(4,0),x.write_shift(1,0),x.write_shift(1,0),x.write_shift(2,0),x.write_shift(2,100),x.write_shift(2,0),x.write_shift(2,0),x.write_shift(2,0),x.write_shift(4,0),x}function write_BrtCellIgnoreEC(n){var _=new_buf(24);return _.write_shift(4,4),_.write_shift(4,1),write_UncheckedRfX(n,_),_}function write_BrtSheetProtection(n,_){return _==null&&(_=new_buf(16*4+2)),_.write_shift(2,n.password?crypto_CreatePasswordVerifier_Method1(n.password):0),_.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(x){x[1]?_.write_shift(4,n[x[0]]!=null&&!n[x[0]]?1:0):_.write_shift(4,n[x[0]]!=null&&n[x[0]]?0:1)}),_}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(n,_,x,E,S,C,T){if(!n)return n;var A=_||{};E||(E={"!id":{}});var B={};A.dense&&(B["!data"]=[]);var I,M={s:{r:2e6,c:2e6},e:{r:0,c:0}},O=!1,D=!1,L,V,U,q,H,W,Q,re,ce,ne=[];A.biff=12,A["!row"]=0;var Y=0,fe=!1,ge=[],$e={},_e=A.supbooks||S.supbooks||[[]];if(_e.sharedf=$e,_e.arrayf=ge,_e.SheetNames=S.SheetNames||S.Sheets.map(function(se){return se.name}),!A.supbooks&&(A.supbooks=_e,S.Names))for(var ae=0;ae<S.Names.length;++ae)_e[0][ae+1]=S.Names[ae];var X=[],F=[],z=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var J;if(recordhopper(n,function(oe,ie,G){if(!D)switch(G){case 148:I=oe;break;case 0:L=oe,A.sheetRows&&A.sheetRows<=L.r&&(D=!0),re=encode_row(q=L.r),A["!row"]=L.r,(oe.hidden||oe.hpt||oe.level!=null)&&(oe.hpt&&(oe.hpx=pt2px(oe.hpt)),F[oe.r]=oe);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(V={t:oe[2]},oe[2]){case"n":V.v=oe[1];break;case"s":Q=strs[oe[1]],V.v=Q.t,V.r=Q.r;break;case"b":V.v=!!oe[1];break;case"e":V.v=oe[1],A.cellText!==!1&&(V.w=BErr[V.v]);break;case"str":V.t="s",V.v=oe[1];break;case"is":V.t="s",V.v=oe[1].t;break}if((U=T.CellXf[oe[0].iStyleRef])&&safe_format(V,U.numFmtId,null,A,C,T),H=oe[0].c==-1?H+1:oe[0].c,A.dense?(B["!data"][q]||(B["!data"][q]=[]),B["!data"][q][H]=V):B[encode_col(H)+re]=V,A.cellFormula){for(fe=!1,Y=0;Y<ge.length;++Y){var j=ge[Y];L.r>=j[0].s.r&&L.r<=j[0].e.r&&H>=j[0].s.c&&H<=j[0].e.c&&(V.F=encode_range(j[0]),fe=!0)}!fe&&oe.length>3&&(V.f=oe[3])}if(M.s.r>L.r&&(M.s.r=L.r),M.s.c>H&&(M.s.c=H),M.e.r<L.r&&(M.e.r=L.r),M.e.c<H&&(M.e.c=H),A.cellDates&&U&&V.t=="n"&&fmt_is_date(table_fmt[U.numFmtId])){var ee=SSF_parse_date_code(V.v);ee&&(V.t="d",V.v=new Date(ee.y,ee.m-1,ee.d,ee.H,ee.M,ee.S,ee.u))}J&&(J.type=="XLDAPR"&&(V.D=!0),J=void 0);break;case 1:case 12:if(!A.sheetStubs||O)break;V={t:"z",v:void 0},H=oe[0].c==-1?H+1:oe[0].c,A.dense?(B["!data"][q]||(B["!data"][q]=[]),B["!data"][q][H]=V):B[encode_col(H)+re]=V,M.s.r>L.r&&(M.s.r=L.r),M.s.c>H&&(M.s.c=H),M.e.r<L.r&&(M.e.r=L.r),M.e.c<H&&(M.e.c=H),J&&(J.type=="XLDAPR"&&(V.D=!0),J=void 0);break;case 176:ne.push(oe);break;case 49:J=((A.xlmeta||{}).Cell||[])[oe-1];break;case 494:var pe=E["!id"][oe.relId];for(pe?(oe.Target=pe.Target,oe.loc&&(oe.Target+="#"+oe.loc),oe.Rel=pe):oe.relId==""&&(oe.Target="#"+oe.loc),q=oe.rfx.s.r;q<=oe.rfx.e.r;++q)for(H=oe.rfx.s.c;H<=oe.rfx.e.c;++H)A.dense?(B["!data"][q]||(B["!data"][q]=[]),B["!data"][q][H]||(B["!data"][q][H]={t:"z",v:void 0}),B["!data"][q][H].l=oe):(W=encode_col(H)+encode_row(q),B[W]||(B[W]={t:"z",v:void 0}),B[W].l=oe);break;case 426:if(!A.cellFormula)break;ge.push(oe),ce=A.dense?B["!data"][q][H]:B[encode_col(H)+re],ce.f=stringify_formula(oe[1],M,{r:L.r,c:H},_e,A),ce.F=encode_range(oe[0]);break;case 427:if(!A.cellFormula)break;$e[encode_cell(oe[0].s)]=oe[1],ce=A.dense?B["!data"][q][H]:B[encode_col(H)+re],ce.f=stringify_formula(oe[1],M,{r:L.r,c:H},_e,A);break;case 60:if(!A.cellStyles)break;for(;oe.e>=oe.s;)X[oe.e--]={width:oe.w/256,hidden:!!(oe.flags&1),level:oe.level},z||(z=!0,find_mdw_colw(oe.w/256)),process_col(X[oe.e+1]);break;case 161:B["!autofilter"]={ref:encode_range(oe)};break;case 476:B["!margins"]=oe;break;case 147:S.Sheets[x]||(S.Sheets[x]={}),oe.name&&(S.Sheets[x].CodeName=oe.name),(oe.above||oe.left)&&(B["!outline"]={above:oe.above,left:oe.left});break;case 137:S.Views||(S.Views=[{}]),S.Views[0]||(S.Views[0]={}),oe.RTL&&(S.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:O=!0;break;case 36:O=!1;break;case 37:O=!0;break;case 38:O=!1;break;default:if(!ie.T){if(!O||A.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},A),delete A.supbooks,delete A["!row"],!B["!ref"]&&(M.s.r<2e6||I&&(I.e.r>0||I.e.c>0||I.s.r>0||I.s.c>0))&&(B["!ref"]=encode_range(I||M)),A.sheetRows&&B["!ref"]){var te=safe_decode_range(B["!ref"]);A.sheetRows<=+te.e.r&&(te.e.r=A.sheetRows-1,te.e.r>M.e.r&&(te.e.r=M.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>M.e.c&&(te.e.c=M.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),B["!fullref"]=B["!ref"],B["!ref"]=encode_range(te))}return ne.length>0&&(B["!merges"]=ne),X.length>0&&(B["!cols"]=X),F.length>0&&(B["!rows"]=F),B}function write_ws_bin_cell(n,_,x,E,S,C,T){var A={r:x,c:E};if(_.c&&C["!comments"].push([encode_cell(A),_.c]),_.v===void 0)return!1;var B="";switch(_.t){case"b":B=_.v?"1":"0";break;case"d":_=dup(_),_.z=_.z||table_fmt[14],_.v=datenum(parseDate(_.v)),_.t="n";break;case"n":case"e":B=""+_.v;break;default:B=_.v;break}switch(A.s=get_cell_style(S.cellXfs,_,S),_.l&&C["!links"].push([encode_cell(A),_.l]),_.t){case"s":case"str":return S.bookSST?(B=get_sst_id(S.Strings,_.v==null?"":String(_.v),S.revStrings),A.t="s",A.v=B,T?write_record(n,18,write_BrtShortIsst(_,A)):write_record(n,7,write_BrtCellIsst(_,A))):(A.t="str",T?write_record(n,17,write_BrtShortSt(_,A)):write_record(n,6,write_BrtCellSt(_,A))),!0;case"n":return _.v==(_.v|0)&&_.v>-1e3&&_.v<1e3?T?write_record(n,13,write_BrtShortRk(_,A)):write_record(n,2,write_BrtCellRk(_,A)):T?write_record(n,16,write_BrtShortReal(_,A)):write_record(n,5,write_BrtCellReal(_,A)),!0;case"b":return A.t="b",T?write_record(n,15,write_BrtShortBool(_,A)):write_record(n,4,write_BrtCellBool(_,A)),!0;case"e":return A.t="e",T?write_record(n,14,write_BrtShortError(_,A)):write_record(n,3,write_BrtCellError(_,A)),!0}return T?write_record(n,12,write_BrtShortBlank(_,A)):write_record(n,1,write_BrtCellBlank(_,A)),!0}function write_CELLTABLE(n,_,x,E){var S=safe_decode_range(_["!ref"]||"A1"),C,T="",A=[];write_record(n,145);var B=_["!data"]!=null,I=S.e.r;_["!rows"]&&(I=Math.max(S.e.r,_["!rows"].length-1));for(var M=S.s.r;M<=I;++M){T=encode_row(M),write_row_header(n,_,S,M);var O=!1;if(M<=S.e.r)for(var D=S.s.c;D<=S.e.c;++D){M===S.s.r&&(A[D]=encode_col(D)),C=A[D]+T;var L=B?(_["!data"][M]||[])[D]:_[C];if(!L){O=!1;continue}O=write_ws_bin_cell(n,L,M,D,E,_,O)}}write_record(n,146)}function write_MERGECELLS(n,_){!_||!_["!merges"]||(write_record(n,177,write_BrtBeginMergeCells(_["!merges"].length)),_["!merges"].forEach(function(x){write_record(n,176,write_BrtMergeCell(x))}),write_record(n,178))}function write_COLINFOS(n,_){!_||!_["!cols"]||(write_record(n,390),_["!cols"].forEach(function(x,E){x&&write_record(n,60,write_BrtColInfo(E,x))}),write_record(n,391))}function write_IGNOREECS(n,_){!_||!_["!ref"]||(write_record(n,648),write_record(n,649,write_BrtCellIgnoreEC(safe_decode_range(_["!ref"]))),write_record(n,650))}function write_HLINKS(n,_,x){_["!links"].forEach(function(E){if(E[1].Target){var S=add_rels(x,-1,E[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(n,494,write_BrtHLink(E,S))}}),delete _["!links"]}function write_LEGACYDRAWING(n,_,x,E){if(_["!comments"].length>0){var S=add_rels(E,-1,"../drawings/vmlDrawing"+(x+1)+".vml",RELS.VML);write_record(n,551,write_RelID("rId"+S)),_["!legacy"]=S}}function write_AUTOFILTER(n,_,x,E){if(_["!autofilter"]){var S=_["!autofilter"],C=typeof S.ref=="string"?S.ref:encode_range(S.ref);x.Workbook||(x.Workbook={Sheets:[]}),x.Workbook.Names||(x.Workbook.Names=[]);var T=x.Workbook.Names,A=decode_range(C);A.s.r==A.e.r&&(A.e.r=decode_range(_["!ref"]).e.r,C=encode_range(A));for(var B=0;B<T.length;++B){var I=T[B];if(I.Name=="_xlnm._FilterDatabase"&&I.Sheet==E){I.Ref=formula_quote_sheet_name(x.SheetNames[E])+"!"+fix_range(C);break}}B==T.length&&T.push({Name:"_xlnm._FilterDatabase",Sheet:E,Ref:formula_quote_sheet_name(x.SheetNames[E])+"!"+fix_range(C)}),write_record(n,161,write_UncheckedRfX(safe_decode_range(C))),write_record(n,162)}}function write_WSVIEWS2(n,_,x){write_record(n,133),write_record(n,137,write_BrtBeginWsView(_,x)),write_record(n,138),write_record(n,134)}function write_SHEETPROTECT(n,_){_["!protect"]&&write_record(n,535,write_BrtSheetProtection(_["!protect"]))}function write_ws_bin(n,_,x,E){var S=buf_array(),C=x.SheetNames[n],T=x.Sheets[C]||{},A=C;try{x&&x.Workbook&&(A=x.Workbook.Sheets[n].CodeName||A)}catch{}var B=safe_decode_range(T["!ref"]||"A1");if(B.e.c>16383||B.e.r>1048575){if(_.WTF)throw new Error("Range "+(T["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");B.e.c=Math.min(B.e.c,16383),B.e.r=Math.min(B.e.c,1048575)}return T["!links"]=[],T["!comments"]=[],write_record(S,129),(x.vbaraw||T["!outline"])&&write_record(S,147,write_BrtWsProp(A,T["!outline"])),write_record(S,148,write_BrtWsDim(B)),write_WSVIEWS2(S,T,x.Workbook),write_COLINFOS(S,T),write_CELLTABLE(S,T,n,_),write_SHEETPROTECT(S,T),write_AUTOFILTER(S,T,x,n),write_MERGECELLS(S,T),write_HLINKS(S,T,E),T["!margins"]&&write_record(S,476,write_BrtMargins(T["!margins"])),(!_||_.ignoreEC||_.ignoreEC==null)&&write_IGNOREECS(S,T),write_LEGACYDRAWING(S,T,n,E),write_record(S,130),S.end()}function parse_Cache(n){var _=[],x=n.match(/^<c:numCache>/),E;(n.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(C){var T=C.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);T&&(_[+T[1]]=x?+T[2]:T[2])});var S=unescapexml((n.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(n.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(C){E=C.replace(/<.*?>/g,"")}),[_,S,E]}function parse_chart(n,_,x,E,S,C){var T=C||{"!type":"chart"};if(!n)return C;var A=0,B=0,I="A",M={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(n.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(O){var D=parse_Cache(O);M.s.r=M.s.c=0,M.e.c=A,I=encode_col(A),D[0].forEach(function(L,V){T["!data"]?(T["!data"][V]||(T["!data"][V]=[]),T["!data"][V][A]={t:"n",v:L,z:D[1]}):T[I+encode_row(V)]={t:"n",v:L,z:D[1]},B=V}),M.e.r<B&&(M.e.r=B),++A}),A>0&&(T["!ref"]=encode_range(M)),T}function parse_cs_xml(n,_,x,E,S){if(!n)return n;E||(E={"!id":{}});var C={"!type":"chart","!drawel":null,"!rel":""},T,A=n.match(sheetprregex);return A&&parse_ws_xml_sheetpr(A[0],C,S,x),(T=n.match(/drawing r:id="(.*?)"/))&&(C["!rel"]=T[1]),E["!id"][C["!rel"]]&&(C["!drawel"]=E["!id"][C["!rel"]]),C}function parse_BrtCsProp(n,_){n.l+=10;var x=parse_XLWideString(n);return{name:x}}function parse_cs_bin(n,_,x,E,S){if(!n)return n;E||(E={"!id":{}});var C={"!type":"chart","!drawel":null,"!rel":""},T=!1;return recordhopper(n,function(B,I,M){switch(M){case 550:C["!rel"]=B;break;case 651:S.Sheets[x]||(S.Sheets[x]={}),B.name&&(S.Sheets[x].CodeName=B.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:T=!0;break;case 36:T=!1;break;case 37:break;case 38:break;default:if(!(I.T>0)){if(!(I.T<0)){if(!T||_.WTF)throw new Error("Unexpected record 0x"+M.toString(16))}}}},_),E["!id"][C["!rel"]]&&(C["!drawel"]=E["!id"][C["!rel"]]),C}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(n,_){for(var x=0;x!=n.length;++x)for(var E=n[x],S=0;S!=_.length;++S){var C=_[S];if(E[C[0]]==null)E[C[0]]=C[1];else switch(C[2]){case"bool":typeof E[C[0]]=="string"&&(E[C[0]]=parsexmlbool(E[C[0]]));break;case"int":typeof E[C[0]]=="string"&&(E[C[0]]=parseInt(E[C[0]],10));break}}}function push_defaults(n,_){for(var x=0;x!=_.length;++x){var E=_[x];if(n[E[0]]==null)n[E[0]]=E[1];else switch(E[2]){case"bool":typeof n[E[0]]=="string"&&(n[E[0]]=parsexmlbool(n[E[0]]));break;case"int":typeof n[E[0]]=="string"&&(n[E[0]]=parseInt(n[E[0]],10));break}}}function parse_wb_defaults(n){push_defaults(n.WBProps,WBPropsDef),push_defaults(n.CalcPr,CalcPrDef),push_defaults_array(n.WBView,WBViewDef),push_defaults_array(n.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(n.WBProps.date1904)}function safe1904(n){return!n.Workbook||!n.Workbook.WBProps?"false":parsexmlbool(n.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(n,_){if(n.length>31){if(_)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var x=!0;return badchars.forEach(function(E){if(n.indexOf(E)!=-1){if(!_)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");x=!1}}),x}function check_wb_names(n,_,x){n.forEach(function(E,S){check_ws_name(E);for(var C=0;C<S;++C)if(E==n[C])throw new Error("Duplicate Sheet Name: "+E);if(x){var T=_&&_[S]&&_[S].CodeName||E;if(T.charCodeAt(0)==95&&T.length>22)throw new Error("Bad Code Name: Worksheet"+T)}})}function check_wb(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var _=n.Workbook&&n.Workbook.Sheets||[];check_wb_names(n.SheetNames,_,!!n.vbaraw);for(var x=0;x<n.SheetNames.length;++x)check_ws(n.Sheets[n.SheetNames[x]],n.SheetNames[x],x);n.SheetNames.forEach(function(E,S){var C=n.Sheets[E];if(!(!C||!C["!autofilter"])){var T;n.Workbook||(n.Workbook={}),n.Workbook.Names||(n.Workbook.Names=[]),n.Workbook.Names.forEach(function(B){B.Name=="_xlnm._FilterDatabase"&&B.Sheet==S&&(T=B)});var A=formula_quote_sheet_name(E)+"!"+fix_range(C["!autofilter"].ref);T?T.Ref=A:n.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:S,Ref:A})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(n,_){if(!n)throw new Error("Could not find file");var x={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},E=!1,S="xmlns",C={},T=0;if(n.replace(tagregex,function(B,I){var M=parsexmltag(B);switch(strip_ns(M[0])){case"<?xml":break;case"<workbook":B.match(wbnsregex)&&(S="xmlns"+B.match(/<(\w+):/)[1]),x.xmlns=M[S];break;case"</workbook>":break;case"<fileVersion":delete M[0],x.AppVersion=M;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(O){if(M[O[0]]!=null)switch(O[2]){case"bool":x.WBProps[O[0]]=parsexmlbool(M[O[0]]);break;case"int":x.WBProps[O[0]]=parseInt(M[O[0]],10);break;default:x.WBProps[O[0]]=M[O[0]]}}),M.codeName&&(x.WBProps.CodeName=utf8read(M.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete M[0],x.WBView.push(M);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(M.state){case"hidden":M.Hidden=1;break;case"veryHidden":M.Hidden=2;break;default:M.Hidden=0}delete M.state,M.name=unescapexml(utf8read(M.name)),delete M[0],x.Sheets.push(M);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":E=!0;break;case"</definedNames>":E=!1;break;case"<definedName":C={},C.Name=utf8read(M.name),M.comment&&(C.Comment=M.comment),M.localSheetId&&(C.Sheet=+M.localSheetId),parsexmlbool(M.hidden||"0")&&(C.Hidden=!0),T=I+B.length;break;case"</definedName>":C.Ref=unescapexml(utf8read(n.slice(T,I))),x.Names.push(C);break;case"<definedName/>":break;case"<calcPr":delete M[0],x.CalcPr=M;break;case"<calcPr/>":delete M[0],x.CalcPr=M;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":E=!0;break;case"</AlternateContent>":E=!1;break;case"<revisionPtr":break;default:if(!E&&_.WTF)throw new Error("unrecognized "+M[0]+" in workbook")}return B}),XMLNS_main.indexOf(x.xmlns)===-1)throw new Error("Unknown Namespace: "+x.xmlns);return parse_wb_defaults(x),x}function write_wb_xml(n){var _=[XML_HEADER];_[_.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var x=n.Workbook&&(n.Workbook.Names||[]).length>0,E={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(WBPropsDef.forEach(function(A){n.Workbook.WBProps[A[0]]!=null&&n.Workbook.WBProps[A[0]]!=A[1]&&(E[A[0]]=n.Workbook.WBProps[A[0]])}),n.Workbook.WBProps.CodeName&&(E.codeName=n.Workbook.WBProps.CodeName,delete E.CodeName)),_[_.length]=writextag("workbookPr",null,E);var S=n.Workbook&&n.Workbook.Sheets||[],C=0;if(S&&S[0]&&S[0].Hidden){for(_[_.length]="<bookViews>",C=0;C!=n.SheetNames.length&&!(!S[C]||!S[C].Hidden);++C);C==n.SheetNames.length&&(C=0),_[_.length]='<workbookView firstSheet="'+C+'" activeTab="'+C+'"/>',_[_.length]="</bookViews>"}for(_[_.length]="<sheets>",C=0;C!=n.SheetNames.length;++C){var T={name:escapexml(n.SheetNames[C].slice(0,31))};if(T.sheetId=""+(C+1),T["r:id"]="rId"+(C+1),S[C])switch(S[C].Hidden){case 1:T.state="hidden";break;case 2:T.state="veryHidden";break}_[_.length]=writextag("sheet",null,T)}return _[_.length]="</sheets>",x&&(_[_.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(A){var B={name:A.Name};A.Comment&&(B.comment=A.Comment),A.Sheet!=null&&(B.localSheetId=""+A.Sheet),A.Hidden&&(B.hidden="1"),A.Ref&&(_[_.length]=writextag("definedName",escapexml(A.Ref),B))}),_[_.length]="</definedNames>"),_.length>2&&(_[_.length]="</workbook>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_BrtBundleSh(n,_){var x={};return x.Hidden=n.read_shift(4),x.iTabID=n.read_shift(4),x.strRelID=parse_RelID(n),x.name=parse_XLWideString(n),x}function write_BrtBundleSh(n,_){return _||(_=new_buf(127)),_.write_shift(4,n.Hidden),_.write_shift(4,n.iTabID),write_RelID(n.strRelID,_),write_XLWideString(n.name.slice(0,31),_),_.length>_.l?_.slice(0,_.l):_}function parse_BrtWbProp(n,_){var x={},E=n.read_shift(4);x.defaultThemeVersion=n.read_shift(4);var S=_>8?parse_XLWideString(n):"";return S.length>0&&(x.CodeName=S),x.autoCompressPictures=!!(E&65536),x.backupFile=!!(E&64),x.checkCompatibility=!!(E&4096),x.date1904=!!(E&1),x.filterPrivacy=!!(E&8),x.hidePivotFieldList=!!(E&1024),x.promptedSolutions=!!(E&16),x.publishItems=!!(E&2048),x.refreshAllConnections=!!(E&262144),x.saveExternalLinkValues=!!(E&128),x.showBorderUnselectedTables=!!(E&4),x.showInkAnnotation=!!(E&32),x.showObjects=["all","placeholders","none"][E>>13&3],x.showPivotChartFilter=!!(E&32768),x.updateLinks=["userSet","never","always"][E>>8&3],x}function write_BrtWbProp(n,_){_||(_=new_buf(72));var x=0;return n&&(n.date1904&&(x|=1),n.filterPrivacy&&(x|=8)),_.write_shift(4,x),_.write_shift(4,0),write_XLSBCodeName(n&&n.CodeName||"ThisWorkbook",_),_.slice(0,_.l)}function parse_BrtFRTArchID$(n,_){var x={};return n.read_shift(4),x.ArchID=n.read_shift(4),n.l+=_-8,x}function parse_BrtName(n,_,x){var E=n.l+_,S=n.read_shift(4);n.l+=1;var C=n.read_shift(4),T=parse_XLNameWideString(n),A=parse_XLSBNameParsedFormula(n,0,x),B=parse_XLNullableWideString(n);S&32&&(T="_xlnm."+T),n.l=E;var I={Name:T,Ptg:A,Flags:S};return C<268435455&&(I.Sheet=C),B&&(I.Comment=B),I}function write_BrtName(n,_){var x=new_buf(9),E=0,S=n.Name;XLSLblBuiltIn.indexOf(S)>-1&&(E|=32,S=S.slice(6)),x.write_shift(4,E),x.write_shift(1,0),x.write_shift(4,n.Sheet==null?4294967295:n.Sheet);var C=[x,write_XLWideString(S),write_XLSBNameParsedFormula(n.Ref,_)];if(n.Comment)C.push(write_XLNullableWideString(n.Comment));else{var T=new_buf(4);T.write_shift(4,4294967295),C.push(T)}return bconcat(C)}function parse_wb_bin(n,_){var x={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},E=[],S=!1;_||(_={}),_.biff=12;var C=[],T=[[]];return T.SheetNames=[],T.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(n,function(B,I,M){switch(M){case 156:T.SheetNames.push(B.name),x.Sheets.push(B);break;case 153:x.WBProps=B;break;case 39:B.Sheet!=null&&(_.SID=B.Sheet),B.Ref=stringify_formula(B.Ptg,null,null,T,_),delete _.SID,delete B.Ptg,C.push(B);break;case 1036:break;case 357:case 358:case 355:case 667:T[0].length?T.push([M,B]):T[0]=[M,B],T[T.length-1].XTI=[];break;case 362:T.length===0&&(T[0]=[],T[0].XTI=[]),T[T.length-1].XTI=T[T.length-1].XTI.concat(B),T.XTI=T.XTI.concat(B);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:E.push(M),S=!0;break;case 36:E.pop(),S=!1;break;case 37:E.push(M),S=!0;break;case 38:E.pop(),S=!1;break;case 16:break;default:if(!I.T){if(!S||_.WTF&&E[E.length-1]!=37&&E[E.length-1]!=35)throw new Error("Unexpected record 0x"+M.toString(16))}}},_),parse_wb_defaults(x),x.Names=C,x.supbooks=T,x}function write_BUNDLESHS(n,_){write_record(n,143);for(var x=0;x!=_.SheetNames.length;++x){var E=_.Workbook&&_.Workbook.Sheets&&_.Workbook.Sheets[x]&&_.Workbook.Sheets[x].Hidden||0,S={Hidden:E,iTabID:x+1,strRelID:"rId"+(x+1),name:_.SheetNames[x]};write_record(n,156,write_BrtBundleSh(S))}write_record(n,144)}function write_BrtFileVersion(n,_){_||(_=new_buf(127));for(var x=0;x!=4;++x)_.write_shift(4,0);return write_XLWideString("SheetJS",_),write_XLWideString(XLSX.version,_),write_XLWideString(XLSX.version,_),write_XLWideString("7262",_),_.length>_.l?_.slice(0,_.l):_}function write_BrtBookView(n,_){_||(_=new_buf(29)),_.write_shift(-4,0),_.write_shift(-4,460),_.write_shift(4,28800),_.write_shift(4,17600),_.write_shift(4,500),_.write_shift(4,n),_.write_shift(4,n);var x=120;return _.write_shift(1,x),_.length>_.l?_.slice(0,_.l):_}function write_BOOKVIEWS(n,_){if(!(!_.Workbook||!_.Workbook.Sheets)){for(var x=_.Workbook.Sheets,E=0,S=-1,C=-1;E<x.length;++E)!x[E]||!x[E].Hidden&&S==-1?S=E:x[E].Hidden==1&&C==-1&&(C=E);C>S||(write_record(n,135),write_record(n,158,write_BrtBookView(S)),write_record(n,136))}}function write_BRTNAMES(n,_){!_.Workbook||!_.Workbook.Names||_.Workbook.Names.forEach(function(x){try{if(x.Flags&14)return;write_record(n,39,write_BrtName(x,_))}catch{console.error("Could not serialize defined name "+JSON.stringify(x))}})}function write_SELF_EXTERNS_xlsb(n){var _=n.SheetNames.length,x=new_buf(12*_+28);x.write_shift(4,_+2),x.write_shift(4,0),x.write_shift(4,-2),x.write_shift(4,-2),x.write_shift(4,0),x.write_shift(4,-1),x.write_shift(4,-1);for(var E=0;E<_;++E)x.write_shift(4,0),x.write_shift(4,E),x.write_shift(4,E);return x}function write_EXTERNALS_xlsb(n,_){write_record(n,353),write_record(n,357),write_record(n,362,write_SELF_EXTERNS_xlsb(_)),write_record(n,354)}function write_wb_bin(n,_){var x=buf_array();return write_record(x,131),write_record(x,128,write_BrtFileVersion()),write_record(x,153,write_BrtWbProp(n.Workbook&&n.Workbook.WBProps||null)),write_BOOKVIEWS(x,n),write_BUNDLESHS(x,n),write_EXTERNALS_xlsb(x,n),(n.Workbook||{}).Names&&write_BRTNAMES(x,n),write_record(x,132),x.end()}function parse_wb(n,_,x){return _.slice(-4)===".bin"?parse_wb_bin(n,x):parse_wb_xml(n,x)}function parse_ws(n,_,x,E,S,C,T,A){return _.slice(-4)===".bin"?parse_ws_bin(n,E,x,S,C,T,A):parse_ws_xml(n,E,x,S,C,T,A)}function parse_cs(n,_,x,E,S,C,T,A){return _.slice(-4)===".bin"?parse_cs_bin(n,E,x,S,C):parse_cs_xml(n,E,x,S,C)}function parse_ms(n,_,x,E,S,C,T,A){return _.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(n,_,x,E,S,C,T,A){return _.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(n,_,x,E){return _.slice(-4)===".bin"?parse_sty_bin(n,x,E):parse_sty_xml(n,x,E)}function parse_sst(n,_,x){return _.slice(-4)===".bin"?parse_sst_bin(n,x):parse_sst_xml(n,x)}function parse_cmnt(n,_,x){return _.slice(-4)===".bin"?parse_comments_bin(n,x):parse_comments_xml(n,x)}function parse_cc(n,_,x){return _.slice(-4)===".bin"?parse_cc_bin(n):parse_cc_xml(n)}function parse_xlink(n,_,x,E){return x.slice(-4)===".bin"?parse_xlink_bin(n,_,x,E):void 0}function parse_xlmeta(n,_,x){return _.slice(-4)===".bin"?parse_xlmeta_bin(n,_,x):parse_xlmeta_xml(n,_,x)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(n,_){var x=n.split(/\s+/),E=[];if(_||(E[0]=x[0]),x.length===1)return E;var S=n.match(attregexg2),C,T,A,B;if(S)for(B=0;B!=S.length;++B)C=S[B].match(attregex2),(T=C[1].indexOf(":"))===-1?E[C[1]]=C[2].slice(1,C[2].length-1):(C[1].slice(0,6)==="xmlns:"?A="xmlns"+C[1].slice(6):A=C[1].slice(T+1),E[A]=C[2].slice(1,C[2].length-1));return E}function xlml_parsexmltagobj(n){var _=n.split(/\s+/),x={};if(_.length===1)return x;var E=n.match(attregexg2),S,C,T,A;if(E)for(A=0;A!=E.length;++A)S=E[A].match(attregex2),(C=S[1].indexOf(":"))===-1?x[S[1]]=S[2].slice(1,S[2].length-1):(S[1].slice(0,6)==="xmlns:"?T="xmlns"+S[1].slice(6):T=S[1].slice(C+1),x[T]=S[2].slice(1,S[2].length-1));return x}var XLMLFormatMap;function xlml_format(n,_){var x=XLMLFormatMap[n]||unescapexml(n);return x==="General"?SSF_general(_):SSF_format(x,_)}function xlml_set_custprop(n,_,x,E){var S=E;switch((x[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":S=parsexmlbool(E);break;case"i2":case"int":S=parseInt(E,10);break;case"r4":case"float":S=parseFloat(E);break;case"date":case"dateTime.tz":S=parseDate(E);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+x[0])}n[unescapexml(_)]=S}function safe_format_xlml(n,_,x){if(n.t!=="z"){if(!x||x.cellText!==!1)try{n.t==="e"?n.w=n.w||BErr[n.v]:_==="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v):n.w=SSF_general(n.v):n.w=xlml_format(_||"General",n.v)}catch(C){if(x.WTF)throw C}try{var E=XLMLFormatMap[_]||_||"General";if(x.cellNF&&(n.z=E),x.cellDates&&n.t=="n"&&fmt_is_date(E)){var S=SSF_parse_date_code(n.v);S&&(n.t="d",n.v=new Date(S.y,S.m-1,S.d,S.H,S.M,S.S,S.u))}}catch(C){if(x.WTF)throw C}}}function process_style_xlml(n,_,x){if(x.cellStyles&&_.Interior){var E=_.Interior;E.Pattern&&(E.patternType=XLMLPatternTypeMap[E.Pattern]||E.Pattern)}n[_.ID]=_}function parse_xlml_data(n,_,x,E,S,C,T,A,B,I){var M="General",O=E.StyleID,D={};I=I||{};var L=[],V=0;for(O===void 0&&A&&(O=A.StyleID),O===void 0&&T&&(O=T.StyleID);C[O]!==void 0&&(C[O].nf&&(M=C[O].nf),C[O].Interior&&L.push(C[O].Interior),!!C[O].Parent);)O=C[O].Parent;switch(x.Type){case"Boolean":E.t="b",E.v=parsexmlbool(n);break;case"String":E.t="s",E.r=xlml_fixstr(unescapexml(n)),E.v=n.indexOf("<")>-1?unescapexml(_||n).replace(/<.*?>/g,""):E.r;break;case"DateTime":n.slice(-1)!="Z"&&(n+="Z"),E.v=(parseDate(n)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),E.v!==E.v?E.v=unescapexml(n):E.v<60&&(E.v=E.v-1),(!M||M=="General")&&(M="yyyy-mm-dd");case"Number":E.v===void 0&&(E.v=+n),E.t||(E.t="n");break;case"Error":E.t="e",E.v=RBErr[n],I.cellText!==!1&&(E.w=n);break;default:n==""&&_==""?E.t="z":(E.t="s",E.v=xlml_fixstr(_||n));break}if(safe_format_xlml(E,M,I),I.cellFormula!==!1)if(E.Formula){var U=unescapexml(E.Formula);U.charCodeAt(0)==61&&(U=U.slice(1)),E.f=rc_to_a1(U,S),delete E.Formula,E.ArrayRange=="RC"?E.F=rc_to_a1("RC:RC",S):E.ArrayRange&&(E.F=rc_to_a1(E.ArrayRange,S),B.push([safe_decode_range(E.F),E.F]))}else for(V=0;V<B.length;++V)S.r>=B[V][0].s.r&&S.r<=B[V][0].e.r&&S.c>=B[V][0].s.c&&S.c<=B[V][0].e.c&&(E.F=B[V][1]);I.cellStyles&&(L.forEach(function(q){!D.patternType&&q.patternType&&(D.patternType=q.patternType)}),E.s=D),E.StyleID!==void 0&&(E.ixfe=E.StyleID)}function xlml_prefix_dname(n){return XLSLblBuiltIn.indexOf("_xlnm."+n)>-1?"_xlnm."+n:n}function xlml_clean_comment(n){n.t=n.v||"",n.t=n.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.v=n.w=n.ixfe=void 0}function parse_xlml_xml(n,_){var x=_||{};make_ssf();var E=debom(xlml_normalize(n));(x.type=="binary"||x.type=="array"||x.type=="base64")&&(E=utf8read(E));var S=E.slice(0,1024).toLowerCase(),C=!1;if(S=S.replace(/".*?"/g,""),(S.indexOf(">")&1023)>Math.min(S.indexOf(",")&1023,S.indexOf(";")&1023)){var T=dup(x);return T.type="string",PRN.to_workbook(E,T)}if(S.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){S.indexOf("<"+Ne)>=0&&(C=!0)}),C)return html_to_workbook(E,x);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var A,B=[],I,M={},O=[],D={},L="";x.dense&&(D["!data"]=[]);var V={},U={},q=xlml_parsexmltag('<Data ss:Type="String">'),H=0,W=0,Q=0,re={s:{r:2e6,c:2e6},e:{r:0,c:0}},ce={},ne={},Y="",fe=0,ge=[],$e={},_e={},ae=0,X=[],F=[],z={},J=[],te,se=!1,oe=[],ie=[],G={},j=0,ee=0,pe={Sheets:[],WBProps:{date1904:!1}},he={};xlmlregex.lastIndex=0,E=E.replace(/<!--([\s\S]*?)-->/mg,"");for(var Se="";A=xlmlregex.exec(E);)switch(A[3]=(Se=A[3]).toLowerCase()){case"data":if(Se=="data"){if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else A[0].charAt(A[0].length-2)!=="/"&&B.push([A[3],!0]);break}if(B[B.length-1][1])break;A[1]==="/"?parse_xlml_data(E.slice(H,A.index),Y,q,B[B.length-1][0]=="comment"?z:V,{c:W,r:Q},ce,J[W],U,oe,x):(Y="",q=xlml_parsexmltag(A[0]),H=A.index+A[0].length);break;case"cell":if(A[1]==="/")if(F.length>0&&(V.c=F),(!x.sheetRows||x.sheetRows>Q)&&V.v!==void 0&&(x.dense?(D["!data"][Q]||(D["!data"][Q]=[]),D["!data"][Q][W]=V):D[encode_col(W)+encode_row(Q)]=V),V.HRef&&(V.l={Target:unescapexml(V.HRef)},V.HRefScreenTip&&(V.l.Tooltip=V.HRefScreenTip),delete V.HRef,delete V.HRefScreenTip),(V.MergeAcross||V.MergeDown)&&(j=W+(parseInt(V.MergeAcross,10)|0),ee=Q+(parseInt(V.MergeDown,10)|0),(j>W||ee>Q)&&ge.push({s:{c:W,r:Q},e:{c:j,r:ee}})),!x.sheetStubs)V.MergeAcross?W=j+1:++W;else if(V.MergeAcross||V.MergeDown){for(var we=W;we<=j;++we)for(var xe=Q;xe<=ee;++xe)(we>W||xe>Q)&&(x.dense?(D["!data"][xe]||(D["!data"][xe]=[]),D["!data"][xe][we]={t:"z"}):D[encode_col(we)+encode_row(xe)]={t:"z"});W=j+1}else++W;else V=xlml_parsexmltagobj(A[0]),V.Index&&(W=+V.Index-1),W<re.s.c&&(re.s.c=W),W>re.e.c&&(re.e.c=W),A[0].slice(-2)==="/>"&&++W,F=[];break;case"row":A[1]==="/"||A[0].slice(-2)==="/>"?(Q<re.s.r&&(re.s.r=Q),Q>re.e.r&&(re.e.r=Q),A[0].slice(-2)==="/>"&&(U=xlml_parsexmltag(A[0]),U.Index&&(Q=+U.Index-1)),W=0,++Q):(U=xlml_parsexmltag(A[0]),U.Index&&(Q=+U.Index-1),G={},(U.AutoFitHeight=="0"||U.Height)&&(G.hpx=parseInt(U.Height,10),G.hpt=px2pt(G.hpx),ie[Q]=G),U.Hidden=="1"&&(G.hidden=!0,ie[Q]=G));break;case"worksheet":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"));O.push(L),re.s.r<=re.e.r&&re.s.c<=re.e.c&&(D["!ref"]=encode_range(re),x.sheetRows&&x.sheetRows<=re.e.r&&(D["!fullref"]=D["!ref"],re.e.r=x.sheetRows-1,D["!ref"]=encode_range(re))),ge.length&&(D["!merges"]=ge),J.length>0&&(D["!cols"]=J),ie.length>0&&(D["!rows"]=ie),M[L]=D}else re={s:{r:2e6,c:2e6},e:{r:0,c:0}},Q=W=0,B.push([A[3],!1]),I=xlml_parsexmltag(A[0]),L=unescapexml(I.Name),D={},x.dense&&(D["!data"]=[]),ge=[],oe=[],ie=[],he={name:L,Hidden:0},pe.Sheets.push(he);break;case"table":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else{if(A[0].slice(-2)=="/>")break;B.push([A[3],!1]),J=[],se=!1}break;case"style":A[1]==="/"?process_style_xlml(ce,ne,x):ne=xlml_parsexmltag(A[0]);break;case"numberformat":ne.nf=unescapexml(xlml_parsexmltag(A[0]).Format||"General"),XLMLFormatMap[ne.nf]&&(ne.nf=XLMLFormatMap[ne.nf]);for(var Ee=0;Ee!=392&&table_fmt[Ee]!=ne.nf;++Ee);if(Ee==392){for(Ee=57;Ee!=392;++Ee)if(table_fmt[Ee]==null){SSF__load(ne.nf,Ee);break}}break;case"column":if(B[B.length-1][0]!=="table"||A[1]==="/")break;if(te=xlml_parsexmltag(A[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!se&&te.wpx>10){se=!0,MDW=DEF_MDW;for(var ye=0;ye<J.length;++ye)J[ye]&&process_col(J[ye])}se&&process_col(te),J[te.Index-1||J.length]=te;for(var Ce=0;Ce<+te.Span;++Ce)J[J.length]=dup(te);break;case"namedrange":if(A[1]==="/")break;pe.Names||(pe.Names=[]);var ve=parsexmltag(A[0]),Be={Name:xlml_prefix_dname(ve.Name),Ref:rc_to_a1(ve.RefersTo.slice(1),{r:0,c:0})};pe.Sheets.length>0&&(Be.Sheet=pe.Sheets.length-1),pe.Names.push(Be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(A[0].slice(-2)==="/>")break;A[1]==="/"?Y+=E.slice(fe,A.index):fe=A.index+A[0].length;break;case"interior":if(!x.cellStyles)break;ne.Interior=xlml_parsexmltag(A[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(A[0].slice(-2)==="/>")break;A[1]==="/"?xlml_set_prop($e,Se,E.slice(ae,A.index)):ae=A.index+A[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else B.push([A[3],!1]);break;case"comment":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"));xlml_clean_comment(z),F.push(z)}else B.push([A[3],!1]),I=xlml_parsexmltag(A[0]),z={a:I.Author};break;case"autofilter":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else if(A[0].charAt(A[0].length-2)!=="/"){var me=xlml_parsexmltag(A[0]);D["!autofilter"]={ref:rc_to_a1(me.Range).replace(/\$/g,"")},B.push([A[3],!0])}break;case"name":break;case"datavalidation":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else A[0].charAt(A[0].length-2)!=="/"&&B.push([A[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(A[1]==="/"){if((I=B.pop())[0]!==A[3])throw new Error("Bad state: "+I.join("|"))}else A[0].charAt(A[0].length-2)!=="/"&&B.push([A[3],!0]);break;case"null":break;default:if(B.length==0&&A[3]=="document"||B.length==0&&A[3]=="uof")return parse_fods(E,x);var Ie=!0;switch(B[B.length-1][0]){case"officedocumentsettings":switch(A[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ie=!1}break;case"componentoptions":switch(A[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ie=!1}break;case"excelworkbook":switch(A[3]){case"date1904":pe.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ie=!1}break;case"workbookoptions":switch(A[3]){case"owcversion":break;case"height":break;case"width":break;default:Ie=!1}break;case"worksheetoptions":switch(A[3]){case"visible":if(A[0].slice(-2)!=="/>")if(A[1]==="/")switch(E.slice(ae,A.index)){case"SheetHidden":he.Hidden=1;break;case"SheetVeryHidden":he.Hidden=2;break}else ae=A.index+A[0].length;break;case"header":D["!margins"]||default_margins(D["!margins"]={},"xlml"),isNaN(+parsexmltag(A[0]).Margin)||(D["!margins"].header=+parsexmltag(A[0]).Margin);break;case"footer":D["!margins"]||default_margins(D["!margins"]={},"xlml"),isNaN(+parsexmltag(A[0]).Margin)||(D["!margins"].footer=+parsexmltag(A[0]).Margin);break;case"pagemargins":var Ve=parsexmltag(A[0]);D["!margins"]||default_margins(D["!margins"]={},"xlml"),isNaN(+Ve.Top)||(D["!margins"].top=+Ve.Top),isNaN(+Ve.Left)||(D["!margins"].left=+Ve.Left),isNaN(+Ve.Right)||(D["!margins"].right=+Ve.Right),isNaN(+Ve.Bottom)||(D["!margins"].bottom=+Ve.Bottom);break;case"displayrighttoleft":pe.Views||(pe.Views=[]),pe.Views[0]||(pe.Views[0]={}),pe.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":D["!outline"]||(D["!outline"]={}),D["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":D["!outline"]||(D["!outline"]={}),D["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ie=!1}break;case"pivottable":case"pivotcache":switch(A[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ie=!1}break;case"pagebreaks":switch(A[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ie=!1}break;case"autofilter":switch(A[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ie=!1}break;case"querytable":switch(A[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ie=!1}break;case"datavalidation":switch(A[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ie=!1}break;case"sorting":case"conditionalformatting":switch(A[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ie=!1}break;case"mapinfo":case"schema":case"data":switch(A[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ie=!1}break;case"smarttags":break;default:Ie=!1;break}if(Ie||A[3].match(/!\[CDATA/))break;if(!B[B.length-1][1])throw"Unrecognized tag: "+A[3]+"|"+B.join("|");if(B[B.length-1][0]==="customdocumentproperties"){if(A[0].slice(-2)==="/>")break;A[1]==="/"?xlml_set_custprop(_e,Se,X,E.slice(ae,A.index)):(X=A,ae=A.index+A[0].length);break}if(x.WTF)throw"Unrecognized tag: "+A[3]+"|"+B.join("|")}var Me={};return!x.bookSheets&&!x.bookProps&&(Me.Sheets=M),Me.SheetNames=O,Me.Workbook=pe,Me.SSF=dup(table_fmt),Me.Props=$e,Me.Custprops=_e,Me.bookType="xlml",Me}function parse_xlml(n,_){switch(fix_read_opts(_=_||{}),_.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(n),_);case"binary":case"buffer":case"file":return parse_xlml_xml(n,_);case"array":return parse_xlml_xml(a2s(n),_)}}function write_props_xlml(n,_){var x=[];return n.Props&&x.push(xlml_write_docprops(n.Props,_)),n.Custprops&&x.push(xlml_write_custprops(n.Props,n.Custprops)),x.join("")}function write_wb_xlml(n){return(((n||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(n,_){var x=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return _.cellXfs.forEach(function(E,S){var C=[];C.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[E.numFmtId])}));var T={"ss:ID":"s"+(21+S)};x.push(writextag("Style",C.join(""),T))}),writextag("Styles",x.join(""))}function write_name_xlml(n){return writextag("NamedRange",null,{"ss:Name":n.Name.slice(0,6)=="_xlnm."?n.Name.slice(6):n.Name,"ss:RefersTo":"="+a1_to_rc(n.Ref,{r:0,c:0})})}function write_names_xlml(n){if(!((n||{}).Workbook||{}).Names)return"";for(var _=n.Workbook.Names,x=[],E=0;E<_.length;++E){var S=_[E];S.Sheet==null&&(S.Name.match(/^_xlfn\./)||x.push(write_name_xlml(S)))}return writextag("Names",x.join(""))}function write_ws_xlml_names(n,_,x,E){if(!n||!((E||{}).Workbook||{}).Names)return"";for(var S=E.Workbook.Names,C=[],T=0;T<S.length;++T){var A=S[T];A.Sheet==x&&(A.Name.match(/^_xlfn\./)||C.push(write_name_xlml(A)))}return C.join("")}function write_ws_xlml_wsopts(n,_,x,E){if(!n)return"";var S=[];if(n["!margins"]&&(S.push("<PageSetup>"),n["!margins"].header&&S.push(writextag("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&S.push(writextag("Footer",null,{"x:Margin":n["!margins"].footer})),S.push(writextag("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),S.push("</PageSetup>")),E&&E.Workbook&&E.Workbook.Sheets&&E.Workbook.Sheets[x])if(E.Workbook.Sheets[x].Hidden)S.push(writextag("Visible",E.Workbook.Sheets[x].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var C=0;C<x&&!(E.Workbook.Sheets[C]&&!E.Workbook.Sheets[C].Hidden);++C);C==x&&S.push("<Selected/>")}return((((E||{}).Workbook||{}).Views||[])[0]||{}).RTL&&S.push("<DisplayRightToLeft/>"),n["!protect"]&&(S.push(writetag("ProtectContents","True")),n["!protect"].objects&&S.push(writetag("ProtectObjects","True")),n["!protect"].scenarios&&S.push(writetag("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?S.push(writetag("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&S.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(T){n["!protect"][T[0]]&&S.push("<"+T[1]+"/>")})),S.length==0?"":writextag("WorksheetOptions",S.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(n){return n.map(function(_){var x=xlml_unfixstr(_.t||""),E=writextag("ss:Data",x,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",E,{"ss:Author":_.a})}).join("")}function write_ws_xlml_cell(n,_,x,E,S,C,T){if(!n||n.v==null&&n.f==null)return"";var A={};if(n.f&&(A["ss:Formula"]="="+escapexml(a1_to_rc(n.f,T))),n.F&&n.F.slice(0,_.length)==_){var B=decode_cell(n.F.slice(_.length+1));A["ss:ArrayRange"]="RC:R"+(B.r==T.r?"":"["+(B.r-T.r)+"]")+"C"+(B.c==T.c?"":"["+(B.c-T.c)+"]")}if(n.l&&n.l.Target&&(A["ss:HRef"]=escapexml(n.l.Target),n.l.Tooltip&&(A["x:HRefScreenTip"]=escapexml(n.l.Tooltip))),x["!merges"])for(var I=x["!merges"],M=0;M!=I.length;++M)I[M].s.c!=T.c||I[M].s.r!=T.r||(I[M].e.c>I[M].s.c&&(A["ss:MergeAcross"]=I[M].e.c-I[M].s.c),I[M].e.r>I[M].s.r&&(A["ss:MergeDown"]=I[M].e.r-I[M].s.r));var O="",D="";switch(n.t){case"z":if(!E.sheetStubs)return"";break;case"n":O="Number",D=String(n.v);break;case"b":O="Boolean",D=n.v?"1":"0";break;case"e":O="Error",D=BErr[n.v];break;case"d":O="DateTime",D=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||table_fmt[14]);break;case"s":O="String",D=escapexlml(n.v||"");break}var L=get_cell_style(E.cellXfs,n,E);A["ss:StyleID"]="s"+(21+L),A["ss:Index"]=T.c+1;var V=n.v!=null?D:"",U=n.t=="z"?"":'<Data ss:Type="'+O+'">'+V+"</Data>";return(n.c||[]).length>0&&(U+=write_ws_xlml_comment(n.c)),writextag("Cell",U,A)}function write_ws_xlml_row(n,_){var x='<Row ss:Index="'+(n+1)+'"';return _&&(_.hpt&&!_.hpx&&(_.hpx=pt2px(_.hpt)),_.hpx&&(x+=' ss:AutoFitHeight="0" ss:Height="'+_.hpx+'"'),_.hidden&&(x+=' ss:Hidden="1"')),x+">"}function write_ws_xlml_table(n,_,x,E){if(!n["!ref"])return"";var S=safe_decode_range(n["!ref"]),C=n["!merges"]||[],T=0,A=[];n["!cols"]&&n["!cols"].forEach(function(q,H){process_col(q);var W=!!q.width,Q=col_obj_w(H,q),re={"ss:Index":H+1};W&&(re["ss:Width"]=width2px(Q.width)),q.hidden&&(re["ss:Hidden"]="1"),A.push(writextag("Column",null,re))});for(var B=n["!data"]!=null,I=S.s.r;I<=S.e.r;++I){for(var M=[write_ws_xlml_row(I,(n["!rows"]||[])[I])],O=S.s.c;O<=S.e.c;++O){var D=!1;for(T=0;T!=C.length;++T)if(!(C[T].s.c>O)&&!(C[T].s.r>I)&&!(C[T].e.c<O)&&!(C[T].e.r<I)){(C[T].s.c!=O||C[T].s.r!=I)&&(D=!0);break}if(!D){var L={r:I,c:O},V=encode_col(O)+encode_row(I),U=B?(n["!data"][I]||[])[O]:n[V];M.push(write_ws_xlml_cell(U,V,n,_,x,E,L))}}M.push("</Row>"),M.length>2&&A.push(M.join(""))}return A.join("")}function write_ws_xlml(n,_,x){var E=[],S=x.SheetNames[n],C=x.Sheets[S],T=C?write_ws_xlml_names(C,_,n,x):"";return T.length>0&&E.push("<Names>"+T+"</Names>"),T=C?write_ws_xlml_table(C,_,n,x):"",T.length>0&&E.push("<Table>"+T+"</Table>"),E.push(write_ws_xlml_wsopts(C,_,n,x)),C["!autofilter"]&&E.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(C["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),E.join("")}function write_xlml(n,_){_||(_={}),n.SSF||(n.SSF=dup(table_fmt)),n.SSF&&(make_ssf(),SSF_load_table(n.SSF),_.revssf=evert_num(n.SSF),_.revssf[n.SSF[65535]]=0,_.ssf=n.SSF,_.cellXfs=[],get_cell_style(_.cellXfs,{},{revssf:{General:0}}));var x=[];x.push(write_props_xlml(n,_)),x.push(write_wb_xlml(n)),x.push(""),x.push("");for(var E=0;E<n.SheetNames.length;++E)x.push(writextag("Worksheet",write_ws_xlml(E,_,n),{"ss:Name":escapexml(n.SheetNames[E])}));return x[2]=write_sty_xlml(n,_),x[3]=write_names_xlml(n),XML_HEADER+writextag("Workbook",x.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(n){var _={},x=n.content;if(x.l=28,_.AnsiUserType=x.read_shift(0,"lpstr-ansi"),_.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(x),x.length-x.l<=4)return _;var E=x.read_shift(4);if(E==0||E>40||(x.l-=4,_.Reserved1=x.read_shift(0,"lpstr-ansi"),x.length-x.l<=4)||(E=x.read_shift(4),E!==1907505652)||(_.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(x),E=x.read_shift(4),E==0||E>40))return _;x.l-=4,_.Reserved2=x.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(n,_,x,E,S){var C=E,T=[],A=x.slice(x.l,x.l+C);if(S&&S.enc&&S.enc.insitu&&A.length>0)switch(n){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:S.enc.insitu(A)}T.push(A),x.l+=C;for(var B=__readUInt16LE(x,x.l),I=XLSRecordEnum[B],M=0;I!=null&&CONTINUE_RT.indexOf(B)>-1;)C=__readUInt16LE(x,x.l+2),M=x.l+4,B==2066?M+=4:(B==2165||B==2175)&&(M+=12),A=x.slice(M,x.l+4+C),T.push(A),x.l+=4+C,I=XLSRecordEnum[B=__readUInt16LE(x,x.l)];var O=bconcat(T);prep_blob(O,0);var D=0;O.lens=[];for(var L=0;L<T.length;++L)O.lens.push(D),D+=T[L].length;if(O.length<E)throw"XLS Record 0x"+n.toString(16)+" Truncated: "+O.length+" < "+E;return _.f(O,O.length,S)}function safe_format_xf(n,_,x){if(n.t!=="z"&&n.XF){var E=0;try{E=n.z||n.XF.numFmtId||0,_.cellNF&&(n.z=table_fmt[E])}catch(C){if(_.WTF)throw C}if(!_||_.cellText!==!1)try{n.t==="e"?n.w=n.w||BErr[n.v]:E===0||E=="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v):n.w=SSF_general(n.v):n.w=SSF_format(E,n.v,{date1904:!!x,dateNF:_&&_.dateNF})}catch(C){if(_.WTF)throw C}if(_.cellDates&&E&&n.t=="n"&&fmt_is_date(table_fmt[E]||String(E))){var S=SSF_parse_date_code(n.v);S&&(n.t="d",n.v=new Date(S.y,S.m-1,S.d,S.H,S.M,S.S,S.u))}}}function make_cell(n,_,x){return{v:n,ixfe:_,t:x}}function parse_workbook(n,_){var x={opts:{}},E={},S={};_.dense&&(S["!data"]=[]);var C={},T={},A=null,B=[],I="",M={},O,D="",L,V,U,q,H={},W=[],Q,re,ce=[],ne=[],Y={Sheets:[],WBProps:{date1904:!1},Views:[{}]},fe={},ge=function(Le){return Le<8?XLSIcv[Le]:Le<64&&ne[Le-8]||XLSIcv[Le]},$e=function(Le,Xe,Qe){var et=Xe.XF.data;if(!(!et||!et.patternType||!Qe||!Qe.cellStyles)){Xe.s={},Xe.s.patternType=et.patternType;var St;(St=rgb2Hex(ge(et.icvFore)))&&(Xe.s.fgColor={rgb:St}),(St=rgb2Hex(ge(et.icvBack)))&&(Xe.s.bgColor={rgb:St})}},_e=function(Le,Xe,Qe){if(!(G>1)&&!(Qe.sheetRows&&Le.r>=Qe.sheetRows)){if(Qe.cellStyles&&Xe.XF&&Xe.XF.data&&$e(Le,Xe,Qe),delete Xe.ixfe,delete Xe.XF,O=Le,D=encode_cell(Le),(!T||!T.s||!T.e)&&(T={s:{r:0,c:0},e:{r:0,c:0}}),Le.r<T.s.r&&(T.s.r=Le.r),Le.c<T.s.c&&(T.s.c=Le.c),Le.r+1>T.e.r&&(T.e.r=Le.r+1),Le.c+1>T.e.c&&(T.e.c=Le.c+1),Qe.cellFormula&&Xe.f){for(var et=0;et<W.length;++et)if(!(W[et][0].s.c>Le.c||W[et][0].s.r>Le.r)&&!(W[et][0].e.c<Le.c||W[et][0].e.r<Le.r)){Xe.F=encode_range(W[et][0]),(W[et][0].s.c!=Le.c||W[et][0].s.r!=Le.r)&&delete Xe.f,Xe.f&&(Xe.f=""+stringify_formula(W[et][1],T,Le,oe,ae));break}}Qe.dense?(S["!data"][Le.r]||(S["!data"][Le.r]=[]),S["!data"][Le.r][Le.c]=Xe):S[D]=Xe}},ae={enc:!1,sbcch:0,snames:[],sharedf:H,arrayf:W,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!_&&!!_.cellStyles,WTF:!!_&&!!_.wtf};_.password&&(ae.password=_.password);var X,F=[],z=[],J=[],te=[],se=!1,oe=[];oe.SheetNames=ae.snames,oe.sharedf=ae.sharedf,oe.arrayf=ae.arrayf,oe.names=[],oe.XTI=[];var ie=0,G=0,j=0,ee=[],pe=[],he;ae.codepage=1200,set_cp(1200);for(var Se=!1;n.l<n.length-1;){var we=n.l,xe=n.read_shift(2);if(xe===0&&ie===10)break;var Ee=n.l===n.length?0:n.read_shift(2),ye=XLSRecordEnum[xe];if(G==0&&[9,521,1033,2057].indexOf(xe)==-1)break;if(ye&&ye.f){if(_.bookSheets&&ie===133&&xe!==133)break;if(ie=xe,ye.r===2||ye.r==12){var Ce=n.read_shift(2);if(Ee-=2,!ae.enc&&Ce!==xe&&((Ce&255)<<8|Ce>>8)!==xe)throw new Error("rt mismatch: "+Ce+"!="+xe);ye.r==12&&(n.l+=10,Ee-=10)}var ve={};if(xe===10?ve=ye.f(n,Ee,ae):ve=slurp(xe,ye,n,Ee,ae),G==0&&[9,521,1033,2057].indexOf(ie)===-1)continue;switch(xe){case 34:x.opts.Date1904=Y.WBProps.date1904=ve;break;case 134:x.opts.WriteProtect=!0;break;case 47:if(ae.enc||(n.l=0),ae.enc=ve,!_.password)throw new Error("File is password-protected");if(ve.valid==null)throw new Error("Encryption scheme unsupported");if(!ve.valid)throw new Error("Password is incorrect");break;case 92:ae.lastuser=ve;break;case 66:var Be=Number(ve);switch(Be){case 21010:Be=1200;break;case 32768:Be=1e4;break;case 32769:Be=1252;break}set_cp(ae.codepage=Be),Se=!0;break;case 317:ae.rrtabid=ve;break;case 25:ae.winlocked=ve;break;case 439:x.opts.RefreshAll=ve;break;case 12:x.opts.CalcCount=ve;break;case 16:x.opts.CalcDelta=ve;break;case 17:x.opts.CalcIter=ve;break;case 13:x.opts.CalcMode=ve;break;case 14:x.opts.CalcPrecision=ve;break;case 95:x.opts.CalcSaveRecalc=ve;break;case 15:ae.CalcRefMode=ve;break;case 2211:x.opts.FullCalc=ve;break;case 129:ve.fDialog&&(S["!type"]="dialog"),ve.fBelow||((S["!outline"]||(S["!outline"]={})).above=!0),ve.fRight||((S["!outline"]||(S["!outline"]={})).left=!0);break;case 224:ce.push(ve);break;case 430:oe.push([ve]),oe[oe.length-1].XTI=[];break;case 35:case 547:oe[oe.length-1].push(ve);break;case 24:case 536:he={Name:ve.Name,Ref:stringify_formula(ve.rgce,T,null,oe,ae)},ve.itab>0&&(he.Sheet=ve.itab-1),oe.names.push(he),oe[0]||(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].push(ve),ve.Name=="_xlnm._FilterDatabase"&&ve.itab>0&&ve.rgce&&ve.rgce[0]&&ve.rgce[0][0]&&ve.rgce[0][0][0]=="PtgArea3d"&&(pe[ve.itab-1]={ref:encode_range(ve.rgce[0][0][1][2])});break;case 22:ae.ExternCount=ve;break;case 23:oe.length==0&&(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].XTI=oe[oe.length-1].XTI.concat(ve),oe.XTI=oe.XTI.concat(ve);break;case 2196:if(ae.biff<8)break;he!=null&&(he.Comment=ve[1]);break;case 18:S["!protect"]=ve;break;case 19:ve!==0&&ae.WTF&&console.error("Password verifier: "+ve);break;case 133:C[ve.pos]=ve,ae.snames.push(ve.name);break;case 10:{if(--G)break;if(T.e){if(T.e.r>0&&T.e.c>0){if(T.e.r--,T.e.c--,S["!ref"]=encode_range(T),_.sheetRows&&_.sheetRows<=T.e.r){var me=T.e.r;T.e.r=_.sheetRows-1,S["!fullref"]=S["!ref"],S["!ref"]=encode_range(T),T.e.r=me}T.e.r++,T.e.c++}F.length>0&&(S["!merges"]=F),z.length>0&&(S["!objects"]=z),J.length>0&&(S["!cols"]=J),te.length>0&&(S["!rows"]=te),Y.Sheets.push(fe)}I===""?M=S:E[I]=S,S={},_.dense&&(S["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(ae.biff===8&&(ae.biff={9:2,521:3,1033:4}[xe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ve.BIFFVer]||8),ae.biffguess=ve.BIFFVer==0,ve.BIFFVer==0&&ve.dt==4096&&(ae.biff=5,Se=!0,set_cp(ae.codepage=28591)),ae.biff==8&&ve.BIFFVer==0&&ve.dt==16&&(ae.biff=2),G++)break;if(S={},_.dense&&(S["!data"]=[]),ae.biff<8&&!Se&&(Se=!0,set_cp(ae.codepage=_.codepage||1252)),ae.biff<5||ve.BIFFVer==0&&ve.dt==4096){I===""&&(I="Sheet1"),T={s:{r:0,c:0},e:{r:0,c:0}};var Ie={pos:n.l-Ee,name:I};C[Ie.pos]=Ie,ae.snames.push(I)}else I=(C[we]||{name:""}).name;ve.dt==32&&(S["!type"]="chart"),ve.dt==64&&(S["!type"]="macro"),F=[],z=[],ae.arrayf=W=[],J=[],te=[],se=!1,fe={Hidden:(C[we]||{hs:0}).hs,name:I}}break;case 515:case 3:case 2:S["!type"]=="chart"&&(_.dense?(S["!data"][ve.r]||[])[ve.c]:S[encode_col(ve.c)+encode_row(ve.r)])&&++ve.c,Q={ixfe:ve.ixfe,XF:ce[ve.ixfe]||{},v:ve.val,t:"n"},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_);break;case 5:case 517:Q={ixfe:ve.ixfe,XF:ce[ve.ixfe],v:ve.val,t:ve.t},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_);break;case 638:Q={ixfe:ve.ixfe,XF:ce[ve.ixfe],v:ve.rknum,t:"n"},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_);break;case 189:for(var Ve=ve.c;Ve<=ve.C;++Ve){var Me=ve.rkrec[Ve-ve.c][0];Q={ixfe:Me,XF:ce[Me],v:ve.rkrec[Ve-ve.c][1],t:"n"},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:Ve,r:ve.r},Q,_)}break;case 6:case 518:case 1030:{if(ve.val=="String"){A=ve;break}if(Q=make_cell(ve.val,ve.cell.ixfe,ve.tt),Q.XF=ce[Q.ixfe],_.cellFormula){var Ne=ve.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var Pe=Ne[0][0][1][0],He=Ne[0][0][1][1],We=encode_cell({r:Pe,c:He});H[We]?Q.f=""+stringify_formula(ve.formula,T,ve.cell,oe,ae):Q.F=((_.dense?(S["!data"][Pe]||[])[He]:S[We])||{}).F}else Q.f=""+stringify_formula(ve.formula,T,ve.cell,oe,ae)}j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e(ve.cell,Q,_),A=ve}break;case 7:case 519:if(A)A.val=ve,Q=make_cell(ve,A.cell.ixfe,"s"),Q.XF=ce[Q.ixfe],_.cellFormula&&(Q.f=""+stringify_formula(A.formula,T,A.cell,oe,ae)),j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e(A.cell,Q,_),A=null;else throw new Error("String record expects Formula");break;case 33:case 545:{W.push(ve);var Ke=encode_cell(ve[0].s);if(L=_.dense?(S["!data"][ve[0].s.r]||[])[ve[0].s.c]:S[Ke],_.cellFormula&&L){if(!A||!Ke||!L)break;L.f=""+stringify_formula(ve[1],T,ve[0],oe,ae),L.F=encode_range(ve[0])}}break;case 1212:{if(!_.cellFormula)break;if(D){if(!A)break;H[encode_cell(A.cell)]=ve[0],L=_.dense?(S["!data"][A.cell.r]||[])[A.cell.c]:S[encode_cell(A.cell)],(L||{}).f=""+stringify_formula(ve[0],T,O,oe,ae)}}break;case 253:Q=make_cell(B[ve.isst].t,ve.ixfe,"s"),B[ve.isst].h&&(Q.h=B[ve.isst].h),Q.XF=ce[Q.ixfe],j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_);break;case 513:_.sheetStubs&&(Q={ixfe:ve.ixfe,XF:ce[ve.ixfe],t:"z"},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_));break;case 190:if(_.sheetStubs)for(var Ge=ve.c;Ge<=ve.C;++Ge){var nt=ve.ixfe[Ge-ve.c];Q={ixfe:nt,XF:ce[nt],t:"z"},j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:Ge,r:ve.r},Q,_)}break;case 214:case 516:case 4:Q=make_cell(ve.val,ve.ixfe,"s"),Q.XF=ce[Q.ixfe],j>0&&(Q.z=ee[Q.ixfe>>8&63]),safe_format_xf(Q,_,x.opts.Date1904),_e({c:ve.c,r:ve.r},Q,_);break;case 0:case 512:G===1&&(T=ve);break;case 252:B=ve;break;case 1054:if(ae.biff==4){ee[j++]=ve[1];for(var ot=0;ot<j+163&&table_fmt[ot]!=ve[1];++ot);ot>=163&&SSF__load(ve[1],j+163)}else SSF__load(ve[1],ve[0]);break;case 30:{ee[j++]=ve;for(var Ze=0;Ze<j+163&&table_fmt[Ze]!=ve;++Ze);Ze>=163&&SSF__load(ve,j+163)}break;case 229:F=F.concat(ve);break;case 93:z[ve.cmo[0]]=ae.lastobj=ve;break;case 438:ae.lastobj.TxO=ve;break;case 127:ae.lastobj.ImData=ve;break;case 440:for(q=ve[0].s.r;q<=ve[0].e.r;++q)for(U=ve[0].s.c;U<=ve[0].e.c;++U)L=_.dense?(S["!data"][q]||[])[U]:S[encode_cell({c:U,r:q})],L&&(L.l=ve[1]);break;case 2048:for(q=ve[0].s.r;q<=ve[0].e.r;++q)for(U=ve[0].s.c;U<=ve[0].e.c;++U)L=_.dense?(S["!data"][q]||[])[U]:S[encode_cell({c:U,r:q})],L&&L.l&&(L.l.Tooltip=ve[1]);break;case 28:{if(ae.biff<=5&&ae.biff>=2)break;L=_.dense?(S["!data"][ve[0].r]||[])[ve[0].c]:S[encode_cell(ve[0])];var Re=z[ve[2]];L||(_.dense?(S["!data"][ve[0].r]||(S["!data"][ve[0].r]=[]),L=S["!data"][ve[0].r][ve[0].c]={t:"z"}):L=S[encode_cell(ve[0])]={t:"z"},T.e.r=Math.max(T.e.r,ve[0].r),T.s.r=Math.min(T.s.r,ve[0].r),T.e.c=Math.max(T.e.c,ve[0].c),T.s.c=Math.min(T.s.c,ve[0].c)),L.c||(L.c=[]),V={a:ve[1],t:Re.TxO.t},L.c.push(V)}break;case 2173:update_xfext(ce[ve.ixfe],ve.ext);break;case 125:{if(!ae.cellStyles)break;for(;ve.e>=ve.s;)J[ve.e--]={width:ve.w/256,level:ve.level||0,hidden:!!(ve.flags&1)},se||(se=!0,find_mdw_colw(ve.w/256)),process_col(J[ve.e+1])}break;case 520:{var be={};ve.level!=null&&(te[ve.r]=be,be.level=ve.level),ve.hidden&&(te[ve.r]=be,be.hidden=!0),ve.hpt&&(te[ve.r]=be,be.hpt=ve.hpt,be.hpx=pt2px(ve.hpt))}break;case 38:case 39:case 40:case 41:S["!margins"]||default_margins(S["!margins"]={}),S["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[xe]]=ve;break;case 161:S["!margins"]||default_margins(S["!margins"]={}),S["!margins"].header=ve.header,S["!margins"].footer=ve.footer;break;case 574:ve.RTL&&(Y.Views[0].RTL=!0);break;case 146:ne=ve;break;case 2198:X=ve;break;case 140:re=ve;break;case 442:I?fe.CodeName=ve||fe.name:Y.WBProps.CodeName=ve||"ThisWorkbook";break}}else ye||console.error("Missing Info for XLS Record 0x"+xe.toString(16)),n.l+=Ee}return x.SheetNames=keys$1(C).sort(function(Ae,Le){return Number(Ae)-Number(Le)}).map(function(Ae){return C[Ae].name}),_.bookSheets||(x.Sheets=E),!x.SheetNames.length&&M["!ref"]?(x.SheetNames.push("Sheet1"),x.Sheets&&(x.Sheets.Sheet1=M)):x.Preamble=M,x.Sheets&&pe.forEach(function(Ae,Le){x.Sheets[x.SheetNames[Le]]["!autofilter"]=Ae}),x.Strings=B,x.SSF=dup(table_fmt),ae.enc&&(x.Encryption=ae.enc),X&&(x.Themes=X),x.Metadata={},re!==void 0&&(x.Metadata.Country=re),oe.names.length>0&&(Y.Names=oe.names),x.Workbook=Y,x}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(n,_,x){var E=CFB.find(n,"/!DocumentSummaryInformation");if(E&&E.size>0)try{var S=parse_PropertySetStream(E,DocSummaryPIDDSI,PSCLSID.DSI);for(var C in S)_[C]=S[C]}catch(I){if(x.WTF)throw I}var T=CFB.find(n,"/!SummaryInformation");if(T&&T.size>0)try{var A=parse_PropertySetStream(T,SummaryPIDSI,PSCLSID.SI);for(var B in A)_[B]==null&&(_[B]=A[B])}catch(I){if(x.WTF)throw I}_.HeadingPairs&&_.TitlesOfParts&&(load_props_pairs(_.HeadingPairs,_.TitlesOfParts,_,x),delete _.HeadingPairs,delete _.TitlesOfParts)}function write_xls_props(n,_){var x=[],E=[],S=[],C=0,T,A=evert_key(DocSummaryPIDDSI,"n"),B=evert_key(SummaryPIDSI,"n");if(n.Props)for(T=keys$1(n.Props),C=0;C<T.length;++C)(Object.prototype.hasOwnProperty.call(A,T[C])?x:Object.prototype.hasOwnProperty.call(B,T[C])?E:S).push([T[C],n.Props[T[C]]]);if(n.Custprops)for(T=keys$1(n.Custprops),C=0;C<T.length;++C)Object.prototype.hasOwnProperty.call(n.Props||{},T[C])||(Object.prototype.hasOwnProperty.call(A,T[C])?x:Object.prototype.hasOwnProperty.call(B,T[C])?E:S).push([T[C],n.Custprops[T[C]]]);var I=[];for(C=0;C<S.length;++C)XLSPSSkip.indexOf(S[C][0])>-1||PseudoPropsPairs.indexOf(S[C][0])>-1||S[C][1]!=null&&I.push(S[C]);E.length&&CFB.utils.cfb_add(_,"/SummaryInformation",write_PropertySetStream(E,PSCLSID.SI,B,SummaryPIDSI)),(x.length||I.length)&&CFB.utils.cfb_add(_,"/DocumentSummaryInformation",write_PropertySetStream(x,PSCLSID.DSI,A,DocSummaryPIDDSI,I.length?I:null,PSCLSID.UDI))}function parse_xlscfb(n,_){_||(_={}),fix_read_opts(_),reset_cp(),_.codepage&&set_ansi(_.codepage);var x,E;if(n.FullPaths){if(CFB.find(n,"/encryption"))throw new Error("File is password-protected");x=CFB.find(n,"!CompObj"),E=CFB.find(n,"/Workbook")||CFB.find(n,"/Book")}else{switch(_.type){case"base64":n=s2a(Base64_decode(n));break;case"binary":n=s2a(n);break;case"buffer":break;case"array":Array.isArray(n)||(n=Array.prototype.slice.call(n));break}prep_blob(n,0),E={content:n}}var S,C;if(x&&parse_compobj(x),_.bookProps&&!_.bookSheets)S={};else{var T=has_buf?"buffer":"array";if(E&&E.content)S=parse_workbook(E.content,_);else if((C=CFB.find(n,"PerfectOffice_MAIN"))&&C.content)S=WK_.to_workbook(C.content,(_.type=T,_));else if((C=CFB.find(n,"NativeContent_MAIN"))&&C.content)S=WK_.to_workbook(C.content,(_.type=T,_));else throw(C=CFB.find(n,"MN0"))&&C.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");_.bookVBA&&n.FullPaths&&CFB.find(n,"/_VBA_PROJECT_CUR/VBA/dir")&&(S.vbaraw=make_vba_xls(n))}var A={};return n.FullPaths&&parse_xls_props(n,A,_),S.Props=S.Custprops=A,_.bookFiles&&(S.cfb=n),S}function write_xlscfb(n,_){var x=_||{},E=CFB.utils.cfb_new({root:"R"}),S="/Workbook";switch(x.bookType||"xls"){case"xls":x.bookType="biff8";case"xla":x.bookType||(x.bookType="xla");case"biff8":S="/Workbook",x.biff=8;break;case"biff5":S="/Book",x.biff=5;break;default:throw new Error("invalid type "+x.bookType+" for XLS CFB")}return CFB.utils.cfb_add(E,S,write_biff_buf(n,x)),x.biff==8&&(n.Props||n.Custprops)&&write_xls_props(n,E),x.biff==8&&n.vbaraw&&fill_vba_xls(E,CFB.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),E}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(n,_,x,E){var S=_;if(!isNaN(S)){var C=E||(x||[]).length||0,T=n.next(4);T.write_shift(2,S),T.write_shift(2,C),C>0&&is_buf(x)&&n.push(x)}}function write_biff_continue(n,_,x,E){var S=E||(x||[]).length||0;if(S<=8224)return write_biff_rec(n,_,x,S);var C=_;if(!isNaN(C)){for(var T=x.parts||[],A=0,B=0,I=0;I+(T[A]||8224)<=8224;)I+=T[A]||8224,A++;var M=n.next(4);for(M.write_shift(2,C),M.write_shift(2,I),n.push(x.slice(B,B+I)),B+=I;B<S;){for(M=n.next(4),M.write_shift(2,60),I=0;I+(T[A]||8224)<=8224;)I+=T[A]||8224,A++;M.write_shift(2,I),n.push(x.slice(B,B+I)),B+=I}}}function write_BIFF2Cell(n,_,x){return n||(n=new_buf(7)),n.write_shift(2,_),n.write_shift(2,x),n.write_shift(2,0),n.write_shift(1,0),n}function write_BIFF2BERR(n,_,x,E){var S=new_buf(9);return write_BIFF2Cell(S,n,_),write_Bes(x,E||"b",S),S}function write_BIFF2LABEL(n,_,x){var E=new_buf(8+2*x.length);return write_BIFF2Cell(E,n,_),E.write_shift(1,x.length),E.write_shift(x.length,x,"sbcs"),E.l<E.length?E.slice(0,E.l):E}function write_ws_biff2_cell(n,_,x,E){if(_.v!=null)switch(_.t){case"d":case"n":var S=_.t=="d"?datenum(parseDate(_.v)):_.v;S==(S|0)&&S>=0&&S<65536?write_biff_rec(n,2,write_BIFF2INT(x,E,S)):write_biff_rec(n,3,write_BIFF2NUM(x,E,S));return;case"b":case"e":write_biff_rec(n,5,write_BIFF2BERR(x,E,_.v,_.t));return;case"s":case"str":write_biff_rec(n,4,write_BIFF2LABEL(x,E,_.v==null?"":String(_.v).slice(0,255)));return}write_biff_rec(n,1,write_BIFF2Cell(null,x,E))}function write_ws_biff2(n,_,x,E){var S=_["!data"]!=null,C=safe_decode_range(_["!ref"]||"A1"),T="",A=[];if(C.e.c>255||C.e.r>16383){if(E.WTF)throw new Error("Range "+(_["!ref"]||"A1")+" exceeds format limit A1:IV16384");C.e.c=Math.min(C.e.c,255),C.e.r=Math.min(C.e.c,16383)}for(var B=[],I=C.s.c;I<=C.e.c;++I)A[I]=encode_col(I);for(var M=C.s.r;M<=C.e.r;++M)for(S&&(B=_["!data"][M]||[]),T=encode_row(M),I=C.s.c;I<=C.e.c;++I){var O=S?B[I]:_[A[I]+T];O&&write_ws_biff2_cell(n,O,M,I)}}function write_biff2_buf(n,_){for(var x=_||{},E=buf_array(),S=0,C=0;C<n.SheetNames.length;++C)n.SheetNames[C]==x.sheet&&(S=C);if(S==0&&x.sheet&&n.SheetNames[0]!=x.sheet)throw new Error("Sheet not found: "+x.sheet);return write_biff_rec(E,x.biff==4?1033:x.biff==3?521:9,write_BOF(n,16,x)),write_ws_biff2(E,n.Sheets[n.SheetNames[S]],S,x),write_biff_rec(E,10),E.end()}function write_FONTS_biff8(n,_,x){write_biff_rec(n,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},x))}function write_FMTS_biff8(n,_,x){_&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(E){for(var S=E[0];S<=E[1];++S)_[S]!=null&&write_biff_rec(n,1054,write_Format(S,_[S],x))})}function write_FEAT(n,_){var x=new_buf(19);x.write_shift(4,2151),x.write_shift(4,0),x.write_shift(4,0),x.write_shift(2,3),x.write_shift(1,1),x.write_shift(4,0),write_biff_rec(n,2151,x),x=new_buf(39),x.write_shift(4,2152),x.write_shift(4,0),x.write_shift(4,0),x.write_shift(2,3),x.write_shift(1,0),x.write_shift(4,0),x.write_shift(2,1),x.write_shift(4,4),x.write_shift(2,0),write_Ref8U(safe_decode_range(_["!ref"]||"A1"),x),x.write_shift(4,4),write_biff_rec(n,2152,x)}function write_CELLXFS_biff8(n,_){for(var x=0;x<16;++x)write_biff_rec(n,224,write_XF({numFmtId:0,style:!0},0,_));_.cellXfs.forEach(function(E){write_biff_rec(n,224,write_XF(E,0,_))})}function write_ws_biff8_hlinks(n,_){for(var x=0;x<_["!links"].length;++x){var E=_["!links"][x];write_biff_rec(n,440,write_HLink(E)),E[1].Tooltip&&write_biff_rec(n,2048,write_HLinkTooltip(E))}delete _["!links"]}function write_ws_cols_biff8(n,_){if(_){var x=0;_.forEach(function(E,S){++x<=256&&E&&write_biff_rec(n,125,write_ColInfo(col_obj_w(S,E),S))})}}function write_ws_biff8_cell(n,_,x,E,S){var C=16+get_cell_style(S.cellXfs,_,S);if(_.v==null&&!_.bf){write_biff_rec(n,513,write_XLSCell(x,E,C));return}if(_.bf)write_biff_rec(n,6,write_Formula(_,x,E,S,C));else switch(_.t){case"d":case"n":var T=_.t=="d"?datenum(parseDate(_.v)):_.v;write_biff_rec(n,515,write_Number(x,E,T,C));break;case"b":case"e":write_biff_rec(n,517,write_BoolErr(x,E,_.v,C,S,_.t));break;case"s":case"str":if(S.bookSST){var A=get_sst_id(S.Strings,_.v==null?"":String(_.v),S.revStrings);write_biff_rec(n,253,write_LabelSst(x,E,A,C))}else write_biff_rec(n,516,write_Label(x,E,(_.v==null?"":String(_.v)).slice(0,255),C,S));break;default:write_biff_rec(n,513,write_XLSCell(x,E,C))}}function write_ws_biff8(n,_,x){var E=buf_array(),S=x.SheetNames[n],C=x.Sheets[S]||{},T=(x||{}).Workbook||{},A=(T.Sheets||[])[n]||{},B=C["!data"]!=null,I=_.biff==8,M,O="",D=[],L=safe_decode_range(C["!ref"]||"A1"),V=I?65536:16384;if(L.e.c>255||L.e.r>=V){if(_.WTF)throw new Error("Range "+(C["!ref"]||"A1")+" exceeds format limit A1:IV16384");L.e.c=Math.min(L.e.c,255),L.e.r=Math.min(L.e.c,V-1)}write_biff_rec(E,2057,write_BOF(x,16,_)),write_biff_rec(E,13,writeuint16(1)),write_biff_rec(E,12,writeuint16(100)),write_biff_rec(E,15,writebool(!0)),write_biff_rec(E,17,writebool(!1)),write_biff_rec(E,16,write_Xnum(.001)),write_biff_rec(E,95,writebool(!0)),write_biff_rec(E,42,writebool(!1)),write_biff_rec(E,43,writebool(!1)),write_biff_rec(E,130,writeuint16(1)),write_biff_rec(E,128,write_Guts([0,0])),write_biff_rec(E,131,writebool(!1)),write_biff_rec(E,132,writebool(!1)),I&&write_ws_cols_biff8(E,C["!cols"]),write_biff_rec(E,512,write_Dimensions(L,_)),I&&(C["!links"]=[]);for(var U=[],q=[],H=L.s.c;H<=L.e.c;++H)D[H]=encode_col(H);for(var W=L.s.r;W<=L.e.r;++W)for(B&&(q=C["!data"][W]||[]),O=encode_row(W),H=L.s.c;H<=L.e.c;++H){M=D[H]+O;var Q=B?q[H]:C[M];Q&&(write_ws_biff8_cell(E,Q,W,H,_),I&&Q.l&&C["!links"].push([M,Q.l]),I&&Q.c&&U.push([M,Q.c]))}var re=A.CodeName||A.name||S;return I&&write_biff_rec(E,574,write_Window2((T.Views||[])[0])),I&&(C["!merges"]||[]).length&&write_biff_rec(E,229,write_MergeCells(C["!merges"])),I&&write_ws_biff8_hlinks(E,C),write_biff_rec(E,442,write_XLUnicodeString(re)),I&&write_FEAT(E,C),write_biff_rec(E,10),E.end()}function write_biff8_global(n,_,x){var E=buf_array(),S=(n||{}).Workbook||{},C=S.Sheets||[],T=S.WBProps||{},A=x.biff==8,B=x.biff==5;if(write_biff_rec(E,2057,write_BOF(n,5,x)),x.bookType=="xla"&&write_biff_rec(E,135),write_biff_rec(E,225,A?writeuint16(1200):null),write_biff_rec(E,193,writezeroes(2)),B&&write_biff_rec(E,191),B&&write_biff_rec(E,192),write_biff_rec(E,226),write_biff_rec(E,92,write_WriteAccess("SheetJS",x)),write_biff_rec(E,66,writeuint16(A?1200:1252)),A&&write_biff_rec(E,353,writeuint16(0)),A&&write_biff_rec(E,448),write_biff_rec(E,317,write_RRTabId(n.SheetNames.length)),A&&n.vbaraw&&write_biff_rec(E,211),A&&n.vbaraw){var I=T.CodeName||"ThisWorkbook";write_biff_rec(E,442,write_XLUnicodeString(I))}write_biff_rec(E,156,writeuint16(17)),write_biff_rec(E,25,writebool(!1)),write_biff_rec(E,18,writebool(!1)),write_biff_rec(E,19,writeuint16(0)),A&&write_biff_rec(E,431,writebool(!1)),A&&write_biff_rec(E,444,writeuint16(0)),write_biff_rec(E,61,write_Window1()),write_biff_rec(E,64,writebool(!1)),write_biff_rec(E,141,writeuint16(0)),write_biff_rec(E,34,writebool(safe1904(n)=="true")),write_biff_rec(E,14,writebool(!0)),A&&write_biff_rec(E,439,writebool(!1)),write_biff_rec(E,218,writeuint16(0)),write_FONTS_biff8(E,n,x),write_FMTS_biff8(E,n.SSF,x),write_CELLXFS_biff8(E,x),A&&write_biff_rec(E,352,writebool(!1));var M=E.end(),O=buf_array();A&&write_biff_rec(O,140,write_Country()),A&&x.Strings&&write_biff_continue(O,252,write_SST(x.Strings)),write_biff_rec(O,10);var D=O.end(),L=buf_array(),V=0,U=0;for(U=0;U<n.SheetNames.length;++U)V+=(A?12:11)+(A?2:1)*n.SheetNames[U].length;var q=M.length+V+D.length;for(U=0;U<n.SheetNames.length;++U){var H=C[U]||{};write_biff_rec(L,133,write_BoundSheet8({pos:q,hs:H.Hidden||0,dt:0,name:n.SheetNames[U]},x)),q+=_[U].length}var W=L.end();if(V!=W.length)throw new Error("BS8 "+V+" != "+W.length);var Q=[];return M.length&&Q.push(M),W.length&&Q.push(W),D.length&&Q.push(D),bconcat(Q)}function write_biff8_buf(n,_){var x=_||{},E=[];n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),x.revssf=evert_num(n.SSF),x.revssf[n.SSF[65535]]=0,x.ssf=n.SSF),x.Strings=[],x.Strings.Count=0,x.Strings.Unique=0,fix_write_opts(x),x.cellXfs=[],get_cell_style(x.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var S=0;S<n.SheetNames.length;++S)E[E.length]=write_ws_biff8(S,x,n);return E.unshift(write_biff8_global(n,E,x)),bconcat(E)}function write_biff_buf(n,_){for(var x=0;x<=n.SheetNames.length;++x){var E=n.Sheets[n.SheetNames[x]];if(!(!E||!E["!ref"])){var S=decode_range(E["!ref"]);S.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[x]+"' extends beyond column IV (255).  Data may be lost.")}}var C=_||{};switch(C.biff||2){case 8:case 5:return write_biff8_buf(n,_);case 4:case 3:case 2:return write_biff2_buf(n,_)}throw new Error("invalid type "+C.bookType+" for BIFF")}function html_to_sheet(n,_){var x=_||{},E=x.dense!=null?x.dense:DENSE,S={};E&&(S["!data"]=[]),n=n.replace(/<!--.*?-->/g,"");var C=n.match(/<table/i);if(!C)throw new Error("Invalid HTML: could not find <table>");var T=n.match(/<\/table/i),A=C.index,B=T&&T.index||n.length,I=split_regex(n.slice(A,B),/(:?<tr[^>]*>)/i,"<tr>"),M=-1,O=0,D=0,L=0,V={s:{r:1e7,c:1e7},e:{r:0,c:0}},U=[];for(A=0;A<I.length;++A){var q=I[A].trim(),H=q.slice(0,3).toLowerCase();if(H=="<tr"){if(++M,x.sheetRows&&x.sheetRows<=M){--M;break}O=0;continue}if(!(H!="<td"&&H!="<th")){var W=q.split(/<\/t[dh]>/i);for(B=0;B<W.length;++B){var Q=W[B].trim();if(Q.match(/<t[dh]/i)){for(var re=Q,ce=0;re.charAt(0)=="<"&&(ce=re.indexOf(">"))>-1;)re=re.slice(ce+1);for(var ne=0;ne<U.length;++ne){var Y=U[ne];Y.s.c==O&&Y.s.r<M&&M<=Y.e.r&&(O=Y.e.c+1,ne=-1)}var fe=parsexmltag(Q.slice(0,Q.indexOf(">")));L=fe.colspan?+fe.colspan:1,((D=+fe.rowspan)>1||L>1)&&U.push({s:{r:M,c:O},e:{r:M+(D||1)-1,c:O+L-1}});var ge=fe.t||fe["data-t"]||"";if(!re.length){O+=L;continue}if(re=htmldecode(re),V.s.r>M&&(V.s.r=M),V.e.r<M&&(V.e.r=M),V.s.c>O&&(V.s.c=O),V.e.c<O&&(V.e.c=O),!re.length){O+=L;continue}var $e={t:"s",v:re};x.raw||!re.trim().length||ge=="s"||(re==="TRUE"?$e={t:"b",v:!0}:re==="FALSE"?$e={t:"b",v:!1}:isNaN(fuzzynum(re))?isNaN(fuzzydate(re).getDate())||($e={t:"d",v:parseDate(re)},x.cellDates||($e={t:"n",v:datenum($e.v)}),$e.z=x.dateNF||table_fmt[14]):$e={t:"n",v:fuzzynum(re)}),E?(S["!data"][M]||(S["!data"][M]=[]),S["!data"][M][O]=$e):S[encode_cell({r:M,c:O})]=$e,O+=L}}}}return S["!ref"]=encode_range(V),U.length&&(S["!merges"]=U),S}function make_html_row(n,_,x,E){for(var S=n["!merges"]||[],C=[],T={},A=n["!data"]!=null,B=_.s.c;B<=_.e.c;++B){for(var I=0,M=0,O=0;O<S.length;++O)if(!(S[O].s.r>x||S[O].s.c>B)&&!(S[O].e.r<x||S[O].e.c<B)){if(S[O].s.r<x||S[O].s.c<B){I=-1;break}I=S[O].e.r-S[O].s.r+1,M=S[O].e.c-S[O].s.c+1;break}if(!(I<0)){var D=encode_col(B)+encode_row(x),L=A?(n["!data"][x]||[])[B]:n[D],V=L&&L.v!=null&&(L.h||escapehtml(L.w||(format_cell(L),L.w)||""))||"";T={},I>1&&(T.rowspan=I),M>1&&(T.colspan=M),E.editable?V='<span contenteditable="true">'+V+"</span>":L&&(T["data-t"]=L&&L.t||"z",L.v!=null&&(T["data-v"]=L.v),L.z!=null&&(T["data-z"]=L.z),L.l&&(L.l.Target||"#").charAt(0)!="#"&&(V='<a href="'+L.l.Target+'">'+V+"</a>")),T.id=(E.id||"sjs")+"-"+D,C.push(writextag("td",V,T))}}var U="<tr>";return U+C.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(n,_){var x=n.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!x||x.length==0)throw new Error("Invalid HTML: could not find <table>");if(x.length==1){var E=sheet_to_workbook(html_to_sheet(x[0],_),_);return E.bookType="html",E}var S=book_new();return x.forEach(function(C,T){book_append_sheet(S,html_to_sheet(C,_),"Sheet"+(T+1))}),S.bookType="html",S}function make_html_preamble(n,_,x){var E=[];return E.join("")+"<table"+(x&&x.id?' id="'+x.id+'"':"")+">"}function sheet_to_html(n,_){var x=_||{},E=x.header!=null?x.header:HTML_BEGIN,S=x.footer!=null?x.footer:HTML_END,C=[E],T=decode_range(n["!ref"]);C.push(make_html_preamble(n,T,x));for(var A=T.s.r;A<=T.e.r;++A)C.push(make_html_row(n,T,A,x));return C.push("</table>"+S),C.join("")}function sheet_add_dom(n,_,x){var E=_.rows;if(!E)throw"Unsupported origin when "+_.tagName+" is not a TABLE";var S=x||{},C=n["!data"]!=null,T=0,A=0;if(S.origin!=null)if(typeof S.origin=="number")T=S.origin;else{var B=typeof S.origin=="string"?decode_cell(S.origin):S.origin;T=B.r,A=B.c}var I=Math.min(S.sheetRows||1e7,E.length),M={s:{r:0,c:0},e:{r:T,c:A}};if(n["!ref"]){var O=decode_range(n["!ref"]);M.s.r=Math.min(M.s.r,O.s.r),M.s.c=Math.min(M.s.c,O.s.c),M.e.r=Math.max(M.e.r,O.e.r),M.e.c=Math.max(M.e.c,O.e.c),T==-1&&(M.e.r=T=O.e.r+1)}var D=[],L=0,V=n["!rows"]||(n["!rows"]=[]),U=0,q=0,H=0,W=0,Q=0,re=0;for(n["!cols"]||(n["!cols"]=[]);U<E.length&&q<I;++U){var ce=E[U];if(is_dom_element_hidden(ce)){if(S.display)continue;V[q]={hidden:!0}}var ne=ce.cells;for(H=W=0;H<ne.length;++H){var Y=ne[H];if(!(S.display&&is_dom_element_hidden(Y))){var fe=Y.hasAttribute("data-v")?Y.getAttribute("data-v"):Y.hasAttribute("v")?Y.getAttribute("v"):htmldecode(Y.innerHTML),ge=Y.getAttribute("data-z")||Y.getAttribute("z");for(L=0;L<D.length;++L){var $e=D[L];$e.s.c==W+A&&$e.s.r<q+T&&q+T<=$e.e.r&&(W=$e.e.c+1-A,L=-1)}re=+Y.getAttribute("colspan")||1,((Q=+Y.getAttribute("rowspan")||1)>1||re>1)&&D.push({s:{r:q+T,c:W+A},e:{r:q+T+(Q||1)-1,c:W+A+(re||1)-1}});var _e={t:"s",v:fe},ae=Y.getAttribute("data-t")||Y.getAttribute("t")||"";fe!=null&&(fe.length==0?_e.t=ae||"z":S.raw||fe.trim().length==0||ae=="s"||(fe==="TRUE"?_e={t:"b",v:!0}:fe==="FALSE"?_e={t:"b",v:!1}:isNaN(fuzzynum(fe))?isNaN(fuzzydate(fe).getDate())||(_e={t:"d",v:parseDate(fe)},S.cellDates||(_e={t:"n",v:datenum(_e.v)}),_e.z=S.dateNF||table_fmt[14]):_e={t:"n",v:fuzzynum(fe)})),_e.z===void 0&&ge!=null&&(_e.z=ge);var X="",F=Y.getElementsByTagName("A");if(F&&F.length)for(var z=0;z<F.length&&!(F[z].hasAttribute("href")&&(X=F[z].getAttribute("href"),X.charAt(0)!="#"));++z);X&&X.charAt(0)!="#"&&X.slice(0,11).toLowerCase()!="javascript:"&&(_e.l={Target:X}),C?(n["!data"][q+T]||(n["!data"][q+T]=[]),n["!data"][q+T][W+A]=_e):n[encode_cell({c:W+A,r:q+T})]=_e,M.e.c<W+A&&(M.e.c=W+A),W+=re}}++q}return D.length&&(n["!merges"]=(n["!merges"]||[]).concat(D)),M.e.r=Math.max(M.e.r,q-1+T),n["!ref"]=encode_range(M),q>=I&&(n["!fullref"]=encode_range((M.e.r=E.length-U+q-1+T,M))),n}function parse_dom_table(n,_){var x=_||{},E={};return x.dense&&(E["!data"]=[]),sheet_add_dom(E,n,_)}function table_to_book(n,_){var x=sheet_to_workbook(parse_dom_table(n,_),_);return x}function is_dom_element_hidden(n){var _="",x=get_get_computed_style_function(n);return x&&(_=x(n).getPropertyValue("display")),_||(_=n.style&&n.style.display),_==="none"}function get_get_computed_style_function(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(n){var _=n.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(E,S){return Array(parseInt(S,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),x=unescapexml(_.replace(/<[^>]*>/g,""));return[x]}function parse_ods_styles(n,_,x){var E=x||{},S=xlml_normalize(n);xlmlregex.lastIndex=0,S=S.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var C,T,A="",B="",I,M=0,O=-1,D="";C=xlmlregex.exec(S);)switch(C[3]=C[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":C[1]==="/"?(T["truncate-on-overflow"]=="false"&&(A.match(/h/)?A=A.replace(/h+/,"[$&]"):A.match(/m/)?A=A.replace(/m+/,"[$&]"):A.match(/s/)&&(A=A.replace(/s+/,"[$&]"))),E[T.name]=A,A=""):C[0].charAt(C[0].length-2)!=="/"&&(A="",T=parsexmltag(C[0],!1));break;case"boolean-style":C[1]==="/"?(E[T.name]="General",A=""):C[0].charAt(C[0].length-2)!=="/"&&(A="",T=parsexmltag(C[0],!1));break;case"boolean":A+="General";break;case"text":C[1]==="/"?(D=S.slice(O,xlmlregex.lastIndex-C[0].length),D=="%"&&T[0]=="<number:percentage-style"?A+="%":A+='"'+D.replace(/"/g,'""')+'"'):C[0].charAt(C[0].length-2)!=="/"&&(O=xlmlregex.lastIndex);break;case"day":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="d";break;case"long":A+="dd";break;default:A+="dd";break}break;case"day-of-week":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="ddd";break;case"long":A+="dddd";break;default:A+="ddd";break}break;case"era":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="ee";break;case"long":A+="eeee";break;default:A+="eeee";break}break;case"hours":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="h";break;case"long":A+="hh";break;default:A+="hh";break}break;case"minutes":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="m";break;case"long":A+="mm";break;default:A+="mm";break}break;case"month":switch(I=parsexmltag(C[0],!1),I.textual&&(A+="mm"),I.style){case"short":A+="m";break;case"long":A+="mm";break;default:A+="m";break}break;case"seconds":{switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="s";break;case"long":A+="ss";break;default:A+="ss";break}I["decimal-places"]&&(A+="."+fill("0",+I["decimal-places"]))}break;case"year":switch(I=parsexmltag(C[0],!1),I.style){case"short":A+="yy";break;case"long":A+="yyyy";break;default:A+="yy";break}break;case"am-pm":A+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+C[3]);break;case"fill-character":C[1]==="/"?(D=S.slice(O,xlmlregex.lastIndex-C[0].length),A+='"'+D.replace(/"/g,'""')+'"*'):C[0].charAt(C[0].length-2)!=="/"&&(O=xlmlregex.lastIndex);break;case"scientific-number":I=parsexmltag(C[0],!1),A+="0."+fill("0",+I["min-decimal-places"]||+I["decimal-places"]||2)+fill("?",+I["decimal-places"]-+I["min-decimal-places"]||0)+"E"+(parsexmlbool(I["forced-exponent-sign"])?"+":"")+fill("0",+I["min-exponent-digits"]||2);break;case"fraction":I=parsexmltag(C[0],!1),+I["min-integer-digits"]?A+=fill("0",+I["min-integer-digits"]):A+="#",A+=" ",A+=fill("?",+I["min-numerator-digits"]||1),A+="/",+I["denominator-value"]?A+=I["denominator-value"]:A+=fill("?",+I["min-denominator-digits"]||1);break;case"currency-symbol":C[1]==="/"?A+='"'+S.slice(O,xlmlregex.lastIndex-C[0].length).replace(/"/g,'""')+'"':C[0].charAt(C[0].length-2)!=="/"?O=xlmlregex.lastIndex:A+="$";break;case"text-properties":switch(I=parsexmltag(C[0],!1),(I.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":A="[Red]"+A;break}break;case"text-content":A+="@";break;case"map":I=parsexmltag(C[0],!1),unescapexml(I.condition)=="value()>=0"?A=E[I["apply-style-name"]]+";"+A:console.error("ODS number format may be incorrect: "+I.condition);break;case"number":if(C[1]==="/")break;I=parsexmltag(C[0],!1),B="",B+=fill("0",+I["min-integer-digits"]||1),parsexmlbool(I.grouping)&&(B=commaify(fill("#",Math.max(0,4-B.length))+B)),(+I["min-decimal-places"]||+I["decimal-places"])&&(B+="."),+I["min-decimal-places"]&&(B+=fill("0",+I["min-decimal-places"]||1)),+I["decimal-places"]-(+I["min-decimal-places"]||0)&&(B+=fill("0",+I["decimal-places"]-(+I["min-decimal-places"]||0))),A+=B;break;case"embedded-text":C[1]==="/"?M==0?A+='"'+S.slice(O,xlmlregex.lastIndex-C[0].length).replace(/"/g,'""')+'"':A=A.slice(0,M)+'"'+S.slice(O,xlmlregex.lastIndex-C[0].length).replace(/"/g,'""')+'"'+A.slice(M):C[0].charAt(C[0].length-2)!=="/"&&(O=xlmlregex.lastIndex,M=-+parsexmltag(C[0],!1).position||0);break}return E}function parse_content_xml(n,_,x){var E=_||{},S=xlml_normalize(n),C=[],T,A,B,I="",M=0,O,D,L={},V=[],U={};E.dense&&(U["!data"]=[]);var q,H,W={value:""},Q="",re=0,ce=[],ne=-1,Y=-1,fe={s:{r:1e6,c:1e7},e:{r:0,c:0}},ge=0,$e=x||{},_e={},ae=[],X={},F=0,z=0,J=[],te=1,se=1,oe=[],ie={Names:[],WBProps:{}},G={},j=["",""],ee=[],pe={},he="",Se=0,we=!1,xe=!1,Ee=0,ye=0;for(xlmlregex.lastIndex=0,S=S.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");q=xlmlregex.exec(S);)switch(q[3]=q[3].replace(/_.*$/,"")){case"table":case"":q[1]==="/"?(fe.e.c>=fe.s.c&&fe.e.r>=fe.s.r?U["!ref"]=encode_range(fe):U["!ref"]="A1:A1",E.sheetRows>0&&E.sheetRows<=fe.e.r&&(U["!fullref"]=U["!ref"],fe.e.r=E.sheetRows-1,U["!ref"]=encode_range(fe)),ae.length&&(U["!merges"]=ae),J.length&&(U["!rows"]=J),O.name=O.||O.name,typeof JSON<"u"&&JSON.stringify(O),V.push(O.name),L[O.name]=U,xe=!1):q[0].charAt(q[0].length-2)!=="/"&&(O=parsexmltag(q[0],!1),ne=Y=-1,fe.s.r=fe.s.c=1e7,fe.e.r=fe.e.c=0,U={},E.dense&&(U["!data"]=[]),ae=[],J=[],xe=!0);break;case"table-row-group":q[1]==="/"?--ge:++ge;break;case"table-row":case"":if(q[1]==="/"){ne+=te,te=1;break}if(D=parsexmltag(q[0],!1),D.?ne=D.-1:ne==-1&&(ne=0),te=+D["number-rows-repeated"]||1,te<10)for(Ee=0;Ee<te;++Ee)ge>0&&(J[ne+Ee]={level:ge});Y=-1;break;case"covered-table-cell":q[1]!=="/"&&++Y,E.sheetStubs&&(E.dense?(U["!data"][ne]||(U["!data"][ne]=[]),U["!data"][ne][Y]={t:"z"}):U[encode_cell({r:ne,c:Y})]={t:"z"}),Q="",ce=[];break;case"table-cell":case"":if(q[0].charAt(q[0].length-2)==="/")++Y,W=parsexmltag(q[0],!1),se=parseInt(W["number-columns-repeated"]||"1",10),H={t:"z",v:null},W.formula&&E.cellFormula!=!1&&(H.f=ods_to_csf_formula(unescapexml(W.formula))),W["style-name"]&&_e[W["style-name"]]&&(H.z=_e[W["style-name"]]),(W.||W["value-type"])=="string"&&(H.t="s",H.v=unescapexml(W["string-value"]||""),E.dense?(U["!data"][ne]||(U["!data"][ne]=[]),U["!data"][ne][Y]=H):U[encode_col(Y)+encode_row(ne)]=H),Y+=se-1;else if(q[1]!=="/"){++Y,Q="",re=0,ce=[],se=1;var Ce=te?ne+te-1:ne;if(Y>fe.e.c&&(fe.e.c=Y),Y<fe.s.c&&(fe.s.c=Y),ne<fe.s.r&&(fe.s.r=ne),Ce>fe.e.r&&(fe.e.r=Ce),W=parsexmltag(q[0],!1),ee=[],pe={},H={t:W.||W["value-type"],v:null},W["style-name"]&&_e[W["style-name"]]&&(H.z=_e[W["style-name"]]),E.cellFormula)if(W.formula&&(W.formula=unescapexml(W.formula)),W["number-matrix-columns-spanned"]&&W["number-matrix-rows-spanned"]&&(F=parseInt(W["number-matrix-rows-spanned"],10)||0,z=parseInt(W["number-matrix-columns-spanned"],10)||0,X={s:{r:ne,c:Y},e:{r:ne+F-1,c:Y+z-1}},H.F=encode_range(X),oe.push([X,H.F])),W.formula)H.f=ods_to_csf_formula(W.formula);else for(Ee=0;Ee<oe.length;++Ee)ne>=oe[Ee][0].s.r&&ne<=oe[Ee][0].e.r&&Y>=oe[Ee][0].s.c&&Y<=oe[Ee][0].e.c&&(H.F=oe[Ee][1]);switch((W["number-columns-spanned"]||W["number-rows-spanned"])&&(F=parseInt(W["number-rows-spanned"],10)||0,z=parseInt(W["number-columns-spanned"],10)||0,X={s:{r:ne,c:Y},e:{r:ne+F-1,c:Y+z-1}},ae.push(X)),W["number-columns-repeated"]&&(se=parseInt(W["number-columns-repeated"],10)),H.t){case"boolean":H.t="b",H.v=parsexmlbool(W["boolean-value"])||+W["boolean-value"]>=1;break;case"float":H.t="n",H.v=parseFloat(W.value);break;case"percentage":H.t="n",H.v=parseFloat(W.value);break;case"currency":H.t="n",H.v=parseFloat(W.value);break;case"date":H.t="d",H.v=parseDate(W["date-value"]),E.cellDates||(H.t="n",H.v=datenum(H.v,ie.WBProps.date1904)-ye),H.z||(H.z="m/d/yy");break;case"time":H.t="n",H.v=parse_isodur(W["time-value"])/86400,E.cellDates&&(H.t="d",H.v=numdate(H.v)),H.z||(H.z="HH:MM:SS");break;case"number":H.t="n",H.v=parseFloat(W.);break;default:if(H.t==="string"||H.t==="text"||!H.t)H.t="s",W["string-value"]!=null&&(Q=unescapexml(W["string-value"]),ce=[]);else throw new Error("Unsupported value type "+H.t)}}else{if(we=!1,H.t==="s"&&(H.v=Q||"",ce.length&&(H.R=ce),we=re==0),G.Target&&(H.l=G),ee.length>0&&(H.c=ee,ee=[]),Q&&E.cellText!==!1&&(H.w=Q),we&&(H.t="z",delete H.v),(!we||E.sheetStubs)&&!(E.sheetRows&&E.sheetRows<=ne))for(var ve=0;ve<te;++ve){if(se=parseInt(W["number-columns-repeated"]||"1",10),E.dense)for(U["!data"][ne+ve]||(U["!data"][ne+ve]=[]),U["!data"][ne+ve][Y]=ve==0?H:dup(H);--se>0;)U["!data"][ne+ve][Y+se]=dup(H);else for(U[encode_cell({r:ne+ve,c:Y})]=H;--se>0;)U[encode_cell({r:ne+ve,c:Y+se})]=dup(H);fe.e.c<=Y&&(fe.e.c=Y)}se=parseInt(W["number-columns-repeated"]||"1",10),Y+=se-1,se=0,H={},Q="",ce=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(q[1]==="/"){if((T=C.pop())[0]!==q[3])throw"Bad state: "+T}else q[0].charAt(q[0].length-2)!=="/"&&C.push([q[3],!0]);break;case"annotation":if(q[1]==="/"){if((T=C.pop())[0]!==q[3])throw"Bad state: "+T;pe.t=Q,ce.length&&(pe.R=ce),pe.a=he,ee.push(pe)}else q[0].charAt(q[0].length-2)!=="/"&&C.push([q[3],!1]);he="",Se=0,Q="",re=0,ce=[];break;case"creator":q[1]==="/"?he=S.slice(Se,q.index):Se=q.index+q[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(q[1]==="/"){if((T=C.pop())[0]!==q[3])throw"Bad state: "+T}else q[0].charAt(q[0].length-2)!=="/"&&C.push([q[3],!1]);Q="",re=0,ce=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(q[1]==="/"){var Be=xlmlregex.lastIndex;parse_ods_styles(S.slice(B,xlmlregex.lastIndex),_,$e),xlmlregex.lastIndex=Be}else q[0].charAt(q[0].length-2)!=="/"&&(B=xlmlregex.lastIndex-q[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var me=parsexmltag(q[0],!1);me.family=="table-cell"&&$e[me["data-style-name"]]&&(_e[me.name]=$e[me["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(q[0].slice(-2)==="/>")break;if(q[1]==="/")switch(C[C.length-1][0]){case"number-style":case"date-style":case"time-style":I+=S.slice(M,q.index);break}else M=q.index+q[0].length;break;case"named-range":A=parsexmltag(q[0],!1),j=ods_to_csf_3D(A["cell-range-address"]);var Ie={Name:A.name,Ref:j[0]+"!"+j[1]};xe&&(Ie.Sheet=V.length),ie.Names.push(Ie);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(A=parsexmltag(q[0],!1),A["date-value"]){case"1904-01-01":ie.WBProps.date1904=!0;case"1900-01-01":ye=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(C[C.length-1][0])>-1)break;if(q[1]==="/"&&(!W||!W["string-value"])){var Ve=parse_text_p(S.slice(re,q.index));Q=(Q.length>0?Q+`
`:"")+Ve[0]}else parsexmltag(q[0],!1),re=q.index+q[0].length;break;case"s":break;case"database-range":if(q[1]==="/")break;try{j=ods_to_csf_3D(parsexmltag(q[0])["target-range-address"]),L[j[0]]["!autofilter"]={ref:j[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(q[1]!=="/"){if(G=parsexmltag(q[0],!1),!G.href)break;G.Target=unescapexml(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(j=ods_to_csf_3D(G.Target.slice(1)),G.Target="#"+j[0]+"!"+j[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(q[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(E.WTF)throw new Error(q)}}var Me={Sheets:L,SheetNames:V,Workbook:ie};return E.bookSheets&&delete Me.Sheets,Me}function parse_ods(n,_){_=_||{},safegetzipfile(n,"META-INF/manifest.xml")&&parse_manifest(getzipdata(n,"META-INF/manifest.xml"),_);var x=getzipstr(n,"styles.xml"),E=x&&parse_ods_styles(utf8read(x)),S=getzipstr(n,"content.xml");if(!S)throw new Error("Missing content.xml in ODS / UOF file");var C=parse_content_xml(utf8read(S),_,E);return safegetzipfile(n,"meta.xml")&&(C.Props=parse_core_props(getzipdata(n,"meta.xml"))),C.bookType="ods",C}function parse_fods(n,_){var x=parse_content_xml(n,_);return x.bookType="fods",x}var write_styles_ods=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),_="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return XML_HEADER+_}}();function write_number_format_ods(n,_){var x="number",E="",S={"style:name":_},C="",T=0;n=n.replace(/"[$]"/g,"$");e:{if(n.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+n),n=n.slice(0,n.indexOf(";"))),n=="@"){x="text",E="<number:text-content/>";break e}if(n.indexOf(/\$/)>-1&&(x="currency"),n[T]=='"'){for(C="";n[++T]!='"'||n[++T]=='"';)C+=n[T];--T,n[T+1]=="*"?(T++,E+="<number:fill-character>"+escapexml(C.replace(/""/g,'"'))+"</number:fill-character>"):E+="<number:text>"+escapexml(C.replace(/""/g,'"'))+"</number:text>",n=n.slice(T+1),T=0}var A=n.match(/# (\?+)\/(\?+)/);if(A){E+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":A[1].length,"number:max-denominator-value":Math.max(+A[1].replace(/./g,"9"),+A[2].replace(/./g,"9"))});break e}if(A=n.match(/# (\?+)\/(\d+)/)){E+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":A[1].length,"number:denominator-value":+A[2]});break e}if(A=n.match(/(\d+)(|\.\d+)%/)){x="percentage",E+=writextag("number:number",null,{"number:decimal-places":A[2]&&A.length-1||0,"number:min-decimal-places":A[2]&&A.length-1||0,"number:min-integer-digits":A[1].length})+"<number:text>%</number:text>";break e}var B=!1;if(["y","m","d"].indexOf(n[0])>-1){x="date";t:for(;T<n.length;++T)switch(C=n[T].toLowerCase()){case"h":case"s":B=!0,--T;break t;case"m":r:for(var I=T+1;I<n.length;++I)switch(n[I]){case"y":case"d":break r;case"h":case"s":B=!0,--T;break t}case"y":case"d":for(;(n[++T]||"").toLowerCase()==C[0];)C+=C[0];switch(--T,C){case"y":case"yy":E+="<number:year/>";break;case"yyy":case"yyyy":E+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":E+='<number:month number:style="'+(C.length%2?"short":"long")+'" number:textual="'+(C.length>=3?"true":"false")+'"/>';break;case"d":case"dd":E+='<number:day number:style="'+(C.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":E+='<number:day-of-week number:style="'+(C.length%2?"short":"long")+'"/>';break}break;case'"':for(;n[++T]!='"'||n[++T]=='"';)C+=n[T];--T,E+="<number:text>"+escapexml(C.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":E+="<number:text>"+escapexml(C)+"</number:text>";break;default:console.error("unrecognized character "+C+" in ODF format "+n)}if(!B)break e;n=n.slice(T+1),T=0}if(n.match(/^\[?[hms]/)){for(x=="number"&&(x="time"),n.match(/\[/)&&(n=n.replace(/[\[\]]/g,""),S["number:truncate-on-overflow"]="false");T<n.length;++T)switch(C=n[T].toLowerCase()){case"h":case"m":case"s":for(;(n[++T]||"").toLowerCase()==C[0];)C+=C[0];switch(--T,C){case"h":case"hh":E+='<number:hours number:style="'+(C.length%2?"short":"long")+'"/>';break;case"m":case"mm":E+='<number:minutes number:style="'+(C.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(n[T+1]==".")do C+=n[T+1],++T;while(n[T+1]=="0");E+='<number:seconds number:style="'+(C.match("ss")?"long":"short")+'"'+(C.match(/\./)?' number:decimal-places="'+(C.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;n[++T]!='"'||n[++T]=='"';)C+=n[T];--T,E+="<number:text>"+escapexml(C.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":E+="<number:text>"+escapexml(C)+"</number:text>";break;case"a":if(n.slice(T,T+3).toLowerCase()=="a/p"){E+="<number:am-pm/>",T+=2;break}if(n.slice(T,T+5).toLowerCase()=="am/pm"){E+="<number:am-pm/>",T+=4;break}default:console.error("unrecognized character "+C+" in ODF format "+n)}break e}if(n.indexOf(/\$/)>-1&&(x="currency"),n[0]=="$"&&(E+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',n=n.slice(1),T=0),T=0,n[T]=='"'){for(;n[++T]!='"'||n[++T]=='"';)C+=n[T];--T,n[T+1]=="*"?(T++,E+="<number:fill-character>"+escapexml(C.replace(/""/g,'"'))+"</number:fill-character>"):E+="<number:text>"+escapexml(C.replace(/""/g,'"'))+"</number:text>",n=n.slice(T+1),T=0}var M=n.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!M||!M[0])console.error("Could not find numeric part of "+n);else{var O=M[1].replace(/,/g,"");E+="<number:"+(M[3]?"scientific-":"")+'number number:min-integer-digits="'+(O.indexOf("0")==-1?"0":O.length-O.indexOf("0"))+'"'+(M[0].indexOf(",")>-1?' number:grouping="true"':"")+(M[2]&&' number:decimal-places="'+(M[2].length-1)+'"'||' number:decimal-places="0"')+(M[3]&&M[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(M[3]?' number:min-exponent-digits="'+M[3].match(/0+/)[0].length+'"':"")+"></number:"+(M[3]?"scientific-":"")+"number>",T=M.index+M[0].length}if(n[T]=='"'){for(C="";n[++T]!='"'||n[++T]=='"';)C+=n[T];--T,E+="<number:text>"+escapexml(C.replace(/""/g,'"'))+"</number:text>"}}return E?writextag("number:"+x+"-style",E,S):(console.error("Could not generate ODS number format for |"+n+"|"),"")}function write_names_ods(n,_,x){var E=n.filter(function(S){return S.Sheet==(x==-1?null:x)});return E.length?`      <table:named-expressions>
`+E.map(function(S){var C=csf_to_ods_3D(S.Ref);return"        "+writextag("table:named-range",null,{"table:name":S.Name,"table:cell-range-address":C,"table:base-cell-address":C.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var n=function(C){return escapexml(C).replace(/  +/g,function(T){return'<text:s text:c="'+T.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},_=`          <table:table-cell />
`,x=`          <table:covered-table-cell/>
`,E=function(C,T,A,B,I){var M=[];M.push('      <table:table table:name="'+escapexml(T.SheetNames[A])+`" table:style-name="ta1">
`);var O=0,D=0,L=decode_range(C["!ref"]||"A1"),V=C["!merges"]||[],U=0,q=C["!data"]!=null;if(C["!cols"])for(D=0;D<=L.e.c;++D)M.push("        <table:table-column"+(C["!cols"][D]?' table:style-name="co'+C["!cols"][D].ods+'"':"")+`></table:table-column>
`);var H="",W=C["!rows"]||[];for(O=0;O<L.s.r;++O)H=W[O]?' table:style-name="ro'+W[O].ods+'"':"",M.push("        <table:table-row"+H+`></table:table-row>
`);for(;O<=L.e.r;++O){for(H=W[O]?' table:style-name="ro'+W[O].ods+'"':"",M.push("        <table:table-row"+H+`>
`),D=0;D<L.s.c;++D)M.push(_);for(;D<=L.e.c;++D){var Q=!1,re={},ce="";for(U=0;U!=V.length;++U)if(!(V[U].s.c>D)&&!(V[U].s.r>O)&&!(V[U].e.c<D)&&!(V[U].e.r<O)){(V[U].s.c!=D||V[U].s.r!=O)&&(Q=!0),re["table:number-columns-spanned"]=V[U].e.c-V[U].s.c+1,re["table:number-rows-spanned"]=V[U].e.r-V[U].s.r+1;break}if(Q){M.push(x);continue}var ne=encode_cell({r:O,c:D}),Y=q?(C["!data"][O]||[])[D]:C[ne];if(Y&&Y.f&&(re["table:formula"]=escapexml(csf_to_ods_formula(Y.f)),Y.F&&Y.F.slice(0,ne.length)==ne)){var fe=decode_range(Y.F);re["table:number-matrix-columns-spanned"]=fe.e.c-fe.s.c+1,re["table:number-matrix-rows-spanned"]=fe.e.r-fe.s.r+1}if(!Y){M.push(_);continue}switch(Y.t){case"b":ce=Y.v?"TRUE":"FALSE",re["office:value-type"]="boolean",re["office:boolean-value"]=Y.v?"true":"false";break;case"n":ce=Y.w||String(Y.v||0),re["office:value-type"]="float",re["office:value"]=Y.v||0;break;case"s":case"str":ce=Y.v==null?"":Y.v,re["office:value-type"]="string";break;case"d":ce=Y.w||parseDate(Y.v).toISOString(),re["office:value-type"]="date",re["office:date-value"]=parseDate(Y.v).toISOString(),re["table:style-name"]="ce1";break;default:M.push(_);continue}var ge=n(ce);if(Y.l&&Y.l.Target){var $e=Y.l.Target;$e=$e.charAt(0)=="#"?"#"+csf_to_ods_3D($e.slice(1)):$e,$e.charAt(0)!="#"&&!$e.match(/^\w+:/)&&($e="../"+$e),ge=writextag("text:a",ge,{"xlink:href":$e.replace(/&/g,"&amp;")})}I[Y.z]&&(re["table:style-name"]="ce"+I[Y.z].slice(1)),M.push("          "+writextag("table:table-cell",writextag("text:p",ge,{}),re)+`
`)}M.push(`        </table:table-row>
`)}return(T.Workbook||{}).Names&&M.push(write_names_ods(T.Workbook.Names,T.SheetNames,A)),M.push(`      </table:table>
`),M.join("")},S=function(C,T){C.push(` <office:automatic-styles>
`);var A=0;T.SheetNames.map(function(O){return T.Sheets[O]}).forEach(function(O){if(O&&O["!cols"]){for(var D=0;D<O["!cols"].length;++D)if(O["!cols"][D]){var L=O["!cols"][D];if(L.width==null&&L.wpx==null&&L.wch==null)continue;process_col(L),L.ods=A;var V=O["!cols"][D].wpx+"px";C.push('  <style:style style:name="co'+A+`" style:family="table-column">
`),C.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+V+`"/>
`),C.push(`  </style:style>
`),++A}}});var B=0;T.SheetNames.map(function(O){return T.Sheets[O]}).forEach(function(O){if(O&&O["!rows"]){for(var D=0;D<O["!rows"].length;++D)if(O["!rows"][D]){O["!rows"][D].ods=B;var L=O["!rows"][D].hpx+"px";C.push('  <style:style style:name="ro'+B+`" style:family="table-row">
`),C.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+L+`"/>
`),C.push(`  </style:style>
`),++B}}}),C.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),C.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),C.push(`  </style:style>
`),C.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),C.push(`   <number:month number:style="long"/>
`),C.push(`   <number:text>/</number:text>
`),C.push(`   <number:day number:style="long"/>
`),C.push(`   <number:text>/</number:text>
`),C.push(`   <number:year/>
`),C.push(`  </number:date-style>
`);var I={},M=69;return T.SheetNames.map(function(O){return T.Sheets[O]}).forEach(function(O){if(O)for(var D=O["!data"]!=null,L=decode_range(O["!ref"]),V=0;V<=L.e.r;++V)for(var U=0;U<=L.e.c;++U){var q=D?(O["!data"][V]||[])[U]:O[encode_cell({r:V,c:U})];if(!(!q||!q.z||q.z.toLowerCase()=="general")&&!I[q.z]){var H=write_number_format_ods(q.z,"N"+M);H&&(I[q.z]="N"+M,++M,C.push(H+`
`))}}}),C.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys$1(I).forEach(function(O){C.push('<style:style style:name="ce'+I[O].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+I[O]+`"/>
`)}),C.push(` </office:automatic-styles>
`),I};return function(T,A){var B=[XML_HEADER],I=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),M=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});A.bookType=="fods"?(B.push("<office:document"+I+M+`>
`),B.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):B.push("<office:document-content"+I+`>
`);var O=S(B,T);B.push(`  <office:body>
`),B.push(`    <office:spreadsheet>
`),((T.Workbook||{}).WBProps||{}).date1904&&B.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var D=0;D!=T.SheetNames.length;++D)B.push(E(T.Sheets[T.SheetNames[D]],T,D,A,O));return(T.Workbook||{}).Names&&B.push(write_names_ods(T.Workbook.Names,T.SheetNames,-1)),B.push(`    </office:spreadsheet>
`),B.push(`  </office:body>
`),A.bookType=="fods"?B.push("</office:document>"):B.push("</office:document-content>"),B.join("")}}();function write_ods(n,_){if(_.bookType=="fods")return write_content_ods(n,_);var x=zip_new(),E="",S=[],C=[];return E="mimetype",zip_add_file(x,E,"application/vnd.oasis.opendocument.spreadsheet"),E="content.xml",zip_add_file(x,E,write_content_ods(n,_)),S.push([E,"text/xml"]),C.push([E,"ContentFile"]),E="styles.xml",zip_add_file(x,E,write_styles_ods(n,_)),S.push([E,"text/xml"]),C.push([E,"StylesFile"]),E="meta.xml",zip_add_file(x,E,XML_HEADER+write_meta_ods()),S.push([E,"text/xml"]),C.push([E,"MetadataFile"]),E="manifest.rdf",zip_add_file(x,E,write_rdf(C)),S.push([E,"application/rdf+xml"]),E="META-INF/manifest.xml",zip_add_file(x,E,write_manifest(S)),x}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function u8str(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):utf8read(a2s(n))}function stru8(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):s2a(utf8write(n))}function u8concat(n){for(var _=0,x=0;x<n.length;++x)_+=n[x].length;var E=new Uint8Array(_),S=0;for(x=0;x<n.length;++x){var C=n[x],T=C.length;if(T<250)for(var A=0;A<T;++A)E[S++]=C[A];else E.set(C,S),S+=T}return E}function popcnt(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),(n+(n>>4)&252645135)*16843009>>>24}function readDecimal128LE(n,_){for(var x=(n[_+15]&127)<<7|n[_+14]>>1,E=n[_+14]&1,S=_+13;S>=_;--S)E=E*256+n[S];return(n[_+15]&128?-E:E)*Math.pow(10,x-6176)}function writeDecimal128LE(n,_,x){var E=Math.floor(x==0?0:Math.LOG10E*Math.log(Math.abs(x)))+6176-16,S=x/Math.pow(10,E-6176);n[_+15]|=E>>7,n[_+14]|=(E&127)<<1;for(var C=0;S>=1;++C,S/=256)n[_+C]=S&255;n[_+15]|=x>=0?0:128}function parse_varint49(n,_){var x=_.l,E=n[x]&127;e:if(n[x++]>=128&&(E|=(n[x]&127)<<7,n[x++]<128||(E|=(n[x]&127)<<14,n[x++]<128)||(E|=(n[x]&127)<<21,n[x++]<128)||(E+=(n[x]&127)*Math.pow(2,28),++x,n[x++]<128)||(E+=(n[x]&127)*Math.pow(2,35),++x,n[x++]<128)||(E+=(n[x]&127)*Math.pow(2,42),++x,n[x++]<128)))break e;return _.l=x,E}function write_varint49(n){var _=new Uint8Array(7);_[0]=n&127;var x=1;e:if(n>127){if(_[x-1]|=128,_[x]=n>>7&127,++x,n<=16383||(_[x-1]|=128,_[x]=n>>14&127,++x,n<=2097151)||(_[x-1]|=128,_[x]=n>>21&127,++x,n<=268435455)||(_[x-1]|=128,_[x]=n/256>>>21&127,++x,n<=34359738367)||(_[x-1]|=128,_[x]=n/65536>>>21&127,++x,n<=4398046511103))break e;_[x-1]|=128,_[x]=n/16777216>>>21&127,++x}return _[subarray](0,x)}function parse_packed_varints(n){for(var _={l:0},x=[];_.l<n.length;)x.push(parse_varint49(n,_));return x}function write_packed_varints(n){return u8concat(n.map(function(_){return write_varint49(_)}))}function varint_to_i32(n){var _=0,x=n[_]&127;e:if(n[_++]>=128){if(x|=(n[_]&127)<<7,n[_++]<128||(x|=(n[_]&127)<<14,n[_++]<128)||(x|=(n[_]&127)<<21,n[_++]<128))break e;x|=(n[_]&127)<<28}return x}function parse_shallow(n){for(var _=[],x={l:0};x.l<n.length;){var E=x.l,S=parse_varint49(n,x),C=S&7;S=S/8|0;var T,A=x.l;switch(C){case 0:{for(;n[A++]>=128;);T=n[subarray](x.l,A),x.l=A}break;case 1:T=n[subarray](A,A+8),x.l=A+8;break;case 2:{var B=parse_varint49(n,x);T=n[subarray](x.l,x.l+B),x.l+=B}break;case 5:T=n[subarray](A,A+4),x.l=A+4;break;default:throw new Error("PB Type ".concat(C," for Field ").concat(S," at offset ").concat(E))}var I={data:T,type:C};_[S]==null&&(_[S]=[]),_[S].push(I)}return _}function write_shallow(n){var _=[];return n.forEach(function(x,E){E!=0&&x.forEach(function(S){S.data&&(_.push(write_varint49(E*8+S.type)),S.type==2&&_.push(write_varint49(S.data.length)),_.push(S.data))})}),u8concat(_)}function mappa(n,_){return n?.map(function(x){return _(x.data)})||[]}function parse_iwa_file(n){for(var _,x=[],E={l:0};E.l<n.length;){var S=parse_varint49(n,E),C=parse_shallow(n[subarray](E.l,E.l+S));E.l+=S;var T={id:varint_to_i32(C[1][0].data),messages:[]};C[2].forEach(function(A){var B=parse_shallow(A.data),I=varint_to_i32(B[3][0].data);T.messages.push({meta:B,data:n[subarray](E.l,E.l+I)}),E.l+=I}),(_=C[3])!=null&&_[0]&&(T.merge=varint_to_i32(C[3][0].data)>>>0>0),x.push(T)}return x}function write_iwa_file(n){var _=[];return n.forEach(function(x){var E=[[],[{data:write_varint49(x.id),type:0}],[]];x.merge!=null&&(E[3]=[{data:write_varint49(+!!x.merge),type:0}]);var S=[];x.messages.forEach(function(T){S.push(T.data),T.meta[3]=[{type:0,data:write_varint49(T.data.length)}],E[2].push({data:write_shallow(T.meta),type:2})});var C=write_shallow(E);_.push(write_varint49(C.length)),_.push(C),S.forEach(function(T){return _.push(T)})}),u8concat(_)}function parse_snappy_chunk(n,_){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var x={l:0},E=parse_varint49(_,x),S=[],C=x.l;C<_.length;){var T=_[C]&3;if(T==0){var A=_[C++]>>2;if(A<60)++A;else{var B=A-59;A=_[C],B>1&&(A|=_[C+1]<<8),B>2&&(A|=_[C+2]<<16),B>3&&(A|=_[C+3]<<24),A>>>=0,A++,C+=B}S.push(_[subarray](C,C+A)),C+=A;continue}else{var I=0,M=0;if(T==1?(M=(_[C]>>2&7)+4,I=(_[C++]&224)<<3,I|=_[C++]):(M=(_[C++]>>2)+1,T==2?(I=_[C]|_[C+1]<<8,C+=2):(I=(_[C]|_[C+1]<<8|_[C+2]<<16|_[C+3]<<24)>>>0,C+=4)),I==0)throw new Error("Invalid offset 0");for(var O=S.length-1,D=I;O>=0&&D>=S[O].length;)D-=S[O].length,--O;if(O<0)if(D==0)D=S[O=0].length;else throw new Error("Invalid offset beyond length");if(M<D)S.push(S[O][subarray](S[O].length-D,S[O].length-D+M));else{for(D>0&&(S.push(S[O][subarray](S[O].length-D)),M-=D),++O;M>=S[O].length;)S.push(S[O]),M-=S[O].length,++O;M&&S.push(S[O][subarray](0,M))}S.length>25&&(S=[u8concat(S)])}}for(var L=0,V=0;V<S.length;++V)L+=S[V].length;if(L!=E)throw new Error("Unexpected length: ".concat(L," != ").concat(E));return S}function decompress_iwa_file(n){Array.isArray(n)&&(n=new Uint8Array(n));for(var _=[],x=0;x<n.length;){var E=n[x++],S=n[x]|n[x+1]<<8|n[x+2]<<16;x+=3,_.push.apply(_,parse_snappy_chunk(E,n[subarray](x,x+S))),x+=S}if(x!==n.length)throw new Error("data is not a valid framed stream!");return _.length==1?_[0]:u8concat(_)}function compress_iwa_file(n){for(var _=[],x=0;x<n.length;){var E=Math.min(n.length-x,268435455),S=new Uint8Array(4);_.push(S);var C=write_varint49(E),T=C.length;_.push(C),E<=60?(T++,_.push(new Uint8Array([E-1<<2]))):E<=256?(T+=2,_.push(new Uint8Array([240,E-1&255]))):E<=65536?(T+=3,_.push(new Uint8Array([244,E-1&255,E-1>>8&255]))):E<=16777216?(T+=4,_.push(new Uint8Array([248,E-1&255,E-1>>8&255,E-1>>16&255]))):E<=4294967296&&(T+=5,_.push(new Uint8Array([252,E-1&255,E-1>>8&255,E-1>>16&255,E-1>>>24&255]))),_.push(n[subarray](x,x+E)),T+=E,S[0]=0,S[1]=T&255,S[2]=T>>8&255,S[3]=T>>16&255,x+=E}return u8concat(_)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(n,_,x,E,S){var C,T,A,B,I=_&255,M=_>>8,O=M>=5?S:E;e:if(x&(M>4?8:4)&&n.t=="n"&&I==7){var D=(C=O[7])!=null&&C[0]?varint_to_i32(O[7][0].data):-1;if(D==-1)break e;var L=(T=O[15])!=null&&T[0]?varint_to_i32(O[15][0].data):-1,V=(A=O[16])!=null&&A[0]?varint_to_i32(O[16][0].data):-1,U=(B=O[40])!=null&&B[0]?varint_to_i32(O[40][0].data):-1,q=n.v,H=q;t:if(U){if(q==0){L=V=2;break t}q>=604800?L=1:q>=86400?L=2:q>=3600?L=4:q>=60?L=8:q>=1?L=16:L=32,Math.floor(q)!=q?V=32:q%60?V=16:q%3600?V=8:q%86400?V=4:q%604800&&(V=2),V<L&&(V=L)}if(L==-1||V==-1)break e;var W=[],Q=[];L==1&&(H=q/604800,V==1?Q.push('d"d"'):(H|=0,q-=604800*H),W.push(H+(D==2?" week"+(H==1?"":"s"):D==1?"w":""))),L<=2&&V>=2&&(H=q/86400,V>2&&(H|=0,q-=86400*H),Q.push('d"d"'),W.push(H+(D==2?" day"+(H==1?"":"s"):D==1?"d":""))),L<=4&&V>=4&&(H=q/3600,V>4&&(H|=0,q-=3600*H),Q.push((L>=4?"[h]":"h")+'"h"'),W.push(H+(D==2?" hour"+(H==1?"":"s"):D==1?"h":""))),L<=8&&V>=8&&(H=q/60,V>8&&(H|=0,q-=60*H),Q.push((L>=8?"[m]":"m")+'"m"'),D==0?W.push((L==8&&V==8||H>=10?"":"0")+H):W.push(H+(D==2?" minute"+(H==1?"":"s"):D==1?"m":""))),L<=16&&V>=16&&(H=q,V>16&&(H|=0,q-=H),Q.push((L>=16?"[s]":"s")+'"s"'),D==0?W.push((V==16&&L==16||H>=10?"":"0")+H):W.push(H+(D==2?" second"+(H==1?"":"s"):D==1?"s":""))),V>=32&&(H=Math.round(1e3*q),L<32&&Q.push('.000"ms"'),D==0?W.push((H>=100?"":H>=10?"0":"00")+H):W.push(H+(D==2?" millisecond"+(H==1?"":"s"):D==1?"ms":""))),n.w=W.join(D==0?":":" "),n.z=Q.join(D==0?'":"':" "),D==0&&(n.w=n.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(n,_,x){var E=u8_to_dataview(n),S=E.getUint32(4,!0),C=-1,T=-1,A=-1,B=NaN,I=new Date(2001,0,1),M=x>1?12:8;S&2&&(A=E.getUint32(M,!0),M+=4),M+=popcnt(S&(x>1?3468:396))*4,S&512&&(C=E.getUint32(M,!0),M+=4),M+=popcnt(S&(x>1?12288:4096))*4,S&16&&(T=E.getUint32(M,!0),M+=4),S&32&&(B=E.getFloat64(M,!0),M+=8),S&64&&(I.setTime(I.getTime()+E.getFloat64(M,!0)*1e3),M+=8),x>1&&(S=E.getUint32(8,!0)>>>16,S&255&&(A==-1&&(A=E.getUint32(M,!0)),M+=4));var O,D=n[x>=4?1:2];switch(D){case 0:return;case 2:O={t:"n",v:B};break;case 3:O={t:"s",v:_.sst[T]};break;case 5:O={t:"d",v:I};break;case 6:O={t:"b",v:B>0};break;case 7:O={t:"n",v:B};break;case 8:O={t:"e",v:0};break;case 9:if(C>-1)O={t:"s",v:_.rsst[C]};else throw new Error("Unsupported cell type ".concat(n[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(n[subarray](0,4)))}return A>-1&&numbers_format_cell(O,D|x<<8,S,_.ofmt[A],_.nfmt[A]),D==7&&(O.v/=86400),O}function parse_new_storage(n,_){var x=u8_to_dataview(n);x.getUint32(4,!0);var E=x.getUint32(8,!0),S=12,C=-1,T=-1,A=-1,B=NaN,I=NaN,M=new Date(2001,0,1);E&1&&(B=readDecimal128LE(n,S),S+=16),E&2&&(I=x.getFloat64(S,!0),S+=8),E&4&&(M.setTime(M.getTime()+x.getFloat64(S,!0)*1e3),S+=8),E&8&&(T=x.getUint32(S,!0),S+=4),E&16&&(C=x.getUint32(S,!0),S+=4);var O,D=n[1];switch(D){case 0:return;case 2:O={t:"n",v:B};break;case 3:O={t:"s",v:_.sst[T]};break;case 5:O={t:"d",v:M};break;case 6:O={t:"b",v:I>0};break;case 7:O={t:"n",v:I};break;case 8:O={t:"e",v:0};break;case 9:O={t:"s",v:_.rsst[C]};break;case 10:O={t:"n",v:B};break;default:throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(E&31," : ").concat(n[subarray](0,4)))}return S+=popcnt(E&8160)*4,E&516096&&(A==-1&&(A=x.getUint32(S,!0)),S+=4),A>-1&&numbers_format_cell(O,D|1280,E>>13,_.ofmt[A],_.nfmt[A]),D==7&&(O.v/=86400),O}function write_new_storage(n,_){var x=new Uint8Array(32),E=u8_to_dataview(x),S=12,C=0;switch(x[0]=5,n.t){case"n":x[1]=2,writeDecimal128LE(x,S,n.v),C|=1,S+=16;break;case"b":x[1]=6,E.setFloat64(S,n.v?1:0,!0),C|=2,S+=8;break;case"s":var T=n.v==null?"":String(n.v),A=_.indexOf(T);A==-1&&(_[A=_.length]=T),x[1]=3,E.setUint32(S,A,!0),C|=8,S+=4;break;default:throw"unsupported cell type "+n.t}return E.setUint32(8,C,!0),x[subarray](0,S)}function write_old_storage(n,_){var x=new Uint8Array(32),E=u8_to_dataview(x),S=12,C=0;switch(x[0]=4,n.t){case"n":x[2]=2,E.setFloat64(S,n.v,!0),C|=32,S+=8;break;case"b":x[2]=6,E.setFloat64(S,n.v?1:0,!0),C|=32,S+=8;break;case"s":var T=n.v==null?"":String(n.v),A=_.indexOf(T);A==-1&&(_[A=_.length]=T),x[2]=3,E.setUint32(S,A,!0),C|=16,S+=4;break;default:throw"unsupported cell type "+n.t}return E.setUint32(8,C,!0),x[subarray](0,S)}function parse_cell_storage(n,_){switch(n[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(n,_,n[0]);case 5:return parse_new_storage(n,_);default:throw new Error("Unsupported payload version ".concat(n[0]))}}function parse_TSP_Reference(n){var _=parse_shallow(n);return varint_to_i32(_[1][0].data)}function write_TSP_Reference(n){return write_shallow([[],[{type:0,data:write_varint49(n)}]])}function numbers_add_oref(n,_){var x,E=(x=n.messages[0].meta[5])!=null&&x[0]?parse_packed_varints(n.messages[0].meta[5][0].data):[],S=E.indexOf(_);S==-1&&(E.push(_),n.messages[0].meta[5]=[{type:2,data:write_packed_varints(E)}])}function numbers_del_oref(n,_){var x,E=(x=n.messages[0].meta[5])!=null&&x[0]?parse_packed_varints(n.messages[0].meta[5][0].data):[];n.messages[0].meta[5]=[{type:2,data:write_packed_varints(E.filter(function(S){return S!=_}))}]}function parse_TST_TableDataList(n,_){var x=parse_shallow(_.data),E=varint_to_i32(x[1][0].data),S=x[3],C=[];return(S||[]).forEach(function(T){var A=parse_shallow(T.data);if(A[1]){var B=varint_to_i32(A[1][0].data)>>>0;switch(E){case 1:C[B]=u8str(A[3][0].data);break;case 8:{var I=n[parse_TSP_Reference(A[9][0].data)][0],M=parse_shallow(I.data),O=n[parse_TSP_Reference(M[1][0].data)][0],D=varint_to_i32(O.meta[1][0].data);if(D!=2001)throw new Error("2000 unexpected reference to ".concat(D));var L=parse_shallow(O.data);C[B]=L[3].map(function(V){return u8str(V.data)}).join("")}break;case 2:C[B]=parse_shallow(A[6][0].data);break;default:throw E}}}),C}function parse_TST_TileRowInfo(n,_){var x,E,S,C,T,A,B,I,M,O,D,L,V,U,q=parse_shallow(n),H=varint_to_i32(q[1][0].data)>>>0,W=varint_to_i32(q[2][0].data)>>>0,Q=((E=(x=q[8])==null?void 0:x[0])==null?void 0:E.data)&&varint_to_i32(q[8][0].data)>0||!1,re,ce;if((C=(S=q[7])==null?void 0:S[0])!=null&&C.data&&_!=0)re=(A=(T=q[7])==null?void 0:T[0])==null?void 0:A.data,ce=(I=(B=q[6])==null?void 0:B[0])==null?void 0:I.data;else if((O=(M=q[4])==null?void 0:M[0])!=null&&O.data&&_!=1)re=(L=(D=q[4])==null?void 0:D[0])==null?void 0:L.data,ce=(U=(V=q[3])==null?void 0:V[0])==null?void 0:U.data;else throw"NUMBERS Tile missing ".concat(_," cell storage");for(var ne=Q?4:1,Y=u8_to_dataview(re),fe=[],ge=0;ge<re.length/2;++ge){var $e=Y.getUint16(ge*2,!0);$e<65535&&fe.push([ge,$e])}if(fe.length!=W)throw"Expected ".concat(W," cells, found ").concat(fe.length);var _e=[];for(ge=0;ge<fe.length-1;++ge)_e[fe[ge][0]]=ce[subarray](fe[ge][1]*ne,fe[ge+1][1]*ne);return fe.length>=1&&(_e[fe[fe.length-1][0]]=ce[subarray](fe[fe.length-1][1]*ne)),{R:H,cells:_e}}function parse_TST_Tile(n,_){var x,E=parse_shallow(_.data),S=-1;(x=E?.[7])!=null&&x[0]&&(varint_to_i32(E[7][0].data)>>>0?S=1:S=0);var C=mappa(E[5],function(T){return parse_TST_TileRowInfo(T,S)});return{nrows:varint_to_i32(E[4][0].data)>>>0,data:C.reduce(function(T,A){return T[A.R]||(T[A.R]=[]),A.cells.forEach(function(B,I){if(T[A.R][I])throw new Error("Duplicate cell r=".concat(A.R," c=").concat(I));T[A.R][I]=B}),T},[])}}function parse_TST_TableModelArchive(n,_,x){var E,S,C,T,A,B,I=parse_shallow(_.data),M={s:{r:0,c:0},e:{r:0,c:0}};if(M.e.r=(varint_to_i32(I[6][0].data)>>>0)-1,M.e.r<0)throw new Error("Invalid row varint ".concat(I[6][0].data));if(M.e.c=(varint_to_i32(I[7][0].data)>>>0)-1,M.e.c<0)throw new Error("Invalid col varint ".concat(I[7][0].data));x["!ref"]=encode_range(M);var O=x["!data"]!=null,D=x,L=parse_shallow(I[4][0].data),V=numbers_lut_new();(E=L[4])!=null&&E[0]&&(V.sst=parse_TST_TableDataList(n,n[parse_TSP_Reference(L[4][0].data)][0])),(S=L[11])!=null&&S[0]&&(V.ofmt=parse_TST_TableDataList(n,n[parse_TSP_Reference(L[11][0].data)][0])),(C=L[17])!=null&&C[0]&&(V.rsst=parse_TST_TableDataList(n,n[parse_TSP_Reference(L[17][0].data)][0])),(T=L[22])!=null&&T[0]&&(V.nfmt=parse_TST_TableDataList(n,n[parse_TSP_Reference(L[22][0].data)][0]));var U=parse_shallow(L[3][0].data),q=0;if(U[1].forEach(function(Q){var re=parse_shallow(Q.data),ce=n[parse_TSP_Reference(re[2][0].data)][0],ne=varint_to_i32(ce.meta[1][0].data);if(ne!=6002)throw new Error("6001 unexpected reference to ".concat(ne));var Y=parse_TST_Tile(n,ce);Y.data.forEach(function(fe,ge){fe.forEach(function($e,_e){var ae=parse_cell_storage($e,V);ae&&(O?(D["!data"][q+ge]||(D["!data"][q+ge]=[]),D["!data"][q+ge][_e]=ae):x[encode_col(_e)+encode_row(q+ge)]=ae)})}),q+=Y.nrows}),(A=L[13])!=null&&A[0]){var H=n[parse_TSP_Reference(L[13][0].data)][0],W=varint_to_i32(H.meta[1][0].data);if(W!=6144)throw new Error("Expected merge type 6144, found ".concat(W));x["!merges"]=(B=parse_shallow(H.data))==null?void 0:B[1].map(function(Q){var re=parse_shallow(Q.data),ce=u8_to_dataview(parse_shallow(re[1][0].data)[1][0].data),ne=u8_to_dataview(parse_shallow(re[2][0].data)[1][0].data);return{s:{r:ce.getUint16(0,!0),c:ce.getUint16(2,!0)},e:{r:ce.getUint16(0,!0)+ne.getUint16(0,!0)-1,c:ce.getUint16(2,!0)+ne.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(n,_,x){var E=parse_shallow(_.data),S={"!ref":"A1"};x?.dense&&(S["!data"]=[]);var C=n[parse_TSP_Reference(E[2][0].data)],T=varint_to_i32(C[0].meta[1][0].data);if(T!=6001)throw new Error("6000 unexpected reference to ".concat(T));return parse_TST_TableModelArchive(n,C[0],S),S}function parse_TN_SheetArchive(n,_,x){var E,S=parse_shallow(_.data),C={name:(E=S[1])!=null&&E[0]?u8str(S[1][0].data):"",sheets:[]},T=mappa(S[2],parse_TSP_Reference);return T.forEach(function(A){n[A].forEach(function(B){var I=varint_to_i32(B.meta[1][0].data);I==6e3&&C.sheets.push(parse_TST_TableInfoArchive(n,B,x))})}),C}function parse_TN_DocumentArchive(n,_,x){var E,S=book_new(),C=parse_shallow(_.data);if((E=C[2])!=null&&E[0])throw new Error("Keynote presentations are not supported");var T=mappa(C[1],parse_TSP_Reference);if(T.forEach(function(A){n[A].forEach(function(B){var I=varint_to_i32(B.meta[1][0].data);if(I==2){var M=parse_TN_SheetArchive(n,B,x);M.sheets.forEach(function(O,D){book_append_sheet(S,O,D==0?M.name:M.name+"_"+D,!0)})}})}),S.SheetNames.length==0)throw new Error("Empty NUMBERS file");return S.bookType="numbers",S}function parse_numbers_iwa(n,_){var x,E,S,C,T,A,B,I={},M=[];if(n.FullPaths.forEach(function(D){if(D.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),n.FileIndex.forEach(function(D){if(D.name.match(/\.iwa$/)&&D.content[0]==0){var L;try{L=decompress_iwa_file(D.content)}catch(U){return console.log("?? "+D.content.length+" "+(U.message||U))}var V;try{V=parse_iwa_file(L)}catch(U){return console.log("## "+(U.message||U))}V.forEach(function(U){I[U.id]=U.messages,M.push(U.id)})}}),!M.length)throw new Error("File has no messages");if((S=(E=(x=I?.[1])==null?void 0:x[0].meta)==null?void 0:E[1])!=null&&S[0].data&&varint_to_i32(I[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var O=((B=(A=(T=(C=I?.[1])==null?void 0:C[0])==null?void 0:T.meta)==null?void 0:A[1])==null?void 0:B[0].data)&&varint_to_i32(I[1][0].meta[1][0].data)==1&&I[1][0];if(O||M.forEach(function(D){I[D].forEach(function(L){var V=varint_to_i32(L.meta[1][0].data)>>>0;if(V==1)if(!O)O=L;else throw new Error("Document has multiple roots")})}),!O)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(I,O,_)}function write_TST_TileRowInfo(n,_,x){var E,S,C=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((E=C[6])!=null&&E[0])||!((S=C[7])!=null&&S[0]))throw"Mutation only works on post-BNC storages!";var T=0;if(C[7][0].data.length<2*n.length){var A=new Uint8Array(2*n.length);A.set(C[7][0].data),C[7][0].data=A}if(C[4][0].data.length<2*n.length){var B=new Uint8Array(2*n.length);B.set(C[4][0].data),C[4][0].data=B}for(var I=u8_to_dataview(C[7][0].data),M=0,O=[],D=u8_to_dataview(C[4][0].data),L=0,V=[],U=x?4:1,q=0;q<n.length;++q){if(n[q]==null){I.setUint16(q*2,65535,!0),D.setUint16(q*2,65535);continue}I.setUint16(q*2,M/U,!0),D.setUint16(q*2,L/U,!0);var H,W;switch(typeof n[q]){case"string":H=write_new_storage({t:"s",v:n[q]},_),W=write_old_storage({t:"s",v:n[q]},_);break;case"number":H=write_new_storage({t:"n",v:n[q]},_),W=write_old_storage({t:"n",v:n[q]},_);break;case"boolean":H=write_new_storage({t:"b",v:n[q]},_),W=write_old_storage({t:"b",v:n[q]},_);break;default:if(n[q]instanceof Date){H=write_new_storage({t:"s",v:n[q].toISOString()},_),W=write_old_storage({t:"s",v:n[q].toISOString()},_);break}throw new Error("Unsupported value "+n[q])}O.push(H),M+=H.length,V.push(W),L+=W.length,++T}for(C[2][0].data=write_varint49(T),C[5][0].data=write_varint49(5);q<C[7][0].data.length/2;++q)I.setUint16(q*2,65535,!0),D.setUint16(q*2,65535,!0);return C[6][0].data=u8concat(O),C[3][0].data=u8concat(V),C[8]=[{type:0,data:write_varint49(x?1:0)}],C}function write_iwam(n,_){return{meta:[[],[{type:0,data:write_varint49(n)}]],data:_}}function get_unique_msgid(n,_){_.last||(_.last=927262);for(var x=_.last;x<2e6;++x)if(!_[x])return _[_.last=x]=n,x;throw new Error("Too many messages")}function build_numbers_deps(n){var _={},x=[];return n.FileIndex.map(function(E,S){return[E,n.FullPaths[S]]}).forEach(function(E){var S=E[0],C=E[1];S.type==2&&S.name.match(/\.iwa/)&&S.content[0]==0&&parse_iwa_file(decompress_iwa_file(S.content)).forEach(function(T){x.push(T.id),_[T.id]={deps:[],location:C,type:varint_to_i32(T.messages[0].meta[1][0].data)}})}),n.FileIndex.forEach(function(E){E.name.match(/\.iwa/)&&E.content[0]==0&&parse_iwa_file(decompress_iwa_file(E.content)).forEach(function(S){S.messages.forEach(function(C){[5,6].forEach(function(T){C.meta[T]&&C.meta[T].forEach(function(A){_[S.id].deps.push(varint_to_i32(A.data))})})})})}),_}function write_numbers_iwa(n,_){if(!_||!_.numbers)throw new Error("Must pass a `numbers` option -- check the README");var x=CFB.read(_.numbers,{type:"base64"}),E=build_numbers_deps(x),S=numbers_iwa_find(x,E,1);if(S==null)throw"Could not find message ".concat(1," in Numbers template");var C=mappa(parse_shallow(S.messages[0].data)[1],parse_TSP_Reference);if(C.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return n.SheetNames.forEach(function(T,A){A>=1&&(numbers_add_ws(x,E,A+1),S=numbers_iwa_find(x,E,1),C=mappa(parse_shallow(S.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(x,E,n.Sheets[T],T,A,C[A])}),x}function numbers_iwa_doit(n,_,x,E){var S=CFB.find(n,_[x].location);if(!S)throw"Could not find ".concat(_[x].location," in Numbers template");var C=parse_iwa_file(decompress_iwa_file(S.content)),T=C.find(function(A){return A.id==x});E(T,C),S.content=compress_iwa_file(write_iwa_file(C)),S.size=S.content.length}function numbers_iwa_find(n,_,x){var E=CFB.find(n,_[x].location);if(!E)throw"Could not find ".concat(_[x].location," in Numbers template");var S=parse_iwa_file(decompress_iwa_file(E.content)),C=S.find(function(T){return T.id==x});return C}function numbers_add_ws(n,_,x){var E=-1,S=-1,C={};numbers_iwa_doit(n,_,1,function(I,M){var O=parse_shallow(I.messages[0].data);E=parse_TSP_Reference(parse_shallow(I.messages[0].data)[1][0].data),S=get_unique_msgid({deps:[1],location:_[E].location,type:2},_),C[E]=S,numbers_add_oref(I,S),O[1].push({type:2,data:write_TSP_Reference(S)});var D=numbers_iwa_find(n,_,E);D.id=S,_[1].location==_[S].location?M.push(D):numbers_iwa_doit(n,_,S,function(L,V){return V.push(D)}),I.messages[0].data=write_shallow(O)});var T=-1;numbers_iwa_doit(n,_,S,function(I,M){for(var O=parse_shallow(I.messages[0].data),D=3;D<=69;++D)delete O[D];var L=mappa(O[2],parse_TSP_Reference);L.forEach(function(q){return numbers_del_oref(I,q)}),T=get_unique_msgid({deps:[S],location:_[L[0]].location,type:_[L[0]].type},_),numbers_add_oref(I,T),C[L[0]]=T,O[2]=[{type:2,data:write_TSP_Reference(T)}];var V=numbers_iwa_find(n,_,L[0]);if(V.id=T,_[L[0]].location==_[S].location)M.push(V);else{var U=_[S].location;U=U.replace(/^Root Entry\//,""),U=U.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,_,2,function(q){var H=parse_shallow(q.messages[0].data),W=H[3].findIndex(function(re){var ce,ne,Y=parse_shallow(re.data);return(ce=Y[3])!=null&&ce[0]?u8str(Y[3][0].data)==U:!!((ne=Y[2])!=null&&ne[0]&&u8str(Y[2][0].data)==U)}),Q=parse_shallow(H[3][W].data);Q[6]||(Q[6]=[]),Q[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(T)}]])}),H[3][W].data=write_shallow(Q),q.messages[0].data=write_shallow(H)}),numbers_iwa_doit(n,_,T,function(q,H){return H.push(V)})}I.messages[0].data=write_shallow(O)});var A=-1;numbers_iwa_doit(n,_,T,function(I,M){for(var O=parse_shallow(I.messages[0].data),D=parse_shallow(O[1][0].data),L=3;L<=69;++L)delete D[L];var V=parse_TSP_Reference(D[2][0].data);D[2][0].data=write_TSP_Reference(C[V]),O[1][0].data=write_shallow(D);var U=parse_TSP_Reference(O[2][0].data);numbers_del_oref(I,U),A=get_unique_msgid({deps:[T],location:_[U].location,type:_[U].type},_),numbers_add_oref(I,A),C[U]=A,O[2][0].data=write_TSP_Reference(A);var q=numbers_iwa_find(n,_,U);q.id=A,_[T].location==_[A].location?M.push(q):numbers_iwa_doit(n,_,A,function(H,W){return W.push(q)}),I.messages[0].data=write_shallow(O)});var B=_[A].location;B=B.replace(/^Root Entry\//,""),B=B.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,_,A,function(I,M){var O,D,L=parse_shallow(I.messages[0].data),V=u8str(L[1][0].data),U=V.replace(/-[A-Z0-9]*/,"-".concat(x.toString(16).padStart(4,"0")));if(L[1][0].data=stru8(U),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(ne){return delete L[ne]}),L[45]){var q=parse_shallow(L[45][0].data),H=parse_TSP_Reference(q[1][0].data);numbers_del_oref(I,H),delete L[45]}if(L[70]){var W=parse_shallow(L[70][0].data);(O=W[2])==null||O.forEach(function(ne){var Y=parse_shallow(ne.data);[2,3].map(function(fe){return Y[fe][0]}).forEach(function(fe){var ge=parse_shallow(fe.data);if(ge[8]){var $e=parse_TSP_Reference(ge[8][0].data);numbers_del_oref(I,$e)}})}),delete L[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(ne){if(L[ne]){var Y=parse_TSP_Reference(L[ne][0].data);delete L[ne],numbers_del_oref(I,Y)}});var Q=parse_shallow(L[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(ne){var Y;if((Y=Q[ne])!=null&&Y[0]){var fe=parse_TSP_Reference(Q[ne][0].data),ge=get_unique_msgid({deps:[A],location:_[fe].location,type:_[fe].type},_);numbers_del_oref(I,fe),numbers_add_oref(I,ge),C[fe]=ge;var $e=numbers_iwa_find(n,_,fe);if($e.id=ge,_[fe].location==_[A].location)M.push($e);else{_[ge].location=_[fe].location.replace(fe.toString(),ge.toString()),_[ge].location==_[fe].location&&(_[ge].location=_[ge].location.replace(/\.iwa/,"-".concat(ge,".iwa"))),CFB.utils.cfb_add(n,_[ge].location,compress_iwa_file(write_iwa_file([$e])));var _e=_[ge].location;_e=_e.replace(/^Root Entry\//,""),_e=_e.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,_,2,function(ae){var X=parse_shallow(ae.messages[0].data);X[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ge)}],[{type:2,data:stru8(_e.replace(/-.*$/,""))}],[{type:2,data:stru8(_e)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),X[1]=[{type:0,data:write_varint49(Math.max(ge+1,varint_to_i32(X[1][0].data)))}];var F=X[3].findIndex(function(J){var te,se,oe=parse_shallow(J.data);return(te=oe[3])!=null&&te[0]?u8str(oe[3][0].data)==B:!!((se=oe[2])!=null&&se[0]&&u8str(oe[2][0].data)==B)}),z=parse_shallow(X[3][F].data);z[6]||(z[6]=[]),z[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ge)}]])}),X[3][F].data=write_shallow(z),ae.messages[0].data=write_shallow(X)})}Q[ne][0].data=write_TSP_Reference(ge)}});var re=parse_shallow(Q[1][0].data);(D=re[2])==null||D.forEach(function(ne){var Y=parse_TSP_Reference(ne.data),fe=get_unique_msgid({deps:[A],location:_[Y].location,type:_[Y].type},_);numbers_del_oref(I,Y),numbers_add_oref(I,fe),C[Y]=fe;var ge=numbers_iwa_find(n,_,Y);if(ge.id=fe,_[Y].location==_[A].location)M.push(ge);else{_[fe].location=_[Y].location.replace(Y.toString(),fe.toString()),_[fe].location==_[Y].location&&(_[fe].location=_[fe].location.replace(/\.iwa/,"-".concat(fe,".iwa"))),CFB.utils.cfb_add(n,_[fe].location,compress_iwa_file(write_iwa_file([ge])));var $e=_[fe].location;$e=$e.replace(/^Root Entry\//,""),$e=$e.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,_,2,function(_e){var ae=parse_shallow(_e.messages[0].data);ae[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}],[{type:2,data:stru8($e.replace(/-.*$/,""))}],[{type:2,data:stru8($e)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),ae[1]=[{type:0,data:write_varint49(Math.max(fe+1,varint_to_i32(ae[1][0].data)))}];var X=ae[3].findIndex(function(z){var J,te,se=parse_shallow(z.data);return(J=se[3])!=null&&J[0]?u8str(se[3][0].data)==B:!!((te=se[2])!=null&&te[0]&&u8str(se[2][0].data)==B)}),F=parse_shallow(ae[3][X].data);F[6]||(F[6]=[]),F[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}]])}),ae[3][X].data=write_shallow(F),_e.messages[0].data=write_shallow(ae)})}ne.data=write_TSP_Reference(fe)}),Q[1][0].data=write_shallow(re);var ce=parse_shallow(Q[3][0].data);ce[1].forEach(function(ne){var Y=parse_shallow(ne.data),fe=parse_TSP_Reference(Y[2][0].data),ge=C[fe];if(!C[fe]){ge=get_unique_msgid({deps:[A],location:"",type:_[fe].type},_),_[ge].location="Root Entry/Index/Tables/Tile-".concat(ge,".iwa"),C[fe]=ge;var $e=numbers_iwa_find(n,_,fe);$e.id=ge,numbers_del_oref(I,fe),numbers_add_oref(I,ge),CFB.utils.cfb_add(n,"/Index/Tables/Tile-".concat(ge,".iwa"),compress_iwa_file(write_iwa_file([$e]))),numbers_iwa_doit(n,_,2,function(_e){var ae=parse_shallow(_e.messages[0].data);ae[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ge)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(ge))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),ae[1]=[{type:0,data:write_varint49(Math.max(ge+1,varint_to_i32(ae[1][0].data)))}];var X=ae[3].findIndex(function(z){var J,te,se=parse_shallow(z.data);return(J=se[3])!=null&&J[0]?u8str(se[3][0].data)==B:!!((te=se[2])!=null&&te[0]&&u8str(se[2][0].data)==B)}),F=parse_shallow(ae[3][X].data);F[6]||(F[6]=[]),F[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ge)}]])}),ae[3][X].data=write_shallow(F),_e.messages[0].data=write_shallow(ae)})}Y[2][0].data=write_TSP_Reference(ge),ne.data=write_shallow(Y)}),Q[3][0].data=write_shallow(ce)}L[4][0].data=write_shallow(Q),I.messages[0].data=write_shallow(L)})}function write_numbers_ws(n,_,x,E,S,C){var T=[];numbers_iwa_doit(n,_,C,function(I){var M=parse_shallow(I.messages[0].data);M[1]=[{type:2,data:stru8(E)}],T=mappa(M[2],parse_TSP_Reference),I.messages[0].data=write_shallow(M)});var A=numbers_iwa_find(n,_,T[0]),B=parse_TSP_Reference(parse_shallow(A.messages[0].data)[2][0].data);numbers_iwa_doit(n,_,B,function(I,M){return write_numbers_tma(n,_,x,I,M,B)})}var USE_WIDE_ROWS=!0;function write_numbers_tma(n,_,x,E,S,C){var T=decode_range(x["!ref"]);T.s.r=T.s.c=0;var A=!1;T.e.c>999&&(A=!0,T.e.c=999),T.e.r>999999&&(A=!0,T.e.r=999999),A&&console.error("Truncating to ".concat(encode_range(T)));var B=sheet_to_json(x,{range:T,header:1}),I=["~Sh33tJ5~"],M=_[C].location;M=M.replace(/^Root Entry\//,""),M=M.replace(/^Index\//,"").replace(/\.iwa$/,"");var O=parse_shallow(E.messages[0].data);{O[6][0].data=write_varint49(T.e.r+1),O[7][0].data=write_varint49(T.e.c+1),delete O[46];var D=parse_shallow(O[4][0].data);{var L=parse_TSP_Reference(parse_shallow(D[1][0].data)[2][0].data);numbers_iwa_doit(n,_,L,function(F,z){var J,te=parse_shallow(F.messages[0].data);if((J=te?.[2])!=null&&J[0])for(var se=0;se<B.length;++se){var oe=parse_shallow(te[2][0].data);oe[1][0].data=write_varint49(se),oe[4][0].data=write_varint49(B[se].length),te[2][se]={type:te[2][0].type,data:write_shallow(oe)}}F.messages[0].data=write_shallow(te)});var V=parse_TSP_Reference(D[2][0].data);numbers_iwa_doit(n,_,V,function(F,z){for(var J=parse_shallow(F.messages[0].data),te=0;te<=T.e.c;++te){var se=parse_shallow(J[2][0].data);se[1][0].data=write_varint49(te),se[4][0].data=write_varint49(T.e.r+1),J[2][te]={type:J[2][0].type,data:write_shallow(se)}}F.messages[0].data=write_shallow(J)});var U=parse_shallow(D[9][0].data);U[1]=[];var q=parse_shallow(D[3][0].data);{var H=256;q[2]=[{type:0,data:write_varint49(H)}];var W=parse_TSP_Reference(parse_shallow(q[1][0].data)[2][0].data),Q=function(){var F=numbers_iwa_find(n,_,2),z=parse_shallow(F.messages[0].data),J=z[3].filter(function(te){return varint_to_i32(parse_shallow(te.data)[1][0].data)==W});return J?.length?varint_to_i32(parse_shallow(J[0].data)[12][0].data):0}();CFB.utils.cfb_del(n,_[W].location),numbers_iwa_doit(n,_,2,function(F){var z=parse_shallow(F.messages[0].data);z[3]=z[3].filter(function(se){return varint_to_i32(parse_shallow(se.data)[1][0].data)!=W});var J=z[3].findIndex(function(se){var oe,ie,G=parse_shallow(se.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==M:!!((ie=G[2])!=null&&ie[0]&&u8str(G[2][0].data)==M)}),te=parse_shallow(z[3][J].data);te[6]||(te[6]=[]),te[6]=te[6].filter(function(se){return varint_to_i32(parse_shallow(se.data)[1][0].data)!=W}),z[3][J].data=write_shallow(te),F.messages[0].data=write_shallow(z)}),numbers_del_oref(E,W),q[1]=[];for(var re=Math.ceil((T.e.r+1)/H),ce=0;ce<re;++ce){var ne=get_unique_msgid({deps:[],location:"",type:6002},_);_[ne].location="Root Entry/Index/Tables/Tile-".concat(ne,".iwa");for(var Y=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(T.e.r+1,(ce+1)*H))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((ce+1)*H,T.e.r+1)-ce*H)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],fe=ce*H;fe<=Math.min(T.e.r,(ce+1)*H-1);++fe){var ge=write_TST_TileRowInfo(B[fe],I,USE_WIDE_ROWS);ge[1][0].data=write_varint49(fe-ce*H),Y[5].push({data:write_shallow(ge),type:2})}q[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}],[{type:2,data:write_TSP_Reference(ne)}]])});var $e={id:ne,messages:[write_iwam(6002,write_shallow(Y))]},_e=compress_iwa_file(write_iwa_file([$e]));CFB.utils.cfb_add(n,"/Index/Tables/Tile-".concat(ne,".iwa"),_e),numbers_iwa_doit(n,_,2,function(F){var z=parse_shallow(F.messages[0].data);z[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ne)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(ne))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(Q)}]])}),z[1]=[{type:0,data:write_varint49(Math.max(ne+1,varint_to_i32(z[1][0].data)))}];var J=z[3].findIndex(function(se){var oe,ie,G=parse_shallow(se.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==M:!!((ie=G[2])!=null&&ie[0]&&u8str(G[2][0].data)==M)}),te=parse_shallow(z[3][J].data);te[6]||(te[6]=[]),te[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ne)}]])}),z[3][J].data=write_shallow(te),F.messages[0].data=write_shallow(z)}),numbers_add_oref(E,ne),U[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce*H)}],[{type:0,data:write_varint49(ce)}]])})}}if(D[3][0].data=write_shallow(q),D[9][0].data=write_shallow(U),D[10]=[{type:2,data:new Uint8Array([])}],x["!merges"]){var ae=get_unique_msgid({type:6144,deps:[C],location:_[C].location},_);S.push({id:ae,messages:[write_iwam(6144,write_shallow([[],x["!merges"].map(function(F){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([F.s.r,F.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([F.e.r-F.s.r+1,F.e.c-F.s.c+1]).buffer)}]])}]])}})]))]}),D[13]=[{type:2,data:write_TSP_Reference(ae)}],numbers_iwa_doit(n,_,2,function(F){var z=parse_shallow(F.messages[0].data),J=z[3].findIndex(function(se){var oe,ie,G=parse_shallow(se.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==M:!!((ie=G[2])!=null&&ie[0]&&u8str(G[2][0].data)==M)}),te=parse_shallow(z[3][J].data);te[6]||(te[6]=[]),te[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ae)}]])}),z[3][J].data=write_shallow(te),F.messages[0].data=write_shallow(z)}),numbers_add_oref(E,ae)}else delete D[13];var X=parse_TSP_Reference(D[4][0].data);numbers_iwa_doit(n,_,X,function(F){var z=parse_shallow(F.messages[0].data);z[3]=[],I.forEach(function(J,te){te!=0&&z[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(te)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(J)}]])})}),F.messages[0].data=write_shallow(z)})}O[4][0].data=write_shallow(D)}E.messages[0].data=write_shallow(O)}function fix_opts_func(n){return function(x){for(var E=0;E!=n.length;++E){var S=n[E];x[S[0]]===void 0&&(x[S[0]]=S[1]),S[2]==="n"&&(x[S[0]]=Number(x[S[0]]))}}}function fix_read_opts(n){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(n)}function fix_write_opts(n){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function get_sheet_type(n){return RELS.WS.indexOf(n)>-1?"sheet":n==RELS.CS?"chart":n==RELS.DS?"dialog":n==RELS.MS?"macro":n&&n.length?n:"sheet"}function safe_parse_wbrels(n,_){if(!n)return 0;try{n=_.map(function(E){return E.id||(E.id=E.strRelID),[E.name,n["!id"][E.id].Target,get_sheet_type(n["!id"][E.id].Type)]})}catch{return null}return!n||n.length===0?null:n}function safe_parse_sheet(n,_,x,E,S,C,T,A,B,I,M,O){try{C[E]=parse_rels(getzipstr(n,x,!0),_);var D=getzipdata(n,_),L;switch(A){case"sheet":L=parse_ws(D,_,S,B,C[E],I,M,O);break;case"chart":if(L=parse_cs(D,_,S,B,C[E],I,M,O),!L||!L["!drawel"])break;var V=resolve_path(L["!drawel"].Target,_),U=get_rels_path(V),q=parse_drawing(getzipstr(n,V,!0),parse_rels(getzipstr(n,U,!0),V)),H=resolve_path(q,V),W=get_rels_path(H);L=parse_chart(getzipstr(n,H,!0),H,B,parse_rels(getzipstr(n,W,!0),H),I,L);break;case"macro":L=parse_ms(D,_,S,B,C[E],I,M,O);break;case"dialog":L=parse_ds(D,_,S,B,C[E],I,M,O);break;default:throw new Error("Unrecognized sheet type "+A)}T[E]=L;var Q=[],re=[];C&&C[E]&&keys$1(C[E]).forEach(function(ce){var ne="";if(C[E][ce].Type==RELS.CMNT){if(ne=resolve_path(C[E][ce].Target,_),Q=parse_cmnt(getzipdata(n,ne,!0),ne,B),!Q||!Q.length)return;sheet_insert_comments(L,Q,!1)}C[E][ce].Type==RELS.TCMNT&&(ne=resolve_path(C[E][ce].Target,_),re=re.concat(parse_tcmnt_xml(getzipdata(n,ne,!0),B)))}),re&&re.length&&sheet_insert_comments(L,re,!0,B.people||[])}catch(ce){if(B.WTF)throw ce}}function strip_front_slash(n){return n.charAt(0)=="/"?n.slice(1):n}function parse_zip(n,_){if(make_ssf(),_=_||{},fix_read_opts(_),safegetzipfile(n,"META-INF/manifest.xml")||safegetzipfile(n,"objectdata.xml"))return parse_ods(n,_);if(safegetzipfile(n,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(n.FileIndex)return parse_numbers_iwa(n,_);var x=CFB.utils.cfb_new();return zipentries(n).forEach(function(z){zip_add_file(x,z,getzipbin(n,z))}),parse_numbers_iwa(x,_)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(n,"[Content_Types].xml")){if(safegetzipfile(n,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(n,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var E=CFB.find(n,"Index.zip");if(E)return _=dup(_),delete _.type,typeof E.content=="string"&&(_.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(E.content)?readSync(new Uint8Array(E.content),_):readSync(E.content,_);throw new Error("Unsupported ZIP file")}var S=zipentries(n),C=parse_ct(getzipstr(n,"[Content_Types].xml")),T=!1,A,B;if(C.workbooks.length===0&&(B="xl/workbook.xml",getzipdata(n,B,!0)&&C.workbooks.push(B)),C.workbooks.length===0){if(B="xl/workbook.bin",!getzipdata(n,B,!0))throw new Error("Could not find workbook");C.workbooks.push(B),T=!0}C.workbooks[0].slice(-3)=="bin"&&(T=!0);var I={},M={};if(!_.bookSheets&&!_.bookProps){if(strs=[],C.sst)try{strs=parse_sst(getzipdata(n,strip_front_slash(C.sst)),C.sst,_)}catch(z){if(_.WTF)throw z}_.cellStyles&&C.themes.length&&(I=parse_theme_xml(getzipstr(n,C.themes[0].replace(/^\//,""),!0)||"",_)),C.style&&(M=parse_sty(getzipdata(n,strip_front_slash(C.style)),C.style,I,_))}C.links.map(function(z){try{var J=parse_rels(getzipstr(n,get_rels_path(strip_front_slash(z))),z);return parse_xlink(getzipdata(n,strip_front_slash(z)),J,z,_)}catch{}});var O=parse_wb(getzipdata(n,strip_front_slash(C.workbooks[0])),C.workbooks[0],_),D={},L="";C.coreprops.length&&(L=getzipdata(n,strip_front_slash(C.coreprops[0]),!0),L&&(D=parse_core_props(L)),C.extprops.length!==0&&(L=getzipdata(n,strip_front_slash(C.extprops[0]),!0),L&&parse_ext_props(L,D,_)));var V={};(!_.bookSheets||_.bookProps)&&C.custprops.length!==0&&(L=getzipstr(n,strip_front_slash(C.custprops[0]),!0),L&&(V=parse_cust_props(L,_)));var U={};if((_.bookSheets||_.bookProps)&&(O.Sheets?A=O.Sheets.map(function(J){return J.name}):D.Worksheets&&D.SheetNames.length>0&&(A=D.SheetNames),_.bookProps&&(U.Props=D,U.Custprops=V),_.bookSheets&&typeof A<"u"&&(U.SheetNames=A),_.bookSheets?U.SheetNames:_.bookProps))return U;A={};var q={};_.bookDeps&&C.calcchain&&(q=parse_cc(getzipdata(n,strip_front_slash(C.calcchain)),C.calcchain));var H=0,W={},Q,re;{var ce=O.Sheets;D.Worksheets=ce.length,D.SheetNames=[];for(var ne=0;ne!=ce.length;++ne)D.SheetNames[ne]=ce[ne].name}var Y=T?"bin":"xml",fe=C.workbooks[0].lastIndexOf("/"),ge=(C.workbooks[0].slice(0,fe+1)+"_rels/"+C.workbooks[0].slice(fe+1)+".rels").replace(/^\//,"");safegetzipfile(n,ge)||(ge="xl/_rels/workbook."+Y+".rels");var $e=parse_rels(getzipstr(n,ge,!0),ge.replace(/_rels.*/,"s5s"));(C.metadata||[]).length>=1&&(_.xlmeta=parse_xlmeta(getzipdata(n,strip_front_slash(C.metadata[0])),C.metadata[0],_)),(C.people||[]).length>=1&&(_.people=parse_people_xml(getzipdata(n,strip_front_slash(C.people[0])),_)),$e&&($e=safe_parse_wbrels($e,O.Sheets));var _e=getzipdata(n,"xl/worksheets/sheet.xml",!0)?1:0;e:for(H=0;H!=D.Worksheets;++H){var ae="sheet";if($e&&$e[H]?(Q="xl/"+$e[H][1].replace(/[\/]?xl\//,""),safegetzipfile(n,Q)||(Q=$e[H][1]),safegetzipfile(n,Q)||(Q=ge.replace(/_rels\/.*$/,"")+$e[H][1]),ae=$e[H][2]):(Q="xl/worksheets/sheet"+(H+1-_e)+"."+Y,Q=Q.replace(/sheet0\./,"sheet.")),re=Q.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),_&&_.sheets!=null)switch(typeof _.sheets){case"number":if(H!=_.sheets)continue e;break;case"string":if(D.SheetNames[H].toLowerCase()!=_.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(_.sheets)){for(var X=!1,F=0;F!=_.sheets.length;++F)typeof _.sheets[F]=="number"&&_.sheets[F]==H&&(X=1),typeof _.sheets[F]=="string"&&_.sheets[F].toLowerCase()==D.SheetNames[H].toLowerCase()&&(X=1);if(!X)continue e}}safe_parse_sheet(n,Q,re,D.SheetNames[H],H,W,A,ae,_,O,I,M)}return U={Directory:C,Workbook:O,Props:D,Custprops:V,Deps:q,Sheets:A,SheetNames:D.SheetNames,Strings:strs,Styles:M,Themes:I,SSF:dup(table_fmt)},_&&_.bookFiles&&(n.files?(U.keys=S,U.files=n.files):(U.keys=[],U.files={},n.FullPaths.forEach(function(z,J){z=z.replace(/^Root Entry[\/]/,""),U.keys.push(z),U.files[z]=n.FileIndex[J]}))),_&&_.bookVBA&&(C.vba.length>0?U.vbaraw=getzipdata(n,strip_front_slash(C.vba[0]),!0):C.defaults&&C.defaults.bin===CT_VBA&&(U.vbaraw=getzipdata(n,"xl/vbaProject.bin",!0))),U.bookType=T?"xlsb":"xlsx",U}function parse_xlsxcfb(n,_){var x=_||{},E="Workbook",S=CFB.find(n,E);try{if(E="/!DataSpaces/Version",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);if(parse_DataSpaceVersionInfo(S.content),E="/!DataSpaces/DataSpaceMap",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);var C=parse_DataSpaceMap(S.content);if(C.length!==1||C[0].comps.length!==1||C[0].comps[0].t!==0||C[0].name!=="StrongEncryptionDataSpace"||C[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+E);if(E="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);var T=parse_DataSpaceDefinition(S.content);if(T.length!=1||T[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+E);if(E="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);parse_Primary(S.content)}catch{}if(E="/EncryptionInfo",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);var A=parse_EncryptionInfo(S.content);if(E="/EncryptedPackage",S=CFB.find(n,E),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+E);if(A[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(A[1],S.content,x.password||"",x);if(A[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(A[1],S.content,x.password||"",x);throw new Error("File is password-protected")}function write_zip_xlsb(n,_){n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),_.revssf=evert_num(n.SSF),_.revssf[n.SSF[65535]]=0,_.ssf=n.SSF),_.rels={},_.wbrels={},_.Strings=[],_.Strings.Count=0,_.Strings.Unique=0,browser_has_Map?_.revStrings=new Map:(_.revStrings={},_.revStrings.foo=[],delete _.revStrings.foo);var x="bin",E=!0,S=new_ct();fix_write_opts(_=_||{});var C=zip_new(),T="",A=0;if(_.cellXfs=[],get_cell_style(_.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),T="docProps/core.xml",zip_add_file(C,T,write_core_props(n.Props,_)),S.coreprops.push(T),add_rels(_.rels,2,T,RELS.CORE_PROPS),T="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var B=[],I=0;I<n.SheetNames.length;++I)(n.Workbook.Sheets[I]||{}).Hidden!=2&&B.push(n.SheetNames[I]);n.Props.SheetNames=B}for(n.Props.Worksheets=n.Props.SheetNames.length,zip_add_file(C,T,write_ext_props(n.Props)),S.extprops.push(T),add_rels(_.rels,3,T,RELS.EXT_PROPS),n.Custprops!==n.Props&&keys$1(n.Custprops||{}).length>0&&(T="docProps/custom.xml",zip_add_file(C,T,write_cust_props(n.Custprops)),S.custprops.push(T),add_rels(_.rels,4,T,RELS.CUST_PROPS)),A=1;A<=n.SheetNames.length;++A){var M={"!id":{}},O=n.Sheets[n.SheetNames[A-1]],D=(O||{})["!type"]||"sheet";switch(D){case"chart":default:T="xl/worksheets/sheet"+A+"."+x,zip_add_file(C,T,write_ws_bin(A-1,_,n,M)),S.sheets.push(T),add_rels(_.wbrels,-1,"worksheets/sheet"+A+"."+x,RELS.WS[0])}if(O){var L=O["!comments"],V=!1,U="";L&&L.length>0&&(U="xl/comments"+A+"."+x,zip_add_file(C,U,write_comments_bin(L)),S.comments.push(U),add_rels(M,-1,"../comments"+A+"."+x,RELS.CMNT),V=!0),O["!legacy"]&&V&&zip_add_file(C,"xl/drawings/vmlDrawing"+A+".vml",write_vml(A,O["!comments"])),delete O["!comments"],delete O["!legacy"]}M["!id"].rId1&&zip_add_file(C,get_rels_path(T),write_rels(M))}_.Strings!=null&&_.Strings.length>0&&(T="xl/sharedStrings."+x,zip_add_file(C,T,write_sst_bin(_.Strings)),S.strs.push(T),add_rels(_.wbrels,-1,"sharedStrings."+x,RELS.SST)),T="xl/workbook."+x,zip_add_file(C,T,write_wb_bin(n)),S.workbooks.push(T),add_rels(_.rels,1,T,RELS.WB),T="xl/theme/theme1.xml";var q=write_theme(n.Themes,_);return zip_add_file(C,T,q),S.themes.push(T),add_rels(_.wbrels,-1,"theme/theme1.xml",RELS.THEME),T="xl/styles."+x,zip_add_file(C,T,write_sty_bin(n,_)),S.styles.push(T),add_rels(_.wbrels,-1,"styles."+x,RELS.STY),n.vbaraw&&E&&(T="xl/vbaProject.bin",zip_add_file(C,T,n.vbaraw),S.vba.push(T),add_rels(_.wbrels,-1,"vbaProject.bin",RELS.VBA)),T="xl/metadata."+x,zip_add_file(C,T,write_xlmeta_bin()),S.metadata.push(T),add_rels(_.wbrels,-1,"metadata."+x,RELS.XLMETA),zip_add_file(C,"[Content_Types].xml",write_ct(S,_)),zip_add_file(C,"_rels/.rels",write_rels(_.rels)),zip_add_file(C,"xl/_rels/workbook."+x+".rels",write_rels(_.wbrels)),delete _.revssf,delete _.ssf,C}function write_zip_xlsx(n,_){n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),_.revssf=evert_num(n.SSF),_.revssf[n.SSF[65535]]=0,_.ssf=n.SSF),_.rels={},_.wbrels={},_.Strings=[],_.Strings.Count=0,_.Strings.Unique=0,browser_has_Map?_.revStrings=new Map:(_.revStrings={},_.revStrings.foo=[],delete _.revStrings.foo);var x="xml",E=VBAFMTS.indexOf(_.bookType)>-1,S=new_ct();fix_write_opts(_=_||{});var C=zip_new(),T="",A=0;if(_.cellXfs=[],get_cell_style(_.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),T="docProps/core.xml",zip_add_file(C,T,write_core_props(n.Props,_)),S.coreprops.push(T),add_rels(_.rels,2,T,RELS.CORE_PROPS),T="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var B=[],I=0;I<n.SheetNames.length;++I)(n.Workbook.Sheets[I]||{}).Hidden!=2&&B.push(n.SheetNames[I]);n.Props.SheetNames=B}n.Props.Worksheets=n.Props.SheetNames.length,zip_add_file(C,T,write_ext_props(n.Props)),S.extprops.push(T),add_rels(_.rels,3,T,RELS.EXT_PROPS),n.Custprops!==n.Props&&keys$1(n.Custprops||{}).length>0&&(T="docProps/custom.xml",zip_add_file(C,T,write_cust_props(n.Custprops)),S.custprops.push(T),add_rels(_.rels,4,T,RELS.CUST_PROPS));var M=["SheetJ5"];for(_.tcid=0,A=1;A<=n.SheetNames.length;++A){var O={"!id":{}},D=n.Sheets[n.SheetNames[A-1]],L=(D||{})["!type"]||"sheet";switch(L){case"chart":default:T="xl/worksheets/sheet"+A+"."+x,zip_add_file(C,T,write_ws_xml(A-1,_,n,O)),S.sheets.push(T),add_rels(_.wbrels,-1,"worksheets/sheet"+A+"."+x,RELS.WS[0])}if(D){var V=D["!comments"],U=!1,q="";if(V&&V.length>0){var H=!1;V.forEach(function(W){W[1].forEach(function(Q){Q.T==!0&&(H=!0)})}),H&&(q="xl/threadedComments/threadedComment"+A+".xml",zip_add_file(C,q,write_tcmnt_xml(V,M,_)),S.threadedcomments.push(q),add_rels(O,-1,"../threadedComments/threadedComment"+A+".xml",RELS.TCMNT)),q="xl/comments"+A+"."+x,zip_add_file(C,q,write_comments_xml(V)),S.comments.push(q),add_rels(O,-1,"../comments"+A+"."+x,RELS.CMNT),U=!0}D["!legacy"]&&U&&zip_add_file(C,"xl/drawings/vmlDrawing"+A+".vml",write_vml(A,D["!comments"])),delete D["!comments"],delete D["!legacy"]}O["!id"].rId1&&zip_add_file(C,get_rels_path(T),write_rels(O))}return _.Strings!=null&&_.Strings.length>0&&(T="xl/sharedStrings."+x,zip_add_file(C,T,write_sst_xml(_.Strings,_)),S.strs.push(T),add_rels(_.wbrels,-1,"sharedStrings."+x,RELS.SST)),T="xl/workbook."+x,zip_add_file(C,T,write_wb_xml(n)),S.workbooks.push(T),add_rels(_.rels,1,T,RELS.WB),T="xl/theme/theme1.xml",zip_add_file(C,T,write_theme(n.Themes,_)),S.themes.push(T),add_rels(_.wbrels,-1,"theme/theme1.xml",RELS.THEME),T="xl/styles."+x,zip_add_file(C,T,write_sty_xml(n,_)),S.styles.push(T),add_rels(_.wbrels,-1,"styles."+x,RELS.STY),n.vbaraw&&E&&(T="xl/vbaProject.bin",zip_add_file(C,T,n.vbaraw),S.vba.push(T),add_rels(_.wbrels,-1,"vbaProject.bin",RELS.VBA)),T="xl/metadata."+x,zip_add_file(C,T,write_xlmeta_xml()),S.metadata.push(T),add_rels(_.wbrels,-1,"metadata."+x,RELS.XLMETA),M.length>1&&(T="xl/persons/person.xml",zip_add_file(C,T,write_people_xml(M)),S.people.push(T),add_rels(_.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(C,"[Content_Types].xml",write_ct(S,_)),zip_add_file(C,"_rels/.rels",write_rels(_.rels)),zip_add_file(C,"xl/_rels/workbook."+x+".rels",write_rels(_.wbrels)),delete _.revssf,delete _.ssf,C}function firstbyte(n,_){var x="";switch((_||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":x=Base64_decode(n.slice(0,12));break;case"binary":x=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(_&&_.type||"undefined"))}return[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3),x.charCodeAt(4),x.charCodeAt(5),x.charCodeAt(6),x.charCodeAt(7)]}function read_cfb(n,_){return CFB.find(n,"EncryptedPackage")?parse_xlsxcfb(n,_):parse_xlscfb(n,_)}function read_zip(n,_){var x,E=n,S=_||{};return S.type||(S.type=has_buf&&Buffer.isBuffer(n)?"buffer":"base64"),x=zip_read(E,S),parse_zip(x,S)}function read_plaintext(n,_){var x=0;e:for(;x<n.length;)switch(n.charCodeAt(x)){case 10:case 13:case 32:++x;break;case 60:return parse_xlml(n.slice(x),_);default:break e}return PRN.to_workbook(n,_)}function read_plaintext_raw(n,_){var x="",E=firstbyte(n,_);switch(_.type){case"base64":x=Base64_decode(n);break;case"binary":x=n;break;case"buffer":x=n.toString("binary");break;case"array":x=cc2str(n);break;default:throw new Error("Unrecognized type "+_.type)}return E[0]==239&&E[1]==187&&E[2]==191&&(x=utf8read(x)),_.type="binary",read_plaintext(x,_)}function read_utf16(n,_){var x=n;return _.type=="base64"&&(x=Base64_decode(x)),x=utf16leread(x.slice(2)),_.type="binary",read_plaintext(x,_)}function bstrify(n){return n.match(/[^\x00-\x7F]/)?utf8write(n):n}function read_prn(n,_,x,E){return E?(x.type="string",PRN.to_workbook(n,x)):PRN.to_workbook(_,x)}function readSync(n,_){reset_cp();var x=_||{};if(x.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer)return readSync(new Uint8Array(n),(x=dup(x),x.type="array",x));typeof Uint8Array<"u"&&n instanceof Uint8Array&&!x.type&&(x.type=typeof Deno<"u"?"buffer":"array");var E=n,S=[0,0,0,0],C=!1;if(x.cellStyles&&(x.cellNF=!0,x.sheetStubs=!0),_ssfopts={},x.dateNF&&(_ssfopts.dateNF=x.dateNF),x.type||(x.type=has_buf&&Buffer.isBuffer(n)?"buffer":"base64"),x.type=="file"&&(x.type=has_buf?"buffer":"binary",E=read_binary(n),typeof Uint8Array<"u"&&!has_buf&&(x.type="array")),x.type=="string"&&(C=!0,x.type="binary",x.codepage=65001,E=bstrify(n)),x.type=="array"&&typeof Uint8Array<"u"&&n instanceof Uint8Array&&typeof ArrayBuffer<"u"){var T=new ArrayBuffer(3),A=new Uint8Array(T);if(A.foo="bar",!A.foo)return x=dup(x),x.type="array",readSync(ab2a(E),x)}switch((S=firstbyte(E,x))[0]){case 208:if(S[1]===207&&S[2]===17&&S[3]===224&&S[4]===161&&S[5]===177&&S[6]===26&&S[7]===225)return read_cfb(CFB.read(E,x),x);break;case 9:if(S[1]<=8)return parse_xlscfb(E,x);break;case 60:return parse_xlml(E,x);case 73:if(S[1]===73&&S[2]===42&&S[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(S[1]===68)return read_wb_ID(E,x);break;case 84:if(S[1]===65&&S[2]===66&&S[3]===76)return DIF.to_workbook(E,x);break;case 80:return S[1]===75&&S[2]<9&&S[3]<9?read_zip(E,x):read_prn(n,E,x,C);case 239:return S[3]===60?parse_xlml(E,x):read_prn(n,E,x,C);case 255:if(S[1]===254)return read_utf16(E,x);if(S[1]===0&&S[2]===2&&S[3]===0)return WK_.to_workbook(E,x);break;case 0:if(S[1]===0&&(S[2]>=2&&S[3]===0||S[2]===0&&(S[3]===8||S[3]===9)))return WK_.to_workbook(E,x);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(E,x);case 123:if(S[1]===92&&S[2]===114&&S[3]===116)return rtf_to_workbook(E,x);break;case 10:case 13:case 32:return read_plaintext_raw(E,x);case 137:if(S[1]===80&&S[2]===78&&S[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(S[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(S[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(S[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(S[0])>-1&&S[2]<=12&&S[3]<=31?DBF.to_workbook(E,x):read_prn(n,E,x,C)}function readFileSync(n,_){var x=_||{};return x.type="file",readSync(n,x)}function write_cfb_ctr(n,_){switch(_.type){case"base64":case"binary":break;case"buffer":case"array":_.type="";break;case"file":return write_dl(_.file,CFB.write(n,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+_.bookType+"' files");default:throw new Error("Unrecognized type "+_.type)}return CFB.write(n,_)}function write_zip(n,_){switch(_.bookType){case"ods":return write_ods(n,_);case"numbers":return write_numbers_iwa(n,_);case"xlsb":return write_zip_xlsb(n,_);default:return write_zip_xlsx(n,_)}}function write_zip_type(n,_){var x=dup(_||{}),E=write_zip(n,x);return write_zip_denouement(E,x)}function write_zip_denouement(n,_){var x={},E=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(_.compression&&(x.compression="DEFLATE"),_.password)x.type=E;else switch(_.type){case"base64":x.type="base64";break;case"binary":x.type="string";break;case"string":throw new Error("'string' output type invalid for '"+_.bookType+"' files");case"buffer":case"file":x.type=E;break;default:throw new Error("Unrecognized type "+_.type)}var S=n.FullPaths?CFB.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[x.type]||x.type,compression:!!_.compression}):n.generate(x);if(typeof Deno<"u"&&typeof S=="string"){if(_.type=="binary"||_.type=="base64")return S;S=new Uint8Array(s2ab(S))}return _.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(S,_.password),_):_.type==="file"?write_dl(_.file,S):_.type=="string"?utf8read(S):S}function write_cfb_type(n,_){var x=_||{},E=write_xlscfb(n,x);return write_cfb_ctr(E,x)}function write_string_type(n,_,x){x||(x="");var E=x+n;switch(_.type){case"base64":return Base64_encode(utf8write(E));case"binary":return utf8write(E);case"string":return n;case"file":return write_dl(_.file,E,"utf8");case"buffer":return has_buf?Buffer_from(E,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(E):write_string_type(E,{type:"binary"}).split("").map(function(S){return S.charCodeAt(0)})}throw new Error("Unrecognized type "+_.type)}function write_stxt_type(n,_){switch(_.type){case"base64":return Base64_encode_pass(n);case"binary":return n;case"string":return n;case"file":return write_dl(_.file,n,"binary");case"buffer":return has_buf?Buffer_from(n,"binary"):n.split("").map(function(x){return x.charCodeAt(0)})}throw new Error("Unrecognized type "+_.type)}function write_binary_type(n,_){switch(_.type){case"string":case"base64":case"binary":for(var x="",E=0;E<n.length;++E)x+=String.fromCharCode(n[E]);return _.type=="base64"?Base64_encode(x):_.type=="string"?utf8read(x):x;case"file":return write_dl(_.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+_.type)}}function writeSync(n,_){reset_cp(),check_wb(n);var x=dup(_||{});if(x.cellStyles&&(x.cellNF=!0,x.sheetStubs=!0),x.type=="array"){x.type="binary";var E=writeSync(n,x);return x.type="array",s2ab(E)}var S=0;if(x.sheet&&(typeof x.sheet=="number"?S=x.sheet:S=n.SheetNames.indexOf(x.sheet),!n.SheetNames[S]))throw new Error("Sheet not found: "+x.sheet+" : "+typeof x.sheet);switch(x.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(n,x),x);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(n.Sheets[n.SheetNames[S]],x,n),x);case"htm":case"html":return write_string_type(sheet_to_html(n.Sheets[n.SheetNames[S]],x),x);case"txt":return write_stxt_type(sheet_to_txt(n.Sheets[n.SheetNames[S]],x),x);case"csv":return write_string_type(sheet_to_csv(n.Sheets[n.SheetNames[S]],x),x,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(n.Sheets[n.SheetNames[S]],x),x);case"dbf":return write_binary_type(DBF.from_sheet(n.Sheets[n.SheetNames[S]],x),x);case"prn":return write_string_type(PRN.from_sheet(n.Sheets[n.SheetNames[S]],x),x);case"rtf":return write_string_type(sheet_to_rtf(n.Sheets[n.SheetNames[S]]),x);case"eth":return write_string_type(ETH.from_sheet(n.Sheets[n.SheetNames[S]],x),x);case"fods":return write_string_type(write_ods(n,x),x);case"wk1":return write_binary_type(WK_.sheet_to_wk1(n.Sheets[n.SheetNames[S]],x),x);case"wk3":return write_binary_type(WK_.book_to_wk3(n,x),x);case"biff2":x.biff||(x.biff=2);case"biff3":x.biff||(x.biff=3);case"biff4":return x.biff||(x.biff=4),write_binary_type(write_biff_buf(n,x),x);case"biff5":x.biff||(x.biff=5);case"biff8":case"xla":case"xls":return x.biff||(x.biff=8),write_cfb_type(n,x);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(n,x);default:throw new Error("Unrecognized bookType |"+x.bookType+"|")}}function resolve_book_type(n){if(!n.bookType){var _={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},x=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();x.match(/^\.[a-z]+$/)&&(n.bookType=x.slice(1)),n.bookType=_[n.bookType]||n.bookType}}function writeFileSync(n,_,x){var E=x||{};return E.type="file",E.file=_,resolve_book_type(E),writeSync(n,E)}function make_json_row(n,_,x,E,S,C,T){var A=encode_row(x),B=T.defval,I=T.raw||!Object.prototype.hasOwnProperty.call(T,"raw"),M=!0,O=n["!data"]!=null,D=S===1?[]:{};if(S!==1)if(Object.defineProperty)try{Object.defineProperty(D,"__rowNum__",{value:x,enumerable:!1})}catch{D.__rowNum__=x}else D.__rowNum__=x;if(!O||n["!data"][x])for(var L=_.s.c;L<=_.e.c;++L){var V=O?(n["!data"][x]||[])[L]:n[E[L]+A];if(V===void 0||V.t===void 0){if(B===void 0)continue;C[L]!=null&&(D[C[L]]=B);continue}var U=V.v;switch(V.t){case"z":if(U==null)break;continue;case"e":U=U==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+V.t)}if(C[L]!=null){if(U==null)if(V.t=="e"&&U===null)D[C[L]]=null;else if(B!==void 0)D[C[L]]=B;else if(I&&U===null)D[C[L]]=null;else continue;else D[C[L]]=I&&(V.t!=="n"||V.t==="n"&&T.rawNumbers!==!1)?U:format_cell(V,U,T);U!=null&&(M=!1)}}return{row:D,isempty:M}}function sheet_to_json(n,_){if(n==null||n["!ref"]==null)return[];var x={t:"n",v:0},E=0,S=1,C=[],T=0,A="",B={s:{r:0,c:0},e:{r:0,c:0}},I=_||{},M=I.range!=null?I.range:n["!ref"];switch(I.header===1?E=1:I.header==="A"?E=2:Array.isArray(I.header)?E=3:I.header==null&&(E=0),typeof M){case"string":B=safe_decode_range(M);break;case"number":B=safe_decode_range(n["!ref"]),B.s.r=M;break;default:B=M}E>0&&(S=0);var O=encode_row(B.s.r),D=[],L=[],V=0,U=0,q=n["!data"]!=null,H=B.s.r,W=0,Q={};q&&!n["!data"][H]&&(n["!data"][H]=[]);var re=I.skipHidden&&n["!cols"]||[],ce=I.skipHidden&&n["!rows"]||[];for(W=B.s.c;W<=B.e.c;++W)if(!(re[W]||{}).hidden)switch(D[W]=encode_col(W),x=q?n["!data"][H][W]:n[D[W]+O],E){case 1:C[W]=W-B.s.c;break;case 2:C[W]=D[W];break;case 3:C[W]=I.header[W-B.s.c];break;default:if(x==null&&(x={w:"__EMPTY",t:"s"}),A=T=format_cell(x,null,I),U=Q[T]||0,!U)Q[T]=1;else{do A=T+"_"+U++;while(Q[A]);Q[T]=U,Q[A]=1}C[W]=A}for(H=B.s.r+S;H<=B.e.r;++H)if(!(ce[H]||{}).hidden){var ne=make_json_row(n,B,H,D,E,C,I);(ne.isempty===!1||(E===1?I.blankrows!==!1:I.blankrows))&&(L[V++]=ne.row)}return L.length=V,L}var qreg=/"/g;function make_csv_row(n,_,x,E,S,C,T,A){for(var B=!0,I=[],M="",O=encode_row(x),D=n["!data"]!=null,L=D&&n["!data"][x]||[],V=_.s.c;V<=_.e.c;++V)if(E[V]){var U=D?L[V]:n[E[V]+O];if(U==null)M="";else if(U.v!=null){B=!1,M=""+(A.rawNumbers&&U.t=="n"?U.v:format_cell(U,null,A));for(var q=0,H=0;q!==M.length;++q)if((H=M.charCodeAt(q))===S||H===C||H===34||A.forceQuotes){M='"'+M.replace(qreg,'""')+'"';break}M=="ID"&&(M='"ID"')}else U.f!=null&&!U.F?(B=!1,M="="+U.f,M.indexOf(",")>=0&&(M='"'+M.replace(qreg,'""')+'"')):M="";I.push(M)}return A.blankrows===!1&&B?null:I.join(T)}function sheet_to_csv(n,_){var x=[],E=_??{};if(n==null||n["!ref"]==null)return"";for(var S=safe_decode_range(n["!ref"]),C=E.FS!==void 0?E.FS:",",T=C.charCodeAt(0),A=E.RS!==void 0?E.RS:`
`,B=A.charCodeAt(0),I=new RegExp((C=="|"?"\\|":C)+"+$"),M="",O=[],D=E.skipHidden&&n["!cols"]||[],L=E.skipHidden&&n["!rows"]||[],V=S.s.c;V<=S.e.c;++V)(D[V]||{}).hidden||(O[V]=encode_col(V));for(var U=0,q=S.s.r;q<=S.e.r;++q)(L[q]||{}).hidden||(M=make_csv_row(n,S,q,O,T,B,C,E),M!=null&&(E.strip&&(M=M.replace(I,"")),(M||E.blankrows!==!1)&&x.push((U++?A:"")+M)));return x.join("")}function sheet_to_txt(n,_){_||(_={}),_.FS="	",_.RS=`
`;var x=sheet_to_csv(n,_);return x}function sheet_to_formulae(n){var _="",x,E="";if(n==null||n["!ref"]==null)return[];var S=safe_decode_range(n["!ref"]),C="",T=[],A,B=[],I=n["!data"]!=null;for(A=S.s.c;A<=S.e.c;++A)T[A]=encode_col(A);for(var M=S.s.r;M<=S.e.r;++M)for(C=encode_row(M),A=S.s.c;A<=S.e.c;++A)if(_=T[A]+C,x=I?(n["!data"][M]||[])[A]:n[_],E="",x!==void 0){if(x.F!=null){if(_=x.F,!x.f)continue;E=x.f,_.indexOf(":")==-1&&(_=_+":"+_)}if(x.f!=null)E=x.f;else{if(x.t=="z")continue;if(x.t=="n"&&x.v!=null)E=""+x.v;else if(x.t=="b")E=x.v?"TRUE":"FALSE";else if(x.w!==void 0)E="'"+x.w;else{if(x.v===void 0)continue;x.t=="s"?E="'"+x.v:E=""+x.v}}B[B.length]=_+"="+E}return B}function sheet_add_json(n,_,x){var E=x||{},S=n?n["!data"]!=null:E.dense,C=+!E.skipHeader,T=n||{};!n&&S&&(T["!data"]=[]);var A=0,B=0;if(T&&E.origin!=null)if(typeof E.origin=="number")A=E.origin;else{var I=typeof E.origin=="string"?decode_cell(E.origin):E.origin;A=I.r,B=I.c}var M={s:{c:0,r:0},e:{c:B,r:A+_.length-1+C}};if(T["!ref"]){var O=safe_decode_range(T["!ref"]);M.e.c=Math.max(M.e.c,O.e.c),M.e.r=Math.max(M.e.r,O.e.r),A==-1&&(A=O.e.r+1,M.e.r=A+_.length-1+C)}else A==-1&&(A=0,M.e.r=_.length-1+C);var D=E.header||[],L=0,V=[];_.forEach(function(q,H){S&&!T["!data"][A+H+C]&&(T["!data"][A+H+C]=[]),S&&(V=T["!data"][A+H+C]),keys$1(q).forEach(function(W){(L=D.indexOf(W))==-1&&(D[L=D.length]=W);var Q=q[W],re="z",ce="",ne=S?"":encode_col(B+L)+encode_row(A+H+C),Y=S?V[B+L]:T[ne];Q&&typeof Q=="object"&&!(Q instanceof Date)?S?V[B+L]=Q:T[ne]=Q:(typeof Q=="number"?re="n":typeof Q=="boolean"?re="b":typeof Q=="string"?re="s":Q instanceof Date?(re="d",E.cellDates||(re="n",Q=datenum(Q)),ce=Y!=null&&Y.z&&fmt_is_date(Y.z)?Y.z:E.dateNF||table_fmt[14]):Q===null&&E.nullError&&(re="e",Q=0),Y?(Y.t=re,Y.v=Q,delete Y.w,delete Y.R,ce&&(Y.z=ce)):S?V[B+L]=Y={t:re,v:Q}:T[ne]=Y={t:re,v:Q},ce&&(Y.z=ce))})}),M.e.c=Math.max(M.e.c,B+D.length-1);var U=encode_row(A);if(S&&!T["!data"][A]&&(T["!data"][A]=[]),C)for(L=0;L<D.length;++L)S?T["!data"][A][L+B]={t:"s",v:D[L]}:T[encode_col(L+B)+U]={t:"s",v:D[L]};return T["!ref"]=encode_range(M),T}function json_to_sheet(n,_){return sheet_add_json(null,n,_)}function ws_get_cell_stub(n,_,x){if(typeof _=="string"){if(n["!data"]!=null){var E=decode_cell(_);return n["!data"][E.r]||(n["!data"][E.r]=[]),n["!data"][E.r][E.c]||(n["!data"][E.r][E.c]={t:"z"})}return n[_]||(n[_]={t:"z"})}return typeof _!="number"?ws_get_cell_stub(n,encode_cell(_)):ws_get_cell_stub(n,encode_col(x||0)+encode_row(_))}function wb_sheet_idx(n,_){if(typeof _=="number"){if(_>=0&&n.SheetNames.length>_)return _;throw new Error("Cannot find sheet # "+_)}else if(typeof _=="string"){var x=n.SheetNames.indexOf(_);if(x>-1)return x;throw new Error("Cannot find sheet name |"+_+"|")}else throw new Error("Cannot find sheet |"+_+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(n,_,x,E){var S=1;if(!x)for(;S<=65535&&n.SheetNames.indexOf(x="Sheet"+S)!=-1;++S,x=void 0);if(!x||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(E&&n.SheetNames.indexOf(x)>=0){var C=x.match(/(^.*?)(\d+)$/);S=C&&+C[2]||0;var T=C&&C[1]||x;for(++S;S<=65535&&n.SheetNames.indexOf(x=T+S)!=-1;++S);}if(check_ws_name(x),n.SheetNames.indexOf(x)>=0)throw new Error("Worksheet with name |"+x+"| already exists!");return n.SheetNames.push(x),n.Sheets[x]=_,x}function book_set_sheet_visibility(n,_,x){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var E=wb_sheet_idx(n,_);switch(n.Workbook.Sheets[E]||(n.Workbook.Sheets[E]={}),x){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+x)}n.Workbook.Sheets[E].Hidden=x}function cell_set_number_format(n,_){return n.z=_,n}function cell_set_hyperlink(n,_,x){return _?(n.l={Target:_},x&&(n.l.Tooltip=x)):delete n.l,n}function cell_set_internal_link(n,_,x){return cell_set_hyperlink(n,"#"+_,x)}function cell_add_comment(n,_,x){n.c||(n.c=[]),n.c.push({t:_,a:x||"SheetJS"})}function sheet_set_array_formula(n,_,x,E){for(var S=typeof _!="string"?_:safe_decode_range(_),C=typeof _=="string"?_:encode_range(_),T=S.s.r;T<=S.e.r;++T)for(var A=S.s.c;A<=S.e.c;++A){var B=ws_get_cell_stub(n,T,A);B.t="n",B.F=C,delete B.v,T==S.s.r&&A==S.s.c&&(B.f=x,E&&(B.D=!0))}var I=decode_range(n["!ref"]);return I.s.r>S.s.r&&(I.s.r=S.s.r),I.s.c>S.s.c&&(I.s.c=S.s.c),I.e.r<S.e.r&&(I.e.r=S.e.r),I.e.c<S.e.c&&(I.e.c=S.e.c),n["!ref"]=encode_range(I),n}var utils$1={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},_Readable;function set_readable(n){_Readable=n}function write_csv_stream(n,_){var x=_Readable(),E=_??{};if(n==null||n["!ref"]==null)return x.push(null),x;for(var S=safe_decode_range(n["!ref"]),C=E.FS!==void 0?E.FS:",",T=C.charCodeAt(0),A=E.RS!==void 0?E.RS:`
`,B=A.charCodeAt(0),I=new RegExp((C=="|"?"\\|":C)+"+$"),M="",O=[],D=E.skipHidden&&n["!cols"]||[],L=E.skipHidden&&n["!rows"]||[],V=S.s.c;V<=S.e.c;++V)(D[V]||{}).hidden||(O[V]=encode_col(V));var U=S.s.r,q=!1,H=0;return x._read=function(){if(!q)return q=!0,x.push("\uFEFF");for(;U<=S.e.r;)if(++U,!(L[U-1]||{}).hidden&&(M=make_csv_row(n,S,U-1,O,T,B,C,E),M!=null&&(E.strip&&(M=M.replace(I,"")),M||E.blankrows!==!1)))return x.push((H++?A:"")+M);return x.push(null)},x}function write_html_stream(n,_){var x=_Readable(),E=_||{},S=E.header!=null?E.header:HTML_BEGIN,C=E.footer!=null?E.footer:HTML_END;x.push(S);var T=decode_range(n["!ref"]);x.push(make_html_preamble(n,T,E));var A=T.s.r,B=!1;return x._read=function(){if(A>T.e.r)return B||(B=!0,x.push("</table>"+C)),x.push(null);for(;A<=T.e.r;){x.push(make_html_row(n,T,A,E)),++A;break}},x}function write_json_stream(n,_){var x=_Readable({objectMode:!0});if(n==null||n["!ref"]==null)return x.push(null),x;var E={t:"n",v:0},S=0,C=1,T=[],A=0,B="",I={s:{r:0,c:0},e:{r:0,c:0}},M=_||{},O=M.range!=null?M.range:n["!ref"];switch(M.header===1?S=1:M.header==="A"?S=2:Array.isArray(M.header)&&(S=3),typeof O){case"string":I=safe_decode_range(O);break;case"number":I=safe_decode_range(n["!ref"]),I.s.r=O;break;default:I=O}S>0&&(C=0);var D=encode_row(I.s.r),L=[],V=0,U=n["!data"]!=null,q=I.s.r,H=0,W={};U&&!n["!data"][q]&&(n["!data"][q]=[]);var Q=M.skipHidden&&n["!cols"]||[],re=M.skipHidden&&n["!rows"]||[];for(H=I.s.c;H<=I.e.c;++H)if(!(Q[H]||{}).hidden)switch(L[H]=encode_col(H),E=U?n["!data"][q][H]:n[L[H]+D],S){case 1:T[H]=H-I.s.c;break;case 2:T[H]=L[H];break;case 3:T[H]=M.header[H-I.s.c];break;default:if(E==null&&(E={w:"__EMPTY",t:"s"}),B=A=format_cell(E,null,M),V=W[A]||0,!V)W[A]=1;else{do B=A+"_"+V++;while(W[B]);W[A]=V,W[B]=1}T[H]=B}return q=I.s.r+C,x._read=function(){for(;q<=I.e.r;)if(!(re[q-1]||{}).hidden){var ce=make_json_row(n,I,q,L,S,T,M);if(++q,ce.isempty===!1||(S===1?M.blankrows!==!1:M.blankrows)){x.push(ce.row);return}}return x.push(null)},x}var __stream={to_json:write_json_stream,to_html:write_html_stream,to_csv:write_csv_stream,set_readable};function bind(n,_){return function(){return n.apply(_,arguments)}}const{toString:toString$3}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>_=>{const x=toString$3.call(_);return n[x]||(n[x]=x.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),_=>kindOf(_)===n),typeOfTest=n=>_=>typeof _===n,{isArray:isArray$5}=Array,isUndefined=typeOfTest("undefined");function isBuffer$1(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction$1(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer$3=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let _;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_=ArrayBuffer.isView(n):_=n&&n.buffer&&isArrayBuffer$3(n.buffer),_}const isString$4=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$1=n=>n!==null&&typeof n=="object",isBoolean$2=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const _=getPrototypeOf(n);return(_===null||_===Object.prototype||Object.getPrototypeOf(_)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate$2=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject$1(n)&&isFunction$1(n.pipe),isFormData=n=>{let _;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction$1(n.append)&&((_=kindOf(n))==="formdata"||_==="object"&&isFunction$1(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,_,{allOwnKeys:x=!1}={}){if(n===null||typeof n>"u")return;let E,S;if(typeof n!="object"&&(n=[n]),isArray$5(n))for(E=0,S=n.length;E<S;E++)_.call(null,n[E],E,n);else{const C=x?Object.getOwnPropertyNames(n):Object.keys(n),T=C.length;let A;for(E=0;E<T;E++)A=C[E],_.call(null,n[A],A,n)}}function findKey(n,_){_=_.toLowerCase();const x=Object.keys(n);let E=x.length,S;for(;E-- >0;)if(S=x[E],_===S.toLowerCase())return S;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1)(),isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge(){const{caseless:n}=isContextDefined(this)&&this||{},_={},x=(E,S)=>{const C=n&&findKey(_,S)||S;isPlainObject(_[C])&&isPlainObject(E)?_[C]=merge(_[C],E):isPlainObject(E)?_[C]=merge({},E):isArray$5(E)?_[C]=E.slice():_[C]=E};for(let E=0,S=arguments.length;E<S;E++)arguments[E]&&forEach(arguments[E],x);return _}const extend=(n,_,x,{allOwnKeys:E}={})=>(forEach(_,(S,C)=>{x&&isFunction$1(S)?n[C]=bind(S,x):n[C]=S},{allOwnKeys:E}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,_,x,E)=>{n.prototype=Object.create(_.prototype,E),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:_.prototype}),x&&Object.assign(n.prototype,x)},toFlatObject=(n,_,x,E)=>{let S,C,T;const A={};if(_=_||{},n==null)return _;do{for(S=Object.getOwnPropertyNames(n),C=S.length;C-- >0;)T=S[C],(!E||E(T,n,_))&&!A[T]&&(_[T]=n[T],A[T]=!0);n=x!==!1&&getPrototypeOf(n)}while(n&&(!x||x(n,_))&&n!==Object.prototype);return _},endsWith=(n,_,x)=>{n=String(n),(x===void 0||x>n.length)&&(x=n.length),x-=_.length;const E=n.indexOf(_,x);return E!==-1&&E===x},toArray=n=>{if(!n)return null;if(isArray$5(n))return n;let _=n.length;if(!isNumber$2(_))return null;const x=new Array(_);for(;_-- >0;)x[_]=n[_];return x},isTypedArray$1=(n=>_=>n&&_ instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,_)=>{const E=(n&&n[Symbol.iterator]).call(n);let S;for(;(S=E.next())&&!S.done;){const C=S.value;_.call(n,C[0],C[1])}},matchAll=(n,_)=>{let x;const E=[];for(;(x=n.exec(_))!==null;)E.push(x);return E},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(x,E,S){return E.toUpperCase()+S}),hasOwnProperty=(({hasOwnProperty:n})=>(_,x)=>n.call(_,x))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(n,_)=>{const x=Object.getOwnPropertyDescriptors(n),E={};forEach(x,(S,C)=>{let T;(T=_(S,C,n))!==!1&&(E[C]=T||S)}),Object.defineProperties(n,E)},freezeMethods=n=>{reduceDescriptors(n,(_,x)=>{if(isFunction$1(n)&&["arguments","caller","callee"].indexOf(x)!==-1)return!1;const E=n[x];if(isFunction$1(E)){if(_.enumerable=!1,"writable"in _){_.writable=!1;return}_.set||(_.set=()=>{throw Error("Can not rewrite read-only method '"+x+"'")})}})},toObjectSet=(n,_)=>{const x={},E=S=>{S.forEach(C=>{x[C]=!0})};return isArray$5(n)?E(n):E(String(n).split(_)),x},noop$1=()=>{},toFiniteNumber=(n,_)=>(n=+n,Number.isFinite(n)?n:_),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(n=16,_=ALPHABET.ALPHA_DIGIT)=>{let x="";const{length:E}=_;for(;n--;)x+=_[Math.random()*E|0];return x};function isSpecCompliantForm(n){return!!(n&&isFunction$1(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const toJSONObject=n=>{const _=new Array(10),x=(E,S)=>{if(isObject$1(E)){if(_.indexOf(E)>=0)return;if(!("toJSON"in E)){_[S]=E;const C=isArray$5(E)?[]:{};return forEach(E,(T,A)=>{const B=x(T,S+1);!isUndefined(B)&&(C[A]=B)}),_[S]=void 0,C}}return E};return x(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject$1(n)||isFunction$1(n))&&isFunction$1(n.then)&&isFunction$1(n.catch),utils={isArray:isArray$5,isArrayBuffer:isArrayBuffer$3,isBuffer:isBuffer$1,isFormData,isArrayBufferView,isString:isString$4,isNumber:isNumber$2,isBoolean:isBoolean$2,isObject:isObject$1,isPlainObject,isUndefined,isDate:isDate$2,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(n,_,x,E,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",_&&(this.code=_),x&&(this.config=x),E&&(this.request=E),S&&(this.response=S)}utils.inherits(AxiosError,Error,{toJSON:function n(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,_,x,E,S,C)=>{const T=Object.create(prototype$1);return utils.toFlatObject(n,T,function(B){return B!==Error.prototype},A=>A!=="isAxiosError"),AxiosError.call(T,n.message,_,x,E,S),T.cause=n,T.name=n.name,C&&Object.assign(T,C),T};const httpAdapter=null;function isVisitable(n){return utils.isPlainObject(n)||utils.isArray(n)}function removeBrackets(n){return utils.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,_,x){return n?n.concat(_).map(function(S,C){return S=removeBrackets(S),!x&&C?"["+S+"]":S}).join(x?".":""):_}function isFlatArray(n){return utils.isArray(n)&&!n.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function n(_){return/^is[A-Z]/.test(_)});function toFormData(n,_,x){if(!utils.isObject(n))throw new TypeError("target must be an object");_=_||new FormData,x=utils.toFlatObject(x,{metaTokens:!0,dots:!1,indexes:!1},!1,function(U,q){return!utils.isUndefined(q[U])});const E=x.metaTokens,S=x.visitor||M,C=x.dots,T=x.indexes,B=(x.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(_);if(!utils.isFunction(S))throw new TypeError("visitor must be a function");function I(V){if(V===null)return"";if(utils.isDate(V))return V.toISOString();if(!B&&utils.isBlob(V))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(V)||utils.isTypedArray(V)?B&&typeof Blob=="function"?new Blob([V]):Buffer$5.from(V):V}function M(V,U,q){let H=V;if(V&&!q&&typeof V=="object"){if(utils.endsWith(U,"{}"))U=E?U:U.slice(0,-2),V=JSON.stringify(V);else if(utils.isArray(V)&&isFlatArray(V)||(utils.isFileList(V)||utils.endsWith(U,"[]"))&&(H=utils.toArray(V)))return U=removeBrackets(U),H.forEach(function(Q,re){!(utils.isUndefined(Q)||Q===null)&&_.append(T===!0?renderKey([U],re,C):T===null?U:U+"[]",I(Q))}),!1}return isVisitable(V)?!0:(_.append(renderKey(q,U,C),I(V)),!1)}const O=[],D=Object.assign(predicates,{defaultVisitor:M,convertValue:I,isVisitable});function L(V,U){if(!utils.isUndefined(V)){if(O.indexOf(V)!==-1)throw Error("Circular reference detected in "+U.join("."));O.push(V),utils.forEach(V,function(H,W){(!(utils.isUndefined(H)||H===null)&&S.call(_,H,utils.isString(W)?W.trim():W,U,D))===!0&&L(H,U?U.concat(W):[W])}),O.pop()}}if(!utils.isObject(n))throw new TypeError("data must be an object");return L(n),_}function encode$4(n){const _={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(E){return _[E]})}function AxiosURLSearchParams(n,_){this._pairs=[],n&&toFormData(n,this,_)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function n(_,x){this._pairs.push([_,x])};prototype.toString=function n(_){const x=_?function(E){return _.call(this,E,encode$4)}:encode$4;return this._pairs.map(function(S){return x(S[0])+"="+x(S[1])},"").join("&")};function encode$3(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,_,x){if(!_)return n;const E=x&&x.encode||encode$3,S=x&&x.serialize;let C;if(S?C=S(_,x):C=utils.isURLSearchParams(_)?_.toString():new AxiosURLSearchParams(_,x).toString(E),C){const T=n.indexOf("#");T!==-1&&(n=n.slice(0,T)),n+=(n.indexOf("?")===-1?"?":"&")+C}return n}class InterceptorManager{constructor(){this.handlers=[]}use(_,x,E){return this.handlers.push({fulfilled:_,rejected:x,synchronous:E?E.synchronous:!1,runWhen:E?E.runWhen:null}),this.handlers.length-1}eject(_){this.handlers[_]&&(this.handlers[_]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_){utils.forEach(this.handlers,function(E){E!==null&&_(E)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let n;return typeof navigator<"u"&&((n=navigator.product)==="ReactNative"||n==="NativeScript"||n==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(n,_){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(x,E,S,C){return platform.isNode&&utils.isBuffer(x)?(this.append(E,x.toString("base64")),!1):C.defaultVisitor.apply(this,arguments)}},_))}function parsePropPath(n){return utils.matchAll(/\w+|\[(\w*)]/g,n).map(_=>_[0]==="[]"?"":_[1]||_[0])}function arrayToObject(n){const _={},x=Object.keys(n);let E;const S=x.length;let C;for(E=0;E<S;E++)C=x[E],_[C]=n[C];return _}function formDataToJSON(n){function _(x,E,S,C){let T=x[C++];const A=Number.isFinite(+T),B=C>=x.length;return T=!T&&utils.isArray(S)?S.length:T,B?(utils.hasOwnProp(S,T)?S[T]=[S[T],E]:S[T]=E,!A):((!S[T]||!utils.isObject(S[T]))&&(S[T]=[]),_(x,E,S[T],C)&&utils.isArray(S[T])&&(S[T]=arrayToObject(S[T])),!A)}if(utils.isFormData(n)&&utils.isFunction(n.entries)){const x={};return utils.forEachEntry(n,(E,S)=>{_(parsePropPath(E),S,x,0)}),x}return null}function stringifySafely(n,_,x){if(utils.isString(n))try{return(_||JSON.parse)(n),utils.trim(n)}catch(E){if(E.name!=="SyntaxError")throw E}return(x||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:platform.isNode?"http":"xhr",transformRequest:[function n(_,x){const E=x.getContentType()||"",S=E.indexOf("application/json")>-1,C=utils.isObject(_);if(C&&utils.isHTMLForm(_)&&(_=new FormData(_)),utils.isFormData(_))return S&&S?JSON.stringify(formDataToJSON(_)):_;if(utils.isArrayBuffer(_)||utils.isBuffer(_)||utils.isStream(_)||utils.isFile(_)||utils.isBlob(_))return _;if(utils.isArrayBufferView(_))return _.buffer;if(utils.isURLSearchParams(_))return x.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_.toString();let A;if(C){if(E.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_,this.formSerializer).toString();if((A=utils.isFileList(_))||E.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return toFormData(A?{"files[]":_}:_,B&&new B,this.formSerializer)}}return C||S?(x.setContentType("application/json",!1),stringifySafely(_)):_}],transformResponse:[function n(_){const x=this.transitional||defaults.transitional,E=x&&x.forcedJSONParsing,S=this.responseType==="json";if(_&&utils.isString(_)&&(E&&!this.responseType||S)){const T=!(x&&x.silentJSONParsing)&&S;try{return JSON.parse(_)}catch(A){if(T)throw A.name==="SyntaxError"?AxiosError.from(A,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):A}}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function n(_){return _>=200&&_<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils.forEach(["delete","get","head","post","put","patch"],n=>{defaults.headers[n]={}});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const _={};let x,E,S;return n&&n.split(`
`).forEach(function(T){S=T.indexOf(":"),x=T.substring(0,S).trim().toLowerCase(),E=T.substring(S+1).trim(),!(!x||_[x]&&ignoreDuplicateOf[x])&&(x==="set-cookie"?_[x]?_[x].push(E):_[x]=[E]:_[x]=_[x]?_[x]+", "+E:E)}),_},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const _=Object.create(null),x=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let E;for(;E=x.exec(n);)_[E[1]]=E[2];return _}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,_,x,E,S){if(utils.isFunction(E))return E.call(this,_,x);if(S&&(_=x),!!utils.isString(_)){if(utils.isString(E))return _.indexOf(E)!==-1;if(utils.isRegExp(E))return E.test(_)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_,x,E)=>x.toUpperCase()+E)}function buildAccessors(n,_){const x=utils.toCamelCase(" "+_);["get","set","has"].forEach(E=>{Object.defineProperty(n,E+x,{value:function(S,C,T){return this[E].call(this,_,S,C,T)},configurable:!0})})}class AxiosHeaders{constructor(_){_&&this.set(_)}set(_,x,E){const S=this;function C(A,B,I){const M=normalizeHeader(B);if(!M)throw new Error("header name must be a non-empty string");const O=utils.findKey(S,M);(!O||S[O]===void 0||I===!0||I===void 0&&S[O]!==!1)&&(S[O||B]=normalizeValue(A))}const T=(A,B)=>utils.forEach(A,(I,M)=>C(I,M,B));return utils.isPlainObject(_)||_ instanceof this.constructor?T(_,x):utils.isString(_)&&(_=_.trim())&&!isValidHeaderName(_)?T(parseHeaders(_),x):_!=null&&C(x,_,E),this}get(_,x){if(_=normalizeHeader(_),_){const E=utils.findKey(this,_);if(E){const S=this[E];if(!x)return S;if(x===!0)return parseTokens(S);if(utils.isFunction(x))return x.call(this,S,E);if(utils.isRegExp(x))return x.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(_,x){if(_=normalizeHeader(_),_){const E=utils.findKey(this,_);return!!(E&&this[E]!==void 0&&(!x||matchHeaderValue(this,this[E],E,x)))}return!1}delete(_,x){const E=this;let S=!1;function C(T){if(T=normalizeHeader(T),T){const A=utils.findKey(E,T);A&&(!x||matchHeaderValue(E,E[A],A,x))&&(delete E[A],S=!0)}}return utils.isArray(_)?_.forEach(C):C(_),S}clear(_){const x=Object.keys(this);let E=x.length,S=!1;for(;E--;){const C=x[E];(!_||matchHeaderValue(this,this[C],C,_,!0))&&(delete this[C],S=!0)}return S}normalize(_){const x=this,E={};return utils.forEach(this,(S,C)=>{const T=utils.findKey(E,C);if(T){x[T]=normalizeValue(S),delete x[C];return}const A=_?formatHeader(C):String(C).trim();A!==C&&delete x[C],x[A]=normalizeValue(S),E[A]=!0}),this}concat(..._){return this.constructor.concat(this,..._)}toJSON(_){const x=Object.create(null);return utils.forEach(this,(E,S)=>{E!=null&&E!==!1&&(x[S]=_&&utils.isArray(E)?E.join(", "):E)}),x}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_,x])=>_+": "+x).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_){return _ instanceof this?_:new this(_)}static concat(_,...x){const E=new this(_);return x.forEach(S=>E.set(S)),E}static accessor(_){const E=(this[$internals]=this[$internals]={accessors:{}}).accessors,S=this.prototype;function C(T){const A=normalizeHeader(T);E[A]||(buildAccessors(S,T),E[A]=!0)}return utils.isArray(_)?_.forEach(C):C(_),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.reduceDescriptors(AxiosHeaders.prototype,({value:n},_)=>{let x=_[0].toUpperCase()+_.slice(1);return{get:()=>n,set(E){this[x]=E}}});utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(n,_){const x=this||defaults$1,E=_||x,S=AxiosHeaders$1.from(E.headers);let C=E.data;return utils.forEach(n,function(A){C=A.call(x,C,S.normalize(),_?_.status:void 0)}),S.normalize(),C}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,_,x){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,_,x),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(n,_,x){const E=x.config.validateStatus;!x.status||!E||E(x.status)?n(x):_(new AxiosError("Request failed with status code "+x.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(x.status/100)-4],x.config,x.request,x))}const cookies=platform.isStandardBrowserEnv?function n(){return{write:function(x,E,S,C,T,A){const B=[];B.push(x+"="+encodeURIComponent(E)),utils.isNumber(S)&&B.push("expires="+new Date(S).toGMTString()),utils.isString(C)&&B.push("path="+C),utils.isString(T)&&B.push("domain="+T),A===!0&&B.push("secure"),document.cookie=B.join("; ")},read:function(x){const E=document.cookie.match(new RegExp("(^|;\\s*)("+x+")=([^;]*)"));return E?decodeURIComponent(E[3]):null},remove:function(x){this.write(x,"",Date.now()-864e5)}}}():function n(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,_){return _?n.replace(/\/+$/,"")+"/"+_.replace(/^\/+/,""):n}function buildFullPath(n,_){return n&&!isAbsoluteURL(_)?combineURLs(n,_):_}const isURLSameOrigin=platform.isStandardBrowserEnv?function n(){const _=/(msie|trident)/i.test(navigator.userAgent),x=document.createElement("a");let E;function S(C){let T=C;return _&&(x.setAttribute("href",T),T=x.href),x.setAttribute("href",T),{href:x.href,protocol:x.protocol?x.protocol.replace(/:$/,""):"",host:x.host,search:x.search?x.search.replace(/^\?/,""):"",hash:x.hash?x.hash.replace(/^#/,""):"",hostname:x.hostname,port:x.port,pathname:x.pathname.charAt(0)==="/"?x.pathname:"/"+x.pathname}}return E=S(window.location.href),function(T){const A=utils.isString(T)?S(T):T;return A.protocol===E.protocol&&A.host===E.host}}():function n(){return function(){return!0}}();function parseProtocol(n){const _=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return _&&_[1]||""}function speedometer(n,_){n=n||10;const x=new Array(n),E=new Array(n);let S=0,C=0,T;return _=_!==void 0?_:1e3,function(B){const I=Date.now(),M=E[C];T||(T=I),x[S]=B,E[S]=I;let O=C,D=0;for(;O!==S;)D+=x[O++],O=O%n;if(S=(S+1)%n,S===C&&(C=(C+1)%n),I-T<_)return;const L=M&&I-M;return L?Math.round(D*1e3/L):void 0}}function progressEventReducer(n,_){let x=0;const E=speedometer(50,250);return S=>{const C=S.loaded,T=S.lengthComputable?S.total:void 0,A=C-x,B=E(A),I=C<=T;x=C;const M={loaded:C,total:T,progress:T?C/T:void 0,bytes:A,rate:B||void 0,estimated:B&&T&&I?(T-C)/B:void 0,event:S};M[_?"download":"upload"]=!0,n(M)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(x,E){let S=n.data;const C=AxiosHeaders$1.from(n.headers).normalize(),T=n.responseType;let A;function B(){n.cancelToken&&n.cancelToken.unsubscribe(A),n.signal&&n.signal.removeEventListener("abort",A)}utils.isFormData(S)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?C.setContentType(!1):C.setContentType("multipart/form-data;",!1));let I=new XMLHttpRequest;if(n.auth){const L=n.auth.username||"",V=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";C.set("Authorization","Basic "+btoa(L+":"+V))}const M=buildFullPath(n.baseURL,n.url);I.open(n.method.toUpperCase(),buildURL(M,n.params,n.paramsSerializer),!0),I.timeout=n.timeout;function O(){if(!I)return;const L=AxiosHeaders$1.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),U={data:!T||T==="text"||T==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:L,config:n,request:I};settle(function(H){x(H),B()},function(H){E(H),B()},U),I=null}if("onloadend"in I?I.onloadend=O:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(O)},I.onabort=function(){I&&(E(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,I)),I=null)},I.onerror=function(){E(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,I)),I=null},I.ontimeout=function(){let V=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const U=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&(V=n.timeoutErrorMessage),E(new AxiosError(V,U.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,I)),I=null},platform.isStandardBrowserEnv){const L=(n.withCredentials||isURLSameOrigin(M))&&n.xsrfCookieName&&cookies.read(n.xsrfCookieName);L&&C.set(n.xsrfHeaderName,L)}S===void 0&&C.setContentType(null),"setRequestHeader"in I&&utils.forEach(C.toJSON(),function(V,U){I.setRequestHeader(U,V)}),utils.isUndefined(n.withCredentials)||(I.withCredentials=!!n.withCredentials),T&&T!=="json"&&(I.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&I.addEventListener("progress",progressEventReducer(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",progressEventReducer(n.onUploadProgress)),(n.cancelToken||n.signal)&&(A=L=>{I&&(E(!L||L.type?new CanceledError(null,n,I):L),I.abort(),I=null)},n.cancelToken&&n.cancelToken.subscribe(A),n.signal&&(n.signal.aborted?A():n.signal.addEventListener("abort",A)));const D=parseProtocol(M);if(D&&platform.protocols.indexOf(D)===-1){E(new AxiosError("Unsupported protocol "+D+":",AxiosError.ERR_BAD_REQUEST,n));return}I.send(S||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(n,_)=>{if(n){try{Object.defineProperty(n,"name",{value:_})}catch{}Object.defineProperty(n,"adapterName",{value:_})}});const adapters={getAdapter:n=>{n=utils.isArray(n)?n:[n];const{length:_}=n;let x,E;for(let S=0;S<_&&(x=n[S],!(E=utils.isString(x)?knownAdapters[x.toLowerCase()]:x));S++);if(!E)throw E===!1?new AxiosError(`Adapter ${x} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,x)?`Adapter '${x}' is not available in the build`:`Unknown adapter '${x}'`);if(!utils.isFunction(E))throw new TypeError("adapter is not a function");return E},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(E){return throwIfCancellationRequested(n),E.data=transformData.call(n,n.transformResponse,E),E.headers=AxiosHeaders$1.from(E.headers),E},function(E){return isCancel(E)||(throwIfCancellationRequested(n),E&&E.response&&(E.response.data=transformData.call(n,n.transformResponse,E.response),E.response.headers=AxiosHeaders$1.from(E.response.headers))),Promise.reject(E)})}const headersToObject=n=>n instanceof AxiosHeaders$1?n.toJSON():n;function mergeConfig(n,_){_=_||{};const x={};function E(I,M,O){return utils.isPlainObject(I)&&utils.isPlainObject(M)?utils.merge.call({caseless:O},I,M):utils.isPlainObject(M)?utils.merge({},M):utils.isArray(M)?M.slice():M}function S(I,M,O){if(utils.isUndefined(M)){if(!utils.isUndefined(I))return E(void 0,I,O)}else return E(I,M,O)}function C(I,M){if(!utils.isUndefined(M))return E(void 0,M)}function T(I,M){if(utils.isUndefined(M)){if(!utils.isUndefined(I))return E(void 0,I)}else return E(void 0,M)}function A(I,M,O){if(O in _)return E(I,M);if(O in n)return E(void 0,I)}const B={url:C,method:C,data:C,baseURL:T,transformRequest:T,transformResponse:T,paramsSerializer:T,timeout:T,timeoutMessage:T,withCredentials:T,adapter:T,responseType:T,xsrfCookieName:T,xsrfHeaderName:T,onUploadProgress:T,onDownloadProgress:T,decompress:T,maxContentLength:T,maxBodyLength:T,beforeRedirect:T,transport:T,httpAgent:T,httpsAgent:T,cancelToken:T,socketPath:T,responseEncoding:T,validateStatus:A,headers:(I,M)=>S(headersToObject(I),headersToObject(M),!0)};return utils.forEach(Object.keys(Object.assign({},n,_)),function(M){const O=B[M]||S,D=O(n[M],_[M],M);utils.isUndefined(D)&&O!==A||(x[M]=D)}),x}const VERSION="1.5.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,_)=>{validators$1[n]=function(E){return typeof E===n||"a"+(_<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function n(_,x,E){function S(C,T){return"[Axios v"+VERSION+"] Transitional option '"+C+"'"+T+(E?". "+E:"")}return(C,T,A)=>{if(_===!1)throw new AxiosError(S(T," has been removed"+(x?" in "+x:"")),AxiosError.ERR_DEPRECATED);return x&&!deprecatedWarnings[T]&&(deprecatedWarnings[T]=!0,console.warn(S(T," has been deprecated since v"+x+" and will be removed in the near future"))),_?_(C,T,A):!0}};function assertOptions(n,_,x){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const E=Object.keys(n);let S=E.length;for(;S-- >0;){const C=E[S],T=_[C];if(T){const A=n[C],B=A===void 0||T(A,C,n);if(B!==!0)throw new AxiosError("option "+C+" must be "+B,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(x!==!0)throw new AxiosError("Unknown option "+C,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_){this.defaults=_,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(_,x){typeof _=="string"?(x=x||{},x.url=_):x=_||{},x=mergeConfig(this.defaults,x);const{transitional:E,paramsSerializer:S,headers:C}=x;E!==void 0&&validator.assertOptions(E,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),S!=null&&(utils.isFunction(S)?x.paramsSerializer={serialize:S}:validator.assertOptions(S,{encode:validators.function,serialize:validators.function},!0)),x.method=(x.method||this.defaults.method||"get").toLowerCase();let T=C&&utils.merge(C.common,C[x.method]);C&&utils.forEach(["delete","get","head","post","put","patch","common"],V=>{delete C[V]}),x.headers=AxiosHeaders$1.concat(T,C);const A=[];let B=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(x)===!1||(B=B&&U.synchronous,A.unshift(U.fulfilled,U.rejected))});const I=[];this.interceptors.response.forEach(function(U){I.push(U.fulfilled,U.rejected)});let M,O=0,D;if(!B){const V=[dispatchRequest.bind(this),void 0];for(V.unshift.apply(V,A),V.push.apply(V,I),D=V.length,M=Promise.resolve(x);O<D;)M=M.then(V[O++],V[O++]);return M}D=A.length;let L=x;for(O=0;O<D;){const V=A[O++],U=A[O++];try{L=V(L)}catch(q){U.call(this,q);break}}try{M=dispatchRequest.call(this,L)}catch(V){return Promise.reject(V)}for(O=0,D=I.length;O<D;)M=M.then(I[O++],I[O++]);return M}getUri(_){_=mergeConfig(this.defaults,_);const x=buildFullPath(_.baseURL,_.url);return buildURL(x,_.params,_.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function n(_){Axios.prototype[_]=function(x,E){return this.request(mergeConfig(E||{},{method:_,url:x,data:(E||{}).data}))}});utils.forEach(["post","put","patch"],function n(_){function x(E){return function(C,T,A){return this.request(mergeConfig(A||{},{method:_,headers:E?{"Content-Type":"multipart/form-data"}:{},url:C,data:T}))}}Axios.prototype[_]=x(),Axios.prototype[_+"Form"]=x(!0)});const Axios$1=Axios;class CancelToken{constructor(_){if(typeof _!="function")throw new TypeError("executor must be a function.");let x;this.promise=new Promise(function(C){x=C});const E=this;this.promise.then(S=>{if(!E._listeners)return;let C=E._listeners.length;for(;C-- >0;)E._listeners[C](S);E._listeners=null}),this.promise.then=S=>{let C;const T=new Promise(A=>{E.subscribe(A),C=A}).then(S);return T.cancel=function(){E.unsubscribe(C)},T},_(function(C,T,A){E.reason||(E.reason=new CanceledError(C,T,A),x(E.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_){if(this.reason){_(this.reason);return}this._listeners?this._listeners.push(_):this._listeners=[_]}unsubscribe(_){if(!this._listeners)return;const x=this._listeners.indexOf(_);x!==-1&&this._listeners.splice(x,1)}static source(){let _;return{token:new CancelToken(function(S){_=S}),cancel:_}}}const CancelToken$1=CancelToken;function spread(n){return function(x){return n.apply(null,x)}}function isAxiosError(n){return utils.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,_])=>{HttpStatusCode[_]=n});const HttpStatusCode$1=HttpStatusCode;function createInstance(n){const _=new Axios$1(n),x=bind(Axios$1.prototype.request,_);return utils.extend(x,Axios$1.prototype,_,{allOwnKeys:!0}),utils.extend(x,_,null,{allOwnKeys:!0}),x.create=function(S){return createInstance(mergeConfig(n,S))},x}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function n(_){return Promise.all(_)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils.isHTMLForm(n)?new FormData(n):n);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;async function importerJSONdURL(n){return await(await axios$1.get(n)).data}async function importerFeuilleCalculDURL(n,_){const E=(await axios$1.get(n,{responseType:"arraybuffer"})).data,C=Object.assign({type:"buffer",cellDates:!0},_||{});return readSync(E,C)}class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class ClientMandatairifiable extends Callable{constructor(){super();$t(this,"vnements");$t(this,"tches");$t(this,"erreurs");this.vnements=new eventsExports.EventEmitter,this.tches={},this.erreurs=[],this.vnements.on("message",x=>{const{type:E}=x;switch(E){case"suivre":{const{id:S,donnes:C}=x;if(!this.tches[S])return;const{fSuivre:T}=this.tches[S];T(C);break}case"suivrePrt":{const{id:S,fonctions:C}=x;this.vnements.emit(S,{fonctions:C});break}case"action":{const{id:S,rsultat:C}=x;this.vnements.emit(S,{rsultat:C});break}case"erreur":{const{erreur:S,id:C}=x;C?this.vnements.emit(C,{erreur:S}):this.erreur({erreur:S,id:C});break}default:this.erreur({erreur:`Type inconnu ${E} dans message ${x}.`,id:x.id})}})}__call__(x,E={}){typeof E!="object"&&this.erreur({erreur:`La fonction ${x.join(".")} fut appele avec arguments ${E}. 
      Toute fonction mandataire Constellation doit tre appele avec un seul argument en format d'objet (dictionnaire).`});const S=v4$1(),C=Object.entries(E).find(T=>typeof T[1]=="function")?.[0];return C?this.appelerFonctionSuivre(S,x,E,C):this.appelerFonctionAction(S,x,E)}async appelerFonctionSuivre(x,E,S,C){const T=S[C],A=Object.fromEntries(Object.entries(S).filter(V=>typeof V[1]!="function"));T===void 0&&this.erreur({erreur:"Aucun argument de nom "+C+" n'a t donne pour "+E.join(".")}),Object.keys(S).length>Object.keys(A).length+1?this.erreur({erreur:"Plus d'un argument pour "+E.join(".")+" est une fonction : "+JSON.stringify(S),id:x}):typeof T!="function"&&this.erreur({erreur:"Argument "+C+"n'est pas une fonction : ",id:x});const B={type:"suivre",id:x,fonction:E,args:A,nomArgFonction:C},M={id:x,fSuivre:T,fRetour:async(V,U)=>{const q={type:"retour",id:x,fonction:V,args:U};this.envoyerMessage(q)}};this.tches[x]=M;const O=async()=>{await this.oublierTche(x)};this.envoyerMessage(B);const{fonctions:D,erreur:L}=(await once_1(this.vnements,x))[0];if(L&&this.erreur({erreur:L,id:x}),D&&D[0]){const V={fOublier:O};for(const U of D)V[U]=async(...q)=>{await this.tches[x]?.fRetour(U,q)};return V}else return O}async appelerFonctionAction(x,E,S){const C={type:"action",id:x,fonction:E,args:S},T=new Promise((A,B)=>{once_1(this.vnements,x).then(I=>{const{rsultat:M,erreur:O}=I[0];O?B(new Error(O)):A(M)})});return this.envoyerMessage(C),T}erreur({erreur:x,id:E}){const S={erreur:x,id:E};throw this.vnements.emit("erreur",{nouvelle:S,toutes:this.erreurs}),new Error(JSON.stringify(S))}async oublierTche(x){const E=this.tches[x];E&&await E.fRetour("fOublier"),delete this.tches[x]}}class Handler{constructor(_){$t(this,"listeAtributs");this.listeAtributs=_||[]}get(_,x){if(["vnements","erreurs"].includes(x))return _[x];{const S=[...this.listeAtributs,x],C=new Handler(S);return new Proxy(_,C)}}apply(_,x,E){return _.__call__(this.listeAtributs,E[0])}}const gnrerMandataire=n=>{const _=new Handler;return new Proxy(n,_)};function __decorate(n,_,x,E){var S=arguments.length,C=S<3?_:E===null?E=Object.getOwnPropertyDescriptor(_,x):E,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(n,_,x,E);else for(var A=n.length-1;A>=0;A--)(T=n[A])&&(C=(S<3?T(C):S>3?T(_,x,C):T(_,x))||C);return S>3&&C&&Object.defineProperty(_,x,C),C}typeof SuppressedError=="function"&&SuppressedError;var toStr$6=Object.prototype.toString,isArguments$2=function n(_){var x=toStr$6.call(_),E=x==="[object Arguments]";return E||(E=x!=="[object Array]"&&_!==null&&typeof _=="object"&&typeof _.length=="number"&&_.length>=0&&toStr$6.call(_.callee)==="[object Function]"),E},implementation$9,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$9;hasRequiredImplementation=1;var n;if(!Object.keys){var _=Object.prototype.hasOwnProperty,x=Object.prototype.toString,E=isArguments$2,S=Object.prototype.propertyIsEnumerable,C=!S.call({toString:null},"toString"),T=S.call(function(){},"prototype"),A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],B=function(D){var L=D.constructor;return L&&L.prototype===D},I={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},M=function(){if(typeof window>"u")return!1;for(var D in window)try{if(!I["$"+D]&&_.call(window,D)&&window[D]!==null&&typeof window[D]=="object")try{B(window[D])}catch{return!0}}catch{return!0}return!1}(),O=function(D){if(typeof window>"u"||!M)return B(D);try{return B(D)}catch{return!1}};n=function(L){var V=L!==null&&typeof L=="object",U=x.call(L)==="[object Function]",q=E(L),H=V&&x.call(L)==="[object String]",W=[];if(!V&&!U&&!q)throw new TypeError("Object.keys called on a non-object");var Q=T&&U;if(H&&L.length>0&&!_.call(L,0))for(var re=0;re<L.length;++re)W.push(String(re));if(q&&L.length>0)for(var ce=0;ce<L.length;++ce)W.push(String(ce));else for(var ne in L)!(Q&&ne==="prototype")&&_.call(L,ne)&&W.push(String(ne));if(C)for(var Y=O(L),fe=0;fe<A.length;++fe)!(Y&&A[fe]==="constructor")&&_.call(L,A[fe])&&W.push(A[fe]);return W}}return implementation$9=n,implementation$9}var slice=Array.prototype.slice,isArgs=isArguments$2,origKeys=Object.keys,keysShim=origKeys?function n(_){return origKeys(_)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function n(){if(Object.keys){var _=function(){var x=Object.keys(arguments);return x&&x.length===arguments.length}(1,2);_||(Object.keys=function(E){return isArgs(E)?originalKeys(slice.call(E)):originalKeys(E)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$3=keysShim,GetIntrinsic$6=getIntrinsic,$defineProperty=GetIntrinsic$6("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function n(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function n(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys=objectKeys$3,hasSymbols$2=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$5=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(n){return typeof n=="function"&&toStr$5.call(n)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors$2=origDefineProperty&&hasPropertyDescriptors,defineProperty$1=function(n,_,x,E){if(_ in n){if(E===!0){if(n[_]===x)return}else if(!isFunction(E)||!E())return}supportsDescriptors$2?origDefineProperty(n,_,{configurable:!0,enumerable:!1,value:x,writable:!0}):n[_]=x},defineProperties$1=function(n,_){var x=arguments.length>2?arguments[2]:{},E=keys(_);hasSymbols$2&&(E=concat.call(E,Object.getOwnPropertySymbols(_)));for(var S=0;S<E.length;S+=1)defineProperty$1(n,E[S],_[E[S]],x[E[S]])};defineProperties$1.supportsDescriptors=!!supportsDescriptors$2;var defineProperties_1=defineProperties$1,objectKeys$2=objectKeys$3,hasSymbols$1=shams$1(),callBound$9=callBound$c,toObject=Object,$push=callBound$9("Array.prototype.push"),$propIsEnumerable=callBound$9("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$1?Object.getOwnPropertySymbols:null,implementation$8=function n(_,x){if(_==null)throw new TypeError("target must be an object");var E=toObject(_);if(arguments.length===1)return E;for(var S=1;S<arguments.length;++S){var C=toObject(arguments[S]),T=objectKeys$2(C),A=hasSymbols$1&&(Object.getOwnPropertySymbols||originalGetSymbols);if(A)for(var B=A(C),I=0;I<B.length;++I){var M=B[I];$propIsEnumerable(C,M)&&$push(T,M)}for(var O=0;O<T.length;++O){var D=T[O];if($propIsEnumerable(C,D)){var L=C[D];E[D]=L}}}return E},implementation$7=implementation$8,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var n="abcdefghijklmnopqrst",_=n.split(""),x={},E=0;E<_.length;++E)x[_[E]]=_[E];var S=Object.assign({},x),C="";for(var T in S)C+=T;return n!==C},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch{return n[1]==="y"}return!1},polyfill$4=function n(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},define$3=defineProperties_1,getPolyfill$5=polyfill$4,shim$5=function n(){var _=getPolyfill$5();return define$3(Object,{assign:_},{assign:function(){return Object.assign!==_}}),_},defineProperties=defineProperties_1,callBind$3=callBindExports,implementation$6=implementation$8,getPolyfill$4=polyfill$4,shim$4=shim$5,polyfill$3=callBind$3.apply(getPolyfill$4()),bound=function n(_,x){return polyfill$3(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill$4,implementation:implementation$6,shim:shim$4});var object_assign=bound,implementation$5={exports:{}},functionsHaveNames$1=function n(){return typeof function(){}.name=="string"},gOPD$2=Object.getOwnPropertyDescriptor;if(gOPD$2)try{gOPD$2([],"length")}catch{gOPD$2=null}functionsHaveNames$1.functionsHaveConfigurableNames=function n(){if(!functionsHaveNames$1()||!gOPD$2)return!1;var _=gOPD$2(function(){},"name");return!!_&&!!_.configurable};var $bind=Function.prototype.bind;functionsHaveNames$1.boundFunctionsHaveNames=function n(){return functionsHaveNames$1()&&typeof $bind=="function"&&function(){}.bind().name!==""};var functionsHaveNames_1=functionsHaveNames$1;(function(n){var _=functionsHaveNames_1.functionsHaveConfigurableNames(),x=Object,E=TypeError;n.exports=function(){if(this!=null&&this!==x(this))throw new E("RegExp.prototype.flags getter called on non-object");var C="";return this.hasIndices&&(C+="d"),this.global&&(C+="g"),this.ignoreCase&&(C+="i"),this.multiline&&(C+="m"),this.dotAll&&(C+="s"),this.unicode&&(C+="u"),this.unicodeSets&&(C+="v"),this.sticky&&(C+="y"),C},_&&Object.defineProperty&&Object.defineProperty(n.exports,"name",{value:"get flags"})})(implementation$5);var implementationExports=implementation$5.exports,implementation$4=implementationExports,supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor,polyfill$2=function n(){if(supportsDescriptors$1&&/a/mig.flags==="gim"){var _=$gOPD(RegExp.prototype,"flags");if(_&&typeof _.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var x="",E={};if(Object.defineProperty(E,"hasIndices",{get:function(){x+="d"}}),Object.defineProperty(E,"sticky",{get:function(){x+="y"}}),x==="dy")return _.get}}return implementation$4},supportsDescriptors=defineProperties_1.supportsDescriptors,getPolyfill$3=polyfill$2,gOPD$1=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex$1=/a/,shim$3=function n(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var _=getPolyfill$3(),x=getProto(regex$1),E=gOPD$1(x,"flags");return(!E||E.get!==_)&&defineProperty(x,"flags",{configurable:!0,enumerable:!1,get:_}),_},define$2=defineProperties_1,callBind$2=callBindExports,implementation$3=implementationExports,getPolyfill$2=polyfill$2,shim$2=shim$3,flagsBound=callBind$2(getPolyfill$2());define$2(flagsBound,{getPolyfill:getPolyfill$2,implementation:implementation$3,shim:shim$2});var regexp_prototype_flags=flagsBound,esGetIterator={exports:{}},hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf$1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO$1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function addNumericSeparator(n,_){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||$test.call(/e/,_))return _;var x=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var E=n<0?-$floor(-n):$floor(n);if(E!==n){var S=String(E),C=$slice.call(_,S.length+1);return $replace.call(S,x,"$&_")+"."+$replace.call($replace.call(C,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(_,x,"$&_")}var utilInspect=require$$0$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$2(inspectCustom)?inspectCustom:null,objectInspect=function n(_,x,E,S){var C=x||{};if(has$2(C,"quoteStyle")&&C.quoteStyle!=="single"&&C.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$2(C,"maxStringLength")&&(typeof C.maxStringLength=="number"?C.maxStringLength<0&&C.maxStringLength!==1/0:C.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var T=has$2(C,"customInspect")?C.customInspect:!0;if(typeof T!="boolean"&&T!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$2(C,"indent")&&C.indent!==null&&C.indent!=="	"&&!(parseInt(C.indent,10)===C.indent&&C.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$2(C,"numericSeparator")&&typeof C.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var A=C.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,C);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var B=String(_);return A?addNumericSeparator(_,B):B}if(typeof _=="bigint"){var I=String(_)+"n";return A?addNumericSeparator(_,I):I}var M=typeof C.depth>"u"?5:C.depth;if(typeof E>"u"&&(E=0),E>=M&&M>0&&typeof _=="object")return isArray$4(_)?"[Array]":"[Object]";var O=getIndent(C,E);if(typeof S>"u")S=[];else if(indexOf(S,_)>=0)return"[Circular]";function D(X,F,z){if(F&&(S=$arrSlice.call(S),S.push(F)),z){var J={depth:C.depth};return has$2(C,"quoteStyle")&&(J.quoteStyle=C.quoteStyle),n(X,J,E+1,S)}return n(X,C,E+1,S)}if(typeof _=="function"&&!isRegExp(_)){var L=nameOf(_),V=arrObjKeys(_,D);return"[Function"+(L?": "+L:" (anonymous)")+"]"+(V.length>0?" { "+$join.call(V,", ")+" }":"")}if(isSymbol$2(_)){var U=hasShammedSymbols?$replace.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(U):U}if(isElement(_)){for(var q="<"+$toLowerCase.call(String(_.nodeName)),H=_.attributes||[],W=0;W<H.length;W++)q+=" "+H[W].name+"="+wrapQuotes(quote(H[W].value),"double",C);return q+=">",_.childNodes&&_.childNodes.length&&(q+="..."),q+="</"+$toLowerCase.call(String(_.nodeName))+">",q}if(isArray$4(_)){if(_.length===0)return"[]";var Q=arrObjKeys(_,D);return O&&!singleLineValues(Q)?"["+indentedJoin(Q,O)+"]":"[ "+$join.call(Q,", ")+" ]"}if(isError(_)){var re=arrObjKeys(_,D);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat.call("[cause]: "+D(_.cause),re),", ")+" }":re.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(re,", ")+" }"}if(typeof _=="object"&&T){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:M-E});if(T!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap$3(_)){var ce=[];return mapForEach&&mapForEach.call(_,function(X,F){ce.push(D(F,_,!0)+" => "+D(X,_))}),collectionOf("Map",mapSize.call(_),ce,O)}if(isSet$3(_)){var ne=[];return setForEach&&setForEach.call(_,function(X){ne.push(D(X,_))}),collectionOf("Set",setSize.call(_),ne,O)}if(isWeakMap$1(_))return weakCollectionOf("WeakMap");if(isWeakSet$1(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber$1(_))return markBoxed(D(Number(_)));if(isBigInt$1(_))return markBoxed(D(bigIntValueOf$1.call(_)));if(isBoolean$1(_))return markBoxed(booleanValueOf.call(_));if(isString$3(_))return markBoxed(D(String(_)));if(!isDate$1(_)&&!isRegExp(_)){var Y=arrObjKeys(_,D),fe=gPO$1?gPO$1(_)===Object.prototype:_ instanceof Object||_.constructor===Object,ge=_ instanceof Object?"":"null prototype",$e=!fe&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr$4(_),8,-1):ge?"Object":"",_e=fe||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",ae=_e+($e||ge?"["+$join.call($concat.call([],$e||[],ge||[]),": ")+"] ":"");return Y.length===0?ae+"{}":O?ae+"{"+indentedJoin(Y,O)+"}":ae+"{ "+$join.call(Y,", ")+" }"}return String(_)};function wrapQuotes(n,_,x){var E=(x.quoteStyle||_)==="double"?'"':"'";return E+n+E}function quote(n){return $replace.call(String(n),/"/g,"&quot;")}function isArray$4(n){return toStr$4(n)==="[object Array]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isDate$1(n){return toStr$4(n)==="[object Date]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isRegExp(n){return toStr$4(n)==="[object RegExp]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isError(n){return toStr$4(n)==="[object Error]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isString$3(n){return toStr$4(n)==="[object String]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isNumber$1(n){return toStr$4(n)==="[object Number]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isBoolean$1(n){return toStr$4(n)==="[object Boolean]"&&(!toStringTag||!(typeof n=="object"&&toStringTag in n))}function isSymbol$2(n){if(hasShammedSymbols)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!symToString)return!1;try{return symToString.call(n),!0}catch{}return!1}function isBigInt$1(n){if(!n||typeof n!="object"||!bigIntValueOf$1)return!1;try{return bigIntValueOf$1.call(n),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(n){return n in this};function has$2(n,_){return hasOwn.call(n,_)}function toStr$4(n){return objectToString.call(n)}function nameOf(n){if(n.name)return n.name;var _=$match.call(functionToString.call(n),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf(n,_){if(n.indexOf)return n.indexOf(_);for(var x=0,E=n.length;x<E;x++)if(n[x]===_)return x;return-1}function isMap$3(n){if(!mapSize||!n||typeof n!="object")return!1;try{mapSize.call(n);try{setSize.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function isWeakMap$1(n){if(!weakMapHas||!n||typeof n!="object")return!1;try{weakMapHas.call(n,weakMapHas);try{weakSetHas.call(n,weakSetHas)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function isWeakRef(n){if(!weakRefDeref||!n||typeof n!="object")return!1;try{return weakRefDeref.call(n),!0}catch{}return!1}function isSet$3(n){if(!setSize||!n||typeof n!="object")return!1;try{setSize.call(n);try{mapSize.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function isWeakSet$1(n){if(!weakSetHas||!n||typeof n!="object")return!1;try{weakSetHas.call(n,weakSetHas);try{weakMapHas.call(n,weakMapHas)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function isElement(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function inspectString(n,_){if(n.length>_.maxStringLength){var x=n.length-_.maxStringLength,E="... "+x+" more character"+(x>1?"s":"");return inspectString($slice.call(n,0,_.maxStringLength),_)+E}var S=$replace.call($replace.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(S,"single",_)}function lowbyte(n){var _=n.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return x?"\\"+x:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(n){return"Object("+n+")"}function weakCollectionOf(n){return n+" { ? }"}function collectionOf(n,_,x,E){var S=E?indentedJoin(x,E):$join.call(x,", ");return n+" ("+_+") {"+S+"}"}function singleLineValues(n){for(var _=0;_<n.length;_++)if(indexOf(n[_],`
`)>=0)return!1;return!0}function getIndent(n,_){var x;if(n.indent==="	")x="	";else if(typeof n.indent=="number"&&n.indent>0)x=$join.call(Array(n.indent+1)," ");else return null;return{base:x,prev:$join.call(Array(_+1),x)}}function indentedJoin(n,_){if(n.length===0)return"";var x=`
`+_.prev+_.base;return x+$join.call(n,","+x)+`
`+_.prev}function arrObjKeys(n,_){var x=isArray$4(n),E=[];if(x){E.length=n.length;for(var S=0;S<n.length;S++)E[S]=has$2(n,S)?_(n[S],n):""}var C=typeof gOPS=="function"?gOPS(n):[],T;if(hasShammedSymbols){T={};for(var A=0;A<C.length;A++)T["$"+C[A]]=C[A]}for(var B in n)has$2(n,B)&&(x&&String(Number(B))===B&&B<n.length||hasShammedSymbols&&T["$"+B]instanceof Symbol||($test.call(/[^\w$]/,B)?E.push(_(B,n)+": "+_(n[B],n)):E.push(B+": "+_(n[B],n))));if(typeof gOPS=="function")for(var I=0;I<C.length;I++)isEnumerable.call(n,C[I])&&E.push("["+_(C[I])+"]: "+_(n[C[I]],n));return E}var GetIntrinsic$5=getIntrinsic,callBound$8=callBound$c,inspect$1=objectInspect,$TypeError$1=GetIntrinsic$5("%TypeError%"),$WeakMap$1=GetIntrinsic$5("%WeakMap%",!0),$Map$3=GetIntrinsic$5("%Map%",!0),$weakMapGet=callBound$8("WeakMap.prototype.get",!0),$weakMapSet=callBound$8("WeakMap.prototype.set",!0),$weakMapHas=callBound$8("WeakMap.prototype.has",!0),$mapGet$1=callBound$8("Map.prototype.get",!0),$mapSet=callBound$8("Map.prototype.set",!0),$mapHas$5=callBound$8("Map.prototype.has",!0),listGetNode=function(n,_){for(var x=n,E;(E=x.next)!==null;x=E)if(E.key===_)return x.next=E.next,E.next=n.next,n.next=E,E},listGet=function(n,_){var x=listGetNode(n,_);return x&&x.value},listSet=function(n,_,x){var E=listGetNode(n,_);E?E.value=x:n.next={key:_,next:n.next,value:x}},listHas=function(n,_){return!!listGetNode(n,_)},sideChannel=function n(){var _,x,E,S={assert:function(C){if(!S.has(C))throw new $TypeError$1("Side channel does not contain "+inspect$1(C))},get:function(C){if($WeakMap$1&&C&&(typeof C=="object"||typeof C=="function")){if(_)return $weakMapGet(_,C)}else if($Map$3){if(x)return $mapGet$1(x,C)}else if(E)return listGet(E,C)},has:function(C){if($WeakMap$1&&C&&(typeof C=="object"||typeof C=="function")){if(_)return $weakMapHas(_,C)}else if($Map$3){if(x)return $mapHas$5(x,C)}else if(E)return listHas(E,C);return!1},set:function(C,T){$WeakMap$1&&C&&(typeof C=="object"||typeof C=="function")?(_||(_=new $WeakMap$1),$weakMapSet(_,C,T)):$Map$3?(x||(x=new $Map$3),$mapSet(x,C,T)):(E||(E={key:{},next:null}),listSet(E,C,T))}};return S},GetIntrinsic$4=getIntrinsic,has$1=src$4,channel=sideChannel(),$TypeError=GetIntrinsic$4("%TypeError%"),SLOT$1={assert:function(n,_){if(!n||typeof n!="object"&&typeof n!="function")throw new $TypeError("`O` is not an object");if(typeof _!="string")throw new $TypeError("`slot` must be a string");if(channel.assert(n),!SLOT$1.has(n,_))throw new $TypeError("`"+_+"` is not present on `O`")},get:function(n,_){if(!n||typeof n!="object"&&typeof n!="function")throw new $TypeError("`O` is not an object");if(typeof _!="string")throw new $TypeError("`slot` must be a string");var x=channel.get(n);return x&&x["$"+_]},has:function(n,_){if(!n||typeof n!="object"&&typeof n!="function")throw new $TypeError("`O` is not an object");if(typeof _!="string")throw new $TypeError("`slot` must be a string");var x=channel.get(n);return!!x&&has$1(x,"$"+_)},set:function(n,_,x){if(!n||typeof n!="object"&&typeof n!="function")throw new $TypeError("`O` is not an object");if(typeof _!="string")throw new $TypeError("`slot` must be a string");var E=channel.get(n);E||(E={},channel.set(n,E)),E["$"+_]=x}};Object.freeze&&Object.freeze(SLOT$1);var internalSlot=SLOT$1,SLOT=internalSlot,$SyntaxError=SyntaxError,$StopIteration=typeof StopIteration=="object"?StopIteration:null,stopIterationIterator=function n(_){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(_,"[[Done]]",!1);var x={next:function(){var S=SLOT.get(this,"[[Iterator]]"),C=SLOT.get(S,"[[Done]]");try{return{done:C,value:C?void 0:S.next()}}catch(T){if(SLOT.set(S,"[[Done]]",!0),T!==$StopIteration)throw T;return{done:!0,value:void 0}}}};return SLOT.set(x,"[[Iterator]]",_),x},isarray$2,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray$2;hasRequiredIsarray=1;var n={}.toString;return isarray$2=Array.isArray||function(_){return n.call(_)=="[object Array]"},isarray$2}var strValue=String.prototype.valueOf,tryStringObject=function n(_){try{return strValue.call(_),!0}catch{return!1}},toStr$3=Object.prototype.toString,strClass="[object String]",hasToStringTag$4=shams(),isString$2=function n(_){return typeof _=="string"?!0:typeof _!="object"?!1:hasToStringTag$4?tryStringObject(_):toStr$3.call(_)===strClass},$Map$2=typeof Map=="function"&&Map.prototype?Map:null,$Set$3=typeof Set=="function"&&Set.prototype?Set:null,exported$2;$Map$2||(exported$2=function(_){return!1});var $mapHas$4=$Map$2?Map.prototype.has:null,$setHas$4=$Set$3?Set.prototype.has:null;!exported$2&&!$mapHas$4&&(exported$2=function(_){return!1});var isMap$2=exported$2||function n(_){if(!_||typeof _!="object")return!1;try{if($mapHas$4.call(_),$setHas$4)try{$setHas$4.call(_)}catch{return!0}return _ instanceof $Map$2}catch{}return!1},$Map$1=typeof Map=="function"&&Map.prototype?Map:null,$Set$2=typeof Set=="function"&&Set.prototype?Set:null,exported$1;$Set$2||(exported$1=function(_){return!1});var $mapHas$3=$Map$1?Map.prototype.has:null,$setHas$3=$Set$2?Set.prototype.has:null;!exported$1&&!$setHas$3&&(exported$1=function(_){return!1});var isSet$2=exported$1||function n(_){if(!_||typeof _!="object")return!1;try{if($setHas$3.call(_),$mapHas$3)try{$mapHas$3.call(_)}catch{return!0}return _ instanceof $Set$2}catch{}return!1},isArguments$1=isArguments$3,getStopIterationIterator=stopIterationIterator;if(hasSymbols$4()||shams$1()){var $iterator=Symbol.iterator;esGetIterator.exports=function(_){if(_!=null&&typeof _[$iterator]<"u")return _[$iterator]();if(isArguments$1(_))return Array.prototype[$iterator].call(_)}}else{var isArray$3=requireIsarray(),isString$1=isString$2,GetIntrinsic$3=getIntrinsic,$Map=GetIntrinsic$3("%Map%",!0),$Set$1=GetIntrinsic$3("%Set%",!0),callBound$7=callBound$c,$arrayPush=callBound$7("Array.prototype.push"),$charCodeAt=callBound$7("String.prototype.charCodeAt"),$stringSlice=callBound$7("String.prototype.slice"),advanceStringIndex=function(_,x){var E=_.length;if(x+1>=E)return x+1;var S=$charCodeAt(_,x);if(S<55296||S>56319)return x+1;var C=$charCodeAt(_,x+1);return C<56320||C>57343?x+1:x+2},getArrayIterator=function(_){var x=0;return{next:function(){var S=x>=_.length,C;return S||(C=_[x],x+=1),{done:S,value:C}}}},getNonCollectionIterator=function(_,x){if(isArray$3(_)||isArguments$1(_))return getArrayIterator(_);if(isString$1(_)){var E=0;return{next:function(){var C=advanceStringIndex(_,E),T=$stringSlice(_,E,C);return E=C,{done:C>_.length,value:T}}}}if(x&&typeof _["_es6-shim iterator_"]<"u")return _["_es6-shim iterator_"]()};if(!$Map&&!$Set$1)esGetIterator.exports=function(_){if(_!=null)return getNonCollectionIterator(_,!0)};else{var isMap$1=isMap$2,isSet$1=isSet$2,$mapForEach=callBound$7("Map.prototype.forEach",!0),$setForEach=callBound$7("Set.prototype.forEach",!0);if(typeof browser$1$1>"u"||!browser$1$1.versions||!browser$1$1.versions.node)var $mapIterator=callBound$7("Map.prototype.iterator",!0),$setIterator=callBound$7("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound$7("Map.prototype.@@iterator",!0)||callBound$7("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound$7("Set.prototype.@@iterator",!0)||callBound$7("Set.prototype._es6-shim iterator_",!0),getCollectionIterator=function(_){if(isMap$1(_)){if($mapIterator)return getStopIterationIterator($mapIterator(_));if($mapAtAtIterator)return $mapAtAtIterator(_);if($mapForEach){var x=[];return $mapForEach(_,function(S,C){$arrayPush(x,[C,S])}),getArrayIterator(x)}}if(isSet$1(_)){if($setIterator)return getStopIterationIterator($setIterator(_));if($setAtAtIterator)return $setAtAtIterator(_);if($setForEach){var E=[];return $setForEach(_,function(S){$arrayPush(E,S)}),getArrayIterator(E)}}};esGetIterator.exports=function(_){return getCollectionIterator(_)||getNonCollectionIterator(_)}}}var esGetIteratorExports=esGetIterator.exports,numberIsNaN=function(n){return n!==n},implementation$2=function n(_,x){return _===0&&x===0?1/_===1/x:!!(_===x||numberIsNaN(_)&&numberIsNaN(x))},implementation$1=implementation$2,polyfill$1=function n(){return typeof Object.is=="function"?Object.is:implementation$1},getPolyfill$1=polyfill$1,define$1=defineProperties_1,shim$1=function n(){var _=getPolyfill$1();return define$1(Object,{is:_},{is:function(){return Object.is!==_}}),_},define=defineProperties_1,callBind$1=callBindExports,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,polyfill=callBind$1(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim});var objectIs=polyfill,toString$2={}.toString,isarray$1=Array.isArray||function(n){return toString$2.call(n)=="[object Array]"},callBind=callBindExports,callBound$6=callBound$c,GetIntrinsic$2=getIntrinsic,isTypedArray=isTypedArray$2,$ArrayBuffer=GetIntrinsic$2("ArrayBuffer",!0),$Float32Array=GetIntrinsic$2("Float32Array",!0),$byteLength$2=callBound$6("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength$2&&new $ArrayBuffer().slice,$abSlice=abSlice&&callBind(abSlice),isArrayBuffer$2=$byteLength$2||$abSlice?function n(_){if(!_||typeof _!="object")return!1;try{return $byteLength$2?$byteLength$2(_):$abSlice(_,0),!0}catch{return!1}}:$Float32Array?function n(_){try{return new $Float32Array(_).buffer===_&&!isTypedArray(_)}catch(x){return typeof _=="object"&&x.name==="RangeError"}}:function n(_){return!1},getDay=Date.prototype.getDay,tryDateObject=function n(_){try{return getDay.call(_),!0}catch{return!1}},toStr$2=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$3=shams(),isDateObject=function n(_){return typeof _!="object"||_===null?!1:hasToStringTag$3?tryDateObject(_):toStr$2.call(_)===dateClass},callBound$5=callBound$c,hasToStringTag$2=shams(),has,$exec,isRegexMarker,badStringifier;if(hasToStringTag$2){has=callBound$5("Object.prototype.hasOwnProperty"),$exec=callBound$5("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString$1=callBound$5("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex$1=hasToStringTag$2?function n(_){if(!_||typeof _!="object")return!1;var x=gOPD(_,"lastIndex"),E=x&&has(x,"value");if(!E)return!1;try{$exec(_,badStringifier)}catch(S){return S===isRegexMarker}}:function n(_){return!_||typeof _!="object"&&typeof _!="function"?!1:$toString$1(_)===regexClass},callBound$4=callBound$c,$byteLength$1=callBound$4("SharedArrayBuffer.prototype.byteLength",!0),isSharedArrayBuffer$1=$byteLength$1?function n(_){if(!_||typeof _!="object")return!1;try{return $byteLength$1(_),!0}catch{return!1}}:function n(_){return!1},numToStr=Number.prototype.toString,tryNumberObject=function n(_){try{return numToStr.call(_),!0}catch{return!1}},toStr$1=Object.prototype.toString,numClass="[object Number]",hasToStringTag$1=shams(),isNumberObject=function n(_){return typeof _=="number"?!0:typeof _!="object"?!1:hasToStringTag$1?tryNumberObject(_):toStr$1.call(_)===numClass},callBound$3=callBound$c,$boolToStr=callBound$3("Boolean.prototype.toString"),$toString=callBound$3("Object.prototype.toString"),tryBooleanObject=function n(_){try{return $boolToStr(_),!0}catch{return!1}},boolClass="[object Boolean]",hasToStringTag=shams(),isBooleanObject=function n(_){return typeof _=="boolean"?!0:_===null||typeof _!="object"?!1:hasToStringTag&&Symbol.toStringTag in _?tryBooleanObject(_):$toString(_)===boolClass},isSymbol$1={exports:{}},toStr=Object.prototype.toString,hasSymbols=hasSymbols$4();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/,isSymbolObject=function(_){return typeof _.valueOf()!="symbol"?!1:symStringRegex.test(symToStr.call(_))};isSymbol$1.exports=function(_){if(typeof _=="symbol")return!0;if(toStr.call(_)!=="[object Symbol]")return!1;try{return isSymbolObject(_)}catch{return!1}}}else isSymbol$1.exports=function(_){return!1};var isSymbolExports=isSymbol$1.exports,isBigint={exports:{}},$BigInt=typeof BigInt<"u"&&BigInt,hasBigints=function n(){return typeof $BigInt=="function"&&typeof BigInt=="function"&&typeof $BigInt(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigInts=hasBigints();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(_){try{return bigIntValueOf.call(_),!0}catch{}return!1};isBigint.exports=function(_){return _===null||typeof _>"u"||typeof _=="boolean"||typeof _=="string"||typeof _=="number"||typeof _=="symbol"||typeof _=="function"?!1:typeof _=="bigint"?!0:tryBigInt(_)}}else isBigint.exports=function(_){return!1};var isBigintExports=isBigint.exports,isString=isString$2,isNumber=isNumberObject,isBoolean=isBooleanObject,isSymbol=isSymbolExports,isBigInt=isBigintExports,whichBoxedPrimitive$1=function n(_){if(_==null||typeof _!="object"&&typeof _!="function")return null;if(isString(_))return"String";if(isNumber(_))return"Number";if(isBoolean(_))return"Boolean";if(isSymbol(_))return"Symbol";if(isBigInt(_))return"BigInt"},$WeakMap=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$WeakSet$1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,exported;$WeakMap||(exported=function(_){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet$1?$WeakSet$1.prototype.has:null;!exported&&!$mapHas$2&&(exported=function(_){return!1});var isWeakmap=exported||function n(_){if(!_||typeof _!="object")return!1;try{if($mapHas$2.call(_,$mapHas$2),$setHas$2)try{$setHas$2.call(_,$setHas$2)}catch{return!0}return _ instanceof $WeakMap}catch{}return!1},isWeakset={exports:{}},GetIntrinsic$1=getIntrinsic,callBound$2=callBound$c,$WeakSet=GetIntrinsic$1("%WeakSet%",!0),$setHas$1=callBound$2("WeakSet.prototype.has",!0);if($setHas$1){var $mapHas$1=callBound$2("WeakMap.prototype.has",!0);isWeakset.exports=function(_){if(!_||typeof _!="object")return!1;try{if($setHas$1(_,$setHas$1),$mapHas$1)try{$mapHas$1(_,$mapHas$1)}catch{return!0}return _ instanceof $WeakSet}catch{}return!1}}else isWeakset.exports=function(_){return!1};var isWeaksetExports=isWeakset.exports,isMap=isMap$2,isSet=isSet$2,isWeakMap=isWeakmap,isWeakSet=isWeaksetExports,whichCollection$1=function n(_){if(_&&typeof _=="object"){if(isMap(_))return"Map";if(isSet(_))return"Set";if(isWeakMap(_))return"WeakMap";if(isWeakSet(_))return"WeakSet"}return!1},callBound$1=callBound$c,$byteLength=callBound$1("ArrayBuffer.prototype.byteLength",!0),isArrayBuffer$1=isArrayBuffer$2,arrayBufferByteLength=function n(_){return isArrayBuffer$1(_)?$byteLength?$byteLength(_):_.byteLength:NaN},assign$1=object_assign,callBound=callBound$c,flags=regexp_prototype_flags,GetIntrinsic=getIntrinsic,getIterator=esGetIteratorExports,getSideChannel=sideChannel,is=objectIs,isArguments=isArguments$3,isArray$2=isarray$1,isArrayBuffer=isArrayBuffer$2,isDate=isDateObject,isRegex=isRegex$1,isSharedArrayBuffer=isSharedArrayBuffer$1,objectKeys$1=objectKeys$3,whichBoxedPrimitive=whichBoxedPrimitive$1,whichCollection=whichCollection$1,whichTypedArray=whichTypedArray$2,byteLength=arrayBufferByteLength,sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(n,_,x,E){for(var S=getIterator(n),C;(C=S.next())&&!C.done;)if(internalDeepEqual(_,C.value,x,E))return $setDelete(n,C.value),!0;return!1}function findLooseMatchingPrimitives(n){if(typeof n>"u")return null;if(typeof n!="object")return typeof n=="symbol"?!1:typeof n=="string"||typeof n=="number"?+n==+n:!0}function mapMightHaveLoosePrim(n,_,x,E,S,C){var T=findLooseMatchingPrimitives(x);if(T!=null)return T;var A=$mapGet(_,T),B=assign$1({},S,{strict:!1});return typeof A>"u"&&!$mapHas(_,T)||!internalDeepEqual(E,A,B,C)?!1:!$mapHas(n,T)&&internalDeepEqual(E,A,B,C)}function setMightHaveLoosePrim(n,_,x){var E=findLooseMatchingPrimitives(x);return E??($setHas(_,E)&&!$setHas(n,E))}function mapHasEqualEntry(n,_,x,E,S,C){for(var T=getIterator(n),A,B;(A=T.next())&&!A.done;)if(B=A.value,internalDeepEqual(x,B,S,C)&&internalDeepEqual(E,$mapGet(_,B),S,C))return $setDelete(n,B),!0;return!1}function internalDeepEqual(n,_,x,E){var S=x||{};if(S.strict?is(n,_):n===_)return!0;var C=whichBoxedPrimitive(n),T=whichBoxedPrimitive(_);if(C!==T)return!1;if(!n||!_||typeof n!="object"&&typeof _!="object")return S.strict?is(n,_):n==_;var A=E.has(n),B=E.has(_),I;if(A&&B){if(E.get(n)===E.get(_))return!0}else I={};return A||E.set(n,I),B||E.set(_,I),objEquiv(n,_,S,E)}function isBuffer(n){return!n||typeof n!="object"||typeof n.length!="number"||typeof n.copy!="function"||typeof n.slice!="function"||n.length>0&&typeof n[0]!="number"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function setEquiv(n,_,x,E){if($setSize(n)!==$setSize(_))return!1;for(var S=getIterator(n),C=getIterator(_),T,A,B;(T=S.next())&&!T.done;)if(T.value&&typeof T.value=="object")B||(B=new $Set),$setAdd(B,T.value);else if(!$setHas(_,T.value)){if(x.strict||!setMightHaveLoosePrim(n,_,T.value))return!1;B||(B=new $Set),$setAdd(B,T.value)}if(B){for(;(A=C.next())&&!A.done;)if(A.value&&typeof A.value=="object"){if(!setHasEqualElement(B,A.value,x.strict,E))return!1}else if(!x.strict&&!$setHas(n,A.value)&&!setHasEqualElement(B,A.value,x.strict,E))return!1;return $setSize(B)===0}return!0}function mapEquiv(n,_,x,E){if($mapSize(n)!==$mapSize(_))return!1;for(var S=getIterator(n),C=getIterator(_),T,A,B,I,M,O;(T=S.next())&&!T.done;)if(I=T.value[0],M=T.value[1],I&&typeof I=="object")B||(B=new $Set),$setAdd(B,I);else if(O=$mapGet(_,I),typeof O>"u"&&!$mapHas(_,I)||!internalDeepEqual(M,O,x,E)){if(x.strict||!mapMightHaveLoosePrim(n,_,I,M,x,E))return!1;B||(B=new $Set),$setAdd(B,I)}if(B){for(;(A=C.next())&&!A.done;)if(I=A.value[0],O=A.value[1],I&&typeof I=="object"){if(!mapHasEqualEntry(B,n,I,O,x,E))return!1}else if(!x.strict&&(!n.has(I)||!internalDeepEqual($mapGet(n,I),O,x,E))&&!mapHasEqualEntry(B,n,I,O,assign$1({},x,{strict:!1}),E))return!1;return $setSize(B)===0}return!0}function objEquiv(n,_,x,E){var S,C;if(typeof n!=typeof _||n==null||_==null||$objToString(n)!==$objToString(_)||isArguments(n)!==isArguments(_))return!1;var T=isArray$2(n),A=isArray$2(_);if(T!==A)return!1;var B=n instanceof Error,I=_ instanceof Error;if(B!==I||(B||I)&&(n.name!==_.name||n.message!==_.message))return!1;var M=isRegex(n),O=isRegex(_);if(M!==O||(M||O)&&(n.source!==_.source||flags(n)!==flags(_)))return!1;var D=isDate(n),L=isDate(_);if(D!==L||(D||L)&&$getTime(n)!==$getTime(_)||x.strict&&gPO&&gPO(n)!==gPO(_))return!1;var V=whichTypedArray(n),U=whichTypedArray(_);if(V!==U)return!1;if(V||U){if(n.length!==_.length)return!1;for(S=0;S<n.length;S++)if(n[S]!==_[S])return!1;return!0}var q=isBuffer(n),H=isBuffer(_);if(q!==H)return!1;if(q||H){if(n.length!==_.length)return!1;for(S=0;S<n.length;S++)if(n[S]!==_[S])return!1;return!0}var W=isArrayBuffer(n),Q=isArrayBuffer(_);if(W!==Q)return!1;if(W||Q)return byteLength(n)!==byteLength(_)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(n),new Uint8Array(_),x,E);var re=isSharedArrayBuffer(n),ce=isSharedArrayBuffer(_);if(re!==ce)return!1;if(re||ce)return sabByteLength(n)!==sabByteLength(_)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(n),new Uint8Array(_),x,E);if(typeof n!=typeof _)return!1;var ne=objectKeys$1(n),Y=objectKeys$1(_);if(ne.length!==Y.length)return!1;for(ne.sort(),Y.sort(),S=ne.length-1;S>=0;S--)if(ne[S]!=Y[S])return!1;for(S=ne.length-1;S>=0;S--)if(C=ne[S],!internalDeepEqual(n[C],_[C],x,E))return!1;var fe=whichCollection(n),ge=whichCollection(_);return fe!==ge?!1:fe==="Set"||ge==="Set"?setEquiv(n,_,x,E):fe==="Map"?mapEquiv(n,_,x,E):!0}var deepEqual=function n(_,x,E){return internalDeepEqual(_,x,E,getSideChannel())};const deepEqual$1=getDefaultExportFromCjs(deepEqual);var md5$1={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(n,_){(function(x,E){n.exports=E()})(commonjsGlobal,function(){var x=x||function(E,S){var C;if(typeof window<"u"&&window.crypto&&(C=window.crypto),typeof self<"u"&&self.crypto&&(C=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(C=globalThis.crypto),!C&&typeof window<"u"&&window.msCrypto&&(C=window.msCrypto),!C&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(C=commonjsGlobal.crypto),!C&&typeof commonjsRequire$1=="function")try{C=requireCryptoBrowserify()}catch{}var T=function(){if(C){if(typeof C.getRandomValues=="function")try{return C.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof C.randomBytes=="function")try{return C.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},A=Object.create||function(){function W(){}return function(Q){var re;return W.prototype=Q,re=new W,W.prototype=null,re}}(),B={},I=B.lib={},M=I.Base=function(){return{extend:function(W){var Q=A(this);return W&&Q.mixIn(W),(!Q.hasOwnProperty("init")||this.init===Q.init)&&(Q.init=function(){Q.$super.init.apply(this,arguments)}),Q.init.prototype=Q,Q.$super=this,Q},create:function(){var W=this.extend();return W.init.apply(W,arguments),W},init:function(){},mixIn:function(W){for(var Q in W)W.hasOwnProperty(Q)&&(this[Q]=W[Q]);W.hasOwnProperty("toString")&&(this.toString=W.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),O=I.WordArray=M.extend({init:function(W,Q){W=this.words=W||[],Q!=S?this.sigBytes=Q:this.sigBytes=W.length*4},toString:function(W){return(W||L).stringify(this)},concat:function(W){var Q=this.words,re=W.words,ce=this.sigBytes,ne=W.sigBytes;if(this.clamp(),ce%4)for(var Y=0;Y<ne;Y++){var fe=re[Y>>>2]>>>24-Y%4*8&255;Q[ce+Y>>>2]|=fe<<24-(ce+Y)%4*8}else for(var ge=0;ge<ne;ge+=4)Q[ce+ge>>>2]=re[ge>>>2];return this.sigBytes+=ne,this},clamp:function(){var W=this.words,Q=this.sigBytes;W[Q>>>2]&=4294967295<<32-Q%4*8,W.length=E.ceil(Q/4)},clone:function(){var W=M.clone.call(this);return W.words=this.words.slice(0),W},random:function(W){for(var Q=[],re=0;re<W;re+=4)Q.push(T());return new O.init(Q,W)}}),D=B.enc={},L=D.Hex={stringify:function(W){for(var Q=W.words,re=W.sigBytes,ce=[],ne=0;ne<re;ne++){var Y=Q[ne>>>2]>>>24-ne%4*8&255;ce.push((Y>>>4).toString(16)),ce.push((Y&15).toString(16))}return ce.join("")},parse:function(W){for(var Q=W.length,re=[],ce=0;ce<Q;ce+=2)re[ce>>>3]|=parseInt(W.substr(ce,2),16)<<24-ce%8*4;return new O.init(re,Q/2)}},V=D.Latin1={stringify:function(W){for(var Q=W.words,re=W.sigBytes,ce=[],ne=0;ne<re;ne++){var Y=Q[ne>>>2]>>>24-ne%4*8&255;ce.push(String.fromCharCode(Y))}return ce.join("")},parse:function(W){for(var Q=W.length,re=[],ce=0;ce<Q;ce++)re[ce>>>2]|=(W.charCodeAt(ce)&255)<<24-ce%4*8;return new O.init(re,Q)}},U=D.Utf8={stringify:function(W){try{return decodeURIComponent(escape(V.stringify(W)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(W){return V.parse(unescape(encodeURIComponent(W)))}},q=I.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(W){typeof W=="string"&&(W=U.parse(W)),this._data.concat(W),this._nDataBytes+=W.sigBytes},_process:function(W){var Q,re=this._data,ce=re.words,ne=re.sigBytes,Y=this.blockSize,fe=Y*4,ge=ne/fe;W?ge=E.ceil(ge):ge=E.max((ge|0)-this._minBufferSize,0);var $e=ge*Y,_e=E.min($e*4,ne);if($e){for(var ae=0;ae<$e;ae+=Y)this._doProcessBlock(ce,ae);Q=ce.splice(0,$e),re.sigBytes-=_e}return new O.init(Q,_e)},clone:function(){var W=M.clone.call(this);return W._data=this._data.clone(),W},_minBufferSize:0});I.Hasher=q.extend({cfg:M.extend(),init:function(W){this.cfg=this.cfg.extend(W),this.reset()},reset:function(){q.reset.call(this),this._doReset()},update:function(W){return this._append(W),this._process(),this},finalize:function(W){W&&this._append(W);var Q=this._doFinalize();return Q},blockSize:16,_createHelper:function(W){return function(Q,re){return new W.init(re).finalize(Q)}},_createHmacHelper:function(W){return function(Q,re){return new H.HMAC.init(W,re).finalize(Q)}}});var H=B.algo={};return B}(Math);return x})}(core)),core.exports}(function(n,_){(function(x,E){n.exports=E(requireCore())})(commonjsGlobal,function(x){return function(E){var S=x,C=S.lib,T=C.WordArray,A=C.Hasher,B=S.algo,I=[];(function(){for(var U=0;U<64;U++)I[U]=E.abs(E.sin(U+1))*4294967296|0})();var M=B.MD5=A.extend({_doReset:function(){this._hash=new T.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(U,q){for(var H=0;H<16;H++){var W=q+H,Q=U[W];U[W]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}var re=this._hash.words,ce=U[q+0],ne=U[q+1],Y=U[q+2],fe=U[q+3],ge=U[q+4],$e=U[q+5],_e=U[q+6],ae=U[q+7],X=U[q+8],F=U[q+9],z=U[q+10],J=U[q+11],te=U[q+12],se=U[q+13],oe=U[q+14],ie=U[q+15],G=re[0],j=re[1],ee=re[2],pe=re[3];G=O(G,j,ee,pe,ce,7,I[0]),pe=O(pe,G,j,ee,ne,12,I[1]),ee=O(ee,pe,G,j,Y,17,I[2]),j=O(j,ee,pe,G,fe,22,I[3]),G=O(G,j,ee,pe,ge,7,I[4]),pe=O(pe,G,j,ee,$e,12,I[5]),ee=O(ee,pe,G,j,_e,17,I[6]),j=O(j,ee,pe,G,ae,22,I[7]),G=O(G,j,ee,pe,X,7,I[8]),pe=O(pe,G,j,ee,F,12,I[9]),ee=O(ee,pe,G,j,z,17,I[10]),j=O(j,ee,pe,G,J,22,I[11]),G=O(G,j,ee,pe,te,7,I[12]),pe=O(pe,G,j,ee,se,12,I[13]),ee=O(ee,pe,G,j,oe,17,I[14]),j=O(j,ee,pe,G,ie,22,I[15]),G=D(G,j,ee,pe,ne,5,I[16]),pe=D(pe,G,j,ee,_e,9,I[17]),ee=D(ee,pe,G,j,J,14,I[18]),j=D(j,ee,pe,G,ce,20,I[19]),G=D(G,j,ee,pe,$e,5,I[20]),pe=D(pe,G,j,ee,z,9,I[21]),ee=D(ee,pe,G,j,ie,14,I[22]),j=D(j,ee,pe,G,ge,20,I[23]),G=D(G,j,ee,pe,F,5,I[24]),pe=D(pe,G,j,ee,oe,9,I[25]),ee=D(ee,pe,G,j,fe,14,I[26]),j=D(j,ee,pe,G,X,20,I[27]),G=D(G,j,ee,pe,se,5,I[28]),pe=D(pe,G,j,ee,Y,9,I[29]),ee=D(ee,pe,G,j,ae,14,I[30]),j=D(j,ee,pe,G,te,20,I[31]),G=L(G,j,ee,pe,$e,4,I[32]),pe=L(pe,G,j,ee,X,11,I[33]),ee=L(ee,pe,G,j,J,16,I[34]),j=L(j,ee,pe,G,oe,23,I[35]),G=L(G,j,ee,pe,ne,4,I[36]),pe=L(pe,G,j,ee,ge,11,I[37]),ee=L(ee,pe,G,j,ae,16,I[38]),j=L(j,ee,pe,G,z,23,I[39]),G=L(G,j,ee,pe,se,4,I[40]),pe=L(pe,G,j,ee,ce,11,I[41]),ee=L(ee,pe,G,j,fe,16,I[42]),j=L(j,ee,pe,G,_e,23,I[43]),G=L(G,j,ee,pe,F,4,I[44]),pe=L(pe,G,j,ee,te,11,I[45]),ee=L(ee,pe,G,j,ie,16,I[46]),j=L(j,ee,pe,G,Y,23,I[47]),G=V(G,j,ee,pe,ce,6,I[48]),pe=V(pe,G,j,ee,ae,10,I[49]),ee=V(ee,pe,G,j,oe,15,I[50]),j=V(j,ee,pe,G,$e,21,I[51]),G=V(G,j,ee,pe,te,6,I[52]),pe=V(pe,G,j,ee,fe,10,I[53]),ee=V(ee,pe,G,j,z,15,I[54]),j=V(j,ee,pe,G,ne,21,I[55]),G=V(G,j,ee,pe,X,6,I[56]),pe=V(pe,G,j,ee,ie,10,I[57]),ee=V(ee,pe,G,j,_e,15,I[58]),j=V(j,ee,pe,G,se,21,I[59]),G=V(G,j,ee,pe,ge,6,I[60]),pe=V(pe,G,j,ee,J,10,I[61]),ee=V(ee,pe,G,j,Y,15,I[62]),j=V(j,ee,pe,G,F,21,I[63]),re[0]=re[0]+G|0,re[1]=re[1]+j|0,re[2]=re[2]+ee|0,re[3]=re[3]+pe|0},_doFinalize:function(){var U=this._data,q=U.words,H=this._nDataBytes*8,W=U.sigBytes*8;q[W>>>5]|=128<<24-W%32;var Q=E.floor(H/4294967296),re=H;q[(W+64>>>9<<4)+15]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360,q[(W+64>>>9<<4)+14]=(re<<8|re>>>24)&16711935|(re<<24|re>>>8)&4278255360,U.sigBytes=(q.length+1)*4,this._process();for(var ce=this._hash,ne=ce.words,Y=0;Y<4;Y++){var fe=ne[Y];ne[Y]=(fe<<8|fe>>>24)&16711935|(fe<<24|fe>>>8)&4278255360}return ce},clone:function(){var U=A.clone.call(this);return U._hash=this._hash.clone(),U}});function O(U,q,H,W,Q,re,ce){var ne=U+(q&H|~q&W)+Q+ce;return(ne<<re|ne>>>32-re)+q}function D(U,q,H,W,Q,re,ce){var ne=U+(q&W|H&~W)+Q+ce;return(ne<<re|ne>>>32-re)+q}function L(U,q,H,W,Q,re,ce){var ne=U+(q^H^W)+Q+ce;return(ne<<re|ne>>>32-re)+q}function V(U,q,H,W,Q,re,ce){var ne=U+(H^(q|~W))+Q+ce;return(ne<<re|ne>>>32-re)+q}S.MD5=A._createHelper(M),S.HmacMD5=A._createHmacHelper(M)}(Math),x.MD5})})(md5$1);var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports);var encBase64={exports:{}};(function(n,_){(function(x,E){n.exports=E(requireCore())})(commonjsGlobal,function(x){return function(){var E=x,S=E.lib,C=S.WordArray,T=E.enc;T.Base64={stringify:function(B){var I=B.words,M=B.sigBytes,O=this._map;B.clamp();for(var D=[],L=0;L<M;L+=3)for(var V=I[L>>>2]>>>24-L%4*8&255,U=I[L+1>>>2]>>>24-(L+1)%4*8&255,q=I[L+2>>>2]>>>24-(L+2)%4*8&255,H=V<<16|U<<8|q,W=0;W<4&&L+W*.75<M;W++)D.push(O.charAt(H>>>6*(3-W)&63));var Q=O.charAt(64);if(Q)for(;D.length%4;)D.push(Q);return D.join("")},parse:function(B){var I=B.length,M=this._map,O=this._reverseMap;if(!O){O=this._reverseMap=[];for(var D=0;D<M.length;D++)O[M.charCodeAt(D)]=D}var L=M.charAt(64);if(L){var V=B.indexOf(L);V!==-1&&(I=V)}return A(B,I,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function A(B,I,M){for(var O=[],D=0,L=0;L<I;L++)if(L%4){var V=M[B.charCodeAt(L-1)]<<L%4*2,U=M[B.charCodeAt(L)]>>>6-L%4*2,q=V|U;O[D>>>2]|=q<<24-D%4*8,D++}return C.create(O,D)}}(),x.enc.Base64})})(encBase64);var encBase64Exports=encBase64.exports;const Base64=getDefaultExportFromCjs(encBase64Exports);class CacheSuivi{constructor(){$t(this,"verrou");$t(this,"_cacheSuivi");$t(this,"_cacheRecherche");this.verrou=new s,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:_,idClient:x,fOriginale:E,args:S,ceciOriginal:C}){const T=Object.entries(S).find(D=>typeof D[1]=="function")?.[0];if(!T)throw new Error("Aucun argument n'est une fonction.");const A=S[T],B=Object.fromEntries(Object.entries(S).filter(D=>typeof D[1]!="function"));if(Object.keys(S).length!==Object.keys(B).length+1)throw new Error("Plus d'un argument pour "+_+" est une fonction : "+JSON.stringify(S));const I=this.gnrerCodeCache({adresseFonction:_,idClient:x,argsClefs:B}),M=v4();if(await this.verrou.acquire(I),this._cacheSuivi[I])this.verrou.release(I),this._cacheSuivi[I].requtes[M]=A,Object.keys(this._cacheSuivi[I]).includes("val")&&await A(this._cacheSuivi[I].val);else{this._cacheSuivi[I]={requtes:{[M]:A}};const D=async U=>{if(!this._cacheSuivi[I]||Object.keys(this._cacheSuivi[I]).includes("val")&&deepEqual$1(this._cacheSuivi[I].val,U,{strict:!0}))return;this._cacheSuivi[I].val=U;const q=Object.values(this._cacheSuivi[I].requtes);await Promise.all(q.map(H=>H(U)))},L={...B,[T]:D},V=await E.apply(C,[L]);this._cacheSuivi[I].fOublier=V,this.verrou.release(I)}return async()=>{await this.oublierSuivi({codeCache:I,idRequte:M})}}async suivreRecherche({adresseFonction:_,nomArgTaille:x,idClient:E,fOriginale:S,args:C,ceciOriginal:T,par:A}){const B=Object.entries(C).find(W=>typeof W[1]=="function")?.[0];if(!B)throw new Error("Aucun argument n'est une fonction.");const I=C[B],M=Object.fromEntries(Object.entries(C).filter(W=>typeof W[1]!="function"));if(Object.keys(C).length!==Object.keys(M).length+1)throw new Error("Plus d'un argument pour "+_+" est une fonction : "+JSON.stringify(C));const O=Object.fromEntries(Object.entries(C).filter(W=>W[0]!==x)),D=C[x];if(D===void 0)throw new Error(`Aucun argument de nom ${x} n'a t pass  la fonction ${_}.`);if(typeof D!="number")throw new Error(`Argument ${x} n'est pas un nombre dans la fonction ${_}.`);const L=this.gnrerCodeCache({adresseFonction:_,idClient:E,argsClefs:O}),V=v4();await this.verrou.acquire(L);const U=W=>{if(!this._cacheRecherche[L])return;this._cacheRecherche[L].val=W;const Q=Object.values(this._cacheRecherche[L].requtes);A==="profondeur"?Q.forEach(re=>re.f(W.filter(ce=>ce.profondeur<=re.taille))):Q.forEach(re=>re.f(W.slice(0,re.taille)))};if(this._cacheRecherche[L]){if(this._cacheRecherche[L].requtes[V]={f:I,taille:D},Object.keys(this._cacheRecherche[L]).includes("val")){const{val:W}=this._cacheRecherche[L];W&&U(W)}}else{this._cacheRecherche[L]={requtes:{[V]:{f:I,taille:D}},taillePrsente:D};const W={...O,[B]:U,[x]:D};if(A==="profondeur"){const{fOublier:Q,fChangerProfondeur:re}=await S.apply(T,[W]);this._cacheRecherche[L].fs={fOublier:Q,fChangerTaille:re}}else{const{fOublier:Q,fChangerN:re}=await S.apply(T,[W]);this._cacheRecherche[L].fs={fOublier:Q,fChangerTaille:re}}}const q=async()=>{await this.oublierRecherche({codeCache:L,idRequte:V})},H=W=>{const Q=this._cacheRecherche[L].requtes[V].taille;if(W===Q)return;this._cacheRecherche[L].requtes[V].taille=W;const{val:re}=this._cacheRecherche[L];re&&U(re);const ce=Math.max(...Object.values(this._cacheRecherche[L].requtes).map(fe=>fe.taille)),{taillePrsente:ne}=this._cacheRecherche[L],{fChangerTaille:Y}=this._cacheRecherche[L].fs;ce!==ne&&(this._cacheRecherche[L].taillePrsente=ce,Y(ce))};return this.verrou.release(L),{fOublier:q,[A==="profondeur"?"fChangerProfondeur":"fChangerN"]:H}}async oublierSuivi({codeCache:_,idRequte:x}){if(await this.verrou.acquire(_),this._cacheSuivi[_]===void 0)return;const{requtes:E,fOublier:S}=this._cacheSuivi[_];delete E[x],Object.keys(E).length||(S&&await S(),delete this._cacheSuivi[_]),this.verrou.release(_)}async oublierRecherche({codeCache:_,idRequte:x}){if(await this.verrou.acquire(_),this._cacheRecherche[_]===void 0)return;const{requtes:E,fs:S}=this._cacheRecherche[_];delete E[x],Object.keys(E).length||(S&&await S.fOublier(),delete this._cacheRecherche[_]),this.verrou.release(_)}gnrerCodeCache({adresseFonction:_,idClient:x,argsClefs:E}){const S=_+"-"+x+"-"+JSON.stringify(E);return Base64.stringify(md5(S))}}const cacheSuivi=(n,_,x)=>envelopper({nom:_,descripteur:x}),cacheRechercheParNRsultats=(n,_,x)=>envelopper({nom:_,descripteur:x,recherche:"nRsultats"}),cacheRechercheParProfondeur=(n,_,x)=>envelopper({nom:_,descripteur:x,recherche:"profondeur"}),envelopper=({nom:n,descripteur:_,recherche:x,nomArgTaille:E})=>{const S=_.value;if(typeof S=="function")_.value=function(...C){if(C.length>1)throw new Error("Args trop longs");const T=this.client?this.client:this;try{return x?(E=E||(x==="profondeur"?"profondeur":"nRsultatsDsirs"),cache.suivreRecherche({adresseFonction:this.constructor.name+"."+n,idClient:T.idCompte,fOriginale:S,args:C[0],ceciOriginal:this,par:x,nomArgTaille:E})):cache.suivre({adresseFonction:this.constructor.name+"."+n,idClient:T.idCompte,fOriginale:S,args:C[0],ceciOriginal:this})}catch(A){throw console.error(`Erreur: ${A}`),A}};else throw new Error("L'objet dcor n'est pas une fonction");return _},cache=new CacheSuivi;var conditions;(function(n){n.ATTR="attribution",n.GAL="partagegal",n.INCL="inclureDroitDauteur",n.CHNG="indiquerChangements",n.SRCE="partagerCodeSource",n.USGR="usagereseau"})(conditions||(conditions={}));var droits;(function(n){n.PRTG="partager",n.ADPT="adapter",n.CMRC="usageComercial",n.PRV="usagePriv",n.BREV="usageBrevets"})(droits||(droits={}));var limitations;(function(n){n.RSP="aucuneResponsabilit",n.GRNT="aucuneGarantie",n.MRCM="marqueCommerce",n.BREV="brevetExclu",n.SOUS="sousLicence"})(limitations||(limitations={}));var catgories;(function(n){n.BD="basesDeDonnes",n.ART="artistique",n.CODE="codeInformatique",n.AUTRE="autre"})(catgories||(catgories={}));const infoLicences={"ODbl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.GAL,conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT],catgorie:catgories.BD},"ODC-BY-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.INCL],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},PDDL:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},"rvca-open":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.ATTR],limitations:[limitations.SOUS,limitations.RSP],catgorie:catgories.BD,spcialise:!0},"CC-BY-SA-4_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-BY-4_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.ATTR,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-0-1_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"0bsd":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},"afl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"agpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"apache-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"artistic-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"bsd-2-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause-clear":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-4-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"cecill-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ecl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.BREV,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-2_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_2":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"gpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"gpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},isc:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lppl-1_3c":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mit-0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},mit:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"ms-pl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"ms-rl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"mulanpsl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},ncsa:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"osl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},postgresql:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},unlicence:{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"upl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},vim:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[],catgorie:catgories.CODE},wtfpl:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},zlib:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ofl-1_1":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.AUTRE}};class Licences{constructor({client:_}){$t(this,"client");$t(this,"vnements");$t(this,"prt");$t(this,"perroquet");this.client=_,this.prt=!1,this.vnements=new EventEmitter$5,this.initialiser()}async initialiser(){this.prt=!0,this.vnements.emit("prt")}async attendrePrt(){if(!this.prt)return new Promise(_=>{const x=()=>{_(),this.vnements.off("prt",x)};this.vnements.on("prt",x)})}async suivreLicences({f:_}){if(await _(infoLicences),await this.attendrePrt(),this.perroquet){const x=async E=>await _(Object.fromEntries(E.map(S=>[S.code,S])));return await this.perroquet._({:x,:""})}return faisRien}async suggrerLicence({code:_,infoLicence:x}){await this.attendrePrt(),this.perroquet&&await this.perroquet.({:{code:_,...x}})}async effacerSuggestionLicence({empreinte:_}){await this.attendrePrt(),this.perroquet&&await this.perroquet._({:_})}async suivreSuggestionsLicences({f:_}){return await this.attendrePrt(),this.perroquet?await this.perroquet._({:_}):{fOublier:faisRien,fChangerProfondeur:faisRien}}async approuverLicence({suggestion:_}){if(await this.attendrePrt(),this.perroquet)return await this.perroquet.({:_})}}__decorate([cacheSuivi],Licences.prototype,"suivreLicences",null);var lib={},indexedDbReadStream={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,x){_.__proto__=x}||function(_,x){for(var E in x)x.hasOwnProperty(E)&&(_[E]=x[E])};return function(_,x){n(_,x);function E(){this.constructor=_}_.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(indexedDbReadStream,"__esModule",{value:!0});var stream_1$1=require$$0$1,IndexedDbReadStream=function(n){__extends$2(_,n);function _(x){var E=n.call(this,{objectMode:!0})||this,S=indexedDB.open(x.databaseName,x.databaseVersion);return S.addEventListener("success",function(C){var T;try{var A=C.target.result.transaction([x.objectStoreName]).objectStore(x.objectStoreName);x.indexName&&(A=A.index(x.indexName)),T=A.openCursor(x.range,x.cursorDirection)}catch(B){return E.emit("error",B)}T.addEventListener("success",function(B){if(B.target.result)return E.push(B.target.result.value),B.target.result.continue();E.push(null)}),T.addEventListener("error",function(B){E.emit("error",B.target.result)})}),S.addEventListener("error",function(C){E.emit("error",C.target.result)}),E}return _.prototype._read=function(){},_}(stream_1$1.Readable);indexedDbReadStream.IndexedDbReadStream=IndexedDbReadStream;var indexedDbWriteStream={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,x){_.__proto__=x}||function(_,x){for(var E in x)x.hasOwnProperty(E)&&(_[E]=x[E])};return function(_,x){n(_,x);function E(){this.constructor=_}_.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(indexedDbWriteStream,"__esModule",{value:!0});var stream_1=require$$0$1,IndexedDbWriteStream=function(n){__extends$1(_,n);function _(x){var E=n.call(this,{objectMode:!0})||this;return E.options=x,E}return _.prototype._write=function(x,E,S){var C=this,T=indexedDB.open(this.options.databaseName,this.options.databaseVersion);T.addEventListener("success",function(A){var B;try{B=A.target.result.transaction([C.options.objectStoreName],"readwrite").objectStore(C.options.objectStoreName).add(x)}catch(I){C.emit("error",I);return}B.addEventListener("success",function(){S()}),B.addEventListener("error",function(I){C.emit("error",I.target.error)})}),T.addEventListener("error",function(A){C.emit("error",A.target.error)})},_}(stream_1.Writable);indexedDbWriteStream.IndexedDbWriteStream=IndexedDbWriteStream;(function(n){function _(x){for(var E in x)n.hasOwnProperty(E)||(n[E]=x[E])}Object.defineProperty(n,"__esModule",{value:!0}),_(indexedDbReadStream),_(indexedDbWriteStream)})(lib);const indexedDbStream=getDefaultExportFromCjs(lib);class pingles{constructor({client:_}){$t(this,"client");$t(this,"requtes");$t(this,"fsOublier");$t(this,"vnements");this.client=_,this.requtes=[],this.fsOublier={},this.vnements=new eventsExports.EventEmitter}async pinglerBd({id:_,rcursif:x=!1,fichiers:E=!0}){await this.directementpingle({id:_})||await this._pingler({id:_,rcursif:x,fichiers:E})}async dspinglerBd({id:_}){await Promise.all(this.requtes.filter(E=>E.id===_).map(async E=>await E.fOublier()));const x=this.requtes.filter(E=>E.parent===_);this.requtes=this.requtes.filter(E=>E.id!==_),this.requtes=this.requtes.filter(E=>E.parent!==_),await Promise.all(x.map(async E=>{this.requtes.filter(S=>S.id===E.id&&S.parent!==_).length||await this.dspinglerBd({id:E.id})}))}async pingle({id:_}){return this.requtes.some(x=>x.id===_)}async pingleParParent({id:_,parent:x}){return this.requtes.some(E=>E.id===_&&E.parent===x)}async directementpingle({id:_}){return await this.pingleParParent({id:_})}async pingles(){return new Set(this.requtes.map(_=>_.id))}async suivrepingles({f:_}){const x=async()=>{const E=await this.pingles();return await _(E)};return this.vnements.on("changement pingles",x),async()=>{this.vnements.off("changement pingles",x)}}async _pingler({id:_,rcursif:x,fichiers:E,parent:S}){if(await this.pingleParParent({id:_,parent:S}))return;const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:_});if(this.requtes.push({id:_,parent:S,fOublier:T}),this.vnements.emit("changement pingles"),x){const A=async B=>{let I=[];typeof B=="object"?(I=Object.values(B).filter(O=>typeof O=="string"),I.push(...Object.keys(B).filter(O=>typeof O=="string"))):Array.isArray(B)?I=B:typeof B=="string"&&(I=[B]);const M=I.filter(O=>adresseOrbiteValide(O));E&&I.filter(D=>cidValide(D)&&!M.includes(D)).forEach(D=>{this.client.sfip.pin.add(D);const L=async()=>{try{await this.client.sfip.pin.rm(D)}catch{}};this.requtes.push({id:D,parent:_,fOublier:L}),this.vnements.emit("changement pingles")}),await Promise.all(M.map(async O=>await this._pingler({id:O,rcursif:x,fichiers:E,parent:_})))};if(C.type==="keyvalue"){const B=await this.client.suivreBdDic({id:_,f:A});this.fsOublier[_]=B}else if(C.type==="feed"){const B=await this.client.suivreBdListe({id:_,f:A});this.fsOublier[_]=B}}}async toutDspingler(){const _=await this.pingles();await Promise.all([..._].map(async x=>{await this.dspinglerBd({id:x})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(_=>_()))}}var TYPES_STATUT;(function(n){n.INTERNE="interne",n.BTA="bta",n.ACTIVE="active",n.OBSOLTE="obsolte"})(TYPES_STATUT||(TYPES_STATUT={}));const schmaStructureBdNoms={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdMtadonnes={type:"object",additionalProperties:!0,required:[]};class ComposanteClient{constructor({client:_,clef:x,typeBd:E}){$t(this,"client");$t(this,"clef");$t(this,"typeBd");this.client=_,this.clef=x,this.typeBd=E}async obtIdBd(){const _=await this.client.obtIdBd({nom:this.clef,racine:this.client.bdCompte,type:this.typeBd});if(!_)throw new Error("Mal initialis");return _}}class ComposanteClientDic extends ComposanteClient{constructor({client:x,clef:E,schmaBdPrincipale:S}){super({client:x,clef:E,typeBd:"kvstore"});$t(this,"schmaBdPrincipale");this.schmaBdPrincipale=S}async obtBd(){const x=await this.obtIdBd();if(!x)throw new Error("Initialisation "+this.clef);return await this.client.ouvrirBd({id:x,type:"keyvalue",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:x,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:x}),f:ignorerNonDfinis(E),fSuivre:async({id:S,fSuivreBd:C})=>await this.client.suivreBdDic({id:S,schma:this.schmaBdPrincipale,f:C})})}async suivreSousBdDic({idCompte:x,clef:E,schma:S,f:C}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>await this.suivreIdBd({f:T,idCompte:x}),f:ignorerNonDfinis(C),fSuivre:async({id:T,fSuivreBd:A})=>await this.client.suivreBdDicDeClef({id:T,clef:E,schma:S,f:A})})}async suivreSousBdListe({idCompte:x,clef:E,schma:S,f:C}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>await this.suivreIdBd({f:T,idCompte:x}),f:ignorerNonDfinis(C),fSuivre:async({id:T,fSuivreBd:A})=>await this.client.suivreBdListeDeClef({id:T,clef:E,f:A,schma:S,renvoyerValeur:!0})})}async suivreIdBd({f:x,idCompte:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>E?(await S(E),faisRien):await this.client.suivreIdCompte({f:S}),f:ignorerNonDfinis(x),fSuivre:async({id:S,fSuivreBd:C})=>await this.client.suivreBd({id:S,type:"keyvalue",f:async T=>{const A=await this.client.obtIdBd({nom:this.clef,racine:T,type:"kvstore"});return await C(A)}})})}}__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdDic",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdListe",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreIdBd",null);class ComposanteClientListe extends ComposanteClient{constructor({client:x,clef:E,schmaBdPrincipale:S}){super({client:x,clef:E,typeBd:"feed"});$t(this,"schmaBdPrincipale");this.schmaBdPrincipale=S}async obtBd(){const x=await this.obtIdBd();if(!x)throw new Error("Initialisation "+this.clef);return await this.client.ouvrirBd({id:x,type:"feed",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:x,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:x}),f:ignorerNonDfinis(E),fSuivre:async({id:S,fSuivreBd:C})=>await this.client.suivreBdListe({id:S,f:C,schma:this.schmaBdPrincipale,renvoyerValeur:!0})})}async suivreBdPrincipaleBrute({idCompte:x,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:x}),f:ignorerNonDfinis(E),fSuivre:async({id:S,fSuivreBd:C})=>await this.client.suivreBdListe({id:S,f:C,schma:this.schmaBdPrincipale,renvoyerValeur:!1})})}async suivreIdBd({f:x,idCompte:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>E?(await S(E),faisRien):await this.client.suivreIdCompte({f:S}),f:ignorerNonDfinis(x),fSuivre:async({id:S,fSuivreBd:C})=>await this.client.suivreBd({id:S,type:"keyvalue",f:async()=>{const T=await this.client.obtIdBd({nom:this.clef,racine:S,type:"feed"});return await C(T)}})})}}__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipaleBrute",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreIdBd",null);const MAX_TAILLE_IMAGE$3=500*1e3,MAX_TAILLE_IMAGE_VIS$3=1500*1e3,schmaStructureBdProfil={type:"object",properties:{image:{type:"string",nullable:!0}},required:[]},schmaContactProfil={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class Profil extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"profil",schmaBdPrincipale:schmaStructureBdProfil})}async pingler(){const _=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:_,rcursif:!0,fichiers:!0})}async suivreCourriel({f:_,idCompte:x}){return await this.suivreContacts({idCompte:x,f:async E=>await _(E.find(S=>S.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:_}){await this.sauvegarderContact({type:"courriel",contact:_})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:_,idCompte:x}){return await this.suivreSousBdListe({idCompte:x,clef:"contacts",schma:schmaContactProfil,f:_})}async sauvegarderContact({type:_,contact:x}){const E=await this.obtIdBd(),S=await this.client.obtIdBd({nom:"contacts",racine:E,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${E}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed",schma:schmaContactProfil});await C.add({type:_,contact:x}),await T()}async effacerContact({type:_,contact:x}){const E=await this.obtIdBd(),S=await this.client.obtIdBd({nom:"contacts",racine:E,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${E}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed",schma:schmaContactProfil});this.client.effacerlmentsDeBdListe({bd:C,lment:A=>A.payload.value.type===_&&(x===void 0||A.payload.value.contact===x)}),await T()}async suivreNoms({f:_,idCompte:x}){return await this.suivreSousBdDic({idCompte:x,clef:"noms",schma:schmaStructureBdNoms,f:_})}async sauvegarderNom({langue:_,nom:x}){return await this.sauvegarderNoms({noms:{[_]:x}})}async sauvegarderNoms({noms:_}){const x=await this.obtIdBd(),E=await this.client.obtIdBd({nom:"noms",racine:x,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});for(const[T,A]of Object.entries(_))await S.set(T,A);await C()}async effacerNom({langue:_}){const x=await this.obtIdBd(),E=await this.client.obtIdBd({nom:"noms",racine:x,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});await S.del(_),await C()}async sauvegarderImage({image:_}){let x;if(_.size!==void 0){if(_.size>MAX_TAILLE_IMAGE$3)throw new Error("Taille maximale excde");x=await _.arrayBuffer()}else x=_;const E=await this.client.ajouterSFIP({fichier:x}),{bd:S,fOublier:C}=await this.obtBd();await S.set("image",E),await C()}async effacerImage(){const{bd:_,fOublier:x}=await this.obtBd();await _.del("image"),await x()}async suivreImage({f:_,idCompte:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>await this.suivreIdBd({f:E,idCompte:x}),f:ignorerNonDfinis(_),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBd({id:E,type:"keyvalue",schma:schmaStructureBdProfil,f:async C=>{const T=C.get("image");if(T){const A=await this.client.obtFichierSFIP({id:T,max:MAX_TAILLE_IMAGE_VIS$3});return await S(A)}else return await S(null)}})})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreContacts",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);async function toBuffer(n){let _=new Uint8Array(0);for await(const x of n)_=concat$5([_,x],_.length+x.length);return _}const schmaStructureBdBd={type:"object",properties:{type:{type:"string"},mtadonnes:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nues:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nues","statut","copiDe"]},schmaInfoTableau={type:"object",properties:{clef:{type:"string"},position:{type:"integer"}},required:["clef","position"]},schmaBdTableauxDeBd={type:"object",additionalProperties:schmaInfoTableau,required:[]},schmaBdPrincipale$4={type:"string"},MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3;class BDs extends ComposanteClientListe{constructor({client:x}){super({client:x,clef:"bds",schmaBdPrincipale:schmaBdPrincipale$4});$t(this,"verrouBdUnique");this.verrouBdUnique=new s}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreBds({f:x,idCompte:E}){return await this.suivreBdPrincipale({idCompte:E,f:x})}async crerBd({licence:x,licenceContenu:E,ajouter:S=!0}){const C=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"kvstore"});await T.set("type","bd"),await T.set("licence",x),E&&await T.set("licenceContenu",E);const I={address:T.access.address},M=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:I});await T.set("mtadonnes",M);const O=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:I});await T.set("noms",O);const D=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:I});await T.set("descriptions",D);const L=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:I});await T.set("tableaux",L);const V=await this.client.crerBdIndpendante({type:"feed",optionsAccs:I});await T.set("motsClefs",V);const U=await this.client.crerBdIndpendante({type:"feed",optionsAccs:I});if(await T.set("nues",U),await T.set("statut",{statut:TYPES_STATUT.ACTIVE}),S){const{bd:q,fOublier:H}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await q.add(C),H()}return await A(),C}async ajouterMesBds({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await E.add(x),await S()}async enleverDeMesBds({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:E,lment:x}),await S()}async copierBd({idBd:x,ajouterMesBds:E=!0,copierDonnes:S=!0}){const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:x,type:"kvstore"}),A=C.get("licence"),B=C.get("licenceContenu");if(!A)throw new Error(`Aucune licence trouve sur la BD source ${x}.`);const I=await this.crerBd({licence:A,licenceContenu:B,ajouter:E}),{bd:M,fOublier:O}=await this.client.ouvrirBd({id:I,type:"kvstore"}),D=C.get("mtadonnes");if(D){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:D,type:"kvstore"}),ge=ClientConstellation$1.obtObjetdeBdDic({bd:Y});await fe(),await this.sauvegarderMtadonnesBd({idBd:I,mtadonnes:ge})}const L=C.get("noms");if(L){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:L,type:"kvstore"}),ge=ClientConstellation$1.obtObjetdeBdDic({bd:Y});await fe(),await this.sauvegarderNomsBd({idBd:I,noms:ge})}const V=C.get("descriptions");if(V){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:V,type:"kvstore"}),ge=ClientConstellation$1.obtObjetdeBdDic({bd:Y});await fe(),await this.sauvegarderDescriptionsBd({idBd:I,descriptions:ge})}const U=C.get("motsClefs");if(U){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:U,type:"feed"}),ge=ClientConstellation$1.obtlmentsDeBdListe({bd:Y});await fe(),await this.ajouterMotsClefsBd({idBd:I,idsMotsClefs:ge})}const q=C.get("nues");if(q){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:q,type:"feed"}),ge=ClientConstellation$1.obtlmentsDeBdListe({bd:Y});await fe(),await this.rejoindreNues({idBd:I,idsNues:ge})}const H=C.get("tableaux"),W=M.get("tableaux");if(!W)throw new Error("Erreur d'initialisation.");const{bd:Q,fOublier:re}=await this.client.ouvrirBd({id:W,type:"kvstore"});if(H){const{bd:Y,fOublier:fe}=await this.client.ouvrirBd({id:H,type:"kvstore"}),ge=ClientConstellation$1.obtObjetdeBdDic({bd:Y});await fe();for(const $e of Object.keys(ge)){const _e=await this.client.tableaux.copierTableau({id:$e,idBd:I,copierDonnes:S});await Q.set(_e,ge[$e])}}const ce=C.get("statut")||{statut:TYPES_STATUT.ACTIVE};await M.set("statut",ce);const ne=C.get("image");return ne&&await M.set("image",ne),await M.set("copiDe",{id:x}),await Promise.all([T(),re(),O()]),I}async crerBdDeSchma({schma:x,ajouter:E=!0}){const{tableaux:S,motsClefs:C,nues:T,licence:A,licenceContenu:B,statut:I}=x,M=await this.crerBd({licence:A,licenceContenu:B,ajouter:!1});C&&await this.ajouterMotsClefsBd({idBd:M,idsMotsClefs:C}),T&&await this.rejoindreNues({idBd:M,idsNues:T}),I&&await this.changerStatutBd({idBd:M,statut:I});for(const O of S){const{cols:D,clef:L}=O,V=await this.ajouterTableauBd({idBd:M,clefTableau:L});for(const U of D){const{idColonne:q,idVariable:H,index:W,optionnel:Q}=U;if(await this.client.tableaux.ajouterColonneTableau({idTableau:V,idVariable:H,idColonne:q}),W&&await this.client.tableaux.changerColIndex({idTableau:V,idColonne:q,val:!0}),!Q){const re={typeRgle:"existe",dtails:{}};await this.client.tableaux.ajouterRgleTableau({idTableau:V,idColonne:q,rgle:re})}}}return E&&await this.ajouterMesBds({idBd:M}),M}async suivreParent({idBd:x,f:E}){return await this.client.suivreBd({id:x,f:async S=>{const C=S.get("copiDe");await E(C)},type:"keyvalue",schma:schmaStructureBdBd})}async suivreNuesBd({idBd:x,f:E}){return await this.client.suivreBdListeDeClef({id:x,clef:"nues",schma:{type:"string"},f:E})}async rechercherBdsParMotsClefs({motsClefs:x,f:E,idCompte:S}){const C=async A=>await this.suivreBds({f:A,idCompte:S}),T=async(A,B)=>{const I=M=>{const O=x.every(D=>M.includes(D));B(O)};return await this.suivreMotsClefsBd({idBd:A,f:I})};return await this.client.suivreBdsSelonCondition({fListe:C,fCondition:T,f:E})}async rechercherBdsParNue({idNue:x,f:E,idCompte:S}){const C=async A=>await this.suivreBds({f:A,idCompte:S}),T=async(A,B)=>{const I=async M=>{B(!!M&&M.includes(x))};return await this.suivreNuesBd({idBd:A,f:I})};return await this.client.suivreBdsSelonCondition({fListe:C,fCondition:T,f:E})}async combinerBds({idBdBase:x,idBd2:E}){const S=async A=>await uneFois(async B=>await this.suivreTableauxBd({idBd:A,f:B})),C=await S(x),T=await S(E);for(const A of T){const{id:B,clef:I}=A;if(I){const M=C.find(O=>O.clef===I)?.id;M&&await this.client.tableaux.combinerDonnes({idTableauBase:M,idTableau2:B})}}}async suivreIdTableauParClef({idBd:x,clef:E,f:S}){const C=async T=>{const A=T.find(B=>B.clef===E);await S(A?.id)};return await this.suivreTableauxBd({idBd:x,f:C})}async suivreBdUnique({schma:x,idNueUnique:E,f:S}){const C="bdUnique: "+E,T=new Set,A=async I=>{let M;await this.verrouBdUnique.acquire(E);const O=await this.client.obtDeStockageLocal({clef:C});switch(I.length){case 0:{O?M=O:(M=await this.crerBdDeSchma({schma:x}),await this.client.sauvegarderAuStockageLocal({clef:C,val:M}));break}case 1:{M=I[0],await this.client.sauvegarderAuStockageLocal({clef:C,val:M}),O&&M!==O&&(await this.combinerBds({idBdBase:M,idBd2:O}),await this.effacerBd({idBd:O}));break}default:{O&&(I=[...new Set([...I,O])]),M=I.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:C,val:M});for(const D of I.slice(1))T.has(D)||(T.add(D),await this.combinerBds({idBdBase:M,idBd2:D}),await this.effacerBd({idBd:D}));break}}this.verrouBdUnique.release(E),await S(M)};return await this.rechercherBdsParNue({idNue:E,f:A})}async suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:C}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreBdUnique({schma:x,idNueUnique:E,f:B}),f:C,fSuivre:async({id:B,fSuivreBd:I})=>await this.suivreIdTableauParClef({idBd:B,clef:S,f:I})})}async suivreDonnesDeTableauUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:C}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:I})=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:async M=>{M&&await I(M)}}),f:async I=>await C(I||[]),fSuivre:async({id:I,fSuivreBd:M})=>await this.client.tableaux.suivreDonnes({idTableau:I,f:M})})}async ajouterlmentTableauUnique({schmaBd:x,idNueUnique:E,clefTableau:S,vals:C}){const T=await uneFois(async A=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:ignorerNonDfinis(A)}));return await this.client.tableaux.ajouterlment({idTableau:T,vals:C})}async modifierlmentDeTableauUnique({vals:x,schmaBd:E,idNueUnique:S,clefTableau:C,empreintePrcdente:T}){const A=await uneFois(async B=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:E,idNueUnique:S,clefTableau:C,f:I=>{I&&B(I)}}),B=>!!B);return await this.client.tableaux.modifierlment({idTableau:A,vals:x,empreintePrcdente:T})}async effacerlmentDeTableauUnique({schmaBd:x,idNueUnique:E,clefTableau:S,empreinte:C}){const T=await uneFois(async A=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:B=>{B&&A(B)}}),A=>!!A);return await this.client.tableaux.effacerlment({idTableau:T,empreinte:C})}async suivreDonnesDeTableauParClef({idBd:x,clefTableau:E,f:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClef({idBd:x,clef:E,f:ignorerNonDfinis(T)}),T=>!!T);return await this.client.tableaux.suivreDonnes({idTableau:C,f:S})}async ajouterlmentTableauParClef({idBd:x,clefTableau:E,vals:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClef({idBd:x,clef:E,f:ignorerNonDfinis(T)}));return await this.client.tableaux.ajouterlment({idTableau:C,vals:S})}async modifierlmentDeTableauParClef({idBd:x,clefTableau:E,empreintelment:S,vals:C}){const T=await uneFois(async A=>await this.suivreIdTableauParClef({idBd:x,clef:E,f:ignorerNonDfinis(A)}));return await this.client.tableaux.modifierlment({idTableau:T,vals:C,empreintePrcdente:S})}async effacerlmentDeTableauParClef({idBd:x,clefTableau:E,empreintelment:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClef({idBd:x,clef:E,f:ignorerNonDfinis(T)}));this.client.tableaux.effacerlment({idTableau:C,empreinte:S})}async sauvegarderMtadonnesBd({idBd:x,mtadonnes:E}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});for(const A in E)await C.set(A,E[A]);await T()}async sauvegarderMtadonneBd({idBd:x,clef:E,mtadonne:S}){const C=await this.client.obtIdBd({nom:"mtadonnes",racine:x,type:"kvstore"});if(!C)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"kvstore"});await T.set(E,S),await A()}async effacerMtadonneBd({idBd:x,clef:E}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.del(E),await T()}async suivreMtadonnesBd({idBd:x,f:E}){return await this.client.suivreBdDicDeClef({id:x,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:E})}async sauvegarderNomsBd({idBd:x,noms:E}){const S=await this.client.obtIdBd({nom:"noms",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});for(const A in E)await C.set(A,E[A]);await T()}async sauvegarderNomBd({idBd:x,langue:E,nom:S}){const C=await this.client.obtIdBd({nom:"noms",racine:x,type:"kvstore"});if(!C)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"kvstore"});await T.set(E,S),await A()}async effacerNomBd({idBd:x,langue:E}){const S=await this.client.obtIdBd({nom:"noms",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.del(E),await T()}async sauvegarderDescriptionsBd({idBd:x,descriptions:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});for(const A in E)await C.set(A,E[A]);await T()}async sauvegarderDescriptionBd({idBd:x,langue:E,description:S}){const C=await this.client.obtIdBd({nom:"descriptions",racine:x,type:"kvstore"});if(!C)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"kvstore"});await T.set(E,S),await A()}async effacerDescriptionBd({idBd:x,langue:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"});await C.del(E),await T()}async changerLicenceBd({idBd:x,licence:E}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:x,type:"keyvalue"});await S.set("licence",E),await C()}async changerLicenceContenuBd({idBd:x,licenceContenu:E}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:x,type:"keyvalue"});E?await S.set("licenceContenu",E):await S.del("licenceContenu"),await C()}async ajouterMotsClefsBd({idBd:x,idsMotsClefs:E}){Array.isArray(E)||(E=[E]);const S=await this.client.obtIdBd({nom:"motsClefs",racine:x,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed"});for(const A of E)ClientConstellation$1.obtlmentsDeBdListe({bd:C}).includes(A)||await C.add(A);await T()}async effacerMotClefBd({idBd:x,idMotClef:E}){const S=await this.client.obtIdBd({nom:"motsClefs",racine:x,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed"});await this.client.effacerlmentDeBdListe({bd:C,lment:E}),await T()}async rejoindreNues({idBd:x,idsNues:E}){Array.isArray(E)||(E=[E]);const S=await this.client.obtIdBd({nom:"nues",racine:x,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed"});for(const A of E)ClientConstellation$1.obtlmentsDeBdListe({bd:C}).includes(A)||await C.add(A);await T()}async quitterNue({idBd:x,idNue:E}){const S=await this.client.obtIdBd({nom:"nue",racine:x,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"feed"});await this.client.effacerlmentDeBdListe({bd:C,lment:E}),await T()}async ajouterTableauBd({idBd:x,clefTableau:E}){const S=await this.client.obtIdBd({nom:"tableaux",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"});E=E||v4();const A=await this.client.tableaux.crerTableau({idBd:x});return await C.set(A,{position:Object.keys(C.all).length,clef:E}),await T(),A}async effacerTableauBd({idBd:x,idTableau:E}){const S=await this.client.obtIdBd({nom:"tableaux",racine:x,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"});await C.del(E),await T(),await this.client.tableaux.effacerTableau({idTableau:E})}async spcifierClefTableau({idBd:x,idTableau:E,clef:S}){const C=await this.client.obtIdBd({nom:"tableaux",racine:x,type:"kvstore"});if(!C)throw new Error("Id Bd Tableau non obtenable.");const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"keyvalue"}),B=T.get(E);B&&(B.clef=S,T.set(E,B)),await A()}async changerStatutBd({idBd:x,statut:E}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:x,type:"keyvalue"});S.set("statut",E),await C()}async suivreStatutBd({idBd:x,f:E}){return await this.client.suivreBdDic({id:x,schma:schmaStructureBdBd,f:async S=>{if(S.statut)return await E(S.statut)}})}async marquerObsolte({idBd:x,idNouvelle:E}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:x,type:"keyvalue"});S.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:E}),await C()}async marquerActive({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});E.set("statut",{statut:TYPES_STATUT.ACTIVE}),await S()}async marquerBta({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});E.set("statut",{statut:TYPES_STATUT.BTA}),await S()}async marquerInterne({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});E.set("statut",{statut:TYPES_STATUT.INTERNE}),await S()}async suivreLicenceBd({idBd:x,f:E}){return await this.client.suivreBd({id:x,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const C=S.get("licence");C&&await E(C)}})}async suivreLicenceContenuBd({idBd:x,f:E}){return await this.client.suivreBd({id:x,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const C=S.get("licenceContenu");await E(C)}})}async inviterAuteur({idBd:x,idCompteAuteur:E,rle:S}){await this.client.donnerAccs({idBd:x,identit:E,rle:S})}async sauvegarderImage({idBd:x,image:E}){let S;if(E.size!==void 0){if(E.size>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excde");S=await E.arrayBuffer()}else S=E;const C=await this.client.ajouterSFIP({fichier:S}),{bd:T,fOublier:A}=await this.client.ouvrirBd({id:x,type:"keyvalue"});await T.set("image",C),await A()}async effacerImage({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore"});await E.del("image"),await S()}async suivreImage({idBd:x,f:E}){return await this.client.suivreBd({id:x,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const C=S.get("image");if(!C)await E(null);else{const T=await this.client.obtFichierSFIP({id:C,max:MAX_TAILLE_IMAGE_VIS$2});await E(T)}}})}async suivreNomsBd({idBd:x,f:E}){return await this.client.suivreBdDicDeClef({id:x,clef:"noms",schma:schmaStructureBdNoms,f:E})}async suivreDescriptionsBd({idBd:x,f:E}){return await this.client.suivreBdDicDeClef({id:x,clef:"descriptions",schma:schmaStructureBdNoms,f:E})}async suivreMotsClefsBd({idBd:x,f:E}){return await this.client.suivreBdListeDeClef({id:x,clef:"motsClefs",schma:{type:"string"},f:E})}async suivreTableauxBd({idBd:x,f:E}){const S=async C=>{const T=Object.entries(C).map(([A,B])=>({id:A,...B}));await E(T)};return await this.client.suivreBdDicDeClef({id:x,clef:"tableaux",schma:schmaBdTableauxDeBd,f:S})}async suivreScoreAccsBd({idBd:x,f:E}){return E(Number.parseInt(x)),faisRien}async suivreScoreCouvertureBd({idBd:x,f:E}){const S=async A=>{const B=A.reduce((M,O)=>M+O.numrateur,0),I=A.reduce((M,O)=>M+O.dnominateur,0);await E(I===0?void 0:B/I)},C=async(A,B)=>{const I={},M=async()=>{const{cols:L,rgles:V}=I;if(L!==void 0&&V!==void 0){const U=L.filter(W=>W.catgorie&&["numrique","catgorique"].includes(W.catgorie.catgorie)),q=U.length,H=U.filter(W=>V.some(Q=>Q.rgle.rgle.typeRgle!=="catgorie"&&Q.colonne===W.id)).length;await B({numrateur:H,dnominateur:q})}},O=await this.client.tableaux.suivreColonnesTableau({idTableau:A,f:async L=>{I.cols=L,await M()}}),D=await this.client.tableaux.suivreRgles({idTableau:A,f:async L=>{I.rgles=L,await M()}});return async()=>{await O(),await D()}},T=async A=>await this.suivreTableauxBd({idBd:x,f:B=>A(B.map(I=>I.id))});return await this.client.suivreBdsDeFonctionListe({fListe:T,f:S,fBranche:C})}async suivreScoreValideBd({idBd:x,f:E}){const S=async A=>{const B=A.reduce((M,O)=>M+O.numrateur,0),I=A.reduce((M,O)=>M+O.dnominateur,0);await E(I===0?void 0:B/I)},C=async(A,B)=>{const I={},M=()=>{const{donnes:V,erreurs:U,cols:q}=I;if(V!==void 0&&U!==void 0&&q!==void 0){const H=q.filter(ne=>ne.catgorie&&["numrique","catgorique"].includes(ne.catgorie.catgorie)),W=[],Q=U.map(ne=>({empreinte:ne.empreinte,idColonne:ne.erreur.rgle.colonne})).filter(ne=>W.find(fe=>fe.empreinte===ne.empreinte&&fe.idColonne===ne.idColonne)?!1:(W.push(ne),!0)).length,re=V.map(ne=>H.filter(Y=>ne.donnes[Y.id]!==void 0).length).reduce((ne,Y)=>ne+Y,0),ce=re-Q;B({numrateur:ce,dnominateur:re})}},O=await this.client.tableaux.suivreDonnes({idTableau:A,f:V=>{I.donnes=V,M()}}),D=await this.client.tableaux.suivreValidDonnes({idTableau:A,f:V=>{I.erreurs=V,M()}}),L=await this.client.tableaux.suivreColonnesTableau({idTableau:A,f:V=>{I.cols=V,M()}});return async()=>{await O(),await D(),await L()}},T=async A=>await this.suivreTableauxBd({idBd:x,f:B=>A(B.map(I=>I.id))});return await this.client.suivreBdsDeFonctionListe({fListe:T,f:S,fBranche:C})}async suivreQualitBd({idBd:x,f:E}){const S={},C=async()=>{const{accs:M,couverture:O,valide:D,licence:L}=S,V={total:L?((M||0)+(O||0)+(D||0))/3:0,accs:M,couverture:O,valide:D,licence:L};await E(V)},T=await this.suivreScoreAccsBd({idBd:x,f:M=>{S.accs=M,C()}}),A=await this.suivreScoreCouvertureBd({idBd:x,f:M=>{S.couverture=M,C()}}),B=await this.suivreScoreValideBd({idBd:x,f:M=>{S.valide=M,C()}}),I=await this.suivreLicenceBd({idBd:x,f:M=>S.licence=M?1:0});return async()=>{await Promise.all([T,A,B,I])}}async suivreVariablesBd({idBd:x,f:E}){const S=async A=>await E(A||[]),C=async(A,B)=>await this.client.tableaux.suivreVariables({idTableau:A,f:B}),T=async A=>await this.suivreTableauxBd({idBd:x,f:B=>A(B.map(I=>I.id))});return await this.client.suivreBdsDeFonctionListe({fListe:T,f:S,fBranche:C})}async exporterDonnes({idBd:x,langues:E,nomFichier:S}){const C=utils$1.book_new(),T=new Set,A=await uneFois(B=>this.suivreTableauxBd({idBd:x,f:B}));for(const B of A){const{id:I}=B,{fichiersSFIP:M}=await this.client.tableaux.exporterDonnes({idTableau:I,langues:E,doc:C});M.forEach(O=>T.add(O))}if(!S){const B=await uneFois(M=>this.suivreNomsBd({idBd:x,f:M})),I=x.split("/").pop();S=E&&traduire(B,E)||I}return{doc:C,fichiersSFIP:T,nomFichier:S}}async exporterDocumentDonnes({donnes:x,formatDoc:E,dossier:S="",inclureFichiersSFIP:C=!0}){const{doc:T,fichiersSFIP:A,nomFichier:B}=x,M={xls:"biff8"}[E]||E;if(!(isBrowser$1||isWebWorker)){const O=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0);O.existsSync(S)||O.mkdirSync(S,{recursive:!0})}if(C){const O={octets:writeSync(T,{bookType:M,type:"buffer"}),nom:`${B}.${E}`},D=await Promise.all([...A].map(async L=>({nom:`${L.cid}.${L.ext}`,octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:L.cid}))})));return await zipper([O],D,path.join(S,B)),path.join(S,`${B}.zip`)}else return writeFileSync(T,path.join(S,`${B}.${E}`),{bookType:M}),path.join(S,`${B}.${E}`)}async effacerBd({idBd:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:E,lment:x}),await S();for(const T in["noms","descriptions","motsClefs"]){const A=await this.client.obtIdBd({nom:T,racine:x});A&&await this.client.effacerBd({id:A})}const C=await this.client.obtIdBd({nom:"tableaux",racine:x,type:"kvstore"});if(C){const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"keyvalue"}),B=Object.keys(T.all);for(const I of B)await this.client.tableaux.effacerTableau({idTableau:I});A(),await this.client.effacerBd({id:C})}await this.enleverDeMesBds({idBd:x}),await this.client.effacerBd({id:x})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNue",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreMtadonnesBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceContenuBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescriptionsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreQualitBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);var geojsonValidation={};(function(n){const _={};function x(M){return typeof M=="function"}function E(M){return M===Object(M)}function S(M,O){let D=!1;return typeof O=="string"?O=[O]:Object.prototype.toString.call(O)==="[object Array]"?O.length===0&&(D=!0):D=!0,M?O:D}function C(M,O){let D;if(x(_[M])){try{D=_[M](O)}catch(L){D=["Problem with custom definition for "+M+": "+L]}if(typeof result=="string"&&(D=[D]),Object.prototype.toString.call(D)==="[object Array]")return D}return[]}n.define=(M,O)=>M in I&&x(O)?(_[M]=O,!0):!1,n.isPosition=(M,O=!1)=>{let D=[];return Array.isArray(M)?(M.length<=1&&D.push("Position must be at least two elements"),M.forEach((L,V)=>{typeof L!="number"&&D.push("Position must only contain numbers. Item "+L+" at index "+V+" is invalid.")})):D.push("Position must be an array"),D=D.concat(C("Position",M)),S(O,D)},n.isGeoJSONObject=n.valid=(M,O=!1)=>{if(E(M)){let D=[];if("type"in M){if(A[M.type])return A[M.type](M,O);if(B[M.type])return B[M.type](M,O);D.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else D.push('must have a member with the name "type"');return D=D.concat(C("GeoJSONObject",M)),S(O,D)}else return S(O,["must be a JSON Object"])},n.isGeometryObject=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("type"in M){if(B[M.type])return B[M.type](M,O);D.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else D.push('must have a member with the name "type"');return D=D.concat(C("GeometryObject",M)),S(O,D)},n.isPoint=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="Point"&&D.push('type must be "Point"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isPosition(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("Point",M)),S(O,D)},n.isMultiPointCoor=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.forEach((L,V)=>{const U=n.isPosition(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push("coordinates must be an array"),S(O,D)},n.isMultiPoint=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="MultiPoint"&&D.push('type must be "MultiPoint"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isMultiPointCoor(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("MultiPoint",M)),S(O,D)},n.isLineStringCoor=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.length>1?M.forEach((L,V)=>{const U=n.isPosition(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push("coordinates must have at least two elements"):D.push("coordinates must be an array"),S(O,D)},n.isLineString=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="LineString"&&D.push('type must be "LineString"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isLineStringCoor(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("LineString",M)),S(O,D)},n.isMultiLineStringCoor=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.forEach((L,V)=>{const U=n.isLineStringCoor(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push("coordinates must be an array"),S(O,D)},n.isMultiLineString=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="MultiLineString"&&D.push('type must be "MultiLineString"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isMultiLineStringCoor(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("MultiPoint",M)),S(O,D)};function T(M,O){let D=[];return Array.isArray(M)?(M.forEach((L,V)=>{const U=n.isPosition(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}),M[0].toString()!==M[M.length-1].toString()&&D.push("The first and last positions must be equivalent"),M.length<4&&D.push("coordinates must have at least four positions")):D.push("coordinates must be an array"),S(O,D)}n.isPolygonCoor=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.forEach((L,V)=>{const U=T(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push("coordinates must be an array"),S(O,D)},n.isPolygon=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="Polygon"&&D.push('type must be "Polygon"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isPolygonCoor(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("Polygon",M)),S(O,D)},n.isMultiPolygonCoor=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.forEach((L,V)=>{const U=n.isPolygonCoor(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push("coordinates must be an array"),S(O,D)},n.isMultiPolygon=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="MultiPolygon"&&D.push('type must be "MultiPolygon"'):D.push('must have a member with the name "type"'),"coordinates"in M){const L=n.isMultiPolygonCoor(M.coordinates,!0);L.length&&(D=D.concat(L))}else D.push('must have a member with the name "coordinates"');return D=D.concat(C("MultiPolygon",M)),S(O,D)},n.isGeometryCollection=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}return"type"in M?M.type!=="GeometryCollection"&&D.push('type must be "GeometryCollection"'):D.push('must have a member with the name "type"'),"geometries"in M?Array.isArray(M.geometries)?M.geometries.forEach((L,V)=>{const U=n.isGeometryObject(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push('"geometries" must be an array'):D.push('must have a member with the name "geometries"'),D=D.concat(C("GeometryCollection",M)),S(O,D)},n.isFeature=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=D.concat(L))}if("type"in M?M.type!=="Feature"&&D.push('type must be "Feature"'):D.push('must have a member with the name "type"'),"properties"in M||D.push('must have a member with the name "properties"'),"geometry"in M){if(M.geometry!==null){const L=n.isGeometryObject(M.geometry,!0);L.length&&(D=D.concat(L))}}else D.push('must have a member with the name "geometry"');return D=D.concat(C("Feature",M)),S(O,D)},n.isFeatureCollection=(M,O=!1)=>{if(!E(M))return S(O,["must be a JSON Object"]);let D=[];if("bbox"in M){const L=n.isBbox(M.bbox,!0);L.length&&(D=L)}return"type"in M?M.type!=="FeatureCollection"&&D.push('type must be "FeatureCollection"'):D.push('must have a member with the name "type"'),"features"in M?Array.isArray(M.features)?M.features.forEach((L,V)=>{const U=n.isFeature(L,!0);U.length&&(U[0]="at "+V+": ".concat(U[0]),D=D.concat(U))}):D.push('"Features" must be an array'):D.push('must have a member with the name "Features"'),D=D.concat(C("FeatureCollection",M)),S(O,D)},n.isBbox=(M,O=!1)=>{let D=[];return Array.isArray(M)?M.length%2!==0&&D.push("bbox, must be a 2*n array"):D.push("bbox must be an array"),D=D.concat(C("Bbox",M)),S(O,D)};const A={Feature:n.isFeature,FeatureCollection:n.isFeatureCollection},B={Point:n.isPoint,MultiPoint:n.isMultiPoint,LineString:n.isLineString,MultiLineString:n.isMultiLineString,Polygon:n.isPolygon,MultiPolygon:n.isMultiPolygon,GeometryCollection:n.isGeometryCollection},I={Feature:n.isFeature,FeatureCollection:n.isFeatureCollection,Point:n.isPoint,MultiPoint:n.isMultiPoint,LineString:n.isLineString,MultiLineString:n.isMultiLineString,Polygon:n.isPolygon,MultiPolygon:n.isMultiPolygon,GeometryCollection:n.isGeometryCollection,Bbox:n.isBbox,Position:n.isPosition,GeoJSON:n.isGeoJSONObject,GeometryObject:n.isGeometryObject};n.allTypes=I})(geojsonValidation);const gjv=getDefaultExportFromCjs(geojsonValidation),estSpcificationHoroDatage=n=>!!n&&typeof n.systme=="string"&&typeof n.val=="string";class Cholqij{lireDate(_){const{systme:x,val:E}=_;switch(x){case"dateJS":case"grgorien":{const S=new Date(E);if(isNaN(S.valueOf()))throw new Error(E);return S}default:throw new Error(x)}}dateValide(_){if(!estSpcificationHoroDatage(_))return!1;try{return this.lireDate(_),!0}catch{return!1}}}const cholqij=new Cholqij,schmaRgleVariableAvecId={type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{typeRgle:{type:"string"},dtails:{type:"object",required:[],additionalProperties:!0}},required:["dtails","typeRgle"]}},required:["id","rgle"]},schmaRgleColonne={type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},rgle:{type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{dtails:{type:"object",required:[]},typeRgle:{type:"string"}},required:["dtails","typeRgle"]}},required:["id","rgle"]}},required:["colonne","rgle","source"]};function gnrerFonctionRgle({rgle:n,varsColonnes:_,donnesCatgorie:x}){const E=n.rgle,{colonne:S}=n,{typeRgle:C}=E.rgle;switch(C){case"existe":return T=>T.filter(B=>B.donnes[S]===void 0).map(B=>{const{empreinte:I}=B;return{empreinte:I,erreur:{rgle:n}}});case"catgorie":return T=>{const A=E.rgle.dtails.catgorie;return T.filter(I=>!validerCatgorieVal({val:I.donnes[S],catgorie:A})).map(I=>{const{empreinte:M}=I;return{empreinte:M,erreur:{rgle:n}}})};case"bornes":{const T=E;let A,B;const{val:I,op:M,type:O}=T.rgle.dtails,D=(L,V)=>L===void 0||V===void 0;switch(M){case">":B=(L,V)=>D(L,V)||L>V;break;case"<":B=(L,V)=>D(L,V)||L<V;break;case"":case">=":B=(L,V)=>D(L,V)||L>=V;break;case"":case"<=":B=(L,V)=>D(L,V)||L<=V;break}return O==="fixe"?A=L=>{const V=L.donnes[S];return Array.isArray(V)?V.every(U=>B(U,I)):B(V,I)}:A=L=>{const V=L.donnes[S],U=O==="dynamiqueVariable"?L.donnes[_[I]]:L.donnes[I];return Array.isArray(V)?V.every(q=>B(q,U)):B(V,U)},L=>L.filter(U=>!validerBorneVal({val:U,fComp:A})).map(U=>{const{empreinte:q}=U;return{empreinte:q,erreur:{rgle:n}}})}case"valeurCatgorique":{const T=E.rgle,A=T.dtails.type==="fixe"?T.dtails.options:x;if(!A)throw new Error("Options non spcifies");return B=>B.filter(M=>M.donnes[S]!==void 0&&!A.includes(M.donnes[S])).map(M=>{const{empreinte:O}=M;return{empreinte:O,colonne:S,erreur:{rgle:n}}})}default:throw Error(`Catgorie ${C} inconnue.`)}}const formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vido:["mp4"],audio:["mp3","ogg","m4a"]};function validFichier(n,_){if(typeof n!="object")return!1;const{cid:x,ext:E}=n;return!cidValide(x)||typeof E!="string"?!1:_?_.includes(E.replace(".","")):!0}function validerCatgorieVal({val:n,catgorie:_}){return n===void 0?!0:_.type==="simple"?validerCatgorieBase({catgorie:_.catgorie,val:n}):Array.isArray(n)?n.every(x=>validerCatgorieBase({catgorie:_.catgorie,val:x})):!1}const validerBorneVal=({val:n,fComp:_})=>Array.isArray(n)?n.every(x=>_(x)):_(n),estUnHoroDatage=n=>{if(["number","string"].includes(typeof n)){const _=new Date(n);return!isNaN(_.valueOf())}else return cholqij.dateValide(n)},validerCatgorieBase=({catgorie:n,val:_})=>{switch(n){case"numrique":return typeof _=="number";case"horoDatage":return estUnHoroDatage(_);case"intervaleTemps":return!Array.isArray(_)||_.length!==2?!1:_.every(x=>estUnHoroDatage(x));case"chane":return adresseOrbiteValide(_);case"chaneNonTraductible":return typeof _=="string";case"boolen":return typeof _=="boolean";case"gojson":return typeof _!="object"?!1:gjv.valid(_);case"vido":return validFichier(_,formatsFichiers.vido);case"audio":return validFichier(_,formatsFichiers.audio);case"image":return validFichier(_,formatsFichiers.images);case"fichier":return validFichier(_);default:return!1}},schmaInfoColAvecCatgorie={type:"object",properties:{catgorie:{type:"object",nullable:!0,properties:{catgorie:{type:"string"},type:{type:"string"}},required:["catgorie","type"]},id:{type:"string"},variable:{type:"string"},index:{type:"boolean",nullable:!0}},required:["id","variable"]},schmaDonnesTableau={type:"object",additionalProperties:!0,required:[]};function lmentsgaux(n,_){const x=Object.keys(n).filter(S=>S!=="id"),E=Object.keys(_).filter(S=>S!=="id");return!(!x.every(S=>n[S]===_[S])||!E.every(S=>n[S]===_[S]))}function indexlmentsgaux(n,_,x){return!!x.every(E=>n[E]===_[E])}const schmaStructureBdTableau={type:"object",properties:{type:{type:"string"},noms:{type:"string"},donnes:{type:"string"},colonnes:{type:"string"},rgles:{type:"string"}},required:["donnes","colonnes","noms","rgles","type"]};class Tableaux{constructor({client:_}){$t(this,"client");this.client=_}async crerTableau({idBd:_}){const x=await this.client.obtOpsAccs({idBd:_}),E=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:x}),{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdTableau});await S.set("type","tableau");const T=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:x});await S.set("noms",T);const A=await this.client.crerBdIndpendante({type:"feed",optionsAccs:x});await S.set("donnes",A);const B=await this.client.crerBdIndpendante({type:"feed",optionsAccs:x});await S.set("colonnes",B);const I=await this.client.crerBdIndpendante({type:"feed",optionsAccs:x});return await S.set("rgles",I),await C(),E}async copierTableau({id:_,idBd:x,copierDonnes:E=!0}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdTableau}),T=await this.crerTableau({idBd:x}),{bd:A,fOublier:B}=await this.client.ouvrirBd({id:T,type:"keyvalue",schma:schmaStructureBdTableau}),I=S.get("noms");if(I){const{bd:M,fOublier:O}=await this.client.ouvrirBd({id:I,type:"keyvalue",schma:schmaStructureBdNoms}),D=ClientConstellation$1.obtObjetdeBdDic({bd:M});await O(),await this.sauvegarderNomsTableau({idTableau:T,noms:D})}return await this.client.copierContenuBdListe({bdBase:S,nouvelleBd:A,clef:"colonnes"}),await this.client.copierContenuBdListe({bdBase:S,nouvelleBd:A,clef:"rgles"}),E&&await this.client.copierContenuBdListe({bdBase:S,nouvelleBd:A,clef:"donnes"}),await Promise.all([C(),B()]),T}async suivreDiffrencesAvecTableau({idTableau:_,idTableauRf:x,f:E}){const S={},C=async()=>{if(!S.colonnesTableau||!S.colonnesTableauRf)return;const B=[];for(const I of S.colonnesTableauRf){const M=S.colonnesTableau.find(O=>O.id===I.id);if(M){if(M.variable!==I.variable){const O={type:"variableColonne",svre:!0,idCol:M.id,varColTableau:M.variable,varColTableauLie:I.variable};B.push(O)}if(M.index!==I.index){const O={type:"indexColonne",svre:!0,idCol:M.id,colTableauIndexe:!!M.index};B.push(O)}}else{const O={type:"colonneManquante",svre:!0,idManquante:I.id};B.push(O)}}for(const I of S.colonnesTableau)if(!S.colonnesTableauRf.find(O=>O.id===I.id)){const O={type:"colonneSupplmentaire",svre:!1,idExtra:I.id};B.push(O)}await E(B)},T=await this.suivreColonnesTableau({idTableau:_,f:async B=>{S.colonnesTableau=B,await C()},catgories:!1}),A=await this.suivreColonnesTableau({idTableau:x,f:async B=>{S.colonnesTableauRf=B,await C()},catgories:!1});return async()=>{await Promise.all([T,A])}}async changerColIndex({idTableau:_,idColonne:x,val:E}){const S=await this.client.obtIdBd({nom:"colonnes",racine:_,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S}),B=ClientConstellation$1.obtlmentsDeBdListe({bd:C,renvoyerValeur:!1}).find(I=>I.payload.value.id===x);if(B&&!!B.payload.value.index!==E){const{value:I}=B.payload,M=Object.assign(I,{index:E});await C.remove(B.hash),await C.add(M)}await T()}async suivreIndex({idTableau:_,f:x}){const E=async S=>{const C=S.filter(T=>T.index).map(T=>T.id);await x(C)};return await this.suivreColonnesTableau({idTableau:_,f:E})}async suivreDonnes({idTableau:_,f:x,clefsSelonVariables:E=!1}){const S={},C=async()=>{const{donnes:M,colonnes:O}=S;if(M&&O){const D=M.map(L=>{const V=L.hash,U=L.payload.value;return{donnes:E?Object.keys(U).reduce((H,W)=>{const Q=W==="id"?"id":O[W];return H[Q]=U[W],H},{}):U,empreinte:V}});await x(D)}},T=async M=>{S.colonnes=Object.fromEntries(M.map(O=>[O.id,O.variable])),await C()},A=await this.suivreColonnesTableau({idTableau:_,f:T,catgories:!1}),B=async M=>{S.donnes=M,await C()},I=await this.client.suivreBdListeDeClef({id:_,clef:"donnes",f:B,schma:schmaDonnesTableau,renvoyerValeur:!1});return async()=>{await I(),await A()}}async formaterlment({:_,colonnes:x,fichiersSFIP:E,langues:S}){const C=async({adresseBdTrads:B,langues:I})=>{const M=await uneFois(O=>this.client.suivreBdDic({id:B,f:O}));return traduire(M,I||[])||B},T={},A=async(B,I)=>{switch(typeof B){case"object":if(["audio","image","vido","fichier"].includes(I)){const{cid:M,ext:O}=B;return!M||!O?void 0:(E.add({cid:M,ext:O}),`${M}.${O}`)}else return JSON.stringify(B);case"boolean":return B.toString();case"number":return B;case"string":return I==="chane"&&adresseOrbiteValide(B)?await C({adresseBdTrads:B,langues:S}):B;default:return}};for(const B of Object.keys(_)){const I=x.find(V=>V.id===B);if(!I)continue;const{variable:M,catgorie:O}=I;let D;const L=_[B];O?.type==="simple"?D=await A(L,O.catgorie):O?.type==="liste"&&Array.isArray(L)&&(D=JSON.stringify(await Promise.all(L.map(V=>A(V,O.catgorie))))),D!==void 0&&(T[S?M:B]=D)}return T}async exporterDonnes({idTableau:_,langues:x,doc:E,nomFichier:S}){E=E||utils$1.book_new();const C=new Set;let T;const A=_.split("/").pop();if(x){const D=await uneFois(L=>this.suivreNomsTableau({idTableau:_,f:L}));T=traduire(D,x)||A}else T=A;const B=await uneFois(D=>this.suivreColonnesTableau({idTableau:_,f:D})),I=await uneFois(D=>this.suivreDonnes({idTableau:_,f:D}));let M=await Promise.all(I.map(D=>this.formaterlment({:D.donnes,fichiersSFIP:C,colonnes:B,langues:x})));if(x){const D=await uneFois(V=>this.suivreVariables({idTableau:_,f:V})),L={};for(const V of D){const U=await uneFois(H=>this.client.variables.suivreNomsVariable({idVariable:V,f:H})),q=B.find(H=>H.variable===V).id;L[V]=traduire(U,x)||q}M=M.map(V=>Object.keys(V).reduce((U,q)=>{const H=L[q];return U[H]=V[q],U},{}))}const O=utils$1.json_to_sheet(M);return utils$1.book_append_sheet(E,O,T.slice(0,30)),S=S||T,{doc:E,fichiersSFIP:C,nomFichier:S}}async ajouterlment({idTableau:_,vals:x}){const E=await this.client.obtIdBd({nom:"donnes",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E});x=await this.vrifierClefslment({idTableau:_,lment:x});const T=v4(),A=await S.add({...x,id:T});return await C(),A}async modifierlment({idTableau:_,vals:x,empreintePrcdente:E}){const S=await this.client.obtIdBd({nom:"donnes",racine:_,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S}),A=this.client.obtlmentBdListeSelonEmpreinte({bd:C,empreinte:E});let B=Object.assign({},A,x);if(Object.keys(x).map(I=>{x[I]===void 0&&delete B[I]}),B=await this.vrifierClefslment({idTableau:_,lment:B}),lmentsgaux(B,A))return await T(),Promise.resolve(E);{const I=await Promise.all([C.remove(E),C.add(B)]);return await T(),I[1]}}async vrifierClefslment({idTableau:_,lment:x}){const E=await this.client.obtIdBd({nom:"colonnes",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),A=[...S.iterator({limit:-1}).collect().map(I=>I.payload.value.id),"id"],B=Object.keys(x).filter(I=>A.includes(I));return await C(),Object.fromEntries(B.map(I=>[I,x[I]]))}async effacerlment({idTableau:_,empreinte:x}){const E=await this.client.obtIdBd({nom:"donnes",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E});await S.remove(x),await C()}async combinerDonnes({idTableauBase:_,idTableau2:x}){const E=await uneFois(async A=>await this.suivreColonnesTableau({idTableau:_,f:A})),S=await uneFois(async A=>await this.suivreDonnes({idTableau:_,f:A})),C=await uneFois(async A=>await this.suivreDonnes({idTableau:x,f:A})),T=E.filter(A=>A.index).map(A=>A.id);for(const A of C){const B=S.find(I=>indexlmentsgaux(I.donnes,A.donnes,T));if(B){const I={};for(const M of E)B.donnes[M.id]===void 0&&A.donnes[M.id]!==void 0&&(I[M.id]=A.donnes[M.id]);Object.keys(I).length&&(await this.effacerlment({idTableau:_,empreinte:B.empreinte}),await this.ajouterlment({idTableau:_,vals:Object.assign({},B.donnes,I)}))}else await this.ajouterlment({idTableau:_,vals:A.donnes})}}async convertirDonnes({idTableau:_,donnes:x,conversions:E,cheminBaseFichiers:S,donnesExistantes:C}){const T=await uneFois(async V=>await this.suivreColonnesTableau({idTableau:_,f:V})),A=new Set(C?.map(V=>T.filter(U=>U.catgorie?.catgorie==="chane").map(U=>U.catgorie?.type==="simple"?[V[U.id]]:V[U.id]).flat().filter(U=>typeof U=="string")).flat()||[]),B={},I=async({chemin:V})=>{if(isNode||isElectronMain){const U=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),q=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),H=V.split(".").pop()||"",W=S?q.resolve(S,V):V;if(!U.existsSync(W))return;if(B[W])return B[W];const Q=U.readFileSync(W),re=await this.client.ajouterSFIP({fichier:Q});return B[V]={ext:H,cid:re},{ext:H,cid:re}}},M={},O=async({val:V,langue:U})=>{if(M[U]?.[V])return M[U][V];for(const q of A){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:q,type:"keyvalue",schma:schmaStructureBdNoms}),Q=H.get(U);if(await W(),Q===V)return M[U]||(M[U]={}),M[U][V]=q,q}},D=async({val:V,langue:U})=>{const{bd:q,fOublier:H}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdNoms}),Q={address:q.access.address};await H();const re=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:Q}),{bd:ce,fOublier:ne}=await this.client.ouvrirBd({id:re,type:"keyvalue",schma:schmaStructureBdNoms});return await ce.set(U,V),await ne(),A.add(re),re},L=async({val:V,catgorie:U,conversion:q})=>{switch(U){case"audio":case"image":case"vido":case"fichier":{if(typeof V=="string")try{return JSON.parse(V)}catch{return await I({chemin:V})||V}return V}case"boolen":return typeof V=="string"?V.toLowerCase()==="true":V;case"numrique":{let H,W;q?.type==="numrique"&&({opration:H,systmeNumration:W}=q);const Q=({val:ce,ops:ne})=>{if(!ne)return ce;let Y=ce;for(const fe of ne)switch(fe.op){case"+":Y=ce+fe.val;break;case"-":Y=ce-fe.val;break;case"*":Y=ce*fe.val;break;case"/":Y=ce/fe.val;break;case"^":Y=ce**fe.val;break;default:throw new Error(fe.op)}return Y};let re;if(typeof V=="string")try{re=this.client.ennikkai.({:V,:W})}catch{}else typeof V=="number"&&(re=V);return re!==void 0?Q({val:re,ops:Array.isArray(H)||typeof H>"u"?H:[H]}):V}case"horoDatage":if(q?.type==="horoDatage"&&typeof V=="string"){const{systme:H,format:W}=q;return{systme:"dateJS",val:cholqij.lireDate({systme:H,val:V,format:W}).valueOf()}}else{if(["number","string"].includes(typeof V)){const H=new Date(V);return isNaN(H.valueOf())?V:{systme:"dateJS",val:H.valueOf()}}return V}case"intervaleTemps":{const H=typeof V=="string"?JSON.parse(V):V;return Array.isArray(H)?await Promise.all(H.map(async W=>await L({val:W,catgorie:"horoDatage",conversion:q}))):H}case"chaneNonTraductible":return V;case"chane":{if(typeof V!="string"||adresseOrbiteValide(V))return V;if(q?.type==="chane"){const{langue:H}=q;return await O({val:V,langue:H})||await D({val:V,langue:H})}return V}case"gojson":return typeof V=="string"?JSON.parse(V):V;default:return V}};for(const V of x)for(const U of T)if(U.catgorie){const{type:q,catgorie:H}=U.catgorie,W=V[U.id];if(W===void 0)continue;const Q=E[U.id];if(q==="simple")V[U.id]=await L({val:W,catgorie:H,conversion:Q});else{const re=typeof W=="string"?JSON.parse(W):W;V[U.id]=Array.isArray(re)?await Promise.all(re.map(async ce=>await L({val:ce,catgorie:H,conversion:Q}))):[await L({val:re,catgorie:H,conversion:Q})]}}return x}async importerDonnes({idTableau:_,donnes:x,conversions:E={},cheminBaseFichiers:S}){const C=await uneFois(async I=>await this.suivreDonnes({idTableau:_,f:I})),T=await this.convertirDonnes({idTableau:_,donnes:x,conversions:E,cheminBaseFichiers:S,donnesExistantes:C.map(I=>I.donnes)}),A=[];for(const I of T)C.some(M=>lmentsgaux(M.donnes,I))||A.push(I);const B=[];for(const I of C)T.some(M=>lmentsgaux(M,I.donnes))||B.push(I.empreinte);for(const I of A)await this.ajouterlment({idTableau:_,vals:I});for(const I of B)await this.effacerlment({idTableau:_,empreinte:I})}async sauvegarderNomsTableau({idTableau:_,noms:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderNomTableau({idTableau:_,langue:x,nom:E}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await C.set(x,E),await T()}async effacerNomTableau({idTableau:_,langue:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(x),await C()}async suivreNomsTableau({idTableau:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async ajouterColonneTableau({idTableau:_,idVariable:x,idColonne:E}){const S=await this.client.obtIdBd({nom:"colonnes",racine:_,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S}),A={id:E||v4(),variable:x};return await C.add(A),await T(),A.id}async effacerColonneTableau({idTableau:_,idColonne:x}){const E=await this.client.obtIdBd({nom:"colonnes",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E});await this.client.effacerlmentDeBdListe({bd:S,lment:T=>T.payload.value.id===x}),await C()}async suivreColonnesTableau({idTableau:_,f:x,catgories:E=!0}){const S=async I=>{if(I)return await x(I)},C=async(I,M,O)=>I?await this.client.variables.suivreCatgorieVariable({idVariable:I,f:async D=>{const L=Object.assign({catgorie:D},O);await M(L)}}):faisRien,T=I=>I.variable,A=I=>I.id,B=async({id:I,fSuivreBd:M})=>await this.client.suivreBdsDeBdListe({id:I,f:M,fBranche:C,fIdBdDeBranche:T,fCode:A});return E?await this.client.suivreBdDeClef({id:_,clef:"colonnes",f:S,fSuivre:B,type:"feed"}):await this.client.suivreBdListeDeClef({id:_,clef:"colonnes",schma:schmaInfoColAvecCatgorie,f:S})}async suivreVariables({idTableau:_,f:x}){const E=async C=>{await x((C||[]).filter(T=>T&&OrbitDB.isValidAddress(T)))},S=async({id:C,fSuivreBd:T})=>await this.client.suivreBdListe({id:C,f:A=>T(A.map(B=>B.variable))});return await this.client.suivreBdDeClef({id:_,clef:"colonnes",f:E,fSuivre:S,type:"feed"})}async ajouterRgleTableau({idTableau:_,idColonne:x,rgle:E}){const S=await this.client.obtIdBd({nom:"rgles",racine:_,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour tableau ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S}),A=v4(),I={rgle:{id:A,rgle:E},source:{type:"tableau",id:_},colonne:x};return await C.add(I),await T(),A}async effacerRgleTableau({idTableau:_,idRgle:x}){const E=await this.client.obtIdBd({nom:"rgles",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour tableau ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E});await this.client.effacerlmentDeBdListe({bd:S,lment:T=>T.payload.value.rgle.id===x}),await C()}async suivreRgles({idTableau:_,f:x}){const E={},S=async()=>{if(!(!E.tableau||!E.variable))return await x([...E.tableau,...E.variable])},C=async V=>(E.tableau=V,await S()),T=await this.client.suivreBdListeDeClef({id:_,clef:"rgles",schma:schmaRgleColonne,f:C}),A=async V=>await this.suivreColonnesTableau({idTableau:_,f:V}),B=async V=>(E.variable=V,await S()),I=async(V,U,q)=>{const H=W=>{const Q=W.map(re=>({rgle:re,source:{type:"variable",id:V},colonne:q.id}));return U(Q)};return await this.client.variables.suivreRglesVariable({idVariable:V,f:H})},M=V=>V.variable,O=V=>V.id,D=await this.client.suivreBdsDeFonctionListe({fListe:A,f:B,fBranche:I,fIdBdDeBranche:M,fCode:O});return async()=>{await T(),await D()}}async suivreValidDonnes({idTableau:_,f:x}){const E={},S=async()=>{if(!E.donnes||!E.rgles)return;let U=[];for(const q of E.rgles){const H=q(E.donnes);U=[...U,...H.flat()]}await x(U)},C=async U=>{E.varsColonnes&&(E.rgles=U.map(q=>gnrerFonctionRgle({rgle:q.rgle,varsColonnes:E.varsColonnes,donnesCatgorie:q.donnesCatgorie})),await S())},T=async U=>{E.donnes=U,await S()},A=await this.suivreColonnesTableau({idTableau:_,f:async U=>{const q=U.reduce((H,W)=>({...H,[W.variable]:W.id}),{});E.varsColonnes=q,await S()}}),B=async U=>await this.suivreRgles({idTableau:_,f:U}),I=async(U,q,H)=>{if(H.rgle.rgle.typeRgle==="valeurCatgorique"&&H.rgle.rgle.dtails.type==="dynamique"){const{tableau:W,colonne:Q}=H.rgle.rgle.dtails;return await this.suivreDonnes({idTableau:W,f:async re=>await q({rgle:H,donnesCatgorie:re.map(ce=>ce.donnes[Q])})})}else return await q({rgle:H}),faisRien},M=U=>U.rgle.id,O=U=>U.rgle.id,D=await this.client.suivreBdsDeFonctionListe({fListe:B,f:C,fBranche:I,fIdBdDeBranche:M,fCode:O}),L=await this.suivreDonnes({idTableau:_,f:T});return async()=>{await D(),await L(),await A()}}async suivreValidRgles({idTableau:_,f:x}){const E={},S=async()=>{if(!E.colonnes||!E.rgles)return;const L=[],V=E.rgles.map(W=>W.rgle).filter(W=>W.rgle.rgle.typeRgle==="bornes"),U=V.filter(W=>W.rgle.rgle.dtails.type==="dynamiqueColonne"),q=V.filter(W=>W.rgle.rgle.dtails.type==="dynamiqueVariable"),H=E.rgles.filter(W=>W.rgle.rgle.rgle.typeRgle==="valeurCatgorique"&&W.rgle.rgle.rgle.dtails.type==="dynamique");for(const W of U)if(!E.colonnes.find(re=>re.id===W.rgle.rgle.dtails.val)){const re={rgle:W,dtails:"colonneBornesInexistante"};L.push(re)}for(const W of q)if(!E.colonnes.find(re=>re.variable===W.rgle.rgle.dtails.val)){const re={rgle:W,dtails:"variableBornesNonPrsente"};L.push(re)}for(const W of H)if(!W.colsTableauRf?.find(re=>re.id===W.rgle.rgle.rgle.dtails.colonne)){const re={rgle:W.rgle,dtails:"colonneCatgInexistante"};L.push(re)}await x(L)},C=async L=>(E.rgles=L,await S()),T=await this.suivreColonnesTableau({idTableau:_,f:async L=>(E.colonnes=L,await S())}),A=async L=>await this.suivreRgles({idTableau:_,f:L}),B=async(L,V,U)=>{if(U.rgle.rgle.typeRgle==="valeurCatgorique"&&U.rgle.rgle.dtails.type==="dynamique"){const{tableau:q}=U.rgle.rgle.dtails;return await this.suivreColonnesTableau({idTableau:q,f:H=>V({rgle:U,colsTableauRf:H})})}else return await V({rgle:U}),faisRien},I=L=>L.rgle.id,M=L=>L.rgle.id,O=await this.client.suivreBdsDeFonctionListe({fListe:A,f:C,fBranche:B,fIdBdDeBranche:I,fCode:M});return async()=>{await O(),await T()}}async effacerTableau({idTableau:_}){for(const x in["noms","donnes","colonnes","rgles"]){const E=await this.client.obtIdBd({nom:x,racine:_});E&&await this.client.effacerBd({id:E})}await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDiffrencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnesTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRgles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRgles",null);const schmaBdPrincipale$3={type:"string"},schmaStructureBdVariable={type:"object",properties:{type:{type:"string",nullable:!0},catgorie:{type:"object",properties:{catgorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},units:{type:"string",nullable:!0},rgles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]};class Variables extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"variables",schmaBdPrincipale:schmaBdPrincipale$3})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreVariables({f:_,idCompte:x}){return await this.suivreBdPrincipale({idCompte:x,f:_})}async crerVariable({catgorie:_}){const x=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterMesVariables({idVariable:x});const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdVariable}),T={address:E.access.address};await E.set("type","variable");const A=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:T});await E.set("noms",A);const B=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:T});await E.set("descriptions",B);const I=await this.client.crerBdIndpendante({type:"feed",optionsAccs:T});return await E.set("rgles",I),await E.set("catgorie",this.standardiserCatgorieVariable(_)),await this.tablirStatut({id:x,statut:{statut:TYPES_STATUT.ACTIVE}}),S(),x}async ajouterMesVariables({idVariable:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await x.add(_),await E()}async enleverDeMesVariables({idVariable:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async copierVariable({idVariable:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable}),S=x.get("catgorie"),C=await this.crerVariable({catgorie:S}),{bd:T,fOublier:A}=await this.client.ouvrirBd({id:C,type:"keyvalue",schma:schmaStructureBdVariable}),B=x.get("noms");if(B){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),U=ClientConstellation$1.obtObjetdeBdDic({bd:L});await V(),await this.sauvegarderNomsVariable({idVariable:C,noms:U})}const I=x.get("descriptions");if(I){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:I,type:"keyvalue",schma:schmaStructureBdNoms}),U=ClientConstellation$1.obtObjetdeBdDic({bd:L});await V(),await this.sauvegarderDescriptionsVariable({idVariable:C,descriptions:U})}const M=x.get("units");M&&await T.put("units",M);const O=x.get("rgles");if(O){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:O,type:"feed",schma:schmaRgleVariableAvecId}),U=ClientConstellation$1.obtlmentsDeBdListe({bd:L});await V(),await Promise.all(U.map(async q=>{await this.ajouterRgleVariable({idVariable:C,rgle:q.rgle})}))}const D=x.get("statut")||{statut:TYPES_STATUT.ACTIVE};return await this.tablirStatut({id:C,statut:D}),await Promise.all([E(),A()]),C}async inviterAuteur({idVariable:_,idCompteAuteur:x,rle:E}){await this.client.donnerAccs({idBd:_,identit:x,rle:E})}async sauvegarderNomsVariable({idVariable:_,noms:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Variable ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderNomVariable({idVariable:_,langue:x,nom:E}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour variable ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await C.set(x,E),await T()}async effacerNomVariable({idVariable:_,langue:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Variable ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(x),await C()}async sauvegarderDescriptionsVariable({idVariable:_,descriptions:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Variable ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderDescriptionVariable({idVariable:_,langue:x,description:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour Variable ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await C.set(x,E),await T()}async effacerDescriptionVariable({idVariable:_,langue:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Variable ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(x),await C()}async sauvegarderCatgorieVariable({idVariable:_,catgorie:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable});await E.set("catgorie",this.standardiserCatgorieVariable(x)),await S()}standardiserCatgorieVariable(_){return typeof _=="string"?{type:"simple",catgorie:_}:_}async sauvegarderUnitsVariable({idVariable:_,idUnit:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable});await E.set("units",x),await S()}async ajouterRgleVariable({idVariable:_,rgle:x,idRgle:E}){const S=await this.client.obtIdBd({nom:"rgles",racine:_,type:"feed"});if(!S)throw new Error(`Permission de modification refuse pour variable ${_}.`);E=E||v4();const C={id:E,rgle:x},{bd:T,fOublier:A}=await this.client.ouvrirBd({id:S,type:"feed",schma:schmaRgleVariableAvecId});return await T.add(C),await A(),E}async effacerRgleVariable({idVariable:_,idRgle:x}){const E=await this.client.obtIdBd({nom:"rgles",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour variable ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaRgleVariableAvecId});await this.client.effacerlmentDeBdListe({bd:S,lment:T=>T.payload.value.id===x}),await C()}async modifierRgleVariable({idVariable:_,rgleModifie:x,idRgle:E}){await this.effacerRgleVariable({idVariable:_,idRgle:E}),await this.ajouterRgleVariable({idVariable:_,rgle:x,idRgle:E})}async suivreNomsVariable({idVariable:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async suivreDescriptionsVariable({idVariable:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"descriptions",schma:schmaStructureBdNoms,f:x})}async suivreCatgorieVariable({idVariable:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable,f:async E=>{const S=E.get("catgorie");S&&S.catgorie&&S.type&&await x(this.standardiserCatgorieVariable(S))}})}async suivreUnitsVariable({idVariable:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable,f:async E=>{const S=E.get("units");await x(S||null)}})}async suivreRglesVariable({idVariable:_,f:x}){const E={catgorie:[],propres:[]},S=async()=>{await x([...E.catgorie,...E.propres])},C=async M=>{const O={id:v4(),rgle:{typeRgle:"catgorie",dtails:{catgorie:M}}};E.catgorie=[O],await S()},T=await this.suivreCatgorieVariable({idVariable:_,f:C}),A=async M=>{E.propres=M,await S()},B=await this.client.suivreBdListeDeClef({id:_,clef:"rgles",schma:schmaRgleVariableAvecId,f:A});return async()=>{await T(),await B()}}async suivreQualitVariable({idVariable:_,f:x}){const E={noms:{},descr:{},rgles:[]},S=async()=>{const O=[Object.keys(E.noms).length?1:0,Object.keys(E.descr).length?1:0];E.catgorie?.catgorie==="numrique"&&O.push(E.units?1:0),E.catgorie?.catgorie==="numrique"&&O.push(E.rgles.length>=1?1:0);const D=O.reduce((L,V)=>L+V,0)/O.length;await x(D)},C=await this.suivreNomsVariable({idVariable:_,f:async O=>{E.noms=O,await S()}}),T=await this.suivreDescriptionsVariable({idVariable:_,f:async O=>{E.descr=O,await S()}}),A=await this.suivreUnitsVariable({idVariable:_,f:async O=>{E.units=O,await S()}}),B=await this.suivreCatgorieVariable({idVariable:_,f:async O=>{E.catgorie=O,await S()}}),I=await this.suivreRglesVariable({idVariable:_,f:async O=>{E.rgles=O,await S()}});return async()=>{await Promise.all([C(),T(),A(),B(),I()])}}async tablirStatut({id:_,statut:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable});await E.set("statut",x),await S()}async marquerObsolte({id:_,idNouvelle:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable});E.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:x}),await S()}async effacerVariable({idVariable:_}){await this.enleverDeMesVariables({idVariable:_});for(const x in["noms","descriptions","rgles"]){const E=await this.client.obtIdBd({nom:x,racine:_});E&&await this.client.effacerBd({id:E})}await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescriptionsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatgorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitVariable",null);function baseSum$1(n,_){for(var x,E=-1,S=n.length;++E<S;){var C=_(n[E]);C!==void 0&&(x=x===void 0?C:x+C)}return x}var _baseSum=baseSum$1;function identity$1(n){return n}var identity_1=identity$1,baseSum=_baseSum,identity=identity_1;function sum$1(n){return n&&n.length?baseSum(n,identity):0}var sum_1=sum$1;const sum$2=getDefaultExportFromCjs(sum_1);var average$3=function n(_){return _.reduce(sum,0)/_.length};function sum(n,_){return n+_}var average$2=average$3,variance$1=function n(_){var x=average$2(_);function E(S,C){var T=C-x;return S+T*T}return _.reduce(E,0)/_.length},average$1=average$3,covariance$1=function n(_,x){for(var E=_.length,S=0,C=average$1(_),T=average$1(x),A=[];S<E;S+=1){var B=_[S]-C,I=x[S]-T;A.push(B*I)}return average$1(A)},average=average$3,variance=variance$1,covariance=covariance$1,ssim=function n(_,x,E){E=E||{};var S="K1"in E?E.K1:.01,C="K2"in E?E.K2:.03,T="L"in E?E.L:255,A="alpha"in E?E.alpha:1,B="beta"in E?E.beta:1,I="gamma"in E?E.gamma:1,M=S*T*(S*T),O=C*T*(C*T),D=O/2;function L(Q,re){var ce=average(Q),ne=average(re);return(2*ce*ne+M)/(ce*ce+ne*ne+M)}function V(Q,re){var ce=variance(Q),ne=variance(re),Y=Math.sqrt(ce),fe=Math.sqrt(ne);return(2*Y*fe+O)/(ce+ne+O)}function U(Q,re){var ce=Math.sqrt(variance(Q)),ne=Math.sqrt(variance(re)),Y=covariance(Q,re);return(Y+D)/(ce*ne+D)}var q=Math.pow(L(_,x),A),H=Math.pow(V(_,x),B),W=Math.pow(U(_,x),I);return q*H*W};const ssim$1=getDefaultExportFromCjs(ssim);function reverse(n){return n.split("").reverse().join("")}function findMatchStarts(n,_,x){const E=reverse(_);return x.map(S=>{const C=Math.max(0,S.end-_.length-S.errors),T=reverse(n.slice(C,S.end));return{start:findMatchEnds(T,E,S.errors).reduce((B,I)=>S.end-I.end<B?S.end-I.end:B,S.end),end:S.end,errors:S.errors}})}function oneIfNotZero(n){return(n|-n)>>31&1}function advanceBlock(n,_,x,E){let S=n.P[x],C=n.M[x];const T=E>>>31,A=_[x]|T,B=A|C,I=(A&S)+S^S|A;let M=C|~(I|S),O=S&I;const D=oneIfNotZero(M&n.lastRowMask[x])-oneIfNotZero(O&n.lastRowMask[x]);return M<<=1,O<<=1,O|=T,M|=oneIfNotZero(E)-T,S=O|~(B|M),C=M&B,n.P[x]=S,n.M[x]=C,D}function findMatchEnds(n,_,x){if(_.length===0)return[];x=Math.min(x,_.length);const E=[],S=32,C=Math.ceil(_.length/S)-1,T={P:new Uint32Array(C+1),M:new Uint32Array(C+1),lastRowMask:new Uint32Array(C+1)};T.lastRowMask.fill(1<<31),T.lastRowMask[C]=1<<(_.length-1)%S;const A=new Uint32Array(C+1),B=new Map,I=[];for(let D=0;D<256;D++)I.push(A);for(let D=0;D<_.length;D+=1){const L=_.charCodeAt(D);if(B.has(L))continue;const V=new Uint32Array(C+1);B.set(L,V),L<I.length&&(I[L]=V);for(let U=0;U<=C;U+=1){V[U]=0;for(let q=0;q<S;q+=1){const H=U*S+q;if(H>=_.length)continue;_.charCodeAt(H)===L&&(V[U]|=1<<q)}}}let M=Math.max(0,Math.ceil(x/S)-1);const O=new Uint32Array(C+1);for(let D=0;D<=M;D+=1)O[D]=(D+1)*S;O[C]=_.length;for(let D=0;D<=M;D+=1)T.P[D]=-1,T.M[D]=0;for(let D=0;D<n.length;D+=1){const L=n.charCodeAt(D);let V;L<I.length?V=I[L]:(V=B.get(L),typeof V>"u"&&(V=A));let U=0;for(let q=0;q<=M;q+=1)U=advanceBlock(T,V,q,U),O[q]+=U;if(O[M]-U<=x&&M<C&&(V[M+1]&1||U<0)){M+=1,T.P[M]=-1,T.M[M]=0;let q;if(M===C){const H=_.length%S;q=H===0?S:H}else q=S;O[M]=O[M-1]+q-U+advanceBlock(T,V,M,U)}else for(;M>0&&O[M]>=x+S;)M-=1;M===C&&O[M]<=x&&(O[M]<x&&E.splice(0,E.length),E.push({start:-1,end:D+1,errors:O[M]}),x=O[M])}return E}function search(n,_,x){const E=findMatchEnds(n,_,x);return findMatchStarts(n,_,E)}const rechercherDansTexte=(n,_)=>{const E=search(_,n,Math.ceil(n.length/4)).sort((S,C)=>S.errors>C.errors?1:-1)[0];if(E)return{type:"texte",score:1/(E.errors+1),dbut:E.start,fin:E.end}},similTexte=(n,_)=>(Array.isArray(_)&&(_=Object.fromEntries(_.map(S=>[S,S]))),Object.entries(_).map(([S,C])=>{const T=rechercherDansTexte(n,C);if(T){const{score:A,dbut:B,fin:I}=T;return{type:"rsultat",score:A,clef:S,info:{type:"texte",texte:C,dbut:B,fin:I}}}}).filter(S=>S).sort((S,C)=>S.score>C.score?-1:1)[0]),similImages=(n,_)=>{if(!_)return 0;const{mssim:x}=ssim$1(n,_);return x},combinerRecherches=async(n,_,x,E)=>{const S=[],C=Object.fromEntries(Object.keys(n).map(A=>[A,void 0])),T=()=>{const A=Object.values(C).filter(B=>B).sort((B,I)=>aMieuxQueB(B,I)?-1:1)[0];E(A)};return await Promise.all(Object.entries(n).map(async([A,B])=>{const I=M=>{C[A]=M,T()};S.push(await B(_,x,I))})),async()=>{await Promise.all(S.map(A=>A()))}},sousRecherche=async(n,_,x,E,S)=>{const C=async(B,I)=>await x(E,B,M=>{M&&I({id:B,rsultat:M})}),T=async B=>{const I=meilleurRsultat(B);if(I){const M={type:"rsultat",de:n,clef:I.id,score:I.rsultat.score,info:{type:"rsultat",de:I.rsultat.de,info:I.rsultat.info}};I.rsultat.clef&&(M.info.clef=I.rsultat.clef),await S(M)}};return await E.suivreBdsDeFonctionListe({fListe:_,f:T,fBranche:C})},aMieuxQueB=(n,_)=>{const x=(E,S)=>{for(;E.type==="rsultat";)E=E.info;for(;S.type==="rsultat";)S=S.info;switch(E.type){case"texte":return S.type==="texte"?E.fin-E.dbut>S.fin-S.dbut:!1;default:return!0}};return n.score>_.score?!0:n.score<_.score?!1:!!x(n.info,_.info)},meilleurRsultat=n=>Object.values(n).filter(x=>x).sort((x,E)=>aMieuxQueB(x.rsultat,E.rsultat)?-1:1)[0],rechercherSelonId=n=>async(_,x,E)=>{const S=rechercherDansTexte(n,x);if(S){const{score:C,dbut:T,fin:A}=S;E({score:C,type:"rsultat",de:"id",info:{type:"texte",dbut:T,fin:A,texte:x}})}else E();return faisRien},rechercherTous=()=>async(n,_,x)=>(await x({type:"rsultat",score:1,de:"*",info:{type:"vide"}}),faisRien),rechercherProfilsSelonActivit=()=>async(n,_,x)=>{const E={noms:void 0,image:void 0,courriel:void 0},S=()=>({type:"rsultat",score:[Object.keys(E.noms||{}).length>0,E.image,E.courriel].filter(Boolean).length/3,de:"activit",info:{type:"vide"}}),C=D=>{E.noms=D,x(S())},T=D=>{E.image=D,x(S())},A=D=>{E.courriel=D,x(S())},B=await n.profil.suivreNoms({idCompte:_,f:C}),I=await n.profil.suivreImage({idCompte:_,f:T}),M=await n.profil.suivreCourriel({idCompte:_,f:A});return async()=>{await Promise.all([B(),I(),M()])}},rechercherProfilsSelonNom=n=>async(_,x,E)=>{const S=T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;E({type:"rsultat",score:B,clef:I,info:M,de:"nom"})}else E()};return await _.profil.suivreNoms({idCompte:x,f:S})},rechercherProfilsSelonCourriel=n=>async(_,x,E)=>{const S=T=>{const A=T?rechercherDansTexte(n,T):void 0;if(A){const{score:B,dbut:I,fin:M}=A;E({type:"rsultat",score:B,de:"courriel",info:{type:"texte",dbut:I,fin:M,texte:T}})}else E()};return await _.profil.suivreCourriel({idCompte:x,f:S})},rechercherProfilsSelonTexte=n=>async(_,x,E)=>{const S=rechercherProfilsSelonNom(n),C=rechercherProfilsSelonCourriel(n),T=rechercherSelonId(n);return await combinerRecherches({noms:S,courriel:C,id:T},_,x,E)},rechercherProfilsSelonImage=n=>async(_,x,E)=>{const S=T=>{const A=similImages(n,T);E({type:"rsultat",score:A,de:"image",info:{type:"vide"}})};return await _.profil.suivreImage({idCompte:x,f:S})},schmaBdPrincipaleRseau={type:"object",additionalProperties:{type:"string"},required:[]},INTERVALE_SALUT=1e3*10,FACTEUR_ATNUATION_CONFIANCE=.8,FACTEUR_ATNUATION_BLOQUS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE=50,obtChaneIdSFIPClient=n=>n.idNodeSFIP.id.toCID().toString();class Rseau extends ComposanteClientDic{constructor({client:x}){super({client:x,clef:"rseau",schmaBdPrincipale:schmaBdPrincipaleRseau});$t(this,"client");$t(this,"bloqusPrivs");$t(this,"_ferm");$t(this,"dispositifsEnLigne");$t(this,"fsOublier");$t(this,"vnements");this.client=x,this.bloqusPrivs=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._ferm=!1,this.vnements=new eventsExports.EventEmitter}async initialiser(){const x={};await this.client.sfip.pubsub.subscribe(this.client.sujet_rseau,A=>{const B=v4();try{const I=this.messageReu({msg:A});x[B]=I,I.then(()=>{delete x[B]})}catch(I){console.error(I.toString()),console.error(I.stack.toString())}}),this.fsOublier.push(async()=>{await this.client.sfip.pubsub.unsubscribe(this.client.sujet_rseau),await Promise.all(Object.values(x))});const E=this.client.sfip.libp2p,S=()=>{this.vnements.emit("changementConnexions")},C=["peer:discovery","peer:connect","peer:disconnect"];for(const A of C)E.addEventListener(A,S);this.fsOublier.push(...C.map(A=>async()=>E.removeEventListener(A,S)));const T=setInterval(()=>{this.direSalut({})},INTERVALE_SALUT);this.fsOublier.unshift(async()=>clearInterval(T)),await this.direSalut({})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async envoyerMessageAuDispositif({msg:x,idSFIP:E}){E&&(x.destinataire=E);const S=this.client.sujet_rseau,C=Buffer$5.from(JSON.stringify(x));await this.client.sfip.pubsub.publish(S,C)}async envoyerMessageAuMembre({msg:x,idCompte:E,encrypt:S=!0}){const T={signature:await this.client.signer({message:JSON.stringify(x)}),valeur:x},A=Date.now(),B=Object.values(this.dispositifsEnLigne).filter(I=>I.infoDispositif.idCompte===E).filter(I=>I.vu&&A-I.vu<INTERVALE_SALUT+1e3*30);if(!B.length)throw new Error(`Aucun dispositif prsentement en ligne pour membre ${E}`);await Promise.all(B.map(async I=>{const{idSFIP:M,encryption:O}=I.infoDispositif;if(S){if(O?.type!==this.client.encryption.nom)return;const D=this.client.encryption.encrypter({message:JSON.stringify(T),clefPubliqueDestinataire:O.clefPublique}),L={encrypt:!0,clefPubliqueExpditeur:this.client.encryption.clefs.publique,donnes:D};await this.envoyerMessageAuDispositif({msg:L,idSFIP:M})}else{const D={encrypt:!1,donnes:T};await this.envoyerMessageAuDispositif({msg:D,idSFIP:M})}}))}async direSalut({:x}){const E={type:"Salut !",contenu:{idSFIP:obtChaneIdSFIPClient(this.client),idDispositif:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:this.client.bdCompte.id}};this.client.encryption&&(E.contenu.encryption={type:this.client.encryption.nom,clefPublique:this.client.encryption.clefs.publique});const C={encrypt:!1,donnes:{signature:await this.client.signer({message:JSON.stringify(E)}),valeur:E}};try{await this.envoyerMessageAuDispositif({msg:C,idSFIP:x})}catch(T){if(!T.toString().includes("PublishError.InsufficientPeers"))throw T}}async envoyerDemandeRejoindreCompte({idCompte:x,codeSecret:E}){const S=await this.client.obtIdDispositif(),C={type:"Je veux rejoindre ce compte",contenu:{idDispositif:S,empreinteVrification:this.client.empreinteInvitation({idDispositif:S,codeSecret:E})}};await this.envoyerMessageAuMembre({msg:C,idCompte:x})}async messageReu({msg:x}){if(this._ferm)return;const E=JSON.parse(new TextDecoder().decode(x.data)),{encrypt:S,destinataire:C}=E;if(C&&C!==obtChaneIdSFIPClient(this.client))return;const T=S?JSON.parse(this.client.encryption.dcrypter({message:E.donnes,clefPubliqueExpditeur:E.clefPubliqueExpditeur})):E.donnes,{valeur:A,signature:B}=T;if(B.clefPublique===this.client.orbite.identity.publicKey&&A.type!=="Salut !"||!await this.client.vrifierSignature({signature:B,message:JSON.stringify(A)}))return;const M=A.contenu;switch(A.type){case"Salut !":{const O=M,{clefPublique:D}=O;if(D!==B.clefPublique)return;await this.recevoirSalut({message:O}),C||await this.direSalut({:O.idSFIP});break}case"Je veux rejoindre ce compte":{const O=M;await this.client.considrerRequteRejoindreCompte({requte:O});break}}}async recevoirSalut({message:x}){await this._validerInfoMembre({info:x})&&(this.dispositifsEnLigne[x.idDispositif]={infoDispositif:x,vu:x.idDispositif===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.vnements.emit("membreVu"),this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const x=new Date().getTime(),E=Object.values(this.dispositifsEnLigne).filter(T=>x-(T.vu||0)>DLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((T,A)=>(T.vu||0)<(A.vu||0)?-1:1).map(T=>T.infoDispositif.idDispositif),S=Object.keys(this.dispositifsEnLigne).length-N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE;E.slice(E.length-S).forEach(T=>delete this.dispositifsEnLigne[T])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:x}){const{idCompte:E,signatures:S,clefPublique:C,idDispositif:T}=x;if(!(E&&S&&C&&T))return!1;const A=await this.client.vrifierSignature({signature:{signature:S.id,clefPublique:C},message:T}),B=await this.client.vrifierSignature({signature:{signature:S.publicKey,clefPublique:T},message:C+S.id});if(!OrbitDB.isValidAddress(E))return!1;const{bd:I,fOublier:M}=await this.client.ouvrirBd({id:E});if(!(I.access instanceof ContrleurConstellation))return!1;const O=I.access.estAutoris(T);return await M(),A&&B&&O}async faireConfianceAuMembre({idCompte:x}){const{bd:E,fOublier:S}=await this.obtBd();await E.set(x,"FIABLE"),await S()}async nePlusFaireConfianceAuMembre({idCompte:x}){const{bd:E,fOublier:S}=await this.obtBd();Object.keys(ClientConstellation$1.obtObjetdeBdDic({bd:E})).includes(x)&&E.get(x)==="FIABLE"&&await E.del(x),await S()}async suivreFiables({f:x,idCompte:E}){const S=async C=>{const T=Object.keys(C).filter(A=>C[A]==="FIABLE");return await x(T)};return await this.suivreBdPrincipale({idCompte:E,f:S})}async _initaliserBloqusPrivs(){const x=await this.client.obtDeStockageLocal({clef:"membresBloqus"});x&&(JSON.parse(x).forEach(E=>this.bloqusPrivs.add(E)),this.vnements.emit("changementMembresBloqus"))}async _sauvegarderBloqusPrivs(){const x=[...this.bloqusPrivs];this.client.sauvegarderAuStockageLocal({clef:"membresBloqus",val:JSON.stringify(x)})}async bloquerMembre({idCompte:x,priv:E=!1}){if(E)await this.dbloquerMembre({idCompte:x}),this.bloqusPrivs.add(x),await this._sauvegarderBloqusPrivs();else{const{bd:S,fOublier:C}=await this.obtBd();await this.dbloquerMembre({idCompte:x}),await S.set(x,"BLOQU"),await C()}this.vnements.emit("changementMembresBloqus")}async dbloquerMembre({idCompte:x}){const{bd:E,fOublier:S}=await this.obtBd();Object.keys(ClientConstellation$1.obtObjetdeBdDic({bd:E})).includes(x)&&E.get(x)==="BLOQU"&&await E.del(x),await S(),this.bloqusPrivs.has(x)&&(this.bloqusPrivs.delete(x),await this._sauvegarderBloqusPrivs()),this.vnements.emit("changementMembresBloqus")}async suivreBloqusPubliques({f:x,idCompte:E}){const S=async C=>{const T=Object.keys(C).filter(A=>C[A]==="BLOQU");return await x(T)};return await this.suivreBdPrincipale({idCompte:E,f:S})}async suivreBloqus({f:x,idCompte:E}){const S=[];let C=[];const T=async()=>{const A=[...new Set([...[...this.bloqusPrivs].map(B=>({idCompte:B,priv:!0})),...C.map(B=>({idCompte:B,priv:!1}))])];return await x(A)};return S.push(await this.suivreBloqusPubliques({f:async A=>(C=A,await T()),idCompte:E})),(E===void 0||E===this.client.idCompte)&&(await this._initaliserBloqusPrivs(),this.vnements.on("changementMembresBloqus",T),S.push(async()=>{this.vnements.off("changementMembresBloqus",T)}),await T()),async()=>{await Promise.all(S.map(A=>A()))}}async suivreRelationsImmdiates({f:x,idCompte:E}){E=E||this.client.idCompte;const S=[],C={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let T=[];const A=async()=>{const V=[...C.suivis,...C.favoris,...C.coauteursBds,...C.coauteursProjets,...C.coauteursVariables,...C.coauteursMotsClefs,...T.map(H=>({idCompte:H,confiance:-1}))],q=[...new Set(V)].map(H=>{const{idCompte:W}=H;if(T.includes(W))return{idCompte:W,confiance:-1};const re=1-V.filter(ce=>ce.idCompte===W).map(ce=>ce.confiance).map(ce=>1-ce).reduce((ce,ne)=>ne*ce,1);return{idCompte:W,confiance:re}});return await x(q)};S.push(await this.suivreBloqus({f:async V=>{T=V.map(U=>U.idCompte),await A()},idCompte:E})),S.push(await this.client.suivreBdDicDeClef({id:E,clef:"rseau",schma:schmaBdPrincipaleRseau,f:async V=>(C.suivis=Object.entries(V).filter(([U,q])=>q==="FIABLE").map(([U,q])=>({idCompte:U,confiance:1})),await A())}));const B=async(V,U,q)=>{S.push(await this.client.suivreBdsDeFonctionListe({fListe:V,f:async H=>(C[U]=H.map(W=>({idCompte:W,confiance:q})),await A()),fBranche:async(H,W)=>await this.client.suivreAccsBd({id:H,f:Q=>W(Q.map(re=>re.idCompte).filter(re=>re!==E))})}))};return await B(async V=>await this.suivreFavorisMembre({idCompte:E,f:U=>V((U||[]).map(q=>q.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await B(async V=>await this.suivreBdsMembre({idCompte:E,f:U=>V(U||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await B(async V=>await this.suivreProjetsMembre({idCompte:E,f:U=>V(U||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await B(async V=>await this.suivreVariablesMembre({idCompte:E,f:U=>V(U||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await B(async V=>await this.suivreMotsClefsMembre({idCompte:E,f:U=>V(U||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(S.map(V=>V()))}}async suivreRelationsConfiance({f:x,profondeur:E,idCompteDbut:S}){const C=S||await this.client.obtIdCompte(),T={},A={},B=new s;let I=!1;const M=W=>Object.entries(T).filter(([Q,re])=>re.relations.map(ce=>ce.idCompte).includes(W)).map(([Q,re])=>Q),O=W=>{if(W===C)return 0;const Q=({ids:re,p:ce=1,djVues:ne=new Set})=>{const Y=re.map(fe=>M(fe).filter(ge=>!ne.has(ge))).flat();return Y.includes(C)?ce:Y.length?(ne=new Set(...ne,...Y),Q({ids:Y,p:ce+1,djVues:ne})):1/0};return Q({ids:[W]})},D=async()=>{const W=[];for(const[Q,re]of Object.entries(T))for(const ce of re.relations){const ne=O(Q)+1;W.push({de:Q,pour:ce.idCompte,confiance:ce.confiance,profondeur:ne})}return await x(W)},L=async W=>{T[W]={relations:[]};const Q=await this.suivreRelationsImmdiates({f:re=>{T[W]&&(T[W].relations=re,U())},idCompte:W});A[W]=Q},V=async W=>{await A[W](),delete A[W],delete T[W]},U=async()=>{if(I)return;await B.acquire("modification");const W=Object.keys(T).filter(re=>O(re)>=E),Q=[...new Set(Object.entries(T).filter(([re,ce])=>O(re)+1<E).map(([re,ce])=>ce.relations.map(ne=>ne.idCompte)).flat())].filter(re=>!Object.keys(T).includes(re));await Promise.all(W.map(re=>V(re))),await Promise.all(Q.map(re=>L(re))),await D(),B.release("modification")};return await L(C),{fOublier:async()=>{I=!0,await Promise.all(Object.values(A).map(W=>W()))},fChangerProfondeur:async W=>{E=W,await U()}}}async suivreComptesRseau({f:x,profondeur:E,idCompteDbut:S}){const C=async T=>{T.push({de:this.client.idCompte,pour:this.client.idCompte,confiance:1,profondeur:0});const A={};T.forEach(I=>{Object.keys(A).includes(I.pour)||(A[I.pour]=[]),A[I.pour].push(I)});const B=Object.entries(A).map(([I,M])=>{const O=M.find(H=>H.de===this.client.idCompte);if(O?.confiance===1||O?.confiance===-1)return{idCompte:I,profondeur:O.pour===this.client.idCompte?0:1,confiance:O.confiance};const D=Math.min(...M.map(H=>H.profondeur)),L=M.filter(H=>H.confiance>=0),U=1-M.filter(H=>H.confiance<0).map(H=>1+H.confiance*Math.pow(FACTEUR_ATNUATION_BLOQUS,H.profondeur-1)).reduce((H,W)=>W*H,1),q=1-L.map(H=>1-H.confiance*Math.pow(FACTEUR_ATNUATION_CONFIANCE,H.profondeur-1)).reduce((H,W)=>W*H,1)-U;return{idCompte:I,profondeur:D,confiance:q}});return await x(B)};return await this.suivreRelationsConfiance({f:C,profondeur:E,idCompteDbut:S})}async suivreComptesRseauEtEnLigne({f:x,profondeur:E,idCompteDbut:S}){const C={rseau:[],enLigne:[]},T=async()=>{const D=[...C.rseau];return C.enLigne.forEach(L=>{D.find(V=>V.idCompte===L.idCompte)||D.push(L)}),await x(D)},A=await this.suivreConnexionsMembres({f:async D=>{const L=D.filter(V=>V.infoMembre.idCompte!==this.client.idCompte).map(V=>({idCompte:V.infoMembre.idCompte,profondeur:1/0,confiance:0}));return C.enLigne=L,await T()}}),B=async D=>(C.rseau=D,await T()),{fOublier:I,fChangerProfondeur:M}=await this.suivreComptesRseau({f:B,profondeur:E,idCompteDbut:S});return{fOublier:async()=>{await A(),await I()},fChangerProfondeur:M}}async suivreConfianceMonRseauPourMembre({idCompte:x,f:E,profondeur:S,idCompteRfrence:C}){const T=C||await this.client.obtIdCompte(),A=async B=>{const I=B.find(M=>M.idCompte===x);return await E(I?.confiance||0)};return await this.suivreComptesRseau({f:A,profondeur:S,idCompteDbut:T})}async suivreConnexionsPostesSFIP({f:x}){const E=T=>{const A=[],B=[];for(const I of T)A.includes(I.peer.toCID().toString())||(A.push(I.peer.toCID().toString()),B.push(I));return B},S=async()=>{const T=await this.client.sfip.swarm.peers(),A=E(T);return await x(A.map(B=>({adresse:B.addr.toString(),pair:B.peer.toCID().toString()})))};return this.vnements.on("changementConnexions",S),await S(),async()=>{this.vnements.off("changementConnexions",S)}}async suivreConnexionsDispositifs({f:x}){const E=async()=>await x(Object.values(this.dispositifsEnLigne));return this.vnements.on("membreVu",E),await E(),async()=>{this.vnements.off("membreVu",E)}}async suivreConnexionsMembres({f:x}){const E=async C=>{const T=async A=>{const B={};for(const I of A){const{idCompte:M}=I.infoDispositif;B[M]||(B[M]={infoMembre:{idCompte:M,dispositifs:[]}});const{infoMembre:O,vu:D}=B[M];O.dispositifs.push(I.infoDispositif),B[M].vu=D?I.vu?Math.max(D,I.vu):D:I.vu}return await C(Object.values(B))};return await this.suivreConnexionsDispositifs({f:T})},S=async(C,T,A)=>await this.suivreProtocolesMembre({idCompte:C,f:B=>{T({infoMembre:{...A.infoMembre,protocoles:Object.values(B).flat()},vu:A.vu})}});return await this.client.suivreBdsDeFonctionListe({fListe:E,f:x,fBranche:S,fIdBdDeBranche:C=>C.infoMembre.idCompte,fCode:C=>C.infoMembre.idCompte})}async suivreProtocolesMembre({f:x,idCompte:E}){return await this.client.suivreBdDicDeClef({id:E||await this.client.obtIdCompte(),clef:"protocoles",schma:schmaStructureBdCompte,f:x})}async suivreProtocolesDispositif({idDispositif:x,f:E}){const S=x||await this.client.obtIdDispositif();return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreConnexionsDispositifs({f:async I=>{const M=I.find(O=>O.infoDispositif.idDispositif===S);if(M){const{idCompte:O}=M.infoDispositif;return await B(O)}else return await B(void 0)}}),f:async B=>{if(B)return await E(B[S])},fSuivre:async({id:B,fSuivreBd:I})=>await this.suivreProtocolesMembre({f:I,idCompte:B})})}async rechercher({f:x,nRsultatsDsirs:E,fRecherche:S,fConfiance:C,fQualit:T,fObjectif:A,fScore:B}){B||(B=$e=>($e.confiance+$e.qualit+$e.objectif.score)/3),A=A||rechercherTous();const I={},M={},O=3e3;let D,L=3,V=!1;const U=async $e=>{L=$e,await ne($e),D&&clearTimeout(D)},q=($e=O)=>{if(V)return;D&&clearTimeout(D);const _e=Object.values(I).map(oe=>oe.rsultats).flat().map(oe=>oe.rsultatObjectif.score),ae=_e.length>=E?Math.min(..._e.slice(0,E)):0,X=Object.values(I).reduce(function(oe,ie){return oe[String(ie.membre.profondeur)]=oe[String(ie.membre.profondeur)]||[],oe[String(ie.membre.profondeur)].push(...ie.rsultats),oe},{}),z=Object.entries(X).sort((oe,ie)=>Number(oe[0])<Number(ie[0])?-1:1).map(oe=>oe[1]).map(oe=>oe.filter(ie=>ie.rsultatObjectif.score>=ae).length),J=z.slice(z.length-3),te=z.slice(z.length-4),se=Math.max(3,sum$2(J)?L+1:sum$2(te)?L:L-1);se>L?D=setTimeout(()=>U(se),$e):se<L&&U(se)},H=async()=>{const _e=Object.values(I).map(ae=>ae.rsultats).flat().sort((ae,X)=>ae.rsultatObjectif.score<X.rsultatObjectif.score?1:-1);await x(_e.slice(0,E)),q()},W=async $e=>{const{idCompte:_e}=$e,ae=async J=>await S({idCompte:$e.idCompte,fSuivi:async te=>await J(te||[])}),X=async J=>(I[_e].rsultats=J,await H()),F=async(J,te)=>{const se={id:J},oe=async()=>{const{objectif:we,confiance:xe,qualit:Ee}=se;if(we&&xe!==void 0&&Ee!==void 0){const ye={id:J,rsultatObjectif:{...we,score:B(se)}};return await te(ye)}else return await te(void 0)},ie=async we=>(se.objectif=we,await oe()),G=await A(this.client,J,ie),ee=await C(J,async we=>(se.confiance=we,await oe())),he=await T(J,async we=>(se.qualit=we,await oe()));return async()=>{await Promise.all([G(),ee(),he()])}};I[_e]={rsultats:[],membre:$e,mettreJour:H};const z=await this.client.suivreBdsDeFonctionListe({fListe:ae,f:X,fBranche:F});M[_e]=z},Q=async $e=>{await M[$e](),delete I[$e],delete M[$e],await H()},re=new s,ce=async $e=>{await re.acquire("rechercher"),$e=$e.filter(F=>F.confiance>=0);const _e=$e.filter(F=>!I[F.idCompte]),ae=Object.keys(I).filter(F=>!$e.find(z=>z.idCompte===F)),X=$e.filter(F=>{const z=I[F.idCompte];return z&&(F.confiance!==z.membre.confiance||F.profondeur!==z.membre.profondeur)});await Promise.all(_e.map(W)),await Promise.all(X.map(async F=>await I[F.idCompte].mettreJour(F))),await Promise.all(ae.map(F=>Q(F))),re.release("rechercher")},{fChangerProfondeur:ne,fOublier:Y}=await this.suivreComptesRseauEtEnLigne({f:ce,profondeur:L});return{fChangerN:async $e=>{const _e=E;E=$e,$e!==_e&&(await H(),q(0))},fOublier:async()=>{V=!0,D&&clearTimeout(D),await Y(),await Promise.all(Object.values(M).map($e=>$e()))}}}async rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S}){const C=async(B,I)=>{const{fOublier:M}=await this.suivreConfianceMonRseauPourMembre({idCompte:B,f:I,profondeur:4});return M},T=async({idCompte:B,fSuivi:I})=>(await I([B]),faisRien),A=async(B,I)=>await rechercherProfilsSelonActivit()(this.client,B,O=>{I(O?.score||0)});return await this.rechercher({f:x,nRsultatsDsirs:E,fRecherche:T,fConfiance:C,fQualit:A,fObjectif:S})}async suivreConfianceAuteurs({idItem:x,clef:E,f:S}){const C=async I=>await this.suivreAuteursObjet({idObjet:x,clef:E,f:async M=>{const O=M.filter(D=>D.accept).map(D=>D.idCompte);return await I(O)}}),T=async(I,M)=>{const{fOublier:O}=await this.suivreConfianceMonRseauPourMembre({idCompte:I,f:M,profondeur:4});return O},A=async I=>{const M=I.reduce((O,D)=>O+D,0);await S(M)},B=I=>I.flat();return await this.client.suivreBdsDeFonctionListe({fListe:C,f:A,fBranche:T,fRduction:B})}async rechercherObjets({f:x,clef:E,nRsultatsDsirs:S,fRecherche:C,fRechercheLesMiens:T,fQualit:A,fObjectif:B,toutLeRseau:I=!0}){if(!I){const D=B||rechercherTous();return await this.client.suivreBdsDeFonctionListe({fListe:async L=>({fOublier:await T(L),fChangerN:()=>Promise.resolve()}),f:x,fBranche:async(L,V)=>await D(this.client,L,V)})}const M=async({idCompte:D,fSuivi:L})=>{const V={propres:[],favoris:[]},U=async()=>{const W=[...new Set([...V.propres,...V.favoris])];await L(W)},q=await C({idCompte:D,f:async W=>{V.propres=W||[],await U()}}),H=await this.suivreFavorisMembre({idCompte:D,f:async W=>{V.favoris=W?Object.keys(W):[],await U()}});return async()=>{await q(),await H()}},O=async(D,L)=>await this.suivreConfianceAuteurs({idItem:D,clef:E,f:L});return await this.rechercher({f:x,nRsultatsDsirs:S,fRecherche:M,fConfiance:O,fQualit:A,fObjectif:B})}async rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:S,toutLeRseau:C=!0}){const T=this.suivreNuesMembre.bind(this),A=async(I,M)=>await this.client.nues.suivreQualitNue({idNue:I,f:M}),B=async I=>await this.client.nues.suivreNues({f:I});return await this.rechercherObjets({f:x,clef:"nues",nRsultatsDsirs:E,fRecherche:T,fRechercheLesMiens:B,fQualit:A,fObjectif:S,toutLeRseau:C})}async rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:S,toutLeRseau:C=!0}){const T=this.suivreBdsMembre.bind(this),A=async(I,M)=>{const O=async D=>await M(D.total);return await this.client.bds.suivreQualitBd({idBd:I,f:O})},B=async I=>await this.client.bds.suivreBds({f:I});return await this.rechercherObjets({f:x,clef:"bds",nRsultatsDsirs:E,fRecherche:T,fRechercheLesMiens:B,fQualit:A,fObjectif:S,toutLeRseau:C})}async rechercherVariables({f:x,nRsultatsDsirs:E,fObjectif:S,toutLeRseau:C=!0}){const T=this.suivreVariablesMembre.bind(this),A=async(I,M)=>await this.client.variables.suivreQualitVariable({idVariable:I,f:M}),B=async I=>await this.client.variables.suivreVariables({f:I});return await this.rechercherObjets({f:x,clef:"variables",nRsultatsDsirs:E,fRecherche:T,fRechercheLesMiens:B,fQualit:A,fObjectif:S,toutLeRseau:C})}async rechercherMotsClefs({f:x,nRsultatsDsirs:E,fObjectif:S,toutLeRseau:C=!0}){const T=this.suivreMotsClefsMembre.bind(this),A=async(I,M)=>await this.client.motsClefs.suivreQualitMotClef({idMotClef:I,f:M}),B=async I=>await this.client.motsClefs.suivreMotsClefs({f:I});return await this.rechercherObjets({f:x,clef:"motsClefs",nRsultatsDsirs:E,fRecherche:T,fRechercheLesMiens:B,fQualit:A,fObjectif:S,toutLeRseau:C})}async rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:S,toutLeRseau:C=!0}){const T=this.suivreProjetsMembre.bind(this),A=async(I,M)=>await this.client.projets.suivreQualitProjet({idProjet:I,f:M}),B=async I=>await this.client.projets.suivreProjets({f:I});return await this.rechercherObjets({f:x,clef:"projets",nRsultatsDsirs:E,fRecherche:T,fRechercheLesMiens:B,fQualit:A,fObjectif:S,toutLeRseau:C})}async suivreAuteursObjet({idObjet:x,clef:E,f:S}){const C=async M=>await this.client.suivreAccsBd({id:x,f:M}),T=async(M,O,D)=>{const L=async U=>(U=U||[],O([{idCompte:D.idCompte,rle:D.rle,accept:U.includes(x)}]));let V;switch(E){case"motsClefs":V=await this.client.motsClefs?.suivreMotsClefs({f:L,idCompte:M});break;case"variables":V=await this.client.variables?.suivreVariables({f:L,idCompte:M});break;case"bds":V=await this.client.bds?.suivreBds({f:L,idCompte:M});break;case"nues":V=await this.client.nues?.suivreNues({f:L,idCompte:M});break;case"projets":V=await this.client.projets?.suivreProjets({f:L,idCompte:M});break;default:throw new Error(E)}return V},A=M=>M.idCompte,B=M=>M.idCompte;return await this.client.suivreBdsDeFonctionListe({fListe:C,f:S,fBranche:T,fIdBdDeBranche:A,fCode:B})}async suivreAuteursMotClef({idMotClef:x,f:E}){return await this.suivreAuteursObjet({idObjet:x,clef:"motsClefs",f:E})}async suivreAuteursVariable({idVariable:x,f:E}){return await this.suivreAuteursObjet({idObjet:x,clef:"variables",f:E})}async suivreAuteursBd({idBd:x,f:E}){return await this.suivreAuteursObjet({idObjet:x,clef:"bds",f:E})}async suivreAuteursProjet({idProjet:x,f:E}){return await this.suivreAuteursObjet({idObjet:x,clef:"projets",f:E})}async suivreObjetsMembre({idCompte:x,fListeObjets:E,fSuivi:S}){return await this.client.suivreBdsSelonCondition({fListe:E,fCondition:async(C,T)=>await this.client.suivreAccsBd({id:C,f:A=>T(A.map(B=>B.idCompte).includes(x))}),f:S})}async suivreBdsMembre({idCompte:x,f:E}){return await this.suivreObjetsMembre({idCompte:x,fListeObjets:async S=>await this.client.bds.suivreBds({f:S,idCompte:x}),fSuivi:E})}async suivreProjetsMembre({idCompte:x,f:E}){return await this.suivreObjetsMembre({idCompte:x,fListeObjets:async S=>await this.client.projets.suivreProjets({f:S,idCompte:x}),fSuivi:E})}async suivreFavorisMembre({idCompte:x,f:E}){return await this.client.favoris.suivreFavoris({f:E,idCompte:x})}async suivreVariablesMembre({idCompte:x,f:E}){return await this.suivreObjetsMembre({idCompte:x,fListeObjets:async S=>await this.client.variables.suivreVariables({f:S,idCompte:x}),fSuivi:E})}async suivreMotsClefsMembre({idCompte:x,f:E}){return await this.suivreObjetsMembre({idCompte:x,fListeObjets:async S=>await this.client.motsClefs.suivreMotsClefs({f:S,idCompte:x}),fSuivi:E})}async suivreNuesMembre({idCompte:x,f:E}){return await this.suivreObjetsMembre({idCompte:x,fListeObjets:async S=>await this.client.nues.suivreNues({f:S,idCompte:x}),fSuivi:E})}async suivreFavorisObjet({idObjet:x,f:E,profondeur:S}){const C=async B=>{const I=B.filter(M=>M.idObjet===x);await E(I)},T=async B=>{const I=async M=>await B([this.client.idCompte,...M.map(O=>O.idCompte)]);return await this.suivreComptesRseauEtEnLigne({f:I,profondeur:S,idCompteDbut:this.client.idCompte})},A=async(B,I)=>await this.suivreFavorisMembre({idCompte:B,f:M=>I(M?M.map(O=>({idCompte:B,...O})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:T,f:C,fBranche:A})}async suivreRplications({idObjet:x,f:E,profondeur:S}){const C={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},T=async()=>{const{connexionsMembres:H,favoris:W}=C,Q=W.map(Y=>Y.favoris.idCompte),re=H.filter(Y=>Q.includes(Y.infoMembre.idCompte)),ce=(await Promise.all(W.map(async Y=>{const{favoris:fe,dispositifs:ge}=Y;return await Promise.all(ge.map(async $e=>{const _e=C.connexionsDispositifs.find(F=>F.infoDispositif.idDispositif===$e)?.vu,ae=C.connexionsDispositifs.find(F=>F.infoDispositif.idDispositif===$e)?.infoDispositif.idCompte;return{idObjet:x,idDispositif:$e,idCompte:ae,bd:await this.client.favoris.estpinglSurDispositif({dispositifs:fe.dispositifs,idDispositif:$e}),fichiers:await this.client.favoris.estpinglSurDispositif({dispositifs:fe.dispositifsFichiers,idDispositif:$e}),rcursif:fe.rcursif,vu:_e}}))}))).flat();return await E({membres:re,dispositifs:ce})},A=await this.suivreConnexionsMembres({f:async H=>(C.connexionsMembres=H,await T())}),B=await this.suivreConnexionsDispositifs({f:async H=>(C.connexionsDispositifs=H,await T())}),I=async H=>(C.favoris=H,await T()),M=async H=>await this.suivreFavorisObjet({idObjet:x,f:H,profondeur:S}),O=async(H,W,Q)=>{const re=async ne=>await W({favoris:Q,dispositifs:ne}),ce=await this.client.suivreDispositifs({f:re,idCompte:H});return async()=>{await ce()}},D=H=>H.idCompte,L=H=>H.idCompte,{fOublier:V,fChangerProfondeur:U}=await this.client.suivreBdsDeFonctionRecherche({fListe:M,f:I,fBranche:O,fIdBdDeBranche:D,fCode:L});return{fOublier:async()=>{await V(),await A(),await B()},fChangerProfondeur:U}}async suivreBdsDeNue({idNue:x,f:E,nRsultatsDsirs:S}){const C=async(A,B)=>await this.client.bds.rechercherBdsParNue({idNue:x,f:B,idCompte:A}),T=async A=>await this.suivreComptesRseauEtEnLigne({f:async B=>await A(B.map(I=>I.idCompte)),profondeur:S});return await this.client.suivreBdsDeFonctionRecherche({fListe:T,f:E,fBranche:C})}async suivrelmentsDeTableauxUniques({idNueUnique:x,clef:E,f:S,nBds:C=100}){const T=async M=>{const O=async L=>await this.suivreBdsDeNue({idNue:x,f:L,nRsultatsDsirs:C}),D=async(L,V)=>await this.suivreAuteursBd({idBd:L,f:async U=>{const q=U.find(W=>W.accept)?.idCompte;return await V(q?{bd:L,idCompte:q}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:O,f:M,fBranche:D})},A=async(M,O,D)=>{const{idCompte:L}=D;return await suivreBdDeFonction({fRacine:async({fSuivreRacine:H})=>await this.client.bds.suivreIdTableauParClef({idBd:M,clef:E,f:W=>{W&&H(W)}}),f:async H=>await O(H||[]),fSuivre:async({id:H,fSuivreBd:W})=>{const Q=async re=>{const ce=re.map(ne=>({idCompte:L,lment:ne}));return await W(ce)};return await this.client.tableaux.suivreDonnes({idTableau:H,f:Q})}})},B=M=>M.bd,I=M=>M.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:T,f:S,fBranche:A,fIdBdDeBranche:B,fCode:I})}async fermer(){this._ferm=!0,await Promise.all(this.fsOublier.map(x=>x()))}}__decorate([cacheSuivi],Rseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqusPubliques",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqus",null);__decorate([cacheSuivi],Rseau.prototype,"suivreRelationsImmdiates",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreComptesRseau",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesDispositif",null);__decorate([cacheSuivi],Rseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreNuesMembre",null);__decorate([cacheRechercheParNRsultats],Rseau.prototype,"suivreBdsDeNue",null);var base64={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var n=function(_,x){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,S){E.__proto__=S}||function(E,S){for(var C in S)S.hasOwnProperty(C)&&(E[C]=S[C])},n(_,x)};return function(_,x){n(_,x);function E(){this.constructor=_}_.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(base64,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function n(_){_===void 0&&(_="="),this._paddingCharacter=_}return n.prototype.encodedLength=function(_){return this._paddingCharacter?(_+2)/3*4|0:(_*8+5)/6|0},n.prototype.encode=function(_){for(var x="",E=0;E<_.length-2;E+=3){var S=_[E]<<16|_[E+1]<<8|_[E+2];x+=this._encodeByte(S>>>3*6&63),x+=this._encodeByte(S>>>2*6&63),x+=this._encodeByte(S>>>1*6&63),x+=this._encodeByte(S>>>0*6&63)}var C=_.length-E;if(C>0){var S=_[E]<<16|(C===2?_[E+1]<<8:0);x+=this._encodeByte(S>>>3*6&63),x+=this._encodeByte(S>>>2*6&63),C===2?x+=this._encodeByte(S>>>1*6&63):x+=this._paddingCharacter||"",x+=this._paddingCharacter||""}return x},n.prototype.maxDecodedLength=function(_){return this._paddingCharacter?_/4*3|0:(_*6+7)/8|0},n.prototype.decodedLength=function(_){return this.maxDecodedLength(_.length-this._getPaddingLength(_))},n.prototype.decode=function(_){if(_.length===0)return new Uint8Array(0);for(var x=this._getPaddingLength(_),E=_.length-x,S=new Uint8Array(this.maxDecodedLength(E)),C=0,T=0,A=0,B=0,I=0,M=0,O=0;T<E-4;T+=4)B=this._decodeChar(_.charCodeAt(T+0)),I=this._decodeChar(_.charCodeAt(T+1)),M=this._decodeChar(_.charCodeAt(T+2)),O=this._decodeChar(_.charCodeAt(T+3)),S[C++]=B<<2|I>>>4,S[C++]=I<<4|M>>>2,S[C++]=M<<6|O,A|=B&INVALID_BYTE,A|=I&INVALID_BYTE,A|=M&INVALID_BYTE,A|=O&INVALID_BYTE;if(T<E-1&&(B=this._decodeChar(_.charCodeAt(T)),I=this._decodeChar(_.charCodeAt(T+1)),S[C++]=B<<2|I>>>4,A|=B&INVALID_BYTE,A|=I&INVALID_BYTE),T<E-2&&(M=this._decodeChar(_.charCodeAt(T+2)),S[C++]=I<<4|M>>>2,A|=M&INVALID_BYTE),T<E-3&&(O=this._decodeChar(_.charCodeAt(T+3)),S[C++]=M<<6|O,A|=O&INVALID_BYTE),A!==0)throw new Error("Base64Coder: incorrect characters for decoding");return S},n.prototype._encodeByte=function(_){var x=_;return x+=65,x+=25-_>>>8&0-65-26+97,x+=51-_>>>8&26-97-52+48,x+=61-_>>>8&52-48-62+43,x+=62-_>>>8&62-43-63+47,String.fromCharCode(x)},n.prototype._decodeChar=function(_){var x=INVALID_BYTE;return x+=(42-_&_-44)>>>8&-INVALID_BYTE+_-43+62,x+=(46-_&_-48)>>>8&-INVALID_BYTE+_-47+63,x+=(47-_&_-58)>>>8&-INVALID_BYTE+_-48+52,x+=(64-_&_-91)>>>8&-INVALID_BYTE+_-65+0,x+=(96-_&_-123)>>>8&-INVALID_BYTE+_-97+26,x},n.prototype._getPaddingLength=function(_){var x=0;if(this._paddingCharacter){for(var E=_.length-1;E>=0&&_[E]===this._paddingCharacter;E--)x++;if(_.length<4||x>2)throw new Error("Base64Coder: incorrect padding")}return x},n}();base64.Coder=Coder;var stdCoder=new Coder;function encode$2(n){return stdCoder.encode(n)}var encode_1$1=base64.encode=encode$2;function decode$3(n){return stdCoder.decode(n)}var decode_1$1=base64.decode=decode$3,URLSafeCoder=function(n){__extends(_,n);function _(){return n!==null&&n.apply(this,arguments)||this}return _.prototype._encodeByte=function(x){var E=x;return E+=65,E+=25-x>>>8&0-65-26+97,E+=51-x>>>8&26-97-52+48,E+=61-x>>>8&52-48-62+45,E+=62-x>>>8&62-45-63+95,String.fromCharCode(E)},_.prototype._decodeChar=function(x){var E=INVALID_BYTE;return E+=(44-x&x-46)>>>8&-INVALID_BYTE+x-45+62,E+=(94-x&x-96)>>>8&-INVALID_BYTE+x-95+63,E+=(47-x&x-58)>>>8&-INVALID_BYTE+x-48+52,E+=(64-x&x-91)>>>8&-INVALID_BYTE+x-65+0,E+=(96-x&x-123)>>>8&-INVALID_BYTE+x-97+26,E},_}(Coder);base64.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(n){return urlSafeCoder.encode(n)}base64.encodeURLSafe=encodeURLSafe;function decodeURLSafe(n){return urlSafeCoder.decode(n)}base64.decodeURLSafe=decodeURLSafe;base64.encodedLength=function(n){return stdCoder.encodedLength(n)};base64.maxDecodedLength=function(n){return stdCoder.maxDecodedLength(n)};base64.decodedLength=function(n){return stdCoder.decodedLength(n)};var utf8$2={};Object.defineProperty(utf8$2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode$1(n){for(var _=new Uint8Array(encodedLength(n)),x=0,E=0;E<n.length;E++){var S=n.charCodeAt(E);S<128?_[x++]=S:S<2048?(_[x++]=192|S>>6,_[x++]=128|S&63):S<55296?(_[x++]=224|S>>12,_[x++]=128|S>>6&63,_[x++]=128|S&63):(E++,S=(S&1023)<<10,S|=n.charCodeAt(E)&1023,S+=65536,_[x++]=240|S>>18,_[x++]=128|S>>12&63,_[x++]=128|S>>6&63,_[x++]=128|S&63)}return _}var encode_1=utf8$2.encode=encode$1;function encodedLength(n){for(var _=0,x=0;x<n.length;x++){var E=n.charCodeAt(x);if(E<128)_+=1;else if(E<2048)_+=2;else if(E<55296)_+=3;else if(E<=57343){if(x>=n.length-1)throw new Error(INVALID_UTF16);x++,_+=4}else throw new Error(INVALID_UTF16)}return _}var encodedLength_1=utf8$2.encodedLength=encodedLength;function decode$2(n){for(var _=[],x=0;x<n.length;x++){var E=n[x];if(E&128){var S=void 0;if(E<224){if(x>=n.length)throw new Error(INVALID_UTF8);var C=n[++x];if((C&192)!==128)throw new Error(INVALID_UTF8);E=(E&31)<<6|C&63,S=128}else if(E<240){if(x>=n.length-1)throw new Error(INVALID_UTF8);var C=n[++x],T=n[++x];if((C&192)!==128||(T&192)!==128)throw new Error(INVALID_UTF8);E=(E&15)<<12|(C&63)<<6|T&63,S=2048}else if(E<248){if(x>=n.length-2)throw new Error(INVALID_UTF8);var C=n[++x],T=n[++x],A=n[++x];if((C&192)!==128||(T&192)!==128||(A&192)!==128)throw new Error(INVALID_UTF8);E=(E&15)<<18|(C&63)<<12|(T&63)<<6|A&63,S=65536}else throw new Error(INVALID_UTF8);if(E<S||E>=55296&&E<=57343)throw new Error(INVALID_UTF8);if(E>=65536){if(E>1114111)throw new Error(INVALID_UTF8);E-=65536,_.push(String.fromCharCode(55296|E>>10)),E=56320|E&1023}}_.push(String.fromCharCode(E))}return _.join("")}var decode_1=utf8$2.decode=decode$2;const utf8$1=_mergeNamespaces({__proto__:null,decode:decode_1,default:utf8$2,encode:encode_1,encodedLength:encodedLength_1},[utf8$2]);var browser$1={},encode={},encodeBuffer={},writeCore={},extBuffer={},bufferish={},bufferGlobal=c(typeof Buffer$5<"u"&&Buffer$5)||c(commonjsGlobal.Buffer)||c(typeof window<"u"&&window.Buffer)||commonjsGlobal.Buffer;function c(n){return n&&n.isBuffer&&n}var toString$1={}.toString,isarray=Array.isArray||function(n){return toString$1.call(n)=="[object Array]"},bufferishArray={exports:{}},hasRequiredBufferishArray;function requireBufferishArray(){if(hasRequiredBufferishArray)return bufferishArray.exports;hasRequiredBufferishArray=1;var n=requireBufferish(),_=bufferishArray.exports=x(0);_.alloc=x,_.concat=n.concat,_.from=E;function x(S){return new Array(S)}function E(S){if(!n.isBuffer(S)&&n.isView(S))S=n.Uint8Array.from(S);else if(n.isArrayBuffer(S))S=new Uint8Array(S);else{if(typeof S=="string")return n.from.call(_,S);if(typeof S=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(S)}return bufferishArray.exports}var bufferishBuffer={exports:{}},hasRequiredBufferishBuffer;function requireBufferishBuffer(){if(hasRequiredBufferishBuffer)return bufferishBuffer.exports;hasRequiredBufferishBuffer=1;var n=requireBufferish(),_=n.global,x=bufferishBuffer.exports=n.hasBuffer?E(0):[];x.alloc=n.hasBuffer&&_.alloc||E,x.concat=n.concat,x.from=S;function E(C){return new _(C)}function S(C){if(!n.isBuffer(C)&&n.isView(C))C=n.Uint8Array.from(C);else if(n.isArrayBuffer(C))C=new Uint8Array(C);else{if(typeof C=="string")return n.from.call(x,C);if(typeof C=="number")throw new TypeError('"value" argument must not be a number')}return _.from&&_.from.length!==1?_.from(C):new _(C)}return bufferishBuffer.exports}var bufferishUint8array={exports:{}},hasRequiredBufferishUint8array;function requireBufferishUint8array(){if(hasRequiredBufferishUint8array)return bufferishUint8array.exports;hasRequiredBufferishUint8array=1;var n=requireBufferish(),_=bufferishUint8array.exports=n.hasArrayBuffer?x(0):[];_.alloc=x,_.concat=n.concat,_.from=E;function x(S){return new Uint8Array(S)}function E(S){if(n.isView(S)){var C=S.byteOffset,T=S.byteLength;S=S.buffer,S.byteLength!==T&&(S.slice?S=S.slice(C,C+T):(S=new Uint8Array(S),S.byteLength!==T&&(S=Array.prototype.slice.call(S,C,C+T))))}else{if(typeof S=="string")return n.from.call(_,S);if(typeof S=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(S)}return bufferishUint8array.exports}var bufferishProto={},bufferLite={};bufferLite.copy=copy;bufferLite.toString=toString;bufferLite.write=write$1;function write$1(n,_){for(var x=this,E=_||(_|=0),S=n.length,C=0,T=0;T<S;)C=n.charCodeAt(T++),C<128?x[E++]=C:C<2048?(x[E++]=192|C>>>6,x[E++]=128|C&63):C<55296||C>57343?(x[E++]=224|C>>>12,x[E++]=128|C>>>6&63,x[E++]=128|C&63):(C=(C-55296<<10|n.charCodeAt(T++)-56320)+65536,x[E++]=240|C>>>18,x[E++]=128|C>>>12&63,x[E++]=128|C>>>6&63,x[E++]=128|C&63);return E-_}function toString(n,_,x){var E=this,S=_|0;x||(x=E.length);for(var C="",T=0;S<x;){if(T=E[S++],T<128){C+=String.fromCharCode(T);continue}(T&224)===192?T=(T&31)<<6|E[S++]&63:(T&240)===224?T=(T&15)<<12|(E[S++]&63)<<6|E[S++]&63:(T&248)===240&&(T=(T&7)<<18|(E[S++]&63)<<12|(E[S++]&63)<<6|E[S++]&63),T>=65536?(T-=65536,C+=String.fromCharCode((T>>>10)+55296,(T&1023)+56320)):C+=String.fromCharCode(T)}return C}function copy(n,_,x,E){var S;x||(x=0),!E&&E!==0&&(E=this.length),_||(_=0);var C=E-x;if(n===this&&x<_&&_<E)for(S=C-1;S>=0;S--)n[S+_]=this[S+x];else for(S=0;S<C;S++)n[S+_]=this[S+x];return C}var hasRequiredBufferishProto;function requireBufferishProto(){if(hasRequiredBufferishProto)return bufferishProto;hasRequiredBufferishProto=1;var n=bufferLite;bufferishProto.copy=C,bufferishProto.slice=T,bufferishProto.toString=A,bufferishProto.write=B("write");var _=requireBufferish(),x=_.global,E=_.hasBuffer&&"TYPED_ARRAY_SUPPORT"in x,S=E&&!x.TYPED_ARRAY_SUPPORT;function C(I,M,O,D){var L=_.isBuffer(this),V=_.isBuffer(I);if(L&&V)return this.copy(I,M,O,D);if(!S&&!L&&!V&&_.isView(this)&&_.isView(I)){var U=O||D!=null?T.call(this,O,D):this;return I.set(U,M),U.length}else return n.copy.call(this,I,M,O,D)}function T(I,M){var O=this.slice||!S&&this.subarray;if(O)return O.call(this,I,M);var D=_.alloc.call(this,M-I);return C.call(this,D,0,I,M),D}function A(I,M,O){var D=!E&&_.isBuffer(this)?this.toString:n.toString;return D.apply(this,arguments)}function B(I){return M;function M(){var O=this[I]||n[I];return O.apply(this,arguments)}}return bufferishProto}var hasRequiredBufferish;function requireBufferish(){return hasRequiredBufferish||(hasRequiredBufferish=1,function(n){var _=n.global=bufferGlobal,x=n.hasBuffer=_&&!!_.isBuffer,E=n.hasArrayBuffer=typeof ArrayBuffer<"u",S=n.isArray=isarray;n.isArrayBuffer=E?U:W;var C=n.isBuffer=x?_.isBuffer:W,T=n.isView=E?ArrayBuffer.isView||Q("ArrayBuffer","buffer"):W;n.alloc=D,n.concat=L,n.from=O;var A=n.Array=requireBufferishArray(),B=n.Buffer=requireBufferishBuffer(),I=n.Uint8Array=requireBufferishUint8array(),M=n.prototype=requireBufferishProto();function O(re){return typeof re=="string"?q.call(this,re):H(this).from(re)}function D(re){return H(this).alloc(re)}function L(re,ce){ce||(ce=0,Array.prototype.forEach.call(re,ge));var ne=this!==n&&this||re[0],Y=D.call(ne,ce),fe=0;return Array.prototype.forEach.call(re,$e),Y;function ge(_e){ce+=_e.length}function $e(_e){fe+=M.copy.call(_e,Y,fe)}}var V=Q("ArrayBuffer");function U(re){return re instanceof ArrayBuffer||V(re)}function q(re){var ce=re.length*3,ne=D.call(this,ce),Y=M.write.call(ne,re);return ce!==Y&&(ne=M.slice.call(ne,0,Y)),ne}function H(re){return C(re)?B:T(re)?I:S(re)?A:x?B:E?I:A}function W(){return!1}function Q(re,ce){return re="[object "+re+"]",function(ne){return ne!=null&&{}.toString.call(ce?ne[ce]:ne)===re}}}(bufferish)),bufferish}extBuffer.ExtBuffer=ExtBuffer$1;var Bufferish$5=requireBufferish();function ExtBuffer$1(n,_){if(!(this instanceof ExtBuffer$1))return new ExtBuffer$1(n,_);this.buffer=Bufferish$5.from(n),this.type=_}var extPacker={},hasRequiredExtPacker;function requireExtPacker(){if(hasRequiredExtPacker)return extPacker;hasRequiredExtPacker=1,extPacker.setExtPackers=C;var n=requireBufferish(),_=n.global,x=n.Uint8Array.from,E,S={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function C(M){M.addExtPacker(14,Error,[I,T]),M.addExtPacker(1,EvalError,[I,T]),M.addExtPacker(2,RangeError,[I,T]),M.addExtPacker(3,ReferenceError,[I,T]),M.addExtPacker(4,SyntaxError,[I,T]),M.addExtPacker(5,TypeError,[I,T]),M.addExtPacker(6,URIError,[I,T]),M.addExtPacker(10,RegExp,[B,T]),M.addExtPacker(11,Boolean,[A,T]),M.addExtPacker(12,String,[A,T]),M.addExtPacker(13,Date,[Number,T]),M.addExtPacker(15,Number,[A,T]),typeof Uint8Array<"u"&&(M.addExtPacker(17,Int8Array,x),M.addExtPacker(18,Uint8Array,x),M.addExtPacker(19,Int16Array,x),M.addExtPacker(20,Uint16Array,x),M.addExtPacker(21,Int32Array,x),M.addExtPacker(22,Uint32Array,x),M.addExtPacker(23,Float32Array,x),typeof Float64Array<"u"&&M.addExtPacker(24,Float64Array,x),typeof Uint8ClampedArray<"u"&&M.addExtPacker(25,Uint8ClampedArray,x),M.addExtPacker(26,ArrayBuffer,x),M.addExtPacker(29,DataView,x)),n.hasBuffer&&M.addExtPacker(27,_,n.from)}function T(M){return E||(E=requireEncode().encode),E(M)}function A(M){return M.valueOf()}function B(M){M=RegExp.prototype.toString.call(M).split("/"),M.shift();var O=[M.pop()];return O.unshift(M.join("/")),O}function I(M){var O={};for(var D in S)O[D]=M[D];return O}return extPacker}var writeType={},int64Buffer={};(function(n){(function(_){var x="undefined",E=x!==typeof Buffer$5&&Buffer$5,S=x!==typeof Uint8Array&&Uint8Array,C=x!==typeof ArrayBuffer&&ArrayBuffer,T=[0,0,0,0,0,0,0,0],A=Array.isArray||ne,B=4294967296,I=16777216,M;O("Uint64BE",!0,!0),O("Int64BE",!0,!1),O("Uint64LE",!1,!0),O("Int64LE",!1,!1);function O(Y,fe,ge){var $e=fe?0:4,_e=fe?4:0,ae=fe?0:3,X=fe?1:2,F=fe?2:1,z=fe?3:0,J=fe?W:re,te=fe?Q:ce,se=G.prototype,oe="is"+Y,ie="_"+oe;return se.buffer=void 0,se.offset=0,se[ie]=!0,se.toNumber=he,se.toString=Se,se.toJSON=he,se.toArray=D,E&&(se.toBuffer=L),S&&(se.toArrayBuffer=V),G[oe]=j,_[Y]=G,G;function G(Ee,ye,Ce,ve){return this instanceof G?ee(this,Ee,ye,Ce,ve):new G(Ee,ye,Ce,ve)}function j(Ee){return!!(Ee&&Ee[ie])}function ee(Ee,ye,Ce,ve,Be){if(S&&C&&(ye instanceof C&&(ye=new S(ye)),ve instanceof C&&(ve=new S(ve))),!ye&&!Ce&&!ve&&!M){Ee.buffer=H(T,0);return}if(!U(ye,Ce)){var me=M||Array;Be=Ce,ve=ye,Ce=0,ye=new me(8)}Ee.buffer=ye,Ee.offset=Ce|=0,x!==typeof ve&&(typeof ve=="string"?pe(ye,Ce,ve,Be||10):U(ve,Be)?q(ye,Ce,ve,Be):typeof Be=="number"?(we(ye,Ce+$e,ve),we(ye,Ce+_e,Be)):ve>0?J(ye,Ce,ve):ve<0?te(ye,Ce,ve):q(ye,Ce,T,0))}function pe(Ee,ye,Ce,ve){var Be=0,me=Ce.length,Ie=0,Ve=0;Ce[0]==="-"&&Be++;for(var Me=Be;Be<me;){var Ne=parseInt(Ce[Be++],ve);if(!(Ne>=0))break;Ve=Ve*ve+Ne,Ie=Ie*ve+Math.floor(Ve/B),Ve%=B}Me&&(Ie=~Ie,Ve?Ve=B-Ve:Ie++),we(Ee,ye+$e,Ie),we(Ee,ye+_e,Ve)}function he(){var Ee=this.buffer,ye=this.offset,Ce=xe(Ee,ye+$e),ve=xe(Ee,ye+_e);return ge||(Ce|=0),Ce?Ce*B+ve:ve}function Se(Ee){var ye=this.buffer,Ce=this.offset,ve=xe(ye,Ce+$e),Be=xe(ye,Ce+_e),me="",Ie=!ge&&ve&2147483648;for(Ie&&(ve=~ve,Be=B-Be),Ee=Ee||10;;){var Ve=ve%Ee*B+Be;if(ve=Math.floor(ve/Ee),Be=Math.floor(Ve/Ee),me=(Ve%Ee).toString(Ee)+me,!ve&&!Be)break}return Ie&&(me="-"+me),me}function we(Ee,ye,Ce){Ee[ye+z]=Ce&255,Ce=Ce>>8,Ee[ye+F]=Ce&255,Ce=Ce>>8,Ee[ye+X]=Ce&255,Ce=Ce>>8,Ee[ye+ae]=Ce&255}function xe(Ee,ye){return Ee[ye+ae]*I+(Ee[ye+X]<<16)+(Ee[ye+F]<<8)+Ee[ye+z]}}function D(Y){var fe=this.buffer,ge=this.offset;return M=null,Y!==!1&&ge===0&&fe.length===8&&A(fe)?fe:H(fe,ge)}function L(Y){var fe=this.buffer,ge=this.offset;if(M=E,Y!==!1&&ge===0&&fe.length===8&&Buffer$5.isBuffer(fe))return fe;var $e=new E(8);return q($e,0,fe,ge),$e}function V(Y){var fe=this.buffer,ge=this.offset,$e=fe.buffer;if(M=S,Y!==!1&&ge===0&&$e instanceof C&&$e.byteLength===8)return $e;var _e=new S(8);return q(_e,0,fe,ge),_e.buffer}function U(Y,fe){var ge=Y&&Y.length;return fe|=0,ge&&fe+8<=ge&&typeof Y[fe]!="string"}function q(Y,fe,ge,$e){fe|=0,$e|=0;for(var _e=0;_e<8;_e++)Y[fe++]=ge[$e++]&255}function H(Y,fe){return Array.prototype.slice.call(Y,fe,fe+8)}function W(Y,fe,ge){for(var $e=fe+8;$e>fe;)Y[--$e]=ge&255,ge/=256}function Q(Y,fe,ge){var $e=fe+8;for(ge++;$e>fe;)Y[--$e]=-ge&255^255,ge/=256}function re(Y,fe,ge){for(var $e=fe+8;fe<$e;)Y[fe++]=ge&255,ge/=256}function ce(Y,fe,ge){var $e=fe+8;for(ge++;fe<$e;)Y[fe++]=-ge&255^255,ge/=256}function ne(Y){return!!Y&&Object.prototype.toString.call(Y)=="[object Array]"}})(typeof n.nodeName!="string"?n:commonjsGlobal||{})})(int64Buffer);var writeToken={},writeUint8={},constant$1=writeUint8.uint8=new Array(256);for(var i=0;i<=255;i++)constant$1[i]=write0(i);function write0(n){return function(_){var x=_.reserve(1);_.buffer[x]=n}}var ieee754$1=ieee754$2,Int64Buffer$2=int64Buffer,Uint64BE$2=Int64Buffer$2.Uint64BE,Int64BE$2=Int64Buffer$2.Int64BE,uint8$2=writeUint8.uint8,Bufferish$4=requireBufferish(),Buffer$1=Bufferish$4.global,IS_BUFFER_SHIM=Bufferish$4.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish$4.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(n){return n&&n.uint8array?init_uint8array():NO_TYPED_ARRAY||Bufferish$4.hasBuffer&&n&&n.safe?init_safe():init_token$1()}function init_uint8array(){var n=init_token$1();return n[202]=writeN(202,4,writeFloatBE),n[203]=writeN(203,8,writeDoubleBE),n}function init_token$1(){var n=uint8$2.slice();return n[196]=write1(196),n[197]=write2(197),n[198]=write4(198),n[199]=write1(199),n[200]=write2(200),n[201]=write4(201),n[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),n[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),n[204]=write1(204),n[205]=write2(205),n[206]=write4(206),n[207]=writeN(207,8,writeUInt64BE),n[208]=write1(208),n[209]=write2(209),n[210]=write4(210),n[211]=writeN(211,8,writeInt64BE),n[217]=write1(217),n[218]=write2(218),n[219]=write4(219),n[220]=write2(220),n[221]=write4(221),n[222]=write2(222),n[223]=write4(223),n}function init_safe(){var n=uint8$2.slice();return n[196]=writeN(196,1,Buffer$1.prototype.writeUInt8),n[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE),n[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE),n[199]=writeN(199,1,Buffer$1.prototype.writeUInt8),n[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE),n[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE),n[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE),n[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE),n[204]=writeN(204,1,Buffer$1.prototype.writeUInt8),n[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE),n[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE),n[207]=writeN(207,8,writeUInt64BE),n[208]=writeN(208,1,Buffer$1.prototype.writeInt8),n[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE),n[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE),n[211]=writeN(211,8,writeInt64BE),n[217]=writeN(217,1,Buffer$1.prototype.writeUInt8),n[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE),n[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE),n[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE),n[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE),n[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE),n[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE),n}function write1(n){return function(_,x){var E=_.reserve(2),S=_.buffer;S[E++]=n,S[E]=x}}function write2(n){return function(_,x){var E=_.reserve(3),S=_.buffer;S[E++]=n,S[E++]=x>>>8,S[E]=x}}function write4(n){return function(_,x){var E=_.reserve(5),S=_.buffer;S[E++]=n,S[E++]=x>>>24,S[E++]=x>>>16,S[E++]=x>>>8,S[E]=x}}function writeN(n,_,x,E){return function(S,C){var T=S.reserve(_+1);S.buffer[T++]=n,x.call(S.buffer,C,T,E)}}function writeUInt64BE(n,_){new Uint64BE$2(this,_,n)}function writeInt64BE(n,_){new Int64BE$2(this,_,n)}function writeFloatBE(n,_){ieee754$1.write(this,n,_,!1,23,4)}function writeDoubleBE(n,_){ieee754$1.write(this,n,_,!1,52,8)}var IS_ARRAY$1=isarray,Int64Buffer$1=int64Buffer,Uint64BE$1=Int64Buffer$1.Uint64BE,Int64BE$1=Int64Buffer$1.Int64BE,Bufferish$3=requireBufferish(),BufferProto$1=requireBufferishProto(),WriteToken=writeToken,uint8$1=writeUint8.uint8,ExtBuffer=extBuffer.ExtBuffer,HAS_UINT8ARRAY=typeof Uint8Array<"u",HAS_MAP$1=typeof Map<"u",extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(n){var _=WriteToken.getWriteToken(n),x=n&&n.useraw,E=HAS_UINT8ARRAY&&n&&n.binarraybuffer,S=E?Bufferish$3.isArrayBuffer:Bufferish$3.isBuffer,C=E?ce:re,T=HAS_MAP$1&&n&&n.usemap,A=T?fe:Y,B={boolean:I,function:W,number:M,object:x?H:q,string:U(x?V:L),symbol:W,undefined:W};return B;function I($e,_e){var ae=_e?195:194;_[ae]($e,_e)}function M($e,_e){var ae=_e|0,X;if(_e!==ae){X=203,_[X]($e,_e);return}else-32<=ae&&ae<=127?X=ae&255:0<=ae?X=ae<=255?204:ae<=65535?205:206:X=-128<=ae?208:-32768<=ae?209:210;_[X]($e,ae)}function O($e,_e){var ae=207;_[ae]($e,_e.toArray())}function D($e,_e){var ae=211;_[ae]($e,_e.toArray())}function L($e){return $e<32?1:$e<=255?2:$e<=65535?3:5}function V($e){return $e<32?1:$e<=65535?3:5}function U($e){return _e;function _e(ae,X){var F=X.length,z=5+F*3;ae.offset=ae.reserve(z);var J=ae.buffer,te=$e(F),se=ae.offset+te;F=BufferProto$1.write.call(J,X,se);var oe=$e(F);if(te!==oe){var ie=se+oe-te,G=se+F;BufferProto$1.copy.call(J,J,ie,se,G)}var j=oe===1?160+F:oe<=3?215+oe:219;_[j](ae,F),ae.offset+=F}}function q($e,_e){if(_e===null)return W($e,_e);if(S(_e))return C($e,_e);if(IS_ARRAY$1(_e))return Q($e,_e);if(Uint64BE$1.isUint64BE(_e))return O($e,_e);if(Int64BE$1.isInt64BE(_e))return D($e,_e);var ae=$e.codec.getExtPacker(_e);if(ae&&(_e=ae(_e)),_e instanceof ExtBuffer)return ne($e,_e);A($e,_e)}function H($e,_e){if(S(_e))return ge($e,_e);q($e,_e)}function W($e,_e){var ae=192;_[ae]($e,_e)}function Q($e,_e){var ae=_e.length,X=ae<16?144+ae:ae<=65535?220:221;_[X]($e,ae);for(var F=$e.codec.encode,z=0;z<ae;z++)F($e,_e[z])}function re($e,_e){var ae=_e.length,X=ae<255?196:ae<=65535?197:198;_[X]($e,ae),$e.send(_e)}function ce($e,_e){re($e,new Uint8Array(_e))}function ne($e,_e){var ae=_e.buffer,X=ae.length,F=extmap[X]||(X<255?199:X<=65535?200:201);_[F]($e,X),uint8$1[_e.type]($e),$e.send(ae)}function Y($e,_e){var ae=Object.keys(_e),X=ae.length,F=X<16?128+X:X<=65535?222:223;_[F]($e,X);var z=$e.codec.encode;ae.forEach(function(J){z($e,J),z($e,_e[J])})}function fe($e,_e){if(!(_e instanceof Map))return Y($e,_e);var ae=_e.size,X=ae<16?128+ae:ae<=65535?222:223;_[X]($e,ae);var F=$e.codec.encode;_e.forEach(function(z,J,te){F($e,J),F($e,z)})}function ge($e,_e){var ae=_e.length,X=ae<32?160+ae:ae<=65535?218:219;_[X]($e,ae),$e.send(_e)}}var codecBase={},IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$2=requireBufferish();function Codec(n){if(!(this instanceof Codec))return new Codec(n);this.options=n,this.init()}Codec.prototype.init=function(){var n=this.options;return n&&n.uint8array&&(this.bufferish=Bufferish$2.Uint8Array),this};function install(n){for(var _ in n)Codec.prototype[_]=add(Codec.prototype[_],n[_])}function add(n,_){return n&&_?x:n||_;function x(){return n.apply(this,arguments),_.apply(this,arguments)}}function join(n){return n=n.slice(),function(x){return n.reduce(_,x)};function _(x,E){return E(x)}}function filter(n){return IS_ARRAY(n)?join(n):n}function createCodec(n){return new Codec(n)}codecBase.preset=createCodec({preset:!0});var hasRequiredWriteCore;function requireWriteCore(){if(hasRequiredWriteCore)return writeCore;hasRequiredWriteCore=1;var n=extBuffer.ExtBuffer,_=requireExtPacker(),x=writeType,E=codecBase;E.install({addExtPacker:T,getExtPacker:A,init:C}),writeCore.preset=C.call(E.preset);function S(B){var I=x.getWriteType(B);return M;function M(O,D){var L=I[typeof D];if(!L)throw new Error('Unsupported type "'+typeof D+'": '+D);L(O,D)}}function C(){var B=this.options;return this.encode=S(B),B&&B.preset&&_.setExtPackers(this),this}function T(B,I,M){M=E.filter(M);var O=I.name;if(O&&O!=="Object"){var D=this.extPackers||(this.extPackers={});D[O]=V}else{var L=this.extEncoderList||(this.extEncoderList=[]);L.unshift([I,V])}function V(U){return M&&(U=M(U)),new n(U,B)}}function A(B){var I=this.extPackers||(this.extPackers={}),M=B.constructor,O=M&&M.name&&I[M.name];if(O)return O;for(var D=this.extEncoderList||(this.extEncoderList=[]),L=D.length,V=0;V<L;V++){var U=D[V];if(M===U[0])return U[1]}}return writeCore}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder;flexBuffer.FlexEncoder=FlexEncoder;var Bufferish$1=requireBufferish(),MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish$1,write:n,fetch:fetch$1,flush:_,push,pull,read:read$1,reserve:x,offset:0};function n(E){var S=this.offset?Bufferish$1.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=S?E?this.bufferish.concat([S,E]):S:E,this.offset=0}function _(){for(;this.offset<this.buffer.length;){var E=this.offset,S;try{S=this.fetch()}catch(C){if(C&&C.message!=BUFFER_SHORTAGE)throw C;this.offset=E;break}this.push(S)}}function x(E){var S=this.offset,C=S+E;if(C>this.buffer.length)throw new Error(BUFFER_SHORTAGE);return this.offset=C,S}}function getEncoderMethods(){return{bufferish:Bufferish$1,write,fetch:n,flush:_,push,pull:x,read:read$1,reserve:E,send:S,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function n(){var C=this.start;if(C<this.offset){var T=this.start=this.offset;return Bufferish$1.prototype.slice.call(this.buffer,C,T)}}function _(){for(;this.start<this.offset;){var C=this.fetch();C&&this.push(C)}}function x(){var C=this.buffers||(this.buffers=[]),T=C.length>1?this.bufferish.concat(C):C[0];return C.length=0,T}function E(C){var T=C|0;if(this.buffer){var A=this.buffer.length,B=this.offset|0,I=B+T;if(I<A)return this.offset=I,B;this.flush(),C=Math.max(C,Math.min(A*2,this.maxBufferSize))}return C=Math.max(C,this.minBufferSize),this.buffer=this.bufferish.alloc(C),this.start=0,this.offset=T,0}function S(C){var T=C.length;if(T>this.minBufferSize)this.flush(),this.push(C);else{var A=this.reserve(T);Bufferish$1.prototype.copy.call(C,this.buffer,A)}}}function write(){throw new Error("method not implemented: write()")}function fetch$1(){throw new Error("method not implemented: fetch()")}function read$1(){var n=this.buffers&&this.buffers.length;return n?(this.flush(),this.pull()):this.fetch()}function push(n){var _=this.buffers||(this.buffers=[]);_.push(n)}function pull(){var n=this.buffers||(this.buffers=[]);return n.shift()}function mixinFactory(n){return _;function _(x){for(var E in n)x[E]=n[E];return x}}var hasRequiredEncodeBuffer;function requireEncodeBuffer(){if(hasRequiredEncodeBuffer)return encodeBuffer;hasRequiredEncodeBuffer=1,encodeBuffer.EncodeBuffer=x;var n=requireWriteCore().preset,_=flexBuffer.FlexEncoder;_.mixin(x.prototype);function x(E){if(!(this instanceof x))return new x(E);if(E&&(this.options=E,E.codec)){var S=this.codec=E.codec;S.bufferish&&(this.bufferish=S.bufferish)}}return x.prototype.codec=n,x.prototype.write=function(E){this.codec.encode(this,E)},encodeBuffer}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1,encode.encode=_;var n=requireEncodeBuffer().EncodeBuffer;function _(x,E){var S=new n(E);return S.write(x),S.read()}return encode}var decode$1={},decodeBuffer={},readCore={},extUnpacker={},hasRequiredExtUnpacker;function requireExtUnpacker(){if(hasRequiredExtUnpacker)return extUnpacker;hasRequiredExtUnpacker=1,extUnpacker.setExtUnpackers=S;var n=requireBufferish(),_=n.global,x,E={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function S(M){M.addExtUnpacker(14,[C,A(Error)]),M.addExtUnpacker(1,[C,A(EvalError)]),M.addExtUnpacker(2,[C,A(RangeError)]),M.addExtUnpacker(3,[C,A(ReferenceError)]),M.addExtUnpacker(4,[C,A(SyntaxError)]),M.addExtUnpacker(5,[C,A(TypeError)]),M.addExtUnpacker(6,[C,A(URIError)]),M.addExtUnpacker(10,[C,T]),M.addExtUnpacker(11,[C,B(Boolean)]),M.addExtUnpacker(12,[C,B(String)]),M.addExtUnpacker(13,[C,B(Date)]),M.addExtUnpacker(15,[C,B(Number)]),typeof Uint8Array<"u"&&(M.addExtUnpacker(17,B(Int8Array)),M.addExtUnpacker(18,B(Uint8Array)),M.addExtUnpacker(19,[I,B(Int16Array)]),M.addExtUnpacker(20,[I,B(Uint16Array)]),M.addExtUnpacker(21,[I,B(Int32Array)]),M.addExtUnpacker(22,[I,B(Uint32Array)]),M.addExtUnpacker(23,[I,B(Float32Array)]),typeof Float64Array<"u"&&M.addExtUnpacker(24,[I,B(Float64Array)]),typeof Uint8ClampedArray<"u"&&M.addExtUnpacker(25,B(Uint8ClampedArray)),M.addExtUnpacker(26,I),M.addExtUnpacker(29,[I,B(DataView)])),n.hasBuffer&&M.addExtUnpacker(27,B(_))}function C(M){return x||(x=requireDecode().decode),x(M)}function T(M){return RegExp.apply(null,M)}function A(M){return function(O){var D=new M;for(var L in E)D[L]=O[L];return D}}function B(M){return function(O){return new M(O)}}function I(M){return new Uint8Array(M).buffer}return extUnpacker}var readFormat={},ieee754=ieee754$2,Int64Buffer=int64Buffer,Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=requireBufferish(),BufferProto=requireBufferishProto(),HAS_MAP=typeof Map<"u",NO_ASSERT=!0;function getReadFormat(n){var _=Bufferish.hasArrayBuffer&&n&&n.binarraybuffer,x=n&&n.int64,E=HAS_MAP&&n&&n.usemap,S={map:E?map_to_map:map_to_obj,array,str,bin:_?bin_arraybuffer:bin_buffer,ext:ext$1,uint8,uint16,uint32,uint64:read(8,x?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read(8,x?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)};return S}function map_to_obj(n,_){var x={},E,S=new Array(_),C=new Array(_),T=n.codec.decode;for(E=0;E<_;E++)S[E]=T(n),C[E]=T(n);for(E=0;E<_;E++)x[S[E]]=C[E];return x}function map_to_map(n,_){var x=new Map,E,S=new Array(_),C=new Array(_),T=n.codec.decode;for(E=0;E<_;E++)S[E]=T(n),C[E]=T(n);for(E=0;E<_;E++)x.set(S[E],C[E]);return x}function array(n,_){for(var x=new Array(_),E=n.codec.decode,S=0;S<_;S++)x[S]=E(n);return x}function str(n,_){var x=n.reserve(_),E=x+_;return BufferProto.toString.call(n.buffer,"utf-8",x,E)}function bin_buffer(n,_){var x=n.reserve(_),E=x+_,S=BufferProto.slice.call(n.buffer,x,E);return Bufferish.from(S)}function bin_arraybuffer(n,_){var x=n.reserve(_),E=x+_,S=BufferProto.slice.call(n.buffer,x,E);return Bufferish.Uint8Array.from(S).buffer}function ext$1(n,_){var x=n.reserve(_+1),E=n.buffer[x++],S=x+_,C=n.codec.getExtUnpacker(E);if(!C)throw new Error("Invalid ext type: "+(E&&"0x"+E.toString(16)));var T=BufferProto.slice.call(n.buffer,x,S);return C(T)}function uint8(n){var _=n.reserve(1);return n.buffer[_]}function int8(n){var _=n.reserve(1),x=n.buffer[_];return x&128?x-256:x}function uint16(n){var _=n.reserve(2),x=n.buffer;return x[_++]<<8|x[_]}function int16(n){var _=n.reserve(2),x=n.buffer,E=x[_++]<<8|x[_];return E&32768?E-65536:E}function uint32(n){var _=n.reserve(4),x=n.buffer;return x[_++]*16777216+(x[_++]<<16)+(x[_++]<<8)+x[_]}function int32(n){var _=n.reserve(4),x=n.buffer;return x[_++]<<24|x[_++]<<16|x[_++]<<8|x[_]}function read(n,_){return function(x){var E=x.reserve(n);return _.call(x.buffer,E,NO_ASSERT)}}function readUInt64BE(n){return new Uint64BE(this,n).toNumber()}function readInt64BE(n){return new Int64BE(this,n).toNumber()}function readUInt64BE_int64(n){return new Uint64BE(this,n)}function readInt64BE_int64(n){return new Int64BE(this,n)}function readFloatBE(n){return ieee754.read(this,n,!1,23,4)}function readDoubleBE(n){return ieee754.read(this,n,!1,52,8)}var readToken={},ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(n){var _=ReadFormat.getReadFormat(n);return n&&n.useraw?init_useraw(_):init_token(_)}function init_token(n){var _,x=new Array(256);for(_=0;_<=127;_++)x[_]=constant(_);for(_=128;_<=143;_++)x[_]=fix(_-128,n.map);for(_=144;_<=159;_++)x[_]=fix(_-144,n.array);for(_=160;_<=191;_++)x[_]=fix(_-160,n.str);for(x[192]=constant(null),x[193]=null,x[194]=constant(!1),x[195]=constant(!0),x[196]=flex(n.uint8,n.bin),x[197]=flex(n.uint16,n.bin),x[198]=flex(n.uint32,n.bin),x[199]=flex(n.uint8,n.ext),x[200]=flex(n.uint16,n.ext),x[201]=flex(n.uint32,n.ext),x[202]=n.float32,x[203]=n.float64,x[204]=n.uint8,x[205]=n.uint16,x[206]=n.uint32,x[207]=n.uint64,x[208]=n.int8,x[209]=n.int16,x[210]=n.int32,x[211]=n.int64,x[212]=fix(1,n.ext),x[213]=fix(2,n.ext),x[214]=fix(4,n.ext),x[215]=fix(8,n.ext),x[216]=fix(16,n.ext),x[217]=flex(n.uint8,n.str),x[218]=flex(n.uint16,n.str),x[219]=flex(n.uint32,n.str),x[220]=flex(n.uint16,n.array),x[221]=flex(n.uint32,n.array),x[222]=flex(n.uint16,n.map),x[223]=flex(n.uint32,n.map),_=224;_<=255;_++)x[_]=constant(_-256);return x}function init_useraw(n){var _,x=init_token(n).slice();for(x[217]=x[196],x[218]=x[197],x[219]=x[198],_=160;_<=191;_++)x[_]=fix(_-160,n.bin);return x}function constant(n){return function(){return n}}function flex(n,_){return function(x){var E=n(x);return _(x,E)}}function fix(n,_){return function(x){return _(x,n)}}var hasRequiredReadCore;function requireReadCore(){if(hasRequiredReadCore)return readCore;hasRequiredReadCore=1;var n=extBuffer.ExtBuffer,_=requireExtUnpacker(),x=readFormat.readUint8,E=readToken,S=codecBase;S.install({addExtUnpacker:A,getExtUnpacker:B,init:T}),readCore.preset=T.call(S.preset);function C(I){var M=E.getReadToken(I);return O;function O(D){var L=x(D),V=M[L];if(!V)throw new Error("Invalid type: "+(L&&"0x"+L.toString(16)));return V(D)}}function T(){var I=this.options;return this.decode=C(I),I&&I.preset&&_.setExtUnpackers(this),this}function A(I,M){var O=this.extUnpackers||(this.extUnpackers=[]);O[I]=S.filter(M)}function B(I){var M=this.extUnpackers||(this.extUnpackers=[]);return M[I]||O;function O(D){return new n(D,I)}}return readCore}var hasRequiredDecodeBuffer;function requireDecodeBuffer(){if(hasRequiredDecodeBuffer)return decodeBuffer;hasRequiredDecodeBuffer=1,decodeBuffer.DecodeBuffer=x;var n=requireReadCore().preset,_=flexBuffer.FlexDecoder;_.mixin(x.prototype);function x(E){if(!(this instanceof x))return new x(E);if(E&&(this.options=E,E.codec)){var S=this.codec=E.codec;S.bufferish&&(this.bufferish=S.bufferish)}}return x.prototype.codec=n,x.prototype.fetch=function(){return this.codec.decode(this)},decodeBuffer}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$1;hasRequiredDecode=1,decode$1.decode=_;var n=requireDecodeBuffer().DecodeBuffer;function _(x,E){var S=new n(E);return S.write(x),S.read()}return decode$1}var encoder={},eventLite={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(n){function _(){if(!(this instanceof _))return new _}(function(x){n.exports=x;var E="listeners",S={on:T,once:A,off:B,emit:I};C(x.prototype),x.mixin=C;function C(O){for(var D in S)O[D]=S[D];return O}function T(O,D){return M(this,O).push(D),this}function A(O,D){var L=this;return V.originalListener=D,M(L,O).push(V),L;function V(){B.call(L,O,V),D.apply(this,arguments)}}function B(O,D){var L=this,V;if(!arguments.length)delete L[E];else if(D){if(V=M(L,O,!0),V){if(V=V.filter(U),!V.length)return B.call(L,O);L[E][O]=V}}else if(V=L[E],V&&(delete V[O],!Object.keys(V).length))return B.call(L);return L;function U(q){return q!==D&&q.originalListener!==D}}function I(O,D){var L=this,V=M(L,O,!0);if(!V)return!1;var U=arguments.length;if(U===1)V.forEach(H);else if(U===2)V.forEach(W);else{var q=Array.prototype.slice.call(arguments,1);V.forEach(Q)}return!!V.length;function H(re){re.call(L)}function W(re){re.call(L,D)}function Q(re){re.apply(L,q)}}function M(O,D,L){if(!(L&&!O[E])){var V=O[E]||(O[E]={});return V[D]||(V[D]=[])}}})(_)})(eventLite);var eventLiteExports=eventLite.exports;encoder.Encoder=Encoder;var EventLite$1=eventLiteExports,EncodeBuffer=requireEncodeBuffer().EncodeBuffer;function Encoder(n){if(!(this instanceof Encoder))return new Encoder(n);EncodeBuffer.call(this,n)}Encoder.prototype=new EncodeBuffer;EventLite$1.mixin(Encoder.prototype);Encoder.prototype.encode=function(n){this.write(n),this.emit("data",this.read())};Encoder.prototype.end=function(n){arguments.length&&this.encode(n),this.flush(),this.emit("end")};var decoder={};decoder.Decoder=Decoder;var EventLite=eventLiteExports,DecodeBuffer=requireDecodeBuffer().DecodeBuffer;function Decoder(n){if(!(this instanceof Decoder))return new Decoder(n);DecodeBuffer.call(this,n)}Decoder.prototype=new DecodeBuffer;EventLite.mixin(Decoder.prototype);Decoder.prototype.decode=function(n){arguments.length&&this.write(n),this.flush()};Decoder.prototype.push=function(n){this.emit("data",n)};Decoder.prototype.end=function(n){this.decode(n),this.emit("end")};var ext={};requireReadCore();requireWriteCore();ext.createCodec=codecBase.createCodec;var codec={};requireReadCore();requireWriteCore();codec.codec={preset:codecBase.preset};browser$1.encode=requireEncode().encode;browser$1.decode=requireDecode().decode;browser$1.Encoder=encoder.Encoder;browser$1.Decoder=decoder.Decoder;browser$1.createCodec=ext.createCodec;browser$1.codec=codec.codec;var naclFast={exports:{}};(function(n){(function(_){var x=function(qe){var Oe,De=new Float64Array(16);if(qe)for(Oe=0;Oe<qe.length;Oe++)De[Oe]=qe[Oe];return De},E=function(){throw new Error("no PRNG")},S=new Uint8Array(16),C=new Uint8Array(32);C[0]=9;var T=x(),A=x([1]),B=x([56129,1]),I=x([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),M=x([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),O=x([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),D=x([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),L=x([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function V(qe,Oe,De,ue){qe[Oe]=De>>24&255,qe[Oe+1]=De>>16&255,qe[Oe+2]=De>>8&255,qe[Oe+3]=De&255,qe[Oe+4]=ue>>24&255,qe[Oe+5]=ue>>16&255,qe[Oe+6]=ue>>8&255,qe[Oe+7]=ue&255}function U(qe,Oe,De,ue,ke){var Fe,Ue=0;for(Fe=0;Fe<ke;Fe++)Ue|=qe[Oe+Fe]^De[ue+Fe];return(1&Ue-1>>>8)-1}function q(qe,Oe,De,ue){return U(qe,Oe,De,ue,16)}function H(qe,Oe,De,ue){return U(qe,Oe,De,ue,32)}function W(qe,Oe,De,ue){for(var ke=ue[0]&255|(ue[1]&255)<<8|(ue[2]&255)<<16|(ue[3]&255)<<24,Fe=De[0]&255|(De[1]&255)<<8|(De[2]&255)<<16|(De[3]&255)<<24,Ue=De[4]&255|(De[5]&255)<<8|(De[6]&255)<<16|(De[7]&255)<<24,ze=De[8]&255|(De[9]&255)<<8|(De[10]&255)<<16|(De[11]&255)<<24,Ye=De[12]&255|(De[13]&255)<<8|(De[14]&255)<<16|(De[15]&255)<<24,rt=ue[4]&255|(ue[5]&255)<<8|(ue[6]&255)<<16|(ue[7]&255)<<24,at=Oe[0]&255|(Oe[1]&255)<<8|(Oe[2]&255)<<16|(Oe[3]&255)<<24,ct=Oe[4]&255|(Oe[5]&255)<<8|(Oe[6]&255)<<16|(Oe[7]&255)<<24,st=Oe[8]&255|(Oe[9]&255)<<8|(Oe[10]&255)<<16|(Oe[11]&255)<<24,lt=Oe[12]&255|(Oe[13]&255)<<8|(Oe[14]&255)<<16|(Oe[15]&255)<<24,ht=ue[8]&255|(ue[9]&255)<<8|(ue[10]&255)<<16|(ue[11]&255)<<24,bt=De[16]&255|(De[17]&255)<<8|(De[18]&255)<<16|(De[19]&255)<<24,Et=De[20]&255|(De[21]&255)<<8|(De[22]&255)<<16|(De[23]&255)<<24,gt=De[24]&255|(De[25]&255)<<8|(De[26]&255)<<16|(De[27]&255)<<24,wt=De[28]&255|(De[29]&255)<<8|(De[30]&255)<<16|(De[31]&255)<<24,Dt=ue[12]&255|(ue[13]&255)<<8|(ue[14]&255)<<16|(ue[15]&255)<<24,Ft=ke,Kt=Fe,Ut=Ue,Xt=ze,Zt=Ye,Wt=rt,yt=at,xt=ct,Pt=st,It=lt,Lt=ht,Yt=bt,cr=Et,yr=gt,br=wt,dr=Dt,ut,Er=0;Er<20;Er+=2)ut=Ft+cr|0,Zt^=ut<<7|ut>>>32-7,ut=Zt+Ft|0,Pt^=ut<<9|ut>>>32-9,ut=Pt+Zt|0,cr^=ut<<13|ut>>>32-13,ut=cr+Pt|0,Ft^=ut<<18|ut>>>32-18,ut=Wt+Kt|0,It^=ut<<7|ut>>>32-7,ut=It+Wt|0,yr^=ut<<9|ut>>>32-9,ut=yr+It|0,Kt^=ut<<13|ut>>>32-13,ut=Kt+yr|0,Wt^=ut<<18|ut>>>32-18,ut=Lt+yt|0,br^=ut<<7|ut>>>32-7,ut=br+Lt|0,Ut^=ut<<9|ut>>>32-9,ut=Ut+br|0,yt^=ut<<13|ut>>>32-13,ut=yt+Ut|0,Lt^=ut<<18|ut>>>32-18,ut=dr+Yt|0,Xt^=ut<<7|ut>>>32-7,ut=Xt+dr|0,xt^=ut<<9|ut>>>32-9,ut=xt+Xt|0,Yt^=ut<<13|ut>>>32-13,ut=Yt+xt|0,dr^=ut<<18|ut>>>32-18,ut=Ft+Xt|0,Kt^=ut<<7|ut>>>32-7,ut=Kt+Ft|0,Ut^=ut<<9|ut>>>32-9,ut=Ut+Kt|0,Xt^=ut<<13|ut>>>32-13,ut=Xt+Ut|0,Ft^=ut<<18|ut>>>32-18,ut=Wt+Zt|0,yt^=ut<<7|ut>>>32-7,ut=yt+Wt|0,xt^=ut<<9|ut>>>32-9,ut=xt+yt|0,Zt^=ut<<13|ut>>>32-13,ut=Zt+xt|0,Wt^=ut<<18|ut>>>32-18,ut=Lt+It|0,Yt^=ut<<7|ut>>>32-7,ut=Yt+Lt|0,Pt^=ut<<9|ut>>>32-9,ut=Pt+Yt|0,It^=ut<<13|ut>>>32-13,ut=It+Pt|0,Lt^=ut<<18|ut>>>32-18,ut=dr+br|0,cr^=ut<<7|ut>>>32-7,ut=cr+dr|0,yr^=ut<<9|ut>>>32-9,ut=yr+cr|0,br^=ut<<13|ut>>>32-13,ut=br+yr|0,dr^=ut<<18|ut>>>32-18;Ft=Ft+ke|0,Kt=Kt+Fe|0,Ut=Ut+Ue|0,Xt=Xt+ze|0,Zt=Zt+Ye|0,Wt=Wt+rt|0,yt=yt+at|0,xt=xt+ct|0,Pt=Pt+st|0,It=It+lt|0,Lt=Lt+ht|0,Yt=Yt+bt|0,cr=cr+Et|0,yr=yr+gt|0,br=br+wt|0,dr=dr+Dt|0,qe[0]=Ft>>>0&255,qe[1]=Ft>>>8&255,qe[2]=Ft>>>16&255,qe[3]=Ft>>>24&255,qe[4]=Kt>>>0&255,qe[5]=Kt>>>8&255,qe[6]=Kt>>>16&255,qe[7]=Kt>>>24&255,qe[8]=Ut>>>0&255,qe[9]=Ut>>>8&255,qe[10]=Ut>>>16&255,qe[11]=Ut>>>24&255,qe[12]=Xt>>>0&255,qe[13]=Xt>>>8&255,qe[14]=Xt>>>16&255,qe[15]=Xt>>>24&255,qe[16]=Zt>>>0&255,qe[17]=Zt>>>8&255,qe[18]=Zt>>>16&255,qe[19]=Zt>>>24&255,qe[20]=Wt>>>0&255,qe[21]=Wt>>>8&255,qe[22]=Wt>>>16&255,qe[23]=Wt>>>24&255,qe[24]=yt>>>0&255,qe[25]=yt>>>8&255,qe[26]=yt>>>16&255,qe[27]=yt>>>24&255,qe[28]=xt>>>0&255,qe[29]=xt>>>8&255,qe[30]=xt>>>16&255,qe[31]=xt>>>24&255,qe[32]=Pt>>>0&255,qe[33]=Pt>>>8&255,qe[34]=Pt>>>16&255,qe[35]=Pt>>>24&255,qe[36]=It>>>0&255,qe[37]=It>>>8&255,qe[38]=It>>>16&255,qe[39]=It>>>24&255,qe[40]=Lt>>>0&255,qe[41]=Lt>>>8&255,qe[42]=Lt>>>16&255,qe[43]=Lt>>>24&255,qe[44]=Yt>>>0&255,qe[45]=Yt>>>8&255,qe[46]=Yt>>>16&255,qe[47]=Yt>>>24&255,qe[48]=cr>>>0&255,qe[49]=cr>>>8&255,qe[50]=cr>>>16&255,qe[51]=cr>>>24&255,qe[52]=yr>>>0&255,qe[53]=yr>>>8&255,qe[54]=yr>>>16&255,qe[55]=yr>>>24&255,qe[56]=br>>>0&255,qe[57]=br>>>8&255,qe[58]=br>>>16&255,qe[59]=br>>>24&255,qe[60]=dr>>>0&255,qe[61]=dr>>>8&255,qe[62]=dr>>>16&255,qe[63]=dr>>>24&255}function Q(qe,Oe,De,ue){for(var ke=ue[0]&255|(ue[1]&255)<<8|(ue[2]&255)<<16|(ue[3]&255)<<24,Fe=De[0]&255|(De[1]&255)<<8|(De[2]&255)<<16|(De[3]&255)<<24,Ue=De[4]&255|(De[5]&255)<<8|(De[6]&255)<<16|(De[7]&255)<<24,ze=De[8]&255|(De[9]&255)<<8|(De[10]&255)<<16|(De[11]&255)<<24,Ye=De[12]&255|(De[13]&255)<<8|(De[14]&255)<<16|(De[15]&255)<<24,rt=ue[4]&255|(ue[5]&255)<<8|(ue[6]&255)<<16|(ue[7]&255)<<24,at=Oe[0]&255|(Oe[1]&255)<<8|(Oe[2]&255)<<16|(Oe[3]&255)<<24,ct=Oe[4]&255|(Oe[5]&255)<<8|(Oe[6]&255)<<16|(Oe[7]&255)<<24,st=Oe[8]&255|(Oe[9]&255)<<8|(Oe[10]&255)<<16|(Oe[11]&255)<<24,lt=Oe[12]&255|(Oe[13]&255)<<8|(Oe[14]&255)<<16|(Oe[15]&255)<<24,ht=ue[8]&255|(ue[9]&255)<<8|(ue[10]&255)<<16|(ue[11]&255)<<24,bt=De[16]&255|(De[17]&255)<<8|(De[18]&255)<<16|(De[19]&255)<<24,Et=De[20]&255|(De[21]&255)<<8|(De[22]&255)<<16|(De[23]&255)<<24,gt=De[24]&255|(De[25]&255)<<8|(De[26]&255)<<16|(De[27]&255)<<24,wt=De[28]&255|(De[29]&255)<<8|(De[30]&255)<<16|(De[31]&255)<<24,Dt=ue[12]&255|(ue[13]&255)<<8|(ue[14]&255)<<16|(ue[15]&255)<<24,Ft=ke,Kt=Fe,Ut=Ue,Xt=ze,Zt=Ye,Wt=rt,yt=at,xt=ct,Pt=st,It=lt,Lt=ht,Yt=bt,cr=Et,yr=gt,br=wt,dr=Dt,ut,Er=0;Er<20;Er+=2)ut=Ft+cr|0,Zt^=ut<<7|ut>>>32-7,ut=Zt+Ft|0,Pt^=ut<<9|ut>>>32-9,ut=Pt+Zt|0,cr^=ut<<13|ut>>>32-13,ut=cr+Pt|0,Ft^=ut<<18|ut>>>32-18,ut=Wt+Kt|0,It^=ut<<7|ut>>>32-7,ut=It+Wt|0,yr^=ut<<9|ut>>>32-9,ut=yr+It|0,Kt^=ut<<13|ut>>>32-13,ut=Kt+yr|0,Wt^=ut<<18|ut>>>32-18,ut=Lt+yt|0,br^=ut<<7|ut>>>32-7,ut=br+Lt|0,Ut^=ut<<9|ut>>>32-9,ut=Ut+br|0,yt^=ut<<13|ut>>>32-13,ut=yt+Ut|0,Lt^=ut<<18|ut>>>32-18,ut=dr+Yt|0,Xt^=ut<<7|ut>>>32-7,ut=Xt+dr|0,xt^=ut<<9|ut>>>32-9,ut=xt+Xt|0,Yt^=ut<<13|ut>>>32-13,ut=Yt+xt|0,dr^=ut<<18|ut>>>32-18,ut=Ft+Xt|0,Kt^=ut<<7|ut>>>32-7,ut=Kt+Ft|0,Ut^=ut<<9|ut>>>32-9,ut=Ut+Kt|0,Xt^=ut<<13|ut>>>32-13,ut=Xt+Ut|0,Ft^=ut<<18|ut>>>32-18,ut=Wt+Zt|0,yt^=ut<<7|ut>>>32-7,ut=yt+Wt|0,xt^=ut<<9|ut>>>32-9,ut=xt+yt|0,Zt^=ut<<13|ut>>>32-13,ut=Zt+xt|0,Wt^=ut<<18|ut>>>32-18,ut=Lt+It|0,Yt^=ut<<7|ut>>>32-7,ut=Yt+Lt|0,Pt^=ut<<9|ut>>>32-9,ut=Pt+Yt|0,It^=ut<<13|ut>>>32-13,ut=It+Pt|0,Lt^=ut<<18|ut>>>32-18,ut=dr+br|0,cr^=ut<<7|ut>>>32-7,ut=cr+dr|0,yr^=ut<<9|ut>>>32-9,ut=yr+cr|0,br^=ut<<13|ut>>>32-13,ut=br+yr|0,dr^=ut<<18|ut>>>32-18;qe[0]=Ft>>>0&255,qe[1]=Ft>>>8&255,qe[2]=Ft>>>16&255,qe[3]=Ft>>>24&255,qe[4]=Wt>>>0&255,qe[5]=Wt>>>8&255,qe[6]=Wt>>>16&255,qe[7]=Wt>>>24&255,qe[8]=Lt>>>0&255,qe[9]=Lt>>>8&255,qe[10]=Lt>>>16&255,qe[11]=Lt>>>24&255,qe[12]=dr>>>0&255,qe[13]=dr>>>8&255,qe[14]=dr>>>16&255,qe[15]=dr>>>24&255,qe[16]=yt>>>0&255,qe[17]=yt>>>8&255,qe[18]=yt>>>16&255,qe[19]=yt>>>24&255,qe[20]=xt>>>0&255,qe[21]=xt>>>8&255,qe[22]=xt>>>16&255,qe[23]=xt>>>24&255,qe[24]=Pt>>>0&255,qe[25]=Pt>>>8&255,qe[26]=Pt>>>16&255,qe[27]=Pt>>>24&255,qe[28]=It>>>0&255,qe[29]=It>>>8&255,qe[30]=It>>>16&255,qe[31]=It>>>24&255}function re(qe,Oe,De,ue){W(qe,Oe,De,ue)}function ce(qe,Oe,De,ue){Q(qe,Oe,De,ue)}var ne=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Y(qe,Oe,De,ue,ke,Fe,Ue){var ze=new Uint8Array(16),Ye=new Uint8Array(64),rt,at;for(at=0;at<16;at++)ze[at]=0;for(at=0;at<8;at++)ze[at]=Fe[at];for(;ke>=64;){for(re(Ye,ze,Ue,ne),at=0;at<64;at++)qe[Oe+at]=De[ue+at]^Ye[at];for(rt=1,at=8;at<16;at++)rt=rt+(ze[at]&255)|0,ze[at]=rt&255,rt>>>=8;ke-=64,Oe+=64,ue+=64}if(ke>0)for(re(Ye,ze,Ue,ne),at=0;at<ke;at++)qe[Oe+at]=De[ue+at]^Ye[at];return 0}function fe(qe,Oe,De,ue,ke){var Fe=new Uint8Array(16),Ue=new Uint8Array(64),ze,Ye;for(Ye=0;Ye<16;Ye++)Fe[Ye]=0;for(Ye=0;Ye<8;Ye++)Fe[Ye]=ue[Ye];for(;De>=64;){for(re(Ue,Fe,ke,ne),Ye=0;Ye<64;Ye++)qe[Oe+Ye]=Ue[Ye];for(ze=1,Ye=8;Ye<16;Ye++)ze=ze+(Fe[Ye]&255)|0,Fe[Ye]=ze&255,ze>>>=8;De-=64,Oe+=64}if(De>0)for(re(Ue,Fe,ke,ne),Ye=0;Ye<De;Ye++)qe[Oe+Ye]=Ue[Ye];return 0}function ge(qe,Oe,De,ue,ke){var Fe=new Uint8Array(32);ce(Fe,ue,ke,ne);for(var Ue=new Uint8Array(8),ze=0;ze<8;ze++)Ue[ze]=ue[ze+16];return fe(qe,Oe,De,Ue,Fe)}function $e(qe,Oe,De,ue,ke,Fe,Ue){var ze=new Uint8Array(32);ce(ze,Fe,Ue,ne);for(var Ye=new Uint8Array(8),rt=0;rt<8;rt++)Ye[rt]=Fe[rt+16];return Y(qe,Oe,De,ue,ke,Ye,ze)}var _e=function(qe){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var Oe,De,ue,ke,Fe,Ue,ze,Ye;Oe=qe[0]&255|(qe[1]&255)<<8,this.r[0]=Oe&8191,De=qe[2]&255|(qe[3]&255)<<8,this.r[1]=(Oe>>>13|De<<3)&8191,ue=qe[4]&255|(qe[5]&255)<<8,this.r[2]=(De>>>10|ue<<6)&7939,ke=qe[6]&255|(qe[7]&255)<<8,this.r[3]=(ue>>>7|ke<<9)&8191,Fe=qe[8]&255|(qe[9]&255)<<8,this.r[4]=(ke>>>4|Fe<<12)&255,this.r[5]=Fe>>>1&8190,Ue=qe[10]&255|(qe[11]&255)<<8,this.r[6]=(Fe>>>14|Ue<<2)&8191,ze=qe[12]&255|(qe[13]&255)<<8,this.r[7]=(Ue>>>11|ze<<5)&8065,Ye=qe[14]&255|(qe[15]&255)<<8,this.r[8]=(ze>>>8|Ye<<8)&8191,this.r[9]=Ye>>>5&127,this.pad[0]=qe[16]&255|(qe[17]&255)<<8,this.pad[1]=qe[18]&255|(qe[19]&255)<<8,this.pad[2]=qe[20]&255|(qe[21]&255)<<8,this.pad[3]=qe[22]&255|(qe[23]&255)<<8,this.pad[4]=qe[24]&255|(qe[25]&255)<<8,this.pad[5]=qe[26]&255|(qe[27]&255)<<8,this.pad[6]=qe[28]&255|(qe[29]&255)<<8,this.pad[7]=qe[30]&255|(qe[31]&255)<<8};_e.prototype.blocks=function(qe,Oe,De){for(var ue=this.fin?0:2048,ke,Fe,Ue,ze,Ye,rt,at,ct,st,lt,ht,bt,Et,gt,wt,Dt,Ft,Kt,Ut,Xt=this.h[0],Zt=this.h[1],Wt=this.h[2],yt=this.h[3],xt=this.h[4],Pt=this.h[5],It=this.h[6],Lt=this.h[7],Yt=this.h[8],cr=this.h[9],yr=this.r[0],br=this.r[1],dr=this.r[2],ut=this.r[3],Er=this.r[4],kr=this.r[5],Br=this.r[6],_r=this.r[7],Ir=this.r[8],Tr=this.r[9];De>=16;)ke=qe[Oe+0]&255|(qe[Oe+1]&255)<<8,Xt+=ke&8191,Fe=qe[Oe+2]&255|(qe[Oe+3]&255)<<8,Zt+=(ke>>>13|Fe<<3)&8191,Ue=qe[Oe+4]&255|(qe[Oe+5]&255)<<8,Wt+=(Fe>>>10|Ue<<6)&8191,ze=qe[Oe+6]&255|(qe[Oe+7]&255)<<8,yt+=(Ue>>>7|ze<<9)&8191,Ye=qe[Oe+8]&255|(qe[Oe+9]&255)<<8,xt+=(ze>>>4|Ye<<12)&8191,Pt+=Ye>>>1&8191,rt=qe[Oe+10]&255|(qe[Oe+11]&255)<<8,It+=(Ye>>>14|rt<<2)&8191,at=qe[Oe+12]&255|(qe[Oe+13]&255)<<8,Lt+=(rt>>>11|at<<5)&8191,ct=qe[Oe+14]&255|(qe[Oe+15]&255)<<8,Yt+=(at>>>8|ct<<8)&8191,cr+=ct>>>5|ue,st=0,lt=st,lt+=Xt*yr,lt+=Zt*(5*Tr),lt+=Wt*(5*Ir),lt+=yt*(5*_r),lt+=xt*(5*Br),st=lt>>>13,lt&=8191,lt+=Pt*(5*kr),lt+=It*(5*Er),lt+=Lt*(5*ut),lt+=Yt*(5*dr),lt+=cr*(5*br),st+=lt>>>13,lt&=8191,ht=st,ht+=Xt*br,ht+=Zt*yr,ht+=Wt*(5*Tr),ht+=yt*(5*Ir),ht+=xt*(5*_r),st=ht>>>13,ht&=8191,ht+=Pt*(5*Br),ht+=It*(5*kr),ht+=Lt*(5*Er),ht+=Yt*(5*ut),ht+=cr*(5*dr),st+=ht>>>13,ht&=8191,bt=st,bt+=Xt*dr,bt+=Zt*br,bt+=Wt*yr,bt+=yt*(5*Tr),bt+=xt*(5*Ir),st=bt>>>13,bt&=8191,bt+=Pt*(5*_r),bt+=It*(5*Br),bt+=Lt*(5*kr),bt+=Yt*(5*Er),bt+=cr*(5*ut),st+=bt>>>13,bt&=8191,Et=st,Et+=Xt*ut,Et+=Zt*dr,Et+=Wt*br,Et+=yt*yr,Et+=xt*(5*Tr),st=Et>>>13,Et&=8191,Et+=Pt*(5*Ir),Et+=It*(5*_r),Et+=Lt*(5*Br),Et+=Yt*(5*kr),Et+=cr*(5*Er),st+=Et>>>13,Et&=8191,gt=st,gt+=Xt*Er,gt+=Zt*ut,gt+=Wt*dr,gt+=yt*br,gt+=xt*yr,st=gt>>>13,gt&=8191,gt+=Pt*(5*Tr),gt+=It*(5*Ir),gt+=Lt*(5*_r),gt+=Yt*(5*Br),gt+=cr*(5*kr),st+=gt>>>13,gt&=8191,wt=st,wt+=Xt*kr,wt+=Zt*Er,wt+=Wt*ut,wt+=yt*dr,wt+=xt*br,st=wt>>>13,wt&=8191,wt+=Pt*yr,wt+=It*(5*Tr),wt+=Lt*(5*Ir),wt+=Yt*(5*_r),wt+=cr*(5*Br),st+=wt>>>13,wt&=8191,Dt=st,Dt+=Xt*Br,Dt+=Zt*kr,Dt+=Wt*Er,Dt+=yt*ut,Dt+=xt*dr,st=Dt>>>13,Dt&=8191,Dt+=Pt*br,Dt+=It*yr,Dt+=Lt*(5*Tr),Dt+=Yt*(5*Ir),Dt+=cr*(5*_r),st+=Dt>>>13,Dt&=8191,Ft=st,Ft+=Xt*_r,Ft+=Zt*Br,Ft+=Wt*kr,Ft+=yt*Er,Ft+=xt*ut,st=Ft>>>13,Ft&=8191,Ft+=Pt*dr,Ft+=It*br,Ft+=Lt*yr,Ft+=Yt*(5*Tr),Ft+=cr*(5*Ir),st+=Ft>>>13,Ft&=8191,Kt=st,Kt+=Xt*Ir,Kt+=Zt*_r,Kt+=Wt*Br,Kt+=yt*kr,Kt+=xt*Er,st=Kt>>>13,Kt&=8191,Kt+=Pt*ut,Kt+=It*dr,Kt+=Lt*br,Kt+=Yt*yr,Kt+=cr*(5*Tr),st+=Kt>>>13,Kt&=8191,Ut=st,Ut+=Xt*Tr,Ut+=Zt*Ir,Ut+=Wt*_r,Ut+=yt*Br,Ut+=xt*kr,st=Ut>>>13,Ut&=8191,Ut+=Pt*Er,Ut+=It*ut,Ut+=Lt*dr,Ut+=Yt*br,Ut+=cr*yr,st+=Ut>>>13,Ut&=8191,st=(st<<2)+st|0,st=st+lt|0,lt=st&8191,st=st>>>13,ht+=st,Xt=lt,Zt=ht,Wt=bt,yt=Et,xt=gt,Pt=wt,It=Dt,Lt=Ft,Yt=Kt,cr=Ut,Oe+=16,De-=16;this.h[0]=Xt,this.h[1]=Zt,this.h[2]=Wt,this.h[3]=yt,this.h[4]=xt,this.h[5]=Pt,this.h[6]=It,this.h[7]=Lt,this.h[8]=Yt,this.h[9]=cr},_e.prototype.finish=function(qe,Oe){var De=new Uint16Array(10),ue,ke,Fe,Ue;if(this.leftover){for(Ue=this.leftover,this.buffer[Ue++]=1;Ue<16;Ue++)this.buffer[Ue]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(ue=this.h[1]>>>13,this.h[1]&=8191,Ue=2;Ue<10;Ue++)this.h[Ue]+=ue,ue=this.h[Ue]>>>13,this.h[Ue]&=8191;for(this.h[0]+=ue*5,ue=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=ue,ue=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=ue,De[0]=this.h[0]+5,ue=De[0]>>>13,De[0]&=8191,Ue=1;Ue<10;Ue++)De[Ue]=this.h[Ue]+ue,ue=De[Ue]>>>13,De[Ue]&=8191;for(De[9]-=8192,ke=(ue^1)-1,Ue=0;Ue<10;Ue++)De[Ue]&=ke;for(ke=~ke,Ue=0;Ue<10;Ue++)this.h[Ue]=this.h[Ue]&ke|De[Ue];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Fe=this.h[0]+this.pad[0],this.h[0]=Fe&65535,Ue=1;Ue<8;Ue++)Fe=(this.h[Ue]+this.pad[Ue]|0)+(Fe>>>16)|0,this.h[Ue]=Fe&65535;qe[Oe+0]=this.h[0]>>>0&255,qe[Oe+1]=this.h[0]>>>8&255,qe[Oe+2]=this.h[1]>>>0&255,qe[Oe+3]=this.h[1]>>>8&255,qe[Oe+4]=this.h[2]>>>0&255,qe[Oe+5]=this.h[2]>>>8&255,qe[Oe+6]=this.h[3]>>>0&255,qe[Oe+7]=this.h[3]>>>8&255,qe[Oe+8]=this.h[4]>>>0&255,qe[Oe+9]=this.h[4]>>>8&255,qe[Oe+10]=this.h[5]>>>0&255,qe[Oe+11]=this.h[5]>>>8&255,qe[Oe+12]=this.h[6]>>>0&255,qe[Oe+13]=this.h[6]>>>8&255,qe[Oe+14]=this.h[7]>>>0&255,qe[Oe+15]=this.h[7]>>>8&255},_e.prototype.update=function(qe,Oe,De){var ue,ke;if(this.leftover){for(ke=16-this.leftover,ke>De&&(ke=De),ue=0;ue<ke;ue++)this.buffer[this.leftover+ue]=qe[Oe+ue];if(De-=ke,Oe+=ke,this.leftover+=ke,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(De>=16&&(ke=De-De%16,this.blocks(qe,Oe,ke),Oe+=ke,De-=ke),De){for(ue=0;ue<De;ue++)this.buffer[this.leftover+ue]=qe[Oe+ue];this.leftover+=De}};function ae(qe,Oe,De,ue,ke,Fe){var Ue=new _e(Fe);return Ue.update(De,ue,ke),Ue.finish(qe,Oe),0}function X(qe,Oe,De,ue,ke,Fe){var Ue=new Uint8Array(16);return ae(Ue,0,De,ue,ke,Fe),q(qe,Oe,Ue,0)}function F(qe,Oe,De,ue,ke){var Fe;if(De<32)return-1;for($e(qe,0,Oe,0,De,ue,ke),ae(qe,16,qe,32,De-32,qe),Fe=0;Fe<16;Fe++)qe[Fe]=0;return 0}function z(qe,Oe,De,ue,ke){var Fe,Ue=new Uint8Array(32);if(De<32||(ge(Ue,0,32,ue,ke),X(Oe,16,Oe,32,De-32,Ue)!==0))return-1;for($e(qe,0,Oe,0,De,ue,ke),Fe=0;Fe<32;Fe++)qe[Fe]=0;return 0}function J(qe,Oe){var De;for(De=0;De<16;De++)qe[De]=Oe[De]|0}function te(qe){var Oe,De,ue=1;for(Oe=0;Oe<16;Oe++)De=qe[Oe]+ue+65535,ue=Math.floor(De/65536),qe[Oe]=De-ue*65536;qe[0]+=ue-1+37*(ue-1)}function se(qe,Oe,De){for(var ue,ke=~(De-1),Fe=0;Fe<16;Fe++)ue=ke&(qe[Fe]^Oe[Fe]),qe[Fe]^=ue,Oe[Fe]^=ue}function oe(qe,Oe){var De,ue,ke,Fe=x(),Ue=x();for(De=0;De<16;De++)Ue[De]=Oe[De];for(te(Ue),te(Ue),te(Ue),ue=0;ue<2;ue++){for(Fe[0]=Ue[0]-65517,De=1;De<15;De++)Fe[De]=Ue[De]-65535-(Fe[De-1]>>16&1),Fe[De-1]&=65535;Fe[15]=Ue[15]-32767-(Fe[14]>>16&1),ke=Fe[15]>>16&1,Fe[14]&=65535,se(Ue,Fe,1-ke)}for(De=0;De<16;De++)qe[2*De]=Ue[De]&255,qe[2*De+1]=Ue[De]>>8}function ie(qe,Oe){var De=new Uint8Array(32),ue=new Uint8Array(32);return oe(De,qe),oe(ue,Oe),H(De,0,ue,0)}function G(qe){var Oe=new Uint8Array(32);return oe(Oe,qe),Oe[0]&1}function j(qe,Oe){var De;for(De=0;De<16;De++)qe[De]=Oe[2*De]+(Oe[2*De+1]<<8);qe[15]&=32767}function ee(qe,Oe,De){for(var ue=0;ue<16;ue++)qe[ue]=Oe[ue]+De[ue]}function pe(qe,Oe,De){for(var ue=0;ue<16;ue++)qe[ue]=Oe[ue]-De[ue]}function he(qe,Oe,De){var ue,ke,Fe=0,Ue=0,ze=0,Ye=0,rt=0,at=0,ct=0,st=0,lt=0,ht=0,bt=0,Et=0,gt=0,wt=0,Dt=0,Ft=0,Kt=0,Ut=0,Xt=0,Zt=0,Wt=0,yt=0,xt=0,Pt=0,It=0,Lt=0,Yt=0,cr=0,yr=0,br=0,dr=0,ut=De[0],Er=De[1],kr=De[2],Br=De[3],_r=De[4],Ir=De[5],Tr=De[6],Ur=De[7],Mr=De[8],Dr=De[9],jr=De[10],qr=De[11],Xr=De[12],Zr=De[13],Qr=De[14],tn=De[15];ue=Oe[0],Fe+=ue*ut,Ue+=ue*Er,ze+=ue*kr,Ye+=ue*Br,rt+=ue*_r,at+=ue*Ir,ct+=ue*Tr,st+=ue*Ur,lt+=ue*Mr,ht+=ue*Dr,bt+=ue*jr,Et+=ue*qr,gt+=ue*Xr,wt+=ue*Zr,Dt+=ue*Qr,Ft+=ue*tn,ue=Oe[1],Ue+=ue*ut,ze+=ue*Er,Ye+=ue*kr,rt+=ue*Br,at+=ue*_r,ct+=ue*Ir,st+=ue*Tr,lt+=ue*Ur,ht+=ue*Mr,bt+=ue*Dr,Et+=ue*jr,gt+=ue*qr,wt+=ue*Xr,Dt+=ue*Zr,Ft+=ue*Qr,Kt+=ue*tn,ue=Oe[2],ze+=ue*ut,Ye+=ue*Er,rt+=ue*kr,at+=ue*Br,ct+=ue*_r,st+=ue*Ir,lt+=ue*Tr,ht+=ue*Ur,bt+=ue*Mr,Et+=ue*Dr,gt+=ue*jr,wt+=ue*qr,Dt+=ue*Xr,Ft+=ue*Zr,Kt+=ue*Qr,Ut+=ue*tn,ue=Oe[3],Ye+=ue*ut,rt+=ue*Er,at+=ue*kr,ct+=ue*Br,st+=ue*_r,lt+=ue*Ir,ht+=ue*Tr,bt+=ue*Ur,Et+=ue*Mr,gt+=ue*Dr,wt+=ue*jr,Dt+=ue*qr,Ft+=ue*Xr,Kt+=ue*Zr,Ut+=ue*Qr,Xt+=ue*tn,ue=Oe[4],rt+=ue*ut,at+=ue*Er,ct+=ue*kr,st+=ue*Br,lt+=ue*_r,ht+=ue*Ir,bt+=ue*Tr,Et+=ue*Ur,gt+=ue*Mr,wt+=ue*Dr,Dt+=ue*jr,Ft+=ue*qr,Kt+=ue*Xr,Ut+=ue*Zr,Xt+=ue*Qr,Zt+=ue*tn,ue=Oe[5],at+=ue*ut,ct+=ue*Er,st+=ue*kr,lt+=ue*Br,ht+=ue*_r,bt+=ue*Ir,Et+=ue*Tr,gt+=ue*Ur,wt+=ue*Mr,Dt+=ue*Dr,Ft+=ue*jr,Kt+=ue*qr,Ut+=ue*Xr,Xt+=ue*Zr,Zt+=ue*Qr,Wt+=ue*tn,ue=Oe[6],ct+=ue*ut,st+=ue*Er,lt+=ue*kr,ht+=ue*Br,bt+=ue*_r,Et+=ue*Ir,gt+=ue*Tr,wt+=ue*Ur,Dt+=ue*Mr,Ft+=ue*Dr,Kt+=ue*jr,Ut+=ue*qr,Xt+=ue*Xr,Zt+=ue*Zr,Wt+=ue*Qr,yt+=ue*tn,ue=Oe[7],st+=ue*ut,lt+=ue*Er,ht+=ue*kr,bt+=ue*Br,Et+=ue*_r,gt+=ue*Ir,wt+=ue*Tr,Dt+=ue*Ur,Ft+=ue*Mr,Kt+=ue*Dr,Ut+=ue*jr,Xt+=ue*qr,Zt+=ue*Xr,Wt+=ue*Zr,yt+=ue*Qr,xt+=ue*tn,ue=Oe[8],lt+=ue*ut,ht+=ue*Er,bt+=ue*kr,Et+=ue*Br,gt+=ue*_r,wt+=ue*Ir,Dt+=ue*Tr,Ft+=ue*Ur,Kt+=ue*Mr,Ut+=ue*Dr,Xt+=ue*jr,Zt+=ue*qr,Wt+=ue*Xr,yt+=ue*Zr,xt+=ue*Qr,Pt+=ue*tn,ue=Oe[9],ht+=ue*ut,bt+=ue*Er,Et+=ue*kr,gt+=ue*Br,wt+=ue*_r,Dt+=ue*Ir,Ft+=ue*Tr,Kt+=ue*Ur,Ut+=ue*Mr,Xt+=ue*Dr,Zt+=ue*jr,Wt+=ue*qr,yt+=ue*Xr,xt+=ue*Zr,Pt+=ue*Qr,It+=ue*tn,ue=Oe[10],bt+=ue*ut,Et+=ue*Er,gt+=ue*kr,wt+=ue*Br,Dt+=ue*_r,Ft+=ue*Ir,Kt+=ue*Tr,Ut+=ue*Ur,Xt+=ue*Mr,Zt+=ue*Dr,Wt+=ue*jr,yt+=ue*qr,xt+=ue*Xr,Pt+=ue*Zr,It+=ue*Qr,Lt+=ue*tn,ue=Oe[11],Et+=ue*ut,gt+=ue*Er,wt+=ue*kr,Dt+=ue*Br,Ft+=ue*_r,Kt+=ue*Ir,Ut+=ue*Tr,Xt+=ue*Ur,Zt+=ue*Mr,Wt+=ue*Dr,yt+=ue*jr,xt+=ue*qr,Pt+=ue*Xr,It+=ue*Zr,Lt+=ue*Qr,Yt+=ue*tn,ue=Oe[12],gt+=ue*ut,wt+=ue*Er,Dt+=ue*kr,Ft+=ue*Br,Kt+=ue*_r,Ut+=ue*Ir,Xt+=ue*Tr,Zt+=ue*Ur,Wt+=ue*Mr,yt+=ue*Dr,xt+=ue*jr,Pt+=ue*qr,It+=ue*Xr,Lt+=ue*Zr,Yt+=ue*Qr,cr+=ue*tn,ue=Oe[13],wt+=ue*ut,Dt+=ue*Er,Ft+=ue*kr,Kt+=ue*Br,Ut+=ue*_r,Xt+=ue*Ir,Zt+=ue*Tr,Wt+=ue*Ur,yt+=ue*Mr,xt+=ue*Dr,Pt+=ue*jr,It+=ue*qr,Lt+=ue*Xr,Yt+=ue*Zr,cr+=ue*Qr,yr+=ue*tn,ue=Oe[14],Dt+=ue*ut,Ft+=ue*Er,Kt+=ue*kr,Ut+=ue*Br,Xt+=ue*_r,Zt+=ue*Ir,Wt+=ue*Tr,yt+=ue*Ur,xt+=ue*Mr,Pt+=ue*Dr,It+=ue*jr,Lt+=ue*qr,Yt+=ue*Xr,cr+=ue*Zr,yr+=ue*Qr,br+=ue*tn,ue=Oe[15],Ft+=ue*ut,Kt+=ue*Er,Ut+=ue*kr,Xt+=ue*Br,Zt+=ue*_r,Wt+=ue*Ir,yt+=ue*Tr,xt+=ue*Ur,Pt+=ue*Mr,It+=ue*Dr,Lt+=ue*jr,Yt+=ue*qr,cr+=ue*Xr,yr+=ue*Zr,br+=ue*Qr,dr+=ue*tn,Fe+=38*Kt,Ue+=38*Ut,ze+=38*Xt,Ye+=38*Zt,rt+=38*Wt,at+=38*yt,ct+=38*xt,st+=38*Pt,lt+=38*It,ht+=38*Lt,bt+=38*Yt,Et+=38*cr,gt+=38*yr,wt+=38*br,Dt+=38*dr,ke=1,ue=Fe+ke+65535,ke=Math.floor(ue/65536),Fe=ue-ke*65536,ue=Ue+ke+65535,ke=Math.floor(ue/65536),Ue=ue-ke*65536,ue=ze+ke+65535,ke=Math.floor(ue/65536),ze=ue-ke*65536,ue=Ye+ke+65535,ke=Math.floor(ue/65536),Ye=ue-ke*65536,ue=rt+ke+65535,ke=Math.floor(ue/65536),rt=ue-ke*65536,ue=at+ke+65535,ke=Math.floor(ue/65536),at=ue-ke*65536,ue=ct+ke+65535,ke=Math.floor(ue/65536),ct=ue-ke*65536,ue=st+ke+65535,ke=Math.floor(ue/65536),st=ue-ke*65536,ue=lt+ke+65535,ke=Math.floor(ue/65536),lt=ue-ke*65536,ue=ht+ke+65535,ke=Math.floor(ue/65536),ht=ue-ke*65536,ue=bt+ke+65535,ke=Math.floor(ue/65536),bt=ue-ke*65536,ue=Et+ke+65535,ke=Math.floor(ue/65536),Et=ue-ke*65536,ue=gt+ke+65535,ke=Math.floor(ue/65536),gt=ue-ke*65536,ue=wt+ke+65535,ke=Math.floor(ue/65536),wt=ue-ke*65536,ue=Dt+ke+65535,ke=Math.floor(ue/65536),Dt=ue-ke*65536,ue=Ft+ke+65535,ke=Math.floor(ue/65536),Ft=ue-ke*65536,Fe+=ke-1+37*(ke-1),ke=1,ue=Fe+ke+65535,ke=Math.floor(ue/65536),Fe=ue-ke*65536,ue=Ue+ke+65535,ke=Math.floor(ue/65536),Ue=ue-ke*65536,ue=ze+ke+65535,ke=Math.floor(ue/65536),ze=ue-ke*65536,ue=Ye+ke+65535,ke=Math.floor(ue/65536),Ye=ue-ke*65536,ue=rt+ke+65535,ke=Math.floor(ue/65536),rt=ue-ke*65536,ue=at+ke+65535,ke=Math.floor(ue/65536),at=ue-ke*65536,ue=ct+ke+65535,ke=Math.floor(ue/65536),ct=ue-ke*65536,ue=st+ke+65535,ke=Math.floor(ue/65536),st=ue-ke*65536,ue=lt+ke+65535,ke=Math.floor(ue/65536),lt=ue-ke*65536,ue=ht+ke+65535,ke=Math.floor(ue/65536),ht=ue-ke*65536,ue=bt+ke+65535,ke=Math.floor(ue/65536),bt=ue-ke*65536,ue=Et+ke+65535,ke=Math.floor(ue/65536),Et=ue-ke*65536,ue=gt+ke+65535,ke=Math.floor(ue/65536),gt=ue-ke*65536,ue=wt+ke+65535,ke=Math.floor(ue/65536),wt=ue-ke*65536,ue=Dt+ke+65535,ke=Math.floor(ue/65536),Dt=ue-ke*65536,ue=Ft+ke+65535,ke=Math.floor(ue/65536),Ft=ue-ke*65536,Fe+=ke-1+37*(ke-1),qe[0]=Fe,qe[1]=Ue,qe[2]=ze,qe[3]=Ye,qe[4]=rt,qe[5]=at,qe[6]=ct,qe[7]=st,qe[8]=lt,qe[9]=ht,qe[10]=bt,qe[11]=Et,qe[12]=gt,qe[13]=wt,qe[14]=Dt,qe[15]=Ft}function Se(qe,Oe){he(qe,Oe,Oe)}function we(qe,Oe){var De=x(),ue;for(ue=0;ue<16;ue++)De[ue]=Oe[ue];for(ue=253;ue>=0;ue--)Se(De,De),ue!==2&&ue!==4&&he(De,De,Oe);for(ue=0;ue<16;ue++)qe[ue]=De[ue]}function xe(qe,Oe){var De=x(),ue;for(ue=0;ue<16;ue++)De[ue]=Oe[ue];for(ue=250;ue>=0;ue--)Se(De,De),ue!==1&&he(De,De,Oe);for(ue=0;ue<16;ue++)qe[ue]=De[ue]}function Ee(qe,Oe,De){var ue=new Uint8Array(32),ke=new Float64Array(80),Fe,Ue,ze=x(),Ye=x(),rt=x(),at=x(),ct=x(),st=x();for(Ue=0;Ue<31;Ue++)ue[Ue]=Oe[Ue];for(ue[31]=Oe[31]&127|64,ue[0]&=248,j(ke,De),Ue=0;Ue<16;Ue++)Ye[Ue]=ke[Ue],at[Ue]=ze[Ue]=rt[Ue]=0;for(ze[0]=at[0]=1,Ue=254;Ue>=0;--Ue)Fe=ue[Ue>>>3]>>>(Ue&7)&1,se(ze,Ye,Fe),se(rt,at,Fe),ee(ct,ze,rt),pe(ze,ze,rt),ee(rt,Ye,at),pe(Ye,Ye,at),Se(at,ct),Se(st,ze),he(ze,rt,ze),he(rt,Ye,ct),ee(ct,ze,rt),pe(ze,ze,rt),Se(Ye,ze),pe(rt,at,st),he(ze,rt,B),ee(ze,ze,at),he(rt,rt,ze),he(ze,at,st),he(at,Ye,ke),Se(Ye,ct),se(ze,Ye,Fe),se(rt,at,Fe);for(Ue=0;Ue<16;Ue++)ke[Ue+16]=ze[Ue],ke[Ue+32]=rt[Ue],ke[Ue+48]=Ye[Ue],ke[Ue+64]=at[Ue];var lt=ke.subarray(32),ht=ke.subarray(16);return we(lt,lt),he(ht,ht,lt),oe(qe,ht),0}function ye(qe,Oe){return Ee(qe,Oe,C)}function Ce(qe,Oe){return E(Oe,32),ye(qe,Oe)}function ve(qe,Oe,De){var ue=new Uint8Array(32);return Ee(ue,De,Oe),ce(qe,S,ue,ne)}var Be=F,me=z;function Ie(qe,Oe,De,ue,ke,Fe){var Ue=new Uint8Array(32);return ve(Ue,ke,Fe),Be(qe,Oe,De,ue,Ue)}function Ve(qe,Oe,De,ue,ke,Fe){var Ue=new Uint8Array(32);return ve(Ue,ke,Fe),me(qe,Oe,De,ue,Ue)}var Me=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ne(qe,Oe,De,ue){for(var ke=new Int32Array(16),Fe=new Int32Array(16),Ue,ze,Ye,rt,at,ct,st,lt,ht,bt,Et,gt,wt,Dt,Ft,Kt,Ut,Xt,Zt,Wt,yt,xt,Pt,It,Lt,Yt,cr=qe[0],yr=qe[1],br=qe[2],dr=qe[3],ut=qe[4],Er=qe[5],kr=qe[6],Br=qe[7],_r=Oe[0],Ir=Oe[1],Tr=Oe[2],Ur=Oe[3],Mr=Oe[4],Dr=Oe[5],jr=Oe[6],qr=Oe[7],Xr=0;ue>=128;){for(Zt=0;Zt<16;Zt++)Wt=8*Zt+Xr,ke[Zt]=De[Wt+0]<<24|De[Wt+1]<<16|De[Wt+2]<<8|De[Wt+3],Fe[Zt]=De[Wt+4]<<24|De[Wt+5]<<16|De[Wt+6]<<8|De[Wt+7];for(Zt=0;Zt<80;Zt++)if(Ue=cr,ze=yr,Ye=br,rt=dr,at=ut,ct=Er,st=kr,lt=Br,ht=_r,bt=Ir,Et=Tr,gt=Ur,wt=Mr,Dt=Dr,Ft=jr,Kt=qr,yt=Br,xt=qr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=(ut>>>14|Mr<<32-14)^(ut>>>18|Mr<<32-18)^(Mr>>>41-32|ut<<32-(41-32)),xt=(Mr>>>14|ut<<32-14)^(Mr>>>18|ut<<32-18)^(ut>>>41-32|Mr<<32-(41-32)),Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,yt=ut&Er^~ut&kr,xt=Mr&Dr^~Mr&jr,Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,yt=Me[Zt*2],xt=Me[Zt*2+1],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,yt=ke[Zt%16],xt=Fe[Zt%16],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,Ut=Lt&65535|Yt<<16,Xt=Pt&65535|It<<16,yt=Ut,xt=Xt,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=(cr>>>28|_r<<32-28)^(_r>>>34-32|cr<<32-(34-32))^(_r>>>39-32|cr<<32-(39-32)),xt=(_r>>>28|cr<<32-28)^(cr>>>34-32|_r<<32-(34-32))^(cr>>>39-32|_r<<32-(39-32)),Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,yt=cr&yr^cr&br^yr&br,xt=_r&Ir^_r&Tr^Ir&Tr,Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,lt=Lt&65535|Yt<<16,Kt=Pt&65535|It<<16,yt=rt,xt=gt,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=Ut,xt=Xt,Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,rt=Lt&65535|Yt<<16,gt=Pt&65535|It<<16,yr=Ue,br=ze,dr=Ye,ut=rt,Er=at,kr=ct,Br=st,cr=lt,Ir=ht,Tr=bt,Ur=Et,Mr=gt,Dr=wt,jr=Dt,qr=Ft,_r=Kt,Zt%16===15)for(Wt=0;Wt<16;Wt++)yt=ke[Wt],xt=Fe[Wt],Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=ke[(Wt+9)%16],xt=Fe[(Wt+9)%16],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,Ut=ke[(Wt+1)%16],Xt=Fe[(Wt+1)%16],yt=(Ut>>>1|Xt<<32-1)^(Ut>>>8|Xt<<32-8)^Ut>>>7,xt=(Xt>>>1|Ut<<32-1)^(Xt>>>8|Ut<<32-8)^(Xt>>>7|Ut<<32-7),Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,Ut=ke[(Wt+14)%16],Xt=Fe[(Wt+14)%16],yt=(Ut>>>19|Xt<<32-19)^(Xt>>>61-32|Ut<<32-(61-32))^Ut>>>6,xt=(Xt>>>19|Ut<<32-19)^(Ut>>>61-32|Xt<<32-(61-32))^(Xt>>>6|Ut<<32-6),Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,ke[Wt]=Lt&65535|Yt<<16,Fe[Wt]=Pt&65535|It<<16;yt=cr,xt=_r,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[0],xt=Oe[0],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[0]=cr=Lt&65535|Yt<<16,Oe[0]=_r=Pt&65535|It<<16,yt=yr,xt=Ir,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[1],xt=Oe[1],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[1]=yr=Lt&65535|Yt<<16,Oe[1]=Ir=Pt&65535|It<<16,yt=br,xt=Tr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[2],xt=Oe[2],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[2]=br=Lt&65535|Yt<<16,Oe[2]=Tr=Pt&65535|It<<16,yt=dr,xt=Ur,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[3],xt=Oe[3],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[3]=dr=Lt&65535|Yt<<16,Oe[3]=Ur=Pt&65535|It<<16,yt=ut,xt=Mr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[4],xt=Oe[4],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[4]=ut=Lt&65535|Yt<<16,Oe[4]=Mr=Pt&65535|It<<16,yt=Er,xt=Dr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[5],xt=Oe[5],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[5]=Er=Lt&65535|Yt<<16,Oe[5]=Dr=Pt&65535|It<<16,yt=kr,xt=jr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[6],xt=Oe[6],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[6]=kr=Lt&65535|Yt<<16,Oe[6]=jr=Pt&65535|It<<16,yt=Br,xt=qr,Pt=xt&65535,It=xt>>>16,Lt=yt&65535,Yt=yt>>>16,yt=qe[7],xt=Oe[7],Pt+=xt&65535,It+=xt>>>16,Lt+=yt&65535,Yt+=yt>>>16,It+=Pt>>>16,Lt+=It>>>16,Yt+=Lt>>>16,qe[7]=Br=Lt&65535|Yt<<16,Oe[7]=qr=Pt&65535|It<<16,Xr+=128,ue-=128}return ue}function Pe(qe,Oe,De){var ue=new Int32Array(8),ke=new Int32Array(8),Fe=new Uint8Array(256),Ue,ze=De;for(ue[0]=1779033703,ue[1]=3144134277,ue[2]=1013904242,ue[3]=2773480762,ue[4]=1359893119,ue[5]=2600822924,ue[6]=528734635,ue[7]=1541459225,ke[0]=4089235720,ke[1]=2227873595,ke[2]=4271175723,ke[3]=1595750129,ke[4]=2917565137,ke[5]=725511199,ke[6]=4215389547,ke[7]=327033209,Ne(ue,ke,Oe,De),De%=128,Ue=0;Ue<De;Ue++)Fe[Ue]=Oe[ze-De+Ue];for(Fe[De]=128,De=256-128*(De<112?1:0),Fe[De-9]=0,V(Fe,De-8,ze/536870912|0,ze<<3),Ne(ue,ke,Fe,De),Ue=0;Ue<8;Ue++)V(qe,8*Ue,ue[Ue],ke[Ue]);return 0}function He(qe,Oe){var De=x(),ue=x(),ke=x(),Fe=x(),Ue=x(),ze=x(),Ye=x(),rt=x(),at=x();pe(De,qe[1],qe[0]),pe(at,Oe[1],Oe[0]),he(De,De,at),ee(ue,qe[0],qe[1]),ee(at,Oe[0],Oe[1]),he(ue,ue,at),he(ke,qe[3],Oe[3]),he(ke,ke,M),he(Fe,qe[2],Oe[2]),ee(Fe,Fe,Fe),pe(Ue,ue,De),pe(ze,Fe,ke),ee(Ye,Fe,ke),ee(rt,ue,De),he(qe[0],Ue,ze),he(qe[1],rt,Ye),he(qe[2],Ye,ze),he(qe[3],Ue,rt)}function We(qe,Oe,De){var ue;for(ue=0;ue<4;ue++)se(qe[ue],Oe[ue],De)}function Ke(qe,Oe){var De=x(),ue=x(),ke=x();we(ke,Oe[2]),he(De,Oe[0],ke),he(ue,Oe[1],ke),oe(qe,ue),qe[31]^=G(De)<<7}function Ge(qe,Oe,De){var ue,ke;for(J(qe[0],T),J(qe[1],A),J(qe[2],A),J(qe[3],T),ke=255;ke>=0;--ke)ue=De[ke/8|0]>>(ke&7)&1,We(qe,Oe,ue),He(Oe,qe),He(qe,qe),We(qe,Oe,ue)}function nt(qe,Oe){var De=[x(),x(),x(),x()];J(De[0],O),J(De[1],D),J(De[2],A),he(De[3],O,D),Ge(qe,De,Oe)}function ot(qe,Oe,De){var ue=new Uint8Array(64),ke=[x(),x(),x(),x()],Fe;for(De||E(Oe,32),Pe(ue,Oe,32),ue[0]&=248,ue[31]&=127,ue[31]|=64,nt(ke,ue),Ke(qe,ke),Fe=0;Fe<32;Fe++)Oe[Fe+32]=qe[Fe];return 0}var Ze=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Re(qe,Oe){var De,ue,ke,Fe;for(ue=63;ue>=32;--ue){for(De=0,ke=ue-32,Fe=ue-12;ke<Fe;++ke)Oe[ke]+=De-16*Oe[ue]*Ze[ke-(ue-32)],De=Math.floor((Oe[ke]+128)/256),Oe[ke]-=De*256;Oe[ke]+=De,Oe[ue]=0}for(De=0,ke=0;ke<32;ke++)Oe[ke]+=De-(Oe[31]>>4)*Ze[ke],De=Oe[ke]>>8,Oe[ke]&=255;for(ke=0;ke<32;ke++)Oe[ke]-=De*Ze[ke];for(ue=0;ue<32;ue++)Oe[ue+1]+=Oe[ue]>>8,qe[ue]=Oe[ue]&255}function be(qe){var Oe=new Float64Array(64),De;for(De=0;De<64;De++)Oe[De]=qe[De];for(De=0;De<64;De++)qe[De]=0;Re(qe,Oe)}function Ae(qe,Oe,De,ue){var ke=new Uint8Array(64),Fe=new Uint8Array(64),Ue=new Uint8Array(64),ze,Ye,rt=new Float64Array(64),at=[x(),x(),x(),x()];Pe(ke,ue,32),ke[0]&=248,ke[31]&=127,ke[31]|=64;var ct=De+64;for(ze=0;ze<De;ze++)qe[64+ze]=Oe[ze];for(ze=0;ze<32;ze++)qe[32+ze]=ke[32+ze];for(Pe(Ue,qe.subarray(32),De+32),be(Ue),nt(at,Ue),Ke(qe,at),ze=32;ze<64;ze++)qe[ze]=ue[ze];for(Pe(Fe,qe,De+64),be(Fe),ze=0;ze<64;ze++)rt[ze]=0;for(ze=0;ze<32;ze++)rt[ze]=Ue[ze];for(ze=0;ze<32;ze++)for(Ye=0;Ye<32;Ye++)rt[ze+Ye]+=Fe[ze]*ke[Ye];return Re(qe.subarray(32),rt),ct}function Le(qe,Oe){var De=x(),ue=x(),ke=x(),Fe=x(),Ue=x(),ze=x(),Ye=x();return J(qe[2],A),j(qe[1],Oe),Se(ke,qe[1]),he(Fe,ke,I),pe(ke,ke,qe[2]),ee(Fe,qe[2],Fe),Se(Ue,Fe),Se(ze,Ue),he(Ye,ze,Ue),he(De,Ye,ke),he(De,De,Fe),xe(De,De),he(De,De,ke),he(De,De,Fe),he(De,De,Fe),he(qe[0],De,Fe),Se(ue,qe[0]),he(ue,ue,Fe),ie(ue,ke)&&he(qe[0],qe[0],L),Se(ue,qe[0]),he(ue,ue,Fe),ie(ue,ke)?-1:(G(qe[0])===Oe[31]>>7&&pe(qe[0],T,qe[0]),he(qe[3],qe[0],qe[1]),0)}function Xe(qe,Oe,De,ue){var ke,Fe=new Uint8Array(32),Ue=new Uint8Array(64),ze=[x(),x(),x(),x()],Ye=[x(),x(),x(),x()];if(De<64||Le(Ye,ue))return-1;for(ke=0;ke<De;ke++)qe[ke]=Oe[ke];for(ke=0;ke<32;ke++)qe[ke+32]=ue[ke];if(Pe(Ue,qe,De),be(Ue),Ge(ze,Ye,Ue),nt(Ye,Oe.subarray(32)),He(ze,Ye),Ke(Fe,ze),De-=64,H(Oe,0,Fe,0)){for(ke=0;ke<De;ke++)qe[ke]=0;return-1}for(ke=0;ke<De;ke++)qe[ke]=Oe[ke+64];return De}var Qe=32,et=24,St=32,mt=16,dt=32,jt=32,Ct=32,Rt=32,ur=32,Gt=et,Nt=St,er=mt,Mt=64,kt=32,tr=64,Vt=32,Bt=64;_.lowlevel={crypto_core_hsalsa20:ce,crypto_stream_xor:$e,crypto_stream:ge,crypto_stream_salsa20_xor:Y,crypto_stream_salsa20:fe,crypto_onetimeauth:ae,crypto_onetimeauth_verify:X,crypto_verify_16:q,crypto_verify_32:H,crypto_secretbox:F,crypto_secretbox_open:z,crypto_scalarmult:Ee,crypto_scalarmult_base:ye,crypto_box_beforenm:ve,crypto_box_afternm:Be,crypto_box:Ie,crypto_box_open:Ve,crypto_box_keypair:Ce,crypto_hash:Pe,crypto_sign:Ae,crypto_sign_keypair:ot,crypto_sign_open:Xe,crypto_secretbox_KEYBYTES:Qe,crypto_secretbox_NONCEBYTES:et,crypto_secretbox_ZEROBYTES:St,crypto_secretbox_BOXZEROBYTES:mt,crypto_scalarmult_BYTES:dt,crypto_scalarmult_SCALARBYTES:jt,crypto_box_PUBLICKEYBYTES:Ct,crypto_box_SECRETKEYBYTES:Rt,crypto_box_BEFORENMBYTES:ur,crypto_box_NONCEBYTES:Gt,crypto_box_ZEROBYTES:Nt,crypto_box_BOXZEROBYTES:er,crypto_sign_BYTES:Mt,crypto_sign_PUBLICKEYBYTES:kt,crypto_sign_SECRETKEYBYTES:tr,crypto_sign_SEEDBYTES:Vt,crypto_hash_BYTES:Bt,gf:x,D:I,L:Ze,pack25519:oe,unpack25519:j,M:he,A:ee,S:Se,Z:pe,pow2523:xe,add:He,set25519:J,modL:Re,scalarmult:Ge,scalarbase:nt};function ar(qe,Oe){if(qe.length!==Qe)throw new Error("bad key size");if(Oe.length!==et)throw new Error("bad nonce size")}function qt(qe,Oe){if(qe.length!==Ct)throw new Error("bad public key size");if(Oe.length!==Rt)throw new Error("bad secret key size")}function Tt(){for(var qe=0;qe<arguments.length;qe++)if(!(arguments[qe]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ir(qe){for(var Oe=0;Oe<qe.length;Oe++)qe[Oe]=0}_.randomBytes=function(qe){var Oe=new Uint8Array(qe);return E(Oe,qe),Oe},_.secretbox=function(qe,Oe,De){Tt(qe,Oe,De),ar(De,Oe);for(var ue=new Uint8Array(St+qe.length),ke=new Uint8Array(ue.length),Fe=0;Fe<qe.length;Fe++)ue[Fe+St]=qe[Fe];return F(ke,ue,ue.length,Oe,De),ke.subarray(mt)},_.secretbox.open=function(qe,Oe,De){Tt(qe,Oe,De),ar(De,Oe);for(var ue=new Uint8Array(mt+qe.length),ke=new Uint8Array(ue.length),Fe=0;Fe<qe.length;Fe++)ue[Fe+mt]=qe[Fe];return ue.length<32||z(ke,ue,ue.length,Oe,De)!==0?null:ke.subarray(St)},_.secretbox.keyLength=Qe,_.secretbox.nonceLength=et,_.secretbox.overheadLength=mt,_.scalarMult=function(qe,Oe){if(Tt(qe,Oe),qe.length!==jt)throw new Error("bad n size");if(Oe.length!==dt)throw new Error("bad p size");var De=new Uint8Array(dt);return Ee(De,qe,Oe),De},_.scalarMult.base=function(qe){if(Tt(qe),qe.length!==jt)throw new Error("bad n size");var Oe=new Uint8Array(dt);return ye(Oe,qe),Oe},_.scalarMult.scalarLength=jt,_.scalarMult.groupElementLength=dt,_.box=function(qe,Oe,De,ue){var ke=_.box.before(De,ue);return _.secretbox(qe,Oe,ke)},_.box.before=function(qe,Oe){Tt(qe,Oe),qt(qe,Oe);var De=new Uint8Array(ur);return ve(De,qe,Oe),De},_.box.after=_.secretbox,_.box.open=function(qe,Oe,De,ue){var ke=_.box.before(De,ue);return _.secretbox.open(qe,Oe,ke)},_.box.open.after=_.secretbox.open,_.box.keyPair=function(){var qe=new Uint8Array(Ct),Oe=new Uint8Array(Rt);return Ce(qe,Oe),{publicKey:qe,secretKey:Oe}},_.box.keyPair.fromSecretKey=function(qe){if(Tt(qe),qe.length!==Rt)throw new Error("bad secret key size");var Oe=new Uint8Array(Ct);return ye(Oe,qe),{publicKey:Oe,secretKey:new Uint8Array(qe)}},_.box.publicKeyLength=Ct,_.box.secretKeyLength=Rt,_.box.sharedKeyLength=ur,_.box.nonceLength=Gt,_.box.overheadLength=_.secretbox.overheadLength,_.sign=function(qe,Oe){if(Tt(qe,Oe),Oe.length!==tr)throw new Error("bad secret key size");var De=new Uint8Array(Mt+qe.length);return Ae(De,qe,qe.length,Oe),De},_.sign.open=function(qe,Oe){if(Tt(qe,Oe),Oe.length!==kt)throw new Error("bad public key size");var De=new Uint8Array(qe.length),ue=Xe(De,qe,qe.length,Oe);if(ue<0)return null;for(var ke=new Uint8Array(ue),Fe=0;Fe<ke.length;Fe++)ke[Fe]=De[Fe];return ke},_.sign.detached=function(qe,Oe){for(var De=_.sign(qe,Oe),ue=new Uint8Array(Mt),ke=0;ke<ue.length;ke++)ue[ke]=De[ke];return ue},_.sign.detached.verify=function(qe,Oe,De){if(Tt(qe,Oe,De),Oe.length!==Mt)throw new Error("bad signature size");if(De.length!==kt)throw new Error("bad public key size");var ue=new Uint8Array(Mt+qe.length),ke=new Uint8Array(Mt+qe.length),Fe;for(Fe=0;Fe<Mt;Fe++)ue[Fe]=Oe[Fe];for(Fe=0;Fe<qe.length;Fe++)ue[Fe+Mt]=qe[Fe];return Xe(ke,ue,ue.length,De)>=0},_.sign.keyPair=function(){var qe=new Uint8Array(kt),Oe=new Uint8Array(tr);return ot(qe,Oe),{publicKey:qe,secretKey:Oe}},_.sign.keyPair.fromSecretKey=function(qe){if(Tt(qe),qe.length!==tr)throw new Error("bad secret key size");for(var Oe=new Uint8Array(kt),De=0;De<Oe.length;De++)Oe[De]=qe[32+De];return{publicKey:Oe,secretKey:new Uint8Array(qe)}},_.sign.keyPair.fromSeed=function(qe){if(Tt(qe),qe.length!==Vt)throw new Error("bad seed size");for(var Oe=new Uint8Array(kt),De=new Uint8Array(tr),ue=0;ue<32;ue++)De[ue]=qe[ue];return ot(Oe,De,!0),{publicKey:Oe,secretKey:De}},_.sign.publicKeyLength=kt,_.sign.secretKeyLength=tr,_.sign.seedLength=Vt,_.sign.signatureLength=Mt,_.hash=function(qe){Tt(qe);var Oe=new Uint8Array(Bt);return Pe(Oe,qe,qe.length),Oe},_.hash.hashLength=Bt,_.verify=function(qe,Oe){return Tt(qe,Oe),qe.length===0||Oe.length===0||qe.length!==Oe.length?!1:U(qe,0,Oe,0,qe.length)===0},_.setPRNG=function(qe){E=qe},function(){var qe=typeof self<"u"?self.crypto||self.msCrypto:null;if(qe&&qe.getRandomValues){var Oe=65536;_.setPRNG(function(De,ue){var ke,Fe=new Uint8Array(ue);for(ke=0;ke<ue;ke+=Oe)qe.getRandomValues(Fe.subarray(ke,ke+Math.min(ue-ke,Oe)));for(ke=0;ke<ue;ke++)De[ke]=Fe[ke];ir(Fe)})}else typeof commonjsRequire$1<"u"&&(qe=requireCryptoBrowserify(),qe&&qe.randomBytes&&_.setPRNG(function(De,ue){var ke,Fe=qe.randomBytes(ue);for(ke=0;ke<ue;ke++)De[ke]=Fe[ke];ir(Fe)}))}()})(n.exports?n.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports;const nacl=getDefaultExportFromCjs(naclFastExports);var jsonify={},parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var n,_,x={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},E;function S(L){throw{name:"SyntaxError",message:L,at:n,text:E}}function C(L){return L&&L!==_&&S("Expected '"+L+"' instead of '"+_+"'"),_=E.charAt(n),n+=1,_}function T(){var L,V="";for(_==="-"&&(V="-",C("-"));_>="0"&&_<="9";)V+=_,C();if(_===".")for(V+=".";C()&&_>="0"&&_<="9";)V+=_;if(_==="e"||_==="E")for(V+=_,C(),(_==="-"||_==="+")&&(V+=_,C());_>="0"&&_<="9";)V+=_,C();return L=Number(V),isFinite(L)||S("Bad number"),L}function A(){var L,V,U="",q;if(_==='"')for(;C();){if(_==='"')return C(),U;if(_==="\\")if(C(),_==="u"){for(q=0,V=0;V<4&&(L=parseInt(C(),16),!!isFinite(L));V+=1)q=q*16+L;U+=String.fromCharCode(q)}else if(typeof x[_]=="string")U+=x[_];else break;else U+=_}S("Bad string")}function B(){for(;_&&_<=" ";)C()}function I(){switch(_){case"t":return C("t"),C("r"),C("u"),C("e"),!0;case"f":return C("f"),C("a"),C("l"),C("s"),C("e"),!1;case"n":return C("n"),C("u"),C("l"),C("l"),null;default:S("Unexpected '"+_+"'")}}function M(){var L=[];if(_==="["){if(C("["),B(),_==="]")return C("]"),L;for(;_;){if(L.push(D()),B(),_==="]")return C("]"),L;C(","),B()}}S("Bad array")}function O(){var L,V={};if(_==="{"){if(C("{"),B(),_==="}")return C("}"),V;for(;_;){if(L=A(),B(),C(":"),Object.prototype.hasOwnProperty.call(V,L)&&S('Duplicate key "'+L+'"'),V[L]=D(),B(),_==="}")return C("}"),V;C(","),B()}}S("Bad object")}function D(){switch(B(),_){case"{":return O();case"[":return M();case'"':return A();case"-":return T();default:return _>="0"&&_<="9"?T():I()}}return parse=function(L,V){var U;return E=L,n=0,_=" ",U=D(),B(),_&&S("Syntax error"),typeof V=="function"?function q(H,W){var Q,re,ce=H[W];if(ce&&typeof ce=="object")for(Q in D)Object.prototype.hasOwnProperty.call(ce,Q)&&(re=q(ce,Q),typeof re>"u"?delete ce[Q]:ce[Q]=re);return V.call(H,W,ce)}({"":U},""):U},parse}var stringify$1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify$1;hasRequiredStringify=1;var n=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_,x,E={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},S;function C(A){return n.lastIndex=0,n.test(A)?'"'+A.replace(n,function(B){var I=E[B];return typeof I=="string"?I:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+A+'"'}function T(A,B){var I,M,O,D,L=_,V,U=B[A];switch(U&&typeof U=="object"&&typeof U.toJSON=="function"&&(U=U.toJSON(A)),typeof S=="function"&&(U=S.call(B,A,U)),typeof U){case"string":return C(U);case"number":return isFinite(U)?String(U):"null";case"boolean":case"null":return String(U);case"object":if(!U)return"null";if(_+=x,V=[],Object.prototype.toString.apply(U)==="[object Array]"){for(D=U.length,I=0;I<D;I+=1)V[I]=T(I,U)||"null";return O=V.length===0?"[]":_?`[
`+_+V.join(`,
`+_)+`
`+L+"]":"["+V.join(",")+"]",_=L,O}if(S&&typeof S=="object")for(D=S.length,I=0;I<D;I+=1)M=S[I],typeof M=="string"&&(O=T(M,U),O&&V.push(C(M)+(_?": ":":")+O));else for(M in U)Object.prototype.hasOwnProperty.call(U,M)&&(O=T(M,U),O&&V.push(C(M)+(_?": ":":")+O));return O=V.length===0?"{}":_?`{
`+_+V.join(`,
`+_)+`
`+L+"}":"{"+V.join(",")+"}",_=L,O}}return stringify$1=function(A,B,I){var M;if(_="",x="",typeof I=="number")for(M=0;M<I;M+=1)x+=" ";else typeof I=="string"&&(x=I);if(S=B,B&&typeof B!="function"&&(typeof B!="object"||typeof B.length!="number"))throw new Error("JSON.stringify");return T("",{"":A})},stringify$1}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var json=typeof JSON<"u"?JSON:requireJsonify(),isArray$1=Array.isArray||function(n){return{}.toString.call(n)==="[object Array]"},objectKeys=Object.keys||function(n){var _=Object.prototype.hasOwnProperty||function(){return!0},x=[];for(var E in n)_.call(n,E)&&x.push(E);return x},jsonStableStringify=function(n,_){_||(_={}),typeof _=="function"&&(_={cmp:_});var x=_.space||"";typeof x=="number"&&(x=Array(x+1).join(" "));var E=typeof _.cycles=="boolean"?_.cycles:!1,S=_.replacer||function(A,B){return B},C=_.cmp&&function(A){return function(B){return function(I,M){var O={key:I,value:B[I]},D={key:M,value:B[M]};return A(O,D)}}}(_.cmp),T=[];return function A(B,I,M,O){var D=x?`
`+new Array(O+1).join(x):"",L=x?": ":":";if(M&&M.toJSON&&typeof M.toJSON=="function"&&(M=M.toJSON()),M=S.call(B,I,M),M!==void 0){if(typeof M!="object"||M===null)return json.stringify(M);if(isArray$1(M)){for(var H=[],V=0;V<M.length;V++){var U=A(M,V,M[V],O+1)||json.stringify(null);H.push(D+x+U)}return"["+H.join(",")+D+"]"}if(T.indexOf(M)!==-1){if(E)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else T.push(M);for(var q=objectKeys(M).sort(C&&C(M)),H=[],V=0;V<q.length;V++){var I=q[V],W=A(M,I,M[I],O+1);if(W){var Q=json.stringify(I)+L+W;H.push(D+x+Q)}}return T.splice(T.indexOf(M),1),"{"+H.join(",")+D+"}"}}({"":n},"",n,0)};const stringify=getDefaultExportFromCjs(jsonStableStringify);var nonceLength=nacl.box.nonceLength,newNonce=function n(){return nacl.randomBytes(nonceLength)},keypairToBase64=function n(_){return{publicKey:encode_1$1(_.publicKey),secretKey:encode_1$1(_.secretKey)}},keyToBytes=function n(_,x){x===void 0&&(x="base64");var E=x==="base64"?decode_1$1:encode_1;return typeof _=="string"?E(_):_},utf8=utf8$1,payloadToBytes=function n(_){return typeof _=="string"?utf8.encode(_):ArrayBuffer.isView(_)?_:utf8.encode(stringify(_))};function keyPair(n){var _=n?nacl.box.keyPair.fromSecretKey(keyToBytes(n)):nacl.box.keyPair();return keypairToBase64(_)}function encrypt(n){var _=n.secret,x=n.recipientPublicKey,E=n.senderSecretKey,S=newNonce(),C=payloadToBytes(_),T;if(E===void 0){var A=keyPair();E=A.secretKey,T=A.publicKey}else T=void 0;var B=nacl.box(C,S,keyToBytes(x),keyToBytes(E)),I=browser$1.encode({nonce:S,message:B,senderPublicKey:T});return encode_1$1(I)}function decrypt(n){var _,x=n.cipher,E=n.senderPublicKey,S=n.recipientSecretKey,C=keyToBytes(x),T=browser$1.decode(C),A=T.nonce,B=T.message;E=(_=E)!=null?_:T.senderPublicKey;var I=nacl.box.open(B,A,keyToBytes(E),keyToBytes(S));if(!I)throw new Error("Could not decrypt message");return decode_1(I)}var asymmetric={keyPair,encrypt,decrypt},browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,_=n*60,x=_*60,E=x*24,S=E*7,C=E*365.25;ms=function(M,O){O=O||{};var D=typeof M;if(D==="string"&&M.length>0)return T(M);if(D==="number"&&isFinite(M))return O.long?B(M):A(M);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(M))};function T(M){if(M=String(M),!(M.length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(M);if(O){var D=parseFloat(O[1]),L=(O[2]||"ms").toLowerCase();switch(L){case"years":case"year":case"yrs":case"yr":case"y":return D*C;case"weeks":case"week":case"w":return D*S;case"days":case"day":case"d":return D*E;case"hours":case"hour":case"hrs":case"hr":case"h":return D*x;case"minutes":case"minute":case"mins":case"min":case"m":return D*_;case"seconds":case"second":case"secs":case"sec":case"s":return D*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return D;default:return}}}}function A(M){var O=Math.abs(M);return O>=E?Math.round(M/E)+"d":O>=x?Math.round(M/x)+"h":O>=_?Math.round(M/_)+"m":O>=n?Math.round(M/n)+"s":M+"ms"}function B(M){var O=Math.abs(M);return O>=E?I(M,O,E,"day"):O>=x?I(M,O,x,"hour"):O>=_?I(M,O,_,"minute"):O>=n?I(M,O,n,"second"):M+" ms"}function I(M,O,D,L){var V=O>=D*1.5;return Math.round(M/D)+" "+L+(V?"s":"")}return ms}function setup(n){x.debug=x,x.default=x,x.coerce=B,x.disable=C,x.enable=S,x.enabled=T,x.humanize=requireMs(),x.destroy=I,Object.keys(n).forEach(M=>{x[M]=n[M]}),x.names=[],x.skips=[],x.formatters={};function _(M){let O=0;for(let D=0;D<M.length;D++)O=(O<<5)-O+M.charCodeAt(D),O|=0;return x.colors[Math.abs(O)%x.colors.length]}x.selectColor=_;function x(M){let O,D=null,L,V;function U(...q){if(!U.enabled)return;const H=U,W=Number(new Date),Q=W-(O||W);H.diff=Q,H.prev=O,H.curr=W,O=W,q[0]=x.coerce(q[0]),typeof q[0]!="string"&&q.unshift("%O");let re=0;q[0]=q[0].replace(/%([a-zA-Z%])/g,(ne,Y)=>{if(ne==="%%")return"%";re++;const fe=x.formatters[Y];if(typeof fe=="function"){const ge=q[re];ne=fe.call(H,ge),q.splice(re,1),re--}return ne}),x.formatArgs.call(H,q),(H.log||x.log).apply(H,q)}return U.namespace=M,U.useColors=x.useColors(),U.color=x.selectColor(M),U.extend=E,U.destroy=x.destroy,Object.defineProperty(U,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(L!==x.namespaces&&(L=x.namespaces,V=x.enabled(M)),V),set:q=>{D=q}}),typeof x.init=="function"&&x.init(U),U}function E(M,O){const D=x(this.namespace+(typeof O>"u"?":":O)+M);return D.log=this.log,D}function S(M){x.save(M),x.namespaces=M,x.names=[],x.skips=[];let O;const D=(typeof M=="string"?M:"").split(/[\s,]+/),L=D.length;for(O=0;O<L;O++)D[O]&&(M=D[O].replace(/\*/g,".*?"),M[0]==="-"?x.skips.push(new RegExp("^"+M.slice(1)+"$")):x.names.push(new RegExp("^"+M+"$")))}function C(){const M=[...x.names.map(A),...x.skips.map(A).map(O=>"-"+O)].join(",");return x.enable(""),M}function T(M){if(M[M.length-1]==="*")return!0;let O,D;for(O=0,D=x.skips.length;O<D;O++)if(x.skips[O].test(M))return!1;for(O=0,D=x.names.length;O<D;O++)if(x.names[O].test(M))return!0;return!1}function A(M){return M.toString().substring(2,M.toString().length-2).replace(/\.\*\?$/,"*")}function B(M){return M instanceof Error?M.stack||M.message:M}function I(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return x.enable(x.load()),x}var common=setup;(function(n,_){_.formatArgs=E,_.save=S,_.load=C,_.useColors=x,_.storage=T(),_.destroy=(()=>{let B=!1;return()=>{B||(B=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function x(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function E(B){if(B[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+B[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const I="color: "+this.color;B.splice(1,0,I,"color: inherit");let M=0,O=0;B[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(M++,D==="%c"&&(O=M))}),B.splice(O,0,I)}_.log=console.debug||console.log||(()=>{});function S(B){try{B?_.storage.setItem("debug",B):_.storage.removeItem("debug")}catch{}}function C(){let B;try{B=_.storage.getItem("debug")}catch{}return!B&&typeof browser$1$1<"u"&&"env"in browser$1$1&&(B={}.DEBUG),B}function T(){try{return localStorage}catch{}}n.exports=common(_);const{formatters:A}=n.exports;A.j=function(B){try{return JSON.stringify(B)}catch(I){return"[UnexpectedJSONParseError]: "+I.message}}})(browser,browser.exports);var browserExports=browser.exports;const debug=getDefaultExportFromCjs(browserExports);var src={exports:{}};function memoize(n,_){var x=_&&_.cache?_.cache:cacheDefault,E=_&&_.serializer?_.serializer:serializerDefault,S=_&&_.strategy?_.strategy:strategyDefault;return S(n,{cache:x,serializer:E})}function isPrimitive(n){return n==null||typeof n=="number"||typeof n=="boolean"}function monadic(n,_,x,E){var S=isPrimitive(E)?E:x(E),C=_.get(S);return typeof C>"u"&&(C=n.call(this,E),_.set(S,C)),C}function variadic(n,_,x){var E=Array.prototype.slice.call(arguments,3),S=x(E),C=_.get(S);return typeof C>"u"&&(C=n.apply(this,E),_.set(S,C)),C}function assemble(n,_,x,E,S){return x.bind(_,n,E,S)}function strategyDefault(n,_){var x=n.length===1?monadic:variadic;return assemble(n,this,x,_.cache.create(),_.serializer)}function strategyVariadic(n,_){var x=variadic;return assemble(n,this,x,_.cache.create(),_.serializer)}function strategyMonadic(n,_){var x=monadic;return assemble(n,this,x,_.cache.create(),_.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(n){return n in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(n){return this.cache[n]};ObjectWithoutPrototypeCache.prototype.set=function(n,_){this.cache[n]=_};var cacheDefault={create:function n(){return new ObjectWithoutPrototypeCache}};src.exports=memoize;src.exports.strategies={variadic:strategyVariadic,monadic:strategyMonadic};var _functionsHaveNames;function functionsHaveNames(){return typeof _functionsHaveNames<"u"?_functionsHaveNames:_functionsHaveNames=function(){return function(){}.name==="foo"}()}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(n){if(util$9.isFunction(n)){if(functionsHaveNames())return n.name;var _=n.toString(),x=_.match(regex);return x&&x[1]}}function AssertionError(n){this.name="AssertionError",this.actual=n.actual,this.expected=n.expected,this.operator=n.operator,n.message?(this.message=n.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var _=n.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,_);else{var x=new Error;if(x.stack){var E=x.stack,S=getName(_),C=E.indexOf(`
`+S);if(C>=0){var T=E.indexOf(`
`,C+1);E=E.substring(T+1)}this.stack=E}}}util$9.inherits(AssertionError,Error);function truncate(n,_){return typeof n=="string"?n.length<_?n:n.slice(0,_):n}function inspect(n){if(functionsHaveNames()||!util$9.isFunction(n))return util$9.inspect(n);var _=getName(n),x=_?": "+_:"";return"[Function"+x+"]"}function getMessage(n){return truncate(inspect(n.actual),128)+" "+n.operator+" "+truncate(inspect(n.expected),128)}function fail(n,_,x,E,S){throw new AssertionError({message:x,actual:n,expected:_,operator:E,stackStartFunction:S})}var KeyType;(function(n){n.TEAM="TEAM",n.ROLE="ROLE",n.MEMBER="MEMBER",n.DEVICE="DEVICE",n.EPHEMERAL="EPHEMERAL"})(KeyType||(KeyType={}));var ADMIN="admin";KeyType.TEAM,KeyType.TEAM;KeyType.ROLE;KeyType.EPHEMERAL,KeyType.EPHEMERAL;var BASE30_ALPHABET="abcdefghjkmnpqrsuvwxyz23456789".split("");BASE30_ALPHABET.length;var HashPurpose;(function(n){n.SIGNATURE="SIGNATURE",n.ENCRYPTION="ENCRYPTION",n.SYMMETRIC="SYMMETRIC",n.LINK_TO_PREVIOUS="LINK_TO_PREVIOUS",n.INVITATION="INVITATION",n.DEVICE_ID="DEVICE_ID",n.SHARED_KEY="SHARED_KEY"})(HashPurpose||(HashPurpose={}));HashPurpose.SIGNATURE;HashPurpose.ENCRYPTION;HashPurpose.SYMMETRIC;var _keyset$KeyType=KeyType;_keyset$KeyType.MEMBER;HashPurpose.LINK_TO_PREVIOUS;KeyType.DEVICE;KeyType.ROLE;KeyType.MEMBER;var _after,TIMEOUT_DELAY=7e3;_after={},_after[TIMEOUT_DELAY]={actions:"failTimeout",target:"#failure"};KeyType.DEVICE;class EncryptionLocalFirst{constructor(){$t(this,"clefs");$t(this,"nom","dfaut");const{publicKey:_,secretKey:x}=asymmetric.keyPair();this.clefs={publique:_,secrte:x}}encrypter({message:_,clefPubliqueDestinataire:x}){return asymmetric.encrypt({secret:_,recipientPublicKey:x,senderSecretKey:this.clefs.secrte}).toString()}dcrypter({message:_,clefPubliqueExpditeur:x}){return asymmetric.decrypt({cipher:_,recipientSecretKey:this.clefs.secrte,senderPublicKey:x})}clefAlatoire(){return Math.random().toString()}async obtNom(){return this.nom}async obtClefs(){return this.clefs}}const schmaBdPrincipale$2={type:"object",additionalProperties:{type:"object",properties:{dispositifs:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},dispositifsFichiers:{type:["array","string"],anyOf:[{type:"array",items:{type:"string"},nullable:!0},{type:"string",nullable:!0}],nullable:!0},rcursif:{type:"boolean"}},required:["dispositifs","rcursif"]},required:[]};class Favoris extends ComposanteClientDic{constructor({client:x}){super({client:x,clef:"favoris",schmaBdPrincipale:schmaBdPrincipale$2});$t(this,"_promesseInit");$t(this,"oublierpingler");this._promesseInit=this._pinglerFavoris()}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async _pinglerFavoris(){let x=[];const E=async C=>{const T=[];await Promise.all(Object.entries(C).map(async([B,I])=>{const M=await this.estpinglSurDispositif({dispositifs:I.dispositifs}),O=await this.estpinglSurDispositif({dispositifs:I.dispositifsFichiers});M&&await this.client.pingles.pinglerBd({id:B,rcursif:I.rcursif,fichiers:O}),T.push(B)}));const A=x.filter(B=>!T.includes(B));await Promise.all(A.map(async B=>await this.client.pingles.dspinglerBd({id:B}))),x=T},S=await this.suivreBdPrincipale({f:E});this.oublierpingler=S}async suivreFavoris({f:x,idCompte:E}){const S=async C=>{const T=Object.entries(C).map(([A,B])=>({idObjet:A,...B}));await x(T)};return await this.suivreBdPrincipale({idCompte:E,f:S})}async pinglerFavori({idObjet:x,dispositifs:E="TOUS",dispositifsFichiers:S="INSTALL",rcursif:C=!0}){const{bd:T,fOublier:A}=await this.obtBd(),B={rcursif:C,dispositifs:E};S&&(B.dispositifsFichiers=S),await T.put(x,B),await A()}async dspinglerFavori({idObjet:x}){const{bd:E,fOublier:S}=await this.obtBd();await E.del(x),await S()}async suivretatFavori({idObjet:x,f:E}){return await this.suivreBdPrincipale({f:S=>E(S[x])})}async suivreEstpinglSurDispositif({idObjet:x,f:E,idDispositif:S}){const C=async T=>{const A=await this.estpinglSurDispositif({dispositifs:T?.dispositifs,idDispositif:S}),B=await this.estpinglSurDispositif({dispositifs:T?.dispositifsFichiers,idDispositif:S});return await E({idObjet:x,bd:A,fichiers:B,rcursif:T?.rcursif||!1})};return await this.suivretatFavori({idObjet:x,f:C})}async estpinglSurDispositif({dispositifs:x,idDispositif:E}){return E=E||await this.client.obtIdDispositif(),x===void 0?!1:x==="TOUS"?!0:x==="INSTALL"?E===await this.client.obtIdDispositif()?isNode||isElectronMain:!1:typeof x=="string"?x===E:x.includes(E)}async fermer(){await this._promesseInit,this.oublierpingler&&await this.oublierpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivretatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstpinglSurDispositif",null);const MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3,schmaBdPrincipale$1={type:"string"},schmaStructureBdProjet={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["noms","descriptions","statut","type","bds","copiDe"]};class Projets extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"projets",schmaBdPrincipale:schmaBdPrincipale$1})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreProjets({f:_,idCompte:x}){return await this.suivreBdPrincipale({idCompte:x,f:_})}async crerProjet(){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd()}),E=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdProjet}),A={address:S.access.address};await S.set("type","projet");const B=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await S.set("noms",B);const I=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await S.set("descriptions",I);const M=await this.client.crerBdIndpendante({type:"feed",optionsAccs:A});await S.set("bds",M);const O=await this.client.crerBdIndpendante({type:"feed",optionsAccs:A});return await S.set("motsClefs",O),await S.set("statut",{statut:TYPES_STATUT.ACTIVE}),await _.add(E),await Promise.all([x(),C()]),E}async copierProjet({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet}),S=await this.crerProjet(),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdProjet}),A=x.get("noms");if(A){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),U=ClientConstellation$1.obtObjetdeBdDic({bd:L});await V(),await this.sauvegarderNomsProjet({idProjet:S,noms:U})}const B=x.get("descriptions");if(B){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),U=ClientConstellation$1.obtObjetdeBdDic({bd:L});await V(),await this.sauvegarderDescriptionsProjet({idProjet:S,descriptions:U})}const I=x.get("motsClefs");if(I){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:I}),U=ClientConstellation$1.obtlmentsDeBdListe({bd:L});await V(),await this.ajouterMotsClefsProjet({idProjet:S,idsMotsClefs:U})}const M=x.get("bds");if(M){const{bd:L,fOublier:V}=await this.client.ouvrirBd({id:M}),U=ClientConstellation$1.obtlmentsDeBdListe({bd:L});await V(),await Promise.all(U.map(async q=>{await this.ajouterBdProjet({idProjet:S,idBd:q})}))}const O=x.get("statut")||{statut:TYPES_STATUT.ACTIVE};await C.set("statut",O);const D=x.get("image");return D&&await C.set("image",D),await C.set("copiDe",{id:_}),await Promise.all([E(),T()]),S}async ajouterMesProjets({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd()});await x.add(_),await E()}async enleverDeMesProjets({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd()});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async inviterAuteur({idProjet:_,idCompteAuteur:x,rle:E}){await this.client.donnerAccs({idBd:_,identit:x,rle:E})}async _obtBdNoms({idProjet:_}){const x=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Projet ${_}.`);return await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderNomsProjet({idProjet:_,noms:x}){const{bd:E,fOublier:S}=await this._obtBdNoms({idProjet:_});for(const C in x)await E.set(C,x[C]);await S()}async sauvegarderNomProjet({idProjet:_,langue:x,nom:E}){const{bd:S,fOublier:C}=await this._obtBdNoms({idProjet:_});await S.set(x,E),await C()}async effacerNomProjet({idProjet:_,langue:x}){const{bd:E,fOublier:S}=await this._obtBdNoms({idProjet:_});await E.del(x),await S()}async _obtBdDescr({idProjet:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Projet ${_}.`);return await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderDescriptionsProjet({idProjet:_,descriptions:x}){const{bd:E,fOublier:S}=await this._obtBdDescr({idProjet:_});for(const C in x)await E.set(C,x[C]);await S()}async sauvegarderDescriptionProjet({idProjet:_,langue:x,description:E}){const{bd:S,fOublier:C}=await this._obtBdDescr({idProjet:_});await S.set(x,E),await C()}async effacerDescriptionProjet({idProjet:_,langue:x}){const{bd:E,fOublier:S}=await this._obtBdDescr({idProjet:_});await E.del(x),await S()}async _obtBdMotsClefs({idProjet:_}){const x=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour projet ${_}.`);return await this.client.ouvrirBd({id:x})}async ajouterMotsClefsProjet({idProjet:_,idsMotsClefs:x}){Array.isArray(x)||(x=[x]);const{bd:E,fOublier:S}=await this._obtBdMotsClefs({idProjet:_});await Promise.all(x.map(async C=>{ClientConstellation$1.obtlmentsDeBdListe({bd:E}).includes(C)||await E.add(C)})),await S()}async effacerMotClefProjet({idProjet:_,idMotClef:x}){const{bd:E,fOublier:S}=await this._obtBdMotsClefs({idProjet:_});await this.client.effacerlmentDeBdListe({bd:E,lment:x}),await S()}async _obtBdBds({idProjet:_}){const x=await this.client.obtIdBd({nom:"bds",racine:_,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour Projet ${_}.`);return await this.client.ouvrirBd({id:x})}async ajouterBdProjet({idProjet:_,idBd:x}){const{bd:E,fOublier:S}=await this._obtBdBds({idProjet:_});await E.add(x),await S()}async effacerBdProjet({idProjet:_,idBd:x}){const{bd:E,fOublier:S}=await this._obtBdBds({idProjet:_});await this.client.effacerlmentDeBdListe({bd:E,lment:x}),await S()}async marquerObsolte({idProjet:_,idNouvelle:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});E.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:x}),await S()}async changerStatutProjet({idProjet:_,statut:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});E.set("statut",x),await S()}async marquerActif({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",{statut:TYPES_STATUT.ACTIVE}),await E()}async marquerBta({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",{statut:TYPES_STATUT.BTA}),await E()}async marquerInterne({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",{statut:TYPES_STATUT.INTERNE}),await E()}async sauvegarderImage({idProjet:_,image:x}){let E;if(x.size!==void 0){if(x.size>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excde");E=await x.arrayBuffer()}else E=x;const S=await this.client.ajouterSFIP({fichier:E}),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});await C.set("image",S),await T()}async effacerImage({idProjet:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet});await x.del("image"),await E()}async suivreImage({idProjet:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdProjet,f:async E=>{const S=E.get("image");if(S){const C=await this.client.obtFichierSFIP({id:S,max:MAX_TAILLE_IMAGE_VIS$1});return await x(C)}else return await x(null)}})}async suivreNomsProjet({idProjet:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async suivreDescriptionsProjet({idProjet:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"descriptions",schma:schmaStructureBdNoms,f:x})}async suivreMotsClefsProjet({idProjet:_,f:x}){const E={},S=async()=>{if(E.propres&&E.bds){const O=[...E.propres.map(D=>({idMotClef:D,source:"projet"})),...E.bds.map(D=>({idMotClef:D,source:"bds"}))];return await x(O)}},C=async O=>(E.propres=O,await S()),T=await this.client.suivreBdListeDeClef({id:_,clef:"motsClefs",schma:{type:"string"},f:C}),A=async O=>(E.bds=O,await S()),B=async O=>await this.suivreBdsProjet({idProjet:_,f:O}),I=async(O,D)=>await this.client.bds.suivreMotsClefsBd({idBd:O,f:D}),M=await this.client.suivreBdsDeFonctionListe({fListe:B,f:A,fBranche:I});return async()=>{await T(),await M()}}async suivreBdsProjet({idProjet:_,f:x}){return await this.client.suivreBdListeDeClef({id:_,clef:"bds",schma:{type:"string"},f:x})}async suivreVariablesProjet({idProjet:_,f:x}){const E=async T=>await x(T||[]),S=async(T,A)=>await this.client.bds.suivreVariablesBd({idBd:T,f:A}),C=async({id:T,fSuivreBd:A})=>await this.client.suivreBdsDeBdListe({id:T,f:A,fBranche:S});return await this.client.suivreBdDeClef({id:_,clef:"bds",f:E,fSuivre:C,type:"feed"})}async suivreQualitProjet({idProjet:_,f:x}){const E=async A=>await x(A.length?A.reduce((B,I)=>B+I,0)/A.length:0),S=async A=>await this.suivreBdsProjet({idProjet:_,f:A}),C=async(A,B)=>await this.client.bds.suivreQualitBd({idBd:A,f:I=>B(I.total)}),T=A=>A.flat();return await this.client.suivreBdsDeFonctionListe({fListe:S,f:E,fBranche:C,fRduction:T})}async exporterDonnes({idProjet:_,langues:x,nomFichier:E}){if(!E){const T=await uneFois(B=>this.suivreNomsProjet({idProjet:_,f:B})),A=_.split("/").pop();E=x&&traduire(T,x)||A}const S={docs:[],fichiersSFIP:new Set,nomFichier:E},C=await uneFois(T=>this.suivreBdsProjet({idProjet:_,f:T}));for(const T of C){const{doc:A,fichiersSFIP:B}=await this.client.bds.exporterDonnes({idBd:T,langues:x});let I;const M=T.split("/").pop();if(x){const O=await uneFois(D=>this.client.bds.suivreNomsBd({idBd:T,f:D}));I=traduire(O,x)||M}else I=M;S.docs.push({doc:A,nom:I});for(const O of B)S.fichiersSFIP.add(O)}return S}async exporterDocumentDonnes({donnes:_,formatDoc:x,dossier:E="",inclureFichiersSFIP:S=!0}){const{docs:C,fichiersSFIP:T,nomFichier:A}=_,I={xls:"biff8"}[x]||x,M=C.map(D=>({nom:`${D.nom}.${x}`,octets:writeSync(D.doc,{bookType:I,type:"buffer"})})),O=S?await Promise.all([...T].map(async D=>({nom:`${D.cid}.${D.ext}`,octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:D.cid}))}))):[];await zipper(M,O,path.join(E,A))}async effacerProjet({idProjet:_}){await this.enleverDeMesProjets({idProjet:_});for(const x in["noms","descriptions","motsClefs","bds"]){const E=await this.client.obtIdBd({nom:x,racine:_});E&&await this.client.effacerBd({id:E})}await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescriptionsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitProjet",null);const schmaBdPrincipale={type:"string"},schmaBdMotClef={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class MotsClefs extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"motsClefs",schmaBdPrincipale})}async pingler(){const _=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:_,rcursif:!1,fichiers:!1})}async suivreMotsClefs({f:_,idCompte:x}){return await this.suivreBdPrincipale({idCompte:x,f:_})}async crerMotClef(){const _=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterMesMotsClefs({idMotClef:_});const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"kvstore",schma:schmaBdMotClef}),C={address:x.access.address};await x.set("type","motClef");const T=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:C});await x.set("noms",T);const A=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:C});return await x.set("descriptions",A),await E(),_}async ajouterMesMotsClefs({idMotClef:_}){const{bd:x,fOublier:E}=await this.obtBd();await x.add(_),await E()}async enleverDeMesMotsClefs({idMotClef:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async copierMotClef({idMotClef:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaBdMotClef}),S=await this.crerMotClef(),C=x.get("noms");if(C){const{bd:A,fOublier:B}=await this.client.ouvrirBd({id:C,type:"keyvalue"}),I=ClientConstellation$1.obtObjetdeBdDic({bd:A});await this.sauvegarderNomsMotClef({idMotClef:S,noms:I}),await B()}const T=x.get("descriptions");if(T){const{bd:A,fOublier:B}=await this.client.ouvrirBd({id:T,type:"keyvalue"}),I=ClientConstellation$1.obtObjetdeBdDic({bd:A});await this.sauvegarderDescriptionsMotClef({idMotClef:S,descriptions:I}),await B()}return await E(),S}async inviterAuteur({idMotClef:_,idCompteAuteur:x,rle:E}){await this.client.donnerAccs({idBd:_,identit:x,rle:E})}async sauvegarderNomsMotClef({idMotClef:_,noms:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderNomMotClef({idMotClef:_,langue:x,nom:E}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"});await C.set(x,E),await T()}async effacerNomMotClef({idMotClef:_,langue:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.del(x),await C()}async suivreNomsMotClef({idMotClef:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async sauvegarderDescriptionsMotClef({idMotClef:_,descriptions:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderDescriptionMotClef({idMotClef:_,langue:x,description:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"});await C.set(x,E),await T()}async effacerDescriptionMotClef({id:_,langue:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.del(x),await C()}async suivreDescriptionsMotClef({idMotClef:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"descriptions",schma:schmaStructureBdNoms,f:x})}async effacerMotClef({idMotClef:_}){await this.enleverDeMesMotsClefs({idMotClef:_});for(const x in["noms"]){const E=await this.client.obtIdBd({nom:x,racine:_});E&&await this.client.effacerBd({id:E})}await this.client.effacerBd({id:_})}async suivreQualitMotClef({idMotClef:_,f:x}){return await this.suivreNomsMotClef({idMotClef:_,f:E=>x(Object.keys(E).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreDescriptionsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitMotClef",null);const MAX_TAILLE_IMAGE=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3,schmaBdAutorisations={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdNue={type:"object",properties:{type:{type:"string",nullable:!0},mtadonnes:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiDe:{type:"string",nullable:!0}},required:[]},schmaStructureBdAuthorisation={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},schmaBdMotsClefsNue={type:"string"};class Nue extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"nues",schmaBdPrincipale:{type:"string"}})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async crerNue({nueParent:_,autorisation:x="IJPC",ajouter:E=!0}){const S=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});E&&await this.ajouterMesNues({idNue:S});const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdNue}),B={address:C.access.address};await C.set("type","nue");let I;if(OrbitDB.isValidAddress(x))I=x;else if(x==="CJPI"||x==="IJPC")I=await this.gnrerGestionnaireAutorisations({philosophie:x});else throw new Error(`Autorisation non valide : ${x}`);await C.set("autorisation",I),x==="CJPI"&&await this.accepterMembreNue({idNue:S,idCompte:await this.client.obtIdCompte()});const M=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await C.set("noms",M);const O=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await C.set("descriptions",O);const D=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await C.set("tableaux",D);const L=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await C.set("mtadonnes",L);const V=await this.client.crerBdIndpendante({type:"feed",optionsAccs:B});return await C.set("motsClefs",V),await C.set("statut",{statut:TYPES_STATUT.ACTIVE}),_&&await C.set("parent",_),T(),S}async ajouterMesNues({idNue:_}){const{bd:x,fOublier:E}=await this.obtBd();await x.add(_),await E()}async enleverDeMesNues({idNue:_}){const{bd:x,fOublier:E}=await this.obtBd();await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async copierNue({idNue:_,ajouterMesNues:x=!0}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdNue}),C=E.get("parent"),T=await this.crerNue({nueParent:C,ajouter:x}),{bd:A,fOublier:B}=await this.client.ouvrirBd({id:T,type:"keyvalue",schma:schmaStructureBdNue}),I=E.get("mtadonnes");if(I){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:I,type:"kvstore",schma:schmaStructureBdNoms}),Q=ClientConstellation$1.obtObjetdeBdDic({bd:H});await W(),await this.sauvegarderMtadonnesNue({idNue:T,mtadonnes:Q})}const M=E.get("noms");if(M){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:M,type:"kvstore",schma:schmaStructureBdNoms}),Q=ClientConstellation$1.obtObjetdeBdDic({bd:H});await W(),await this.sauvegarderNomsNue({idNue:T,noms:Q})}const O=E.get("descriptions");if(O){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:O,type:"kvstore",schma:schmaStructureBdNoms}),Q=ClientConstellation$1.obtObjetdeBdDic({bd:H});await W(),await this.sauvegarderDescriptionsNue({idNue:T,descriptions:Q})}const D=E.get("motsClefs");if(D){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:D,type:"feed",schma:schmaBdMotsClefsNue}),Q=ClientConstellation$1.obtlmentsDeBdListe({bd:H});await W(),await this.ajouterMotsClefsNue({idNue:T,idsMotsClefs:Q})}const L=E.get("tableaux"),V=A.get("tableaux");if(!V)throw new Error("Erreur initialisation.");if(L){const{bd:H,fOublier:W}=await this.client.ouvrirBd({id:V,type:"keyvalue",schma:schmaBdTableauxDeBd}),{bd:Q,fOublier:re}=await this.client.ouvrirBd({id:L,type:"keyvalue",schma:schmaBdTableauxDeBd}),ce=ClientConstellation$1.obtObjetdeBdDic({bd:Q});await re();for(const ne of Object.keys(ce)){const Y=await this.client.tableaux.copierTableau({id:ne,idBd:T,copierDonnes:!1});await H.set(Y,ce[ne])}await W()}const U=E.get("statut")||{statut:TYPES_STATUT.ACTIVE};await A.set("statut",U);const q=E.get("image");return q&&await A.set("image",q),await A.set("copiDe",_),await Promise.all([S(),B()]),T}async suivreNues({f:_,idCompte:x}){return await this.suivreBdPrincipale({f:_,idCompte:x})}async suivreDeParents({idNue:_,f:x,fParents:E}){return await this.client.suivreBdsDeFonctionListe({fListe:async S=>await this.suivreNuesParents({idNue:_,f:C=>S([_,...C].reverse())}),f:x,fBranche:E,fRduction:S=>S})}async sauvegarderMtadonneNue({idNue:_,clef:x,valeur:E}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async sauvegarderMtadonnesNue({idNue:_,mtadonnes:x}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});for(const T in x)await S.set(T,x[T]);await C()}async effacerMtadonneNue({idNue:_,clef:x}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdMtadonnes});await S.del(x),await C()}async suivreMtadonnesNue({idNue:_,f:x}){const E=async S=>{await x(Object.assign({},...S))};return await this.suivreDeParents({idNue:_,f:E,fParents:async(S,C)=>await this.client.suivreBdDicDeClef({id:S,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:C})})}async sauvegarderNomNue({idNue:_,langue:x,nom:E}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async sauvegarderNomsNue({idNue:_,noms:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});for(const T in x)await S.set(T,x[T]);await C()}async effacerNomNue({idNue:_,langue:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});await S.del(x),await C()}async suivreNomsNue({idNue:_,f:x}){const E=async S=>{await x(Object.assign({},...S))};return await this.suivreDeParents({idNue:_,f:E,fParents:async(S,C)=>await this.client.suivreBdDicDeClef({id:S,clef:"noms",schma:schmaStructureBdNoms,f:C})})}async sauvegarderDescriptionNue({idNue:_,langue:x,description:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async sauvegarderDescriptionsNue({idNue:_,descriptions:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});for(const T in x)await S.set(T,x[T]);await C()}async effacerDescriptionNue({idNue:_,langue:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore",schma:schmaStructureBdNoms});await S.del(x),await C()}async suivreDescriptionsNue({idNue:_,f:x}){const E=async S=>{await x(Object.assign({},...S))};return await this.suivreDeParents({idNue:_,f:E,fParents:async(S,C)=>await this.client.suivreBdDicDeClef({id:S,clef:"descriptions",schma:schmaStructureBdNoms,f:C})})}async sauvegarderImage({idNue:_,image:x}){let E;if(x.size!==void 0){if(x.size>MAX_TAILLE_IMAGE)throw new Error("Taille maximale excde");E=await x.arrayBuffer()}else E=x;const S=await this.client.ajouterSFIP({fichier:E}),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:_,type:"keyvalue"});await C.set("image",S),await T()}async effacerImage({idNue:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"kvstore"});await x.del("image"),await E()}async suivreImage({idNue:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdNue,f:async E=>{const S=E.get("image");if(!S)await x(null);else{const C=await this.client.obtFichierSFIP({id:S,max:MAX_TAILLE_IMAGE_VIS});await x(C)}}})}async ajouterMotsClefsNue({idNue:_,idsMotsClefs:x}){Array.isArray(x)||(x=[x]);const E=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaBdMotsClefsNue});for(const T of x)ClientConstellation$1.obtlmentsDeBdListe({bd:S}).includes(T)||await S.add(T);await C()}async effacerMotClefNue({idNue:_,idMotClef:x}){const E=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaBdMotsClefsNue});await this.client.effacerlmentDeBdListe({bd:S,lment:x}),await C()}async suivreMotsClefsNue({idNue:_,f:x}){const E=async S=>{await x([...new Set(S.flat())])};return await this.suivreDeParents({idNue:_,f:E,fParents:async(S,C)=>await this.client.suivreBdListeDeClef({id:S,clef:"motsClefs",schma:{type:"string"},f:C})})}async changerStatutNue({idNue:_,statut:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});E.set("statut",x),await S()}async suivreStatutNue({idNue:_,f:x}){return await this.client.suivreBdDic({id:_,f:async E=>{if(E.statut)return await x(E.statut)}})}async marquerObsolte({idNue:_,idNouvelle:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});E.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:x}),await S()}async marquerActive({idNue:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.ACTIVE}),await E()}async marquerBta({idNue:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.BTA}),await E()}async marquerInterne({idNue:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.INTERNE}),await E()}async inviterAuteur({idNue:_,idCompteAuteur:x,rle:E}){await this.client.donnerAccs({idBd:_,identit:x,rle:E})}async gnrerGestionnaireAutorisations({philosophie:_="IJPC"}){const x=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdAuthorisation});await E.set("philosophie",_);const T={address:E.access.address},A=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:T});return await E.set("membres",A),S(),x}async changerPhisolophieAutorisation({idAutorisation:_,philosophie:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdAuthorisation});await E.set("philosophie",x),S()}async suivrePhilosophieAutorisation({idNue:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>await this.suivreGestionnaireAutorisations({idNue:_,f:T}),f:async T=>{if(!T)return;const A=T.get("philosophie");A&&["IJPC","CJPI"].includes(A)&&await x(A)},fSuivre:async({id:T,fSuivreBd:A})=>await this.client.suivreBd({id:T,type:"keyvalue",schma:schmaStructureBdAuthorisation,f:A})})}async accepterMembreAutorisation({idAutorisation:_,idCompte:x}){const E=await this.client.obtIdBd({nom:"membres",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaBdAutorisations});await S.set(x,"accept"),C()}async accepterMembreNue({idNue:_,idCompte:x}){const E=await this.obtGestionnaireAutorisationsDeNue({idNue:_});return await this.accepterMembreAutorisation({idAutorisation:E,idCompte:x})}async exclureMembreAutorisation({idAutorisation:_,idCompte:x}){const E=await this.client.obtIdBd({nom:"membres",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaBdAutorisations});await S.set(x,"exclus"),C()}async exclureMembreDeNue({idNue:_,idCompte:x}){const E=await this.obtGestionnaireAutorisationsDeNue({idNue:_});return await this.exclureMembreAutorisation({idAutorisation:E,idCompte:x})}async suivreGestionnaireAutorisations({idNue:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdNue,f:async E=>{const S=E.get("autorisation");await x(S)}})}async changerGestionnaireAutorisations({idNue:_,idAutorisation:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdNue});await E.set("autorisation",x),S()}async obtGestionnaireAutorisationsDeNue({idNue:_}){return await uneFois(async x=>await this.suivreGestionnaireAutorisations({idNue:_,f:ignorerNonDfinis(x)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:_,f:x}){const E=async S=>{const C=Object.entries(S).map(([T,A])=>({idCompte:T,statut:A}));await x(C)};return await this.client.suivreBdDicDeClef({id:_,clef:"membres",schma:schmaBdAutorisations,f:E})}async suivreAutorisationsMembresDeNue({idNue:_,f:x}){const E=async({fSuivreRacine:C})=>await this.suivreGestionnaireAutorisations({idNue:_,f:C}),S=async({id:C,fSuivreBd:T})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:C,f:T});return await suivreBdDeFonction({fRacine:E,f:ignorerNonDfinis(x),fSuivre:S})}async ajouterTableauNue({idNue:_,clefTableau:x}){const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});x=x||v4();const T=await this.client.tableaux.crerTableau({idBd:_});return await S.set(T,{position:Object.keys(S.all).length,clef:x}),await C(),T}async effacerTableauNue({idNue:_,idTableau:x}){const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.del(x),await C(),await this.client.tableaux.effacerTableau({idTableau:x})}async suivreTableauxNue({idNue:_,f:x}){const E=async C=>{await x(C.flat())},S=async(C,T)=>{const A=B=>{const I=Object.entries(B).map(([M,O])=>({id:M,...O}));T(I)};return await this.client.suivreBdDicDeClef({id:C,clef:"tableaux",schma:schmaBdTableauxDeBd,f:A})};return await this.suivreDeParents({idNue:_,f:E,fParents:S})}async ajouterNomsTableauNue({idTableau:_,noms:x}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:_,noms:x})}async effacerNomsTableauNue({idTableau:_,langue:x}){return await this.client.tableaux.effacerNomTableau({idTableau:_,langue:x})}async suivreNomsTableauNue({idNue:_,clefTableau:x,f:E}){const S=async T=>{await E(Object.assign({},...T))},C=async(T,A)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:T,clef:x,f:B}),f:ignorerNonDfinis(A),fSuivre:async({id:B,fSuivreBd:I})=>await this.client.tableaux.suivreNomsTableau({idTableau:B,f:I})});return await this.suivreDeParents({idNue:_,f:S,fParents:C})}async ajouterColonneTableauNue({idTableau:_,idVariable:x,idColonne:E,index:S}){const C=await this.client.tableaux.ajouterColonneTableau({idTableau:_,idVariable:x,idColonne:E});return S&&await this.changerColIndexTableauNue({idTableau:_,idColonne:C,val:!0}),C}async effacerColonneTableauNue({idTableau:_,idColonne:x}){return await this.client.tableaux.effacerColonneTableau({idTableau:_,idColonne:x})}async changerColIndexTableauNue({idTableau:_,idColonne:x,val:E}){return await this.client.tableaux.changerColIndex({idTableau:_,idColonne:x,val:E})}async suivreColonnesTableauNue({idNue:_,clefTableau:x,f:E,catgories:S=!0}){const C=async A=>{await E(A.flat())},T=async(A,B)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:I})=>await this.client.bds.suivreIdTableauParClef({idBd:A,clef:x,f:I}),f:ignorerNonDfinis(B),fSuivre:async({id:I,fSuivreBd:M})=>await this.client.tableaux.suivreColonnesTableau({idTableau:I,f:M,catgories:S})});return await this.suivreDeParents({idNue:_,f:C,fParents:T})}async ajouterRgleTableauNue({idTableau:_,idColonne:x,rgle:E}){return await this.client.tableaux.ajouterRgleTableau({idTableau:_,idColonne:x,rgle:E})}async effacerRgleTableauNue({idTableau:_,idRgle:x}){return await this.client.tableaux.effacerRgleTableau({idTableau:_,idRgle:x})}async suivreRglesTableauNue({idNue:_,clefTableau:x,f:E}){const S=async T=>{await E(T.flat())},C=async(T,A)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:T,clef:x,f:B}),f:ignorerNonDfinis(A),fSuivre:async({id:B,fSuivreBd:I})=>await this.client.tableaux.suivreRgles({idTableau:B,f:I})});return await this.suivreDeParents({idNue:_,f:S,fParents:C})}async suivreVariablesNue({idNue:_,f:x}){const E=async T=>await x(T||[]),S=async(T,A)=>await this.client.tableaux.suivreVariables({idTableau:T,f:A}),C=async T=>await this.suivreTableauxNue({idNue:_,f:A=>T(A.map(B=>B.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:E,fBranche:S})}async suivreQualitNue({idNue:_,f:x}){const E={noms:{},descr:{}},S=async()=>{const B=[Object.keys(E.noms).length?1:0,Object.keys(E.descr).length?1:0],I=B.reduce((M,O)=>M+O,0)/B.length;await x(I)},C=await this.suivreNomsNue({idNue:_,f:B=>{E.noms=B,S()}}),T=await this.suivreDescriptionsNue({idNue:_,f:B=>{E.descr=B,S()}});return async()=>{await C(),await T()}}async suivreDiffrencesNueEtTableau({idNue:_,clefTableau:x,idTableau:E,f:S,stricte:C=!0}){const T=async I=>{const M=I.filter(O=>C||O.svre);await S(M)},A=async({fSuivreRacine:I})=>await this.client.bds.suivreIdTableauParClef({idBd:_,clef:x,f:I}),B=async({id:I,fSuivreBd:M})=>await this.client.tableaux.suivreDiffrencesAvecTableau({idTableau:E,idTableauRf:I,f:M});return await suivreBdDeFonction({fRacine:A,f:ignorerNonDfinis(T),fSuivre:B})}async suivreDiffrencesNueEtBd({idNue:_,idBd:x,f:E}){const S={},C=async()=>{const B=[];if(S.tableauxNue&&S.tableauxBd){for(const I of S.tableauxNue)if(!S.tableauxNue.find(O=>O.clef===I.clef)){const O={type:"tableauManquant",svre:!0,clefManquante:I.clef};B.push(O)}for(const I of S.tableauxBd)if(!S.tableauxNue.find(O=>O.clef===I.clef)){const O={type:"tableauSupplmentaire",svre:!1,clefExtra:I.clef};B.push(O)}}await E(B)},T=await this.client.bds.suivreTableauxBd({idBd:x,f:B=>{S.tableauxBd=B,C()}}),A=await this.suivreTableauxNue({idNue:_,f:B=>{S.tableauxNue=B,C()}});return async()=>{await T(),await A()}}async suivreCorrespondanceBd({idBd:_,f:x}){const E=async C=>await this.client.bds.suivreNuesBd({idBd:_,f:C}),S=async(C,T)=>{const A={diffrencesBds:[],diffrencesTableaux:[]},B=async()=>{T([...A.diffrencesBds,...A.diffrencesTableaux])},I=await this.suivreDiffrencesNueEtBd({idNue:C,idBd:_,f:async D=>{A.diffrencesBds=D,await B()}}),M=async(D,L,V)=>await this.suivreDiffrencesNueEtTableau({idNue:C,clefTableau:V.clef,idTableau:D,f:async U=>{await L(U.map(q=>({type:"tableau",svre:q.svre,idTableau:D,diffrence:q})))}}),O=await this.client.suivreBdsDeFonctionListe({fListe:async D=>await this.client.bds.suivreTableauxBd({idBd:_,f:D}),f:async D=>{A.diffrencesTableaux=D,await B()},fBranche:M,fCode:D=>D.id,fIdBdDeBranche:D=>D.id});return async()=>{await Promise.all([I,O])}};return await this.client.suivreBdsDeFonctionListe({fListe:E,f:x,fBranche:S})}async rechercherNuesDscendantes({idNue:_,f:x,nRsultatsDsirs:E}){const S=async C=>{x(C.map(T=>T.id))};return await this.client.rseau.rechercherNues({f:S,fObjectif:async(C,T,A)=>await C.nues.suivreNuesParents({idNue:T,f:B=>{A({type:"rsultat",score:B.includes(_)?1:0,de:"*",info:{type:"vide"}})}}),nRsultatsDsirs:E})}async suivreNuesParents({idNue:_,f:x}){const E=async({id:S,anctres:C=[]})=>{let T,A;const B=await this.client.suivreBd({id:S,type:"keyvalue",schma:schmaStructureBdNue,f:async I=>{const M=I.get("parent");C=[...C],M&&C.push(M),await x(C),M?M!==A&&(T&&await T(),C.includes(M)||(T=await E({id:M,anctres:C})),A=M):(T&&await T(),T=void 0)}});return async()=>{await B(),T&&await T()}};return await E({id:_})}async suivreBdsCorrespondantes({idNue:_,f:x,vrifierAutorisation:E=!0,nRsultatsDsirs:S,toujoursInclureLesMiennes:C=!0}){if(E){const T={},A=async()=>{const{philoAutorisation:q,membres:H,bds:W}=T;if(!W)return;if(!q)return C?await x(W.filter(ce=>ce.auteurs.some(ne=>ne===this.client.idCompte)).map(ce=>ce.idBd)):void 0;if(!H)return;const Q=await this.client.obtIdCompte();return await x((ce=>{if(q==="CJPI"){const ne=H.filter(Y=>Y.statut==="accept").map(Y=>Y.idCompte);return ce.filter(Y=>Y.auteurs.some(fe=>ne.includes(fe))||C&&Y.auteurs.includes(Q)).map(Y=>Y.idBd)}else if(q==="IJPC"){const ne=H.filter(Y=>Y.statut==="exclus").map(Y=>Y.idCompte);return ce.filter(Y=>!Y.auteurs.some(fe=>ne.includes(fe))).map(Y=>Y.idBd)}else throw new Error(q)})(W))},B=await this.suivrePhilosophieAutorisation({idNue:_,f:async q=>{T.philoAutorisation=q,await A()}}),I=await this.suivreAutorisationsMembresDeNue({idNue:_,f:async q=>{T.membres=q,await A()}}),M=async q=>{T.bds=q,await A()},O=async q=>await this.client.rseau.suivreBdsDeNue({idNue:_,f:q,nRsultatsDsirs:S}),D=async(q,H)=>{const W=async Q=>await H({idBd:q,auteurs:Q.filter(re=>re.accept).map(re=>re.idCompte)});return await this.client.rseau.suivreAuteursBd({idBd:q,f:W})},{fOublier:L,fChangerProfondeur:V}=await this.client.suivreBdsDeFonctionListe({fListe:O,f:M,fBranche:D});return{fOublier:async()=>{await Promise.all([L,I,B].map(q=>q()))},fChangerProfondeur:V}}else return await this.client.rseau.suivreBdsDeNue({idNue:_,f:x,nRsultatsDsirs:S})}async suivreEmpreinteTtesBdsNue({idNue:_,f:x}){return await this.client.suivreBdsDeFonctionListe({fListe:async E=>{const{fOublier:S}=await this.suivreBdsCorrespondantes({idNue:_,f:E,nRsultatsDsirs:1e3});return S},f:async E=>{const S=Base64.stringify(md5(E.join(":")));return await x(S)},fBranche:async(E,S)=>await this.client.suivreEmpreinteTtesBdRcursive({idBd:E,f:S})})}async suivreDonnesTableauNue({idNue:_,clefTableau:x,f:E,nRsultatsDsirs:S,ignorerErreursFormatBd:C=!0,ignorerErreursFormatTableau:T=!1,ignorerErreursDonnesTableau:A=!0,licencesPermises:B=void 0,toujoursInclureLesMiennes:I=!0,clefsSelonVariables:M=!1}){const O=async U=>{const q=U.flat();await E(q)},D=async U=>await this.suivreBdsCorrespondantes({idNue:_,f:U,nRsultatsDsirs:S,toujoursInclureLesMiennes:I}),L=async U=>{const q=async(H,W)=>{const Q={licence:!1,formatBd:!0},re=[],ce=async()=>{const ne=Object.values(Q).every(Y=>Y);await W(ne)};if(B){const ne=await this.client.bds.suivreLicenceBd({idBd:H,f:async Y=>(Q.licence=B.includes(Y),await ce())});re.push(ne)}else Q.licence=!0;if(C)Q.formatBd=!0;else{const ne=await this.suivreDiffrencesNueEtBd({idBd:H,idNue:_,f:async Y=>(Q.formatBd=!Y.length,await ce())});re.push(ne)}return await ce(),async()=>{await Promise.all(re.map(ne=>ne()))}};return await this.client.suivreBdsSelonCondition({fListe:D,fCondition:q,f:U})},V=async(U,q)=>{const H={},W=async()=>{const{donnes:ne,erreurslments:Y,auteurs:fe}=H;if(ne&&Y&&fe&&fe.length){const ge=fe.find(_e=>_e.accept)?.idCompte;if(!ge)return;const $e=ne.map(_e=>({idCompte:ge,lment:_e,valid:Y.filter(ae=>ae.empreinte==_e.empreinte)})).filter(_e=>A||!_e.valid.length);await q($e)}},re=await suivreBdDeFonction({fRacine:async({fSuivreRacine:ne})=>await this.client.suivreBdSelonCondition({fRacine:async Y=>await this.client.bds.suivreIdTableauParClef({idBd:U,clef:x,f:ignorerNonDfinis(Y)}),fCondition:async(Y,fe)=>T?(await fe(!0),faisRien):(await fe(!0),await this.suivreDiffrencesNueEtTableau({idNue:_,clefTableau:x,idTableau:Y,f:async ge=>await fe(!ge.length),stricte:!1})),f:ne}),f:async ne=>{H.donnes=ne?.donnes,H.erreurslments=ne?.erreurs,await W()},fSuivre:async({id:ne,fSuivreBd:Y})=>{const fe={},ge=[],$e=async()=>{const{donnes:X,erreurs:F}=fe;X&&F&&await Y({donnes:X,erreurs:F})},_e=await this.client.tableaux.suivreDonnes({idTableau:ne,f:async X=>{fe.donnes=X,await $e()},clefsSelonVariables:M});ge.push(_e);const ae=await this.client.tableaux.suivreValidDonnes({idTableau:ne,f:async X=>{fe.erreurs=X,await $e()}});return ge.push(ae),async()=>{await Promise.all(ge.map(X=>X()))}}}),ce=await this.client.rseau.suivreAuteursBd({idBd:U,f:async ne=>{H.auteurs=ne,await W()}});return async()=>{await Promise.all([re,ce])}};return await this.client.suivreBdsDeFonctionListe({fListe:L,f:O,fBranche:V})}async exporterDonnesNue({idNue:_,langues:x,nomFichier:E,nRsultatsDsirs:S}){const C=utils$1.book_new(),T=new Set,A=await uneFois(B=>this.suivreTableauxNue({idNue:_,f:B}));for(const B of A){const{clef:I,id:M}=B;let O;const D=M.split("/").pop();if(x){const H=await uneFois(W=>this.suivreNomsTableauNue({idNue:_,clefTableau:I,f:W}));O=traduire(H,x)||D}else O=D;const L=await uneFois(async H=>{const{fOublier:W}=await this.suivreDonnesTableauNue({idNue:_,clefTableau:I,f:H,nRsultatsDsirs:S,clefsSelonVariables:!1});return W}),V=await uneFois(async H=>await this.suivreColonnesTableauNue({idNue:_,clefTableau:I,f:H}));let U=await Promise.all(L.map(async H=>({...await this.client.tableaux.formaterlment({:H.lment.donnes,colonnes:V,fichiersSFIP:T,langues:x}),auteur:H.idCompte})));if(x){const H=await uneFois(Q=>this.suivreVariablesNue({idNue:_,f:Q})),W={auteur:"auteur"};for(const Q of H){const re=await uneFois(ne=>this.client.variables.suivreNomsVariable({idVariable:Q,f:ne})),ce=V.find(ne=>ne.variable===Q)?.id;W[Q]=traduire(re,x)||ce||Q}U=U.map(Q=>Object.keys(Q).reduce((re,ce)=>{const ne=W[ce];return re[ne]=Q[ce],re},{}))}const q=utils$1.json_to_sheet(U);utils$1.book_append_sheet(C,q,O.slice(0,30))}if(!E){const B=await uneFois(M=>this.suivreNomsNue({idNue:_,f:M})),I=_.split("/").pop();E=x&&traduire(B,x)||I}return{doc:C,fichiersSFIP:T,nomFichier:E}}async gnrerDeBd({idBd:_}){const x=await this.crerNue({}),E=await uneFois(async A=>await this.client.bds.suivreNomsBd({idBd:_,f:A}));await this.sauvegarderNomsNue({idNue:x,noms:E});const S=await uneFois(async A=>await this.client.bds.suivreDescriptionsBd({idBd:_,f:A}));await this.sauvegarderDescriptionsNue({idNue:x,descriptions:S});const C=await uneFois(async A=>await this.client.bds.suivreMotsClefsBd({idBd:_,f:A}));await this.ajouterMotsClefsNue({idNue:x,idsMotsClefs:C});const T=await uneFois(async A=>await this.client.bds.suivreTableauxBd({idBd:_,f:A}));for(const A of T){const B=A.id,I=await this.ajouterTableauNue({idNue:x,clefTableau:A.clef}),M=await uneFois(async O=>await this.client.tableaux.suivreColonnesTableau({idTableau:B,f:O,catgories:!1}));for(const O of M){await this.ajouterColonneTableauNue({idTableau:I,idVariable:O.variable,idColonne:O.id,index:O.index}),await this.changerColIndexTableauNue({idTableau:I,idColonne:O.id,val:!!O.index});const D=await uneFois(async L=>await this.client.tableaux.suivreRgles({idTableau:B,f:L}));for(const L of D)L.source.type==="tableau"&&await this.ajouterRgleTableauNue({idTableau:I,idColonne:O.id,rgle:L.rgle.rgle})}}return x}async gnrerSchmaBdNue({idNue:_,licence:x}){const E=await uneFois(async A=>await this.suivreTableauxNue({idNue:_,f:A})),S={};for(const A of E)S[A.clef]=await uneFois(async B=>await this.suivreRglesTableauNue({idNue:_,clefTableau:A.clef,f:B}));const C=async A=>await uneFois(async B=>await this.suivreColonnesTableauNue({idNue:_,clefTableau:A.clef,f:B}),B=>!!B&&!!B.length);return{licence:x,nues:[_],tableaux:await Promise.all(E.map(async A=>({cols:(await C(A)).map(I=>{const M=S[A.clef]?.some(O=>O.colonne===I.id&&O.rgle.rgle.typeRgle==="existe");return{idColonne:I.id,idVariable:I.variable,index:I.index,optionnel:!M}}),clef:A.clef})))}}async effacerNue({idNue:_}){const{bd:x,fOublier:E}=await this.obtBd();await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E();for(const C in["noms","descriptions","motsClefs"]){const T=await this.client.obtIdBd({nom:C,racine:_});T&&await this.client.effacerBd({id:T})}const S=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(S){const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S}),A=Object.keys(C.all);for(const B of A)await this.client.tableaux.effacerTableau({idTableau:B});T(),await this.client.effacerBd({id:S})}await this.enleverDeMesNues({idNue:_}),await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],Nue.prototype,"suivreDescriptionsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreImage",null);__decorate([cacheSuivi],Nue.prototype,"suivreMotsClefsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreNomsTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreColonnesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreRglesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreQualitNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtTableau",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtBd",null);__decorate([cacheSuivi],Nue.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"rechercherNuesDscendantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreNuesParents",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreEmpreinteTtesBdsNue",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreDonnesTableauNue",null);const rechercherVariablesSelonNom=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,de:"nom",clef:I,info:M})}else return await E()};return await _.variables.suivreNomsVariable({idVariable:x,f:S})},rechercherVariablesSelonDescr=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,de:"descr",clef:I,info:M})}else return await E()};return await _.variables.suivreDescriptionsVariable({idVariable:x,f:S})},rechercherVariablesSelonTexte=n=>async(_,x,E)=>{const S=rechercherVariablesSelonNom(n),C=rechercherVariablesSelonDescr(n),T=rechercherSelonId(n);return await combinerRecherches({noms:S,descr:C,id:T},_,x,E)},rechercherMotsClefsSelonNom=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,clef:I,info:M,de:"nom"})}else return await E()};return await _.motsClefs.suivreNomsMotClef({idMotClef:x,f:S})},rechercherMotsClefsSelonDescr=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,clef:I,info:M,de:"descr"})}else return await E()};return await _.motsClefs.suivreDescriptionsMotClef({idMotClef:x,f:S})},rechercherMotsClefsSelonTexte=n=>async(_,x,E)=>{const S=rechercherMotsClefsSelonNom(n),C=rechercherMotsClefsSelonDescr(n),T=rechercherSelonId(n);return await combinerRecherches({noms:S,id:T,descr:C},_,x,E)},rechercherBdsSelonNom=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,clef:I,info:M,de:"nom"})}else return await E()};return await _.bds.suivreNomsBd({idBd:x,f:S})},rechercherBdsSelonDescr=n=>async(_,x,E)=>{const S=async T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;return await E({type:"rsultat",score:B,clef:I,info:M,de:"descr"})}else return await E()};return await _.bds.suivreDescriptionsBd({idBd:x,f:S})},rechercherBdsSelonIdVariable=n=>async(_,x,E)=>{const S=async T=>await _.bds.suivreVariablesBd({idBd:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("variable",S,C,_,E)},rechercherBdsSelonNomVariable=n=>async(_,x,E)=>{const S=async T=>await _.bds.suivreVariablesBd({idBd:x,f:T}),C=rechercherVariablesSelonNom(n);return await sousRecherche("variable",S,C,_,E)},rechercherBdsSelonVariable=n=>async(_,x,E)=>await combinerRecherches({id:rechercherBdsSelonIdVariable(n),nom:rechercherBdsSelonNomVariable(n)},_,x,E),rechercherBdsSelonIdMotClef=n=>async(_,x,E)=>{const S=async T=>await _.bds.suivreMotsClefsBd({idBd:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("motClef",S,C,_,E)},rechercherBdsSelonNomMotClef=n=>async(_,x,E)=>{const S=async T=>await _.bds.suivreMotsClefsBd({idBd:x,f:T}),C=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",S,C,_,E)},rechercherBdsSelonMotClef=n=>async(_,x,E)=>await combinerRecherches({id:rechercherBdsSelonIdMotClef(n),nom:rechercherBdsSelonNomMotClef(n)},_,x,E),rechercherBdsSelonTexte=n=>async(_,x,E)=>await combinerRecherches({nom:rechercherBdsSelonNom(n),descr:rechercherBdsSelonDescr(n),variables:rechercherBdsSelonVariable(n),motsClefs:rechercherBdsSelonMotClef(n),id:rechercherSelonId(n)},_,x,E),rechercherProjetsSelonNom=n=>async(_,x,E)=>{const S=T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;E({type:"rsultat",score:B,clef:I,info:M,de:"nom"})}else E()};return await _.projets.suivreNomsProjet({idProjet:x,f:S})},rechercherProjetsSelonDescr=n=>async(_,x,E)=>{const S=T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;E({type:"rsultat",score:B,clef:I,info:M,de:"descr"})}else E()};return await _.projets.suivreDescriptionsProjet({idProjet:x,f:S})},rechercherProjetsSelonIdBd=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreBdsProjet({idProjet:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("bd",S,C,_,E)},rechercherProjetsSelonBd=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreBdsProjet({idProjet:x,f:T}),C=rechercherBdsSelonTexte(n);return await sousRecherche("bd",S,C,_,E)},rechercherProjetsSelonIdVariable=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreVariablesProjet({idProjet:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("variable",S,C,_,E)},rechercherProjetsSelonNomVariable=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreVariablesProjet({idProjet:x,f:T}),C=rechercherVariablesSelonNom(n);return await sousRecherche("variable",S,C,_,E)},rechercherProjetsSelonVariable=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreVariablesProjet({idProjet:x,f:T}),C=rechercherVariablesSelonTexte(n);return await sousRecherche("variable",S,C,_,E)},rechercherProjetsSelonIdMotClef=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreMotsClefsProjet({idProjet:x,f:A=>T(A.map(B=>B.idMotClef))}),C=rechercherSelonId(n);return await sousRecherche("motClef",S,C,_,E)},rechercherProjetsSelonNomMotClef=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreMotsClefsProjet({idProjet:x,f:A=>T(A.map(B=>B.idMotClef))}),C=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",S,C,_,E)},rechercherProjetsSelonMotClef=n=>async(_,x,E)=>{const S=async T=>await _.projets.suivreMotsClefsProjet({idProjet:x,f:A=>T(A.map(B=>B.idMotClef))}),C=rechercherMotsClefsSelonTexte(n);return await sousRecherche("motClef",S,C,_,E)},rechercherProjetsSelonTexte=n=>async(_,x,E)=>{const S=rechercherProjetsSelonNom(n),C=rechercherProjetsSelonDescr(n),T=rechercherProjetsSelonBd(n),A=rechercherProjetsSelonVariable(n),B=rechercherProjetsSelonMotClef(n),I=rechercherSelonId(n);return await combinerRecherches({noms:S,descr:C,bd:T,variable:A,motClef:B,id:I},_,x,E)},rechercherNuesSelonNom=n=>async(_,x,E)=>{const S=T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;E({type:"rsultat",score:B,clef:I,info:M,de:"nom"})}else E()};return await _.nues.suivreNomsNue({idNue:x,f:S})},rechercherNuesSelonDescr=n=>async(_,x,E)=>{const S=T=>{const A=similTexte(n,T);if(A){const{score:B,clef:I,info:M}=A;E({type:"rsultat",score:B,clef:I,info:M,de:"descr"})}else E()};return await _.nues.suivreDescriptionsNue({idNue:x,f:S})},rechercherNuesSelonIdVariable=n=>async(_,x,E)=>{const S=async T=>await _.nues.suivreVariablesNue({idNue:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("variable",S,C,_,E)},rechercherNuesSelonNomVariable=n=>async(_,x,E)=>{const S=async T=>await _.nues.suivreVariablesNue({idNue:x,f:T}),C=rechercherVariablesSelonNom(n);return await sousRecherche("variable",S,C,_,E)},rechercherNuesSelonVariable=n=>async(_,x,E)=>await combinerRecherches({id:rechercherNuesSelonIdVariable(n),nom:rechercherNuesSelonNomVariable(n)},_,x,E),rechercherNuesSelonIdMotClef=n=>async(_,x,E)=>{const S=async T=>await _.nues.suivreMotsClefsNue({idNue:x,f:T}),C=rechercherSelonId(n);return await sousRecherche("motClef",S,C,_,E)},rechercherNuesSelonNomMotClef=n=>async(_,x,E)=>{const S=async T=>await _.nues.suivreMotsClefsNue({idNue:x,f:T}),C=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",S,C,_,E)},rechercherNuesSelonMotClef=n=>async(_,x,E)=>await combinerRecherches({id:rechercherNuesSelonIdMotClef(n),nom:rechercherNuesSelonNomMotClef(n)},_,x,E),rechercherNuesSelonTexte=n=>async(_,x,E)=>await combinerRecherches({nom:rechercherNuesSelonNom(n),descr:rechercherNuesSelonDescr(n),variables:rechercherNuesSelonVariable(n),motsClefs:rechercherNuesSelonMotClef(n),id:rechercherSelonId(n)},_,x,E);class Recherche{constructor({client:_}){$t(this,"client");this.client=_}async rechercherVariables({f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,toutLeRseau:E})}async rechercherVariablesSelonId({idVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherSelonId(_);return await this.client.rseau.rechercherVariables({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherVariablesSelonNom({nomVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherVariablesSelonNom(_);return await this.client.rseau.rechercherVariables({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherVariablesSelonDescr({descrVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherVariablesSelonDescr(_);return await this.client.rseau.rechercherVariables({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherVariablesSelonTexte({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherVariablesSelonTexte(_);return await this.client.rseau.rechercherVariables({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherMotsClefs({f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,toutLeRseau:E})}async rechercherMotsClefsSelonId({idMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherSelonId(_);return await this.client.rseau.rechercherMotsClefs({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherMotsClefsSelonNom({nomMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherMotsClefsSelonNom(_);return await this.client.rseau.rechercherMotsClefs({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherMotsClefsSelonDescr({descrMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherMotsClefsSelonDescr(_);return await this.client.rseau.rechercherMotsClefs({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherMotsClefsSelonTexte({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherMotsClefsSelonTexte(_);return await this.client.rseau.rechercherMotsClefs({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBds({f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,toutLeRseau:E})}async rechercherBdsSelonId({idBd:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherSelonId(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonNom({nomBd:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonNom(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonDescr({descrBd:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonDescr(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonIdMotClef({idMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonIdMotClef(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonIdVariable({idVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonIdVariable(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonNomMotClef({nomMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonNomMotClef(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonNomVariable({nomVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonNomVariable(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonMotClef({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonMotClef(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonVariable({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonVariable(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherBdsSelonTexte({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherBdsSelonTexte(_);return await this.client.rseau.rechercherBds({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProfilsSelonId({idCompte:_,f:x,nRsultatsDsirs:E}){const S=rechercherSelonId(_);return await this.client.rseau.rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S})}async rechercherProfilsSelonNom({nom:_,f:x,nRsultatsDsirs:E}){const S=rechercherProfilsSelonNom(_);return await this.client.rseau.rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S})}async rechercherProfilsSelonImage({image:_,f:x,nRsultatsDsirs:E}){const S=rechercherProfilsSelonImage(_);return await this.client.rseau.rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S})}async rechercherProfilsSelonActivit({f:_,nRsultatsDsirs:x}){const E=rechercherProfilsSelonActivit();return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProfilsSelonCourriel({courriel:_,f:x,nRsultatsDsirs:E}){const S=rechercherProfilsSelonCourriel(_);return await this.client.rseau.rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S})}async rechercherProfilsSelonTexte({texte:_,f:x,nRsultatsDsirs:E}){const S=rechercherProfilsSelonTexte(_);return await this.client.rseau.rechercherMembres({f:x,nRsultatsDsirs:E,fObjectif:S})}async rechercherProjets({f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,toutLeRseau:E})}async rechercherProjetsSelonId({idProjet:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherSelonId(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonNom({nomProjet:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonNom(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonDescr({descrProjet:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonDescr(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonIdVariable({idVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonIdVariable(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonNomVariable({nomVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonNomVariable(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonVariable({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonVariable(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonIdMotClef({idMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonIdMotClef(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonNomMotClef({nomMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonNomMotClef(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonMotClef({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonMotClef(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonIdBd({idBd:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonIdBd(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonBd({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonBd(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherProjetsSelonTexte({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherProjetsSelonTexte(_);return await this.client.rseau.rechercherProjets({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNues({f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,toutLeRseau:E})}async rechercherNuesSelonId({idNue:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherSelonId(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonNom({nomNue:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonNom(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonDescr({descrNue:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonDescr(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonIdMotClef({idMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonIdMotClef(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonIdVariable({idVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonIdVariable(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonNomMotClef({nomMotClef:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonNomMotClef(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonNomVariable({nomVariable:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonNomVariable(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonMotClef({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonMotClef(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonVariable({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonVariable(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}async rechercherNuesSelonTexte({texte:_,f:x,nRsultatsDsirs:E,toutLeRseau:S=!0}){const C=rechercherNuesSelonTexte(_);return await this.client.rseau.rechercherNues({f:x,nRsultatsDsirs:E,fObjectif:C,toutLeRseau:S})}}__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonImage",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonActivit",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonCourriel",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNues",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonTexte",null);class ImportateurFeuilleCalcul{constructor(_){$t(this,"doc");this.doc=_}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(_){const x=this.doc.Sheets[_];return(utils$1.sheet_to_json(x,{header:1})[0]||[]).map(S=>S.toString())}obtDonnes(_,x){const E=this.doc.Sheets[_],S=utils$1.sheet_to_json(E);if(Array.isArray(x))return S.map(C=>Object.fromEntries(Object.keys(C).filter(T=>x.includes(T)).map(T=>[T,C[T]])));{const C=Object.fromEntries(Object.entries(x).map(([T,A])=>[A,T]));return S.map(T=>Object.fromEntries(Object.keys(T).filter(A=>Object.keys(C).includes(A)).map(A=>[C[A],T[A]])))}}}const copieProfonde=n=>JSON.parse(JSON.stringify(n)),estUnDic=n=>typeof n=="object"&&!Array.isArray(n),estUneListe=n=>Array.isArray(n),extraireBranches=(n,_)=>{let x;if(!_.length)return x=estUnDic(n)?Object.values(n):n,{base:{},branches:x};const E=extraireDonnes(n,_.slice(0,_.length-1)),S=_[_.length-1];let C;if(typeof S=="number")if(estUneListe(E)){const T=E[S];if(typeof T!="object")throw new Error(T.toString());C=T,delete E[S]}else throw new Error(`${S} ne peut pas indexer une liste.`);else if(typeof S=="string")if(estUnDic(E)){const T=E[S];if(typeof T!="object")throw new Error(T.toString());C=T,delete E[S]}else throw new Error(`${S} ne peut pas indexer un objet.`);else throw new Error(`${S} n'est pas une clef valide.`);if(estUnDic(C))x=Object.values(C);else if(estUneListe(C))x=C;else throw Error(JSON.stringify(C));return{base:n,branches:x}},injecterBranche=(n,_,x)=>{if(!_.length)Object.assign(n,x);else{const E=_.slice(1,_.length),S=extraireDonnes(n,E),C=_[_.length-1];if(typeof C=="number")if(estUneListe(S))S[C]=x;else throw new Error(`${C} ne peut pas indexer une liste.`);else if(typeof C=="string")if(estUnDic(S))S[C]=x;else throw new Error(`${C} ne peut pas indexer un objet.`);else throw new Error(`${C} n'est pas une clef valide.`)}},aplatirDonnes=(n,_=[],x,E=[])=>{_[_.length-1]!==-1&&_.push(-1);const S=_.indexOf(-1),C=_.slice(0,S),T=_.slice(S+1,_.length),{base:A,branches:B}=extraireBranches(n,C);for(const I of B){if(typeof I!="object")throw new Error(I.toString());const M=copieProfonde(A);injecterBranche(M,C,I),T.length?aplatirDonnes(I,T,M,E):E.push(M)}return E},extraireDonnes=(n,_)=>{let x=n;for(const E of _)if(typeof E=="number")if(estUneListe(x))x=x[E];else throw new Error(`${E} ne peut pas indexer une liste.`);else if(typeof E=="string")if(estUnDic(x))x=x[E];else throw new Error(`${E} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable: ${E}`);return x};class ImportateurDonnesJSON{constructor(_){$t(this,"donnesJSON");this.donnesJSON=_}obtDonnes(_,x,E){let S=[],C=extraireDonnes(this.donnesJSON,_);if(typeof C!="object")throw new Error(`Type de donnes erron: ${C.toString()}`);C=aplatirDonnes(C,x);for(const T of C){if(typeof T!="object")throw new Error(`lment de type non support: ${T}`);S=[Object.fromEntries(Object.keys(E).map(B=>{const I=E[B];let M;try{M=extraireDonnes(T,I)}catch{M=void 0}return[B,M]}).filter(B=>B[1]!==void 0)),...S]}return S}}(isElectronMain||isNode)&&(__vitePreload(()=>Promise.resolve().then(()=>fs_),void 0).then(n=>set_fs(n)),__vitePreload(()=>Promise.resolve().then(()=>stream$2),void 0).then(n=>__stream.set_readable(n.Readable)));const MESSAGE_NON_DISPO_NAVIGATEUR="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",schmaSpcificationAutomatisation={type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureFichiersSFIP:{type:"boolean"},nRsultatsDsirsNue:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","inclureFichiersSFIP"]},{type:"object",properties:{id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},obtTempsInterval=n=>{const{n:_,units:x}=n;switch(x){case"annes":return _*365.25*24*60*60*1e3;case"mois":return _*30*24*60*60*1e3;case"semaines":return _*7*24*60*60*1e3;case"jours":return _*24*60*60*1e3;case"heures":return _*60*60*1e3;case"minutes":return _*60*1e3;case"secondes":return _*1e3;case"millisecondes":return _;default:throw new Error(x)}},gnrerFExportation=(n,_)=>async()=>{const x=await __vitePreload(()=>Promise.resolve().then(()=>os$1),void 0),E=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),S=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),C=n.dossier?await _.automatisations.rsoudreAdressePriveFichier({clef:n.dossier}):E.join(x.homedir(),"constellation");if(!C)throw new Error("Dossier introuvable");let T;const A=M=>{const O=M.split(".");return`${O[0]}-${Date.now()}.${O[1]}`};switch(n.typeObjet){case"tableau":{const M=await _.tableaux.exporterDonnes({idTableau:n.idObjet,langues:n.langues});T=M.nomFichier,n.copies&&(T=A(T)),await _.bds.exporterDocumentDonnes({donnes:M,formatDoc:n.formatDoc,dossier:C,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"bd":{const M=await _.bds.exporterDonnes({idBd:n.idObjet,langues:n.langues});T=M.nomFichier,n.copies&&(T=A(T)),await _.bds.exporterDocumentDonnes({donnes:M,formatDoc:n.formatDoc,dossier:C,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"projet":{const M=await _.projets.exporterDonnes({idProjet:n.idObjet,langues:n.langues});T=M.nomFichier,n.copies&&(T=A(T)),await _.projets.exporterDocumentDonnes({donnes:M,formatDoc:n.formatDoc,dossier:C,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"nue":{const M=await _.nues.exporterDonnesNue({idNue:n.idObjet,langues:n.langues,nRsultatsDsirs:n.nRsultatsDsirsNue||1e3});T=M.nomFichier,n.copies&&(T=A(T)),await _.bds.exporterDocumentDonnes({donnes:M,formatDoc:n.formatDoc,dossier:C,inclureFichiersSFIP:n.inclureFichiersSFIP});break}default:throw new Error(n.typeObjet)}const B=S.readdirSync(C).filter(M=>{try{return S.statSync(M).isFile()&&I(E.basename(M),T)}catch{return!1}}),I=(M,O)=>{const D=M.split(".").pop()||"";return`${M.slice(0,-(D?.length+1)).split("-").slice(0,-1).join("")}.${D}`===O};if(n.copies){if(n.copies.type==="n"){const M=n.copies.n-B.length;M>0&&B.map(V=>({temps:new Date(S.statSync(V).mtime).valueOf(),fichier:V})).sort((V,U)=>V.temps>U.temps?1:-1).slice(M).map(V=>V.fichier).forEach(V=>S.rmSync(V))}else if(n.copies.type==="temps"){const M=Date.now(),{temps:O}=n.copies;B.filter(L=>{const V=new Date(S.statSync(L).mtime).valueOf();return M-V<obtTempsInterval(O)}).forEach(L=>S.rmSync(L))}}},gnrerFAuto=(n,_)=>{switch(n.type){case"importation":return async()=>{const x=async T=>await _.automatisations.rsoudreAdressePriveFichier({clef:T})||void 0,E=await _.automatisations.obtDonnesImportation(n,x),S=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);let C;if(n.source.typeSource==="fichier"&&n.source.adresseFichier){const T=await x(n.source.adresseFichier);T&&(C=S.dirname(T))}await _.tableaux.importerDonnes({idTableau:n.idTableau,donnes:E,conversions:n.conversions,cheminBaseFichiers:C})};case"exportation":return gnrerFExportation(n,_);default:throw new Error(n)}},lancerAutomatisation=async({spc:n,idSpc:_,client:x,ftat:E})=>{const S=gnrerFAuto(n,x),C=`auto: ${_}`,T=n.frquence?obtTempsInterval(n.frquence):void 0,A=new s;let B="";const I=await x.obtDeStockageLocal({clef:C}),M=new Set([I]),O=async D=>{if(M.has(D))return;if(B=D,await A.acquire("opration"),D!==B||M.has(D)){A.release("opration");return}await x.sauvegarderAuStockageLocal({clef:C,val:D}),M.add(D);const L={type:"sync",depuis:new Date().getTime()};E(L);try{if(await S(),T){const V={type:"programme",:Date.now()+T};E(V)}else E({type:"coute"})}catch(V){const U={type:"erreur",erreur:JSON.stringify({nom:V.name,message:V.message,pile:V.stack,cause:V.cause},void 0,2),prochaineProgramme:T?Date.now()+T:void 0};E(U)}A.release("opration")};if(n.frquence){E({type:"programme",:T});const L={},V=async()=>{const ce=new Date().getTime();await O(ce.toString());const ne=setTimeout(V,T);L.f=async()=>clearTimeout(ne)},U=new Date().getTime(),q=await x.obtDeStockageLocal({clef:C}),H=q?parseInt(q):-1/0,W=U-H,Q=setTimeout(V,Math.max(T-W,0));return L.f=async()=>clearTimeout(Q),async()=>{L.f&&await L.f()}}else switch(E({type:"coute"}),n.type){case"exportation":return n.typeObjet==="nue"?await x.nues.suivreEmpreinteTtesBdsNue({idNue:n.idObjet,f:O}):await x.suivreEmpreinteTtesBdRcursive({idBd:n.idObjet,f:O});case"importation":switch(n.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const L=await __vitePreload(()=>import("chokidar"),[]),V=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),{adresseFichier:U}=n.source,q=await x.automatisations.rsoudreAdressePriveFichier({clef:U});if(!q||!V.existsSync(q))throw new Error(`Fichier ${U} introuvable.`);const H=L.watch(q);H.on("change",async()=>{const ne=new Date().getTime().toString();O(ne)});const W=V.statSync(q).mtime.getTime(),Q=await x.obtDeStockageLocal({clef:C});if(Q?W>parseInt(Q):!0){const ne=new Date().getTime().toString();O(ne)}return async()=>await H.close()}case"url":return E({type:"erreur",erreur:"La frquence d'une automatisation d'importation d'URL doit tre spcifie.",prochaineProgramme:void 0}),faisRien;default:throw new Error(n.source)}default:throw new Error(n)}};class AutomatisationActive extends eventsExports.EventEmitter{constructor(x,E,S){super();$t(this,"client");$t(this,"tat");$t(this,"fOublier");this.client=S,lancerAutomatisation({spc:x,idSpc:E,client:this.client,ftat:C=>{this.tat=C,this.emit("misJour")}}).then(C=>{this.fOublier=C,this.emit("prt")})}async fermer(){this.fOublier||await new Promise(x=>{this.once("prt",()=>{x()})}),await this.fOublier?.()}}const activePourCeDispositif=(n,_)=>{switch(n.type){case"importation":return n.dispositif===_;case"exportation":return n.dispositifs.includes(_);default:throw new Error(n)}},verrou=new s;class Automatisations extends ComposanteClientListe{constructor({client:x}){super({client:x,clef:"automatisations",schmaBdPrincipale:schmaSpcificationAutomatisation});$t(this,"automatisations");$t(this,"vnements");$t(this,"fOublier");this.automatisations={},this.vnements=new eventsExports.EventEmitter,this.initialiser()}async initialiser(){this.fOublier=await this.suivreBdPrincipaleBrute({f:x=>this.mettreAutosJour(x)})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async mettreAutosJour(x){await verrou.acquire("miseJour");const E=Object.keys(this.automatisations);for(const S of E)x.find(C=>C.payload.value.id===S)||await this.fermerAuto(S);for(const S of x){const{payload:{value:C}}=S;if(activePourCeDispositif(C,this.client.orbite.identity.id)){if(!Object.keys(this.automatisations).includes(C.id)){const T=new AutomatisationActive(C,C.id,this.client);T.on("misJour",()=>this.vnements.emit("misJour")),this.automatisations[C.id]=T}}else this.automatisations[C.id]&&await this.fermerAuto(C.id)}verrou.release("miseJour")}async obtDonnesImportation(x,E=async S=>S){const{typeSource:S}=x.source,{formatDonnes:C}=x.source.info;switch(S){case"url":{const{url:T}=x.source;switch(C){case"json":{const{clefsRacine:A,clefslments:B,cols:I}=x.source.info,M=await importerJSONdURL(T);return new ImportateurDonnesJSON(M).obtDonnes(A,B,I)}case"feuilleCalcul":{const{nomTableau:A,cols:B,optionsXLSX:I}=x.source.info,M=await importerFeuilleCalculDURL(T,I);return new ImportateurFeuilleCalcul(M).obtDonnes(A,B)}default:throw new Error(C)}}case"fichier":{if(!isElectronMain&&!isNode)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const T=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),{adresseFichier:A}=x.source,B=await E(A);if(!B||!T.existsSync(B))throw new Error(`Fichier ${B} introuvable.`);switch(C){case"json":{const{clefsRacine:I,clefslments:M,cols:O}=x.source.info,D=await T.promises.readFile(B),L=JSON.parse(D.toString());return new ImportateurDonnesJSON(L).obtDonnes(I,M,O)}case"feuilleCalcul":{const{nomTableau:I,cols:M}=x.source.info,O=readFileSync(B);return new ImportateurFeuilleCalcul(O).obtDonnes(I,M)}default:throw new Error(C)}}default:throw new Error(S)}}async ajouterAutomatisationExporter({id:x,typeObjet:E,formatDoc:S,inclureFichiersSFIP:C,dossier:T,langues:A,frquence:B,dispositifs:I,nRsultatsDsirsNue:M,copies:O}){I=I||[this.client.orbite.identity.id];const D=v4(),L=await this.sauvegarderAdressePriveFichier({fichier:T}),V={type:"exportation",id:D,idObjet:x,typeObjet:E,dispositifs:I,frquence:B,formatDoc:S,langues:A,inclureFichiersSFIP:C,dossier:L,nRsultatsDsirsNue:M,copies:O};Object.keys(V).forEach(H=>{V[H]===void 0&&delete V[H]});const{bd:U,fOublier:q}=await this.client.ouvrirBd({id:await this.obtIdBd()});return await U.add(V),await q(),D}async ajouterAutomatisationImporter({idTableau:x,source:E,frquence:S,dispositif:C}){const{bd:T,fOublier:A}=await this.client.ouvrirBd({id:await this.obtIdBd()});C=C||this.client.orbite.identity.id;const B=v4();E.typeSource==="fichier"&&(E.adresseFichier=await this.sauvegarderAdressePriveFichier({fichier:E.adresseFichier}));const I={type:"importation",id:B,idTableau:x,dispositif:C,frquence:S,source:E};return Object.keys(I).forEach(M=>{I[M]===void 0&&delete I[M]}),await T.add(I),await A(),B}async annulerAutomatisation({id:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:await this.obtIdBd()});await this.client.effacerlmentDeBdListe({bd:E,lment:C=>C.payload.value.id===x}),await S()}async rsoudreAdressePriveFichier({clef:x}){return x?await this.client.obtDeStockageLocal({clef:x}):null}async sauvegarderAdressePriveFichier({fichier:x}){const E="dossier."+v4();return await this.client.sauvegarderAuStockageLocal({clef:E,val:x}),E}async suivreAutomatisations({f:x,idCompte:E}){const S=async C=>{const T=await Promise.all(C.map(async A=>{const B=deepcopy(A);if(B.type==="importation"&&B.source.typeSource==="fichier"){const{adresseFichier:I}=B.source;if(I){const M=await this.rsoudreAdressePriveFichier({clef:I});M?B.source.adresseFichier=M:delete B.source.adresseFichier}}else if(B.type==="exportation"){const{dossier:I}=B;if(I){const M=await this.rsoudreAdressePriveFichier({clef:I});M?B.dossier=M:delete B.dossier}}return B}));await x(T)};return await this.suivreBdPrincipale({idCompte:E,f:S})}async suivretatAutomatisations({f:x}){const E=async()=>{const S=Object.fromEntries(Object.keys(this.automatisations).map(C=>[C,this.automatisations[C].tat]).filter(C=>C[1]));await x(S)};return this.vnements.on("misJour",E),async()=>{this.vnements.off("misJour",E)}}async fermerAuto(x){await this.automatisations[x].fermer(),delete this.automatisations[x]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(x=>{this.fermerAuto(x)})),await this.fOublier?.()}}const stockagesLocaux={};class LocalStorage{constructor(_){$t(this,"fichier");$t(this,"_donnes");$t(this,"_vnements");$t(this,"_idRequteSauvegarde");$t(this,"verrou");$t(this,"fOublier");this.fichier=path.join(_,"donnes.json"),this._vnements=new eventsExports.EventEmitter,this.verrou=new s,globSourceImport.existsSync(_)||globSourceImport.mkdirSync(_);try{this._donnes=JSON.parse(globSourceImport.readFileSync(this.fichier).toString())}catch{this._donnes={}}const x=()=>{const E=v4();this._idRequteSauvegarde=E,this.sauvegarder(E)};this._vnements.on("sauvegarder",x),this.fOublier=()=>this._vnements.off("sauvegarder",x)}getItem(_){return this._donnes[_]}setItem(_,x){this._donnes[_]=x,this.demanderSauvegarde()}demanderSauvegarde(){this._vnements.emit("sauvegarder")}removeItem(_){delete this._donnes[_],this.demanderSauvegarde()}clear(){this._donnes={},globSourceImport.rmSync(this.fichier)}async sauvegarder(_){if(await this.verrou.acquire("sauvegarder"),this._idRequteSauvegarde!==_){this.verrou.release("sauvegarder");return}await globSourceImport.promises.writeFile(this.fichier,JSON.stringify(this._donnes)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier&&this.fOublier(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async n=>{if(typeof localStorage>"u"||localStorage===null){if(!n)throw new Error("Orbite n'est pas encore initialise, et aucun dossier ne fut spcifi dans la configuration d'initialisation de Constellation.");const _=path.join(n,"_stockageLocal");return stockagesLocaux[_]||(stockagesLocaux[_]=new LocalStorage(_)),stockagesLocaux[_]}else return localStorage},exporterStockageLocal=async()=>{const n=await obtStockageLocal();return n instanceof LocalStorage?JSON.stringify(n._donnes):JSON.stringify(n)};var sha256$1={exports:{}};(function(n,_){(function(x,E){n.exports=E(requireCore())})(commonjsGlobal,function(x){return function(E){var S=x,C=S.lib,T=C.WordArray,A=C.Hasher,B=S.algo,I=[],M=[];(function(){function L(H){for(var W=E.sqrt(H),Q=2;Q<=W;Q++)if(!(H%Q))return!1;return!0}function V(H){return(H-(H|0))*4294967296|0}for(var U=2,q=0;q<64;)L(U)&&(q<8&&(I[q]=V(E.pow(U,1/2))),M[q]=V(E.pow(U,1/3)),q++),U++})();var O=[],D=B.SHA256=A.extend({_doReset:function(){this._hash=new T.init(I.slice(0))},_doProcessBlock:function(L,V){for(var U=this._hash.words,q=U[0],H=U[1],W=U[2],Q=U[3],re=U[4],ce=U[5],ne=U[6],Y=U[7],fe=0;fe<64;fe++){if(fe<16)O[fe]=L[V+fe]|0;else{var ge=O[fe-15],$e=(ge<<25|ge>>>7)^(ge<<14|ge>>>18)^ge>>>3,_e=O[fe-2],ae=(_e<<15|_e>>>17)^(_e<<13|_e>>>19)^_e>>>10;O[fe]=$e+O[fe-7]+ae+O[fe-16]}var X=re&ce^~re&ne,F=q&H^q&W^H&W,z=(q<<30|q>>>2)^(q<<19|q>>>13)^(q<<10|q>>>22),J=(re<<26|re>>>6)^(re<<21|re>>>11)^(re<<7|re>>>25),te=Y+J+X+M[fe]+O[fe],se=z+F;Y=ne,ne=ce,ce=re,re=Q+te|0,Q=W,W=H,H=q,q=te+se|0}U[0]=U[0]+q|0,U[1]=U[1]+H|0,U[2]=U[2]+W|0,U[3]=U[3]+Q|0,U[4]=U[4]+re|0,U[5]=U[5]+ce|0,U[6]=U[6]+ne|0,U[7]=U[7]+Y|0},_doFinalize:function(){var L=this._data,V=L.words,U=this._nDataBytes*8,q=L.sigBytes*8;return V[q>>>5]|=128<<24-q%32,V[(q+64>>>9<<4)+14]=E.floor(U/4294967296),V[(q+64>>>9<<4)+15]=U,L.sigBytes=V.length*4,this._process(),this._hash},clone:function(){var L=A.clone.call(this);return L._hash=this._hash.clone(),L}});S.SHA256=A._createHelper(D),S.HmacSHA256=A._createHmacHelper(D)}(Math),x.SHA256})})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports),schmaStructureBdCompte={type:"object",properties:{protocoles:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nues:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},rseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},schmaStructureNomsDispositifs={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},DLAI_EXPIRATION_INVITATIONS=1e3*60*5;class ClientConstellation extends eventsExports.EventEmitter{constructor(x={}){super();$t(this,"_opts");$t(this,"optionsAccs");$t(this,"bdCompte");$t(this,"orbite");$t(this,"sfip");$t(this,"idNodeSFIP");$t(this,"pingles");$t(this,"profil");$t(this,"bds");$t(this,"tableaux");$t(this,"variables");$t(this,"rseau");$t(this,"favoris");$t(this,"projets");$t(this,"recherche");$t(this,"motsClefs");$t(this,"automatisations");$t(this,"nues");$t(this,"licences");$t(this,"_orbiteExterne");$t(this,"_sfipExterne");$t(this,"prt");$t(this,"idCompte");$t(this,"encryption");$t(this,"sujet_rseau");$t(this,"motsDePasseRejoindreCompte");$t(this,"ennikkai");$t(this,"verrouObtIdBd");enregistrerContrleurs(),this._opts=x,this.prt=!1,this.sujet_rseau=x.sujetRseau||"rseau-constellation",this.motsDePasseRejoindreCompte={},this.verrouObtIdBd=new s,this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst,this.ennikkai=new ({})}async initialiser(){const{sfip:x,orbite:E}=await this._gnrerSFIPetOrbite();this.sfip=x,this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:E}),this.idNodeSFIP=await this.sfip.id();const S={type:"controlleur-constellation",premierMod:this.orbite.identity.id,nom:"racine"};this.idCompte=this._opts.compte||await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this.crerBdIndpendante({type:"kvstore",optionsAccs:S,nom:"racine"}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),this.pingles=new pingles({client:this}),await this.initialiserCompte(),this.prt=!0,this.emit("prt")}async _gnrerSFIPetOrbite(){const{orbite:x}=this._opts;let E,S;const C=async T=>{if(T?.sfip)return this._sfipExterne=!0,T.sfip;{const A=(await __vitePreload(()=>import("./index-9a6d4db6.js").then(B=>B.j),[])).default;return await A(T?.dossier)}};if(x)if(x instanceof OrbitDB)this._sfipExterne=this._orbiteExterne=!0,E=x._ipfs,S=x;else{const T=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;E=await C(x.sfip),S=await T({sfip:E,dossierOrbite:x.dossier})}else{E=await C();const T=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;S=await T({sfip:E})}return{sfip:E,orbite:S}}async initialiserCompte(){const{bd:x}=await this.ouvrirBd({id:this.idCompte,type:"kvstore",schma:schmaStructureBdCompte});this.bdCompte=x;const E=this.bdCompte.access;this.optionsAccs={type:"controlleur-constellation",address:E.bd.id};const S=await this.obtIdBd({nom:"protocoles",racine:this.bdCompte,type:"kvstore"});if(S){const{bd:C,fOublier:T}=await this.ouvrirBd({id:S,type:"kvstore"}),A=await this.obtIdDispositif(),B=C.get(A)||[],I=(M,O)=>M.length===O.length&&[...M].every(D=>O.includes(D));(!this._opts.protocoles||!I(B,this._opts.protocoles))&&(this._opts.protocoles?await C.put(A,this._opts.protocoles):await C.del(A)),await T()}else console.warn("Bd protocoles non dtecte.");this.profil=new Profil({client:this}),this.motsClefs=new MotsClefs({client:this}),this.tableaux=new Tableaux({client:this}),this.variables=new Variables({client:this}),this.bds=new BDs({client:this}),this.projets=new Projets({client:this}),this.nues=new Nue({client:this}),this.rseau=new Rseau({client:this}),await this.rseau.initialiser(),this.favoris=new Favoris({client:this}),this.automatisations=new Automatisations({client:this}),this.recherche=new Recherche({client:this}),this.licences=new Licences({client:this}),await this.pingler()}async pingler(){await this.pingles.pinglerBd({id:await this.obtIdCompte()}),await Promise.all([this.profil,this.automatisations,this.bds,this.variables,this.projets,this.nues,this.motsClefs,this.rseau,this.favoris].map(async x=>x&&await x.pingler()))}async signer({message:x}){const E=this.orbite.identity,S=await this.orbite.identity.provider.sign(E,x),C=this.orbite.identity.publicKey;return{signature:S,clefPublique:C}}async vrifierSignature({signature:x,message:E}){return!x||!x.clefPublique||!x.signature?!1:await this.orbite.identity.provider.verify(x.signature,x.clefPublique,E)}async suivreDispositifs({f:x,idCompte:E}){const S=async({id:C})=>{const{bd:T,fOublier:A}=await this.ouvrirBd({id:C,type:"kvstore"}),B=T.access,I=B.constructor.type;if(I==="ipfs")return await x(B.write),await A(),faisRien;if(I==="controlleur-constellation"){const M=async()=>{const O=B.gestRles._rles[MODRATEUR];await x(O)};return B.on("misJour",M),M(),async()=>{B.off("misJour",M),await A()}}else return await A(),faisRien};return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>E?(await C(E),faisRien):await this.suivreIdCompte({f:C}),f:ignorerNonDfinis(x),fSuivre:S})}async nommerDispositif({idDispositif:x,nom:E,type:S}){const C=x||await this.obtIdDispositif(),T=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"kvstore"}),{bd:A,fOublier:B}=await this.ouvrirBd({id:T,type:"kvstore"});await A.set(C,{nom:E,type:S}),await B()}async suivreNomsDispositifs({idCompte:x,f:E}){const S=x||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:S,schma:schmaStructureNomsDispositifs,clef:"nomsDispositifs",f:E})}async suivreNomDispositif({idCompte:x,idDispositif:E,f:S}){return await this.suivreNomsDispositifs({idCompte:x,f:async C=>{const T=C[E];if(T)return await S(T)}})}async gnrerInvitationRejoindreCompte(){const x=await this.obtIdCompte(),E=this.encryption.clefAlatoire();return this.motsDePasseRejoindreCompte[E]=Date.now(),{idCompte:x,codeSecret:E}}async rvoquerInvitationRejoindreCompte({codeSecret:x}){x?delete this.motsDePasseRejoindreCompte[x]:this.motsDePasseRejoindreCompte={}}async considrerRequteRejoindreCompte({requte:x}){const{idDispositif:E,empreinteVrification:S}=x,C=Date.now();for(const T of Object.keys(this.motsDePasseRejoindreCompte)){const A=this.motsDePasseRejoindreCompte[T];C-A<DLAI_EXPIRATION_INVITATIONS&&this.empreinteInvitation({idDispositif:E,codeSecret:T})===S&&(delete this.motsDePasseRejoindreCompte[T],await this.ajouterDispositif({idDispositif:E}))}}empreinteInvitation({idDispositif:x,codeSecret:E}){return Base64.stringify(sha256(x+E))}async demanderEtPuisRejoindreCompte({idCompte:x,codeSecret:E}){await this.rseau.envoyerDemandeRejoindreCompte({idCompte:x,codeSecret:E}),await this.rejoindreCompte({idCompte:x})}async ajouterDispositif({idDispositif:x}){this.bdCompte||await once_1(this,"prt"),this.bdCompte.access.grant(MODRATEUR,x)}async enleverDispositif({idDispositif:x}){this.bdCompte||await once_1(this,"prt"),await this.bdCompte.access.revoke(MODRATEUR,x)}async rejoindreCompte({idCompte:x}){if(!adresseOrbiteValide(x))throw new Error(`Adresse compte "${x}" non valide`);let E;const{bd:S,fOublier:C}=await this.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdCompte}),A=await S.access.suivreIdsOrbiteAutorisescriture(B=>E=B.includes(this.orbite.identity.id));await new Promise(B=>{const I=async()=>{E&&(clearInterval(M),await A(),await C(),B())},M=setInterval(()=>{I()},10);I()}),this.idCompte=x,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:x,parCompte:!1}),await this.fermerCompte(),await this.initialiserCompte(),this.emit("compteChang")}async donnerAccs({idBd:x,identit:E,rle:S=MEMBRE}){if(!adresseOrbiteValide(E))throw new Error(`Identit "${E}" non valide.`);const{bd:C,fOublier:T}=await this.ouvrirBd({id:x,type:"kvstore"}),A=C.access;A.constructor.type===nomType&&A.grant(S,E),await T()}async suivreIdCompte({f:x}){const E=async()=>{this.idCompte&&await x(this.idCompte)};return this.on("compteChang",E),await E(),async()=>{this.off("compteChang",E)}}async obtIdSFIP(){return this.idNodeSFIP||await once_1(this,"prt"),this.idNodeSFIP}async obtIdDispositif(){return this.orbite||await once_1(this,"prt"),this.orbite.identity.id}async obtIdentitOrbite(){return this.orbite||await once_1(this,"prt"),this.orbite.identity}async obtIdCompte(){return this.idCompte||await once_1(this,"prt"),this.idCompte}async copierContenuBdListe({bdBase:x,nouvelleBd:E,clef:S}){const C=x.get(S);if(typeof C!="string")return;const{bd:T,fOublier:A}=await this.ouvrirBd({id:C,type:"feed"}),B=E.get(S);if(!B)throw new Error("La nouvelle BD n'existait pas.");if(typeof B!="string")throw new Error(`${B} n'est pas une adresse Orbite.`);const{bd:I,fOublier:M}=await this.ouvrirBd({id:B,type:"feed"}),O=ClientConstellation.obtlmentsDeBdListe({bd:T});await Promise.all(O.map(async D=>{await I.add(D)})),A(),M()}async combinerBds({idBdBase:x,idBd2:E}){const{bd:S,fOublier:C}=await this.ouvrirBd({id:x}),T=S.type;switch(await C(),T){case"kvstore":case"keyvalue":{const{bd:A,fOublier:B}=await this.ouvrirBd({id:x,type:"keyvalue"}),{bd:I,fOublier:M}=await this.ouvrirBd({id:E,type:"keyvalue"});await this.combinerBdsDict({bdBase:A,bd2:I}),await B(),await M();break}case"feed":{const{bd:A,fOublier:B}=await this.ouvrirBd({id:x,type:"feed"}),{bd:I,fOublier:M}=await this.ouvrirBd({id:E,type:"feed"});await this.combinerBdsListe({bdBase:A,bd2:I}),await B(),await M();break}default:throw new Error(`Type de BD ${T} non support.`)}}async combinerBdsDict({bdBase:x,bd2:E}){const S=ClientConstellation.obtObjetdeBdDic({bd:E});for(const[C,T]of Object.entries(S)){const A=x.get(C);A!==T&&(A===void 0?await x.put(C,T):adresseOrbiteValide(A)&&adresseOrbiteValide(T)&&await this.combinerBds({idBdBase:A,idBd2:T}))}}async combinerBdsListe({bdBase:x,bd2:E,index:S}){const C=ClientConstellation.obtlmentsDeBdListe({bd:x,renvoyerValeur:!1}),T=ClientConstellation.obtlmentsDeBdListe({bd:E,renvoyerValeur:!1});for(const A of T){const B=A.payload.value;if(S){if(typeof B!="object")throw new Error(`Erreur combinaison listes : ${typeof B}`);const I=C.find(M=>typeof M.payload.value=="object"&&S.every(O=>M.payload.value[O]===B[O]));if(!I)await x.add(B);else{const M=I.payload.value;if(!deepEqual$1(M,B)){const O=Object.assign({},M);for(const[D,L]of Object.entries(B))O[D]===void 0?O[D]=L:deepEqual$1(O[D],L)||adresseOrbiteValide(O[D])&&adresseOrbiteValide(L)&&await this.combinerBds({idBdBase:O[D],idBd2:L});await x.remove(I.hash),await x.add(O)}}}else C.some(I=>deepEqual$1(I.payload.value,B))||await x.add(B)}}async suivreBd({id:x,f:E,type:S,schma:C,vnements:T=["write","replicated","ready"]}){if(!adresseOrbiteValide(x))throw new Error(`Adresse "${x}" non valide.`);const A=[],B={};let I=!1;const M=()=>{(S==="feed"?this.ouvrirBd({id:x,type:S,schma:C}):S?this.ouvrirBd({id:x,type:S,schma:C}):this.ouvrirBd({id:x})).then(({bd:D,fOublier:L})=>{A.push(L);const V=()=>{const U=v4(),q=E(D);(W=>!!W&&!!W.then)(q)&&(B[U]=q,q.then(()=>{delete B[U]}))};for(const U of T)D.events.on(U,V),A.push(async()=>{D.events.off(U,V)});V()}).catch(D=>{if(!I)if(String(D).includes("ipfs unable to find"))M();else throw new Error(D)})};return M(),async()=>{I=!0,await Promise.all(A.map(D=>D())),await Promise.all(Object.values(B))}}async suivreBdDeClef({id:x,clef:E,f:S,fSuivre:C,type:T}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>{const I=async M=>{const O=M.get(E);return await B(O)};return await this.suivreBd({id:x,f:I,type:"keyvalue"})},f:S,fSuivre:C})}async suivreBdDic({id:x,schma:E,f:S}){const C=async T=>{const A=T?ClientConstellation.obtObjetdeBdDic({bd:T}):{};await S(A)};return await this.suivreBd({id:x,type:"keyvalue",schma:E,f:C})}async suivreBdDicDeClef({id:x,clef:E,schma:S,f:C}){const T=async B=>{await C(B||{})},A=async({id:B,fSuivreBd:I})=>await this.suivreBdDic({id:B,schma:S,f:I});return await this.suivreBdDeClef({id:x,clef:E,f:T,fSuivre:A,type:"keyvalue"})}static obtObjetdeBdDic({bd:x}){const E=x.all;return Object.fromEntries(Object.keys(E).map(S=>[S,E[S]]))}async suivreBdListeDeClef({id:x,clef:E,f:S,schma:C,renvoyerValeur:T=!0}){if(T){const A=async I=>{await S(I||[])},B=async({id:I,fSuivreBd:M})=>await this.suivreBdListe({id:I,f:M,schma:C,renvoyerValeur:T});return await this.suivreBdDeClef({id:x,clef:E,f:A,fSuivre:B,type:"feed"})}else{const A=async I=>{await S(I||[])},B=async({id:I,fSuivreBd:M})=>await this.suivreBdListe({id:I,f:M,schma:C,renvoyerValeur:!1});return await this.suivreBdDeClef({id:x,clef:E,f:A,fSuivre:B,type:"feed"})}}async suivreBdListe({id:x,f:E,schma:S,renvoyerValeur:C=!0}){return await this.suivreBd({id:x,type:"feed",schma:S,f:async T=>{const A=ClientConstellation.obtlmentsDeBdListe({bd:T,renvoyerValeur:C});await E(A)}})}static obtlmentsDeBdListe({bd:x,renvoyerValeur:E=!0}){const S=x.iterator({limit:-1}).collect();return E?S.map(C=>C.payload.value):S}obtlmentBdListeSelonEmpreinte({bd:x,empreinte:E}){return x.iterator({limit:-1}).collect().find(C=>C.hash===E)?.payload.value}async effacerlmentDeBdListe({bd:x,lment:E}){const S=x.iterator({limit:-1}).collect().find(C=>typeof E=="function"?E(C):deepEqual$1(C.payload.value,E));S&&await x.remove(S.hash)}async effacerlmentsDeBdListe({bd:x,lment:E}){await Promise.all(x.iterator({limit:-1}).collect().map(async S=>(typeof E=="function"?E(S):deepEqual$1(S.payload.value,E))?await x.remove(S.hash):Promise.resolve()))}async suivreTypeObjet({idObjet:x,f:E}){const S=async A=>{let B;const{type:I}=A;I?B=["motClef","variable","bd","projet","nue"].includes(I)?I:void 0:A.bds?B="projet":A.tableaux?B="bd":A.catgorie?B="variable":A.nom&&(B="motClef"),await E(B)},C={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:x,schma:C,f:S})}async suivreEmpreinteTtesBdRcursive({idBd:x,f:E}){const S=I=>I._oplog.heads[I._oplog.heads.length-1]?.hash||"",C=I=>Base64.stringify(md5(I)),T=async I=>{await E(C(I.sort().join()))},A=async I=>await this.suivreBdsRcursives({idBd:x,f:async M=>await I(M)}),B=async(I,M)=>await this.suivreBd({id:I,f:async O=>{const D=S(O);await M(D)}});return await this.suivreBdsDeFonctionListe({fListe:A,f:T,fBranche:B})}async suivreBdsDeBdListe({id:x,f:E,fBranche:S,fIdBdDeBranche:C=B=>B,fRduction:T=B=>[...new Set(B.flat())],fCode:A=B=>B}){const B=async I=>await this.suivreBdListe({id:x,f:I});return await this.suivreBdsDeFonctionListe({fListe:B,f:E,fBranche:S,fIdBdDeBranche:C,fRduction:T,fCode:A})}async suivreBdsDeFonctionListe({fListe:x,f:E,fBranche:S,fIdBdDeBranche:C=B=>B,fRduction:T=B=>[...new Set(B.flat())],fCode:A=B=>B}){const B={},I={};let M=!1;const O=async()=>{if(!M||Object.values(B).length&&Object.values(B).every(Q=>!Q.djvalue))return;const H=Object.values(B).map(Q=>Q.donnes).filter(Q=>Q!==void 0),W=T(H);await E(W)},D=new s,V=await x(async H=>{if(await D.acquire("racine"),H.some(Y=>typeof A(Y)!="string"))throw console.error("Dfinir fCode si les lments ne sont pas en format texte (chanes)."),new Error("Dfinir fCode si les lments ne sont pas en format texte (chanes).");const W=Object.fromEntries(H.map(Y=>[A(Y),Y])),Q=Object.keys(B);let re=Object.keys(W).filter(Y=>!Q.includes(Y));const ce=Q.filter(Y=>!Object.keys(W).includes(Y)),ne=Object.entries(W).filter(Y=>!deepEqual$1(I[Y[0]],Y[1])).map(Y=>Y[0]);re.push(...ne),re=[...new Set(re)],await Promise.all(ne.map(async Y=>{if(B[Y]){const fe=B[Y].fOublier;fe&&await fe(),delete B[Y]}})),await Promise.all(ce.map(async Y=>{const fe=B[Y].fOublier;fe&&await fe(),delete B[Y]})),await Promise.all(re.map(async Y=>{B[Y]={djvalue:!1};const fe=W[Y];I[Y]=fe;const ge=C(fe),_e=await S(ge,async ae=>{B[Y].donnes=ae,B[Y].djvalue=!0,await O()},fe);B[Y].fOublier=_e})),M=!0,await O(),D.release("racine")});let U;const q=async()=>{await U(),await Promise.all(Object.values(B).map(H=>H.fOublier&&H.fOublier()))};return typeof V=="function"?(U=V,q):(U=V.fOublier,Object.assign({},V,{fOublier:q}))}async suivreBdsDeFonctionRecherche({fListe:x,f:E,fBranche:S,fIdBdDeBranche:C=B=>B,fRduction:T=B=>[...new Set(B.flat())],fCode:A=B=>B}){let B;const I=async D=>{B&&await B(D)},M=async D=>{const{fOublier:L,fChangerProfondeur:V}=await x(D);return B=V,L};return{fOublier:await this.suivreBdsDeFonctionListe({fListe:M,f:E,fBranche:S,fIdBdDeBranche:C,fRduction:T,fCode:A}),fChangerProfondeur:I}}async suivreBdSelonCondition({fRacine:x,fCondition:E,f:S}){const C=async({id:T,fSuivreBd:A})=>await E(T,async B=>{A(B?T:void 0)});return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>await x(T),f:ignorerNonDfinis(S),fSuivre:C})}async suivreBdsSelonCondition({fListe:x,fCondition:E,f:S}){const C=async A=>{const B=A.filter(I=>I.tat).map(I=>I.id);return await S(B)},T=async(A,B)=>await E(A,async M=>await B({id:A,tat:M}));return await this.suivreBdsDeFonctionListe({fListe:x,f:C,fBranche:T})}async rechercherBdListe({id:x,f:E}){const{bd:S,fOublier:C}=await this.ouvrirBd({id:x,type:"feed"}),T=S.iterator({limit:-1}).collect().find(A=>E(A));return await C(),T}async obtFichierSFIP({id:x,max:E}){return await toBuffer$2(this.sfip.cat(x),E)}obtItrableAsyncSFIP({id:x}){return this.sfip.cat(x)}async ajouterSFIP({fichier:x}){return(await this.sfip.add(x)).cid.toString()}dossierOrbite(){let x;const E=this._opts.orbite;return E instanceof OrbitDB?x=E.directory:x=E?.dossier||this.orbite?.orbite.directory,x}dossierSFIP(){let x;const E=this._opts.orbite;return E instanceof OrbitDB||(x=E?.sfip?.dossier),x}obtClefStockageClient({clef:x,parCompte:E=!0}){return E?`${this.idCompte.slice(this.idCompte.length-23,this.idCompte.length-8)} : ${x}`:x}async obtDeStockageLocal({clef:x,parCompte:E=!0}){const S=this.obtClefStockageClient({clef:x,parCompte:E});return(await obtStockageLocal(this.dossierOrbite())).getItem(S)}async sauvegarderAuStockageLocal({clef:x,val:E,parCompte:S=!0}){const C=this.obtClefStockageClient({clef:x,parCompte:S});return(await obtStockageLocal(this.dossierOrbite())).setItem(C,E)}async effacerDeStockageLocal({clef:x,parCompte:E=!0}){const S=this.obtClefStockageClient({clef:x,parCompte:E});return(await obtStockageLocal(this.dossierOrbite())).removeItem(S)}async ouvrirBd({id:x,type:E,schma:S}){return await this.orbite.ouvrirBd({id:x,type:E,schma:S})}async obtIdBd({nom:x,racine:E,type:S}){let C,T;typeof E=="string"?{bd:C,fOublier:T}=await this.ouvrirBd({id:E,type:"kvstore"}):C=E;const A=C.id+":"+x;await this.verrouObtIdBd.acquire(A);let B=C.get(x);const I=await this.obtDeStockageLocal({clef:A});if(B&&I&&B!==I)try{await this.combinerBds({idBdBase:B,idBd2:I}),await this.effacerBd({id:I}),await this.sauvegarderAuStockageLocal({clef:A,val:B})}catch{}if(B&&S)try{const{fOublier:M}=await this.ouvrirBd({id:B,type:S});return await M(),this.verrouObtIdBd.release(A),B}catch{throw this.verrouObtIdBd.release(A),new Error("Bd n'existe pas: "+x+" "+B)}if(!B&&S){const M=C.access;if(await uneFois(D=>M.suivreIdsOrbiteAutorisescriture(async L=>await D(L.includes(this.orbite.identity.id))))){const D=await this.obtOpsAccs({idBd:C.id});B=await this.crerBdIndpendante({type:S,optionsAccs:D}),await C.set(x,B)}}return B&&await this.sauvegarderAuStockageLocal({clef:A,val:B}),T&&await T(),this.verrouObtIdBd.release(A),B}async crerBdIndpendante({type:x,optionsAccs:E,nom:S}){return await this.orbite.crerBdIndpendante({type:x,optionsAccs:Object.assign({},this.optionsAccs,E||{}),nom:S})}async effacerBd({id:x}){return await this.orbite?.effacerBd({id:x})}async obtOpsAccs({idBd:x}){const{bd:E,fOublier:S}=await this.ouvrirBd({id:x}),C=E.access;return await S(),{address:C.bd.id,premierMod:C._premierMod}}async suivrePermission({idObjet:x,f:E}){const{bd:S,fOublier:C}=await this.ouvrirBd({id:x}),T=S.access,A=T.constructor.type;if(A==="ipfs"){const B=this.orbite.identity.id;return await E(T.write.includes(B)?MEMBRE:void 0),await C(),faisRien}else if(A===nomType){const B=async M=>{const O=M.filter(L=>L.idCompte===this.idCompte).map(L=>L.rle),D=O.includes(MODRATEUR)?MODRATEUR:O.includes(MEMBRE)?MEMBRE:void 0;await E(D)},I=await T.suivreUtilisateursAutoriss(B);return async()=>{await I(),await C()}}else throw new Error(`Type d'accs ${A} non reconnu.`)}async suivrePermissioncrire({id:x,f:E}){const S=async C=>{await E(C!==void 0)};return await this.suivrePermission({idObjet:x,f:S})}async suivreAccsBd({id:x,f:E}){const S=async C=>{const T=C.access,A=T.constructor.type;if(A==="ipfs"){const B=T.write.map(I=>({idCompte:I,rle:MODRATEUR}));await E(B)}else if(A===nomType)return await T.suivreUtilisateursAutoriss(E);return faisRien};return await this.suivreBd({id:x,f:S})}async suivreBdsRcursives({idBd:x,f:E}){const S={},C=async()=>{await E(Object.keys(S))},T=new s,A=async O=>{delete S[O],await Promise.all(Object.keys(S).map(async D=>{S[D]&&(S[D].requtes.delete(O),S[D].requtes.size||await S[D].fOublier())}))},B=["copiDe"],I=async(O,D)=>{const L=Q=>Q.map(re=>typeof re=="string"?[re]:Array.isArray(re)?re:typeof re=="object"?Object.values(re):[]).flat().filter(re=>adresseOrbiteValide(re)),V=async Q=>{let re=[];typeof Q=="object"?(re=L(Object.entries(Q).filter(Y=>!B.includes(Y[0])).map(Y=>Y[1])),re.push(...L(Object.keys(Q)))):Array.isArray(Q)?re=L(Q):typeof Q=="string"&&(re=[Q]);const ce=re.filter(Y=>!S[O].sousBds.includes(Y)),ne=S[O].sousBds.filter(Y=>!re.includes(Y));S[O].sousBds=re,await Promise.all(ne.map(async Y=>{S[Y].requtes.delete(O),S[Y].requtes.size||await S[Y].fOublier()})),await Promise.all(ce.map(async Y=>await I(Y,O))),C()};if(await T.acquire(O),S[O]){S[O].requtes.add(D);return}const{bd:U,fOublier:q}=await this.ouvrirBd({id:O}),{type:H}=U;await q(),S[O]={requtes:new Set([D]),sousBds:[],fOublier:async()=>{await W(),await A(O)}};let W;H==="keyvalue"?W=await this.suivreBdDic({id:O,f:V}):H==="feed"?W=await this.suivreBdListe({id:O,f:V}):W=faisRien,T.release(O),C()};return await I(x,""),async()=>{await Promise.all(Object.values(S).map(O=>O.fOublier()))}}async fermerCompte(){this.rseau&&await this.rseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await(await obtStockageLocal(this.dossierOrbite())).fermer?.(),await this.fermerCompte(),this.pingles&&await this.pingles.fermer(),await this.orbite.fermer({arrterOrbite:!this._orbiteExterne}),this.sfip&&!this._sfipExterne&&await this.sfip.stop()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const x=await indexedDB.databases();await Promise.all(x.map(E=>{E.name&&indexedDB.deleteDatabase(E.name)}))}else console.warn("On a pas pu tout effacer.");else{const x=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),E=this.dossierOrbite(),S=this.dossierSFIP();E&&x.rmdirSync(E),S&&x.rmdirSync(S),(await obtStockageLocal()).clear()}}async exporterDispositif({nomFichier:x}){if(isNode||isElectronMain){const E=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),S=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),C=({dossier:M,zip:O})=>{E.readdirSync(M).map(L=>{if(E.statSync(L)?.isDirectory())C({dossier:S.join(M,L),zip:O.folder(L)});else{const U=E.createReadStream(S.join(M,L));O.file(L,U)}})},T=this.dossierOrbite(),A=this.dossierSFIP();if(!T||!A)throw new Error("Constellation pas encore initialise.");const B=await exporterStockageLocal(),I=new JSZip;C({dossier:T,zip:I.folder("orbite")}),C({dossier:A,zip:I.folder("sfip")}),I.file("stockageLocal",B),await sauvegarderFichierZip({fichierZip:I,nomFichier:x})}else if(indexedDB){const E=({bd:C,zip:T})=>{const{name:A}=C;if(A){const B=T.folder(A);if(!B)throw new Error(A);const M=indexedDB.open(A).result.objectStoreNames;[...Array(M.length).keys()].map(D=>M.item(D)).filter(D=>!!D).map(D=>B.file(D,new indexedDbStream.IndexedDbReadStream({databaseName:A,objectStoreName:D})))}},S=new JSZip;if(indexedDB.databases){const C=await indexedDB.databases(),T=S.folder("bdIndexe");if(!T)throw new Error("Erreur Bd Indexe...");C.forEach(A=>{E({bd:A,zip:T})}),S.file("stockageLocal",JSON.stringify(await exporterStockageLocal()))}await sauvegarderFichierZip({fichierZip:S,nomFichier:x})}else throw new Error("Sauvegarde non implment.")}static async crer(x={}){const E=new ClientConstellation(x);return await E.initialiser(),E}}__decorate([cacheSuivi],ClientConstellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreIdCompte",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreEmpreinteTtesBdRcursive",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermissioncrire",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreAccsBd",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreBdsRcursives",null);const ClientConstellation$1=ClientConstellation;class GestionnaireClient{constructor(_,x,E={}){$t(this,"ipa");$t(this,"_messagesEnAttente");$t(this,"prt");$t(this,"dicFRetourSuivi");$t(this,"opts");$t(this,"fMessage");$t(this,"fErreur");$t(this,"_verrou");this.fMessage=_,this.fErreur=x,this.opts=E instanceof ClientConstellation$1?{}:E,E instanceof ClientConstellation$1&&(this.ipa=E),this.dicFRetourSuivi={},this.prt=!1,this._messagesEnAttente=[],this._verrou=new s,this.init()}async init(){if(await this._verrou.acquire("init"),this.ipa){this._verrou.release("init");return}this.ipa=await ClientConstellation$1.crer(this.opts),this._messagesEnAttente.forEach(_=>this._grerMessage(_)),this.prt=!0,this._verrou.release("init")}async grerMessage(_){this.prt?await this._grerMessage(_):this._messagesEnAttente.unshift(_)}async _grerMessage(_){const{type:x}=_;switch(x){case"suivre":{const{id:E}=_;this.ipa||this.fErreur("IPA non initialis",E);const{fonction:S,args:C,nomArgFonction:T}=_,A=this.extraireFonctionIPA(S,E);if(!A)return;const B=I=>{const M={type:"suivre",id:E,donnes:I};this.fMessage(M)};C[T]=B;try{const I=await A(C),M=typeof I=="function"?{fOublier:I}:I;this.dicFRetourSuivi[E]=M;const O={type:"suivrePrt",id:E};typeof I!="function"&&(O.fonctions=Object.keys(I)),this.fMessage(O)}catch(I){this.fErreur(I.toString()+I.stack.toString(),E)}break}case"action":{const{id:E}=_;this.ipa||this.fErreur("IPA non initialis",E);const{fonction:S,args:C}=_,T=this.extraireFonctionIPA(S,E);if(!T)return;try{const A=await T(C),B={type:"action",id:E,rsultat:A};this.fMessage(B)}catch(A){this.fErreur(A.toString()+A.stack.toString(),E)}break}case"retour":{const{id:E,fonction:S,args:C}=_,T=this.dicFRetourSuivi[E];T&&await T[S](C),S==="fOublier"&&delete this.dicFRetourSuivi[E];break}default:{this.fErreur(`Type de requte ${x} non reconnu dans message ${_}`,_.id);break}}}extraireFonctionIPA(_,x){const E=`Fonction ClientConstellation.${_.join(".")} n'existe pas ou n'est pas une fonction.`;let S=this.ipa;for(const[C,T]of _.entries()){if(C===_.length-1)if(typeof S=="object"&&T in S&&S[T])S=S[T].bind(S);else{this.fErreur(E,x);return}else if(typeof S=="object"&&T in S&&S[T])S=S[T];else{this.fErreur(E,x);return}if(!S){this.fErreur(E,x);return}}if(typeof S!="function"){this.fErreur(E,x);return}return S}async fermer(){await this.init(),await this.ipa.fermer()}}class MandataireClientProc extends ClientMandatairifiable{constructor(x={}){super();$t(this,"client");this.client=new GestionnaireClient(E=>{this.vnements.emit("message",E)},(E,S)=>{const C={type:"erreur",id:S,erreur:E};this.vnements.emit("message",C)},x)}envoyerMessage(x){this.client.grerMessage(x)}}const gnrerMandataireProc=(n={})=>gnrerMandataire(new MandataireClientProc(n)),constellationNavigateur={install:n=>{const _=gnrerMandataireProc();n.config.globalProperties.$constl=_,n.provide("constl",_)}};async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-ecfe2495.js").then(_=>_.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="",vuetify=createVuetify({theme:{themes:{light:{colors:{primary:"#1867c0",secondary:"#7bc6ff"}}}}}),i18n=createI18n({locale:"",legacy:!1,allowComposition:!0,missingWarn:!1,fallbackWarn:!1});/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(n,_){const x={};for(const E in _){const S=_[E];x[E]=isArray(S)?S.map(n):n(S)}return x}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,_,x="/"){let E,S={},C="",T="";const A=_.indexOf("#");let B=_.indexOf("?");return A<B&&A>=0&&(B=-1),B>-1&&(E=_.slice(0,B),C=_.slice(B+1,A>-1?A:_.length),S=n(C)),A>-1&&(E=E||_.slice(0,A),T=_.slice(A,_.length)),E=resolveRelativePath(E??_,x),{fullPath:E+(C&&"?")+C+T,path:E,query:S,hash:T}}function stringifyURL(n,_){const x=_.query?n(_.query):"";return _.path+(x&&"?")+x+(_.hash||"")}function stripBase(n,_){return!_||!n.toLowerCase().startsWith(_.toLowerCase())?n:n.slice(_.length)||"/"}function isSameRouteLocation(n,_,x){const E=_.matched.length-1,S=x.matched.length-1;return E>-1&&E===S&&isSameRouteRecord(_.matched[E],x.matched[S])&&isSameRouteLocationParams(_.params,x.params)&&n(_.query)===n(x.query)&&_.hash===x.hash}function isSameRouteRecord(n,_){return(n.aliasOf||n)===(_.aliasOf||_)}function isSameRouteLocationParams(n,_){if(Object.keys(n).length!==Object.keys(_).length)return!1;for(const x in n)if(!isSameRouteLocationParamsValue(n[x],_[x]))return!1;return!0}function isSameRouteLocationParamsValue(n,_){return isArray(n)?isEquivalentArray(n,_):isArray(_)?isEquivalentArray(_,n):n===_}function isEquivalentArray(n,_){return isArray(_)?n.length===_.length&&n.every((x,E)=>x===_[E]):n.length===1&&n[0]===_}function resolveRelativePath(n,_){if(n.startsWith("/"))return n;if(!n)return _;const x=_.split("/"),E=n.split("/"),S=E[E.length-1];(S===".."||S===".")&&E.push("");let C=x.length-1,T,A;for(T=0;T<E.length;T++)if(A=E[T],A!==".")if(A==="..")C>1&&C--;else break;return x.slice(0,C).join("/")+"/"+E.slice(T-(T===E.length?1:0)).join("/")}var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const _=document.querySelector("base");n=_&&_.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,_){return n.replace(BEFORE_HASH_RE,"#")+_}function getElementPosition(n,_){const x=document.documentElement.getBoundingClientRect(),E=n.getBoundingClientRect();return{behavior:_.behavior,left:E.left-x.left-(_.left||0),top:E.top-x.top-(_.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(n){let _;if("el"in n){const x=n.el,E=typeof x=="string"&&x.startsWith("#"),S=typeof x=="string"?E?document.getElementById(x.slice(1)):document.querySelector(x):x;if(!S)return;_=getElementPosition(S,n)}else _=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(_):window.scrollTo(_.left!=null?_.left:window.pageXOffset,_.top!=null?_.top:window.pageYOffset)}function getScrollKey(n,_){return(history.state?history.state.position-_:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,_){scrollPositions.set(n,_)}function getSavedScrollPosition(n){const _=scrollPositions.get(n);return scrollPositions.delete(n),_}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,_){const{pathname:x,search:E,hash:S}=_,C=n.indexOf("#");if(C>-1){let A=S.includes(n.slice(C))?n.slice(C).length:1,B=S.slice(A);return B[0]!=="/"&&(B="/"+B),stripBase(B,"")}return stripBase(x,n)+E+S}function useHistoryListeners(n,_,x,E){let S=[],C=[],T=null;const A=({state:D})=>{const L=createCurrentLocation(n,location),V=x.value,U=_.value;let q=0;if(D){if(x.value=L,_.value=D,T&&T===V){T=null;return}q=U?D.position-U.position:0}else E(L);S.forEach(H=>{H(x.value,V,{delta:q,type:NavigationType.pop,direction:q?q>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function B(){T=x.value}function I(D){S.push(D);const L=()=>{const V=S.indexOf(D);V>-1&&S.splice(V,1)};return C.push(L),L}function M(){const{history:D}=window;D.state&&D.replaceState(assign({},D.state,{scroll:computeScrollPosition()}),"")}function O(){for(const D of C)D();C=[],window.removeEventListener("popstate",A),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",A),window.addEventListener("beforeunload",M,{passive:!0}),{pauseListeners:B,listen:I,destroy:O}}function buildState(n,_,x,E=!1,S=!1){return{back:n,current:_,forward:x,replaced:E,position:window.history.length,scroll:S?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:_,location:x}=window,E={value:createCurrentLocation(n,x)},S={value:_.state};S.value||C(E.value,{back:null,current:E.value,forward:null,position:_.length-1,replaced:!0,scroll:null},!0);function C(B,I,M){const O=n.indexOf("#"),D=O>-1?(x.host&&document.querySelector("base")?n:n.slice(O))+B:createBaseLocation()+n+B;try{_[M?"replaceState":"pushState"](I,"",D),S.value=I}catch(L){console.error(L),x[M?"replace":"assign"](D)}}function T(B,I){const M=assign({},_.state,buildState(S.value.back,B,S.value.forward,!0),I,{position:S.value.position});C(B,M,!0),E.value=B}function A(B,I){const M=assign({},S.value,_.state,{forward:B,scroll:computeScrollPosition()});C(M.current,M,!0);const O=assign({},buildState(E.value,B,null),{position:M.position+1},I);C(B,O,!1),E.value=B}return{location:E,state:S,push:A,replace:T}}function createWebHistory(n){n=normalizeBase(n);const _=useHistoryStateNavigation(n),x=useHistoryListeners(n,_.state,_.location,_.replace);function E(C,T=!0){T||x.pauseListeners(),history.go(C)}const S=assign({location:"",base:n,go:E,createHref:createHref.bind(null,n)},_,x);return Object.defineProperty(S,"location",{enumerable:!0,get:()=>_.location.value}),Object.defineProperty(S,"state",{enumerable:!0,get:()=>_.state.value}),S}function createWebHashHistory(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),createWebHistory(n)}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,_){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},_)}function isNavigationFailure(n,_){return n instanceof Error&&NavigationFailureSymbol in n&&(_==null||!!(n.type&_))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,_){const x=assign({},BASE_PATH_PARSER_OPTIONS,_),E=[];let S=x.start?"^":"";const C=[];for(const I of n){const M=I.length?[]:[90];x.strict&&!I.length&&(S+="/");for(let O=0;O<I.length;O++){const D=I[O];let L=40+(x.sensitive?.25:0);if(D.type===0)O||(S+="/"),S+=D.value.replace(REGEX_CHARS_RE,"\\$&"),L+=40;else if(D.type===1){const{value:V,repeatable:U,optional:q,regexp:H}=D;C.push({name:V,repeatable:U,optional:q});const W=H||BASE_PARAM_PATTERN;if(W!==BASE_PARAM_PATTERN){L+=10;try{new RegExp(`(${W})`)}catch(re){throw new Error(`Invalid custom RegExp for param "${V}" (${W}): `+re.message)}}let Q=U?`((?:${W})(?:/(?:${W}))*)`:`(${W})`;O||(Q=q&&I.length<2?`(?:/${Q})`:"/"+Q),q&&(Q+="?"),S+=Q,L+=20,q&&(L+=-8),U&&(L+=-20),W===".*"&&(L+=-50)}M.push(L)}E.push(M)}if(x.strict&&x.end){const I=E.length-1;E[I][E[I].length-1]+=.7000000000000001}x.strict||(S+="/?"),x.end?S+="$":x.strict&&(S+="(?:/|$)");const T=new RegExp(S,x.sensitive?"":"i");function A(I){const M=I.match(T),O={};if(!M)return null;for(let D=1;D<M.length;D++){const L=M[D]||"",V=C[D-1];O[V.name]=L&&V.repeatable?L.split("/"):L}return O}function B(I){let M="",O=!1;for(const D of n){(!O||!M.endsWith("/"))&&(M+="/"),O=!1;for(const L of D)if(L.type===0)M+=L.value;else if(L.type===1){const{value:V,repeatable:U,optional:q}=L,H=V in I?I[V]:"";if(isArray(H)&&!U)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const W=isArray(H)?H.join("/"):H;if(!W)if(q)D.length<2&&(M.endsWith("/")?M=M.slice(0,-1):O=!0);else throw new Error(`Missing required param "${V}"`);M+=W}}return M||"/"}return{re:T,score:E,keys:C,parse:A,stringify:B}}function compareScoreArray(n,_){let x=0;for(;x<n.length&&x<_.length;){const E=_[x]-n[x];if(E)return E;x++}return n.length<_.length?n.length===1&&n[0]===40+40?-1:1:n.length>_.length?_.length===1&&_[0]===40+40?1:-1:0}function comparePathParserScore(n,_){let x=0;const E=n.score,S=_.score;for(;x<E.length&&x<S.length;){const C=compareScoreArray(E[x],S[x]);if(C)return C;x++}if(Math.abs(S.length-E.length)===1){if(isLastScoreNegative(E))return 1;if(isLastScoreNegative(S))return-1}return S.length-E.length}function isLastScoreNegative(n){const _=n[n.length-1];return n.length>0&&_[_.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function _(L){throw new Error(`ERR (${x})/"${I}": ${L}`)}let x=0,E=x;const S=[];let C;function T(){C&&S.push(C),C=[]}let A=0,B,I="",M="";function O(){I&&(x===0?C.push({type:0,value:I}):x===1||x===2||x===3?(C.length>1&&(B==="*"||B==="+")&&_(`A repeatable param (${I}) must be alone in its segment. eg: '/:ids+.`),C.push({type:1,value:I,regexp:M,repeatable:B==="*"||B==="+",optional:B==="*"||B==="?"})):_("Invalid state to consume buffer"),I="")}function D(){I+=B}for(;A<n.length;){if(B=n[A++],B==="\\"&&x!==2){E=x,x=4;continue}switch(x){case 0:B==="/"?(I&&O(),T()):B===":"?(O(),x=1):D();break;case 4:D(),x=E;break;case 1:B==="("?x=2:VALID_PARAM_RE.test(B)?D():(O(),x=0,B!=="*"&&B!=="?"&&B!=="+"&&A--);break;case 2:B===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+B:x=3:M+=B;break;case 3:O(),x=0,B!=="*"&&B!=="?"&&B!=="+"&&A--,M="";break;default:_("Unknown state");break}}return x===2&&_(`Unfinished custom RegExp for param "${I}"`),O(),T(),S}function createRouteRecordMatcher(n,_,x){const E=tokensToParser(tokenizePath(n.path),x),S=assign(E,{record:n,parent:_,children:[],alias:[]});return _&&!S.record.aliasOf==!_.record.aliasOf&&_.children.push(S),S}function createRouterMatcher(n,_){const x=[],E=new Map;_=mergeOptions({strict:!1,end:!0,sensitive:!1},_);function S(M){return E.get(M)}function C(M,O,D){const L=!D,V=normalizeRouteRecord(M);V.aliasOf=D&&D.record;const U=mergeOptions(_,M),q=[V];if("alias"in M){const Q=typeof M.alias=="string"?[M.alias]:M.alias;for(const re of Q)q.push(assign({},V,{components:D?D.record.components:V.components,path:re,aliasOf:D?D.record:V}))}let H,W;for(const Q of q){const{path:re}=Q;if(O&&re[0]!=="/"){const ce=O.record.path,ne=ce[ce.length-1]==="/"?"":"/";Q.path=O.record.path+(re&&ne+re)}if(H=createRouteRecordMatcher(Q,O,U),D?D.alias.push(H):(W=W||H,W!==H&&W.alias.push(H),L&&M.name&&!isAliasRecord(H)&&T(M.name)),V.children){const ce=V.children;for(let ne=0;ne<ce.length;ne++)C(ce[ne],H,D&&D.children[ne])}D=D||H,(H.record.components&&Object.keys(H.record.components).length||H.record.name||H.record.redirect)&&B(H)}return W?()=>{T(W)}:noop}function T(M){if(isRouteName(M)){const O=E.get(M);O&&(E.delete(M),x.splice(x.indexOf(O),1),O.children.forEach(T),O.alias.forEach(T))}else{const O=x.indexOf(M);O>-1&&(x.splice(O,1),M.record.name&&E.delete(M.record.name),M.children.forEach(T),M.alias.forEach(T))}}function A(){return x}function B(M){let O=0;for(;O<x.length&&comparePathParserScore(M,x[O])>=0&&(M.record.path!==x[O].record.path||!isRecordChildOf(M,x[O]));)O++;x.splice(O,0,M),M.record.name&&!isAliasRecord(M)&&E.set(M.record.name,M)}function I(M,O){let D,L={},V,U;if("name"in M&&M.name){if(D=E.get(M.name),!D)throw createRouterError(1,{location:M});U=D.record.name,L=assign(paramsFromLocation(O.params,D.keys.filter(W=>!W.optional).map(W=>W.name)),M.params&&paramsFromLocation(M.params,D.keys.map(W=>W.name))),V=D.stringify(L)}else if("path"in M)V=M.path,D=x.find(W=>W.re.test(V)),D&&(L=D.parse(V),U=D.record.name);else{if(D=O.name?E.get(O.name):x.find(W=>W.re.test(O.path)),!D)throw createRouterError(1,{location:M,currentLocation:O});U=D.record.name,L=assign({},O.params,M.params),V=D.stringify(L)}const q=[];let H=D;for(;H;)q.unshift(H.record),H=H.parent;return{name:U,path:V,params:L,matched:q,meta:mergeMetaFields(q)}}return n.forEach(M=>C(M)),{addRoute:C,resolve:I,removeRoute:T,getRoutes:A,getRecordMatcher:S}}function paramsFromLocation(n,_){const x={};for(const E of _)E in n&&(x[E]=n[E]);return x}function normalizeRouteRecord(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function normalizeRecordProps(n){const _={},x=n.props||!1;if("component"in n)_.default=x;else for(const E in n.components)_[E]=typeof x=="object"?x[E]:x;return _}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((_,x)=>assign(_,x.meta),{})}function mergeOptions(n,_){const x={};for(const E in n)x[E]=E in _?_[E]:n[E];return x}function isRecordChildOf(n,_){return _.children.some(x=>x===n||isRecordChildOf(n,x))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function parseQuery(n){const _={};if(n===""||n==="?")return _;const E=(n[0]==="?"?n.slice(1):n).split("&");for(let S=0;S<E.length;++S){const C=E[S].replace(PLUS_RE," "),T=C.indexOf("="),A=decode(T<0?C:C.slice(0,T)),B=T<0?null:decode(C.slice(T+1));if(A in _){let I=_[A];isArray(I)||(I=_[A]=[I]),I.push(B)}else _[A]=B}return _}function stringifyQuery(n){let _="";for(let x in n){const E=n[x];if(x=encodeQueryKey(x),E==null){E!==void 0&&(_+=(_.length?"&":"")+x);continue}(isArray(E)?E.map(C=>C&&encodeQueryValue(C)):[E&&encodeQueryValue(E)]).forEach(C=>{C!==void 0&&(_+=(_.length?"&":"")+x,C!=null&&(_+="="+C))})}return _}function normalizeQuery(n){const _={};for(const x in n){const E=n[x];E!==void 0&&(_[x]=isArray(E)?E.map(S=>S==null?null:""+S):E==null?E:""+E)}return _}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function _(E){return n.push(E),()=>{const S=n.indexOf(E);S>-1&&n.splice(S,1)}}function x(){n=[]}return{add:_,list:()=>n.slice(),reset:x}}function guardToPromiseFn(n,_,x,E,S){const C=E&&(E.enterCallbacks[S]=E.enterCallbacks[S]||[]);return()=>new Promise((T,A)=>{const B=O=>{O===!1?A(createRouterError(4,{from:x,to:_})):O instanceof Error?A(O):isRouteLocation(O)?A(createRouterError(2,{from:_,to:O})):(C&&E.enterCallbacks[S]===C&&typeof O=="function"&&C.push(O),T())},I=n.call(E&&E.instances[S],_,x,B);let M=Promise.resolve(I);n.length<3&&(M=M.then(B)),M.catch(O=>A(O))})}function extractComponentsGuards(n,_,x,E){const S=[];for(const C of n)for(const T in C.components){let A=C.components[T];if(!(_!=="beforeRouteEnter"&&!C.instances[T]))if(isRouteComponent(A)){const I=(A.__vccOpts||A)[_];I&&S.push(guardToPromiseFn(I,x,E,C,T))}else{let B=A();S.push(()=>B.then(I=>{if(!I)return Promise.reject(new Error(`Couldn't resolve component "${T}" at "${C.path}"`));const M=isESModule(I)?I.default:I;C.components[T]=M;const D=(M.__vccOpts||M)[_];return D&&guardToPromiseFn(D,x,E,C,T)()}))}}return S}function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function useLink(n){const _=inject$1(routerKey),x=inject$1(routeLocationKey),E=computed(()=>_.resolve(unref(n.to))),S=computed(()=>{const{matched:B}=E.value,{length:I}=B,M=B[I-1],O=x.matched;if(!M||!O.length)return-1;const D=O.findIndex(isSameRouteRecord.bind(null,M));if(D>-1)return D;const L=getOriginalPath(B[I-2]);return I>1&&getOriginalPath(M)===L&&O[O.length-1].path!==L?O.findIndex(isSameRouteRecord.bind(null,B[I-2])):D}),C=computed(()=>S.value>-1&&includesParams(x.params,E.value.params)),T=computed(()=>S.value>-1&&S.value===x.matched.length-1&&isSameRouteLocationParams(x.params,E.value.params));function A(B={}){return guardEvent(B)?_[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop):Promise.resolve()}return{route:E,href:computed(()=>E.value.href),isActive:C,isExactActive:T,navigate:A}}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(n,{slots:_}){const x=reactive(useLink(n)),{options:E}=inject$1(routerKey),S=computed(()=>({[getLinkClass(n.activeClass,E.linkActiveClass,"router-link-active")]:x.isActive,[getLinkClass(n.exactActiveClass,E.linkExactActiveClass,"router-link-exact-active")]:x.isExactActive}));return()=>{const C=_.default&&_.default(x);return n.custom?C:h$1("a",{"aria-current":x.isExactActive?n.ariaCurrentValue:null,href:x.href,onClick:x.navigate,class:S.value},C)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const _=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(_))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,_){for(const x in _){const E=_[x],S=n[x];if(typeof E=="string"){if(E!==S)return!1}else if(!isArray(S)||S.length!==E.length||E.some((C,T)=>C!==S[T]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,_,x)=>n??_??x,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:_,slots:x}){const E=inject$1(routerViewLocationKey),S=computed(()=>n.route||E.value),C=inject$1(viewDepthKey,0),T=computed(()=>{let I=unref(C);const{matched:M}=S.value;let O;for(;(O=M[I])&&!O.components;)I++;return I}),A=computed(()=>S.value.matched[T.value]);provide(viewDepthKey,computed(()=>T.value+1)),provide(matchedRouteKey,A),provide(routerViewLocationKey,S);const B=ref$1();return watch(()=>[B.value,A.value,n.name],([I,M,O],[D,L,V])=>{M&&(M.instances[O]=I,L&&L!==M&&I&&I===D&&(M.leaveGuards.size||(M.leaveGuards=L.leaveGuards),M.updateGuards.size||(M.updateGuards=L.updateGuards))),I&&M&&(!L||!isSameRouteRecord(M,L)||!D)&&(M.enterCallbacks[O]||[]).forEach(U=>U(I))},{flush:"post"}),()=>{const I=S.value,M=n.name,O=A.value,D=O&&O.components[M];if(!D)return normalizeSlot(x.default,{Component:D,route:I});const L=O.props[M],V=L?L===!0?I.params:typeof L=="function"?L(I):L:null,q=h$1(D,assign({},V,_,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(O.instances[M]=null)},ref:B}));return normalizeSlot(x.default,{Component:q,route:I})||q}}});function normalizeSlot(n,_){if(!n)return null;const x=n(_);return x.length===1?x[0]:x}const RouterView=RouterViewImpl;function createRouter(n){const _=createRouterMatcher(n.routes,n),x=n.parseQuery||parseQuery,E=n.stringifyQuery||stringifyQuery,S=n.history,C=useCallbacks(),T=useCallbacks(),A=useCallbacks(),B=shallowRef(START_LOCATION_NORMALIZED);let I=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=applyToParams.bind(null,we=>""+we),O=applyToParams.bind(null,encodeParam),D=applyToParams.bind(null,decode);function L(we,xe){let Ee,ye;return isRouteName(we)?(Ee=_.getRecordMatcher(we),ye=xe):ye=we,_.addRoute(ye,Ee)}function V(we){const xe=_.getRecordMatcher(we);xe&&_.removeRoute(xe)}function U(){return _.getRoutes().map(we=>we.record)}function q(we){return!!_.getRecordMatcher(we)}function H(we,xe){if(xe=assign({},xe||B.value),typeof we=="string"){const me=parseURL(x,we,xe.path),Ie=_.resolve({path:me.path},xe),Ve=S.createHref(me.fullPath);return assign(me,Ie,{params:D(Ie.params),hash:decode(me.hash),redirectedFrom:void 0,href:Ve})}let Ee;if("path"in we)Ee=assign({},we,{path:parseURL(x,we.path,xe.path).path});else{const me=assign({},we.params);for(const Ie in me)me[Ie]==null&&delete me[Ie];Ee=assign({},we,{params:O(me)}),xe.params=O(xe.params)}const ye=_.resolve(Ee,xe),Ce=we.hash||"";ye.params=M(D(ye.params));const ve=stringifyURL(E,assign({},we,{hash:encodeHash(Ce),path:ye.path})),Be=S.createHref(ve);return assign({fullPath:ve,hash:Ce,query:E===stringifyQuery?normalizeQuery(we.query):we.query||{}},ye,{redirectedFrom:void 0,href:Be})}function W(we){return typeof we=="string"?parseURL(x,we,B.value.path):assign({},we)}function Q(we,xe){if(I!==we)return createRouterError(8,{from:xe,to:we})}function re(we){return Y(we)}function ce(we){return re(assign(W(we),{replace:!0}))}function ne(we){const xe=we.matched[we.matched.length-1];if(xe&&xe.redirect){const{redirect:Ee}=xe;let ye=typeof Ee=="function"?Ee(we):Ee;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=W(ye):{path:ye},ye.params={}),assign({query:we.query,hash:we.hash,params:"path"in ye?{}:we.params},ye)}}function Y(we,xe){const Ee=I=H(we),ye=B.value,Ce=we.state,ve=we.force,Be=we.replace===!0,me=ne(Ee);if(me)return Y(assign(W(me),{state:typeof me=="object"?assign({},Ce,me.state):Ce,force:ve,replace:Be}),xe||Ee);const Ie=Ee;Ie.redirectedFrom=xe;let Ve;return!ve&&isSameRouteLocation(E,ye,Ee)&&(Ve=createRouterError(16,{to:Ie,from:ye}),G(ye,ye,!0,!1)),(Ve?Promise.resolve(Ve):$e(Ie,ye)).catch(Me=>isNavigationFailure(Me)?isNavigationFailure(Me,2)?Me:ie(Me):se(Me,Ie,ye)).then(Me=>{if(Me){if(isNavigationFailure(Me,2))return Y(assign({replace:Be},W(Me.to),{state:typeof Me.to=="object"?assign({},Ce,Me.to.state):Ce,force:ve}),xe||Ie)}else Me=ae(Ie,ye,!0,Be,Ce);return _e(Ie,ye,Me),Me})}function fe(we,xe){const Ee=Q(we,xe);return Ee?Promise.reject(Ee):Promise.resolve()}function ge(we){const xe=pe.values().next().value;return xe&&typeof xe.runWithContext=="function"?xe.runWithContext(we):we()}function $e(we,xe){let Ee;const[ye,Ce,ve]=extractChangingRecords(we,xe);Ee=extractComponentsGuards(ye.reverse(),"beforeRouteLeave",we,xe);for(const me of ye)me.leaveGuards.forEach(Ie=>{Ee.push(guardToPromiseFn(Ie,we,xe))});const Be=fe.bind(null,we,xe);return Ee.push(Be),Se(Ee).then(()=>{Ee=[];for(const me of C.list())Ee.push(guardToPromiseFn(me,we,xe));return Ee.push(Be),Se(Ee)}).then(()=>{Ee=extractComponentsGuards(Ce,"beforeRouteUpdate",we,xe);for(const me of Ce)me.updateGuards.forEach(Ie=>{Ee.push(guardToPromiseFn(Ie,we,xe))});return Ee.push(Be),Se(Ee)}).then(()=>{Ee=[];for(const me of ve)if(me.beforeEnter)if(isArray(me.beforeEnter))for(const Ie of me.beforeEnter)Ee.push(guardToPromiseFn(Ie,we,xe));else Ee.push(guardToPromiseFn(me.beforeEnter,we,xe));return Ee.push(Be),Se(Ee)}).then(()=>(we.matched.forEach(me=>me.enterCallbacks={}),Ee=extractComponentsGuards(ve,"beforeRouteEnter",we,xe),Ee.push(Be),Se(Ee))).then(()=>{Ee=[];for(const me of T.list())Ee.push(guardToPromiseFn(me,we,xe));return Ee.push(Be),Se(Ee)}).catch(me=>isNavigationFailure(me,8)?me:Promise.reject(me))}function _e(we,xe,Ee){A.list().forEach(ye=>ge(()=>ye(we,xe,Ee)))}function ae(we,xe,Ee,ye,Ce){const ve=Q(we,xe);if(ve)return ve;const Be=xe===START_LOCATION_NORMALIZED,me=isBrowser?history.state:{};Ee&&(ye||Be?S.replace(we.fullPath,assign({scroll:Be&&me&&me.scroll},Ce)):S.push(we.fullPath,Ce)),B.value=we,G(we,xe,Ee,Be),ie()}let X;function F(){X||(X=S.listen((we,xe,Ee)=>{if(!he.listening)return;const ye=H(we),Ce=ne(ye);if(Ce){Y(assign(Ce,{replace:!0}),ye).catch(noop);return}I=ye;const ve=B.value;isBrowser&&saveScrollPosition(getScrollKey(ve.fullPath,Ee.delta),computeScrollPosition()),$e(ye,ve).catch(Be=>isNavigationFailure(Be,12)?Be:isNavigationFailure(Be,2)?(Y(Be.to,ye).then(me=>{isNavigationFailure(me,20)&&!Ee.delta&&Ee.type===NavigationType.pop&&S.go(-1,!1)}).catch(noop),Promise.reject()):(Ee.delta&&S.go(-Ee.delta,!1),se(Be,ye,ve))).then(Be=>{Be=Be||ae(ye,ve,!1),Be&&(Ee.delta&&!isNavigationFailure(Be,8)?S.go(-Ee.delta,!1):Ee.type===NavigationType.pop&&isNavigationFailure(Be,20)&&S.go(-1,!1)),_e(ye,ve,Be)}).catch(noop)}))}let z=useCallbacks(),J=useCallbacks(),te;function se(we,xe,Ee){ie(we);const ye=J.list();return ye.length?ye.forEach(Ce=>Ce(we,xe,Ee)):console.error(we),Promise.reject(we)}function oe(){return te&&B.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((we,xe)=>{z.add([we,xe])})}function ie(we){return te||(te=!we,F(),z.list().forEach(([xe,Ee])=>we?Ee(we):xe()),z.reset()),we}function G(we,xe,Ee,ye){const{scrollBehavior:Ce}=n;if(!isBrowser||!Ce)return Promise.resolve();const ve=!Ee&&getSavedScrollPosition(getScrollKey(we.fullPath,0))||(ye||!Ee)&&history.state&&history.state.scroll||null;return nextTick$2().then(()=>Ce(we,xe,ve)).then(Be=>Be&&scrollToPosition(Be)).catch(Be=>se(Be,we,xe))}const j=we=>S.go(we);let ee;const pe=new Set,he={currentRoute:B,listening:!0,addRoute:L,removeRoute:V,hasRoute:q,getRoutes:U,resolve:H,options:n,push:re,replace:ce,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:C.add,beforeResolve:T.add,afterEach:A.add,onError:J.add,isReady:oe,install(we){const xe=this;we.component("RouterLink",RouterLink),we.component("RouterView",RouterView),we.config.globalProperties.$router=xe,Object.defineProperty(we.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(B)}),isBrowser&&!ee&&B.value===START_LOCATION_NORMALIZED&&(ee=!0,re(S.location).catch(Ce=>{}));const Ee={};for(const Ce in START_LOCATION_NORMALIZED)Object.defineProperty(Ee,Ce,{get:()=>B.value[Ce],enumerable:!0});we.provide(routerKey,xe),we.provide(routeLocationKey,shallowReactive(Ee)),we.provide(routerViewLocationKey,B);const ye=we.unmount;pe.add(we),we.unmount=function(){pe.delete(we),pe.size<1&&(I=START_LOCATION_NORMALIZED,X&&X(),X=null,B.value=START_LOCATION_NORMALIZED,ee=!1,te=!1),ye()}}};function Se(we){return we.reduce((xe,Ee)=>xe.then(()=>ge(Ee)),Promise.resolve())}return he}function extractChangingRecords(n,_){const x=[],E=[],S=[],C=Math.max(_.matched.length,n.matched.length);for(let T=0;T<C;T++){const A=_.matched[T];A&&(n.matched.find(I=>isSameRouteRecord(I,A))?E.push(A):x.push(A));const B=n.matched[T];B&&(_.matched.find(I=>isSameRouteRecord(I,B))||S.push(B))}return[x,E,S]}const _hoisted_1$a={class:"text-h2"},_hoisted_2$4={key:2,class:"text-h4 mb-5"},_sfc_main$t=defineComponent$1({__name:"TitrePage",props:{titre:{type:String,required:!0},sousTitre:{type:String,default:""},image:{type:String,default:void 0},imageRonde:{type:Boolean,default:!0}},setup(n){const{mdAndUp:_}=useDisplay();return(x,E)=>(openBlock(),createBlock(VContainer,{class:normalizeClass({"mt-3":!0,"pb-0":!!n.image,"text-center":!0})},{default:withCtx(()=>[createBaseVNode("h1",_hoisted_1$a,toDisplayString$1(n.titre),1),n.image&&n.imageRonde?(openBlock(),createBlock(VAvatar,{key:0,size:unref(_)?275:175},{default:withCtx(()=>[createVNode(VImg,{src:n.image},null,8,["src"])]),_:1},8,["size"])):n.image?(openBlock(),createBlock(VImg,{key:1,src:n.image,contain:"",height:"175"},null,8,["src"])):createCommentVNode("",!0),n.sousTitre?(openBlock(),createElementBlock("h2",_hoisted_2$4,toDisplayString$1(n.sousTitre),1)):createCommentVNode("",!0)]),_:1},8,["class"]))}}),_sfc_main$s=defineComponent$1({__name:"PageAccueil",setup(n){const{useI18n:_}=_(),{t:x}=_();return(E,S)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$t,{titre:unref(x)(".")},null,8,["titre"])]),_:1}))}}),VAutocomplete$1="",VSelectionControl$1="",VSelectionControlGroup$1="",VSelectionControlGroupSymbol=Symbol.for("vuetify:selection-control-group"),makeSelectionControlGroupProps=propsFactory({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:IconValue,trueIcon:IconValue,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:deepEqual$3},...makeComponentProps(),...makeDensityProps(),...makeThemeProps()},"SelectionControlGroup"),makeVSelectionControlGroupProps=propsFactory({...makeSelectionControlGroupProps({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),VSelectionControlGroup=genericComponent()({name:"VSelectionControlGroup",props:makeVSelectionControlGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),S=getUid(),C=computed(()=>n.id||`v-selection-control-group-${S}`),T=computed(()=>n.name||C.value),A=new Set;return provide(VSelectionControlGroupSymbol,{modelValue:E,forceUpdate:()=>{A.forEach(B=>B())},onForceUpdate:B=>{A.add(B),onScopeDispose(()=>{A.delete(B)})}}),provideDefaults({[n.defaultsTarget]:{color:toRef(n,"color"),disabled:toRef(n,"disabled"),density:toRef(n,"density"),error:toRef(n,"error"),inline:toRef(n,"inline"),modelValue:E,multiple:computed(()=>!!n.multiple||n.multiple==null&&Array.isArray(E.value)),name:T,falseIcon:toRef(n,"falseIcon"),trueIcon:toRef(n,"trueIcon"),readonly:toRef(n,"readonly"),ripple:toRef(n,"ripple"),type:toRef(n,"type"),valueComparator:toRef(n,"valueComparator")}}),useRender(()=>createVNode("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":n.inline},n.class],style:n.style,role:n.type==="radio"?"radiogroup":void 0},[x.default?.()])),{}}}),makeVSelectionControlProps=propsFactory({label:String,trueValue:null,falseValue:null,value:null,...makeComponentProps(),...makeSelectionControlGroupProps()},"VSelectionControl");function useSelectionControl(n){const _=inject$1(VSelectionControlGroupSymbol,void 0),{densityClasses:x}=useDensity(n),E=useProxiedModel(n,"modelValue"),S=computed(()=>n.trueValue!==void 0?n.trueValue:n.value!==void 0?n.value:!0),C=computed(()=>n.falseValue!==void 0?n.falseValue:!1),T=computed(()=>!!n.multiple||n.multiple==null&&Array.isArray(E.value)),A=computed({get(){const O=_?_.modelValue.value:E.value;return T.value?O.some(D=>n.valueComparator(D,S.value)):n.valueComparator(O,S.value)},set(O){if(n.readonly)return;const D=O?S.value:C.value;let L=D;T.value&&(L=O?[...wrapInArray(E.value),D]:wrapInArray(E.value).filter(V=>!n.valueComparator(V,S.value))),_?_.modelValue.value=L:E.value=L}}),{textColorClasses:B,textColorStyles:I}=useTextColor(computed(()=>A.value&&!n.error&&!n.disabled?n.color:void 0)),M=computed(()=>A.value?n.trueIcon:n.falseIcon);return{group:_,densityClasses:x,trueValue:S,falseValue:C,model:A,textColorClasses:B,textColorStyles:I,icon:M}}const VSelectionControl=genericComponent()({name:"VSelectionControl",directives:{Ripple},inheritAttrs:!1,props:makeVSelectionControlProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{attrs:x,slots:E}=_;const{group:S,densityClasses:C,icon:T,model:A,textColorClasses:B,textColorStyles:I,trueValue:M}=useSelectionControl(n),O=getUid(),D=computed(()=>n.id||`input-${O}`),L=shallowRef(!1),V=shallowRef(!1),U=ref$1();S?.onForceUpdate(()=>{U.value&&(U.value.checked=A.value)});function q(Q){L.value=!0,matchesSelector(Q.target,":focus-visible")!==!1&&(V.value=!0)}function H(){L.value=!1,V.value=!1}function W(Q){n.readonly&&S&&nextTick$2(()=>S.forceUpdate()),A.value=Q.target.checked}return useRender(()=>{const Q=E.label?E.label({label:n.label,props:{for:D.value}}):n.label,[re,ce]=filterInputAttrs(x),ne=createVNode("input",mergeProps({ref:U,checked:A.value,disabled:!!(n.readonly||n.disabled),id:D.value,onBlur:H,onFocus:q,onInput:W,"aria-disabled":!!(n.readonly||n.disabled),type:n.type,value:M.value,name:n.name,"aria-checked":n.type==="checkbox"?A.value:void 0},ce),null);return createVNode("div",mergeProps({class:["v-selection-control",{"v-selection-control--dirty":A.value,"v-selection-control--disabled":n.disabled,"v-selection-control--error":n.error,"v-selection-control--focused":L.value,"v-selection-control--focus-visible":V.value,"v-selection-control--inline":n.inline},C.value,n.class]},re,{style:n.style}),[createVNode("div",{class:["v-selection-control__wrapper",B.value],style:I.value},[E.default?.(),withDirectives(createVNode("div",{class:["v-selection-control__input"]},[E.input?.({model:A,textColorClasses:B,textColorStyles:I,inputNode:ne,icon:T.value,props:{onFocus:q,onBlur:H,id:D.value}})??createVNode(Fragment,null,[T.value&&createVNode(VIcon,{key:"icon",icon:T.value},null),ne])]),[[resolveDirective("ripple"),n.ripple&&[!n.disabled&&!n.readonly,null,["center","circle"]]]])]),Q&&createVNode(VLabel,{for:D.value,clickable:!0,onClick:Y=>Y.stopPropagation()},{default:()=>[Q]})])}),{isFocused:L,input:U}}}),makeVCheckboxBtnProps=propsFactory({indeterminate:Boolean,indeterminateIcon:{type:IconValue,default:"$checkboxIndeterminate"},...makeVSelectionControlProps({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),VCheckboxBtn=genericComponent()({name:"VCheckboxBtn",props:makeVCheckboxBtnProps(),emits:{"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"indeterminate"),S=useProxiedModel(n,"modelValue");function C(B){E.value&&(E.value=!1)}const T=computed(()=>E.value?n.indeterminateIcon:n.falseIcon),A=computed(()=>E.value?n.indeterminateIcon:n.trueIcon);return useRender(()=>{const B=omit(VSelectionControl.filterProps(n)[0],["modelValue"]);return createVNode(VSelectionControl,mergeProps(B,{modelValue:S.value,"onUpdate:modelValue":[I=>S.value=I,C],class:["v-checkbox-btn",n.class],style:n.style,type:"checkbox",falseIcon:T.value,trueIcon:A.value,"aria-checked":E.value?"mixed":void 0}),x)}),{}}}),VChip$1="",VChipGroup="",VChipGroupSymbol=Symbol.for("vuetify:v-chip-group"),makeVChipGroupProps=propsFactory({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:deepEqual$3},...makeComponentProps(),...makeGroupProps({selectedClass:"v-chip--selected"}),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChipGroup");genericComponent()({name:"VChipGroup",props:makeVChipGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const{themeClasses:E}=provideTheme(n),{isSelected:S,select:C,next:T,prev:A,selected:B}=useGroup(n,VChipGroupSymbol);return provideDefaults({VChip:{color:toRef(n,"color"),disabled:toRef(n,"disabled"),filter:toRef(n,"filter"),variant:toRef(n,"variant")}}),useRender(()=>createVNode(n.tag,{class:["v-chip-group",{"v-chip-group--column":n.column},E.value,n.class],style:n.style},{default:()=>[x.default?.({isSelected:S,select:C,next:T,prev:A,selected:B.value})]})),{}}});const makeVChipProps=propsFactory({activeClass:String,appendAvatar:String,appendIcon:IconValue,closable:Boolean,closeIcon:{type:IconValue,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeGroupItemProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"span"}),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChip"),VChip=genericComponent()({name:"VChip",directives:{Ripple},props:makeVChipProps(),emits:{"click:close":n=>!0,"update:modelValue":n=>!0,"group:selected":n=>!0,click:n=>!0},setup(n,_){let{attrs:x,emit:E,slots:S}=_;const{t:C}=useLocale(),{borderClasses:T}=useBorder(n),{colorClasses:A,colorStyles:B,variantClasses:I}=useVariant(n),{densityClasses:M}=useDensity(n),{elevationClasses:O}=useElevation(n),{roundedClasses:D}=useRounded(n),{sizeClasses:L}=useSize(n),{themeClasses:V}=provideTheme(n),U=useProxiedModel(n,"modelValue"),q=useGroupItem(n,VChipGroupSymbol,!1),H=useLink$1(n,x),W=computed(()=>n.link!==!1&&H.isLink.value),Q=computed(()=>!n.disabled&&n.link!==!1&&(!!q||n.link||H.isClickable.value)),re=computed(()=>({"aria-label":C(n.closeLabel),onClick(Y){Y.stopPropagation(),U.value=!1,E("click:close",Y)}}));function ce(Y){E("click",Y),Q.value&&(H.navigate?.(Y),q?.toggle())}function ne(Y){(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),ce(Y))}return()=>{const Y=H.isLink.value?"a":n.tag,fe=!!(n.appendIcon||n.appendAvatar),ge=!!(fe||S.append),$e=!!(S.close||n.closable),_e=!!(S.filter||n.filter)&&q,ae=!!(n.prependIcon||n.prependAvatar),X=!!(ae||S.prepend),F=!q||q.isSelected.value;return U.value&&withDirectives(createVNode(Y,{class:["v-chip",{"v-chip--disabled":n.disabled,"v-chip--label":n.label,"v-chip--link":Q.value,"v-chip--filter":_e,"v-chip--pill":n.pill},V.value,T.value,F?A.value:void 0,M.value,O.value,D.value,L.value,I.value,q?.selectedClass.value,n.class],style:[F?B.value:void 0,n.style],disabled:n.disabled||void 0,draggable:n.draggable,href:H.href.value,tabindex:Q.value?0:void 0,onClick:ce,onKeydown:Q.value&&!W.value&&ne},{default:()=>[genOverlays(Q.value,"v-chip"),_e&&createVNode(VExpandXTransition,{key:"filter"},{default:()=>[withDirectives(createVNode("div",{class:"v-chip__filter"},[S.filter?createVNode(VDefaultsProvider,{key:"filter-defaults",disabled:!n.filterIcon,defaults:{VIcon:{icon:n.filterIcon}}},S.filter):createVNode(VIcon,{key:"filter-icon",icon:n.filterIcon},null)]),[[vShow,q.isSelected.value]])]}),X&&createVNode("div",{key:"prepend",class:"v-chip__prepend"},[S.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!ae,defaults:{VAvatar:{image:n.prependAvatar,start:!0},VIcon:{icon:n.prependIcon,start:!0}}},S.prepend):createVNode(Fragment,null,[n.prependIcon&&createVNode(VIcon,{key:"prepend-icon",icon:n.prependIcon,start:!0},null),n.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",image:n.prependAvatar,start:!0},null)])]),createVNode("div",{class:"v-chip__content"},[S.default?.({isSelected:q?.isSelected.value,selectedClass:q?.selectedClass.value,select:q?.select,toggle:q?.toggle,value:q?.value.value,disabled:n.disabled})??n.text]),ge&&createVNode("div",{key:"append",class:"v-chip__append"},[S.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!fe,defaults:{VAvatar:{end:!0,image:n.appendAvatar},VIcon:{end:!0,icon:n.appendIcon}}},S.append):createVNode(Fragment,null,[n.appendIcon&&createVNode(VIcon,{key:"append-icon",end:!0,icon:n.appendIcon},null),n.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",end:!0,image:n.appendAvatar},null)])]),$e&&createVNode("div",mergeProps({key:"close",class:"v-chip__close"},re.value),[S.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VIcon:{icon:n.closeIcon,size:"x-small"}}},S.close):createVNode(VIcon,{key:"close-icon",icon:n.closeIcon,size:"x-small"},null)])]}),[[resolveDirective("ripple"),Q.value&&n.ripple,null]])}}}),VMenu$1="",makeVMenuProps=propsFactory({id:String,...omit(makeVOverlayProps({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:VDialogTransition}}),["absolute"])},"VMenu"),VMenu=genericComponent()({name:"VMenu",props:makeVMenuProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{scopeId:S}=useScopeId(),C=getUid(),T=computed(()=>n.id||`v-menu-${C}`),A=ref$1(),B=inject$1(VMenuSymbol,null),I=shallowRef(0);provide(VMenuSymbol,{register(){++I.value},unregister(){--I.value},closeParents(){setTimeout(()=>{I.value||(E.value=!1,B?.closeParents())},40)}});async function M(U){const q=U.relatedTarget,H=U.target;await nextTick$2(),E.value&&q!==H&&A.value?.contentEl&&A.value?.globalTop&&![document,A.value.contentEl].includes(H)&&!A.value.contentEl.contains(H)&&focusableChildren(A.value.contentEl)[0]?.focus()}watch(E,U=>{U?(B?.register(),document.addEventListener("focusin",M,{once:!0})):(B?.unregister(),document.removeEventListener("focusin",M))});function O(){B?.closeParents()}function D(U){n.disabled||U.key==="Tab"&&(getNextElement(focusableChildren(A.value?.contentEl,!1),U.shiftKey?"prev":"next",H=>H.tabIndex>=0)||(E.value=!1,A.value?.activatorEl?.focus()))}function L(U){if(n.disabled)return;const q=A.value?.contentEl;q&&E.value?U.key==="ArrowDown"?(U.preventDefault(),focusChild(q,"next")):U.key==="ArrowUp"&&(U.preventDefault(),focusChild(q,"prev")):["ArrowDown","ArrowUp"].includes(U.key)&&(E.value=!0,U.preventDefault(),setTimeout(()=>setTimeout(()=>L(U))))}const V=computed(()=>mergeProps({"aria-haspopup":"menu","aria-expanded":String(E.value),"aria-owns":T.value,onKeydown:L},n.activatorProps));return useRender(()=>{const[U]=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:A,class:["v-menu",n.class],style:n.style},U,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,absolute:!0,activatorProps:V.value,"onClick:outside":O,onKeydown:D},S),{activator:x.activator,default:function(){for(var q=arguments.length,H=new Array(q),W=0;W<q;W++)H[W]=arguments[W];return createVNode(VDefaultsProvider,{root:"VMenu"},{default:()=>[x.default?.(...H)]})}})}),forwardRefs({id:T,openChildren:I},A)}}),VSelect$1="",VVirtualScroll$1="",makeVVirtualScrollItemProps=propsFactory({renderless:Boolean,...makeComponentProps()},"VVirtualScrollItem"),VVirtualScrollItem=genericComponent()({name:"VVirtualScrollItem",inheritAttrs:!1,props:makeVVirtualScrollItemProps(),emits:{"update:height":n=>!0},setup(n,_){let{attrs:x,emit:E,slots:S}=_;const{resizeRef:C,contentRect:T}=useResizeObserver(void 0,"border");watch(()=>T.value?.height,A=>{A!=null&&E("update:height",A)}),useRender(()=>n.renderless?createVNode(Fragment,null,[S.default?.({itemRef:C})]):createVNode("div",mergeProps({ref:C,class:["v-virtual-scroll__item",n.class],style:n.style},x),[S.default?.()]))}}),UP=-1,DOWN=1,makeVirtualProps=propsFactory({itemHeight:{type:[Number,String],default:48}},"virtual");function useVirtual(n,_,x){const E=shallowRef(0),S=shallowRef(n.itemHeight),C=computed({get:()=>parseInt(S.value??0,10),set(Y){S.value=Y}}),T=ref$1(),{resizeRef:A,contentRect:B}=useResizeObserver();watchEffect(()=>{A.value=T.value});const I=useDisplay(),M=new Map;let O=Array.from({length:_.value.length});const D=computed(()=>{const Y=(!B.value||T.value===document.documentElement?I.height.value:B.value.height)-(x?.value??0);return Math.ceil(Y/C.value*1.7+1)});function L(Y,fe){C.value=Math.max(C.value,fe),O[Y]=fe,M.set(_.value[Y],fe)}function V(Y){return O.slice(0,Y).reduce((fe,ge)=>fe+(ge||C.value),0)}function U(Y){const fe=_.value.length;let ge=0,$e=0;for(;$e<Y&&ge<fe;)$e+=O[ge++]||C.value;return ge-1}let q=0;function H(){if(!T.value||!B.value)return;const Y=B.value.height-56,fe=T.value.scrollTop,ge=fe<q?UP:DOWN,$e=U(fe+Y/2),_e=Math.round(D.value/3),ae=$e-_e,X=E.value+_e*2-1;ge===UP&&$e<=X?E.value=clamp(ae,0,_.value.length):ge===DOWN&&$e>=X&&(E.value=clamp(ae,0,_.value.length-D.value)),q=fe}function W(Y){if(!T.value)return;const fe=V(Y);T.value.scrollTop=fe}const Q=computed(()=>Math.min(_.value.length,E.value+D.value)),re=computed(()=>_.value.slice(E.value,Q.value).map((Y,fe)=>({raw:Y,index:fe+E.value}))),ce=computed(()=>V(E.value)),ne=computed(()=>V(_.value.length)-V(Q.value));return watch(()=>_.value.length,()=>{O=createRange(_.value.length).map(()=>C.value),M.forEach((Y,fe)=>{const ge=_.value.indexOf(fe);ge===-1?M.delete(fe):O[ge]=Y})}),{containerRef:T,computedItems:re,itemHeight:C,paddingTop:ce,paddingBottom:ne,scrollToIndex:W,handleScroll:H,handleItemResize:L}}const makeVVirtualScrollProps=propsFactory({items:{type:Array,default:()=>[]},renderless:Boolean,...makeVirtualProps(),...makeComponentProps(),...makeDimensionProps()},"VVirtualScroll"),VVirtualScroll=genericComponent()({name:"VVirtualScroll",props:makeVVirtualScrollProps(),setup(n,_){let{slots:x}=_;const E=getCurrentInstance("VVirtualScroll"),{dimensionStyles:S}=useDimension(n),{containerRef:C,handleScroll:T,handleItemResize:A,scrollToIndex:B,paddingTop:I,paddingBottom:M,computedItems:O}=useVirtual(n,toRef(n,"items"));return useToggleScope(()=>n.renderless,()=>{onMounted(()=>{C.value=getScrollParent(E.vnode.el,!0),C.value?.addEventListener("scroll",T)}),onScopeDispose(()=>{C.value?.removeEventListener("scroll",T)})}),useRender(()=>{const D=O.value.map(L=>createVNode(VVirtualScrollItem,{key:L.index,renderless:n.renderless,"onUpdate:height":V=>A(L.index,V)},{default:V=>x.default?.({item:L.raw,index:L.index,...V})}));return n.renderless?createVNode(Fragment,null,[createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:convertToUnit(I.value)}},null),D,createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:convertToUnit(M.value)}},null)]):createVNode("div",{ref:C,class:["v-virtual-scroll",n.class],onScroll:T,style:[S.value,n.style]},[createVNode("div",{class:"v-virtual-scroll__container",style:{paddingTop:convertToUnit(I.value),paddingBottom:convertToUnit(M.value)}},[D])])}),{scrollToIndex:B}}});function useScrolling(n,_){const x=shallowRef(!1);let E;function S(A){cancelAnimationFrame(E),x.value=!0,E=requestAnimationFrame(()=>{E=requestAnimationFrame(()=>{x.value=!1})})}async function C(){await new Promise(A=>requestAnimationFrame(A)),await new Promise(A=>requestAnimationFrame(A)),await new Promise(A=>requestAnimationFrame(A)),await new Promise(A=>{if(x.value){const B=watch(x,()=>{B(),A()})}else A()})}async function T(A){if(A.key==="Tab"&&_.value?.focus(),!["PageDown","PageUp","Home","End"].includes(A.key))return;const B=n.value?.$el;if(!B)return;(A.key==="Home"||A.key==="End")&&B.scrollTo({top:A.key==="Home"?0:B.scrollHeight,behavior:"smooth"}),await C();const I=B.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(A.key==="PageDown"||A.key==="Home"){const M=B.getBoundingClientRect().top;for(const O of I)if(O.getBoundingClientRect().top>=M){O.focus();break}}else{const M=B.getBoundingClientRect().bottom;for(const O of[...I].reverse())if(O.getBoundingClientRect().bottom<=M){O.focus();break}}}return{onListScroll:S,onListKeydown:T}}const makeSelectProps=propsFactory({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:IconValue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:deepEqual$3},itemColor:String,...makeItemsProps({itemChildren:!1})},"Select"),makeVSelectProps=propsFactory({...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:{component:VDialogTransition}})},"VSelect"),VSelect=genericComponent()({name:"VSelect",props:makeVSelectProps(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:menu":n=>!0},setup(n,_){let{slots:x}=_;const{t:E}=useLocale(),S=ref$1(),C=ref$1(),T=ref$1(),A=useProxiedModel(n,"menu"),B=computed({get:()=>A.value,set:te=>{A.value&&!te&&C.value?.openChildren||(A.value=te)}}),{items:I,transformIn:M,transformOut:O}=useItems(n),D=useProxiedModel(n,"modelValue",[],te=>M(te===null?[null]:wrapInArray(te)),te=>{const se=O(te);return n.multiple?se:se[0]??null}),L=useForm(),V=computed(()=>D.value.map(te=>I.value.find(se=>{const oe=getPropertyFromItem(se.raw,n.itemValue),ie=getPropertyFromItem(te.raw,n.itemValue);return oe===void 0||ie===void 0?!1:n.returnObject?n.valueComparator(oe,ie):n.valueComparator(se.value,te.value)})||te)),U=computed(()=>V.value.map(te=>te.props.value)),q=shallowRef(!1),H=computed(()=>B.value?n.closeText:n.openText);let W="",Q;const re=computed(()=>n.hideSelected?I.value.filter(te=>!V.value.some(se=>se===te)):I.value),ce=computed(()=>n.hideNoData&&!I.value.length||n.readonly||L?.isReadonly.value),ne=ref$1(),{onListScroll:Y,onListKeydown:fe}=useScrolling(ne,S);function ge(te){n.openOnClear&&(B.value=!0)}function $e(){ce.value||(B.value=!B.value)}function _e(te){if(!te.key||n.readonly||L?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(te.key)&&te.preventDefault(),["Enter","ArrowDown"," "].includes(te.key)&&(B.value=!0),["Escape","Tab"].includes(te.key)&&(B.value=!1),te.key==="Home"?ne.value?.focus("first"):te.key==="End"&&ne.value?.focus("last");const se=1e3;function oe(j){const ee=j.key.length===1,pe=!j.ctrlKey&&!j.metaKey&&!j.altKey;return ee&&pe}if(n.multiple||!oe(te))return;const ie=performance.now();ie-Q>se&&(W=""),W+=te.key.toLowerCase(),Q=ie;const G=I.value.find(j=>j.title.toLowerCase().startsWith(W));G!==void 0&&(D.value=[G])}function ae(te){if(n.multiple){const se=U.value.findIndex(oe=>n.valueComparator(oe,te.value));if(se===-1)D.value=[...D.value,te];else{const oe=[...D.value];oe.splice(se,1),D.value=oe}}else D.value=[te],B.value=!1}function X(te){ne.value?.$el.contains(te.relatedTarget)||(B.value=!1)}function F(){q.value&&S.value?.focus()}function z(te){q.value=!0}function J(te){if(te==null)D.value=[];else if(matchesSelector(S.value,":autofill")||matchesSelector(S.value,":-webkit-autofill")){const se=I.value.find(oe=>oe.title===te);se&&ae(se)}else S.value&&(S.value.value="")}return watch(B,()=>{if(!n.hideSelected&&B.value&&V.value.length){const te=re.value.findIndex(se=>V.value.some(oe=>se.value===oe.value));IN_BROWSER&&window.requestAnimationFrame(()=>{te>=0&&T.value?.scrollToIndex(te)})}}),useRender(()=>{const te=!!(n.chips||x.chip),se=!!(!n.hideNoData||re.value.length||x["prepend-item"]||x["append-item"]||x["no-data"]),oe=D.value.length>0,[ie]=VTextField.filterProps(n),G=oe||!q.value&&n.label&&!n.persistentPlaceholder?void 0:n.placeholder;return createVNode(VTextField,mergeProps({ref:S},ie,{modelValue:D.value.map(j=>j.props.value).join(", "),"onUpdate:modelValue":J,focused:q.value,"onUpdate:focused":j=>q.value=j,validationValue:D.externalValue,dirty:oe,class:["v-select",{"v-select--active-menu":B.value,"v-select--chips":!!n.chips,[`v-select--${n.multiple?"multiple":"single"}`]:!0,"v-select--selected":D.value.length,"v-select--selection-slot":!!x.selection},n.class],style:n.style,inputmode:"none",placeholder:G,"onClick:clear":ge,"onMousedown:control":$e,onBlur:X,onKeydown:_e,"aria-label":E(H.value),title:E(H.value)}),{...x,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:C,modelValue:B.value,"onUpdate:modelValue":j=>B.value=j,activator:"parent",contentClass:"v-select__content",disabled:ce.value,eager:n.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:n.transition,onAfterLeave:F},n.menuProps),{default:()=>[se&&createVNode(VList,{ref:ne,selected:U.value,selectStrategy:n.multiple?"independent":"single-independent",onMousedown:j=>j.preventDefault(),onKeydown:fe,onFocusin:z,onScrollPassive:Y,tabindex:"-1",color:n.itemColor??n.color},{default:()=>[x["prepend-item"]?.(),!re.value.length&&!n.hideNoData&&(x["no-data"]?.()??createVNode(VListItem,{title:E(n.noDataText)},null)),createVNode(VVirtualScroll,{ref:T,renderless:!0,items:re.value},{default:j=>{let{item:ee,index:pe,itemRef:he}=j;const Se=mergeProps(ee.props,{ref:he,key:pe,onClick:()=>ae(ee)});return x.item?.({item:ee,index:pe,props:Se})??createVNode(VListItem,Se,{prepend:we=>{let{isSelected:xe}=we;return createVNode(Fragment,null,[n.multiple&&!n.hideSelected?createVNode(VCheckboxBtn,{key:ee.value,modelValue:xe,ripple:!1,tabindex:"-1"},null):void 0,ee.props.prependIcon&&createVNode(VIcon,{icon:ee.props.prependIcon},null)])}})}}),x["append-item"]?.()]})]}),V.value.map((j,ee)=>{function pe(Se){Se.stopPropagation(),Se.preventDefault(),ae(j)}const he={"onClick:close":pe,onMousedown(Se){Se.preventDefault(),Se.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:j.value,class:"v-select__selection"},[te?x.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:n.closableChips,size:"small",text:j.title}}},{default:()=>[x.chip?.({item:j,index:ee,props:he})]}):createVNode(VChip,mergeProps({key:"chip",closable:n.closableChips,size:"small",text:j.title},he),null):x.selection?.({item:j,index:ee})??createVNode("span",{class:"v-select__selection-text"},[j.title,n.multiple&&ee<V.value.length-1&&createVNode("span",{class:"v-select__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var j=arguments.length,ee=new Array(j),pe=0;pe<j;pe++)ee[pe]=arguments[pe];return createVNode(Fragment,null,[x["append-inner"]?.(...ee),n.menuIcon?createVNode(VIcon,{class:"v-select__menu-icon",icon:n.menuIcon},null):void 0])}})}),forwardRefs({isFocused:q,menu:B,select:ae},S)}}),defaultFilter=(n,_,x)=>n==null||_==null?-1:n.toString().toLocaleLowerCase().indexOf(_.toString().toLocaleLowerCase()),makeFilterProps=propsFactory({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function filterItems(n,_,x){const E=[],S=x?.default??defaultFilter,C=x?.filterKeys?wrapInArray(x.filterKeys):!1,T=Object.keys(x?.customKeyFilter??{}).length;if(!n?.length)return E;e:for(let A=0;A<n.length;A++){const B=n[A],I={},M={};let O=-1;if(_&&!x?.noFilter){if(typeof B=="object"){const V=C||Object.keys(B);for(const U of V){const q=getPropertyFromItem(B,U,B),H=x?.customKeyFilter?.[U];if(O=H?H(q,_,B):S(q,_,B),O!==-1&&O!==!1)H?I[U]=O:M[U]=O;else if(x?.filterMode==="every")continue e}}else O=S(B,_,B),O!==-1&&O!==!1&&(M.title=O);const D=Object.keys(M).length,L=Object.keys(I).length;if(!D&&!L||x?.filterMode==="union"&&L!==T&&!D||x?.filterMode==="intersection"&&(L!==T||!D))continue}E.push({index:A,matches:{...M,...I}})}return E}function useFilter(n,_,x,E){const S=ref$1([]),C=ref$1(new Map),T=computed(()=>E?.transform?unref(_).map(E?.transform):unref(_));watchEffect(()=>{const B=typeof x=="function"?x():unref(x),I=typeof B!="string"&&typeof B!="number"?"":String(B),M=filterItems(T.value,I,{customKeyFilter:n.customKeyFilter,default:n.customFilter,filterKeys:n.filterKeys,filterMode:n.filterMode,noFilter:n.noFilter}),O=unref(_),D=[],L=new Map;M.forEach(V=>{let{index:U,matches:q}=V;const H=O[U];D.push(H),L.set(H.value,q)}),S.value=D,C.value=L});function A(B){return C.value.get(B.value)}return{filteredItems:S,filteredMatches:C,getMatches:A}}function highlightResult(n,_,x){if(_==null)return n;if(Array.isArray(_))throw new Error("Multiple matches is not implemented");return typeof _=="number"&&~_?createVNode(Fragment,null,[createVNode("span",{class:"v-autocomplete__unmask"},[n.substr(0,_)]),createVNode("span",{class:"v-autocomplete__mask"},[n.substr(_,x)]),createVNode("span",{class:"v-autocomplete__unmask"},[n.substr(_+x)])]):n}const makeVAutocompleteProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},search:String,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VAutocomplete"),VAutocomplete=genericComponent()({name:"VAutocomplete",props:makeVAutocompleteProps(),emits:{"update:focused":n=>!0,"update:search":n=>!0,"update:modelValue":n=>!0,"update:menu":n=>!0},setup(n,_){let{slots:x}=_;const{t:E}=useLocale(),S=ref$1(),C=shallowRef(!1),T=shallowRef(!0),A=shallowRef(!1),B=ref$1(),I=ref$1(),M=useProxiedModel(n,"menu"),O=computed({get:()=>M.value,set:ye=>{M.value&&!ye&&B.value?.openChildren||(M.value=ye)}}),D=shallowRef(-1),L=computed(()=>S.value?.color),V=computed(()=>O.value?n.closeText:n.openText),{items:U,transformIn:q,transformOut:H}=useItems(n),{textColorClasses:W,textColorStyles:Q}=useTextColor(L),re=useProxiedModel(n,"search",""),ce=useProxiedModel(n,"modelValue",[],ye=>q(ye===null?[null]:wrapInArray(ye)),ye=>{const Ce=H(ye);return n.multiple?Ce:Ce[0]??null}),ne=useForm(),{filteredItems:Y,getMatches:fe}=useFilter(n,U,()=>T.value?"":re.value),ge=computed(()=>ce.value.map(ye=>U.value.find(Ce=>{const ve=getPropertyFromItem(Ce.raw,n.itemValue),Be=getPropertyFromItem(ye.raw,n.itemValue);return ve===void 0||Be===void 0?!1:n.returnObject?n.valueComparator(ve,Be):n.valueComparator(Ce.value,ye.value)})||ye)),$e=computed(()=>n.hideSelected?Y.value.filter(ye=>!ge.value.some(Ce=>Ce.value===ye.value)):Y.value),_e=computed(()=>ge.value.map(ye=>ye.props.value)),ae=computed(()=>ge.value[D.value]),X=computed(()=>(n.autoSelectFirst===!0||n.autoSelectFirst==="exact"&&re.value===$e.value[0]?.title)&&$e.value.length>0&&!T.value&&!A.value),F=computed(()=>n.hideNoData&&!U.value.length||n.readonly||ne?.isReadonly.value),z=ref$1(),{onListScroll:J,onListKeydown:te}=useScrolling(z,S);function se(ye){n.openOnClear&&(O.value=!0),re.value=""}function oe(){F.value||(O.value=!0)}function ie(ye){F.value||(C.value&&(ye.preventDefault(),ye.stopPropagation()),O.value=!O.value)}function G(ye){if(n.readonly||ne?.isReadonly.value)return;const Ce=S.value.selectionStart,ve=_e.value.length;if((D.value>-1||["Enter","ArrowDown","ArrowUp"].includes(ye.key))&&ye.preventDefault(),["Enter","ArrowDown"].includes(ye.key)&&(O.value=!0),["Escape"].includes(ye.key)&&(O.value=!1),X.value&&["Enter","Tab"].includes(ye.key)&&Ee($e.value[0]),ye.key==="ArrowDown"&&X.value&&z.value?.focus("next"),!!n.multiple){if(["Backspace","Delete"].includes(ye.key)){if(D.value<0){ye.key==="Backspace"&&!re.value&&(D.value=ve-1);return}const Be=D.value;ae.value&&Ee(ae.value),D.value=Be>=ve-1?ve-2:Be}if(ye.key==="ArrowLeft"){if(D.value<0&&Ce>0)return;const Be=D.value>-1?D.value-1:ve-1;ge.value[Be]?D.value=Be:(D.value=-1,S.value.setSelectionRange(re.value?.length,re.value?.length))}if(ye.key==="ArrowRight"){if(D.value<0)return;const Be=D.value+1;ge.value[Be]?D.value=Be:(D.value=-1,S.value.setSelectionRange(0,0))}}}function j(ye){re.value=ye.target.value}function ee(ye){if(matchesSelector(S.value,":autofill")||matchesSelector(S.value,":-webkit-autofill")){const Ce=U.value.find(ve=>ve.title===ye.target.value);Ce&&Ee(Ce)}}function pe(){C.value&&(T.value=!0,S.value?.focus())}function he(ye){C.value=!0,setTimeout(()=>{A.value=!0})}function Se(ye){A.value=!1}function we(ye){(ye==null||ye===""&&!n.multiple)&&(ce.value=[])}const xe=shallowRef(!1);function Ee(ye){if(n.multiple){const Ce=_e.value.findIndex(ve=>n.valueComparator(ve,ye.value));if(Ce===-1)ce.value=[...ce.value,ye];else{const ve=[...ce.value];ve.splice(Ce,1),ce.value=ve}}else ce.value=[ye],xe.value=!0,re.value=ye.title,O.value=!1,T.value=!0,nextTick$2(()=>xe.value=!1)}return watch(C,(ye,Ce)=>{ye!==Ce&&(ye?(xe.value=!0,re.value=n.multiple?"":String(ge.value.at(-1)?.props.title??""),T.value=!0,nextTick$2(()=>xe.value=!1)):(!n.multiple&&!re.value?ce.value=[]:X.value&&!A.value&&!ge.value.some(ve=>{let{value:Be}=ve;return Be===$e.value[0].value})&&Ee($e.value[0]),O.value=!1,re.value="",D.value=-1))}),watch(re,ye=>{!C.value||xe.value||(ye&&(O.value=!0),T.value=!ye)}),watch(O,()=>{if(!n.hideSelected&&O.value&&ge.value.length){const ye=$e.value.findIndex(Ce=>ge.value.some(ve=>Ce.value===ve.value));IN_BROWSER&&window.requestAnimationFrame(()=>{ye>=0&&I.value?.scrollToIndex(ye)})}}),useRender(()=>{const ye=!!(n.chips||x.chip),Ce=!!(!n.hideNoData||$e.value.length||x["prepend-item"]||x["append-item"]||x["no-data"]),ve=ce.value.length>0,[Be]=VTextField.filterProps(n);return createVNode(VTextField,mergeProps({ref:S},Be,{modelValue:re.value,"onUpdate:modelValue":we,focused:C.value,"onUpdate:focused":me=>C.value=me,validationValue:ce.externalValue,dirty:ve,onInput:j,onChange:ee,class:["v-autocomplete",`v-autocomplete--${n.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":O.value,"v-autocomplete--chips":!!n.chips,"v-autocomplete--selection-slot":!!x.selection,"v-autocomplete--selecting-index":D.value>-1},n.class],style:n.style,readonly:n.readonly,placeholder:ve?void 0:n.placeholder,"onClick:clear":se,"onMousedown:control":oe,onKeydown:G}),{...x,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:B,modelValue:O.value,"onUpdate:modelValue":me=>O.value=me,activator:"parent",contentClass:"v-autocomplete__content",disabled:F.value,eager:n.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:n.transition,onAfterLeave:pe},n.menuProps),{default:()=>[Ce&&createVNode(VList,{ref:z,selected:_e.value,selectStrategy:n.multiple?"independent":"single-independent",onMousedown:me=>me.preventDefault(),onKeydown:te,onFocusin:he,onFocusout:Se,onScrollPassive:J,tabindex:"-1",color:n.itemColor??n.color},{default:()=>[x["prepend-item"]?.(),!$e.value.length&&!n.hideNoData&&(x["no-data"]?.()??createVNode(VListItem,{title:E(n.noDataText)},null)),createVNode(VVirtualScroll,{ref:I,renderless:!0,items:$e.value},{default:me=>{let{item:Ie,index:Ve,itemRef:Me}=me;const Ne=mergeProps(Ie.props,{ref:Me,key:Ve,active:X.value&&Ve===0?!0:void 0,onClick:()=>Ee(Ie)});return x.item?.({item:Ie,index:Ve,props:Ne})??createVNode(VListItem,Ne,{prepend:Pe=>{let{isSelected:He}=Pe;return createVNode(Fragment,null,[n.multiple&&!n.hideSelected?createVNode(VCheckboxBtn,{key:Ie.value,modelValue:He,ripple:!1,tabindex:"-1"},null):void 0,Ie.props.prependIcon&&createVNode(VIcon,{icon:Ie.props.prependIcon},null)])},title:()=>T.value?Ie.title:highlightResult(Ie.title,fe(Ie)?.title,re.value?.length??0)})}}),x["append-item"]?.()]})]}),ge.value.map((me,Ie)=>{function Ve(Ne){Ne.stopPropagation(),Ne.preventDefault(),Ee(me)}const Me={"onClick:close":Ve,onMousedown(Ne){Ne.preventDefault(),Ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:me.value,class:["v-autocomplete__selection",Ie===D.value&&["v-autocomplete__selection--selected",W.value]],style:Ie===D.value?Q.value:{}},[ye?x.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:n.closableChips,size:"small",text:me.title}}},{default:()=>[x.chip?.({item:me,index:Ie,props:Me})]}):createVNode(VChip,mergeProps({key:"chip",closable:n.closableChips,size:"small",text:me.title},Me),null):x.selection?.({item:me,index:Ie})??createVNode("span",{class:"v-autocomplete__selection-text"},[me.title,n.multiple&&Ie<ge.value.length-1&&createVNode("span",{class:"v-autocomplete__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var me=arguments.length,Ie=new Array(me),Ve=0;Ve<me;Ve++)Ie[Ve]=arguments[Ve];return createVNode(Fragment,null,[x["append-inner"]?.(...Ie),n.menuIcon?createVNode(VIcon,{class:"v-autocomplete__menu-icon",icon:n.menuIcon,onMousedown:ie,onClick:noop$5,"aria-label":E(V.value),title:E(V.value)},null):void 0])}})}),forwardRefs({isFocused:C,isPristine:T,menu:O,search:re,filteredItems:Y,select:Ee},S)}}),_sfc_main$r=defineComponent$1({__name:"ItemNom",props:{langue:{},nom:{},id:{},indiceNom:{},indiceLangue:{},autorisationModification:{type:Boolean}},emits:["changerNom","effacer"],setup(n,{emit:_}){const x=n,{__:E,useI18n:S}=_(),{languesEtCodes:C,nomLangue:T}=E(),{t:A}=S(),B=new Nuchabl({}),I=ref$1(""),M=ref$1("");onMounted(()=>{I.value=x.nom,M.value=x.langue});const O=T(M),D=computed(()=>{if(!I.value?.length||!M.value)return;const U=B.rutzibTzibanem({runuk:M.value});return U&&!I.value.match(new RegExp(U,"g"))?[A("communs.erreurLangue",{langue:O.value})]:void 0}),L=()=>{_("effacer",{id:x.id})},V=()=>{!M.value||!I.value||D.value?.length||I.value.trim()===x.nom.trim()&&M.value===x.langue||_("changerNom",{id:x.id,nom:I.value,lng:M.value})};return watchEffect(()=>{M.value!==x.langue&&V()}),(U,q)=>(openBlock(),createBlock(VListItem,null,{append:withCtx(()=>[U.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,class:"mb-3",icon:"mdi-delete",variant:"text",onClick:L})):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4",class:"pb-0"},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:M.value,"onUpdate:modelValue":q[0]||(q[0]=H=>M.value=H),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",readonly:!U.autorisationModification,items:unref(C),label:U.indiceLangue},null,8,["modelValue","readonly","items","label"])]),_:1}),createVNode(VCol,{cols:"8",class:"pb-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:I.value,"onUpdate:modelValue":q[1]||(q[1]=H=>I.value=H),class:"pt-1",density:"compact",variant:"outlined",readonly:!U.autorisationModification,rules:D.value,label:U.indiceNom,onBlur:V},null,8,["modelValue","readonly","rules","label"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$9={key:0,class:"text-center mt-3 text-h6"},_sfc_main$q=defineComponent$1({__name:"ListeNoms",props:{nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(n,{emit:_}){const x=n,{__:E,useI18n:S}=_(),{t:C}=S(),{languesEtCodes:T,nomLangue:A}=E(),B=new Nuchabl({}),I=ref$1({});onMounted(()=>{I.value=Object.fromEntries(Object.entries(x.nomsInitiaux))});const M=ref$1([]);watchEffect(()=>{M.value=Object.entries(I.value).map(([ce,ne])=>({lng:ce,nom:ne,id:v4$1()}))});const O=computed(()=>T.value.filter(ce=>!M.value.some(ne=>ne.lng===ce.code))),D=()=>{const ce=Object.fromEntries(M.value.map(ne=>[ne.lng,ne.nom]));_("ajusterNoms",ce)},L=({id:ce,nom:ne,lng:Y})=>{Y===q.value&&(q.value=void 0),M.value=M.value.filter(fe=>fe.lng!==Y||fe.id===ce).map(fe=>fe.id===ce?{lng:Y,nom:ne,id:fe.id}:fe),D()},V=({id:ce})=>{M.value=M.value.filter(ne=>ne.id!==ce),D()},U=ref$1(),q=ref$1(),H=A(q);watchEffect(()=>{q.value===void 0&&(q.value=O.value[0]?.code)});const W=computed(()=>{if(!U.value?.length||!q.value)return;const ce=B.rutzibTzibanem({runuk:q.value});return ce&&!U.value.match(new RegExp(ce,"g"))?[C("communs.erreurLangue",{langue:H.value})]:void 0}),Q=computed(()=>!!(q.value&&U.value)&&!W.value?.length),re=()=>{q.value&&U.value&&(W.value?.length||(M.value=[{nom:U.value,lng:q.value,id:v4$1()},...M.value],q.value=void 0,U.value=void 0,D()))};return(ce,ne)=>(openBlock(),createElementBlock(Fragment,null,[ce.autorisationModification?(openBlock(),createBlock(VList,{key:0,class:"pb-0"},{default:withCtx(()=>[createVNode(VListItem,null,{append:withCtx(()=>[createVNode(VBtn,{icon:"mdi-plus",variant:"text",class:"mb-2",disabled:!Q.value,onClick:re},null,8,["disabled"])]),default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:q.value,"onUpdate:modelValue":ne[0]||(ne[0]=Y=>q.value=Y),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",items:O.value,label:ce.indiceLangue},null,8,["modelValue","items","label"])]),_:1}),createVNode(VCol,{cols:"8"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:U.value,"onUpdate:modelValue":ne[1]||(ne[1]=Y=>U.value=Y),class:"pt-1",density:"compact",variant:"outlined",rules:W.value,label:ce.indiceNom,onBlur:re,onKeydown:withKeys(re,["enter"])},null,8,["modelValue","rules","label","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(VList,{"max-height":"200",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VDivider,{class:"mb-2"}),createVNode(VScrollYTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,Y=>(openBlock(),createBlock(_sfc_main$r,{id:Y.id,key:Y.id,langue:Y.lng,nom:Y.nom,"indice-langue":ce.indiceLangue,"indice-nom":ce.indiceNom,"autorisation-modification":ce.autorisationModification,onChangerNom:L,onEffacer:V},null,8,["id","langue","nom","indice-langue","indice-nom","autorisation-modification"]))),128)),M.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$9,toDisplayString$1(ce.texteAucunNom),1))]),_:1})]),_:1})],64))}}),_sfc_main$p=defineComponent$1({__name:"DialogueNoms",props:{titre:{},sousTitre:{},nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(n,{emit:_}){const x=n,{useI18n:E}=_(),{t:S}=E(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),A=()=>{T.value=!1,I.value=x.nomsInitiaux},B=()=>{_("ajusterNoms",I.value),T.value=!1},I=ref$1(x.nomsInitiaux),M=D=>{I.value=D},O=computed(()=>!deepEqual$1(I.value,x.nomsInitiaux));return(D,L)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":L[0]||(L[0]=V=>T.value=V)},{activator:withCtx(({props:V})=>[renderSlot(D.$slots,"activator",normalizeProps(guardReactiveProps({props:V})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(C)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.titre),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.sousTitre),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$q,{"noms-initiaux":D.nomsInitiaux,"texte-aucun-nom":D.texteAucunNom,"indice-langue":D.indiceLangue,"indice-nom":D.indiceNom,"autorisation-modification":D.autorisationModification,onAjusterNoms:M},null,8,["noms-initiaux","texte-aucun-nom","indice-langue","indice-nom","autorisation-modification"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"text","append-icon":"mdi-close",onClick:A},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer")),1)]),_:1}),D.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,color:"primary",variant:"outlined","append-icon":"mdi-check",disabled:!O.value,onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder")),1)]),_:1},8,["disabled"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$8={class:"text-h6"},_sfc_main$o=defineComponent$1({__name:"DivisionCarte",props:{titre:{},enAttente:{type:Boolean}},setup(n){return(_,x)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$8,toDisplayString$1(_.titre),1),_.enAttente?(openBlock(),createBlock(VProgressLinear,{key:0,class:"mb-2",indeterminate:"",height:1})):(openBlock(),createBlock(VDivider,{key:1,class:"mb-2"}))],64))}}),_sfc_main$n=defineComponent$1({__name:"IcneConfiance",props:{confiance:{},cestMoi:{type:Boolean}},setup(n){const _=n,x=computed(()=>_.confiance<0?"mdi-cancel":_.cestMoi?"mdi-check":"mdi-hands-pray"),E=computed(()=>_.confiance<0?"error":_.confiance===1?"success":`rgba(22, 151, 246, ${.1+_.confiance*.9})`);return(S,C)=>(openBlock(),createBlock(VIcon,{color:E.value,start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.value),1)]),_:1},8,["color"]))}}),VTooltip$1="",makeVTooltipProps=propsFactory({id:String,text:String,...omit(makeVOverlayProps({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),VTooltip=genericComponent()({name:"VTooltip",props:makeVTooltipProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),{scopeId:S}=useScopeId(),C=getUid(),T=computed(()=>n.id||`v-tooltip-${C}`),A=ref$1(),B=computed(()=>n.location.split(" ").length>1?n.location:n.location+" center"),I=computed(()=>n.origin==="auto"||n.origin==="overlap"||n.origin.split(" ").length>1||n.location.split(" ").length>1?n.origin:n.origin+" center"),M=computed(()=>n.transition?n.transition:E.value?"scale-transition":"fade-transition"),O=computed(()=>mergeProps({"aria-describedby":T.value},n.activatorProps));return useRender(()=>{const[D]=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:A,class:["v-tooltip",n.class],style:n.style,id:T.value},D,{modelValue:E.value,"onUpdate:modelValue":L=>E.value=L,transition:M.value,absolute:!0,location:B.value,origin:I.value,persistent:!0,role:"tooltip",activatorProps:O.value,_disableGlobalStack:!0},S),{activator:x.activator,default:function(){for(var L=arguments.length,V=new Array(L),U=0;U<L;U++)V[U]=arguments[U];return x.default?.(...V)??n.text}})}),forwardRefs({},A)}}),_sfc_main$m=defineComponent$1({__name:"JetonMembre",props:{compte:{}},setup(n){const _=n,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),{traduireNom:C}=utiliserLangues(),T=ref$1({}),A=C(T);enregistrercoute(x?.profil.suivreNoms({idCompte:_.compte,f:L=>T.value=L}));const B=ref$1();enregistrercoute(x?.suivreIdCompte({f:L=>B.value=L}));const I=ref$1(0);enregistrercoute(x?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:_.compte,f:L=>I.value=L,profondeur:5}));const M=computed(()=>I.value<0?S("membres.confiance.bloqu"):I.value===0?S("membres.confiance.inconnu"):I.value<.33?S("membres.confiance.peuDinteraction"):I.value<.67?S("membres.confiance.interactionMoyenne"):I.value<1?S("membres.confiance.beaucoupDinteraction"):I.value===1?_.compte===B.value?S("membres.moi"):S("membres.confiance.connaissance"):""),O=computed(()=>I.value<0?"mdi-cancel":_.compte===B.value?"mdi-check":"mdi-hands-pray"),D=computed(()=>I.value<0?"error":I.value===1?"success":`rgba(22, 151, 246, ${.1+I.value*.9})`);return(L,V)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2"},{append:withCtx(()=>[createVNode(VTooltip,{text:M.value,location:"bottom"},{activator:withCtx(({props:U})=>[createVNode(VIcon,mergeProps(U,{color:D.value,size:"small",end:""}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(O.value),1)]),_:2},1040,["color"])]),_:1},8,["text"]),renderSlot(L.$slots,"post")]),default:withCtx(()=>[createVNode(_sfc_main$C,{id:L.compte,start:""},null,8,["id"]),createTextVNode(" "+toDisplayString$1(unref(A)||unref(S)("communs.anonyme"))+" ",1)]),_:3}))}}),makeVRadioProps=propsFactory({...makeVSelectionControlProps({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),VRadio=genericComponent()({name:"VRadio",props:makeVRadioProps(),setup(n,_){let{slots:x}=_;return useRender(()=>createVNode(VSelectionControl,mergeProps(n,{class:["v-radio",n.class],style:n.style,type:"radio"}),x)),{}}}),VRadioGroup$1="",makeVRadioGroupProps=propsFactory({height:{type:[Number,String],default:"auto"},...makeVInputProps(),...omit(makeSelectionControlGroupProps(),["multiple"]),trueIcon:{type:IconValue,default:"$radioOn"},falseIcon:{type:IconValue,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),VRadioGroup=genericComponent()({name:"VRadioGroup",inheritAttrs:!1,props:makeVRadioGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{attrs:x,slots:E}=_;const S=getUid(),C=computed(()=>n.id||`radio-group-${S}`),T=useProxiedModel(n,"modelValue");return useRender(()=>{const[A,B]=filterInputAttrs(x),[I,M]=VInput.filterProps(n),[O,D]=VSelectionControl.filterProps(n),L=E.label?E.label({label:n.label,props:{for:C.value}}):n.label;return createVNode(VInput,mergeProps({class:["v-radio-group",n.class],style:n.style},A,I,{modelValue:T.value,"onUpdate:modelValue":V=>T.value=V,id:C.value}),{...E,default:V=>{let{id:U,messagesId:q,isDisabled:H,isReadonly:W}=V;return createVNode(Fragment,null,[L&&createVNode(VLabel,{id:U.value},{default:()=>[L]}),createVNode(VSelectionControlGroup,mergeProps(O,{id:U.value,"aria-describedby":q.value,defaultsTarget:"VRadio",trueIcon:n.trueIcon,falseIcon:n.falseIcon,type:n.type,disabled:H.value,readonly:W.value,"aria-labelledby":L?U.value:void 0,multiple:!1},B,{modelValue:T.value,"onUpdate:modelValue":Q=>T.value=Q}),E)])}})}),{}}}),_hoisted_1$7={class:"my-2"},_hoisted_2$3={class:"font-weight-bold"},_hoisted_3$2={class:"text-medium-emphasis text-caption"},_hoisted_4$1={class:"font-weight-bold"},_hoisted_5={class:"text-medium-emphasis text-caption"},_hoisted_6={class:"font-weight-bold"},_hoisted_7={class:"text-medium-emphasis text-caption"},_hoisted_8={class:"font-weight-bold"},_hoisted_9={class:"text-medium-emphasis text-caption"},_sfc_main$l=defineComponent$1({__name:"CarteConfianceMembre",props:{id:{}},setup(n){const _=n,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),A=ref$1(),B=ref$1();enregistrercoute(x?.rseau?.suivreBloqus({f:D=>B.value=D})),enregistrercoute(x?.rseau?.suivreFiables({f:D=>A.value=D}));const I=computed(()=>{if(A.value?.includes(_.id))return"fiable";{const D=B.value?.find(L=>L.idCompte===_.id);return D?D.priv?"bloquPriv":"bloquPublique":"inconnu"}}),M=ref$1(I.value);watchEffect(()=>{M.value=I.value});const O=async()=>{switch(M.value){case"fiable":await x?.rseau?.faireConfianceAuMembre({idCompte:_.id});break;case"bloquPublique":case"bloquPriv":await x?.rseau?.bloquerMembre({idCompte:_.id,priv:M.value==="bloquPriv"});break;case"inconnu":I.value==="fiable"?await x?.rseau?.nePlusFaireConfianceAuMembre({idCompte:_.id}):await x?.rseau?.dbloquerMembre({idCompte:_.id});break}};return(D,L)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":L[2]||(L[2]=V=>T.value=V)},{activator:withCtx(({props:V})=>[renderSlot(D.$slots,"activator",normalizeProps(guardReactiveProps({props:V})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(C)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("membres.confiance.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$7,[createVNode(_sfc_main$m,{compte:D.id},null,8,["compte"])]),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.question"))+" ",1),createVNode(VRadioGroup,{modelValue:M.value,"onUpdate:modelValue":L[0]||(L[0]=V=>M.value=V)},{default:withCtx(()=>[createVNode(VRadio,{value:"inconnu",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_2$3,[createVNode(VIcon,{icon:"mdi-account-question-outline",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.inconnu")),1)]),createBaseVNode("p",_hoisted_3$2,toDisplayString$1(unref(S)("membres.confiance.indiceInconnu")),1)])]),_:1}),createVNode(VRadio,{value:"fiable",class:"my-2",color:"success"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_4$1,[createVNode(VIcon,{icon:"mdi-account-check",color:"success",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.faireConfiance")),1)]),createBaseVNode("p",_hoisted_5,toDisplayString$1(unref(S)("membres.confiance.indiceFaireConfiance")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPublique",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_6,[createVNode(VIcon,{icon:"mdi-account-cancel",color:"error",size:"small",start:""}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.bloquerPublique")),1)]),createBaseVNode("p",_hoisted_7,toDisplayString$1(unref(S)("membres.confiance.indiceBloquerPublique")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPriv",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_8,[createVNode(VIcon,{icon:"mdi-account-cancel-outline",color:"error",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.bloquerPriv")),1)]),createBaseVNode("p",_hoisted_9,toDisplayString$1(unref(S)("membres.confiance.indiceBloquerPriv")),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:L[1]||(L[1]=V=>T.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:I.value===M.value,onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$k=defineComponent$1({__name:"JetonConfiance",props:{id:{},styleJeton:{}},setup(n){const _=n,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),C=ref$1();enregistrercoute(x?.suivreIdCompte({f:B=>C.value=B}));const T=ref$1(0);enregistrercoute(x?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:_.id,f:B=>T.value=B,profondeur:5}));const A=computed(()=>T.value<0?S("membres.confiance.bloqu"):T.value===0?S("membres.confiance.inconnu"):T.value<.33?S("membres.confiance.peuDinteraction"):T.value<.67?S("membres.confiance.interactionMoyenne"):T.value<1?S("membres.confiance.beaucoupDinteraction"):T.value===1?_.id===C.value?S("membres.moi"):S("membres.confiance.connaissance"):"");return(B,I)=>B.id!==C.value?(openBlock(),createBlock(_sfc_main$l,{key:0,id:B.id},{activator:withCtx(({props:M})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$n,mergeProps({key:0},M,{confiance:T.value,"cest-moi":B.id===C.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},M,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$n,{confiance:T.value,"cest-moi":B.id===C.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(A.value),1)]),_:2},1040))]),_:1},8,["id"])):(openBlock(),createBlock(VTooltip,{key:1,text:A.value},{activator:withCtx(({props:M})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$n,mergeProps({key:0},M,{confiance:T.value,"cest-moi":B.id===C.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},M,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$n,{confiance:T.value,"cest-moi":B.id===C.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(A.value),1)]),_:2},1040))]),_:1},8,["text"]))}}),_sfc_main$j=defineComponent$1({__name:"ItemConnexionConstellation",props:{compte:{},dispositifs:{}},setup(n){const _=n,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),{formatterChiffre:C}=utiliserNumration(),{traduireNom:T}=utiliserLangues(),A=ref$1({}),B=T(A);enregistrercoute(x?.profil.suivreNoms({idCompte:_.compte,f:D=>A.value=D}));const I=C(computed(()=>_.dispositifs.length)),M=computed(()=>_.dispositifs.filter(D=>!D.vu).length),O=C(M);return(D,L)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$C,{id:D.compte},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(B)||unref(S)("communs.anonyme"))+" ",1),createVNode(_sfc_main$k,{id:D.compte,"style-jeton":"icne"},null,8,["id"])]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("pages.compte.connexions.dispositifs",{nDispositifs:unref(I),nDispositifsEnLigne:unref(O)})),1)]),_:1})]),_:1}))}}),_sfc_main$i=defineComponent$1({__name:"ItemConnexionSFIP",props:{adresse:{},pair:{}},setup(n){return(_,x)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-web")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.adresse),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.pair),1)]),_:1})]),_:1}))}}),ouvrirLien=n=>{window.open(n)};async function copier(n){await navigator.clipboard?.writeText(n)}const ajusterTexteTraductible=({anciennes:n,nouvelles:_})=>{const x=Object.keys(n).filter(S=>!Object.keys(_).includes(S)),E=Object.fromEntries(Object.entries(_).filter(([S,C])=>n[S]!==C));return{Effacer:x,Ajouter:E}},_sfc_main$h=defineComponent$1({__name:"MenuContactMembre",props:{type:{},contact:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),{formatterNumro:S}=utiliserNumration(),C=computed(()=>obtIcneContact({type:_.type})),T=computed(()=>["siteInternet","tlgramme","tlphone","courriel","whatsapp"].includes(_.type)),A=async()=>{await copier(_.contact)},B=S(_.contact,"latin"),I=()=>{switch(_.type){case"siteInternet":ouvrirLien(_.contact);break;case"courriel":ouvrirLien(`mailto://${_.contact}`);break;case"whatsapp":{const M=E("membres.menuContact.messageSalut");ouvrirLien(`whatsapp://send?text=${M}&phone=${B.value}`);break}case"tlphone":{ouvrirLien(`tel://${_.contact}`);break}case"tlgrame":{ouvrirLien(`tg://resolve?phone=${B.value}`);break}}};return(M,O)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:D})=>[renderSlot(M.$slots,"activator",normalizeProps(guardReactiveProps({props:D})))]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-content-copy",onClick:A},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("membres.menuContact.copier")),1)]),_:1})]),_:1}),T.value?(openBlock(),createBlock(VListItem,{key:0,"prepend-icon":C.value,onClick:I},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("membres.menuContact.contacter")),1)]),_:1})]),_:1},8,["prepend-icon"])):createCommentVNode("",!0)]),_:1})]),_:3}))}}),_hoisted_1$6={class:"mx-4"},_hoisted_2$2={key:1},_hoisted_3$1={key:2,class:"text-disabled"},_sfc_main$g=defineComponent$1({__name:"CarteMembre",props:{id:{}},setup(n){const _=n,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),{traduireNom:A}=utiliserLangues(),B=ref$1({}),I=A(B);enregistrercoute(x?.profil.suivreNoms({f:O=>B.value=O}));const M=ref$1();return enregistrercoute(x?.profil.suivreContacts({f:O=>M.value=O,idCompte:_.id})),(O,D)=>{const L=resolveComponent("jeton-contact-membre");return openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":D[1]||(D[1]=V=>T.value=V),"max-width":unref(C)?500:300},{activator:withCtx(({props:V})=>[renderSlot(O.$slots,"activator",normalizeProps(guardReactiveProps({props:V})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$C,{id:O.id},null,8,["id"]),createBaseVNode("span",_hoisted_1$6,toDisplayString$1(unref(I)||unref(S)("communs.anonyme")),1),unref(C)?(openBlock(),createBlock(_sfc_main$k,{key:0,id:O.id,"style-jeton":"jeton"},null,8,["id"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[unref(C)?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$k,{key:0,id:O.id,"style-jeton":"jeton"},null,8,["id"])),createVNode(_sfc_main$o,{titre:unref(S)("membres.contacts"),"en-attente":!M.value},null,8,["titre","en-attente"]),M.value?(openBlock(),createElementBlock("span",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,({type:V,contact:U})=>(openBlock(),createBlock(_sfc_main$h,{key:V,type:V,contact:U},{activator:withCtx(({props:q})=>[createVNode(L,mergeProps(q,{type:V,contact:U,size:"small"}),null,16,["type","contact"])]),_:2},1032,["type","contact"]))),128))])):(openBlock(),createElementBlock("p",_hoisted_3$1,toDisplayString$1(unref(S)("membres.aucunContact")),1))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:D[0]||(D[0]=V=>T.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"])}}}),_hoisted_1$5={key:0},_hoisted_2$1={key:1},_sfc_main$f=defineComponent$1({__name:"OngletConnexions",setup(n){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1("Constellation"),C=computed(()=>{switch(S.value){case"SFIP":return E("pages.compte.connexions.titreSFIP");case"Constellation":return E("pages.compte.connexions.titreConstellation");default:return""}}),T=ref$1();enregistrercoute(_?.rseau?.suivreConnexionsPostesSFIP({f:I=>T.value=I}));const A=ref$1();enregistrercoute(_?.rseau?.suivreConnexionsDispositifs({f:I=>A.value=I}));const B=computed(()=>[...new Set(A.value?.map(M=>M.infoDispositif.idCompte))||[]].map(M=>({idCompte:M,dispositifs:A.value?.filter(O=>O.infoDispositif.idCompte===M)||[]})));return(I,M)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VRadioGroup,{modelValue:S.value,"onUpdate:modelValue":M[0]||(M[0]=O=>S.value=O),inline:""},{default:withCtx(()=>[createVNode(VRadio,{label:unref(E)("pages.compte.connexions.Constellation"),value:"Constellation"},null,8,["label"]),createVNode(VRadio,{value:"SFIP"},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VTooltip,{text:unref(E)("pages.compte.connexions.indiceSFIP"),location:"bottom"},{activator:withCtx(({props:O})=>[createBaseVNode("p",normalizeProps(guardReactiveProps(O)),toDisplayString$1(unref(E)("pages.compte.connexions.SFIP")),17)]),_:1},8,["text"])])]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$o,{titre:C.value,"en-attente":!T.value},null,8,["titre","en-attente"]),S.value==="Constellation"?(openBlock(),createElementBlock("div",_hoisted_1$5,[A.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,O=>(openBlock(),createBlock(_sfc_main$g,{id:O.idCompte,key:O.idCompte},{activator:withCtx(({props:D})=>[createVNode(_sfc_main$j,mergeProps(D,{compte:O.idCompte,dispositifs:O.dispositifs}),null,16,["compte","dispositifs"])]),_:2},1032,["id"]))),128))]),_:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_2$1,[T.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(T.value,O=>(openBlock(),createBlock(_sfc_main$i,{key:O.adresse,pair:O.pair,adresse:O.adresse},null,8,["pair","adresse"]))),128))]),_:1})):createCommentVNode("",!0)]))]),_:1})]),_:1}))}}),_sfc_main$e=defineComponent$1({__name:"ItemLangueProgrs",props:{code:{},selectionnee:{type:Boolean}},setup(n){const _=n,{__:x,__:E}=_(),{nomLangue:S}=x(),{_:C}=E({:_.code,:""}),T=computed(()=>(C.value?.||0)/(C.value?.||0)),A=S(_.code).value;return(B,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[B.selectionnee?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(A)||B.code),1)]),append:withCtx(()=>[T.value===1?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VProgressCircular,{key:1,"model-value":T.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}}),_sfc_main$d=defineComponent$1({__name:"JetonLangue",props:{code:{}},setup(n){const _=n,{__:x,__:E}=_(),{nomLangue:S}=x(),{_:C}=E({:_.code,:""}),T=computed(()=>(C.value?.||0)/(C.value?.||0)),A=S(_.code).value;return(B,I)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{append:withCtx(()=>[T.value===1?(openBlock(),createBlock(VIcon,{key:0,end:"",color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VIcon,{key:1,end:""},{default:withCtx(()=>[createVNode(VProgressCircular,{"model-value":T.value*100,size:"15",color:"primary"},null,8,["model-value"])]),_:1}))]),default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(A)||B.code)+" ",1)]),_:1}))}}),_sfc_main$c=defineComponent$1({__name:"ItemNumration",props:{code:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),{numration:S,formatterChiffre:C}=utiliserNumration(),T=C(123.45,_.code);return(A,B)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[A.code===unref(S)?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(A.code||unref(E)("communs.auto")),1)]),append:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)),1)]),_:1}))}}),_sfc_main$b=defineComponent$1({__name:"JetonNumration",props:{code:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),{formatterChiffre:S}=utiliserNumration(),C=S(123.45,_.code);return(T,A)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.code||unref(E)("communs.auto"))+" "+toDisplayString$1(unref(C)),1)]),_:1}))}}),VSwitch$1="",makeVSwitchProps=propsFactory({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...makeVInputProps(),...makeVSelectionControlProps()},"VSwitch"),VSwitch=genericComponent()({name:"VSwitch",inheritAttrs:!1,props:makeVSwitchProps(),emits:{"update:focused":n=>!0,"update:modelValue":()=>!0,"update:indeterminate":n=>!0},setup(n,_){let{attrs:x,slots:E}=_;const S=useProxiedModel(n,"indeterminate"),C=useProxiedModel(n,"modelValue"),{loaderClasses:T}=useLoader(n),{isFocused:A,focus:B,blur:I}=useFocus(n),M=ref$1(),O=computed(()=>typeof n.loading=="string"&&n.loading!==""?n.loading:n.color),D=getUid(),L=computed(()=>n.id||`switch-${D}`);function V(){S.value&&(S.value=!1)}function U(q){q.stopPropagation(),q.preventDefault(),M.value?.input?.click()}return useRender(()=>{const[q,H]=filterInputAttrs(x),[W,Q]=VInput.filterProps(n),[re,ce]=VSelectionControl.filterProps(n);return createVNode(VInput,mergeProps({class:["v-switch",{"v-switch--inset":n.inset},{"v-switch--indeterminate":S.value},T.value,n.class],style:n.style},q,W,{id:L.value,focused:A.value}),{...E,default:ne=>{let{id:Y,messagesId:fe,isDisabled:ge,isReadonly:$e,isValid:_e}=ne;return createVNode(VSelectionControl,mergeProps({ref:M},re,{modelValue:C.value,"onUpdate:modelValue":[ae=>C.value=ae,V],id:Y.value,"aria-describedby":fe.value,type:"checkbox","aria-checked":S.value?"mixed":void 0,disabled:ge.value,readonly:$e.value,onFocus:B,onBlur:I},H),{...E,default:()=>createVNode("div",{class:"v-switch__track",onClick:U},null),input:ae=>{let{inputNode:X,icon:F}=ae;return createVNode(Fragment,null,[X,createVNode("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":F||n.loading}]},[createVNode(VScaleTransition,null,{default:()=>[n.loading?createVNode(LoaderSlot,{name:"v-switch",active:!0,color:_e.value===!1?void 0:O.value},{default:z=>E.loader?E.loader(z):createVNode(VProgressCircular,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):F&&createVNode(VIcon,{key:F,icon:F,size:"x-small"},null)]})])])}})}})}),{}}}),_hoisted_1$4={class:"d-flex flex-wrap"},_hoisted_2={class:"px-0 mb-0 text-overline"},_hoisted_3={class:"px-0 mb-0 text-overline"},_hoisted_4={class:"px-0 mb-0 text-overline"},_sfc_main$a=defineComponent$1({__name:"OngletThme",setup(n){const{useI18n:_,__:x}=_(),{langue:E,choisirLangues:S}=utiliserLangues(),{numration:C,systmesNumration:T}=utiliserNumration(),{t:A}=_(),B=utilisertatThme(),I=useTheme(),M=ref$1(B.couleur),O=ref$1(B.thmeImages);watchEffect(()=>{B.couleur=M.value,I.global.name.value=M.value}),watchEffect(()=>{B.thmeImages=O.value});const D=ref$1(E.value),{codesLanguesDisponibles:L}=x();watchEffect(()=>{D.value=E.value}),watch(D,()=>{E.value!==D.value&&S(D.value)});const V=ref$1(C.value);return(U,q)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$4,[createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_2,toDisplayString$1(unref(A)("pages.compte.options.couleurs")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VSwitch,{modelValue:M.value,"onUpdate:modelValue":q[0]||(q[0]=H=>M.value=H),color:"primary","true-value":"dark","false-value":"light",inset:"",label:unref(A)("pages.compte.options.thmeNuit")},{prepend:withCtx(()=>[createVNode(VIcon,{icon:M.value==="dark"?"mdi-weather-night":"mdi-white-balance-sunny",color:M.value==="dark"?"primary":void 0},null,8,["icon","color"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3,toDisplayString$1(unref(A)("pages.compte.options.culture")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VRadioGroup,{modelValue:O.value,"onUpdate:modelValue":q[1]||(q[1]=H=>O.value=H),label:unref(A)("pages.compte.options.thmeImages"),class:"mt-0"},{default:withCtx(()=>[createVNode(VRadio,{value:"unDraw",label:unref(A)("pages.compte.options.unDraw")},null,8,["label"]),createVNode(VRadio,{value:"",label:unref(A)("pages.compte.options.")},null,8,["label"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_4,toDisplayString$1(unref(A)("pages.compte.options.langue")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VAutocomplete,{modelValue:D.value,"onUpdate:modelValue":q[2]||(q[2]=H=>D.value=H),items:unref(L),label:unref(A)("pages.compte.options.langue"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-earth",class:"pb-5"},{item:withCtx(({item:H,props:W})=>[createVNode(_sfc_main$e,mergeProps(W,{code:H.value,selectionnee:H.value===unref(E)}),null,16,["code","selectionnee"])]),selection:withCtx(({item:H})=>[createVNode(_sfc_main$d,{code:H.value},null,8,["code"])]),_:1},8,["modelValue","items","label"]),createVNode(VAutocomplete,{modelValue:V.value,"onUpdate:modelValue":q[3]||(q[3]=H=>V.value=H),items:[null,...unref(T)],label:unref(A)("compte.options.numration"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-abacus",class:"py-5"},{selection:withCtx(({item:H})=>[createVNode(_sfc_main$b,{code:H.value},null,8,["code"])]),item:withCtx(({props:H,item:W})=>[createVNode(_sfc_main$c,mergeProps(H,{code:W.value}),null,16,["code"])]),_:1},8,["modelValue","items","label"])]),_:1})])]),_:1})]),_:1}))}}),_sfc_main$9=defineComponent$1({__name:"LienObjet",props:{id:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=async()=>{await copier(_.id),S.value=!0};return(T,A)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:B})=>[createVNode(VTooltip,{text:unref(E)("lienObjet.indice")},{activator:withCtx(({props:I})=>[createVNode(VBtn,mergeProps(mergeProps(B,I),{icon:"mdi-link",size:"small",variant:"flat"}),null,16)]),_:2},1032,["text"])]),default:withCtx(()=>[createVNode(VList,{onClick:A[0]||(A[0]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createVNode(VListItem,null,{title:withCtx(()=>[createTextVNode(toDisplayString$1(T.id),1)]),append:withCtx(()=>[createVNode(VBtn,{icon:S.value?"mdi-check":"mdi-content-copy",size:"small",variant:"flat",onClick:C},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}}),VBadge$1="",makeVBadgeProps=propsFactory({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:IconValue,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...makeComponentProps(),...makeLocationProps({location:"top end"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeTransitionProps$1({transition:"scale-rotate-transition"})},"VBadge"),VBadge=genericComponent()({name:"VBadge",inheritAttrs:!1,props:makeVBadgeProps(),setup(n,_){const{backgroundColorClasses:x,backgroundColorStyles:E}=useBackgroundColor(toRef(n,"color")),{roundedClasses:S}=useRounded(n),{t:C}=useLocale(),{textColorClasses:T,textColorStyles:A}=useTextColor(toRef(n,"textColor")),{themeClasses:B}=useTheme(),{locationStyles:I}=useLocation(n,!0,M=>(n.floating?n.dot?2:4:n.dot?8:12)+(["top","bottom"].includes(M)?+(n.offsetY??0):["left","right"].includes(M)?+(n.offsetX??0):0));return useRender(()=>{const M=Number(n.content),O=!n.max||isNaN(M)?n.content:M<=+n.max?M:`${n.max}+`,[D,L]=pick$1(_.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return createVNode(n.tag,mergeProps({class:["v-badge",{"v-badge--bordered":n.bordered,"v-badge--dot":n.dot,"v-badge--floating":n.floating,"v-badge--inline":n.inline},n.class]},L,{style:n.style}),{default:()=>[createVNode("div",{class:"v-badge__wrapper"},[_.slots.default?.(),createVNode(MaybeTransition,{transition:n.transition},{default:()=>[withDirectives(createVNode("span",mergeProps({class:["v-badge__badge",B.value,x.value,S.value,T.value],style:[E.value,A.value,n.inline?{}:I.value],"aria-atomic":"true","aria-label":C(n.label,M),"aria-live":"polite",role:"status"},D),[n.dot?void 0:_.slots.badge?_.slots.badge?.():n.icon?createVNode(VIcon,{icon:n.icon},null):O]),[[vShow,n.modelValue]])]})])]})}),{}}}),_sfc_main$8=defineComponent$1({__name:"ItemDispositif",props:{idDispositif:{},idCompte:{},vuA:{}},setup(n){const _=n,{useI18n:x}=_(),{t:E}=x(),S=inject$1("constl"),{nomDispositif:C,typeDispositif:T}=utiliserNomEtTypeDispositif({idDispositif:_.idDispositif,idCompte:_.idCompte}),A=computed(()=>obtIcneDispositifDeType(T.value)),{ilYAMs:B,texte:I}=utiliserIlYA({vu:_.vuA,t:E}),M=ref$1();onMounted(async()=>{M.value=await S?.obtIdDispositif()});const O=computed(()=>_.idDispositif===M.value?E("dispositifs.ceDispositif"):I.value),D=computed(()=>{if(B.value===void 0||B.value<=1e3*60*5)return"success";if(B.value<=1e3*60*30)return"warning"});return(L,V)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[D.value?(openBlock(),createBlock(VBadge,{key:0,dot:"",color:D.value,location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1},8,["color"])):(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1}))]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)||unref(E)("dispositifs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(O.value),1)]),append:withCtx(()=>[createVNode(_sfc_main$9,{id:L.idDispositif},null,8,["id"])]),default:withCtx(()=>[L.idCompte?(openBlock(),createBlock(_sfc_main$m,{key:0,compte:L.idCompte},null,8,["compte"])):createCommentVNode("",!0),renderSlot(L.$slots,"default")]),_:3}))}}),_hoisted_1$3={class:"px-0 mb-0 text-h6"},_sfc_main$7=defineComponent$1({__name:"OngletCompte",setup(n){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.suivreDispositifs({f:T=>S.value=T}));const C=ref$1();return enregistrercoute(_?.rseau?.suivreConnexionsDispositifs({f:T=>C.value=T})),(T,A)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$3,toDisplayString$1(unref(E)("pages.compte.compte.mesDispositifs")),1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,B=>(openBlock(),createBlock(_sfc_main$8,{key:B,"id-dispositif":B,"vu-a":C.value?.find(I=>I.infoDispositif.idDispositif===B)?.vu},null,8,["id-dispositif","vu-a"]))),128))]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$2={class:"mb-4"},_sfc_main$6=defineComponent$1({__name:"NouvelleInfoContact",props:{dejaPresents:{}},setup(n){const _=n,{mdAndUp:x}=useDisplay(),E=inject$1("constl"),{useI18n:S}=_(),{t:C}=S(),T=ref$1(!1),A=ref$1(),B=ref$1(),I=ref$1(),M=ref$1(!1),O=computed(()=>[...["courriel","siteInternet","tlphone","tlgramme","whatsapp"].filter(U=>!_.dejaPresents.includes(U)),"autre"]),D=computed(()=>{if(!A.value||!B.value)return;const U=B.value==="autre"?I.value:B.value;if(U)return{valeur:A.value,type:U}}),L=async()=>{M.value=!0,D.value&&(await E?.profil.sauvegarderContact({type:D.value.type,contact:D.value.valeur}),M.value=!1,V())},V=()=>{T.value=!1,A.value=void 0,I.value=void 0,B.value=void 0};return(U,q)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":q[3]||(q[3]=H=>T.value=H),"max-width":unref(x)?500:300},{activator:withCtx(({props:H})=>[renderSlot(U.$slots,"activator",normalizeProps(guardReactiveProps({props:H})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("membres.nouvelleInfoContact.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$2,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(C)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VSelect,{modelValue:B.value,"onUpdate:modelValue":q[0]||(q[0]=H=>B.value=H),variant:"outlined",items:O.value,label:unref(C)("membres.nouvelleInfoContact.indiceType")},{item:withCtx(({item:H,props:W})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(W)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:H.title})},null,8,["icon"])]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)(`membres.contact.${H.title}`)),1)]),_:2},1040)]),selection:withCtx(({item:H})=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:H.title}),start:""},null,8,["icon"]),createTextVNode(" "+toDisplayString$1(unref(C)(`membres.contact.${H.title}`)),1)]),_:1},8,["modelValue","items","label"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VTextField,{modelValue:I.value,"onUpdate:modelValue":q[1]||(q[1]=H=>I.value=H),label:unref(C)("membres.nouvelleInfoContact.indiceAutreType"),variant:"outlined"},null,8,["modelValue","label"]),[[vShow,B.value==="autre"]])]),_:1}),createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":q[2]||(q[2]=H=>A.value=H),variant:"outlined",disabled:!B.value,label:unref(C)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":B.value?unref(obtIcneContact)({type:B.value}):void 0},null,8,["modelValue","disabled","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!D.value,loading:M.value,onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$5=defineComponent$1({__name:"JetonContactMembre",props:{type:{},contact:{}},setup(n){const _=n,{formatterNumro:x}=utiliserNumration(),E=computed(()=>obtIcneContact({type:_.type})),S=x(_.contact),C=computed(()=>{switch(_.type){case"tlphone":case"whatsapp":case"telegram":return S.value;default:return _.contact}});return(T,A)=>(openBlock(),createBlock(VChip,{class:"ma-2",variant:"outlined",label:"","prepend-icon":E.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1},8,["prepend-icon"]))}}),_hoisted_1$1={class:"mb-4"},_sfc_main$4=defineComponent$1({__name:"ModifierInfoContactMembre",props:{type:{},valeurAvant:{}},setup(n){const _=n,{mdAndUp:x}=useDisplay(),E=inject$1("constl"),{useI18n:S}=_(),{t:C}=S(),T=ref$1(!1),A=ref$1(_.valeurAvant),B=ref$1(!1);watchEffect(()=>{A.value=_.valeurAvant});const I=computed(()=>{if(A.value)return{valeur:A.value,type:_.type}}),M=async()=>{B.value=!0,I.value&&(await E?.profil.sauvegarderContact({type:I.value.type,contact:I.value.valeur}),B.value=!1,D())},O=async()=>{await E?.profil.effacerContact({type:_.type,contact:_.valeurAvant})},D=()=>{T.value=!1};return(L,V)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":V[1]||(V[1]=U=>T.value=U),"max-width":unref(x)?500:300},{activator:withCtx(({props:U})=>[renderSlot(L.$slots,"activator",normalizeProps(guardReactiveProps({props:U})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("membres.modifierInfoContact.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:D})]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$1,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(C)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":V[0]||(V[0]=U=>A.value=U),variant:"outlined",label:unref(C)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":L.type?unref(obtIcneContact)({type:L.type}):void 0},null,8,["modelValue","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",color:"error",onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.effacer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!I.value,loading:B.value,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),VTabs$1="",VTab$1="",VTabsSymbol=Symbol.for("vuetify:v-tabs"),makeVTabProps=propsFactory({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...omit(makeVBtnProps({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),VTab=genericComponent()({name:"VTab",props:makeVTabProps(),setup(n,_){let{slots:x,attrs:E}=_;const{textColorClasses:S,textColorStyles:C}=useTextColor(n,"sliderColor"),T=computed(()=>n.direction==="horizontal"),A=shallowRef(!1),B=ref$1(),I=ref$1();function M(O){let{value:D}=O;if(A.value=D,D){const L=B.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),V=I.value;if(!L||!V)return;const U=getComputedStyle(L).color,q=L.getBoundingClientRect(),H=V.getBoundingClientRect(),W=T.value?"x":"y",Q=T.value?"X":"Y",re=T.value?"right":"bottom",ce=T.value?"width":"height",ne=q[W],Y=H[W],fe=ne>Y?q[re]-H[re]:q[W]-H[W],ge=Math.sign(fe)>0?T.value?"right":"bottom":Math.sign(fe)<0?T.value?"left":"top":"center",_e=(Math.abs(fe)+(Math.sign(fe)<0?q[ce]:H[ce]))/Math.max(q[ce],H[ce]),ae=q[ce]/H[ce],X=1.5;animate(V,{backgroundColor:[U,"currentcolor"],transform:[`translate${Q}(${fe}px) scale${Q}(${ae})`,`translate${Q}(${fe/X}px) scale${Q}(${(_e-1)/X+1})`,"none"],transformOrigin:Array(3).fill(ge)},{duration:225,easing:standardEasing})}}return useRender(()=>{const[O]=VBtn.filterProps(n);return createVNode(VBtn,mergeProps({symbol:VTabsSymbol,ref:B,class:["v-tab",n.class],style:n.style,tabindex:A.value?0:-1,role:"tab","aria-selected":String(A.value),active:!1,block:n.fixed,maxWidth:n.fixed?300:void 0,rounded:0},O,E,{"onGroup:selected":M}),{default:()=>[x.default?.()??n.text,!n.hideSlider&&createVNode("div",{ref:I,class:["v-tab__slider",S.value],style:C.value},null)]})}),{}}}),VSlideGroup$1="";function bias(n){const x=Math.abs(n);return Math.sign(n)*(x/((1/.501-2)*(1-x)+1))}function calculateUpdatedOffset(n){let{selectedElement:_,containerSize:x,contentSize:E,isRtl:S,currentScrollOffset:C,isHorizontal:T}=n;const A=T?_.clientWidth:_.clientHeight,B=T?_.offsetLeft:_.offsetTop,I=S&&T?E-B-A:B,M=x+C,O=A+I,D=A*.4;return I<=C?C=Math.max(I-D,0):M<=O&&(C=Math.min(C-(M-O-D),E-x)),C}function calculateCenteredOffset(n){let{selectedElement:_,containerSize:x,contentSize:E,isRtl:S,isHorizontal:C}=n;const T=C?_.clientWidth:_.clientHeight,A=C?_.offsetLeft:_.offsetTop,B=S&&C?E-A-T/2-x/2:A+T/2-x/2;return Math.min(E-x,Math.max(0,B))}const VSlideGroupSymbol=Symbol.for("vuetify:v-slide-group"),makeVSlideGroupProps=propsFactory({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:VSlideGroupSymbol},nextIcon:{type:IconValue,default:"$next"},prevIcon:{type:IconValue,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...makeComponentProps(),...makeTagProps(),...makeGroupProps({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),VSlideGroup=genericComponent()({name:"VSlideGroup",props:makeVSlideGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const{isRtl:E}=useRtl(),{mobile:S}=useDisplay(),C=useGroup(n,n.symbol),T=shallowRef(!1),A=shallowRef(0),B=shallowRef(0),I=shallowRef(0),M=computed(()=>n.direction==="horizontal"),{resizeRef:O,contentRect:D}=useResizeObserver(),{resizeRef:L,contentRect:V}=useResizeObserver(),U=computed(()=>C.selected.value.length?C.items.value.findIndex(ie=>ie.id===C.selected.value[0]):-1),q=computed(()=>C.selected.value.length?C.items.value.findIndex(ie=>ie.id===C.selected.value[C.selected.value.length-1]):-1);if(IN_BROWSER){let ie=-1;watch(()=>[C.selected.value,D.value,V.value,M.value],()=>{cancelAnimationFrame(ie),ie=requestAnimationFrame(()=>{if(D.value&&V.value){const G=M.value?"width":"height";B.value=D.value[G],I.value=V.value[G],T.value=B.value+1<I.value}if(U.value>=0&&L.value){const G=L.value.children[q.value];U.value===0||!T.value?A.value=0:n.centerActive?A.value=calculateCenteredOffset({selectedElement:G,containerSize:B.value,contentSize:I.value,isRtl:E.value,isHorizontal:M.value}):T.value&&(A.value=calculateUpdatedOffset({selectedElement:G,containerSize:B.value,contentSize:I.value,isRtl:E.value,currentScrollOffset:A.value,isHorizontal:M.value}))}})})}const H=shallowRef(!1);let W=0,Q=0;function re(ie){const G=M.value?"clientX":"clientY";Q=(E.value&&M.value?-1:1)*A.value,W=ie.touches[0][G],H.value=!0}function ce(ie){if(!T.value)return;const G=M.value?"clientX":"clientY",j=E.value&&M.value?-1:1;A.value=j*(Q+W-ie.touches[0][G])}function ne(ie){const G=I.value-B.value;A.value<0||!T.value?A.value=0:A.value>=G&&(A.value=G),H.value=!1}function Y(){O.value&&(O.value[M.value?"scrollLeft":"scrollTop"]=0)}const fe=shallowRef(!1);function ge(ie){if(fe.value=!0,!(!T.value||!L.value)){for(const G of ie.composedPath())for(const j of L.value.children)if(j===G){A.value=calculateUpdatedOffset({selectedElement:j,containerSize:B.value,contentSize:I.value,isRtl:E.value,currentScrollOffset:A.value,isHorizontal:M.value});return}}}function $e(ie){fe.value=!1}function _e(ie){!fe.value&&!(ie.relatedTarget&&L.value?.contains(ie.relatedTarget))&&X()}function ae(ie){L.value&&(M.value?ie.key==="ArrowRight"?X(E.value?"prev":"next"):ie.key==="ArrowLeft"&&X(E.value?"next":"prev"):ie.key==="ArrowDown"?X("next"):ie.key==="ArrowUp"&&X("prev"),ie.key==="Home"?X("first"):ie.key==="End"&&X("last"))}function X(ie){if(L.value)if(!ie)focusableChildren(L.value)[0]?.focus();else if(ie==="next"){const G=L.value.querySelector(":focus")?.nextElementSibling;G?G.focus():X("first")}else if(ie==="prev"){const G=L.value.querySelector(":focus")?.previousElementSibling;G?G.focus():X("last")}else ie==="first"?L.value.firstElementChild?.focus():ie==="last"&&L.value.lastElementChild?.focus()}function F(ie){const G=A.value+(ie==="prev"?-1:1)*B.value;A.value=clamp(G,0,I.value-B.value)}const z=computed(()=>{let ie=A.value>I.value-B.value?-(I.value-B.value)+bias(I.value-B.value-A.value):-A.value;A.value<=0&&(ie=bias(-A.value));const G=E.value&&M.value?-1:1;return{transform:`translate${M.value?"X":"Y"}(${G*ie}px)`,transition:H.value?"none":"",willChange:H.value?"transform":""}}),J=computed(()=>({next:C.next,prev:C.prev,select:C.select,isSelected:C.isSelected})),te=computed(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!S.value;case!0:return T.value||Math.abs(A.value)>0;case"mobile":return S.value||T.value||Math.abs(A.value)>0;default:return!S.value&&(T.value||Math.abs(A.value)>0)}}),se=computed(()=>Math.abs(A.value)>0),oe=computed(()=>I.value>Math.abs(A.value)+B.value);return useRender(()=>createVNode(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!M.value,"v-slide-group--has-affixes":te.value,"v-slide-group--is-overflowing":T.value},n.class],style:n.style,tabindex:fe.value||C.selected.value.length?-1:0,onFocus:_e},{default:()=>[te.value&&createVNode("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!se.value}],onClick:()=>F("prev")},[x.prev?.(J.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:E.value?n.nextIcon:n.prevIcon},null)]})]),createVNode("div",{key:"container",ref:O,class:"v-slide-group__container",onScroll:Y},[createVNode("div",{ref:L,class:"v-slide-group__content",style:z.value,onTouchstartPassive:re,onTouchmovePassive:ce,onTouchendPassive:ne,onFocusin:ge,onFocusout:$e,onKeydown:ae},[x.default?.(J.value)])]),te.value&&createVNode("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!oe.value}],onClick:()=>F("next")},[x.next?.(J.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:E.value?n.prevIcon:n.nextIcon},null)]})])]})),{selected:C.selected,scrollTo:F,scrollOffset:A,focus:X}}});function parseItems(n){return n?n.map(_=>typeof _=="string"?{title:_,value:_}:_):[]}const makeVTabsProps=propsFactory({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...makeVSlideGroupProps({mandatory:"force"}),...makeDensityProps(),...makeTagProps()},"VTabs"),VTabs=genericComponent()({name:"VTabs",props:makeVTabsProps(),emits:{"update:modelValue":n=>!0},setup(n,_){let{slots:x}=_;const E=useProxiedModel(n,"modelValue"),S=computed(()=>parseItems(n.items)),{densityClasses:C}=useDensity(n),{backgroundColorClasses:T,backgroundColorStyles:A}=useBackgroundColor(toRef(n,"bgColor"));return provideDefaults({VTab:{color:toRef(n,"color"),direction:toRef(n,"direction"),stacked:toRef(n,"stacked"),fixed:toRef(n,"fixedTabs"),sliderColor:toRef(n,"sliderColor"),hideSlider:toRef(n,"hideSlider")}}),useRender(()=>{const[B]=VSlideGroup.filterProps(n);return createVNode(VSlideGroup,mergeProps(B,{modelValue:E.value,"onUpdate:modelValue":I=>E.value=I,class:["v-tabs",`v-tabs--${n.direction}`,`v-tabs--align-tabs-${n.alignTabs}`,{"v-tabs--fixed-tabs":n.fixedTabs,"v-tabs--grow":n.grow,"v-tabs--stacked":n.stacked},C.value,T.value,n.class],style:[{"--v-tabs-height":convertToUnit(n.height)},A.value,n.style],role:"tablist",symbol:VTabsSymbol}),{default:()=>[x.default?x.default():S.value.map(I=>createVNode(VTab,mergeProps(I,{key:I.title}),null))]})}),{}}}),_hoisted_1={class:"mb-2"},_sfc_main$3=defineComponent$1({__name:"PageCompte",setup(n){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=ref$1();enregistrercoute(_?.suivreIdCompte({f:H=>C.value=H}));const T=ref$1(),A=computed(()=>{if(T.value)return URL.createObjectURL(new Blob([T.value],{type:"image"}))});enregistrercoute(_?.profil.suivreImage({f:H=>T.value=H}));const{obtImageDco:B}=utiliserImagesDco(),I=B("profil"),M=async H=>{H?await _?.profil.sauvegarderImage({image:H}):await _?.profil.effacerImage()},{traduireNom:O}=utiliserLangues(),D=ref$1({}),L=O(D);enregistrercoute(_?.profil.suivreNoms({f:H=>D.value=H}));const V=async H=>{const{Effacer:W,Ajouter:Q}=ajusterTexteTraductible({anciennes:D.value,nouvelles:H});for(const[re,ce]of Object.entries(Q))await _?.profil.sauvegarderNom({langue:re,nom:ce});for(const re of W)await _?.profil.effacerNom({langue:re})},U=ref$1();enregistrercoute(_?.profil.suivreContacts({f:H=>U.value=H}));const q=ref$1("compte");return(H,W)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$t,{titre:unref(E)("..")},null,8,["titre"]),createVNode(ImageEditable,{"src-image":A.value,"img-defaut":unref(I),"taille-avatar":unref(S)?275:175,editable:!0,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),onImageChangee:W[0]||(W[0]=Q=>M(Q))},null,8,["src-image","img-defaut","taille-avatar","max-taille-image"]),createBaseVNode("h1",_hoisted_1,[createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(L)})},toDisplayString$1(unref(L)||unref(E)("communs.anonyme")),3),createVNode(_sfc_main$p,{"indice-nom":unref(E)("listeNomsProfil.indiceNom"),"indice-langue":unref(E)("listeNomsProfil.indiceLangue"),"texte-aucun-nom":unref(E)("listeNomsProfil.texteAucunNom"),"noms-initiaux":D.value,titre:unref(E)("pages.compte.titreDialogueNoms"),"sous-titre":unref(E)("pages.compte.sousTitreDialogueNoms"),"autorisation-modification":"",onAjusterNoms:W[1]||(W[1]=Q=>V(Q))},{activator:withCtx(({props:Q})=>[createVNode(VBtn,mergeProps(Q,{icon:"mdi-pencil",variant:"flat"}),null,16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre"]),C.value?(openBlock(),createBlock(_sfc_main$9,{key:0,id:C.value},null,8,["id"])):createCommentVNode("",!0)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(U.value||[],({type:Q,contact:re})=>(openBlock(),createBlock(_sfc_main$4,{key:re+"|"+Q,type:Q,"valeur-avant":re},{activator:withCtx(({props:ce})=>[createVNode(_sfc_main$5,mergeProps(ce,{type:Q,contact:re}),null,16,["type","contact"])]),_:2},1032,["type","valeur-avant"]))),128)),createVNode(_sfc_main$6,{"deja-presents":Object.keys(U.value||{})},{activator:withCtx(({props:Q})=>[createVNode(VChip,mergeProps(Q,{class:"mx-2 text-disabled",variant:"outlined",label:"","append-icon":"mdi-plus"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pages.compte.nouveauContact")),1)]),_:2},1040)]),_:1},8,["deja-presents"]),createVNode(VTabs,{modelValue:q.value,"onUpdate:modelValue":W[2]||(W[2]=Q=>q.value=Q)},{default:withCtx(()=>[createVNode(VTab,{value:"compte"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pages.compte.ongletCompte")),1)]),_:1}),createVNode(VTab,{value:"thme"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pages.compte.ongletThme")),1)]),_:1}),createVNode(VTab,{value:"connexions"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pages.compte.ongletConnexions")),1)]),_:1})]),_:1},8,["modelValue"]),createVNode(VWindow,{modelValue:q.value,"onUpdate:modelValue":W[3]||(W[3]=Q=>q.value=Q)},{default:withCtx(()=>[createVNode(VWindowItem,{value:"compte"},{default:withCtx(()=>[createVNode(_sfc_main$7)]),_:1}),createVNode(VWindowItem,{value:"thme"},{default:withCtx(()=>[createVNode(_sfc_main$a)]),_:1}),createVNode(VWindowItem,{value:"connexions"},{default:withCtx(()=>[createVNode(_sfc_main$f)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),_sfc_main$2=defineComponent$1({__name:"PageDonnes",setup(n){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{obtImageDco:S}=utiliserImagesDco(),C=S("automatisation"),T=ref$1();return enregistrercoute(_?.favoris.suivreFavoris({f:A=>T.value=A})),(A,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$t,{titre:unref(E)(".."),image:unref(C),"sous-titre":unref(E)("pages.favoris.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus",title:unref(E)("pages.favoris.commentAjouterNouveau.titre"),subtitle:unref(E)("pages.favoris.commentAjouterNouveau.sousTitre"),onClick:B[0]||(B[0]=I=>A.$router.push(encodeURI("/donnes/")))},null,8,["title","subtitle"])]),_:1})]),_:1}))}}),_sfc_main$1=defineComponent$1({__name:"PageRseau",setup(n){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{obtImageDco:S}=utiliserImagesDco(),C=S("automatisation"),T=ref$1();return enregistrercoute(_?.automatisations.suivreAutomatisations({f:A=>T.value=A})),(A,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$t,{titre:unref(E)("pages.automatisations.titre"),image:unref(C),"sous-titre":unref(E)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"])]),_:1}))}}),_sfc_main=defineComponent$1({__name:"PageSignalements",setup(n){const{useI18n:_}=_(),{t:x}=_(),{obtImageDco:E}=utiliserImagesDco(),S=E("problme");return(C,T)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$t,{titre:unref(x)("pages.signalements.titre"),image:unref(S),"sous-titre":unref(x)("pages.signalements.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",color:"primary",onClick:T[0]||(T[0]=A=>unref(ouvrirLien)(unref(URL_SIGNALEMENTS)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.signalements.bouton"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-open-in-new ")]),_:1})]),_:1}),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",onClick:T[1]||(T[1]=A=>unref(ouvrirLien)(`mailto:${unref(COURRIEL_SIGNALEMENTS)}`))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.signalements.boutonCourriel"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-email ")]),_:1})]),_:1})]),_:1}))}}),routes=[{path:"/",component:_sfc_main$s},{path:"/compte",name:"Compte",component:_sfc_main$3},{path:encodeURI("/donnes"),name:"Donnes",component:_sfc_main$2},{path:encodeURI("/rseau"),name:"Rseau",component:_sfc_main$1},{path:"/signalements",name:"Signalements",component:_sfc_main}],routeur=createRouter({history:createWebHashHistory(),routes});routeur.afterEach(n=>{const{:_}=n.query;if(_&&typeof _=="string"){const{choisirLangues:x}=utiliserLangues();x(_)}});const messages={:{:{:"",:"",:"",:""},:{:" {version}",:"",:"- ",:{:{:"",:"",:"",:""},:{:""},:{:" "},:{:"",:"",:"","":""},:{:"",:""}}},:{:{:""},:{:""}}}},kilimukku=_({_:"",_:messages}),localisation=gnrerLocalisation({langue:""});function isObject(n){return typeof n=="object"&&n!==null}function normalizeOptions(n,_){return n=isObject(n)?n:Object.create(null),new Proxy(n,{get(x,E,S){return E==="key"?Reflect.get(x,E,S):Reflect.get(x,E,S)||Reflect.get(_,E,S)}})}function get(n,_){return _.reduce((x,E)=>x?.[E],n)}function set(n,_,x){return _.slice(0,-1).reduce((E,S)=>/^(__proto__)$/.test(S)?{}:E[S]=E[S]||{},n)[_[_.length-1]]=x,n}function pick(n,_){return _.reduce((x,E)=>{const S=E.split(".");return set(x,S,get(n,S))},{})}function hydrateStore(n,{storage:_,serializer:x,key:E,debug:S}){try{const C=_?.getItem(E);C&&n.$patch(x?.deserialize(C))}catch(C){S&&console.error(C)}}function persistState(n,{storage:_,serializer:x,key:E,paths:S,debug:C}){try{const T=Array.isArray(S)?pick(n,S):n;_.setItem(E,x.serialize(T))}catch(T){C&&console.error(T)}}function createPersistedState(n={}){return _=>{const{auto:x=!1}=n,{options:{persist:E=x},store:S,pinia:C}=_;if(!E)return;if(!(S.$id in C.state.value)){const A=C._s.get(S.$id.replace("__hot:",""));A&&Promise.resolve().then(()=>A.$persist());return}const T=(Array.isArray(E)?E.map(A=>normalizeOptions(A,n)):[normalizeOptions(E,n)]).map(({storage:A=localStorage,beforeRestore:B=null,afterRestore:I=null,serializer:M={serialize:JSON.stringify,deserialize:JSON.parse},key:O=S.$id,paths:D=null,debug:L=!1})=>{var V;return{storage:A,beforeRestore:B,afterRestore:I,serializer:M,key:((V=n.key)!=null?V:U=>U)(typeof O=="string"?O:O(S.$id)),paths:D,debug:L}});S.$persist=()=>{T.forEach(A=>{persistState(S.$state,A)})},S.$hydrate=({runHooks:A=!0}={})=>{T.forEach(B=>{const{beforeRestore:I,afterRestore:M}=B;A&&I?.(_),hydrateStore(S,B),A&&M?.(_)})},T.forEach(A=>{const{beforeRestore:B,afterRestore:I}=A;B?.(_),hydrateStore(S,A),I?.(_),S.$subscribe((M,O)=>{persistState(O,A)},{detached:!0})})}}var src_default=createPersistedState();const pinia=createPinia();pinia.use(src_default);function registerPlugins(n){loadFonts(),n.use(pinia),n.use(i18n),n.use(vuetify),n.use(routeur),n.use(localisation),n.use(kilimukku)}function inscrireExtentions(n){n.use(constellationNavigateur),registerPlugins(n)}const app=createApp(_sfc_main$u);inscrireExtentions(app);app.mount("#app");export{inquire_1 as $,util$3 as A,ReaderBufferClass as B,CodeError as C,WriterBufferClass as D,unmarshalPublicKey as E,decode$6 as F,encode$9 as G,unmarshalPrivateKey as H,importKey as I,message as J,encodeMessage as K,decodeMessage as L,dagPB as M,encode$m as N,prepare as O,PQueue as P,decode$j as Q,ReaderClass as R,code$6 as S,toBuffer as T,global$1 as U,Level as V,WriterClass as W,aspromise as X,base64$4 as Y,eventemitter as Z,float as _,forgeUtil as a,utf8$5 as a0,pool_1 as a1,randomBytes$1 as a2,marshalPublicKey as a3,dagCBOR$1 as a4,pTimeout as a5,eventsExports as a6,forge$m as a7,forge$n as a8,generateKeyPair as a9,isBrowser$1 as aa,isNode as ab,isElectronMain as ac,isWebWorker as ad,isElectronRenderer$1 as ae,isReactNative as af,marshalPrivateKey as ag,requireBrowser$b as ah,enumeration as ai,AbortError as aj,constantTime as ak,wipe$1 as al,sha256$4 as am,x25519 as an,chacha20poly1305 as ao,__vitePreload as ap,path$1 as aq,browserExports as ar,Buffer$5 as as,allocUnsafe$2 as b,asUint8Array$2 as c,debug as d,browser$1$1 as e,forgePbkdf2 as f,require$$0$2 as g,concat$5 as h,alloc$2 as i,equals as j,getDefaultExportFromCjs as k,fromString$3 as l,commonjsGlobal as m,commonjsRequire$1 as n,isElectron_1 as o,requireMinimal as p,writer_buffer as q,requireCryptoBrowserify as r,reader$1 as s,toString$7 as t,reader_buffer as u,encode$i as v,writer$1 as w,decode$d as x,code$7 as y,getAugmentedNamespace as z};
//# sourceMappingURL=index-e114bcb6.js.map
